function vj(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function qT(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const gj="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",mj=qT(gj);function h8(e){return!!e||e===""}function Dl(e){if(Ft(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=fr(n)?bj(n):Dl(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(fr(e))return e;if(Qe(e))return e}}const _j=/;(?![^(]*\))/g,yj=/:(.+)/;function bj(e){const t={};return e.split(_j).forEach(r=>{if(r){const n=r.split(yj);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function Jr(e){let t="";if(fr(e))t=e;else if(Ft(e))for(let r=0;r<e.length;r++){const n=Jr(e[r]);n&&(t+=n+" ")}else if(Qe(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function wj(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Xl(e[n],t[n]);return r}function Xl(e,t){if(e===t)return!0;let r=Fk(e),n=Fk(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Dd(e),n=Dd(t),r||n)return e===t;if(r=Ft(e),n=Ft(t),r||n)return r&&n?wj(e,t):!1;if(r=Qe(e),n=Qe(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!Xl(e[a],t[a]))return!1}}return String(e)===String(t)}function ZT(e,t){return e.findIndex(r=>Xl(r,t))}const L=e=>fr(e)?e:e==null?"":Ft(e)||Qe(e)&&(e.toString===v8||!Gt(e.toString))?JSON.stringify(e,d8,2):String(e),d8=(e,t)=>t&&t.__v_isRef?d8(e,t.value):Cc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:of(t)?{[`Set(${t.size})`]:[...t.values()]}:Qe(t)&&!Ft(t)&&!g8(t)?String(t):t,Le={},kc=[],Ai=()=>{},Sj=()=>!1,Tj=/^on[^a-z]/,E1=e=>Tj.test(e),KT=e=>e.startsWith("onUpdate:"),tn=Object.assign,JT=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},Pj=Object.prototype.hasOwnProperty,se=(e,t)=>Pj.call(e,t),Ft=Array.isArray,Cc=e=>E0(e)==="[object Map]",of=e=>E0(e)==="[object Set]",Fk=e=>E0(e)==="[object Date]",Gt=e=>typeof e=="function",fr=e=>typeof e=="string",Dd=e=>typeof e=="symbol",Qe=e=>e!==null&&typeof e=="object",p8=e=>Qe(e)&&Gt(e.then)&&Gt(e.catch),v8=Object.prototype.toString,E0=e=>v8.call(e),Ej=e=>E0(e).slice(8,-1),g8=e=>E0(e)==="[object Object]",QT=e=>fr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Eg=qT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),A1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},Aj=/-(\w)/g,Po=A1(e=>e.replace(Aj,(t,r)=>r?r.toUpperCase():"")),kj=/\B([A-Z])/g,af=A1(e=>e.replace(kj,"-$1").toLowerCase()),k1=A1(e=>e.charAt(0).toUpperCase()+e.slice(1)),cy=A1(e=>e?`on${k1(e)}`:""),Nd=(e,t)=>!Object.is(e,t),Ag=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},hm=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},dm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Bk;const Cj=()=>Bk||(Bk=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let so;class m8{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&so&&(this.parent=so,this.index=(so.scopes||(so.scopes=[])).push(this)-1)}run(t){if(this.active){const r=so;try{return so=this,t()}finally{so=r}}}on(){so=this}off(){so=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function _8(e){return new m8(e)}function Mj(e,t=so){t&&t.active&&t.effects.push(e)}const tP=e=>{const t=new Set(e);return t.w=0,t.n=0,t},y8=e=>(e.w&Ps)>0,b8=e=>(e.n&Ps)>0,xj=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Ps},Lj=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];y8(i)&&!b8(i)?i.delete(e):t[r++]=i,i.w&=~Ps,i.n&=~Ps}t.length=r}},Xw=new WeakMap;let Gh=0,Ps=1;const Yw=30;let yi;const Nl=Symbol(""),qw=Symbol("");class eP{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,Mj(this,n)}run(){if(!this.active)return this.fn();let t=yi,r=ms;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=yi,yi=this,ms=!0,Ps=1<<++Gh,Gh<=Yw?xj(this):$k(this),this.fn()}finally{Gh<=Yw&&Lj(this),Ps=1<<--Gh,yi=this.parent,ms=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){yi===this?this.deferStop=!0:this.active&&($k(this),this.onStop&&this.onStop(),this.active=!1)}}function $k(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let ms=!0;const w8=[];function sf(){w8.push(ms),ms=!1}function lf(){const e=w8.pop();ms=e===void 0?!0:e}function Mn(e,t,r){if(ms&&yi){let n=Xw.get(e);n||Xw.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=tP()),S8(i)}}function S8(e,t){let r=!1;Gh<=Yw?b8(e)||(e.n|=Ps,r=!y8(e)):r=!e.has(yi),r&&(e.add(yi),yi.deps.push(e))}function ca(e,t,r,n,i,o){const a=Xw.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&Ft(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(r!==void 0&&s.push(a.get(r)),t){case"add":Ft(e)?QT(r)&&s.push(a.get("length")):(s.push(a.get(Nl)),Cc(e)&&s.push(a.get(qw)));break;case"delete":Ft(e)||(s.push(a.get(Nl)),Cc(e)&&s.push(a.get(qw)));break;case"set":Cc(e)&&s.push(a.get(Nl));break}if(s.length===1)s[0]&&Zw(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);Zw(tP(l))}}function Zw(e,t){const r=Ft(e)?e:[...e];for(const n of r)n.computed&&zk(n);for(const n of r)n.computed||zk(n)}function zk(e,t){(e!==yi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const Ij=qT("__proto__,__v_isRef,__isVue"),T8=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Dd)),Oj=rP(),Rj=rP(!1,!0),Dj=rP(!0),Vk=Nj();function Nj(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=ce(this);for(let o=0,a=this.length;o<a;o++)Mn(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(ce)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){sf();const n=ce(this)[t].apply(this,r);return lf(),n}}),e}function rP(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?Jj:C8:t?k8:A8).get(n))return n;const a=Ft(n);if(!e&&a&&se(Vk,i))return Reflect.get(Vk,i,o);const s=Reflect.get(n,i,o);return(Dd(i)?T8.has(i):Ij(i))||(e||Mn(n,"get",i),t)?s:He(s)?a&&QT(i)?s:s.value:Qe(s)?e?M8(s):uf(s):s}}const Fj=P8(),Bj=P8(!0);function P8(e=!1){return function(r,n,i,o){let a=r[n];if(Fd(a)&&He(a)&&!He(i))return!1;if(!e&&!Fd(i)&&(Kw(i)||(i=ce(i),a=ce(a)),!Ft(r)&&He(a)&&!He(i)))return a.value=i,!0;const s=Ft(r)&&QT(n)?Number(n)<r.length:se(r,n),l=Reflect.set(r,n,i,o);return r===ce(o)&&(s?Nd(i,a)&&ca(r,"set",n,i):ca(r,"add",n,i)),l}}function $j(e,t){const r=se(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&ca(e,"delete",t,void 0),n}function zj(e,t){const r=Reflect.has(e,t);return(!Dd(t)||!T8.has(t))&&Mn(e,"has",t),r}function Vj(e){return Mn(e,"iterate",Ft(e)?"length":Nl),Reflect.ownKeys(e)}const E8={get:Oj,set:Fj,deleteProperty:$j,has:zj,ownKeys:Vj},Uj={get:Dj,set(e,t){return!0},deleteProperty(e,t){return!0}},Gj=tn({},E8,{get:Rj,set:Bj}),nP=e=>e,C1=e=>Reflect.getPrototypeOf(e);function vp(e,t,r=!1,n=!1){e=e.__v_raw;const i=ce(e),o=ce(t);r||(t!==o&&Mn(i,"get",t),Mn(i,"get",o));const{has:a}=C1(i),s=n?nP:r?aP:Bd;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function gp(e,t=!1){const r=this.__v_raw,n=ce(r),i=ce(e);return t||(e!==i&&Mn(n,"has",e),Mn(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function mp(e,t=!1){return e=e.__v_raw,!t&&Mn(ce(e),"iterate",Nl),Reflect.get(e,"size",e)}function Uk(e){e=ce(e);const t=ce(this);return C1(t).has.call(t,e)||(t.add(e),ca(t,"add",e,e)),this}function Gk(e,t){t=ce(t);const r=ce(this),{has:n,get:i}=C1(r);let o=n.call(r,e);o||(e=ce(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Nd(t,a)&&ca(r,"set",e,t):ca(r,"add",e,t),this}function jk(e){const t=ce(this),{has:r,get:n}=C1(t);let i=r.call(t,e);i||(e=ce(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&ca(t,"delete",e,void 0),o}function Wk(){const e=ce(this),t=e.size!==0,r=e.clear();return t&&ca(e,"clear",void 0,void 0),r}function _p(e,t){return function(n,i){const o=this,a=o.__v_raw,s=ce(a),l=t?nP:e?aP:Bd;return!e&&Mn(s,"iterate",Nl),a.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function yp(e,t,r){return function(...n){const i=this.__v_raw,o=ce(i),a=Cc(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),c=r?nP:t?aP:Bd;return!t&&Mn(o,"iterate",l?qw:Nl),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ia(e){return function(...t){return e==="delete"?!1:this}}function jj(){const e={get(o){return vp(this,o)},get size(){return mp(this)},has:gp,add:Uk,set:Gk,delete:jk,clear:Wk,forEach:_p(!1,!1)},t={get(o){return vp(this,o,!1,!0)},get size(){return mp(this)},has:gp,add:Uk,set:Gk,delete:jk,clear:Wk,forEach:_p(!1,!0)},r={get(o){return vp(this,o,!0)},get size(){return mp(this,!0)},has(o){return gp.call(this,o,!0)},add:Ia("add"),set:Ia("set"),delete:Ia("delete"),clear:Ia("clear"),forEach:_p(!0,!1)},n={get(o){return vp(this,o,!0,!0)},get size(){return mp(this,!0)},has(o){return gp.call(this,o,!0)},add:Ia("add"),set:Ia("set"),delete:Ia("delete"),clear:Ia("clear"),forEach:_p(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=yp(o,!1,!1),r[o]=yp(o,!0,!1),t[o]=yp(o,!1,!0),n[o]=yp(o,!0,!0)}),[e,r,t,n]}const[Wj,Hj,Xj,Yj]=jj();function iP(e,t){const r=t?e?Yj:Xj:e?Hj:Wj;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(se(r,i)&&i in n?r:n,i,o)}const qj={get:iP(!1,!1)},Zj={get:iP(!1,!0)},Kj={get:iP(!0,!1)},A8=new WeakMap,k8=new WeakMap,C8=new WeakMap,Jj=new WeakMap;function Qj(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tW(e){return e.__v_skip||!Object.isExtensible(e)?0:Qj(Ej(e))}function uf(e){return Fd(e)?e:oP(e,!1,E8,qj,A8)}function eW(e){return oP(e,!1,Gj,Zj,k8)}function M8(e){return oP(e,!0,Uj,Kj,C8)}function oP(e,t,r,n,i){if(!Qe(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=tW(e);if(a===0)return e;const s=new Proxy(e,a===2?n:r);return i.set(e,s),s}function aa(e){return Fd(e)?aa(e.__v_raw):!!(e&&e.__v_isReactive)}function Fd(e){return!!(e&&e.__v_isReadonly)}function Kw(e){return!!(e&&e.__v_isShallow)}function x8(e){return aa(e)||Fd(e)}function ce(e){const t=e&&e.__v_raw;return t?ce(t):e}function mi(e){return hm(e,"__v_skip",!0),e}const Bd=e=>Qe(e)?uf(e):e,aP=e=>Qe(e)?M8(e):e;function L8(e){ms&&yi&&(e=ce(e),S8(e.dep||(e.dep=tP())))}function I8(e,t){e=ce(e),e.dep&&Zw(e.dep)}function He(e){return!!(e&&e.__v_isRef===!0)}function M1(e){return O8(e,!1)}function kg(e){return O8(e,!0)}function O8(e,t){return He(e)?e:new rW(e,t)}class rW{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:ce(t),this._value=r?t:Bd(t)}get value(){return L8(this),this._value}set value(t){t=this.__v_isShallow?t:ce(t),Nd(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Bd(t),I8(this))}}function _r(e){return He(e)?e.value:e}const nW={get:(e,t,r)=>_r(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return He(i)&&!He(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function R8(e){return aa(e)?e:new Proxy(e,nW)}function Jw(e){const t=Ft(e)?new Array(e.length):{};for(const r in e)t[r]=Cg(e,r);return t}class iW{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Cg(e,t,r){const n=e[t];return He(n)?n:new iW(e,t,r)}class oW{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new eP(t,()=>{this._dirty||(this._dirty=!0,I8(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=ce(this);return L8(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function aW(e,t,r=!1){let n,i;const o=Gt(e);return o?(n=e,i=Ai):(n=e.get,i=e.set),new oW(n,i,o||!i,r)}function _s(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){x1(o,t,r)}return i}function ki(e,t,r,n){if(Gt(e)){const o=_s(e,t,r,n);return o&&p8(o)&&o.catch(a=>{x1(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(ki(e[o],t,r,n));return i}function x1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){_s(l,null,10,[e,a,s]);return}}sW(e,r,i,n)}function sW(e,t,r,n=!0){console.error(e)}let pm=!1,Qw=!1;const Pn=[];let ta=0;const ad=[];let jh=null,lc=0;const sd=[];let is=null,uc=0;const D8=Promise.resolve();let sP=null,tS=null;function $d(e){const t=sP||D8;return e?t.then(this?e.bind(this):e):t}function lW(e){let t=ta+1,r=Pn.length;for(;t<r;){const n=t+r>>>1;zd(Pn[n])<e?t=n+1:r=n}return t}function N8(e){(!Pn.length||!Pn.includes(e,pm&&e.allowRecurse?ta+1:ta))&&e!==tS&&(e.id==null?Pn.push(e):Pn.splice(lW(e.id),0,e),F8())}function F8(){!pm&&!Qw&&(Qw=!0,sP=D8.then(z8))}function uW(e){const t=Pn.indexOf(e);t>ta&&Pn.splice(t,1)}function B8(e,t,r,n){Ft(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),F8()}function cW(e){B8(e,jh,ad,lc)}function fW(e){B8(e,is,sd,uc)}function L1(e,t=null){if(ad.length){for(tS=t,jh=[...new Set(ad)],ad.length=0,lc=0;lc<jh.length;lc++)jh[lc]();jh=null,lc=0,tS=null,L1(e,t)}}function $8(e){if(L1(),sd.length){const t=[...new Set(sd)];if(sd.length=0,is){is.push(...t);return}for(is=t,is.sort((r,n)=>zd(r)-zd(n)),uc=0;uc<is.length;uc++)is[uc]();is=null,uc=0}}const zd=e=>e.id==null?1/0:e.id;function z8(e){Qw=!1,pm=!0,L1(e),Pn.sort((r,n)=>zd(r)-zd(n));const t=Ai;try{for(ta=0;ta<Pn.length;ta++){const r=Pn[ta];r&&r.active!==!1&&_s(r,null,14)}}finally{ta=0,Pn.length=0,$8(),pm=!1,sP=null,(Pn.length||ad.length||sd.length)&&z8(e)}}function hW(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Le;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[c]||Le;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(dm))}let s,l=n[s=cy(t)]||n[s=cy(Po(t))];!l&&o&&(l=n[s=cy(af(t))]),l&&ki(l,e,6,i);const u=n[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,ki(u,e,6,i)}}function V8(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!Gt(e)){const l=u=>{const c=V8(u,t,!0);c&&(s=!0,tn(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(n.set(e,null),null):(Ft(o)?o.forEach(l=>a[l]=null):tn(a,o),n.set(e,a),a)}function I1(e,t){return!e||!E1(t)?!1:(t=t.slice(2).replace(/Once$/,""),se(e,t[0].toLowerCase()+t.slice(1))||se(e,af(t))||se(e,t))}let Nr=null,O1=null;function vm(e){const t=Nr;return Nr=e,O1=e&&e.type.__scopeId||null,t}function Vr(e){O1=e}function Ur(){O1=null}function Ee(e,t=Nr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&rC(-1);const o=vm(t),a=e(...i);return vm(o),n._d&&rC(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function fy(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let g,m;const _=vm(e);try{if(r.shapeFlag&4){const w=i||n;g=fo(c.call(w,w,f,o,d,h,p)),m=l}else{const w=t;g=fo(w.length>1?w(o,{attrs:l,slots:s,emit:u}):w(o,null)),m=t.props?l:dW(l)}}catch(w){ud.length=0,x1(w,e,1),g=Mt(Es)}let y=g;if(m&&v!==!1){const w=Object.keys(m),{shapeFlag:T}=y;w.length&&T&7&&(a&&w.some(KT)&&(m=pW(m,a)),y=Vc(y,m))}return r.dirs&&(y=Vc(y),y.dirs=y.dirs?y.dirs.concat(r.dirs):r.dirs),r.transition&&(y.transition=r.transition),g=y,vm(_),g}const dW=e=>{let t;for(const r in e)(r==="class"||r==="style"||E1(r))&&((t||(t={}))[r]=e[r]);return t},pW=(e,t)=>{const r={};for(const n in e)(!KT(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function vW(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?Hk(n,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==n[h]&&!I1(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?Hk(n,a,u):!0:!!a;return!1}function Hk(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!I1(r,o))return!0}return!1}function gW({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const mW=e=>e.__isSuspense;function _W(e,t){t&&t.pendingBranch?Ft(e)?t.effects.push(...e):t.effects.push(e):fW(e)}function Mg(e,t){if(cr){let r=cr.provides;const n=cr.parent&&cr.parent.provides;n===r&&(r=cr.provides=Object.create(n)),r[e]=t}}function An(e,t,r=!1){const n=cr||Nr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Gt(t)?t.call(n.proxy):t}}function Xk(e,t){return lP(e,null,t)}const Yk={};function mo(e,t,r){return lP(e,t,r)}function lP(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=Le){const s=cr;let l,u=!1,c=!1;if(He(e)?(l=()=>e.value,u=Kw(e)):aa(e)?(l=()=>e,n=!0):Ft(e)?(c=!0,u=e.some(m=>aa(m)||Kw(m)),l=()=>e.map(m=>{if(He(m))return m.value;if(aa(m))return Cl(m);if(Gt(m))return _s(m,s,2)})):Gt(e)?t?l=()=>_s(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),ki(e,s,3,[h])}:l=Ai,t&&n){const m=l;l=()=>Cl(m())}let f,h=m=>{f=g.onStop=()=>{_s(m,s,4)}};if(Ud)return h=Ai,t?r&&ki(t,s,3,[l(),c?[]:void 0,h]):l(),Ai;let d=c?[]:Yk;const p=()=>{if(!!g.active)if(t){const m=g.run();(n||u||(c?m.some((_,y)=>Nd(_,d[y])):Nd(m,d)))&&(f&&f(),ki(t,s,3,[m,d===Yk?void 0:d,h]),d=m)}else g.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>ln(p,s&&s.suspense):v=()=>cW(p);const g=new eP(l,v);return t?r?p():d=g.run():i==="post"?ln(g.run.bind(g),s&&s.suspense):g.run(),()=>{g.stop(),s&&s.scope&&JT(s.scope.effects,g)}}function yW(e,t,r){const n=this.proxy,i=fr(e)?e.includes(".")?U8(n,e):()=>n[e]:e.bind(n,n);let o;Gt(t)?o=t:(o=t.handler,r=t);const a=cr;Uc(this);const s=lP(i,o.bind(n),r);return a?Uc(a):Fl(),s}function U8(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Cl(e,t){if(!Qe(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),He(e))Cl(e.value,t);else if(Ft(e))for(let r=0;r<e.length;r++)Cl(e[r],t);else if(of(e)||Cc(e))e.forEach(r=>{Cl(r,t)});else if(g8(e))for(const r in e)Cl(e[r],t);return e}function uP(e){return Gt(e)?{setup:e,name:e.name}:e}const ld=e=>!!e.type.__asyncLoader,G8=e=>e.type.__isKeepAlive;function bW(e,t){j8(e,"a",t)}function wW(e,t){j8(e,"da",t)}function j8(e,t,r=cr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(R1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)G8(i.parent.vnode)&&SW(n,t,r,i),i=i.parent}}function SW(e,t,r,n){const i=R1(t,e,n,!0);D1(()=>{JT(n[t],i)},r)}function R1(e,t,r=cr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;sf(),Uc(r);const s=ki(t,r,e,a);return Fl(),lf(),s});return n?i.unshift(o):i.push(o),o}}const wa=e=>(t,r=cr)=>(!Ud||e==="sp")&&R1(e,t,r),TW=wa("bm"),W8=wa("m"),PW=wa("bu"),EW=wa("u"),AW=wa("bum"),D1=wa("um"),kW=wa("sp"),CW=wa("rtg"),MW=wa("rtc");function xW(e,t=cr){R1("ec",e,t)}function yt(e,t){const r=Nr;if(r===null)return e;const n=F1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,u=Le]=t[o];Gt(a)&&(a={mounted:a,updated:a}),a.deep&&Cl(s),i.push({dir:a,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return e}function js(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(sf(),ki(l,r,8,[e.el,s,e,t]),lf())}}const H8="components";function de(e,t){return IW(H8,e,!0,t)||e}const LW=Symbol();function IW(e,t,r=!0,n=!1){const i=Nr||cr;if(i){const o=i.type;if(e===H8){const s=lH(o,!1);if(s&&(s===t||s===Po(t)||s===k1(Po(t))))return o}const a=qk(i[e]||o[e],t)||qk(i.appContext[e],t);return!a&&n?o:a}}function qk(e,t){return e&&(e[t]||e[Po(t)]||e[k1(Po(t))])}function Nt(e,t,r,n){let i;const o=r&&r[n];if(Ft(e)||fr(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(Qe(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=t(e[u],u,s,o&&o[s])}}else i=[];return r&&(r[n]=i),i}function OW(e,t,r={},n,i){if(Nr.isCE||Nr.parent&&ld(Nr.parent)&&Nr.parent.isCE)return Mt("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),O();const a=o&&X8(o(r)),s=fa(W,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function X8(e){return e.some(t=>_m(t)?!(t.type===Es||t.type===W&&!X8(t.children)):!0)?e:null}const eS=e=>e?o7(e)?F1(e)||e.proxy:eS(e.parent):null,gm=tn(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>eS(e.parent),$root:e=>eS(e.root),$emit:e=>e.emit,$options:e=>q8(e),$forceUpdate:e=>e.f||(e.f=()=>N8(e.update)),$nextTick:e=>e.n||(e.n=$d.bind(e.proxy)),$watch:e=>yW.bind(e)}),RW={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Le&&se(n,t))return a[t]=1,n[t];if(i!==Le&&se(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&se(u,t))return a[t]=3,o[t];if(r!==Le&&se(r,t))return a[t]=4,r[t];rS&&(a[t]=0)}}const c=gm[t];let f,h;if(c)return t==="$attrs"&&Mn(e,"get",t),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==Le&&se(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,se(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Le&&se(i,t)?(i[t]=r,!0):n!==Le&&se(n,t)?(n[t]=r,!0):se(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let s;return!!r[a]||e!==Le&&se(e,a)||t!==Le&&se(t,a)||(s=o[0])&&se(s,a)||se(n,a)||se(gm,a)||se(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:se(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let rS=!0;function DW(e){const t=q8(e),r=e.proxy,n=e.ctx;rS=!1,t.beforeCreate&&Zk(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:g,beforeDestroy:m,beforeUnmount:_,destroyed:y,unmounted:w,render:T,renderTracked:S,renderTriggered:P,errorCaptured:k,serverPrefetch:A,expose:C,inheritAttrs:M,components:D,directives:B,filters:z}=t;if(u&&NW(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Z in a){const q=a[Z];Gt(q)&&(n[Z]=q.bind(r))}if(i){const Z=i.call(r,r);Qe(Z)&&(e.data=uf(Z))}if(rS=!0,o)for(const Z in o){const q=o[Z],tt=Gt(q)?q.bind(r,r):Gt(q.get)?q.get.bind(r,r):Ai,Pt=!Gt(q)&&Gt(q.set)?q.set.bind(r):Ai,Ot=Ye({get:tt,set:Pt});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Ot.value,set:wt=>Ot.value=wt})}if(s)for(const Z in s)Y8(s[Z],n,r,Z);if(l){const Z=Gt(l)?l.call(r):l;Reflect.ownKeys(Z).forEach(q=>{Mg(q,Z[q])})}c&&Zk(c,e,"c");function j(Z,q){Ft(q)?q.forEach(tt=>Z(tt.bind(r))):q&&Z(q.bind(r))}if(j(TW,f),j(W8,h),j(PW,d),j(EW,p),j(bW,v),j(wW,g),j(xW,k),j(MW,S),j(CW,P),j(AW,_),j(D1,w),j(kW,A),Ft(C))if(C.length){const Z=e.exposed||(e.exposed={});C.forEach(q=>{Object.defineProperty(Z,q,{get:()=>r[q],set:tt=>r[q]=tt})})}else e.exposed||(e.exposed={});T&&e.render===Ai&&(e.render=T),M!=null&&(e.inheritAttrs=M),D&&(e.components=D),B&&(e.directives=B)}function NW(e,t,r=Ai,n=!1){Ft(e)&&(e=nS(e));for(const i in e){const o=e[i];let a;Qe(o)?"default"in o?a=An(o.from||i,o.default,!0):a=An(o.from||i):a=An(o),He(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function Zk(e,t,r){ki(Ft(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function Y8(e,t,r,n){const i=n.includes(".")?U8(r,n):()=>r[n];if(fr(e)){const o=t[e];Gt(o)&&mo(i,o)}else if(Gt(e))mo(i,e.bind(r));else if(Qe(e))if(Ft(e))e.forEach(o=>Y8(o,t,r,n));else{const o=Gt(e.handler)?e.handler.bind(r):t[e.handler];Gt(o)&&mo(i,o,e)}}function q8(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>mm(l,u,a,!0)),mm(l,t,a)),o.set(t,l),l}function mm(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&mm(e,o,r,!0),i&&i.forEach(a=>mm(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const s=FW[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const FW={data:Kk,props:bl,emits:bl,methods:bl,computed:bl,beforeCreate:Xr,created:Xr,beforeMount:Xr,mounted:Xr,beforeUpdate:Xr,updated:Xr,beforeDestroy:Xr,beforeUnmount:Xr,destroyed:Xr,unmounted:Xr,activated:Xr,deactivated:Xr,errorCaptured:Xr,serverPrefetch:Xr,components:bl,directives:bl,watch:$W,provide:Kk,inject:BW};function Kk(e,t){return t?e?function(){return tn(Gt(e)?e.call(this,this):e,Gt(t)?t.call(this,this):t)}:t:e}function BW(e,t){return bl(nS(e),nS(t))}function nS(e){if(Ft(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Xr(e,t){return e?[...new Set([].concat(e,t))]:t}function bl(e,t){return e?tn(tn(Object.create(null),e),t):t}function $W(e,t){if(!e)return t;if(!t)return e;const r=tn(Object.create(null),e);for(const n in t)r[n]=Xr(e[n],t[n]);return r}function zW(e,t,r,n=!1){const i={},o={};hm(o,N1,1),e.propsDefaults=Object.create(null),Z8(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:eW(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function VW(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=ce(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(I1(e.emitsOptions,h))continue;const d=t[h];if(l)if(se(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=Po(h);i[p]=iS(l,s,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{Z8(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!se(t,f)&&((c=af(f))===f||!se(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=iS(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!se(t,f)&&!0)&&(delete o[f],u=!0)}u&&ca(e,"set","$attrs")}function Z8(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(Eg(l))continue;const u=t[l];let c;i&&se(i,c=Po(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:I1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=ce(r),u=s||Le;for(let c=0;c<o.length;c++){const f=o[c];r[f]=iS(i,l,f,u[f],e,!se(u,f))}}return a}function iS(e,t,r,n,i,o){const a=e[r];if(a!=null){const s=se(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&Gt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(Uc(i),n=u[r]=l.call(null,t),Fl())}else n=l}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===af(r))&&(n=!0))}return n}function K8(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!Gt(e)){const c=f=>{l=!0;const[h,d]=K8(f,t,!0);tn(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,kc),kc;if(Ft(o))for(let c=0;c<o.length;c++){const f=Po(o[c]);Jk(f)&&(a[f]=Le)}else if(o)for(const c in o){const f=Po(c);if(Jk(f)){const h=o[c],d=a[f]=Ft(h)||Gt(h)?{type:h}:h;if(d){const p=eC(Boolean,d.type),v=eC(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||se(d,"default"))&&s.push(f)}}}const u=[a,s];return n.set(e,u),u}function Jk(e){return e[0]!=="$"}function Qk(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function tC(e,t){return Qk(e)===Qk(t)}function eC(e,t){return Ft(t)?t.findIndex(r=>tC(r,e)):Gt(t)&&tC(t,e)?0:-1}const J8=e=>e[0]==="_"||e==="$stable",cP=e=>Ft(e)?e.map(fo):[fo(e)],UW=(e,t,r)=>{if(t._n)return t;const n=Ee((...i)=>cP(t(...i)),r);return n._c=!1,n},Q8=(e,t,r)=>{const n=e._ctx;for(const i in e){if(J8(i))continue;const o=e[i];if(Gt(o))t[i]=UW(i,o,n);else if(o!=null){const a=cP(o);t[i]=()=>a}}},t7=(e,t)=>{const r=cP(t);e.slots.default=()=>r},GW=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=ce(t),hm(t,"_",r)):Q8(t,e.slots={})}else e.slots={},t&&t7(e,t);hm(e.slots,N1,1)},jW=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=Le;if(n.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(tn(i,t),!r&&s===1&&delete i._):(o=!t.$stable,Q8(t,i)),a=t}else t&&(t7(e,t),a={default:1});if(o)for(const s in i)!J8(s)&&!(s in a)&&delete i[s]};function e7(){return{app:null,config:{isNativeTag:Sj,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let WW=0;function HW(e,t){return function(n,i=null){Gt(n)||(n=Object.assign({},n)),i!=null&&!Qe(i)&&(i=null);const o=e7(),a=new Set;let s=!1;const l=o.app={_uid:WW++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:cH,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&Gt(u.install)?(a.add(u),u.install(l,...c)):Gt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=Mt(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,F1(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function oS(e,t,r,n,i=!1){if(Ft(e)){e.forEach((h,d)=>oS(h,t&&(Ft(t)?t[d]:t),r,n,i));return}if(ld(n)&&!i)return;const o=n.shapeFlag&4?F1(n.component)||n.component.proxy:n.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Le?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(fr(u)?(c[u]=null,se(f,u)&&(f[u]=null)):He(u)&&(u.value=null)),Gt(l))_s(l,s,12,[a,c]);else{const h=fr(l),d=He(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?Ft(v)&&JT(v,o):Ft(v)?v.includes(o)||v.push(o):h?(c[l]=[o],se(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,se(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,ln(p,r)):p()}}}const ln=_W;function XW(e){return YW(e)}function YW(e,t){const r=Cj();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Ai,cloneNode:p,insertStaticContent:v}=e,g=($,G,X,J=null,Q=null,ut=null,vt=!1,at=null,it=!!G.dynamicChildren)=>{if($===G)return;$&&!Wf($,G)&&(J=pt($),St($,Q,ut,!0),$=null),G.patchFlag===-2&&(it=!1,G.dynamicChildren=null);const{type:rt,ref:Rt,shapeFlag:Ct}=G;switch(rt){case fP:m($,G,X,J);break;case Es:_($,G,X,J);break;case xg:$==null&&y(G,X,J,vt);break;case W:B($,G,X,J,Q,ut,vt,at,it);break;default:Ct&1?S($,G,X,J,Q,ut,vt,at,it):Ct&6?z($,G,X,J,Q,ut,vt,at,it):(Ct&64||Ct&128)&&rt.process($,G,X,J,Q,ut,vt,at,it,At)}Rt!=null&&Q&&oS(Rt,$&&$.ref,ut,G||$,!G)},m=($,G,X,J)=>{if($==null)n(G.el=s(G.children),X,J);else{const Q=G.el=$.el;G.children!==$.children&&u(Q,G.children)}},_=($,G,X,J)=>{$==null?n(G.el=l(G.children||""),X,J):G.el=$.el},y=($,G,X,J)=>{[$.el,$.anchor]=v($.children,G,X,J,$.el,$.anchor)},w=({el:$,anchor:G},X,J)=>{let Q;for(;$&&$!==G;)Q=h($),n($,X,J),$=Q;n(G,X,J)},T=({el:$,anchor:G})=>{let X;for(;$&&$!==G;)X=h($),i($),$=X;i(G)},S=($,G,X,J,Q,ut,vt,at,it)=>{vt=vt||G.type==="svg",$==null?P(G,X,J,Q,ut,vt,at,it):C($,G,Q,ut,vt,at,it)},P=($,G,X,J,Q,ut,vt,at)=>{let it,rt;const{type:Rt,props:Ct,shapeFlag:Dt,transition:$t,patchFlag:Kt,dirs:me}=$;if($.el&&p!==void 0&&Kt===-1)it=$.el=p($.el);else{if(it=$.el=a($.type,ut,Ct&&Ct.is,Ct),Dt&8?c(it,$.children):Dt&16&&A($.children,it,null,J,Q,ut&&Rt!=="foreignObject",vt,at),me&&js($,null,J,"created"),Ct){for(const Te in Ct)Te!=="value"&&!Eg(Te)&&o(it,Te,null,Ct[Te],ut,$.children,J,Q,K);"value"in Ct&&o(it,"value",null,Ct.value),(rt=Ct.onVnodeBeforeMount)&&Xi(rt,J,$)}k(it,$,$.scopeId,vt,J)}me&&js($,null,J,"beforeMount");const _e=(!Q||Q&&!Q.pendingBranch)&&$t&&!$t.persisted;_e&&$t.beforeEnter(it),n(it,G,X),((rt=Ct&&Ct.onVnodeMounted)||_e||me)&&ln(()=>{rt&&Xi(rt,J,$),_e&&$t.enter(it),me&&js($,null,J,"mounted")},Q)},k=($,G,X,J,Q)=>{if(X&&d($,X),J)for(let ut=0;ut<J.length;ut++)d($,J[ut]);if(Q){let ut=Q.subTree;if(G===ut){const vt=Q.vnode;k($,vt,vt.scopeId,vt.slotScopeIds,Q.parent)}}},A=($,G,X,J,Q,ut,vt,at,it=0)=>{for(let rt=it;rt<$.length;rt++){const Rt=$[rt]=at?ss($[rt]):fo($[rt]);g(null,Rt,G,X,J,Q,ut,vt,at)}},C=($,G,X,J,Q,ut,vt)=>{const at=G.el=$.el;let{patchFlag:it,dynamicChildren:rt,dirs:Rt}=G;it|=$.patchFlag&16;const Ct=$.props||Le,Dt=G.props||Le;let $t;X&&Ws(X,!1),($t=Dt.onVnodeBeforeUpdate)&&Xi($t,X,G,$),Rt&&js(G,$,X,"beforeUpdate"),X&&Ws(X,!0);const Kt=Q&&G.type!=="foreignObject";if(rt?M($.dynamicChildren,rt,at,X,J,Kt,ut):vt||tt($,G,at,null,X,J,Kt,ut,!1),it>0){if(it&16)D(at,G,Ct,Dt,X,J,Q);else if(it&2&&Ct.class!==Dt.class&&o(at,"class",null,Dt.class,Q),it&4&&o(at,"style",Ct.style,Dt.style,Q),it&8){const me=G.dynamicProps;for(let _e=0;_e<me.length;_e++){const Te=me[_e],Ar=Ct[Te],ji=Dt[Te];(ji!==Ar||Te==="value")&&o(at,Te,Ar,ji,Q,$.children,X,J,K)}}it&1&&$.children!==G.children&&c(at,G.children)}else!vt&&rt==null&&D(at,G,Ct,Dt,X,J,Q);(($t=Dt.onVnodeUpdated)||Rt)&&ln(()=>{$t&&Xi($t,X,G,$),Rt&&js(G,$,X,"updated")},J)},M=($,G,X,J,Q,ut,vt)=>{for(let at=0;at<G.length;at++){const it=$[at],rt=G[at],Rt=it.el&&(it.type===W||!Wf(it,rt)||it.shapeFlag&70)?f(it.el):X;g(it,rt,Rt,null,J,Q,ut,vt,!0)}},D=($,G,X,J,Q,ut,vt)=>{if(X!==J){for(const at in J){if(Eg(at))continue;const it=J[at],rt=X[at];it!==rt&&at!=="value"&&o($,at,rt,it,vt,G.children,Q,ut,K)}if(X!==Le)for(const at in X)!Eg(at)&&!(at in J)&&o($,at,X[at],null,vt,G.children,Q,ut,K);"value"in J&&o($,"value",X.value,J.value)}},B=($,G,X,J,Q,ut,vt,at,it)=>{const rt=G.el=$?$.el:s(""),Rt=G.anchor=$?$.anchor:s("");let{patchFlag:Ct,dynamicChildren:Dt,slotScopeIds:$t}=G;$t&&(at=at?at.concat($t):$t),$==null?(n(rt,X,J),n(Rt,X,J),A(G.children,X,Rt,Q,ut,vt,at,it)):Ct>0&&Ct&64&&Dt&&$.dynamicChildren?(M($.dynamicChildren,Dt,X,Q,ut,vt,at),(G.key!=null||Q&&G===Q.subTree)&&r7($,G,!0)):tt($,G,X,Rt,Q,ut,vt,at,it)},z=($,G,X,J,Q,ut,vt,at,it)=>{G.slotScopeIds=at,$==null?G.shapeFlag&512?Q.ctx.activate(G,X,J,vt,it):N(G,X,J,Q,ut,vt,it):j($,G,it)},N=($,G,X,J,Q,ut,vt)=>{const at=$.component=nH($,J,Q);if(G8($)&&(at.ctx.renderer=At),iH(at),at.asyncDep){if(Q&&Q.registerDep(at,Z),!$.el){const it=at.subTree=Mt(Es);_(null,it,G,X)}return}Z(at,$,G,X,Q,ut,vt)},j=($,G,X)=>{const J=G.component=$.component;if(vW($,G,X))if(J.asyncDep&&!J.asyncResolved){q(J,G,X);return}else J.next=G,uW(J.update),J.update();else G.el=$.el,J.vnode=G},Z=($,G,X,J,Q,ut,vt)=>{const at=()=>{if($.isMounted){let{next:Rt,bu:Ct,u:Dt,parent:$t,vnode:Kt}=$,me=Rt,_e;Ws($,!1),Rt?(Rt.el=Kt.el,q($,Rt,vt)):Rt=Kt,Ct&&Ag(Ct),(_e=Rt.props&&Rt.props.onVnodeBeforeUpdate)&&Xi(_e,$t,Rt,Kt),Ws($,!0);const Te=fy($),Ar=$.subTree;$.subTree=Te,g(Ar,Te,f(Ar.el),pt(Ar),$,Q,ut),Rt.el=Te.el,me===null&&gW($,Te.el),Dt&&ln(Dt,Q),(_e=Rt.props&&Rt.props.onVnodeUpdated)&&ln(()=>Xi(_e,$t,Rt,Kt),Q)}else{let Rt;const{el:Ct,props:Dt}=G,{bm:$t,m:Kt,parent:me}=$,_e=ld(G);if(Ws($,!1),$t&&Ag($t),!_e&&(Rt=Dt&&Dt.onVnodeBeforeMount)&&Xi(Rt,me,G),Ws($,!0),Ct&&ft){const Te=()=>{$.subTree=fy($),ft(Ct,$.subTree,$,Q,null)};_e?G.type.__asyncLoader().then(()=>!$.isUnmounted&&Te()):Te()}else{const Te=$.subTree=fy($);g(null,Te,X,J,$,Q,ut),G.el=Te.el}if(Kt&&ln(Kt,Q),!_e&&(Rt=Dt&&Dt.onVnodeMounted)){const Te=G;ln(()=>Xi(Rt,me,Te),Q)}(G.shapeFlag&256||me&&ld(me.vnode)&&me.vnode.shapeFlag&256)&&$.a&&ln($.a,Q),$.isMounted=!0,G=X=J=null}},it=$.effect=new eP(at,()=>N8(rt),$.scope),rt=$.update=()=>it.run();rt.id=$.uid,Ws($,!0),rt()},q=($,G,X)=>{G.component=$;const J=$.vnode.props;$.vnode=G,$.next=null,VW($,G.props,J,X),jW($,G.children,X),sf(),L1(void 0,$.update),lf()},tt=($,G,X,J,Q,ut,vt,at,it=!1)=>{const rt=$&&$.children,Rt=$?$.shapeFlag:0,Ct=G.children,{patchFlag:Dt,shapeFlag:$t}=G;if(Dt>0){if(Dt&128){Ot(rt,Ct,X,J,Q,ut,vt,at,it);return}else if(Dt&256){Pt(rt,Ct,X,J,Q,ut,vt,at,it);return}}$t&8?(Rt&16&&K(rt,Q,ut),Ct!==rt&&c(X,Ct)):Rt&16?$t&16?Ot(rt,Ct,X,J,Q,ut,vt,at,it):K(rt,Q,ut,!0):(Rt&8&&c(X,""),$t&16&&A(Ct,X,J,Q,ut,vt,at,it))},Pt=($,G,X,J,Q,ut,vt,at,it)=>{$=$||kc,G=G||kc;const rt=$.length,Rt=G.length,Ct=Math.min(rt,Rt);let Dt;for(Dt=0;Dt<Ct;Dt++){const $t=G[Dt]=it?ss(G[Dt]):fo(G[Dt]);g($[Dt],$t,X,null,Q,ut,vt,at,it)}rt>Rt?K($,Q,ut,!0,!1,Ct):A(G,X,J,Q,ut,vt,at,it,Ct)},Ot=($,G,X,J,Q,ut,vt,at,it)=>{let rt=0;const Rt=G.length;let Ct=$.length-1,Dt=Rt-1;for(;rt<=Ct&&rt<=Dt;){const $t=$[rt],Kt=G[rt]=it?ss(G[rt]):fo(G[rt]);if(Wf($t,Kt))g($t,Kt,X,null,Q,ut,vt,at,it);else break;rt++}for(;rt<=Ct&&rt<=Dt;){const $t=$[Ct],Kt=G[Dt]=it?ss(G[Dt]):fo(G[Dt]);if(Wf($t,Kt))g($t,Kt,X,null,Q,ut,vt,at,it);else break;Ct--,Dt--}if(rt>Ct){if(rt<=Dt){const $t=Dt+1,Kt=$t<Rt?G[$t].el:J;for(;rt<=Dt;)g(null,G[rt]=it?ss(G[rt]):fo(G[rt]),X,Kt,Q,ut,vt,at,it),rt++}}else if(rt>Dt)for(;rt<=Ct;)St($[rt],Q,ut,!0),rt++;else{const $t=rt,Kt=rt,me=new Map;for(rt=Kt;rt<=Dt;rt++){const Wr=G[rt]=it?ss(G[rt]):fo(G[rt]);Wr.key!=null&&me.set(Wr.key,rt)}let _e,Te=0;const Ar=Dt-Kt+1;let ji=!1,sp=0;const Vs=new Array(Ar);for(rt=0;rt<Ar;rt++)Vs[rt]=0;for(rt=$t;rt<=Ct;rt++){const Wr=$[rt];if(Te>=Ar){St(Wr,Q,ut,!0);continue}let On;if(Wr.key!=null)On=me.get(Wr.key);else for(_e=Kt;_e<=Dt;_e++)if(Vs[_e-Kt]===0&&Wf(Wr,G[_e])){On=_e;break}On===void 0?St(Wr,Q,ut,!0):(Vs[On-Kt]=rt+1,On>=sp?sp=On:ji=!0,g(Wr,G[On],X,null,Q,ut,vt,at,it),Te++)}const lp=ji?qW(Vs):kc;for(_e=lp.length-1,rt=Ar-1;rt>=0;rt--){const Wr=Kt+rt,On=G[Wr],Us=Wr+1<Rt?G[Wr+1].el:J;Vs[rt]===0?g(null,On,X,Us,Q,ut,vt,at,it):ji&&(_e<0||rt!==lp[_e]?wt(On,X,Us,2):_e--)}}},wt=($,G,X,J,Q=null)=>{const{el:ut,type:vt,transition:at,children:it,shapeFlag:rt}=$;if(rt&6){wt($.component.subTree,G,X,J);return}if(rt&128){$.suspense.move(G,X,J);return}if(rt&64){vt.move($,G,X,At);return}if(vt===W){n(ut,G,X);for(let Ct=0;Ct<it.length;Ct++)wt(it[Ct],G,X,J);n($.anchor,G,X);return}if(vt===xg){w($,G,X);return}if(J!==2&&rt&1&&at)if(J===0)at.beforeEnter(ut),n(ut,G,X),ln(()=>at.enter(ut),Q);else{const{leave:Ct,delayLeave:Dt,afterLeave:$t}=at,Kt=()=>n(ut,G,X),me=()=>{Ct(ut,()=>{Kt(),$t&&$t()})};Dt?Dt(ut,Kt,me):me()}else n(ut,G,X)},St=($,G,X,J=!1,Q=!1)=>{const{type:ut,props:vt,ref:at,children:it,dynamicChildren:rt,shapeFlag:Rt,patchFlag:Ct,dirs:Dt}=$;if(at!=null&&oS(at,null,X,$,!0),Rt&256){G.ctx.deactivate($);return}const $t=Rt&1&&Dt,Kt=!ld($);let me;if(Kt&&(me=vt&&vt.onVnodeBeforeUnmount)&&Xi(me,G,$),Rt&6)nt($.component,X,J);else{if(Rt&128){$.suspense.unmount(X,J);return}$t&&js($,null,G,"beforeUnmount"),Rt&64?$.type.remove($,G,X,Q,At,J):rt&&(ut!==W||Ct>0&&Ct&64)?K(rt,G,X,!1,!0):(ut===W&&Ct&384||!Q&&Rt&16)&&K(it,G,X),J&&Ht($)}(Kt&&(me=vt&&vt.onVnodeUnmounted)||$t)&&ln(()=>{me&&Xi(me,G,$),$t&&js($,null,G,"unmounted")},X)},Ht=$=>{const{type:G,el:X,anchor:J,transition:Q}=$;if(G===W){Y(X,J);return}if(G===xg){T($);return}const ut=()=>{i(X),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if($.shapeFlag&1&&Q&&!Q.persisted){const{leave:vt,delayLeave:at}=Q,it=()=>vt(X,ut);at?at($.el,ut,it):it()}else ut()},Y=($,G)=>{let X;for(;$!==G;)X=h($),i($),$=X;i(G)},nt=($,G,X)=>{const{bum:J,scope:Q,update:ut,subTree:vt,um:at}=$;J&&Ag(J),Q.stop(),ut&&(ut.active=!1,St(vt,$,G,X)),at&&ln(at,G),ln(()=>{$.isUnmounted=!0},G),G&&G.pendingBranch&&!G.isUnmounted&&$.asyncDep&&!$.asyncResolved&&$.suspenseId===G.pendingId&&(G.deps--,G.deps===0&&G.resolve())},K=($,G,X,J=!1,Q=!1,ut=0)=>{for(let vt=ut;vt<$.length;vt++)St($[vt],G,X,J,Q)},pt=$=>$.shapeFlag&6?pt($.component.subTree):$.shapeFlag&128?$.suspense.next():h($.anchor||$.el),Tt=($,G,X)=>{$==null?G._vnode&&St(G._vnode,null,null,!0):g(G._vnode||null,$,G,null,null,null,X),$8(),G._vnode=$},At={p:g,um:St,m:wt,r:Ht,mt:N,mc:A,pc:tt,pbc:M,n:pt,o:e};let lt,ft;return t&&([lt,ft]=t(At)),{render:Tt,hydrate:lt,createApp:HW(Tt,lt)}}function Ws({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function r7(e,t,r=!1){const n=e.children,i=t.children;if(Ft(n)&&Ft(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=ss(i[o]),s.el=a.el),r||r7(a,s))}}function qW(e){const t=e.slice(),r=[0];let n,i,o,a,s;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const ZW=e=>e.__isTeleport,W=Symbol(void 0),fP=Symbol(void 0),Es=Symbol(void 0),xg=Symbol(void 0),ud=[];let bi=null;function O(e=!1){ud.push(bi=e?null:[])}function KW(){ud.pop(),bi=ud[ud.length-1]||null}let Vd=1;function rC(e){Vd+=e}function n7(e){return e.dynamicChildren=Vd>0?bi||kc:null,KW(),Vd>0&&bi&&bi.push(e),e}function R(e,t,r,n,i,o){return n7(b(e,t,r,n,i,o,!0))}function fa(e,t,r,n,i){return n7(Mt(e,t,r,n,i,!0))}function _m(e){return e?e.__v_isVNode===!0:!1}function Wf(e,t){return e.type===t.type&&e.key===t.key}const N1="__vInternal",i7=({key:e})=>e!=null?e:null,Lg=({ref:e,ref_key:t,ref_for:r})=>e!=null?fr(e)||He(e)||Gt(e)?{i:Nr,r:e,k:t,f:!!r}:e:null;function b(e,t=null,r=null,n=0,i=null,o=e===W?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&i7(t),ref:t&&Lg(t),scopeId:O1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(dP(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=fr(r)?8:16),Vd>0&&!a&&bi&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&bi.push(l),l}const Mt=JW;function JW(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===LW)&&(e=Es),_m(e)){const s=Vc(e,t,!0);return r&&dP(s,r),Vd>0&&!o&&bi&&(s.shapeFlag&6?bi[bi.indexOf(e)]=s:bi.push(s)),s.patchFlag|=-2,s}if(uH(e)&&(e=e.__vccOpts),t){t=QW(t);let{class:s,style:l}=t;s&&!fr(s)&&(t.class=Jr(s)),Qe(l)&&(x8(l)&&!Ft(l)&&(l=tn({},l)),t.style=Dl(l))}const a=fr(e)?1:mW(e)?128:ZW(e)?64:Qe(e)?4:Gt(e)?2:0;return b(e,t,r,n,i,a,o,!0)}function QW(e){return e?x8(e)||N1 in e?tn({},e):e:null}function Vc(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,s=t?tH(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&i7(s),ref:t&&t.ref?r&&i?Ft(i)?i.concat(Lg(t)):[i,Lg(t)]:Lg(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==W?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Vc(e.ssContent),ssFallback:e.ssFallback&&Vc(e.ssFallback),el:e.el,anchor:e.anchor}}function V(e=" ",t=0){return Mt(fP,null,e,t)}function hP(e,t){const r=Mt(xg,null,e);return r.staticCount=t,r}function st(e="",t=!1){return t?(O(),fa(Es,null,e)):Mt(Es,null,e)}function fo(e){return e==null||typeof e=="boolean"?Mt(Es):Ft(e)?Mt(W,null,e.slice()):typeof e=="object"?ss(e):Mt(fP,null,String(e))}function ss(e){return e.el===null||e.memo?e:Vc(e)}function dP(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if(Ft(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),dP(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(N1 in t)?t._ctx=Nr:i===3&&Nr&&(Nr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Gt(t)?(t={default:t,_ctx:Nr},r=32):(t=String(t),n&64?(r=16,t=[V(t)]):r=8);e.children=t,e.shapeFlag|=r}function tH(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=Jr([t.class,n.class]));else if(i==="style")t.style=Dl([t.style,n.style]);else if(E1(i)){const o=t[i],a=n[i];a&&o!==a&&!(Ft(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Xi(e,t,r,n=null){ki(e,t,7,[r,n])}const eH=e7();let rH=0;function nH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||eH,o={uid:rH++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new m8(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:K8(n,i),emitsOptions:V8(n,i),emit:null,emitted:null,propsDefaults:Le,inheritAttrs:n.inheritAttrs,ctx:Le,data:Le,props:Le,attrs:Le,slots:Le,refs:Le,setupState:Le,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=hW.bind(null,o),e.ce&&e.ce(o),o}let cr=null;const pP=()=>cr||Nr,Uc=e=>{cr=e,e.scope.on()},Fl=()=>{cr&&cr.scope.off(),cr=null};function o7(e){return e.vnode.shapeFlag&4}let Ud=!1;function iH(e,t=!1){Ud=t;const{props:r,children:n}=e.vnode,i=o7(e);zW(e,r,i,t),GW(e,n);const o=i?oH(e,t):void 0;return Ud=!1,o}function oH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=mi(new Proxy(e.ctx,RW));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?sH(e):null;Uc(e),sf();const o=_s(n,e,0,[e.props,i]);if(lf(),Fl(),p8(o)){if(o.then(Fl,Fl),t)return o.then(a=>{nC(e,a,t)}).catch(a=>{x1(a,e,0)});e.asyncDep=o}else nC(e,o,t)}else a7(e,t)}function nC(e,t,r){Gt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Qe(t)&&(e.setupState=R8(t)),a7(e,r)}let iC;function a7(e,t,r){const n=e.type;if(!e.render){if(!t&&iC&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=n,u=tn(tn({isCustomElement:o,delimiters:s},a),l);n.render=iC(i,u)}}e.render=n.render||Ai}Uc(e),sf(),DW(e),lf(),Fl()}function aH(e){return new Proxy(e.attrs,{get(t,r){return Mn(e,"get","$attrs"),t[r]}})}function sH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=aH(e))},slots:e.slots,emit:e.emit,expose:t}}function F1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(R8(mi(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in gm)return gm[r](e)}}))}function lH(e,t=!0){return Gt(e)?e.displayName||e.name:e.name||t&&e.__name}function uH(e){return Gt(e)&&"__vccOpts"in e}const Ye=(e,t)=>aW(e,t,Ud);function vP(e,t,r){const n=arguments.length;return n===2?Qe(t)&&!Ft(t)?_m(t)?Mt(e,null,[t]):Mt(e,t):Mt(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&_m(r)&&(r=[r]),Mt(e,t,r))}const cH="3.2.37",fH="http://www.w3.org/2000/svg",El=typeof document<"u"?document:null,oC=El&&El.createElement("template"),hH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?El.createElementNS(fH,e):El.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>El.createTextNode(e),createComment:e=>El.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>El.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{oC.innerHTML=n?`<svg>${e}</svg>`:e;const s=oC.content;if(n){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function dH(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function pH(e,t,r){const n=e.style,i=fr(r);if(r&&!i){for(const o in r)aS(n,o,r[o]);if(t&&!fr(t))for(const o in t)r[o]==null&&aS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const aC=/\s*!important$/;function aS(e,t,r){if(Ft(r))r.forEach(n=>aS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=vH(e,t);aC.test(r)?e.setProperty(af(n),r.replace(aC,""),"important"):e[n]=r}}const sC=["Webkit","Moz","ms"],hy={};function vH(e,t){const r=hy[t];if(r)return r;let n=Po(t);if(n!=="filter"&&n in e)return hy[t]=n;n=k1(n);for(let i=0;i<sC.length;i++){const o=sC[i]+n;if(o in e)return hy[t]=o}return t}const lC="http://www.w3.org/1999/xlink";function gH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(lC,t.slice(6,t.length)):e.setAttributeNS(lC,t,r);else{const o=mj(t);r==null||o&&!h8(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function mH(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=h8(r):r==null&&l==="string"?(r="",s=!0):l==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}const[s7,_H]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let sS=0;const yH=Promise.resolve(),bH=()=>{sS=0},wH=()=>sS||(yH.then(bH),sS=s7());function ea(e,t,r,n){e.addEventListener(t,r,n)}function SH(e,t,r,n){e.removeEventListener(t,r,n)}function TH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[s,l]=PH(t);if(n){const u=o[t]=EH(n,i);ea(e,s,u,l)}else a&&(SH(e,s,a,l),o[t]=void 0)}}const uC=/(?:Once|Passive|Capture)$/;function PH(e){let t;if(uC.test(e)){t={};let r;for(;r=e.match(uC);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[af(e.slice(2)),t]}function EH(e,t){const r=n=>{const i=n.timeStamp||s7();(_H||i>=r.attached-1)&&ki(AH(n,r.value),t,5,[n])};return r.value=e,r.attached=wH(),r}function AH(e,t){if(Ft(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const cC=/^on[a-z]/,kH=(e,t,r,n,i=!1,o,a,s,l)=>{t==="class"?dH(e,n,i):t==="style"?pH(e,r,n):E1(t)?KT(t)||TH(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):CH(e,t,n,i))?mH(e,t,n,o,a,s,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),gH(e,t,n,i))};function CH(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&cC.test(t)&&Gt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||cC.test(t)&&fr(r)?!1:t in e}const As=e=>{const t=e.props["onUpdate:modelValue"]||!1;return Ft(t)?r=>Ag(t,r):t};function MH(e){e.target.composing=!0}function fC(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pe={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=As(i);const o=n||i.props&&i.props.type==="number";ea(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=dm(s)),e._assign(s)}),r&&ea(e,"change",()=>{e.value=e.value.trim()}),t||(ea(e,"compositionstart",MH),ea(e,"compositionend",fC),ea(e,"change",fC))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=As(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&dm(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},wr={deep:!0,created(e,t,r){e._assign=As(r),ea(e,"change",()=>{const n=e._modelValue,i=Gc(e),o=e.checked,a=e._assign;if(Ft(n)){const s=ZT(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(of(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(l7(e,o))})},mounted:hC,beforeUpdate(e,t,r){e._assign=As(r),hC(e,t,r)}};function hC(e,{value:t,oldValue:r},n){e._modelValue=t,Ft(t)?e.checked=ZT(t,n.props.value)>-1:of(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=Xl(t,l7(e,!0)))}const cd={created(e,{value:t},r){e.checked=Xl(t,r.props.value),e._assign=As(r),ea(e,"change",()=>{e._assign(Gc(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=As(n),t!==r&&(e.checked=Xl(t,n.props.value))}},fn={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=of(t);ea(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?dm(Gc(a)):Gc(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=As(n)},mounted(e,{value:t}){dC(e,t)},beforeUpdate(e,t,r){e._assign=As(r)},updated(e,{value:t}){dC(e,t)}};function dC(e,t){const r=e.multiple;if(!(r&&!Ft(t)&&!of(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=Gc(o);if(r)Ft(t)?o.selected=ZT(t,a)>-1:o.selected=t.has(a);else if(Xl(Gc(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function Gc(e){return"_value"in e?e._value:e.value}function l7(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const xH=["ctrl","shift","alt","meta"],LH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>xH.some(r=>e[`${r}Key`]&&!t.includes(r))},ym=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=LH[t[i]];if(o&&o(r,t))return}return e(r,...n)},IH={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Hf(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Hf(e,!0),n.enter(e)):n.leave(e,()=>{Hf(e,!1)}):Hf(e,t))},beforeUnmount(e,{value:t}){Hf(e,t)}};function Hf(e,t){e.style.display=t?e._vod:"none"}const OH=tn({patchProp:kH},hH);let pC;function RH(){return pC||(pC=XW(OH))}const DH=(...e)=>{const t=RH().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=NH(n);if(!i)return;const o=t._component;!Gt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function NH(e){return fr(e)?document.querySelector(e):e}var FH=!1;function bp(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function dy(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function BH(){return u7().__VUE_DEVTOOLS_GLOBAL_HOOK__}function u7(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const $H=typeof Proxy=="function",zH="devtools-plugin:setup",VH="plugin:settings:set";let Cu,lS;function UH(){var e;return Cu!==void 0||(typeof window<"u"&&window.performance?(Cu=!0,lS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(Cu=!0,lS=global.perf_hooks.performance):Cu=!1),Cu}function GH(){return UH()?lS.now():Date.now()}class jH{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const s=t.settings[a];n[a]=s.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(i),s=JSON.parse(a);Object.assign(o,s)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return GH()}},r&&r.on(VH,(a,s)=>{a===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(a,s)=>this.target?this.target.on[s]:(...l)=>{this.onQueue.push({method:s,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...l)=>(this.targetQueue.push({method:s,args:l,resolve:()=>{}}),this.fallbacks[s](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:s,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function c7(e,t){const r=e,n=u7(),i=BH(),o=$H&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(zH,e,t);else{const a=o?new jH(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let uS;const Gd=e=>uS=e,f7=Symbol("pinia");function Yl(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var wo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(wo||(wo={}));const us=typeof window<"u",vC=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function WH(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function gP(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){p7(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function h7(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Ig(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Og=typeof navigator=="object"?navigator:{userAgent:""},d7=(()=>/Macintosh/.test(Og.userAgent)&&/AppleWebKit/.test(Og.userAgent)&&!/Safari/.test(Og.userAgent))(),p7=us?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!d7?HH:"msSaveOrOpenBlob"in Og?XH:YH:()=>{};function HH(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?h7(n.href)?gP(e,t,r):(n.target="_blank",Ig(n)):Ig(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){Ig(n)},0))}function XH(e,t="download",r){if(typeof e=="string")if(h7(e))gP(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Ig(n)})}else navigator.msSaveOrOpenBlob(WH(e,r),t)}function YH(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return gP(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(vC.HTMLElement))||"safari"in vC,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||d7)&&typeof FileReader<"u"){const s=new FileReader;s.onloadend=function(){let l=s.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},s.readAsDataURL(e)}else{const s=URL.createObjectURL(e);n?n.location.assign(s):location.href=s,n=null,setTimeout(function(){URL.revokeObjectURL(s)},4e4)}}function lr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function mP(e){return"_a"in e&&"install"in e}function v7(){if(!("clipboard"in navigator))return lr("Your browser doesn't support the Clipboard API","error"),!0}function g7(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(lr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function qH(e){if(!v7())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),lr("Global state copied to clipboard.")}catch(t){if(g7(t))return;lr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function ZH(e){if(!v7())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),lr("Global state pasted from clipboard.")}catch(t){if(g7(t))return;lr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function KH(e){try{p7(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let $o;function JH(){$o||($o=document.createElement("input"),$o.type="file",$o.accept=".json");function e(){return new Promise((t,r)=>{$o.onchange=async()=>{const n=$o.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},$o.oncancel=()=>t(null),$o.onerror=r,$o.click()})}return e}async function QH(e){try{const r=await(await JH())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),lr(`Global state imported from "${i.name}".`)}catch(t){lr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function di(e){return{_custom:{display:e}}}const m7="\u{1F34D} Pinia (root)",cS="_root";function tX(e){return mP(e)?{id:cS,label:m7}:{id:e.$id,label:e.$id}}function eX(e){if(mP(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const a=n.get(o);return{editable:!1,key:o,value:a._getters.reduce((s,l)=>(s[l]=a[l],s),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function rX(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:di(e.type),key:di(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function nX(e){switch(e){case wo.direct:return"mutation";case wo.patchFunction:return"$patch";case wo.patchObject:return"$patch";default:return"unknown"}}let vc=!0;const Rg=[],wl="pinia:mutations",xr="pinia",bm=e=>"\u{1F34D} "+e;function iX(e,t){c7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Rg,app:e},r=>{typeof r.now!="function"&&lr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:wl,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:xr,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{qH(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await ZH(t),r.sendInspectorTree(xr),r.sendInspectorState(xr)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{KH(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await QH(t),r.sendInspectorTree(xr),r.sendInspectorState(xr)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),lr(`Store "${n}" reset.`)):lr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):lr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const a=n.componentInstance.proxy._pStores;Object.values(a).forEach(s=>{n.instanceData.state.push({type:bm(s.$id),key:"state",editable:!0,value:s._isOptionsAPI?{_custom:{value:ce(s.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>s.$reset()}]}}:Object.keys(s.$state).reduce((l,u)=>(l[u]=s.$state[u],l),{})}),s._getters&&s._getters.length&&n.instanceData.state.push({type:bm(s.$id),key:"getters",editable:!1,value:s._getters.reduce((l,u)=>{try{l[u]=s[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===xr){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):m7.toLowerCase().includes(n.filter.toLowerCase())):i).map(tX)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===xr){const i=n.nodeId===cS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=eX(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===xr){const o=n.nodeId===cS?t:t._s.get(n.nodeId);if(!o)return lr(`store "${n.nodeId}" not found`,"error");const{path:a}=n;mP(o)?a.unshift("state"):(a.length!==1||!o._customProperties.has(a[0])||a[0]in o.$state)&&a.unshift("$state"),vc=!1,n.set(o,a,n.state.value),vc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^🍍\s*/,""),o=t._s.get(i);if(!o)return lr(`store "${i}" not found`,"error");const{path:a}=n;if(a[0]!=="state")return lr(`Invalid path for store "${i}":
${a}
Only state can be modified.`);a[0]="$state",vc=!1,n.set(o,a,n.state.value),vc=!0}})})}function oX(e,t){Rg.includes(bm(t.$id))||Rg.push(bm(t.$id)),c7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Rg,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:a,onError:s,name:l,args:u})=>{const c=_7++;r.addTimelineEvent({layerId:wl,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:di(t.$id),action:di(l),args:u},groupId:c}}),a(f=>{Al=void 0,r.addTimelineEvent({layerId:wl,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:di(t.$id),action:di(l),args:u,result:f},groupId:c}})}),s(f=>{Al=void 0,r.addTimelineEvent({layerId:wl,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:di(t.$id),action:di(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(a=>{mo(()=>_r(t[a]),(s,l)=>{r.notifyComponentUpdate(),r.sendInspectorState(xr),vc&&r.addTimelineEvent({layerId:wl,event:{time:n(),title:"Change",subtitle:a,data:{newValue:s,oldValue:l},groupId:Al}})},{deep:!0})}),t.$subscribe(({events:a,type:s},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState(xr),!vc)return;const u={time:n(),title:nX(s),data:{store:di(t.$id),...rX(a)},groupId:Al};Al=void 0,s===wo.patchFunction?u.subtitle="\u2935\uFE0F":s===wo.patchObject?u.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(u.subtitle=a.type),a&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),r.addTimelineEvent({layerId:wl,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=mi(a=>{i(a),r.addTimelineEvent({layerId:wl,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:di(t.$id),info:di("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree(xr),r.sendInspectorState(xr)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree(xr),r.sendInspectorState(xr),r.getSettings().logStoreChanges&&lr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree(xr),r.sendInspectorState(xr),r.getSettings().logStoreChanges&&lr(`"${t.$id}" store installed \u{1F195}`)})}let _7=0,Al;function gC(e,t){const r=t.reduce((n,i)=>(n[i]=ce(e)[i],n),{});for(const n in r)e[n]=function(){const i=_7,o=new Proxy(e,{get(...a){return Al=i,Reflect.get(...a)},set(...a){return Al=i,Reflect.set(...a)}});return r[n].apply(o,arguments)}}function aX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){gC(t,Object.keys(r.actions));const n=t._hotUpdate;ce(t)._hotUpdate=function(i){n.apply(this,arguments),gC(t,Object.keys(i._hmrPayload.actions))}}oX(e,t)}}function sX(){const e=_8(!0),t=e.run(()=>M1({}));let r=[],n=[];const i=mi({install(o){Gd(i),i._a=o,o.provide(f7,i),o.config.globalProperties.$pinia=i,us&&iX(o,i),n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!FH?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return us&&!0&&typeof Proxy<"u"&&i.use(aX),i}function y7(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];Yl(i)&&Yl(n)&&!He(n)&&!aa(n)?e[r]=y7(i,n):e[r]=n}return e}const lX=()=>{};function mC(e,t,r,n=lX){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&pP()&&D1(i),i}function Mu(e,...t){e.slice().forEach(r=>{r(...t)})}function fS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];Yl(i)&&Yl(n)&&e.hasOwnProperty(r)&&!He(n)&&!aa(n)?e[r]=fS(i,n):e[r]=n}return e}const uX=Symbol("pinia:skipHydration");function cX(e){return!Yl(e)||!e.hasOwnProperty(uX)}const{assign:gi}=Object;function _C(e){return!!(He(e)&&e.effect)}function yC(e,t,r,n){const{state:i,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){!s&&!n&&(r.state.value[e]=i?i():{});const c=Jw(n?M1(i?i():{}).value:r.state.value[e]);return gi(c,o,Object.keys(a||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=mi(Ye(()=>{Gd(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=hS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{gi(h,f)})},l}function hS(e,t,r={},n,i,o){let a;const s=gi({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=A=>{u?d=A:u==!1&&!P._hotUpdating&&(Array.isArray(d)?d.push(A):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=mi([]),h=mi([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=M1({});let g;function m(A){let C;u=c=!1,d=[],typeof A=="function"?(A(n.state.value[e]),C={type:wo.patchFunction,storeId:e,events:d}):(fS(n.state.value[e],A),C={type:wo.patchObject,payload:A,storeId:e,events:d});const M=g=Symbol();$d().then(()=>{g===M&&(u=!0)}),c=!0,Mu(f,C,n.state.value[e])}const _=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function y(){a.stop(),f=[],h=[],n._s.delete(e)}function w(A,C){return function(){Gd(n);const M=Array.from(arguments),D=[],B=[];function z(Z){D.push(Z)}function N(Z){B.push(Z)}Mu(h,{args:M,name:A,store:P,after:z,onError:N});let j;try{j=C.apply(this&&this.$id===e?this:P,M)}catch(Z){throw Mu(B,Z),Z}return j instanceof Promise?j.then(Z=>(Mu(D,Z),Z)).catch(Z=>(Mu(B,Z),Promise.reject(Z))):(Mu(D,j),j)}}const T=mi({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:mC.bind(null,h),$patch:m,$reset:_,$subscribe(A,C={}){const M=mC(f,A,C.detached,()=>D()),D=a.run(()=>mo(()=>n.state.value[e],B=>{(C.flush==="sync"?c:u)&&A({storeId:e,type:wo.direct,events:d},B)},gi({},l,C)));return M},$dispose:y},P=uf(gi(us?{_customProperties:mi(new Set),_hmrPayload:T}:{},S));n._s.set(e,P);const k=n._e.run(()=>(a=_8(),a.run(()=>t())));for(const A in k){const C=k[A];if(He(C)&&!_C(C)||aa(C))i?bp(v.value,A,Cg(k,A)):o||(p&&cX(C)&&(He(C)?C.value=p[A]:fS(C,p[A])),n.state.value[e][A]=C),T.state.push(A);else if(typeof C=="function"){const M=i?C:w(A,C);k[A]=M,T.actions[A]=C,s.actions[A]=C}else _C(C)&&(T.getters[A]=o?r.getters[A]:C,us&&(k._getters||(k._getters=mi([]))).push(A))}gi(P,k),gi(ce(P),k),Object.defineProperty(P,"$state",{get:()=>i?v.value:n.state.value[e],set:A=>{if(i)throw new Error("cannot set hotState");m(C=>{gi(C,A)})}});{P._hotUpdate=mi(C=>{P._hotUpdating=!0,C._hmrPayload.state.forEach(M=>{if(M in P.$state){const D=C.$state[M],B=P.$state[M];typeof D=="object"&&Yl(D)&&Yl(B)?y7(D,B):C.$state[M]=B}bp(P,M,Cg(C.$state,M))}),Object.keys(P.$state).forEach(M=>{M in C.$state||dy(P,M)}),u=!1,c=!1,n.state.value[e]=Cg(C._hmrPayload,"hotState"),c=!0,$d().then(()=>{u=!0});for(const M in C._hmrPayload.actions){const D=C[M];bp(P,M,w(M,D))}for(const M in C._hmrPayload.getters){const D=C._hmrPayload.getters[M],B=o?Ye(()=>(Gd(n),D.call(P,P))):D;bp(P,M,B)}Object.keys(P._hmrPayload.getters).forEach(M=>{M in C._hmrPayload.getters||dy(P,M)}),Object.keys(P._hmrPayload.actions).forEach(M=>{M in C._hmrPayload.actions||dy(P,M)}),P._hmrPayload=C._hmrPayload,P._getters=C._getters,P._hotUpdating=!1});const A={writable:!0,configurable:!0,enumerable:!1};us&&["_p","_hmrPayload","_getters","_customProperties"].forEach(C=>{Object.defineProperty(P,C,{value:P[C],...A})})}return n._p.forEach(A=>{if(us){const C=a.run(()=>A({store:P,app:n._a,pinia:n,options:s}));Object.keys(C||{}).forEach(M=>P._customProperties.add(M)),gi(P,C)}else gi(P,a.run(()=>A({store:P,app:n._a,pinia:n,options:s})))}),P.$state&&typeof P.$state=="object"&&typeof P.$state.constructor=="function"&&!P.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${P.$id}".`),p&&o&&r.hydrate&&r.hydrate(P.$state,p),u=!0,c=!0,P}function A0(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function a(s,l){const u=pP();if(s=s||u&&An(f7),s&&Gd(s),!uS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);s=uS,s._s.has(n)||(o?hS(n,t,i,s):yC(n,i,s),a._pinia=s);const c=s._s.get(n);if(l){const f="__hot:"+n,h=o?hS(f,t,i,s,!0):yC(f,gi({},i),s,!0);l._hotUpdate(h),delete s.state.value[f],s._s.delete(f)}if(us&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return a.$id=n,a}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const cc=typeof window<"u";function fX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const ke=Object.assign;function py(e,t){const r={};for(const n in t){const i=t[n];r[n]=Li(i)?i.map(e):e(i)}return r}const fd=()=>{},Li=Array.isArray,hX=/\/$/,dX=e=>e.replace(hX,"");function vy(e,t,r="/"){let n,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(n=n||t.slice(0,s),a=t.slice(s,t.length)),n=mX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function pX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function bC(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function vX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&jc(t.matched[n],r.matched[i])&&b7(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function jc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function b7(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!gX(e[r],t[r]))return!1;return!0}function gX(e,t){return Li(e)?wC(e,t):Li(t)?wC(t,e):e===t}function wC(e,t){return Li(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function mX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var jd;(function(e){e.pop="pop",e.push="push"})(jd||(jd={}));var hd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(hd||(hd={}));function _X(e){if(!e)if(cc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),dX(e)}const yX=/^[^#]+#/;function bX(e,t){return e.replace(yX,"#")+t}function wX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const B1=()=>({left:window.pageXOffset,top:window.pageYOffset});function SX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=wX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function SC(e,t){return(history.state?history.state.position-t:-1)+e}const dS=new Map;function TX(e,t){dS.set(e,t)}function PX(e){const t=dS.get(e);return dS.delete(e),t}let EX=()=>location.protocol+"//"+location.host;function w7(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),bC(l,"")}return bC(r,e)+n+i}function AX(e,t,r,n){let i=[],o=[],a=null;const s=({state:h})=>{const d=w7(e,location),p=r.value,v=t.value;let g=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}g=v?h.position-v.position:0}else n(d);i.forEach(m=>{m(r.value,p,{delta:g,type:jd.pop,direction:g?g>0?hd.forward:hd.back:hd.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(ke({},h.state,{scroll:B1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function TC(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?B1():null}}function kX(e){const{history:t,location:r}=window,n={value:w7(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:EX()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function a(l,u){const c=ke({},t.state,TC(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function s(l,u){const c=ke({},i.value,t.state,{forward:l,scroll:B1()});o(c.current,c,!0);const f=ke({},TC(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function CX(e){e=_X(e);const t=kX(e),r=AX(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=ke({location:"",base:e,go:n,createHref:bX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function MX(e){return typeof e=="string"||e&&typeof e=="object"}function S7(e){return typeof e=="string"||typeof e=="symbol"}const Oa={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},T7=Symbol("");var PC;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(PC||(PC={}));function Wc(e,t){return ke(new Error,{type:e,[T7]:!0},t)}function zo(e,t){return e instanceof Error&&T7 in e&&(t==null||!!(e.type&t))}const EC="[^/]+?",xX={sensitive:!1,strict:!1,start:!0,end:!0},LX=/[.+*?^${}()[\]/\\]/g;function IX(e,t){const r=ke({},xX,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(LX,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:g,regexp:m}=h;o.push({name:p,repeatable:v,optional:g});const _=m||EC;if(_!==EC){d+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+w.message)}}let y=v?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(y=g&&u.length<2?`(?:/${y})`:"/"+y),g&&(y+="?"),i+=y,d+=20,g&&(d+=-8),v&&(d+=-20),_===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:g}=d,m=p in u?u[p]:"";if(Li(m)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=Li(m)?m.join("/"):m;if(!_)if(g)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=_}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function OX(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function RX(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=OX(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(AC(n))return 1;if(AC(i))return-1}return i.length-n.length}function AC(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const DX={type:0,value:""},NX=/[a-zA-Z0-9_]/;function FX(e){if(!e)return[[]];if(e==="/")return[[DX]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:NX.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function BX(e,t,r){const n=IX(FX(e.path),r),i=ke(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function $X(e,t){const r=[],n=new Map;t=CC({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=VX(c);p.aliasOf=h&&h.record;const v=CC(t,c),g=[p];if("alias"in c){const y=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of y)g.push(ke({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let m,_;for(const y of g){const{path:w}=y;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";y.path=f.record.path+(w&&S+w)}if(m=BX(y,f,v),h?h.alias.push(m):(_=_||m,_!==m&&_.alias.push(m),d&&c.name&&!kC(m)&&a(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],m,h&&h.children[S])}h=h||m,l(m)}return _?()=>{a(_)}:fd}function a(c){if(S7(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return r}function l(c){let f=0;for(;f<r.length&&RX(c,r[f])>=0&&(c.record.path!==r[f].record.path||!P7(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!kC(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw Wc(1,{location:c});v=h.record.name,d=ke(zX(f.params,h.keys.filter(_=>!_.optional).map(_=>_.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(_=>_.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(_=>_.re.test(f.path)),!h)throw Wc(1,{location:c,currentLocation:f});v=h.record.name,d=ke({},f.params,c.params),p=h.stringify(d)}const g=[];let m=h;for(;m;)g.unshift(m.record),m=m.parent;return{name:v,path:p,params:d,matched:g,meta:GX(g)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function zX(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function VX(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:UX(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function UX(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function kC(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function GX(e){return e.reduce((t,r)=>ke(t,r.meta),{})}function CC(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function P7(e,t){return t.children.some(r=>r===e||P7(e,r))}const E7=/#/g,jX=/&/g,WX=/\//g,HX=/=/g,XX=/\?/g,A7=/\+/g,YX=/%5B/g,qX=/%5D/g,k7=/%5E/g,ZX=/%60/g,C7=/%7B/g,KX=/%7C/g,M7=/%7D/g,JX=/%20/g;function _P(e){return encodeURI(""+e).replace(KX,"|").replace(YX,"[").replace(qX,"]")}function QX(e){return _P(e).replace(C7,"{").replace(M7,"}").replace(k7,"^")}function pS(e){return _P(e).replace(A7,"%2B").replace(JX,"+").replace(E7,"%23").replace(jX,"%26").replace(ZX,"`").replace(C7,"{").replace(M7,"}").replace(k7,"^")}function tY(e){return pS(e).replace(HX,"%3D")}function eY(e){return _P(e).replace(E7,"%23").replace(XX,"%3F")}function rY(e){return e==null?"":eY(e).replace(WX,"%2F")}function wm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function nY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(A7," "),a=o.indexOf("="),s=wm(a<0?o:o.slice(0,a)),l=a<0?null:wm(o.slice(a+1));if(s in t){let u=t[s];Li(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function MC(e){let t="";for(let r in e){const n=e[r];if(r=tY(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}(Li(n)?n.map(o=>o&&pS(o)):[n&&pS(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function iY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=Li(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const oY=Symbol(""),xC=Symbol(""),yP=Symbol(""),x7=Symbol(""),vS=Symbol("");function Xf(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function ls(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(Wc(4,{from:r,to:t})):f instanceof Error?s(f):MX(f)?s(Wc(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function gy(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(aY(s)){const u=(s.__vccOpts||s)[t];u&&i.push(ls(u,r,n,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=fX(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[t];return h&&ls(h,r,n,o,a)()}))}}return i}function aY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function LC(e){const t=An(yP),r=An(x7),n=Ye(()=>t.resolve(_r(e.to))),i=Ye(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(jc.bind(null,c));if(h>-1)return h;const d=IC(l[u-2]);return u>1&&IC(c)===d&&f[f.length-1].path!==d?f.findIndex(jc.bind(null,l[u-2])):h}),o=Ye(()=>i.value>-1&&uY(r.params,n.value.params)),a=Ye(()=>i.value>-1&&i.value===r.matched.length-1&&b7(r.params,n.value.params));function s(l={}){return lY(l)?t[_r(e.replace)?"replace":"push"](_r(e.to)).catch(fd):Promise.resolve()}return{route:n,href:Ye(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}const sY=uP({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:LC,setup(e,{slots:t}){const r=uf(LC(e)),{options:n}=An(yP),i=Ye(()=>({[OC(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[OC(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:vP("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),fc=sY;function lY(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function uY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!Li(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function IC(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const OC=(e,t,r)=>e!=null?e:t!=null?t:r,cY=uP({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=An(vS),i=Ye(()=>e.route||n.value),o=An(xC,0),a=Ye(()=>{let u=_r(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ye(()=>i.value.matched[a.value]);Mg(xC,Ye(()=>a.value+1)),Mg(oY,s),Mg(vS,i);const l=M1();return mo(()=>[l.value,s.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!jc(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,h=f&&f.components[c];if(!h)return RC(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,g=vP(h,ke({},p,t,{onVnodeUnmounted:m=>{m.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return RC(r.default,{Component:g,route:u})||g}}});function RC(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const L7=cY;function fY(e){const t=$X(e.routes,e),r=e.parseQuery||nY,n=e.stringifyQuery||MC,i=e.history,o=Xf(),a=Xf(),s=Xf(),l=kg(Oa);let u=Oa;cc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=py.bind(null,Y=>""+Y),f=py.bind(null,rY),h=py.bind(null,wm);function d(Y,nt){let K,pt;return S7(Y)?(K=t.getRecordMatcher(Y),pt=nt):pt=Y,t.addRoute(pt,K)}function p(Y){const nt=t.getRecordMatcher(Y);nt&&t.removeRoute(nt)}function v(){return t.getRoutes().map(Y=>Y.record)}function g(Y){return!!t.getRecordMatcher(Y)}function m(Y,nt){if(nt=ke({},nt||l.value),typeof Y=="string"){const ft=vy(r,Y,nt.path),$=t.resolve({path:ft.path},nt),G=i.createHref(ft.fullPath);return ke(ft,$,{params:h($.params),hash:wm(ft.hash),redirectedFrom:void 0,href:G})}let K;if("path"in Y)K=ke({},Y,{path:vy(r,Y.path,nt.path).path});else{const ft=ke({},Y.params);for(const $ in ft)ft[$]==null&&delete ft[$];K=ke({},Y,{params:f(Y.params)}),nt.params=f(nt.params)}const pt=t.resolve(K,nt),Tt=Y.hash||"";pt.params=c(h(pt.params));const At=pX(n,ke({},Y,{hash:QX(Tt),path:pt.path})),lt=i.createHref(At);return ke({fullPath:At,hash:Tt,query:n===MC?iY(Y.query):Y.query||{}},pt,{redirectedFrom:void 0,href:lt})}function _(Y){return typeof Y=="string"?vy(r,Y,l.value.path):ke({},Y)}function y(Y,nt){if(u!==Y)return Wc(8,{from:nt,to:Y})}function w(Y){return P(Y)}function T(Y){return w(ke(_(Y),{replace:!0}))}function S(Y){const nt=Y.matched[Y.matched.length-1];if(nt&&nt.redirect){const{redirect:K}=nt;let pt=typeof K=="function"?K(Y):K;return typeof pt=="string"&&(pt=pt.includes("?")||pt.includes("#")?pt=_(pt):{path:pt},pt.params={}),ke({query:Y.query,hash:Y.hash,params:"path"in pt?{}:Y.params},pt)}}function P(Y,nt){const K=u=m(Y),pt=l.value,Tt=Y.state,At=Y.force,lt=Y.replace===!0,ft=S(K);if(ft)return P(ke(_(ft),{state:Tt,force:At,replace:lt}),nt||K);const $=K;$.redirectedFrom=nt;let G;return!At&&vX(n,pt,K)&&(G=Wc(16,{to:$,from:pt}),Pt(pt,pt,!0,!1)),(G?Promise.resolve(G):A($,pt)).catch(X=>zo(X)?zo(X,2)?X:tt(X):Z(X,$,pt)).then(X=>{if(X){if(zo(X,2))return P(ke({replace:lt},_(X.to),{state:Tt,force:At}),nt||$)}else X=M($,pt,!0,lt,Tt);return C($,pt,X),X})}function k(Y,nt){const K=y(Y,nt);return K?Promise.reject(K):Promise.resolve()}function A(Y,nt){let K;const[pt,Tt,At]=hY(Y,nt);K=gy(pt.reverse(),"beforeRouteLeave",Y,nt);for(const ft of pt)ft.leaveGuards.forEach($=>{K.push(ls($,Y,nt))});const lt=k.bind(null,Y,nt);return K.push(lt),xu(K).then(()=>{K=[];for(const ft of o.list())K.push(ls(ft,Y,nt));return K.push(lt),xu(K)}).then(()=>{K=gy(Tt,"beforeRouteUpdate",Y,nt);for(const ft of Tt)ft.updateGuards.forEach($=>{K.push(ls($,Y,nt))});return K.push(lt),xu(K)}).then(()=>{K=[];for(const ft of Y.matched)if(ft.beforeEnter&&!nt.matched.includes(ft))if(Li(ft.beforeEnter))for(const $ of ft.beforeEnter)K.push(ls($,Y,nt));else K.push(ls(ft.beforeEnter,Y,nt));return K.push(lt),xu(K)}).then(()=>(Y.matched.forEach(ft=>ft.enterCallbacks={}),K=gy(At,"beforeRouteEnter",Y,nt),K.push(lt),xu(K))).then(()=>{K=[];for(const ft of a.list())K.push(ls(ft,Y,nt));return K.push(lt),xu(K)}).catch(ft=>zo(ft,8)?ft:Promise.reject(ft))}function C(Y,nt,K){for(const pt of s.list())pt(Y,nt,K)}function M(Y,nt,K,pt,Tt){const At=y(Y,nt);if(At)return At;const lt=nt===Oa,ft=cc?history.state:{};K&&(pt||lt?i.replace(Y.fullPath,ke({scroll:lt&&ft&&ft.scroll},Tt)):i.push(Y.fullPath,Tt)),l.value=Y,Pt(Y,nt,K,lt),tt()}let D;function B(){D||(D=i.listen((Y,nt,K)=>{if(!Ht.listening)return;const pt=m(Y),Tt=S(pt);if(Tt){P(ke(Tt,{replace:!0}),pt).catch(fd);return}u=pt;const At=l.value;cc&&TX(SC(At.fullPath,K.delta),B1()),A(pt,At).catch(lt=>zo(lt,12)?lt:zo(lt,2)?(P(lt.to,pt).then(ft=>{zo(ft,20)&&!K.delta&&K.type===jd.pop&&i.go(-1,!1)}).catch(fd),Promise.reject()):(K.delta&&i.go(-K.delta,!1),Z(lt,pt,At))).then(lt=>{lt=lt||M(pt,At,!1),lt&&(K.delta&&!zo(lt,8)?i.go(-K.delta,!1):K.type===jd.pop&&zo(lt,20)&&i.go(-1,!1)),C(pt,At,lt)}).catch(fd)}))}let z=Xf(),N=Xf(),j;function Z(Y,nt,K){tt(Y);const pt=N.list();return pt.length?pt.forEach(Tt=>Tt(Y,nt,K)):console.error(Y),Promise.reject(Y)}function q(){return j&&l.value!==Oa?Promise.resolve():new Promise((Y,nt)=>{z.add([Y,nt])})}function tt(Y){return j||(j=!Y,B(),z.list().forEach(([nt,K])=>Y?K(Y):nt()),z.reset()),Y}function Pt(Y,nt,K,pt){const{scrollBehavior:Tt}=e;if(!cc||!Tt)return Promise.resolve();const At=!K&&PX(SC(Y.fullPath,0))||(pt||!K)&&history.state&&history.state.scroll||null;return $d().then(()=>Tt(Y,nt,At)).then(lt=>lt&&SX(lt)).catch(lt=>Z(lt,Y,nt))}const Ot=Y=>i.go(Y);let wt;const St=new Set,Ht={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:g,getRoutes:v,resolve:m,options:e,push:w,replace:T,go:Ot,back:()=>Ot(-1),forward:()=>Ot(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:N.add,isReady:q,install(Y){const nt=this;Y.component("RouterLink",fc),Y.component("RouterView",L7),Y.config.globalProperties.$router=nt,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>_r(l)}),cc&&!wt&&l.value===Oa&&(wt=!0,w(i.location).catch(Tt=>{}));const K={};for(const Tt in Oa)K[Tt]=Ye(()=>l.value[Tt]);Y.provide(yP,nt),Y.provide(x7,uf(K)),Y.provide(vS,l);const pt=Y.unmount;St.add(Y),Y.unmount=function(){St.delete(Y),St.size<1&&(u=Oa,D&&D(),D=null,l.value=Oa,wt=!1,j=!1),pt()}}};return Ht}function xu(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function hY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>jc(u,s))?n.push(s):r.push(s));const l=e.matched[a];l&&(t.matched.find(u=>jc(u,l))||i.push(l))}return[r,n,i]}function Fi(e){return`data/icons/item/${e}.webp`}function dY(e){return`<img src="${Fi(e)}" class="iconitem" />`}function Bt(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function cs(e,t){return e+(t-e)*Math.random()}function ho(e){return!isNaN(e)&&isFinite(e)}function pY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function vY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function gY(e,t,r,n=.5,i=120,o=0){var a=1,s=r-t;return s!=0&&(a=(e-t)/s),`hsla(${a*(i-o)+o}, 100%, 50%, ${n})`}function mY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function _Y(e){const t=/\d+/g;return e.match(t).join("-")}function bP(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function dd(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let a=t.level+1;a<=n;a++)t.level=a,t.wspdSheet+=cs(i.wspd_lo,i.wspd_hi)/1e6,o+=cs(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=cs(i.luck_lo,i.luck_hi)/1e4,a%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}const re=A0({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionModifiers:{},allowFloating:!1,useFloatingModifiers:{},regionModifiers2:{},lodgingP2W:{},storageP2W:{},storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,displayWorkerNames:!0,displayWorkerStatsRank:!1,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},prerelease_housesconfig:1}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=xt(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){var r=this.userWorkers.indexOf(e);console.log("fromIndex",r),this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t,console.log("assigned",e.label,"to",e.job)},chanceAtModifier(e,t){if(t==0)return 100;if(!xt().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined modifiers at rgk",e);const n=pY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const a=this.modSorteds[e][n],s=this.modTimes[e][a];if(n==i)return s;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-a)/(l-a);return s+c*(u-s)},tierModifiers(e,t,r){const n=[];let i=0;const o=t,a=2*o,s=Math.ceil(o/r),l=Math.ceil(a/r);for(let u=s;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtModifier(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const a=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingModifiers[t])for(const s of this.tierModifiers(t,e,r)){const l=Math.ceil(s.wld/r),u=10*l+a;o+=24*60*s.time/100/u}else{const s=e*(2-this.productivity(t)),l=Math.ceil(s/r),u=10*l+a;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=xt(),t=Object.keys(e.regionGroups).filter(r=>this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]);return console.log("floatingRegionGroups",t),t},modHists(){const e={},t=xt();for(const r of Object.keys(t.regionGroups))if(this.allowFloating&&this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r]){this.regionModifiers2.hasOwnProperty(r)||(this.regionModifiers2[r]=[0]);const n=this.regionModifiers2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}else this.regionModifiers.hasOwnProperty(r)?e[r]=[this.regionModifiers[r]]:e[r]=[0];return e},medianModifiers(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){let n=0;const i=this.modHists[r].length;if(i%2)n=this.modHists[r][(i-1)/2];else{const o=this.modHists[r][(i-1-1)/2],a=this.modHists[r][(i-1+1)/2];n=(o+a)/2}e[r]=n}return e},medianWorkloads(){const e={},t=xt();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianModifiers[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=xt();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},a=this.modHists[n][0],s=this.modHists[n][i-1];if(a==s)o[a]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==a){o[f]=100*c/(i-1);continue}if(f==s){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=xt();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionModifiers?e.regionModifiers[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=xt();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=xt(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=xt();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=xt();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>{if(e.displayWorkerStatsRank){const n=xt().workerStatRank(t);return{wspd:n.wspd_rank*100,mspd:n.mspd_rank*100,luck:n.luck_rank*100}}else return e.displayWorkerStatsForPz?xt().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet}},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},grindTakenDesc(e){let t="";const r=xt();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=xt();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!0).sort((u,c)=>u[1]-c[1]),[a,s,l]=o[0];l.forEach(u=>t.add(u))}),console.log("autotakenGrindNodes getter",t),t},pzJobs(e){const t={},r=xt(),n=new Set([...e.autotakenGrindNodes]);return this.workingWorkers.forEach(i=>{if(!i||!r.jobIsPz(i.job))return;const o=i.job;if(!o)return;const a=r.workerStatsOnPlantzone(i),s=r.profitPzTownStats(o,i.tnk,a.wspd,a.mspd,a.luck,r.isGiant(i.charkey));try{const[l,u]=r.dijkstraPath(o,i.tnk,n);l&&l.forEach(c=>n.add(c)),t[o]={pzk:o,worker:i,profit:s,usedPath:l}}catch{console.log(`Failed to build path: ${i.tnk} - ${o}`)}}),t},currentNodesJobs(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i].push(r):t[i]=[r]);return t},currentNodesCashflow(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&n.usedPath.forEach(i=>i in t?t[i]+=n.profit.priceDaily:t[i]=n.profit.priceDaily);return t},nodeSharing(e){const t={},r={};for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(function(o){let a=0;o in nodesJobs?(r[o]+=i.profit.priceDaily,i.profit.priceDaily>a?nodesJobs[o].push(n):(a=i.profit.priceDaily,nodesJobs[o].unshift(n))):(r[o]=i.profit.priceDaily,nodesJobs[o]=[n])});return{jobs:t,cashFlows:r}},pzjobsSharedCP(e){const t={},r=xt();for(const[n,i]of Object.entries(e.pzJobs))t[n]=0,i.usedPath&&i.usedPath.forEach(function(o){if(e.autotakenGrindNodes.has(o))return;const a=i.profit.priceDaily/e.currentNodesCashflow[o],s=r.nodes[o].CP*a;t[n]+=s});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerCP(e){return(e.farmingProfit-e.farmingBareProfit)/10},workerBringsItemkeys:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[worker.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]=new Set([]));for(const[n,i]of Object.entries(e.workingWorkers))if(r.jobIsPz(i.job)){const o=r.tnk2tk(i.tnk);t[o]=new Set([...t[o],...r.plantzones[i.job].itemkeys])}return t},baseStorage(e){return e.selectedRegion=="RU"||e.selectedRegion=="SEA"?8:16},townInfra:e=>(t,r,n)=>{const i=xt();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,a=n+(n>0?2:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,a)},townInfraAddCost:e=>(t,r,n)=>{const i=e.townsInfra[t],o=new Set([...e.townsStoreItemkeys[t],...n]).size,a=e.townInfra(t,e.townWorkingWorkers(t).length+r,o),s=`old: ${Math.max(0,i.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,i.wantStorage)}\u{1F4E6} = ${Bt(i.cost)} CP
new: ${Math.max(0,a.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,a.wantStorage)}\u{1F4E6} = ${Bt(a.cost)} CP`;return{cost:a.cost-i.cost,tooltip:s}},townsInfra(e){const t={},r=xt();return r.ready&&r.towns.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},workerIncome:e=>t=>{const r=xt();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job))return e.pzJobs[t.job].profit.priceDaily;if(r.jobIsFarming(t.job))return e.farmingProfitPerCP;if(r.jobIsCustom(t.job))return t.job[1];if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t)}},workerSharedCp:e=>t=>{const r=xt();if(r.jobIsPz(t.job))return e.pzjobsSharedCP[t.job];if(r.jobIsFarming(t.job))return 0;if(r.jobIsCustom(t.job))return t.job[2];if(r.jobIsWorkshop(t.job)){const n=e.workersWorkshop.filter(i=>i.job.hk==t.job.hk).length;return e.userWorkshops[t.job.hk].manualCp/n}},workerSharedLodgingCp:e=>t=>{const r=xt();if(!r.ready)return;const n=e.workerIncome(t),i=r.tnk2tk(t.tnk),o=e.prerelease_housesconfig?e.townsInfra[i].cost:e.haveLodging.cp.perTown[i],a=e.townsTotalIncome[i].income;let s;if(a>0)s=n/a*o;else{const l=e.userWorkers.filter(u=>r.tnk2tk(u.tnk)==i).length;s=1/l*o}return s},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t)/(e.workerSharedCp(t)+e.workerSharedLodgingCp(t));return isNaN(r)&&console.log("workerIncomePerCp ret NaN (NaN income / 0 cp?) for worker",t.label),r},workersSortedByIncomePerCp(e){const t=Date.now(),r=[];return e.workingWorkers.forEach(n=>{r.push({w:n,i:e.workerIncome(n),ipc:e.workerIncomePerCp(n)})}),r.sort((n,i)=>isNaN(n.ipc)?-1:isNaN(i.ipc)||!isFinite(n.ipc)?1:isFinite(i.ipc)?n.ipc-i.ipc:-1),console.log("workersSortedByIncomePerCp took",Date.now()-t,"ms"),r},townsTotalIncome(e){const t={},r=xt();if(!r.ready)return t;r.towns.forEach(n=>t[r.tnk2tk(n)]={income:0,mapCp:0});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].income+=e.workerIncome(i),t[o].mapCp+=e.workerSharedCp(i)}for(const[n,i]of Object.entries(t)){const o=e.prerelease_housesconfig?e.townsInfra[n].cost:e.haveLodging.cp.perTown[n];i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},autotakenNodes(e){const t=new Set([...e.autotakenGrindNodes]);for(const[n,i]of Object.entries(e.pzJobs))i.usedPath&&i.usedPath.forEach(o=>t.add(o));const r=xt();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!0).sort((l,u)=>l[1]-u[1]),[o,a,s]=i[0];s.forEach(l=>t.add(l))}return console.log("autotakenNodes getter",t),t},autotakenGrindNodesCP(e){const t=xt(),r=[...e.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0);return console.log("autotakenGrindNodesCP",r),r},autotakenNodesCP(e){const t=xt();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgingCp(n.worker);return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=xt();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[1]),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[2]),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgingCp(r)}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},totalCP(e){return e.autotakenNodesCP+e.farmingCP+(e.prerelease_housesconfig?e.lodgage:e.haveLodging.cp.total)+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},jobsUsingNodes:e=>t=>{const r=xt(),n=t.filter(a=>!r.townSet.has(a)),i=new Set(n),o=[];for(const[a,s]of Object.entries(e.pzJobs))s.usedPath.filter(u=>i.has(u)).length&&o.push(s);return o},workerPzStats(e){const t=xt(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},pzProfitsBefore(e){const t=e.pzJobsTotalDailyProfit,r=e.autotakenNodesCP,n=e.pzJobsTotalLodgingCost,i=e.pzJobsDailyProfitPerCp;return{daily:t,cp:r,lodgingCp:n,dailyPerCp:i}},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=xt();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],a=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=a/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return console.log("jobsTally getter"),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t}}}),Ii=A0({id:"market",state:()=>({ready:!1,apiPrices:[],calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=re(),r=`https://apiv2.bdolytics.com/${t.selectedLang}/${t.selectedRegion}/market/central-market-data`,n=await(await fetch(r)).json(),i=xt(),o=new Set(i.itemKeys);console.log("uset",o);const a={};n.data.forEach(s=>{o.has(s.item_id)&&(a[s.item_id]=s.price)});for(const s of Object.keys(i.vendorPrices))t.keepItems[s]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4001 in a&&(this.apiPrices=a,this.apiDatetime=Date.now(),this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:re().itemUrl+e},priceBunch(e){if(e===null||typeof e>"u")return null;let t=0;for(const[r,n]of Object.entries(e))t+=this.prices[r]*n;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky);if(e.lucky){const n=this.priceBunch(e.lucky);return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=re(),r=xt();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[a,s]of Object.entries(o))n[i]+=n[a]*s}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var gS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function yY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var I7={exports:{}},O7={exports:{}};(function(e,t){(function(){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g;i=Math.floor,f=Math.min,n=function(m,_){return m<_?-1:m>_?1:0},c=function(m,_,y,w,T){var S;if(y==null&&(y=0),T==null&&(T=n),y<0)throw new Error("lo must be non-negative");for(w==null&&(w=m.length);y<w;)S=i((y+w)/2),T(_,m[S])<0?w=S:y=S+1;return[].splice.apply(m,[y,y-y].concat(_)),_},s=function(m,_,y){return y==null&&(y=n),m.push(_),v(m,0,m.length-1,y)},a=function(m,_){var y,w;return _==null&&(_=n),y=m.pop(),m.length?(w=m[0],m[0]=y,g(m,0,_)):w=y,w},u=function(m,_,y){var w;return y==null&&(y=n),w=m[0],m[0]=_,g(m,0,y),w},l=function(m,_,y){var w;return y==null&&(y=n),m.length&&y(m[0],_)<0&&(w=[m[0],_],_=w[0],m[0]=w[1],g(m,0,y)),_},o=function(m,_){var y,w,T,S,P,k;for(_==null&&(_=n),S=function(){k=[];for(var A=0,C=i(m.length/2);0<=C?A<C:A>C;0<=C?A++:A--)k.push(A);return k}.apply(this).reverse(),P=[],w=0,T=S.length;w<T;w++)y=S[w],P.push(g(m,y,_));return P},p=function(m,_,y){var w;if(y==null&&(y=n),w=m.indexOf(_),w!==-1)return v(m,0,w,y),g(m,w,y)},h=function(m,_,y){var w,T,S,P,k;if(y==null&&(y=n),T=m.slice(0,_),!T.length)return T;for(o(T,y),k=m.slice(_),S=0,P=k.length;S<P;S++)w=k[S],l(T,w,y);return T.sort(y).reverse()},d=function(m,_,y){var w,T,S,P,k,A,C,M,D;if(y==null&&(y=n),_*10<=m.length){if(S=m.slice(0,_).sort(y),!S.length)return S;for(T=S[S.length-1],C=m.slice(_),P=0,A=C.length;P<A;P++)w=C[P],y(w,T)<0&&(c(S,w,0,null,y),S.pop(),T=S[S.length-1]);return S}for(o(m,y),D=[],k=0,M=f(_,m.length);0<=M?k<M:k>M;0<=M?++k:--k)D.push(a(m,y));return D},v=function(m,_,y,w){var T,S,P;for(w==null&&(w=n),T=m[y];y>_;){if(P=y-1>>1,S=m[P],w(T,S)<0){m[y]=S,y=P;continue}break}return m[y]=T},g=function(m,_,y){var w,T,S,P,k;for(y==null&&(y=n),T=m.length,k=_,S=m[_],w=2*_+1;w<T;)P=w+1,P<T&&!(y(m[w],m[P])<0)&&(w=P),m[_]=m[w],_=w,w=2*_+1;return m[_]=S,v(m,k,_,y)},r=function(){m.push=s,m.pop=a,m.replace=u,m.pushpop=l,m.heapify=o,m.updateItem=p,m.nlargest=h,m.nsmallest=d;function m(_){this.cmp=_!=null?_:n,this.nodes=[]}return m.prototype.push=function(_){return s(this.nodes,_,this.cmp)},m.prototype.pop=function(){return a(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},m.prototype.replace=function(_){return u(this.nodes,_,this.cmp)},m.prototype.pushpop=function(_){return l(this.nodes,_,this.cmp)},m.prototype.heapify=function(){return o(this.nodes,this.cmp)},m.prototype.updateItem=function(_){return p(this.nodes,_,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var _;return _=new m,_.nodes=this.nodes.slice(0),_},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m}(),function(m,_){return e.exports=_()}(this,function(){return r})}).call(gS)})(O7);(function(e){e.exports=O7.exports})(I7);const Wh=yY(I7.exports),xt=A0({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},towns:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{}}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>this.skillData[i].tier!=4&&!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return this.ready?{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnIndustry(e,t){return this.ready?{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=re(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatRank(e){const t=e.level-1,r=this.workerStatic[e.charkey],n=r.wspd_lo*t,o=r.wspd_hi*t-n,s=(e.wspdSheet*1e6-r.wspd-n)/o||0,l=r.mspd_lo*t,u=r.mspd_hi*t,f=((e.mspdSheet/(r.mspd/100)-1)*1e6-l)/(u-l)||0,h=r.luck_lo*t,d=r.luck_hi*t,v=(e.luckSheet*1e4-r.luck-h)/(d-h)||0;return{wspd_rank:s,mspd_rank:f,luck_rank:v}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(n=>+n)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json(),this.itemInfo=await(await fetch("data/manual/item_info.json")).json(),this.itemKeys=await(await fetch("data/manual/plantzone_uniques.json")).json(),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.hk2nk=await(await fetch("data/hk2nk.json")).json(),this.tk2nk=await(await fetch("data/distances_tk2nk.json")).json(),this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.towns=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795],this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this._tk2tnk={5:1,32:301,52:302,77:601,88:61,107:602,120:604,126:608,182:1002,202:1101,221:1141,229:1301,601:1314,605:1319,619:1343,693:1380,706:1604,735:1623,873:1649,955:1691,1124:1750,1210:1781,1219:1785,1246:1795};const t={};for(const[n,i]of Object.entries(this._tk2tnk))t[i]=n;this._tnk2tk=t;const r={};for(const[n,i]of Object.entries(this.plantzoneStatic))if(n in this.plantzoneDrops){const o=i.regiongroup;o in r?r[o].push(n):r[o]=[n]}this.regionGroups=r,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[n,i]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[n]=Object.keys(i).sort((o,a)=>o-a);this.giantSpecies=new Set([2,4,8]),this.speciesIcons={0:"\u{1F47A}",1:"\u{1F468}",2:"\u{1F422}",3:"\u{1F47A}",4:"\u{1F422}",5:"\u{1F47A}",6:"\u{1F47A}",7:"\u{1F468}",8:"\u{1F422}"},this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e/0)}},tnk2tk(e){if(this.ready){if(e in this._tnk2tk)return this._tnk2tk[e];console.log("unknown tnk",e)}},dijTownsInCpRadius(e,t){let r=new Wh((s,l)=>n[s]-n[l]),n={[e]:this.nodes[e].CP},i={[e]:[e]};r.push(e);for(var o;r.size()&&(o=r.pop(),!(n[o]>=t));)this.links[o].forEach(s=>{const l=n[o]+this.nodes[s].CP;s in n?l<n[s]&&(n[s]=l,i[s]=[...i[o],s]):(n[s]=l,i[s]=[...i[o],s],r.push(s))});const a={};return this.towns.forEach(s=>{s in n&&(a[s]=n[s])}),a},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=re();let n=new Set,i=new Wh((u,c)=>o[u]-o[c]),o={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},a={[e]:[e]};i.push(e);for(var s;i.size()&&(s=i.pop(),!(this.pzdSet.has(s)&&!r.autotakenNodes.has(s)&&(n.add(s),n.size==t)));)this.links[s].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=o[s]+c;u in o?f<o[u]&&(o[u]=f,a[u]=[...a[s],u]):(o[u]=f,i.push(u),a[u]=[...a[s],u])});const l=[];return n.forEach(u=>{l.push([u,o[u],a[u]])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];let n={[e]:this.nodes[e].CP},i={[e]:[e]},o=new Wh((s,l)=>n[s]-n[l]);o.push(e);for(var a;o.size()&&(a=o.pop(),a!=t);)this.links[a].forEach(s=>{this.nodes[s]==null&&console.log("dijkstraPath: no exploration node",s);const l=r&&r.has(s)?0:this.nodes[s].CP,u=n[a]+l;s in n?u<n[s]&&(n[s]=u,i[s]=[...i[a],s]):(n[s]=u,i[s]=[...i[a],s],o.push(s))});return[i[t],n[t]]},dijkstraNearestTowns(e,t,r,n){if(!this.ready)return;let i=new Set,o=new Wh((c,f)=>a[c]-a[f]),a={[e]:this.nodes[e].CP},s={[e]:[e]};o.push(e);for(var l;o.size()&&(l=o.pop(),!(this.townSet.has(l)&&(!n||l!=1343)&&(i.add(l),i.size==t)));)this.links[l].forEach(c=>{this.nodes[c]==null&&console.log("dijkstraNearestTowns: no exploration node",c);const f=r&&r.has(c)?0:this.nodes[c].CP,h=a[l]+f;c in a?h<a[c]&&(a[c]=h,s[c]=[...s[l],c]):(o.push(c),a[c]=h,s[c]=[...s[l],c])});const u=[];return i.forEach(c=>{u.push([c,a[c],s[c]])}),u},plantzoneNearestTownsFreeWorkersProfits(e,t){const r=re(),n=[];return this.dijkstraNearestTowns(e,t,r.autotakenNodes).forEach(([o,a,s])=>{const l=this._tnk2tk[o];r.getFreeWorkers(l).forEach(c=>{const f=this.workerStatsOnPlantzone(c);n.push(this.pzSelectionEntry(e,l,o,a,s,c,f))})}),n.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),n},pzSelectionEntry(e,t,r,n,i,o,a){const s=re(),l=this.profitPzTownStats(e,r,a.wspd,a.mspd,a.luck,this.isGiant(o.charkey)),u=s.townInfraAddCost(t,1,this.plantzones[e].itemkeys),c={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:u.cost,infraTooltip:u.tooltip,cp:n+u.cost,profit:l,w:o,statsOnPz:a};return c.dailyPerCp=s.jobEfficiencyDelta(c.profit.priceDaily,n+u.cost),c},farmSelectionEntry(e){const t=re(),r=t.townInfraAddCost(e,1,[]);return{townCp:r.cost,infraTooltip:r.tooltip,dailyPerCp:t.jobEfficiencyDelta(t.farmingProfitPerCP,r.cost)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const a=re(),s=Ii(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:s.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=a.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const a={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"};i=this.medianGiant(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!0),o.charkey=i.charkey,o.wspd=i.wspd;const s={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},l=s&&s.dailyPerCp>a.dailyPerCp?s:a,u=this.medianHuman(t);o=this.profitPzTownStats(e,t,u.wspd+5,u.mspd,u.luck,!1),o.charkey=u.charkey,o.wspd=u.wspd;const c={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},f=c&&c.dailyPerCp>l.dailyPerCp?c:l,h={[s.charkey]:s.priceDaily,[c.charkey]:c.priceDaily,[a.charkey]:a.priceDaily},d=Object.entries(h).map(([p,v])=>({charkey:p,priceDaily:v}));return d.sort((p,v)=>p&&v&&v.priceDaily-p.priceDaily),f.alt_workers_dict=h,f.alt_workers=d,f.connected=!0,f},makeMedianChar(e){const t={},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let s=2;s<=40;s++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let a=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(a)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):this.makeMedianChar(7573)},profitWorkshopWorker(e,t,r){const n=re(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),a=n.calcWalkMinutes(o,i.mspd),s=Math.ceil(t.manualWorkload/i.wspd),l=5*s+a;return 24*60/l*t.manualCycleIncome/1e6},itemName(e){if(!this.ready)return e;const t=re();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=re();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1];return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this.hk2nk[t],n=this._tnk2tk[e];return this.tk2nk[n][r]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},isTown(e){return[1,2].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return Array.isArray(e)},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},workerJobDescription(e){const t=e.job;if(this.jobIsIdle(t))return"idle";if(this.jobIsPz(t))return this.uloc.node[t];if(this.jobIsFarming(t))return"["+this.jobIcon(t)+"]";if(this.jobIsCustom(t))return"["+this.jobIcon(t)+"] "+t[3];if(this.jobIsWorkshop(t)){const n=xt().uloc.char[t.hk],i=_Y(n);return"["+this.jobIcon(t)+"] "+i}return"UNKNOWN_JOBTYPE"},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=vY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,a=t>this.townUpperLimits[e].lodging,s=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:a,warnS:s,errS:l},i}},getters:{uloc(){const e=re();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townSet(){return new Set(this.towns)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=Ii(),r=re();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const a={...o,...this.plantzoneStatic[i]};a.name=this.plantzoneName(i);const s=t.priceBunch(a.lucky);a.unluckyValue=t.priceBunch(a.unlucky),a.luckyValue=a.unluckyValue+s,a.unluckyValue_gi=t.priceBunch(a.unlucky_gi),a.luckyValue_gi=a.unluckyValue_gi+s,a.activeWorkload=a.workload*(2-r.productivity(a.regiongroup)),a.itemkeys=new Set([...Object.keys(a.unlucky),...Object.keys(a.lucky)]),n[i]=a}return console.log("plantzones getter took",Date.now()-e,"ms"),n}}}),$1=A0({id:"map",state:()=>({target:[0,0],zoom:-8})}),bY=A0({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})});const $e=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},wY={class:"wrapper"},SY=V("Home"),TY=V("Plantzones"),PY=V("Modifiers"),EY=V("Settings"),AY=V("About"),kY={async beforeCreate(){xt().fetchData();const t=re(),r=localStorage.getItem("user");t.migrate(r);const n=Ii(),i=localStorage.getItem("market");i&&n.$patch(JSON.parse(i));const o=3600*1e3;n.apiDatetime+o<Date.now()&&n.fetchData();const a=$1(),s=localStorage.getItem("map");a.$patch(JSON.parse(s))}},CY=Object.assign(kY,{__name:"App",setup(e){return(t,r)=>(O(),R(W,null,[b("header",null,[b("div",wY,[b("nav",null,[Mt(_r(fc),{to:"/"},{default:Ee(()=>[SY]),_:1}),Mt(_r(fc),{to:"/plantzones"},{default:Ee(()=>[TY]),_:1}),Mt(_r(fc),{to:"/modifiers"},{default:Ee(()=>[PY]),_:1}),Mt(_r(fc),{to:"/settings"},{default:Ee(()=>[EY]),_:1}),Mt(_r(fc),{to:"/about"},{default:Ee(()=>[AY]),_:1})])])]),Mt(_r(L7))],64))}}),MY=$e(CY,[["__scopeId","data-v-14b67078"]]),xY="modulepreload",LY=function(e){return"/workerman/"+e},DC={},IY=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=LY(i),i in DC)return;DC[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":xY,o||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),o)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};const OY={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean},data:()=>({}),methods:{formatFixed:Bt,percentageToColor:gY}},RY={key:0,class:"fss"},DY={key:1},NY={key:0,class:"fss"},FY={key:1},BY={key:0,class:"fss"},$Y={key:1},zY={class:"center"},VY=V(" @ "),UY=V(" idle "),GY={class:"center"};function jY(e,t,r,n,i,o){return O(),R("tr",null,[b("td",null,[b("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),b("td",null,L((this.userStore.displayWorkerNames?r.w.label:"")+this.gameStore.speciesIcons[this.gameStore.workerStatic[r.w.charkey].species]+r.w.level),1),b("td",{style:Dl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(O(),R("span",RY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,1))+"% ",1)):(O(),R("span",DY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),1))],4),b("td",{style:Dl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(O(),R("span",NY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,1))+"% ",1)):(O(),R("span",FY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),1))],4),b("td",{style:Dl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},[this.userStore.displayWorkerStatsRank?(O(),R("span",BY,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,1))+"% ",1)):(O(),R("span",$Y,L(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),1))],4),b("td",zY,[b("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),b("td",null,[r.w.job?(O(),R(W,{key:0},[typeof r.w.job=="number"?(O(),R("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("pan",this.gameStore.nodes[r.w.job].pos)),class:"clickable"},L(n.gameStore.workerJobDescription(r.w)),1)):(O(),R(W,{key:1},[V(L(n.gameStore.workerJobDescription(r.w)),1)],64)),VY,n.userStore.displayProfitPerCp?(O(),R(W,{key:2},[V(L(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(O(),R(W,{key:3},[V(L(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(O(),R(W,{key:1},[UY],64))]),b("td",GY,[r.w.job?(O(),R("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(O(),R("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))])])}const R7=$e(OY,[["render",jY],["__scopeId","data-v-0441faab"]]);const WY={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},props:{o:Object,tk:String},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:R7},data:()=>({}),methods:{formatFixed:Bt,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},wP=e=>(Vr("data-v-d7dfa4c1"),e=e(),Ur(),e),HY={colspan:"2"},XY=V(" worker "),YY=wP(()=>b("td",{class:"center"},"\u{1F528}",-1)),qY=wP(()=>b("td",{class:"center"},"\u{1F9B6}",-1)),ZY=wP(()=>b("td",{class:"center"},"\u{1F340}",-1)),KY=V(" \xA0 "),JY={colspan:"8"},QY=V(" empty slot ");function tq(e,t,r,n,i,o){const a=de("Worker");return O(),R(W,null,[b("tr",null,[b("td",HY,[XY,n.userStore.prerelease_housesconfig?(O(),R("button",{key:0,onClick:t[0]||(t[0]=s=>this.$emit("hireWorker",r.tk))}," hire ")):st("",!0)]),YY,qY,ZY,b("td",{colspan:"3",class:Jr({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})},[b("span",{onClick:t[1]||(t[1]=s=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},L(n.gameStore.uloc.town[r.tk]),1),V(" "+L()+" ",1),n.userStore.displayProfitPerCp?(O(),R(W,{key:0},[V(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(O(),R(W,{key:1},[V(L(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),KY,n.userStore.prerelease_housesconfig?(O(),R(W,{key:2},[V(L(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),b("span",null,L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),V(" \u{1F4E6} "+L(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost)+" CP ",1),b("button",{onClick:t[2]||(t[2]=s=>this.$emit("selectHouses",r.tk))}," config ")],64)):(O(),R(W,{key:3},[V(L(n.userStore.haveLodging.slots.perTown[r.tk])+" \u{1F6CF}\uFE0F / "+L(n.userStore.haveLodging.cp.perTown[r.tk])+" CP ",1),b("button",{onClick:t[3]||(t[3]=s=>this.$emit("selectLodging",r.tk))}," lodging ")],64))],2)]),(O(!0),R(W,null,Nt(n.userStore.userWorkers.filter(s=>n.gameStore.tnk2tk(s.tnk)==r.tk),(s,l)=>(O(),fa(a,{w:s,homeless:!0,class:Jr({homeless:!n.userStore.prerelease_housesconfig&&l>n.userStore.haveLodging.slots.perTown[r.tk]-1}),onFire:u=>o.fireWorker(s),onEdit:u=>this.$emit("editWorker",s),onSend:u=>this.$emit("sendWorker",s),onPan:t[4]||(t[4]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","onFire","onEdit","onSend"]))),256)),n.userStore.prerelease_housesconfig?st("",!0):(O(),R(W,{key:0},[n.userStore.townFreeLodgingCount(r.tk)>0?(O(!0),R(W,{key:0},Nt(n.userStore.townFreeLodgingCount(r.tk),s=>(O(),R("tr",null,[b("td",JY,[QY,n.userStore.townFreeLodgingCount(r.tk)>0?(O(),R("button",{key:0,onClick:t[5]||(t[5]=l=>this.$emit("hireWorker",r.tk))}," hire ")):st("",!0)])]))),256)):st("",!0)],64))],64)}const eq=$e(WY,[["render",tq],["__scopeId","data-v-d7dfa4c1"]]);const rq={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},props:{pzk:Number},emits:["showModifierDialog","editWorker"],components:{},data:()=>({}),methods:{formatFixed:Bt,makeIconSrc:Fi},computed:{freeWorkers(){return this.gameStore.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter((r,n,i)=>n===i.findIndex(o=>o.tnk===r.tnk&&JSON.stringify(o.statsOnPz)===JSON.stringify(r.statsOnPz)))}}},k0=e=>(Vr("data-v-b7b2da82"),e=e(),Ur(),e),nq={key:0},iq=["src"],oq=V(" workload: "),aq={id:"plantzoneWorkerInfo"},sq=k0(()=>b("br",null,null,-1)),lq=k0(()=>b("abbr",{class:"tooltip",title:"\u03A3 of connection nodes costs shared proportionally between all active jobs using them + full cost of this node"},"\u2139\uFE0F",-1)),uq=k0(()=>b("br",null,null,-1)),cq=["title"],fq=k0(()=>b("br",null,null,-1)),hq=["title"],dq=V(" worker: none "),pq=V(" Nearest towns with idle workers: "),vq={key:0},gq=k0(()=>b("tr",null,[b("th",null,"town"),b("th",null,"walk"),b("th",null,[V("worker "),b("abbr",{title:"same town&stat workers are hidden in this view"},"\u2139\uFE0F")]),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"+efficiency"),b("th",null,"action")],-1)),mq={key:0},_q={class:"fsxs"},yq=["title"],bq=V("+"),wq=["title"],Sq=["onClick","disabled"],Tq=V(" None ");function Pq(e,t,r,n,i,o){const a=de("RouterLink");return O(),R(W,null,[b("div",null,[Mt(a,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:Ee(()=>[V(L(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),V(" "+L(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(O(),R("span",nq,[(O(!0),R(W,null,Nt(this.gameStore.plantzones[r.pzk].itemkeys,s=>(O(),fa(a,{tag:"a",to:{path:"./settings",hash:"#item"+s}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(s),class:"iconitem"},null,8,iq)]),_:2},1032,["to"]))),256)),V(" [\u{1F340}"+L(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2))+"x] ",1)])):st("",!0)]),b("div",null,[oq,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.pzk].regiongroup]?(O(),R(W,{key:0},[V(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),b("button",{onClick:t[0]||(t[0]=s=>e.$emit("showModifierDialog",r.pzk))},"review")],64)):(O(),R(W,{key:1},[V(L(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 modifier ",1),yt(b("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=s=>n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup]=s),min:"0",max:"100",step:"1",class:"w42em"},null,512),[[pe,n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]])],64))]),b("div",aq,[n.userStore.workedPlantzones.has(r.pzk.toString())?(O(),R(W,{key:0},[V(" worker: "+L(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+L(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(O(),R(W,{key:0},[b("button",{onClick:t[2]||(t[2]=s=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),b("button",{onClick:t[3]||(t[3]=s=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):st("",!0),sq,V(" connection cost: "+L(o.formatFixed(n.userStore.pzjobsSharedCP[r.pzk],3))+" CP ",1),lq,uq,V(" "+L(n.userStore.prerelease_housesconfig?"lodgage":"lodging")+" cost: "+L(o.formatFixed(n.userStore.workerSharedLodgingCp(n.userStore.pzJobs[r.pzk].worker),3))+" CP ",1),b("abbr",{class:"tooltip",title:n.userStore.prerelease_housesconfig?"total lodgage costs of hometown shared proportionally between all active jobs from that town":"total lodging costs of hometown shared between all active jobs from that town"},"\u2139\uFE0F",8,cq),fq,V(" efficiency: "+L(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),b("abbr",{class:"tooltip",title:n.userStore.prerelease_housesconfig?"income / (connectionCost + lodgageCost)":"income / (connectionCost + lodgingCost)"},"\u2139\uFE0F",8,hq)],64)):(O(),R(W,{key:1},[dq],64))]),b("div",null,[pq,o.freeWorkers.length?(O(),R("table",vq,[gq,(O(!0),R(W,null,Nt(o.freeWorkers,s=>(O(),R(W,null,[s.profit.dist<1e6?(O(),R("tr",mq,[b("td",null,L(n.gameStore.nodeName(s.tnk)),1),b("td",null,L(o.formatFixed(s.profit.dist)),1),b("td",null,[V(L(s.w.label)+" ",1),b("span",_q,L(o.formatFixed(s.statsOnPz.wspd,2))+"\u{1F528} "+L(o.formatFixed(s.statsOnPz.mspd,2))+"\u{1F9B6} "+L(o.formatFixed(s.statsOnPz.luck,2))+"\u{1F340} ",1)]),b("td",null,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",null,[b("abbr",{title:"via "+Array.from(s.path,l=>n.gameStore.uloc.node[l]).join(`
`)},L(s.mapCp),9,yq),bq,b("abbr",{title:s.infraTooltip},L(s.townCp),9,wq),V("="+L(s.cp),1)]),b("td",null,L(o.formatFixed(s.dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:l=>n.userStore.assignWorker(s.w,s.pz.key),disabled:n.userStore.workedPlantzones.has(r.pzk.toString())}," assign ",8,Sq)])])):st("",!0)],64))),256))])):(O(),R(W,{key:1},[Tq],64))]),st("",!0)],64)}const Eq=$e(rq,[["render",Pq],["__scopeId","data-v-b7b2da82"]]);const Aq={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function kq(e,t,r,n,i,o){return yt((O(),R("div",{onClick:t[1]||(t[1]=ym(a=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[b("div",{onClick:t[0]||(t[0]=ym(()=>{},["stop"])),class:"dialog_content"},[OW(e.$slots,"default",{},void 0,!0)])],512)),[[IH,r.show]])}const SP=$e(Aq,[["render",kq],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var mS=function(e,t){return mS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},mS(e,t)};function mt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");mS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Cq=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),Mq=function(){function e(){this.browser=new Cq,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Sl=new Mq;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Sl.wxa=!0,Sl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Sl.worker=!0:typeof navigator>"u"?(Sl.node=!0,Sl.svgSupported=!0):xq(navigator.userAgent,Sl);function xq(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Xt=Sl;var TP=12,Lq="sans-serif",ql=TP+"px "+Lq,Iq=20,Oq=100,Rq="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function Dq(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-Iq)/Oq;t[n]=i}return t}var Nq=Dq(Rq),uu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=uu.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||ql),e.measureText(r);r=r||"",n=n||ql;var o=/^([0-9]*?)px$/.exec(n),a=+(o&&o[1])||TP,s=0;if(n.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var u=Nq[r[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},D7=cu(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),N7=cu(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),cf=Object.prototype.toString,z1=Array.prototype,Fq=z1.forEach,Bq=z1.filter,PP=z1.slice,$q=z1.map,NC=function(){}.constructor,wp=NC?NC.prototype:null,EP="__proto__",zq=2311;function F7(){return zq++}function AP(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function zt(e){if(e==null||typeof e!="object")return e;var t=e,r=cf.call(e);if(r==="[object Array]"){if(!vd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=zt(e[n])}}else if(N7[r]){if(!vd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!D7[r]&&!vd(e)&&!Sm(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==EP&&(t[a]=zt(e[a]))}return t}function oe(e,t,r){if(!It(t)||!It(e))return r?zt(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==EP){var i=e[n],o=t[n];It(o)&&It(i)&&!ct(o)&&!ct(i)&&!Sm(o)&&!Sm(i)&&!FC(o)&&!FC(i)&&!vd(o)&&!vd(i)?oe(i,o,r):(r||!(n in e))&&(e[n]=zt(t[n]))}return e}function Vq(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=oe(r,e[n],t);return r}function ot(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==EP&&(e[r]=t[r]);return e}function te(e,t,r){for(var n=ve(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}uu.createCanvas;function ue(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function Uq(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Bi(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else te(e,t,r)}function $r(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function F(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===Fq)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function kt(e,t,r){if(!e)return[];if(!t)return kP(e);if(e.map&&e.map===$q)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function cu(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function yr(e,t,r){if(!e)return[];if(!t)return kP(e);if(e.filter&&e.filter===Bq)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ve(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function Gq(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(PP.call(arguments)))}}var Vt=wp&&Ut(wp.bind)?wp.call.bind(wp.bind):Gq;function be(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(PP.call(arguments)))}}function ct(e){return Array.isArray?Array.isArray(e):cf.call(e)==="[object Array]"}function Ut(e){return typeof e=="function"}function Et(e){return typeof e=="string"}function _S(e){return cf.call(e)==="[object String]"}function we(e){return typeof e=="number"}function It(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function FC(e){return!!D7[cf.call(e)]}function xn(e){return!!N7[cf.call(e)]}function Sm(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function V1(e){return e.colorStops!=null}function jq(e){return e.image!=null}function Wq(e){return cf.call(e)==="[object RegExp]"}function Tm(e){return e!==e}function wi(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function qt(e,t){return e!=null?e:t}function pd(e,t,r){return e!=null?e:t!=null?t:r}function kP(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return PP.apply(e,t)}function B7(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Oi(e,t){if(!e)throw new Error(t)}function _o(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var $7="__ec_primitive__";function Pm(e){e[$7]=!0}function vd(e){return e[$7]}var Hq=function(){function e(t){this.data={};var r=ct(t);this.data={};var n=this;t instanceof e?t.each(i):t&&F(t,i);function i(o,a){r?n.set(o,a):n.set(a,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ve(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function jt(e){return new Hq(e)}function z7(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function U1(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&ot(r,t),r}function V7(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function ht(e,t){return e.hasOwnProperty(t)}function Fr(){}var Xq=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var yS=function(e,t){return yS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},yS(e,t)};function Ae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");yS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function ff(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function Yq(e,t){return e[0]=t[0],e[1]=t[1],e}function qq(e){return[e[0],e[1]]}function BC(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function U7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function Zq(e){return Math.sqrt(Kq(e))}function Kq(e){return e[0]*e[0]+e[1]*e[1]}function my(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function CP(e,t){var r=Zq(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function bS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var Jq=bS;function Qq(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Mc=Qq;function Qr(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function gc(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function mc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Lu=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),tZ=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Lu(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,r.drift(o,a,t),this.handler.dispatchToElement(new Lu(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Lu(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Lu(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Lu(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Lu(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const eZ=tZ;var rZ=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=r[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const $i=rZ;var nZ=Math.log(2);function wS(e,t,r,n,i,o){var a=n+"-"+i,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/nZ);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*wS(e,t-1,c,u,i|p,o),d++)}return o[a]=f,f}function $C(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=wS(r,8,0,0,0,n);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*wS(r,7,a===0?1:0,1<<a,1<<s,n)/i*t[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var zC="___zrEVENTSAVED",_y=[];function iZ(e,t,r,n,i){return SS(_y,t,n,i,!0)&&SS(e,r,_y[0],_y[1])}function SS(e,t,r,n,i){if(t.getBoundingClientRect&&Xt.domSupported&&!G7(t)){var o=t[zC]||(t[zC]={}),a=oZ(t,o),s=aZ(a,o,i);if(s)return s(e,r,n),!0}return!1}function oZ(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function aZ(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=a,t[n]=r?$C(s,a):$C(a,s))}function G7(e){return e.nodeName.toUpperCase()==="CANVAS"}var sZ=/([&<>"'])/g,lZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Xn(e){return e==null?"":(e+"").replace(sZ,function(t,r){return lZ[r]})}var uZ=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,yy=[],cZ=Xt.browser.firefox&&+Xt.browser.version.split(".")[0]<39;function TS(e,t,r,n){return r=r||{},n?VC(e,t,r):cZ&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):VC(e,t,r),r}function VC(e,t,r){if(Xt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(G7(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(SS(yy,e,n,i)){r.zrX=yy[0],r.zrY=yy[1];return}}r.zrX=r.zrY=0}function MP(e){return e||window.event}function Gn(e,t,r){if(t=MP(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&TS(e,a,t,r)}else{TS(e,t,t,r);var o=fZ(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&uZ.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function fZ(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function hZ(e,t,r,n){e.addEventListener(t,r,n)}function dZ(e,t,r,n){e.removeEventListener(t,r,n)}var Zl=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function UC(e){return e.which===2||e.which===3}var pZ=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=TS(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in by)if(by.hasOwnProperty(r)){var n=by[r](this._track,t);if(n)return n}},e}();function GC(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function vZ(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var by={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=GC(n)/GC(i);!isFinite(o)&&(o=1),t.pinchScale=o;var a=vZ(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Hc(){return[1,0,0,1,0,0]}function xP(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function j7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function xc(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function PS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function LP(e,t,r){var n=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function gZ(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function G1(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*n;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*i)*l,e[5]=(o*i-r*s)*l,e):null}var mZ=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const xe=mZ;var Sp=Math.min,Tp=Math.max,Hs=new xe,Xs=new xe,Ys=new xe,qs=new xe,Yf=new xe,qf=new xe,_Z=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=Sp(t.x,this.x),n=Sp(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Tp(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=Tp(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=Hc();return PS(o,o,[-r.x,-r.y]),gZ(o,o,[n,i]),PS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,a=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||s<c||f<a);if(r){var d=1/0,p=0,v=Math.abs(o-l),g=Math.abs(u-i),m=Math.abs(s-c),_=Math.abs(f-a),y=Math.min(v,g),w=Math.min(m,_);o<l||u<i?y>p&&(p=y,v<g?xe.set(qf,-v,0):xe.set(qf,g,0)):y<d&&(d=y,v<g?xe.set(Yf,v,0):xe.set(Yf,-g,0)),s<c||f<a?w>p&&(p=w,m<_?xe.set(qf,0,-m):xe.set(qf,0,_)):y<d&&(d=y,m<_?xe.set(Yf,0,m):xe.set(Yf,0,-_))}return r&&xe.copy(r,h?Yf:qf),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],a=n[4],s=n[5];t.x=r.x*i+a,t.y=r.y*o+s,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Hs.x=Ys.x=r.x,Hs.y=qs.y=r.y,Xs.x=qs.x=r.x+r.width,Xs.y=Ys.y=r.y+r.height,Hs.transform(n),qs.transform(n),Xs.transform(n),Ys.transform(n),t.x=Sp(Hs.x,Xs.x,Ys.x,qs.x),t.y=Sp(Hs.y,Xs.y,Ys.y,qs.y);var l=Tp(Hs.x,Xs.x,Ys.x,qs.x),u=Tp(Hs.y,Xs.y,Ys.y,qs.y);t.width=l-t.x,t.height=u-t.y},e}();const ae=_Z;var W7="silent";function yZ(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:bZ}}function bZ(){Zl(this.event)}var wZ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}($i),Zf=function(){function e(t,r){this.x=t,this.y=r}return e}(),SZ=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],wy=new ae(0,0,0,0),H7=function(e){Ae(t,e);function t(r,n,i,o,a){var s=e.call(this)||this;return s._hovered=new Zf(0,0),s.storage=r,s.painter=n,s.painterRoot=o,s._pointerSize=a,i=i||new wZ,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new eZ(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&(F(SZ,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=X7(this,n,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Zf(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Zf(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+n,s=yZ(n,r,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(n,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),a=new Zf(r,n);if(jC(o,a,r,n,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new ae(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(wy.copy(h.getBoundingRect()),h.transform&&wy.applyTransform(h.transform),wy.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,g=0;g<u;g+=d)for(var m=0;m<v;m+=p){var _=r+g*Math.cos(m),y=n+g*Math.sin(m);if(jC(s,a,_,y,i),a.target)return a}}return a},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new pZ);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var a=o.type;r.gestureEvent=a;var s=new Zf;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}($i);F(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){H7.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=X7(this,r,n),o,a;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||Jq(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function TZ(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?W7:!0}return!1}function jC(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==i&&!a.ignore&&(s=TZ(a,r,n))&&(!t.topTarget&&(t.topTarget=a),s!==W7)){t.target=a;break}}}function X7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const PZ=H7;var Y7=32,Kf=7;function EZ(e){for(var t=0;e>=Y7;)t|=e&1,e>>=1;return e+t}function WC(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;AZ(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function AZ(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function HC(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n,l;a<s;)l=a+s>>>1,i(o,e[l])<0?s=l:a=l+1;var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function Sy(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function Ty(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}function kZ(e,t){var r=Kf,n,i,o=0;e.length;var a=[];n=[],i=[];function s(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],g=n[d+1],m=i[d+1];i[d]=v+m,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var _=Ty(e[g],e,p,v,0,t);p+=_,v-=_,v!==0&&(m=Sy(e[p+v-1],e,g,m,m-1,t),m!==0&&(v<=m?f(p,v,g,m):h(p,v,g,m)))}function f(d,p,v,g){var m=0;for(m=0;m<p;m++)a[m]=e[d+m];var _=0,y=v,w=d;if(e[w++]=e[y++],--g===0){for(m=0;m<p;m++)e[w+m]=a[_+m];return}if(p===1){for(m=0;m<g;m++)e[w+m]=e[y+m];e[w+g]=a[_];return}for(var T=r,S,P,k;;){S=0,P=0,k=!1;do if(t(e[y],a[_])<0){if(e[w++]=e[y++],P++,S=0,--g===0){k=!0;break}}else if(e[w++]=a[_++],S++,P=0,--p===1){k=!0;break}while((S|P)<T);if(k)break;do{if(S=Ty(e[y],a,_,p,0,t),S!==0){for(m=0;m<S;m++)e[w+m]=a[_+m];if(w+=S,_+=S,p-=S,p<=1){k=!0;break}}if(e[w++]=e[y++],--g===0){k=!0;break}if(P=Sy(a[_],e,y,g,0,t),P!==0){for(m=0;m<P;m++)e[w+m]=e[y+m];if(w+=P,y+=P,g-=P,g===0){k=!0;break}}if(e[w++]=a[_++],--p===1){k=!0;break}T--}while(S>=Kf||P>=Kf);if(k)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(m=0;m<g;m++)e[w+m]=e[y+m];e[w+g]=a[_]}else{if(p===0)throw new Error;for(m=0;m<p;m++)e[w+m]=a[_+m]}}function h(d,p,v,g){var m=0;for(m=0;m<g;m++)a[m]=e[v+m];var _=d+p-1,y=g-1,w=v+g-1,T=0,S=0;if(e[w--]=e[_--],--p===0){for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m];return}if(g===1){for(w-=p,_-=p,S=w+1,T=_+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[y];return}for(var P=r;;){var k=0,A=0,C=!1;do if(t(a[y],e[_])<0){if(e[w--]=e[_--],k++,A=0,--p===0){C=!0;break}}else if(e[w--]=a[y--],A++,k=0,--g===1){C=!0;break}while((k|A)<P);if(C)break;do{if(k=p-Ty(a[y],e,d,p,p-1,t),k!==0){for(w-=k,_-=k,p-=k,S=w+1,T=_+1,m=k-1;m>=0;m--)e[S+m]=e[T+m];if(p===0){C=!0;break}}if(e[w--]=a[y--],--g===1){C=!0;break}if(A=g-Sy(e[_],a,0,g,g-1,t),A!==0){for(w-=A,y-=A,g-=A,S=w+1,T=y+1,m=0;m<A;m++)e[S+m]=a[T+m];if(g<=1){C=!0;break}}if(e[w--]=e[_--],--p===0){C=!0;break}P--}while(k>=Kf||A>=Kf);if(C)break;P<0&&(P=0),P+=2}if(r=P,r<1&&(r=1),g===1){for(w-=p,_-=p,S=w+1,T=_+1,m=p-1;m>=0;m--)e[S+m]=e[T+m];e[w]=a[y]}else{if(g===0)throw new Error;for(T=w-(g-1),m=0;m<g;m++)e[T+m]=a[m]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function Dg(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<Y7){o=WC(e,r,n,t),HC(e,r,n,r+o,t);return}var a=kZ(e,t),s=EZ(i);do{if(o=WC(e,r,n,t),o<s){var l=i;l>s&&(l=s),HC(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}}var En=1,Hh=2,hc=4,XC=!1;function Py(){XC||(XC=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function YC(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var CZ=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=YC}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Dg(n,YC)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=En),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Py(),c.z=0),isNaN(c.z2)&&(Py(),c.z2=0),isNaN(c.zlevel)&&(Py(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=ue(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const MZ=CZ;var q7;q7=Xt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const ES=q7;var Ng={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Ng.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?Ng.bounceIn(e*2)*.5:Ng.bounceOut(e*2-1)*.5+.5}};const Z7=Ng;var Pp=Math.pow,ys=Math.sqrt,Em=1e-8,K7=1e-4,qC=ys(3),Ep=1/3,po=ff(),Yn=ff(),Lc=ff();function fs(e){return e>-Em&&e<Em}function J7(e){return e>Em||e<-Em}function or(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function ZC(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Am(e,t,r,n,i,o){var a=n+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(fs(c)&&fs(f))if(fs(s))o[0]=0;else{var p=-l/s;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(fs(v)){var g=f/c,p=-s/a+g,m=-g/2;p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m)}else if(v>0){var _=ys(v),y=c*s+1.5*a*(-f+_),w=c*s+1.5*a*(-f-_);y<0?y=-Pp(-y,Ep):y=Pp(y,Ep),w<0?w=-Pp(-w,Ep):w=Pp(w,Ep);var p=(-s-(y+w))/(3*a);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*s-3*a*f)/(2*ys(c*c*c)),S=Math.acos(T)/3,P=ys(c),k=Math.cos(S),p=(-s-2*P*k)/(3*a),m=(-s+P*(k+qC*Math.sin(S)))/(3*a),A=(-s+P*(k-qC*Math.sin(S)))/(3*a);p>=0&&p<=1&&(o[d++]=p),m>=0&&m<=1&&(o[d++]=m),A>=0&&A<=1&&(o[d++]=A)}}return d}function Q7(e,t,r,n,i){var o=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(fs(a)){if(J7(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(fs(c))i[0]=-o/(2*a);else if(c>0){var f=ys(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function km(e,t,r,n,i,o){var a=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function xZ(e,t,r,n,i,o,a,s,l,u,c){var f,h=.005,d=1/0,p,v,g,m;po[0]=l,po[1]=u;for(var _=0;_<1;_+=.05)Yn[0]=or(e,r,i,a,_),Yn[1]=or(t,n,o,s,_),g=Mc(po,Yn),g<d&&(f=_,d=g);d=1/0;for(var y=0;y<32&&!(h<K7);y++)p=f-h,v=f+h,Yn[0]=or(e,r,i,a,p),Yn[1]=or(t,n,o,s,p),g=Mc(Yn,po),p>=0&&g<d?(f=p,d=g):(Lc[0]=or(e,r,i,a,v),Lc[1]=or(t,n,o,s,v),m=Mc(Lc,po),v<=1&&m<d?(f=v,d=m):h*=.5);return c&&(c[0]=or(e,r,i,a,f),c[1]=or(t,n,o,s,f)),ys(d)}function LZ(e,t,r,n,i,o,a,s,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=or(e,r,i,a,p),g=or(t,n,o,s,p),m=v-u,_=g-c;f+=Math.sqrt(m*m+_*_),u=v,c=g}return f}function Lr(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function KC(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function IZ(e,t,r,n,i){var o=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(fs(o)){if(J7(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(fs(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ys(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function t9(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Cm(e,t,r,n,i){var o=(t-e)*n+e,a=(r-t)*n+t,s=(a-o)*n+o;i[0]=e,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=r}function OZ(e,t,r,n,i,o,a,s,l){var u,c=.005,f=1/0;po[0]=a,po[1]=s;for(var h=0;h<1;h+=.05){Yn[0]=Lr(e,r,i,h),Yn[1]=Lr(t,n,o,h);var d=Mc(po,Yn);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<K7);p++){var v=u-c,g=u+c;Yn[0]=Lr(e,r,i,v),Yn[1]=Lr(t,n,o,v);var d=Mc(Yn,po);if(v>=0&&d<f)u=v,f=d;else{Lc[0]=Lr(e,r,i,g),Lc[1]=Lr(t,n,o,g);var m=Mc(Lc,po);g<=1&&m<f?(u=g,f=m):c*=.5}}return l&&(l[0]=Lr(e,r,i,u),l[1]=Lr(t,n,o,u)),ys(f)}function RZ(e,t,r,n,i,o,a){for(var s=e,l=t,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=Lr(e,r,i,h),p=Lr(t,n,o,h),v=d-s,g=p-l;u+=Math.sqrt(v*v+g*g),s=d,l=p}return u}var DZ=/cubic-bezier\(([0-9,\.e ]+)\)/;function e9(e){var t=e&&DZ.exec(e);if(t){var r=t[1].split(","),n=+_o(r[0]),i=+_o(r[1]),o=+_o(r[2]),a=+_o(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:Am(0,n,o,1,l,s)&&or(0,i,a,1,s[0])}}}var NZ=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Fr,this.ondestroy=t.ondestroy||Fr,this.onrestart=t.onrestart||Fr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ut(t)?t:Z7[t]||e9(t)},e}();const FZ=NZ;var r9=function(){function e(t){this.value=t}return e}(),BZ=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new r9(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),$Z=function(){function e(t){this._list=new BZ,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new r9(r),s.key=t,n.insertEntry(s),i[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const C0=$Z;var JC={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Ci(e){return e=Math.round(e),e<0?0:e>255?255:e}function zZ(e){return e=Math.round(e),e<0?0:e>360?360:e}function Wd(e){return e<0?0:e>1?1:e}function Ey(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Ci(parseFloat(t)/100*255):Ci(parseInt(t,10))}function Bl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Wd(parseFloat(t)/100):Wd(parseFloat(t))}function Ay(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function hs(e,t,r){return e+(t-e)*r}function Un(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function AS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var n9=new C0(20),Ap=null;function Iu(e,t){Ap&&AS(Ap,t),Ap=n9.put(e,Ap||t.slice())}function Zn(e,t){if(!!e){t=t||[];var r=n9.get(e);if(r)return AS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in JC)return AS(t,JC[n]),Iu(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Un(t,0,0,0,1);return}return Un(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Iu(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Un(t,0,0,0,1);return}return Un(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),Iu(e,t),t}return}var a=n.indexOf("("),s=n.indexOf(")");if(a!==-1&&s+1===i){var l=n.substr(0,a),u=n.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Un(t,+u[0],+u[1],+u[2],1):Un(t,0,0,0,1);c=Bl(u.pop());case"rgb":if(u.length>=3)return Un(t,Ey(u[0]),Ey(u[1]),Ey(u[2]),u.length===3?c:Bl(u[3])),Iu(e,t),t;Un(t,0,0,0,1);return;case"hsla":if(u.length!==4){Un(t,0,0,0,1);return}return u[3]=Bl(u[3]),kS(u,t),Iu(e,t),t;case"hsl":if(u.length!==3){Un(t,0,0,0,1);return}return kS(u,t),Iu(e,t),t;default:return}}Un(t,0,0,0,1)}}function kS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Bl(e[1]),i=Bl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,a=i*2-o;return t=t||[],Un(t,Ci(Ay(a,o,r+1/3)*255),Ci(Ay(a,o,r)*255),Ci(Ay(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function VZ(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-t)/6+a/2)/a,f=((o-r)/6+a/2)/a,h=((o-n)/6+a/2)/a;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function QC(e,t){var r=Zn(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return sa(r,r.length===4?"rgba":"rgb")}}function ky(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=t[i],s=t[o],l=n-i;return r[0]=Ci(hs(a[0],s[0],l)),r[1]=Ci(hs(a[1],s[1],l)),r[2]=Ci(hs(a[2],s[2],l)),r[3]=Wd(hs(a[3],s[3],l)),r}}function UZ(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=Zn(t[i]),s=Zn(t[o]),l=n-i,u=sa([Ci(hs(a[0],s[0],l)),Ci(hs(a[1],s[1],l)),Ci(hs(a[2],s[2],l)),Wd(hs(a[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function Cy(e,t,r,n){var i=Zn(e);if(e)return i=VZ(i),t!=null&&(i[0]=zZ(t)),r!=null&&(i[1]=Bl(r)),n!=null&&(i[2]=Bl(n)),sa(kS(i),"rgba")}function CS(e,t){var r=Zn(e);if(r&&t!=null)return r[3]=Wd(t),sa(r,"rgba")}function sa(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function Mm(e,t){var r=Zn(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function GZ(e){return e.type==="linear"}function jZ(e){return e.type==="radial"}(function(){return Xt.hasGlobalWindow&&Ut(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var MS=Array.prototype.slice;function Zo(e,t,r){return(t-e)*r+e}function My(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=Zo(t[o],r[o],n);return e}function WZ(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=Zo(t[a][s],r[a][s],n)}return e}function kp(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function tM(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*n}return e}function HZ(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function XZ(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,a=i.length;if(o!==a){var s=o>a;if(s)n.length=a;else for(var l=o;l<a;l++)n.push(r===1?i[l]:MS.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function gd(e){if($r(e)){var t=e.length;if($r(e[0])){for(var r=[],n=0;n<t;n++)r.push(MS.call(e[n]));return r}return MS.call(e)}return e}function Fg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function YZ(e){return $r(e&&e[0])?2:1}var Cp=0,Bg=1,i9=2,Xh=3,xS=4,LS=5,eM=6;function rM(e){return e===xS||e===LS}function Mp(e){return e===Bg||e===i9}var Jf=[0,0,0,0],qZ=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=eM,l=r;if($r(r)){var u=YZ(r);s=u,(u===1&&!we(r[0])||u===2&&!we(r[0][0]))&&(a=!0)}else if(we(r)&&!Tm(r))s=Cp;else if(Et(r))if(!isNaN(+r))s=Cp;else{var c=Zn(r);c&&(l=c,s=Xh)}else if(V1(r)){var f=ot({},l);f.colorStops=kt(r.colorStops,function(d){return{offset:d.offset,color:Zn(d.color)}}),GZ(r)?s=xS:jZ(r)&&(s=LS),l=f}o===0?this.valType=s:(s!==this.valType||s===eM)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ut(n)?n:Z7[n]||e9(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,g){return v.time-g.time});for(var i=this.valType,o=n.length,a=n[o-1],s=this.discrete,l=Mp(i),u=rM(i),c=0;c<o;c++){var f=n[c],h=f.value,d=a.value;f.percent=f.time/t,s||(l&&c!==o-1?XZ(h,d,i):u&&HZ(h.colorStops,d.colorStops))}if(!s&&i!==LS&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===Cp?n[c].additiveValue=n[c].value-p:i===Xh?n[c].additiveValue=kp([],n[c].value,p,-1):Mp(i)&&(n[c].additiveValue=i===Bg?kp([],n[c].value,p,-1):tM([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===Xh,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=a[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(a[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>r);c++);c=h(c-1,s-2)}p=a[c+1],d=a[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var g=p.percent-d.percent,m=g===0?1:h((r-d.percent)/g,1);p.easingFunc&&(m=p.easingFunc(m));var _=n?this._additiveValue:u?Jf:t[l];if((Mp(o)||u)&&!_&&(_=this._additiveValue=[]),this.discrete)t[l]=m<1?d.rawValue:p.rawValue;else if(Mp(o))o===Bg?My(_,d[i],p[i],m):WZ(_,d[i],p[i],m);else if(rM(o)){var y=d[i],w=p[i],T=o===xS;t[l]={type:T?"linear":"radial",x:Zo(y.x,w.x,m),y:Zo(y.y,w.y,m),colorStops:kt(y.colorStops,function(P,k){var A=w.colorStops[k];return{offset:Zo(P.offset,A.offset,m),color:Fg(My([],P.color,A.color,m))}}),global:w.global},T?(t[l].x2=Zo(y.x2,w.x2,m),t[l].y2=Zo(y.y2,w.y2,m)):t[l].r=Zo(y.r,w.r,m)}else if(u)My(_,d[i],p[i],m),n||(t[l]=Fg(_));else{var S=Zo(d[i],p[i],m);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===Cp?t[n]=t[n]+i:r===Xh?(Zn(t[n],Jf),kp(Jf,Jf,i,1),t[n]=Fg(Jf)):r===Bg?kp(t[n],t[n],i,1):r===i9&&tM(t[n],t[n],i,1)},e}(),ZZ=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){AP("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ve(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,a=0;a<n.length;a++){var s=n[a],l=o[s];if(!l){l=o[s]=new qZ(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===Xh&&u&&(u=Fg(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,gd(u),i),this._trackKeys.push(s)}l.addKeyframe(t,gd(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new FZ({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,g=0;g<p.length;g++)if(p[g]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var g=0;g<n.length;g++)n[g].step(r._target,d);var m=r._onframeCbs;if(m)for(var g=0;g<m.length;g++)m[g](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return kt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var a=n[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[n?0:s.length-1];l&&(t[o]=gd(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ve(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const IP=ZZ;function _c(){return new Date().getTime()}var KZ=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=_c()-this._pausedTime,i=n-this._time,o=this._head;o;){var a=o.next,s=o.step(n,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(ES(n),!r._paused&&r.update())}ES(n)},t.prototype.start=function(){this._running||(this._time=_c(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=_c(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=_c()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new IP(r,n.loop);return this.addAnimator(i),i},t}($i);const JZ=KZ;var QZ=300,xy=Xt.domSupported,Ly=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=kt(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),nM={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},iM=!1;function IS(e){var t=e.pointerType;return t==="pen"||t==="touch"}function tK(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function Iy(e){e&&(e.zrByTouch=!0)}function eK(e,t){return Gn(e.dom,new rK(e,t),!0)}function o9(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var rK=function(){function e(t,r){this.stopPropagation=Fr,this.stopImmediatePropagation=Fr,this.preventDefault=Fr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),pi={mousedown:function(e){e=Gn(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Gn(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Gn(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Gn(this.dom,e);var t=e.toElement||e.relatedTarget;o9(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){iM=!0,e=Gn(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){iM||(e=Gn(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Gn(this.dom,e),Iy(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),pi.mousemove.call(this,e),pi.mousedown.call(this,e)},touchmove:function(e){e=Gn(this.dom,e),Iy(e),this.handler.processGesture(e,"change"),pi.mousemove.call(this,e)},touchend:function(e){e=Gn(this.dom,e),Iy(e),this.handler.processGesture(e,"end"),pi.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<QZ&&pi.click.call(this,e)},pointerdown:function(e){pi.mousedown.call(this,e)},pointermove:function(e){IS(e)||pi.mousemove.call(this,e)},pointerup:function(e){pi.mouseup.call(this,e)},pointerout:function(e){IS(e)||pi.mouseout.call(this,e)}};F(["click","dblclick","contextmenu"],function(e){pi[e]=function(t){t=Gn(this.dom,t),this.trigger(e,t)}});var OS={pointermove:function(e){IS(e)||OS.mousemove.call(this,e)},pointerup:function(e){OS.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function nK(e,t){var r=t.domHandlers;Xt.pointerEventsSupported?F(Ly.pointer,function(n){$g(t,n,function(i){r[n].call(e,i)})}):(Xt.touchEventsSupported&&F(Ly.touch,function(n){$g(t,n,function(i){r[n].call(e,i),tK(t)})}),F(Ly.mouse,function(n){$g(t,n,function(i){i=MP(i),t.touching||r[n].call(e,i)})}))}function iK(e,t){Xt.pointerEventsSupported?F(nM.pointer,r):Xt.touchEventsSupported||F(nM.mouse,r);function r(n){function i(o){o=MP(o),o9(e,o.target)||(o=eK(e,o),t.domHandlers[n].call(e,o))}$g(t,n,i,{capture:!0})}}function $g(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,hZ(e.domTarget,t,r,n)}function Oy(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&dZ(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var oM=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),oK=function(e){Ae(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new oM(r,pi),xy&&(i._globalHandlerScope=new oM(document,OS)),nK(i,i._localHandlerScope),i}return t.prototype.dispose=function(){Oy(this._localHandlerScope),xy&&Oy(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,xy&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?iK(this,n):Oy(n)}},t}($i);const aK=oK;var a9=1;Xt.hasGlobalWindow&&(a9=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var xm=a9,RS=.4,DS="#333",NS="#ccc",sK="#eee",aM=xP,sM=5e-5;function Zs(e){return e>sM||e<-sM}var Ks=[],Ou=[],Ry=Hc(),Dy=Math.abs,Ml=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Zs(this.rotation)||Zs(this.x)||Zs(this.y)||Zs(this.scaleX-1)||Zs(this.scaleY-1)||Zs(this.skewX)||Zs(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&aM(n);return}n=n||Hc(),r?this.getLocalTransform(n):aM(n),t&&(r?xc(n,t,n):j7(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Ks);var n=Ks[0]<0?-1:1,i=Ks[1]<0?-1:1,o=((Ks[0]-n)*r+n)/Ks[0]||0,a=((Ks[1]-i)*r+i)/Ks[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||Hc(),G1(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(xc(Ou,t.invTransform,r),r=Ou);var n=this.originX,i=this.originY;(n||i)&&(Ry[4]=n,Ry[5]=i,xc(Ou,r,Ry),Ou[4]-=n,Ou[5]-=i,r=Ou),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&Qr(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&Qr(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&Dy(t[0]-1)>1e-10&&Dy(t[3]-1)>1e-10?Math.sqrt(Dy(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){lK(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var p=n+s,v=i+l;r[4]=-p*o-h*v*a,r[5]=-v*a-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=d*o,r[2]=h*a,u&&LP(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Eo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function lK(e,t){for(var r=0;r<Eo.length;r++){var n=Eo[r];e[n]=t[n]}}var lM={};function kn(e,t){t=t||ql;var r=lM[t];r||(r=lM[t]=new C0(500));var n=r.get(e);return n==null&&(n=uu.measureText(e,t).width,r.put(e,n)),n}function uM(e,t,r,n){var i=kn(e,t),o=RP(t),a=Yh(0,i,r),s=dc(0,o,n),l=new ae(a,s,i,o);return l}function OP(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return uM(i[0],t,r,n);for(var a=new ae(0,0,0,0),s=0;s<i.length;s++){var l=uM(i[s],t,r,n);s===0?a.copy(l):a.union(l)}return a}function Yh(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function dc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function RP(e){return kn("\u56FD",e)}function ha(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Lm(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ha(n[0],r.width),u+=ha(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var Ny="__zr_normal__",Fy=Eo.concat(["ignore"]),uK=cu(Eo,function(e,t){return e[t]=!0,e},{ignore:!1}),Ru={},cK=new ae(0,0,0,0),DP=function(){function e(t){this.id=F7(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=cK;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Ru,n,c):Lm(Ru,n,c),o.x=Ru.x,o.y=Ru.y,a=Ru.align,s=Ru.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ha(f[0],c.width),d=ha(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,_=void 0,y=void 0;v&&this.canBeInsideText()?(m=n.insideFill,_=n.insideStroke,(m==null||m==="auto")&&(m=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(m),y=!0)):(m=n.outsideFill,_=n.outsideStroke,(m==null||m==="auto")&&(m=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(m),y=!0)),m=m||"#000",(m!==g.fill||_!==g.stroke||y!==g.autoStroke||a!==g.align||s!==g.verticalAlign)&&(l=!0,g.fill=m,g.stroke=_,g.autoStroke=y,g.align=a,g.verticalAlign=s,r.setDefaultTextStyle(g)),r.__dirty|=En,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?NS:DS},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&Zn(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*i+(o?0:255)*(1-i);return n[3]=1,sa(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},ot(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(It(t))for(var n=t,i=ve(n),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==Ny)){var a=i.targetName,s=a?r[a]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,Fy)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(Ny,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===Ny,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(ue(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){AP("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~En),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,g=this._textGuide;v&&v.useStates(t,r,h),g&&g.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~En)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=ue(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=ue(i,t),a=ue(i,r)>=0;o>=0?a?i.splice(o,1):i[o]=r:n&&!a&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];ot(r,o),o.textConfig&&(n=n||{},ot(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,a){var s=!(r&&i);r&&r.textConfig?(this.textConfig=ot({},i?this.textConfig:n.textConfig),ot(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<Fy.length;c++){var f=Fy[c],h=o&&uK[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new Ml,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),ot(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=En;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new IP(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,a=ue(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],a=0;a<i;a++){var s=n[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){By(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){By(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=By(this,r,n,i),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=En;function r(n,i,o,a){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Bi(DP,$i);Bi(DP,Ml);function By(e,t,r,n,i){r=r||{};var o=[];s9(e,"",e,t,r,n,o,i);var a=o.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function $y(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function fK(e){return $r(e[0])}function hK(e,t,r){if($r(t[r]))if($r(e[r])||(e[r]=[]),xn(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),$y(e[r],t[r],n))}else{var i=t[r],o=e[r],a=i.length;if(fK(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?$y(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else $y(o,i,a);o.length=i.length}else e[r]=t[r]}function dK(e,t){return e===t||$r(e)&&$r(t)&&pK(e,t)}function pK(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function s9(e,t,r,n,i,o,a,s){for(var l=ve(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!It(o),p=e.animators,v=[],g=0;g<l.length;g++){var m=l[g],_=n[m];if(_!=null&&r[m]!=null&&(d||o[m]))if(It(_)&&!$r(_)&&!V1(_)){if(t){s||(r[m]=_,e.updateDuringAnimation(t));continue}s9(e,m,r[m],_,i,o&&o[m],a,s)}else v.push(m);else s||(r[m]=_,e.updateDuringAnimation(t),v.push(m))}var y=v.length;if(!f&&y)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var P=ue(p,T);p.splice(P,1)}}}if(i.force||(v=yr(v,function(M){return!dK(n[M],r[M])}),y=v.length),y>0||i.force&&!a.length){var k=void 0,A=void 0,C=void 0;if(s){A={},h&&(k={});for(var w=0;w<y;w++){var m=v[w];A[m]=r[m],h?k[m]=n[m]:r[m]=n[m]}}else if(h){C={};for(var w=0;w<y;w++){var m=v[w];C[m]=gd(r[m]),hK(r,n,m)}}var T=new IP(r,!1,!1,f?yr(p,function(D){return D.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&k&&T.whenWithKeys(0,k,v),C&&T.whenWithKeys(0,C,v),T.whenWithKeys(u==null?500:u,s?A:n,v).delay(c||0),e.addAnimator(T,t),a.push(T)}}const l9=DP;var u9=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=ue(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=ue(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];r.call(n,a,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=r.call(n,o);o.isGroup&&!a&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new ae(0,0,0,0),i=r||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(ae.applyTransform(n,u,c),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(l9);u9.prototype.type="group";const De=u9;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var zg={},c9={};function vK(e){delete c9[e]}function gK(e){if(!e)return!1;if(typeof e=="string")return Mm(e,1)<RS;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=Mm(t[i].color,1);return r/=n,r<RS}return!1}var mK=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new MZ,a=n.renderer||"canvas";zg[a]||(a=ve(zg)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new zg[a](r,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!Xt.node&&!Xt.worker&&!l?new aK(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Xt.touchEventsSupported:!!c,h=44,d;f&&(d=qt(n.pointerSize,h)),this.handler=new PZ(o,s,u,s.root,d),this.animation=new JZ({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=gK(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=_c();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=_c();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof De&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,vK(this.id)},e}();function cM(e,t){var r=new mK(F7(),e,t);return c9[r.id]=r,r}function _K(e,t){zg[e]=t}var fM=1e-4,f9=20;function yK(e){return e.replace(/^\s+|\s+$/g,"")}function da(e,t,r,n){var i=t[0],o=t[1],a=r[0],s=r[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(n)if(l>0){if(e<=i)return a;if(e>=o)return s}else{if(e>=i)return a;if(e<=o)return s}else{if(e===i)return a;if(e===o)return s}return(e-i)/l*u+a}function We(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Et(e)?yK(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function qe(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),f9),e=(+e).toFixed(t),r?e:+e}function Im(e){return e.sort(function(t,r){return t-r}),e}function yo(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return bK(e)}function bK(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-n)}function wK(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function SK(e,t){var r=Math.max(yo(e),yo(t)),n=e+t;return r>f9?n:qe(n,r)}function h9(e){var t=Math.PI*2;return(e%t+t)%t}function Om(e){return e>-fM&&e<fM}var TK=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function pa(e){if(e instanceof Date)return e;if(Et(e)){var t=TK.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function PK(e){return Math.pow(10,NP(e))}function NP(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function d9(e,t){var r=NP(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function hM(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,a=0;a<2;a++)i[a]<=t&&(i[a]=t,o[a]=a?1:1-r),t=i[a],r=o[a];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function ks(e){var t=parseFloat(e);return t==e&&(t!==0||!Et(e)||e.indexOf("x")<=0)?t:NaN}function EK(e){return!isNaN(ks(e))}function p9(){return Math.round(Math.random()*9)}function v9(e,t){return t===0?e:v9(t,e%t)}function dM(e,t){return e==null?t:t==null?e:e*t/v9(e,t)}function ne(e){throw new Error(e)}function pM(e,t,r){return(t-e)*r+e}var g9="series\0",AK="\0_ec_\0";function Ze(e){return e instanceof Array?e:e==null?[]:[e]}function FS(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var vM=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function M0(e){return It(e)&&!ct(e)&&!(e instanceof Date)?e.value:e}function kK(e){return It(e)&&!(e instanceof Array)}function CK(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=jt();F(t,function(l,u){if(!It(l)){t[u]=null;return}});var s=MK(e,a,r);return(n||i)&&xK(s,e,a,t),n&&LK(s,t),n||i?IK(s,t,i):o&&OK(s,t),RK(s),s}function MK(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||Hd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function xK(e,t,r,n){F(n,function(i,o){if(!(!i||i.id==null)){var a=md(i.id),s=r.get(a);if(s!=null){var l=e[s];Oi(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=t[s],n[o]=null}}})}function LK(e,t){F(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!Hd(r)&&!Hd(o)&&m9("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function IK(e,t,r){F(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||Hd(i.existing)||i.existing&&n.id!=null&&!m9("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function OK(e,t){F(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function RK(e){var t=jt();F(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),F(e,function(r){var n=r.newOption;Oi(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),F(e,function(r,n){var i=r.existing,o=r.newOption,a=r.keyInfo;if(!!It(o)){if(a.name=o.name!=null?md(o.name):i?i.name:g9+n,i)a.id=md(i.id);else if(o.id!=null)a.id=md(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function m9(e,t,r){var n=Kn(t[e],null),i=Kn(r[e],null);return n!=null&&i!=null&&n===i}function md(e){return Kn(e,"")}function Kn(e,t){return e==null?t:Et(e)?e:we(e)||_S(e)?e+"":t}function FP(e){var t=e.name;return!!(t&&t.indexOf(g9))}function Hd(e){return e&&e.id!=null&&md(e.id).indexOf(AK)===0}function DK(e,t,r){F(e,function(n){var i=n.newOption;It(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=NK(t,i,n.existing,r))})}function NK(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function FK(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(a,s,l){for(var u=0,c=a.length;u<c;u++){var f=Kn(a[u].seriesId,null);if(f==null)return;for(var h=Ze(a[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var g=h[p];d&&d[g]?d[g]=null:(s[f]||(s[f]={}))[g]=1}}}function o(a,s){var l=[];for(var u in a)if(a.hasOwnProperty(u)&&a[u]!=null)if(s)l.push(+u);else{var c=o(a[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function Kl(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ct(t.dataIndex)?kt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ct(t.name)?kt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Oe(){var e="__ec_inner_"+BK++;return function(t){return t[e]||(t[e]={})}}var BK=p9();function zy(e,t,r){var n=BP(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=a,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=x0(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function BP(e,t){var r;if(Et(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=jt(),o={},a=!1;return F(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&ue(t.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var Si={useDefault:!0,enableAll:!1,enableNone:!1};function x0(e,t,r,n){n=n||Si;var i=r.index,o=r.id,a=r.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(Oi(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Oi(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=e.queryComponents({mainType:t,index:i,id:o,name:a}),s)}function _9(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function $K(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function zK(e){return e==="auto"?Xt.domSupported?"html":"richText":e||"html"}function VK(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(we(n)){var a=pM(r||0,n,i);return qe(a,o?Math.max(yo(r||0),yo(n)):t)}else{if(Et(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],a=pM(d,p,i);s[f]=qe(a,o?Math.max(yo(d),yo(p)):t)}}return s}}var UK=".",Js="___EC__COMPONENT__CONTAINER___",y9="___EC__EXTENDED_CLASS___";function bo(e){var t={main:"",sub:""};if(e){var r=e.split(UK);t.main=r[0]||"",t.sub=r[1]||""}return t}function GK(e){Oi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function jK(e){return!!(e&&e[y9])}function $P(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return WK(n)?i=function(o){mt(a,o);function a(){return o.apply(this,arguments)||this}return a}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},Uq(i,this)),ot(i.prototype,r),i[y9]=!0,i.extend=this.extend,i.superCall=YK,i.superApply=qK,i.superClass=n,i}}function WK(e){return Ut(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function b9(e,t){e.extend=t.extend}var HK=Math.round(Math.random()*10);function XK(e){var t=["__\0is_clz",HK++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function YK(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function qK(e,t,r){return this.superClass.prototype[t].apply(e,r)}function j1(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){GK(i),n.prototype.type=i;var o=bo(i);if(!o.sub)t[o.main]=n;else if(o.sub!==Js){var a=r(o);a[o.sub]=n}}return n},e.getClass=function(n,i,o){var a=t[n];if(a&&a[Js]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return a},e.getClassesByMainType=function(n){var i=bo(n),o=[],a=t[i.main];return a&&a[Js]?F(a,function(s,l){l!==Js&&o.push(s)}):o.push(a),o},e.hasClass=function(n){var i=bo(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return F(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=bo(n),o=t[i.main];return o&&o[Js]};function r(n){var i=t[n.main];return(!i||!i[Js])&&(i=t[n.main]={},i[Js]=!0),i}}function Xd(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&ue(i,l)>=0||o&&ue(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[e[s][0]]=u)}}return a}}var ZK=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],KK=Xd(ZK),JK=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return KK(this,t,r)},e}(),BS=new C0(50);function QK(e){if(typeof e=="string"){var t=BS.get(e);return t&&t.image}else return e}function w9(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=BS.get(e),a={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!W1(t)&&o.pending.push(a)):(t=uu.loadImage(e,gM,gM),t.__zrImageSrc=e,BS.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function gM(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function W1(e){return e&&e.width&&e.height}var Vy=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function tJ(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=S9(t,r,n,i);for(var a=0,s=o.length;a<s;a++)o[a]=T9(o[a],i);return o.join(`
`)}function S9(e,t,r,n){n=n||{};var i=ot({},n);i.font=t,r=qt(r,"..."),i.maxIterations=qt(n.maxIterations,2);var o=i.minChar=qt(n.minChar,0);i.cnCharWidth=kn("\u56FD",t);var a=i.ascCharWidth=kn("a",t);i.placeholder=qt(n.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var u=kn(r,t);return u>s&&(r="",u=0),s=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function T9(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=kn(e,n);if(o<=r)return e;for(var a=0;;a++){if(o<=i||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?eJ(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,s),o=kn(e,n)}return e===""&&(e=t.placeholder),e}function eJ(e,t,r,n){for(var i=0,o=0,a=e.length;o<a&&i<t;o++){var s=e.charCodeAt(o);i+=0<=s&&s<=127?r:n}return o}function rJ(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",a=RP(i),s=qt(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?P9(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*s,d=qt(t.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=S9(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),g=0;g<f.length;g++)f[g]=T9(f[g],v);for(var m=d,_=0,g=0;g<f.length;g++)_=Math.max(kn(f[g],i),_);c==null&&(c=_);var y=_;return n&&(m+=n[0]+n[2],y+=n[1]+n[3],c+=n[1]+n[3]),l&&(y=c),{lines:f,height:d,outerWidth:y,outerHeight:m,lineHeight:s,calculatedLineHeight:a,contentWidth:_,contentHeight:h,width:c}}var nJ=function(){function e(){}return e}(),mM=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),iJ=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function oJ(e,t){var r=new iJ;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,s=Vy.lastIndex=0,l;(l=Vy.exec(e))!=null;){var u=l.index;u>s&&Uy(r,e.substring(s,u),t,a),Uy(r,l[2],t,a,l[1]),s=Vy.lastIndex}s<e.length&&Uy(r,e.substring(s,e.length),t,a);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function g(q,tt,Pt){q.width=tt,q.lineHeight=Pt,f+=Pt,h=Math.max(h,tt)}t:for(var m=0;m<r.lines.length;m++){for(var _=r.lines[m],y=0,w=0,T=0;T<_.tokens.length;T++){var S=_.tokens[T],P=S.styleName&&t.rich[S.styleName]||{},k=S.textPadding=P.padding,A=k?k[1]+k[3]:0,C=S.font=P.font||t.font;S.contentHeight=RP(C);var M=qt(P.height,S.contentHeight);if(S.innerHeight=M,k&&(M+=k[0]+k[2]),S.height=M,S.lineHeight=pd(P.lineHeight,t.lineHeight,M),S.align=P&&P.align||t.align,S.verticalAlign=P&&P.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(_.tokens=_.tokens.slice(0,T),g(_,w,y),r.lines=r.lines.slice(0,m+1)):r.lines=r.lines.slice(0,m);break t}var D=P.width,B=D==null||D==="auto";if(typeof D=="string"&&D.charAt(D.length-1)==="%")S.percentWidth=D,c.push(S),S.contentWidth=kn(S.text,C);else{if(B){var z=P.backgroundColor,N=z&&z.image;N&&(N=QK(N),W1(N)&&(S.width=Math.max(S.width,N.width*M/N.height)))}var j=p&&n!=null?n-w:null;j!=null&&j<S.width?!B||j<A?(S.text="",S.width=S.contentWidth=0):(S.text=tJ(S.text,j-A,C,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=kn(S.text,C)):S.contentWidth=kn(S.text,C)}S.width+=A,w+=S.width,P&&(y=Math.max(y,S.lineHeight))}g(_,w,y)}r.outerWidth=r.width=qt(n,h),r.outerHeight=r.height=qt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var m=0;m<c.length;m++){var S=c[m],Z=S.percentWidth;S.width=parseInt(Z,10)/100*r.width}return r}function Uy(e,t,r,n,i){var o=t==="",a=i&&r.rich[i]||{},s=e.lines,l=a.font||r.font,u=!1,c,f;if(n){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=ha(a.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=P9(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var g=0;g<c.length;g++){var m=c[g],_=new nJ;if(_.styleName=i,_.text=m,_.isLineHolder=!m&&!o,typeof a.width=="number"?_.width=a.width:_.width=f?f[g]:kn(m,l),!g&&!u){var y=(s[s.length-1]||(s[0]=new mM)).tokens,w=y.length;w===1&&y[0].isLineHolder?y[0]=_:(m||!w||o)&&y.push(_)}else s.push(new mM([_]))}}function aJ(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var sJ=cu(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function lJ(e){return aJ(e)?!!sJ[e]:!0}function P9(e,t,r,n,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=kn(h,t),p=n?!1:!lJ(h);if(o.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):p?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var $S="__zr_style_"+Math.round(Math.random()*10),$l={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},H1={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};$l[$S]=!0;var _M=["z","z2","invisible"],uJ=["invisible"],cJ=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&fJ(this,r,n)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new ae(0,0,0,0)),n?ae.applyTransform(r,i,n):r.copy(i),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new ae(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:ot(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Hh,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Hh)},t.prototype.styleUpdated=function(){this.__dirty&=~Hh},t.prototype.createStyle=function(r){return U1($l,r)},t.prototype.useStyle=function(r){r[$S]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[$S]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,_M)},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.style?a?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ve(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ve(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?uJ:_M,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return ot(r,n),r},t.prototype.getAnimationStyleProps=function(){return H1},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=En|Hh}(),t}(l9),Gy=new ae(0,0,0,0),jy=new ae(0,0,0,0);function fJ(e,t,r){return Gy.copy(e.getBoundingRect()),e.transform&&Gy.applyTransform(e.transform),jy.width=t,jy.height=r,!Gy.intersect(jy)}const fu=cJ;var un=Math.min,cn=Math.max,Wy=Math.sin,Hy=Math.cos,Qs=Math.PI*2,xp=ff(),Lp=ff(),Ip=ff();function hJ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],a=n[1],s=n[1],l=1;l<e.length;l++)n=e[l],i=un(i,n[0]),o=cn(o,n[0]),a=un(a,n[1]),s=cn(s,n[1]);t[0]=i,t[1]=a,r[0]=o,r[1]=s}}function yM(e,t,r,n,i,o){i[0]=un(e,r),i[1]=un(t,n),o[0]=cn(e,r),o[1]=cn(t,n)}var bM=[],wM=[];function dJ(e,t,r,n,i,o,a,s,l,u){var c=Q7,f=or,h=c(e,r,i,a,bM);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,a,bM[d]);l[0]=un(p,l[0]),u[0]=cn(p,u[0])}h=c(t,n,o,s,wM);for(var d=0;d<h;d++){var v=f(t,n,o,s,wM[d]);l[1]=un(v,l[1]),u[1]=cn(v,u[1])}l[0]=un(e,l[0]),u[0]=cn(e,u[0]),l[0]=un(a,l[0]),u[0]=cn(a,u[0]),l[1]=un(t,l[1]),u[1]=cn(t,u[1]),l[1]=un(s,l[1]),u[1]=cn(s,u[1])}function pJ(e,t,r,n,i,o,a,s){var l=t9,u=Lr,c=cn(un(l(e,r,i),1),0),f=cn(un(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);a[0]=un(e,i,h),a[1]=un(t,o,d),s[0]=cn(e,i,h),s[1]=cn(t,o,d)}function vJ(e,t,r,n,i,o,a,s,l){var u=gc,c=mc,f=Math.abs(i-o);if(f%Qs<1e-4&&f>1e-4){s[0]=e-r,s[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(xp[0]=Hy(i)*r+e,xp[1]=Wy(i)*n+t,Lp[0]=Hy(o)*r+e,Lp[1]=Wy(o)*n+t,u(s,xp,Lp),c(l,xp,Lp),i=i%Qs,i<0&&(i=i+Qs),o=o%Qs,o<0&&(o=o+Qs),i>o&&!a?o+=Qs:i<o&&a&&(i+=Qs),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(Ip[0]=Hy(d)*r+e,Ip[1]=Wy(d)*n+t,u(s,Ip,s),c(l,Ip,l))}var ye={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},tl=[],el=[],Yi=[],Ra=[],qi=[],Zi=[],Xy=Math.min,Yy=Math.max,rl=Math.cos,nl=Math.sin,Vo=Math.abs,zS=Math.PI,os=zS*2,qy=typeof Float32Array<"u",Qf=[];function Zy(e){var t=Math.round(e/zS*1e8)/1e8;return t%2*zS}function gJ(e,t){var r=Zy(e[0]);r<0&&(r+=os);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=os?i=r+os:t&&r-i>=os?i=r-os:!t&&r>i?i=r+(os-Zy(r-i)):t&&r<i&&(i=r-(os-Zy(i-r))),e[0]=r,e[1]=i}var mJ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Vo(n/xm/t)||0,this._uy=Vo(n/xm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(ye.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Vo(t-this._xi),i=Vo(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(ye.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=n*n+i*i;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,a){return this._drawPendingPt(),this.addData(ye.C,t,r,n,i,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(ye.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,a){this._drawPendingPt(),Qf[0]=i,Qf[1]=o,gJ(Qf,a),i=Qf[0],o=Qf[1];var s=o-i;return this.addData(ye.A,t,r,n,n,i,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,a),this._xi=rl(o)*n+t,this._yi=nl(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(ye.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(ye.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&qy&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();qy&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(t,r,n,i,o,a,s,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,qy&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){Yi[0]=Yi[1]=qi[0]=qi[1]=Number.MAX_VALUE,Ra[0]=Ra[1]=Zi[0]=Zi[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],n=t[a+1],i=r,o=n),s){case ye.M:r=i=t[a++],n=o=t[a++],qi[0]=i,qi[1]=o,Zi[0]=i,Zi[1]=o;break;case ye.L:yM(r,n,t[a],t[a+1],qi,Zi),r=t[a++],n=t[a++];break;case ye.C:dJ(r,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],qi,Zi),r=t[a++],n=t[a++];break;case ye.Q:pJ(r,n,t[a++],t[a++],t[a],t[a+1],qi,Zi),r=t[a++],n=t[a++];break;case ye.A:var u=t[a++],c=t[a++],f=t[a++],h=t[a++],d=t[a++],p=t[a++]+d;a+=1;var v=!t[a++];l&&(i=rl(d)*f+u,o=nl(d)*h+c),vJ(u,c,f,h,d,p,v,qi,Zi),r=rl(p)*f+u,n=nl(p)*h+c;break;case ye.R:i=r=t[a++],o=n=t[a++];var g=t[a++],m=t[a++];yM(i,o,i+g,o+m,qi,Zi);break;case ye.Z:r=i,n=o;break}gc(Yi,Yi,qi),mc(Ra,Ra,Zi)}return a===0&&(Yi[0]=Yi[1]=Ra[0]=Ra[1]=0),new ae(Yi[0],Yi[1],Ra[0]-Yi[0],Ra[1]-Yi[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],a=t[h+1],s=o,l=a);var v=-1;switch(d){case ye.M:o=s=t[h++],a=l=t[h++];break;case ye.L:{var g=t[h++],m=t[h++],_=g-o,y=m-a;(Vo(_)>n||Vo(y)>i||h===r-1)&&(v=Math.sqrt(_*_+y*y),o=g,a=m);break}case ye.C:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++],S=t[h++],P=t[h++];v=LZ(o,a,w,T,g,m,S,P,10),o=S,a=P;break}case ye.Q:{var w=t[h++],T=t[h++],g=t[h++],m=t[h++];v=RZ(o,a,w,T,g,m,10),o=g,a=m;break}case ye.A:var k=t[h++],A=t[h++],C=t[h++],M=t[h++],D=t[h++],B=t[h++],z=B+D;h+=1,t[h++],p&&(s=rl(D)*C+k,l=nl(D)*M+A),v=Yy(C,M)*Xy(os,Math.abs(B)),o=rl(z)*C+k,a=nl(z)*M+A;break;case ye.R:{s=o=t[h++],l=a=t[h++];var N=t[h++],j=t[h++];v=N*2+j*2;break}case ye.Z:{var _=s-o,y=l-a;v=Math.sqrt(_*_+y*y),o=s,a=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=r<1,p,v,g=0,m=0,_,y=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,_=r*v,!_))return;t:for(var S=0;S<a;){var P=n[S++],k=S===1;switch(k&&(u=n[S],c=n[S+1],s=u,l=c),P!==ye.L&&y>0&&(t.lineTo(w,T),y=0),P){case ye.M:s=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case ye.L:{f=n[S++],h=n[S++];var A=Vo(f-u),C=Vo(h-c);if(A>i||C>o){if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;t.lineTo(u*(1-D)+f*D,c*(1-D)+h*D);break t}g+=M}t.lineTo(f,h),u=f,c=h,y=0}else{var B=A*A+C*C;B>y&&(w=f,T=h,y=B)}break}case ye.C:{var z=n[S++],N=n[S++],j=n[S++],Z=n[S++],q=n[S++],tt=n[S++];if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;km(u,z,j,q,D,tl),km(c,N,Z,tt,D,el),t.bezierCurveTo(tl[1],el[1],tl[2],el[2],tl[3],el[3]);break t}g+=M}t.bezierCurveTo(z,N,j,Z,q,tt),u=q,c=tt;break}case ye.Q:{var z=n[S++],N=n[S++],j=n[S++],Z=n[S++];if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;Cm(u,z,j,D,tl),Cm(c,N,Z,D,el),t.quadraticCurveTo(tl[1],el[1],tl[2],el[2]);break t}g+=M}t.quadraticCurveTo(z,N,j,Z),u=j,c=Z;break}case ye.A:var Pt=n[S++],Ot=n[S++],wt=n[S++],St=n[S++],Ht=n[S++],Y=n[S++],nt=n[S++],K=!n[S++],pt=wt>St?wt:St,Tt=Vo(wt-St)>.001,At=Ht+Y,lt=!1;if(d){var M=p[m++];g+M>_&&(At=Ht+Y*(_-g)/M,lt=!0),g+=M}if(Tt&&t.ellipse?t.ellipse(Pt,Ot,wt,St,nt,Ht,At,K):t.arc(Pt,Ot,pt,Ht,At,K),lt)break t;k&&(s=rl(Ht)*wt+Pt,l=nl(Ht)*St+Ot),u=rl(At)*wt+Pt,c=nl(At)*St+Ot;break;case ye.R:s=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var ft=n[S++],$=n[S++];if(d){var M=p[m++];if(g+M>_){var G=_-g;t.moveTo(f,h),t.lineTo(f+Xy(G,ft),h),G-=ft,G>0&&t.lineTo(f+ft,h+Xy(G,$)),G-=$,G>0&&t.lineTo(f+Yy(ft-G,0),h+$),G-=ft,G>0&&t.lineTo(f,h+Yy($-G,0));break t}g+=M}t.rect(f,h,ft,$);break;case ye.Z:if(d){var M=p[m++];if(g+M>_){var D=(_-g)/M;t.lineTo(u*(1-D)+s*D,c*(1-D)+l*D);break t}g+=M}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=ye,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const Jl=mJ;function Du(e,t,r,n,i,o,a){if(i===0)return!1;var s=i,l=0,u=e;if(a>t+s&&a>n+s||a<t-s&&a<n-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function _J(e,t,r,n,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f||u>e+f&&u>r+f&&u>i+f&&u>a+f||u<e-f&&u<r-f&&u<i-f&&u<a-f)return!1;var h=xZ(e,t,r,n,i,o,a,s,u,c,null);return h<=f/2}function yJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||s>e+u&&s>r+u&&s>i+u||s<e-u&&s<r-u&&s<i-u)return!1;var c=OZ(e,t,r,n,i,o,s,l,null);return c<=u/2}var SM=Math.PI*2;function Op(e){return e%=SM,e<0&&(e+=SM),e}var th=Math.PI*2;function bJ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%th<1e-4)return!0;if(o){var f=n;n=Op(i),i=Op(f)}else n=Op(n),i=Op(i);n>i&&(i+=th);var h=Math.atan2(l,s);return h<0&&(h+=th),h>=n&&h<=i||h+th>=n&&h+th<=i}function il(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var a=(o-t)/(n-t),s=n<t?1:-1;(a===1||a===0)&&(s=n<t?.5:-.5);var l=a*(r-e)+e;return l===i?1/0:l>i?s:0}var Da=Jl.CMD,ol=Math.PI*2,wJ=1e-4;function SJ(e,t){return Math.abs(e-t)<wJ}var qr=[-1,-1,-1],Wn=[-1,-1];function TJ(){var e=Wn[0];Wn[0]=Wn[1],Wn[1]=e}function PJ(e,t,r,n,i,o,a,s,l,u){if(u>t&&u>n&&u>o&&u>s||u<t&&u<n&&u<o&&u<s)return 0;var c=Am(t,n,o,s,u,qr);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var g=qr[v],m=g===0||g===1?.5:1,_=or(e,r,i,a,g);_<l||(h<0&&(h=Q7(t,n,o,s,Wn),Wn[1]<Wn[0]&&h>1&&TJ(),d=or(t,n,o,s,Wn[0]),h>1&&(p=or(t,n,o,s,Wn[1]))),h===2?g<Wn[0]?f+=d<t?m:-m:g<Wn[1]?f+=p<d?m:-m:f+=s<p?m:-m:g<Wn[0]?f+=d<t?m:-m:f+=s<d?m:-m)}return f}function EJ(e,t,r,n,i,o,a,s){if(s>t&&s>n&&s>o||s<t&&s<n&&s<o)return 0;var l=IZ(t,n,o,s,qr);if(l===0)return 0;var u=t9(t,n,o);if(u>=0&&u<=1){for(var c=0,f=Lr(t,n,o,u),h=0;h<l;h++){var d=qr[h]===0||qr[h]===1?.5:1,p=Lr(e,r,i,qr[h]);p<a||(qr[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=qr[0]===0||qr[0]===1?.5:1,p=Lr(e,r,i,qr[0]);return p<a?0:o<t?d:-d}}function AJ(e,t,r,n,i,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);qr[0]=-l,qr[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=ol-1e-4){n=0,i=ol;var c=o?1:-1;return a>=qr[0]+e&&a<=qr[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=ol,i+=ol);for(var h=0,d=0;d<2;d++){var p=qr[d];if(p+e>a){var v=Math.atan2(s,p),c=o?1:-1;v<0&&(v=ol+v),(v>=n&&v<=i||v+ol>=n&&v+ol<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function E9(e,t,r,n,i){for(var o=e.data,a=e.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<a;){var v=o[p++],g=p===1;switch(v===Da.M&&p>1&&(r||(s+=il(l,u,c,f,n,i))),g&&(l=o[p],u=o[p+1],c=l,f=u),v){case Da.M:c=o[p++],f=o[p++],l=c,u=f;break;case Da.L:if(r){if(Du(l,u,o[p],o[p+1],t,n,i))return!0}else s+=il(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Da.C:if(r){if(_J(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=PJ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Da.Q:if(r){if(yJ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=EJ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Da.A:var m=o[p++],_=o[p++],y=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var P=!!(1-o[p++]);h=Math.cos(T)*y+m,d=Math.sin(T)*w+_,g?(c=h,f=d):s+=il(l,u,h,d,n,i);var k=(n-m)*w/y+m;if(r){if(bJ(m,_,w,T,T+S,P,t,k,i))return!0}else s+=AJ(m,_,w,T,T+S,P,k,i);l=Math.cos(T+S)*y+m,u=Math.sin(T+S)*w+_;break;case Da.R:c=l=o[p++],f=u=o[p++];var A=o[p++],C=o[p++];if(h=c+A,d=f+C,r){if(Du(c,f,h,f,t,n,i)||Du(h,f,h,d,t,n,i)||Du(h,d,c,d,t,n,i)||Du(c,d,c,f,t,n,i))return!0}else s+=il(h,f,h,d,n,i),s+=il(c,d,c,f,n,i);break;case Da.Z:if(r){if(Du(l,u,c,f,t,n,i))return!0}else s+=il(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!SJ(u,f)&&(s+=il(l,u,c,f,n,i)||0),s!==0}function kJ(e,t,r){return E9(e,0,!1,t,r)}function CJ(e,t,r,n){return E9(e,t,!0,r,n)}var A9=te({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},$l),MJ={style:te({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},H1.style)},Ky=Eo.concat(["invisible","culling","z","z2","zlevel","parent"]),xJ=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<Ky.length;++s)i[Ky[s]]=this[Ky[s]];i.__dirty|=En}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ve(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var a=n[o],s=r[a];a==="style"?this.style?ot(this.style,s):this.useStyle(s):a==="shape"?ot(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Et(r)){var n=Mm(r,0);return n>.5?DS:n>.2?sK:NS}else if(r)return NS}return DS},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Et(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=Mm(r,0)<RS;if(o===a)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~hc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Jl(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&hc)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),a=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),CJ(s,l/u,r,n)))return!0}if(this.hasFill())return kJ(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=hc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:ot(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&hc)},t.prototype.createStyle=function(r){return U1(A9,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=ot({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.shape?a?o?u=n.shape:(u=ot({},i.shape),ot(u,n.shape)):(u=ot({},o?this.shape:i.shape),ot(u,n.shape)):l&&(u=i.shape),u)if(a){this.shape=ot({},this.shape);for(var c={},f=ve(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return MJ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ae(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return zt(r.style)},a.prototype.getDefaultShape=function(){return zt(r.shape)},a}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=En|Hh|hc}(),t}(fu);const fe=xJ;var LJ=te({strokeFirst:!0,font:ql,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},A9),k9=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return U1(LJ,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=OP(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(fu);k9.prototype.type="tspan";const VS=k9;var IJ=te({x:0,y:0},$l),OJ={style:te({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},H1.style)};function RJ(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var C9=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return U1(IJ,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=RJ(n.image)?n.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=n[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return OJ},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new ae(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(fu);C9.prototype.type="image";const Sa=C9;function DJ(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,a=t.r,s,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),e.moveTo(r+s,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var yc=Math.round;function M9(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,a=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(yc(n*2)===yc(i*2)&&(e.x1=e.x2=xl(n,s,!0)),yc(o*2)===yc(a*2)&&(e.y1=e.y2=xl(o,s,!0))),e}}function x9(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,a=t.height;e.x=n,e.y=i,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=xl(n,s,!0),e.y=xl(i,s,!0),e.width=Math.max(xl(n+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(xl(i+a,s,!1)-e.y,a===0?0:1)),e}}function xl(e,t,r){if(!t)return e;var n=yc(e*2);return(n+yc(t))%2===0?n/2:(n+(r?1:-1))/2}var NJ=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),FJ={},L9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new NJ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=x9(FJ,n,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,a=n.width,s=n.height;n.r?DJ(r,n):r.rect(i,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(fe);L9.prototype.type="rect";const Ke=L9;var TM={fill:"#000"},PM=2,BJ={style:te({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},H1.style)},I9=function(e){Ae(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=TM,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,GJ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new ae(0,0,0,0),n=this._children,i=[],o=null,a=0;a<n.length;a++){var s=n[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||TM},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return ot(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ve(n),o=0;o<i.length;o++){var a=i[o];r[a]=r[a]||{},ot(r[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return BJ},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||ql,i=r.padding,o=LM(r),a=rJ(o,r),s=Jy(r),l=!!r.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,p=this._defaultStyle,v=r.x||0,g=r.y||0,m=r.align||p.align||"left",_=r.verticalAlign||p.verticalAlign||"top",y=v,w=dc(g,a.contentHeight,_);if(s||i){var T=Yh(v,c,m),S=dc(g,u,_);s&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(y=xM(v,m,i),_==="top"?w+=i[0]:_==="bottom"&&(w-=i[2]));for(var P=0,k=!1,A=MM("fill"in r?r.fill:(k=!0,p.fill)),C=CM("stroke"in r?r.stroke:!l&&(!p.autoStroke||k)?(P=PM,p.stroke):null),M=r.textShadowBlur>0,D=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),B=a.calculatedLineHeight,z=0;z<h.length;z++){var N=this._getOrCreateChild(VS),j=N.createStyle();N.useStyle(j),j.text=h[z],j.x=y,j.y=w,m&&(j.textAlign=m),j.textBaseline="middle",j.opacity=r.opacity,j.strokeFirst=!0,M&&(j.shadowBlur=r.textShadowBlur||0,j.shadowColor=r.textShadowColor||"transparent",j.shadowOffsetX=r.textShadowOffsetX||0,j.shadowOffsetY=r.textShadowOffsetY||0),j.stroke=C,j.fill=A,C&&(j.lineWidth=r.lineWidth||P,j.lineDash=r.lineDash,j.lineDashOffset=r.lineDashOffset||0),j.font=n,AM(j,r),w+=d,D&&N.setBoundingRect(new ae(Yh(j.x,r.width,j.textAlign),dc(j.y,B,j.textBaseline),f,B))}},t.prototype._updateRichTexts=function(){var r=this.style,n=LM(r),i=oJ(n,r),o=i.width,a=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=Yh(u,a,h),v=dc(c,s,d),g=p,m=v;l&&(g+=l[3],m+=l[0]);var _=g+o;Jy(r)&&this._renderBackground(r,r,p,v,a,s);for(var y=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,P=S.length,k=T.lineHeight,A=T.width,C=0,M=g,D=_,B=P-1,z=void 0;C<P&&(z=S[C],!z.align||z.align==="left");)this._placeToken(z,r,k,m,M,"left",y),A-=z.width,M+=z.width,C++;for(;B>=0&&(z=S[B],z.align==="right");)this._placeToken(z,r,k,m,D,"right",y),A-=z.width,D-=z.width,B--;for(M+=(o-(M-g)-(_-D)-A)/2;C<=B;)z=S[C],this._placeToken(z,r,k,m,M+z.width/2,"center",y),M+=z.width,C++;m+=k}},t.prototype._placeToken=function(r,n,i,o,a,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&Jy(u);h&&this._renderBackground(u,n,s==="right"?a-r.width:s==="center"?a-r.width/2:a,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(a=xM(a,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(VS),g=v.createStyle();v.useStyle(g);var m=this._defaultStyle,_=!1,y=0,w=MM("fill"in u?u.fill:"fill"in n?n.fill:(_=!0,m.fill)),T=CM("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!m.autoStroke||_)?(y=PM,m.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;g.text=r.text,g.x=a,g.y=f,S&&(g.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,g.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",g.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,g.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),g.textAlign=s,g.textBaseline="middle",g.font=r.font||ql,g.opacity=pd(u.opacity,n.opacity,1),AM(g,u),T&&(g.lineWidth=pd(u.lineWidth,n.lineWidth,y),g.lineDash=qt(u.lineDash,n.lineDash),g.lineDashOffset=n.lineDashOffset||0,g.stroke=T),w&&(g.fill=w);var P=r.contentWidth,k=r.contentHeight;v.setBoundingRect(new ae(Yh(g.x,P,g.textAlign),dc(g.y,k,g.textBaseline),P,k))},t.prototype._renderBackground=function(r,n,i,o,a,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,g;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(Ke),v.useStyle(v.createStyle()),v.style.fill=null;var m=v.shape;m.x=i,m.y=o,m.width=a,m.height=s,m.r=d,v.dirtyShape()}if(h){var _=v.style;_.fill=l||null,_.fillOpacity=qt(r.fillOpacity,1)}else if(f){g=this._getOrCreateChild(Sa),g.onload=function(){p.dirtyStyle()};var y=g.style;y.image=l.image,y.x=i,y.y=o,y.width=a,y.height=s}if(u&&c){var _=v.style;_.lineWidth=u,_.stroke=c,_.strokeOpacity=qt(r.strokeOpacity,1),_.lineDash=r.borderDash,_.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var w=(v||g).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=pd(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return UJ(r)&&(n=[r.fontStyle,r.fontWeight,VJ(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&_o(n)||r.textFont||r.font},t}(fu),$J={left:!0,right:1,center:1},zJ={top:1,bottom:1,middle:1},EM=["fontStyle","fontWeight","fontSize","fontFamily"];function VJ(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?TP+"px":e+"px"}function AM(e,t){for(var r=0;r<EM.length;r++){var n=EM[r],i=t[n];i!=null&&(e[n]=i)}}function UJ(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function GJ(e){return kM(e),F(e.rich,kM),e}function kM(e){if(e){e.font=I9.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||$J[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||zJ[r]?r:"top";var n=e.padding;n&&(e.padding=B7(e.padding))}}function CM(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function MM(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function xM(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function LM(e){var t=e.text;return t!=null&&(t+=""),t}function Jy(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const Je=I9;var ie=Oe(),jJ=function(e,t,r,n){if(n){var i=ie(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var a=ie(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t})}},IM=1,OM={},O9=Oe(),zP=Oe(),VP=0,L0=1,X1=2,ei=["emphasis","blur","select"],RM=["normal","emphasis","blur","select"],WJ=10,HJ=9,zl="highlight",Vg="downplay",_d="select",Ug="unselect",yd="toggleSelect";function Nu(e){return e!=null&&e!=="none"}var DM=new C0(100);function NM(e){if(Et(e)){var t=DM.get(e);return t||(t=QC(e,-.1),DM.put(e,t)),t}else if(V1(e)){var r=ot({},e);return r.colorStops=kt(e.colorStops,function(n){return{offset:n.offset,color:QC(n.color,-.1)}}),r}return e}function Y1(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function R9(e){Y1(e,"emphasis",X1)}function D9(e){e.hoverState===X1&&Y1(e,"normal",VP)}function UP(e){Y1(e,"blur",L0)}function N9(e){e.hoverState===L0&&Y1(e,"normal",VP)}function XJ(e){e.selected=!0}function YJ(e){e.selected=!1}function FM(e,t,r){t(e,r)}function Ta(e,t,r){FM(e,t,r),e.isGroup&&e.traverse(function(n){FM(n,t,r)})}function US(e,t){switch(t){case"emphasis":e.hoverState=X1;break;case"normal":e.hoverState=VP;break;case"blur":e.hoverState=L0;break;case"select":e.selected=!0}}function qJ(e,t,r,n){for(var i=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=i[s];o[s]=l==null?n&&n[s]:l}for(var a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function ZJ(e,t,r,n){var i=r&&ue(r,"select")>=0,o=!1;if(e instanceof fe){var a=O9(e),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if(Nu(s)||Nu(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=ot({},n),u=ot({},u),u.fill=s):!Nu(u.fill)&&Nu(s)?(o=!0,n=ot({},n),u=ot({},u),u.fill=NM(s)):!Nu(u.stroke)&&Nu(l)&&(o||(n=ot({},n),u=ot({},u)),u.stroke=NM(l)),n.style=u}}if(n&&n.z2==null){o||(n=ot({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:WJ)}return n}function KJ(e,t,r){if(r&&r.z2==null){r=ot({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:HJ)}return r}function JJ(e,t,r){var n=ue(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:qJ(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=ot({},r),a=ot({opacity:n?i:o.opacity*.1},a),r.style=a),r}function Qy(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return ZJ(this,e,t,r);if(e==="blur")return JJ(this,e,r);if(e==="select")return KJ(this,e,r)}return r}function GP(e){e.stateProxy=Qy;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=Qy),r&&(r.stateProxy=Qy)}function BM(e,t){!z9(e,t)&&!e.__highByOuter&&Ta(e,R9)}function $M(e,t){!z9(e,t)&&!e.__highByOuter&&Ta(e,D9)}function Yd(e,t){e.__highByOuter|=1<<(t||0),Ta(e,R9)}function qd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Ta(e,D9)}function F9(e){Ta(e,UP)}function jP(e){Ta(e,N9)}function B9(e){Ta(e,XJ)}function $9(e){Ta(e,YJ)}function z9(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function V9(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var a=zP(o),s=i==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(l),a.isBlured&&(l.group.traverse(function(u){N9(u)}),s&&r.push(o)),a.isBlured=!1}),F(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function GS(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&jP(h)}}if(e!=null&&!(!t||t==="none")){var a=i.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(g){UP(g)}),$r(t))o(u.getData(),t);else if(It(t))for(var p=ve(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),zP(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function jS(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){zP(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){UP(o)})}}}function QJ(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=Kl(i,t);o=(ct(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=ie(a);GS(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&GS(n,c,f,r)}}}function WP(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var a=n.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(ie(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function tQ(e,t,r){var n=ie(e),i=WP(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,a=i.focusSelf;o?(a&&jS(n.componentMainType,n.componentIndex,r),F(o,function(s){return BM(s,t)})):(GS(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&jS(n.componentMainType,n.componentIndex,r),BM(e,t))}function eQ(e,t,r){V9(r);var n=ie(e),i=WP(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?F(i,function(o){return $M(o,t)}):$M(e,t)}function rQ(e,t,r){if(!!XS(t)){var n=t.dataType,i=e.getData(n),o=Kl(i,t);ct(o)||(o=[o]),e[t.type===yd?"toggleSelect":t.type===_d?"select":"unselect"](o,n)}}function zM(e){var t=e.getAllData();F(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,a){e.isSelected(a,i)?B9(o):$9(o)})})}function nQ(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();F(n,function(i){i.data;var o=i.type,a=r.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function WS(e,t,r){HP(e,!0),Ta(e,GP),oQ(e,t,r)}function iQ(e){HP(e,!1)}function Ql(e,t,r,n){n?iQ(e):WS(e,t,r)}function oQ(e,t,r){var n=ie(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var VM=["emphasis","blur","select"],aQ={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Zd(e,t,r,n){r=r||"itemStyle";for(var i=0;i<VM.length;i++){var o=VM[i],a=t.getModel([o,r]),s=e.ensureState(o);s.style=n?n(a):a[aQ[r]]()}}function HP(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function HS(e){return!!(e&&e.__highDownDispatcher)}function sQ(e){var t=OM[e];return t==null&&IM<=32&&(t=OM[e]=IM++),t}function XS(e){var t=e.type;return t===_d||t===Ug||t===yd}function UM(e){var t=e.type;return t===zl||t===Vg}function lQ(e){var t=O9(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Fu=Jl.CMD,uQ=[[],[],[]],GM=Math.sqrt,cQ=Math.atan2;function fQ(e,t){if(!!t){var r=e.data,n=e.len(),i,o,a,s,l,u,c=Fu.M,f=Fu.C,h=Fu.L,d=Fu.R,p=Fu.A,v=Fu.Q;for(a=0,s=0;a<n;){switch(i=r[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var g=t[4],m=t[5],_=GM(t[0]*t[0]+t[1]*t[1]),y=GM(t[2]*t[2]+t[3]*t[3]),w=cQ(-t[1]/y,t[0]/_);r[a]*=_,r[a++]+=g,r[a]*=y,r[a++]+=m,r[a++]*=_,r[a++]*=y,r[a++]+=w,r[a++]+=w,a+=2,s=a;break;case d:u[0]=r[a++],u[1]=r[a++],Qr(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[a++],u[1]+=r[a++],Qr(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<o;l++){var T=uQ[l];T[0]=r[a++],T[1]=r[a++],Qr(T,T,t),r[s++]=T[0],r[s++]=T[1]}}e.increaseVersion()}}var t2=Math.sqrt,Rp=Math.sin,Dp=Math.cos,eh=Math.PI;function jM(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function YS(e,t){return(e[0]*t[0]+e[1]*t[1])/(jM(e)*jM(t))}function WM(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(YS(e,t))}function HM(e,t,r,n,i,o,a,s,l,u,c){var f=l*(eh/180),h=Dp(f)*(e-r)/2+Rp(f)*(t-n)/2,d=-1*Rp(f)*(e-r)/2+Dp(f)*(t-n)/2,p=h*h/(a*a)+d*d/(s*s);p>1&&(a*=t2(p),s*=t2(p));var v=(i===o?-1:1)*t2((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,g=v*a*d/s,m=v*-s*h/a,_=(e+r)/2+Dp(f)*g-Rp(f)*m,y=(t+n)/2+Rp(f)*g+Dp(f)*m,w=WM([1,0],[(h-g)/a,(d-m)/s]),T=[(h-g)/a,(d-m)/s],S=[(-1*h-g)/a,(-1*d-m)/s],P=WM(T,S);if(YS(T,S)<=-1&&(P=eh),YS(T,S)>=1&&(P=0),P<0){var k=Math.round(P/eh*1e6)/1e6;P=eh*2+k%2*eh}c.addData(u,_,y,a,s,w,P,f,o)}var hQ=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,dQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function pQ(e){var t=new Jl;if(!e)return t;var r=0,n=0,i=r,o=n,a,s=Jl.CMD,l=e.match(hQ);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(dQ)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var g=0;g<p;){var m=void 0,_=void 0,y=void 0,w=void 0,T=void 0,S=void 0,P=void 0,k=r,A=n,C=void 0,M=void 0;switch(f){case"l":r+=d[g++],n+=d[g++],h=s.L,t.addData(h,r,n);break;case"L":r=d[g++],n=d[g++],h=s.L,t.addData(h,r,n);break;case"m":r+=d[g++],n+=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[g++],n=d[g++],h=s.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[g++],h=s.L,t.addData(h,r,n);break;case"H":r=d[g++],h=s.L,t.addData(h,r,n);break;case"v":n+=d[g++],h=s.L,t.addData(h,r,n);break;case"V":n=d[g++],h=s.L,t.addData(h,r,n);break;case"C":h=s.C,t.addData(h,d[g++],d[g++],d[g++],d[g++],d[g++],d[g++]),r=d[g-2],n=d[g-1];break;case"c":h=s.C,t.addData(h,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n,d[g++]+r,d[g++]+n),r+=d[g-2],n+=d[g-1];break;case"S":m=r,_=n,C=t.len(),M=t.data,a===s.C&&(m+=r-M[C-4],_+=n-M[C-3]),h=s.C,k=d[g++],A=d[g++],r=d[g++],n=d[g++],t.addData(h,m,_,k,A,r,n);break;case"s":m=r,_=n,C=t.len(),M=t.data,a===s.C&&(m+=r-M[C-4],_+=n-M[C-3]),h=s.C,k=r+d[g++],A=n+d[g++],r+=d[g++],n+=d[g++],t.addData(h,m,_,k,A,r,n);break;case"Q":k=d[g++],A=d[g++],r=d[g++],n=d[g++],h=s.Q,t.addData(h,k,A,r,n);break;case"q":k=d[g++]+r,A=d[g++]+n,r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,k,A,r,n);break;case"T":m=r,_=n,C=t.len(),M=t.data,a===s.Q&&(m+=r-M[C-4],_+=n-M[C-3]),r=d[g++],n=d[g++],h=s.Q,t.addData(h,m,_,r,n);break;case"t":m=r,_=n,C=t.len(),M=t.data,a===s.Q&&(m+=r-M[C-4],_+=n-M[C-3]),r+=d[g++],n+=d[g++],h=s.Q,t.addData(h,m,_,r,n);break;case"A":y=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],k=r,A=n,r=d[g++],n=d[g++],h=s.A,HM(k,A,r,n,S,P,y,w,T,h,t);break;case"a":y=d[g++],w=d[g++],T=d[g++],S=d[g++],P=d[g++],k=r,A=n,r+=d[g++],n+=d[g++],h=s.A,HM(k,A,r,n,S,P,y,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=s.Z,t.addData(h),r=i,n=o),a=h}return t.toStatic(),t}var U9=function(e){Ae(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(fe);function G9(e){return e.setData!=null}function j9(e,t){var r=pQ(e),n=ot({},t);return n.buildPath=function(i){if(G9(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){fQ(r,i),this.dirtyShape()},n}function vQ(e,t){return new U9(j9(e,t))}function gQ(e,t){var r=j9(e,t),n=function(i){Ae(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}(U9);return n}function mQ(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var a=new fe(t);return a.createPathProxy(),a.buildPath=function(s){if(G9(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var _Q=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),W9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new _Q},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(fe);W9.prototype.type="circle";const XP=W9;var yQ=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),H9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new yQ},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,a=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),r.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),r.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),r.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),r.closePath()},t}(fe);H9.prototype.type="ellipse";const X9=H9;var Y9=Math.PI,e2=Y9*2,al=Math.sin,Bu=Math.cos,bQ=Math.acos,kr=Math.atan2,XM=Math.abs,bd=Math.sqrt,qh=Math.max,Ki=Math.min,hi=1e-4;function wQ(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<hi))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function Np(e,t,r,n,i,o,a){var s=e-r,l=t-n,u=(a?o:-o)/bd(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=n+f,g=(h+p)/2,m=(d+v)/2,_=p-h,y=v-d,w=_*_+y*y,T=i-o,S=h*v-p*d,P=(y<0?-1:1)*bd(qh(0,T*T*w-S*S)),k=(S*y-_*P)/w,A=(-S*_-y*P)/w,C=(S*y+_*P)/w,M=(-S*_+y*P)/w,D=k-g,B=A-m,z=C-g,N=M-m;return D*D+B*B>z*z+N*N&&(k=C,A=M),{cx:k,cy:A,x0:-c,y0:-f,x1:k*(i/T-1),y1:A*(i/T-1)}}function SQ(e){var t;if(ct(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function TQ(e,t){var r,n=qh(t.r,0),i=qh(t.r0||0,0),o=n>0,a=i>0;if(!(!o&&!a)){if(o||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=XM(u-l),p=d>e2&&d%e2;if(p>hi&&(d=p),!(n>hi))e.moveTo(c,f);else if(d>e2-hi)e.moveTo(c+n*Bu(l),f+n*al(l)),e.arc(c,f,n,l,u,!h),i>hi&&(e.moveTo(c+i*Bu(u),f+i*al(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,g=void 0,m=void 0,_=void 0,y=void 0,w=void 0,T=void 0,S=void 0,P=void 0,k=void 0,A=void 0,C=void 0,M=void 0,D=void 0,B=void 0,z=void 0,N=n*Bu(l),j=n*al(l),Z=i*Bu(u),q=i*al(u),tt=d>hi;if(tt){var Pt=t.cornerRadius;Pt&&(r=SQ(Pt),v=r[0],g=r[1],m=r[2],_=r[3]);var Ot=XM(n-i)/2;if(y=Ki(Ot,m),w=Ki(Ot,_),T=Ki(Ot,v),S=Ki(Ot,g),A=P=qh(y,w),C=k=qh(T,S),(P>hi||k>hi)&&(M=n*Bu(u),D=n*al(u),B=i*Bu(l),z=i*al(l),d<Y9)){var wt=wQ(N,j,B,z,M,D,Z,q);if(wt){var St=N-wt[0],Ht=j-wt[1],Y=M-wt[0],nt=D-wt[1],K=1/al(bQ((St*Y+Ht*nt)/(bd(St*St+Ht*Ht)*bd(Y*Y+nt*nt)))/2),pt=bd(wt[0]*wt[0]+wt[1]*wt[1]);A=Ki(P,(n-pt)/(K+1)),C=Ki(k,(i-pt)/(K-1))}}}if(!tt)e.moveTo(c+N,f+j);else if(A>hi){var Tt=Ki(m,A),At=Ki(_,A),lt=Np(B,z,N,j,n,Tt,h),ft=Np(M,D,Z,q,n,At,h);e.moveTo(c+lt.cx+lt.x0,f+lt.cy+lt.y0),A<P&&Tt===At?e.arc(c+lt.cx,f+lt.cy,A,kr(lt.y0,lt.x0),kr(ft.y0,ft.x0),!h):(Tt>0&&e.arc(c+lt.cx,f+lt.cy,Tt,kr(lt.y0,lt.x0),kr(lt.y1,lt.x1),!h),e.arc(c,f,n,kr(lt.cy+lt.y1,lt.cx+lt.x1),kr(ft.cy+ft.y1,ft.cx+ft.x1),!h),At>0&&e.arc(c+ft.cx,f+ft.cy,At,kr(ft.y1,ft.x1),kr(ft.y0,ft.x0),!h))}else e.moveTo(c+N,f+j),e.arc(c,f,n,l,u,!h);if(!(i>hi)||!tt)e.lineTo(c+Z,f+q);else if(C>hi){var Tt=Ki(v,C),At=Ki(g,C),lt=Np(Z,q,M,D,i,-At,h),ft=Np(N,j,B,z,i,-Tt,h);e.lineTo(c+lt.cx+lt.x0,f+lt.cy+lt.y0),C<k&&Tt===At?e.arc(c+lt.cx,f+lt.cy,C,kr(lt.y0,lt.x0),kr(ft.y0,ft.x0),!h):(At>0&&e.arc(c+lt.cx,f+lt.cy,At,kr(lt.y0,lt.x0),kr(lt.y1,lt.x1),!h),e.arc(c,f,i,kr(lt.cy+lt.y1,lt.cx+lt.x1),kr(ft.cy+ft.y1,ft.cx+ft.x1),h),Tt>0&&e.arc(c+ft.cx,f+ft.cy,Tt,kr(ft.y1,ft.x1),kr(ft.y0,ft.x0),!h))}else e.lineTo(c+Z,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var PQ=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),q9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new PQ},t.prototype.buildPath=function(r,n){TQ(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(fe);q9.prototype.type="sector";const I0=q9;var EQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),Z9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new EQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,a,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,a,!0)},t}(fe);Z9.prototype.type="ring";const K9=Z9;function AQ(e,t,r,n){var i=[],o=[],a=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)gc(c,c,e[h]),mc(f,f,e[h]);gc(c,c,n[0]),mc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(qq(e[h]));continue}else l=e[h-1],u=e[h+1];U7(o,u,l),my(o,o,t);var v=bS(p,l),g=bS(p,u),m=v+g;m!==0&&(v/=m,g/=m),my(a,o,-v),my(s,o,g);var _=BC([],p,a),y=BC([],p,s);n&&(mc(_,_,c),gc(_,_,f),mc(y,y,c),gc(y,y,f)),i.push(_),i.push(y)}return r&&i.push(i.shift()),i}function J9(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=AQ(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var kQ=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),Q9=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new kQ},t.prototype.buildPath=function(r,n){J9(r,n,!0)},t}(fe);Q9.prototype.type="polygon";const Kd=Q9;var CQ=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),tN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new CQ},t.prototype.buildPath=function(r,n){J9(r,n,!1)},t}(fe);tN.prototype.type="polyline";const eN=tN;var MQ={},xQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),rN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new xQ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=M9(MQ,n,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=n.x1,o=n.y1,a=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),r.lineTo(a,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(fe);rN.prototype.type="line";const Cs=rN;var an=[],LQ=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function YM(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?ZC:or)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?ZC:or)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?KC:Lr)(e.x1,e.cpx1,e.x2,t),(r?KC:Lr)(e.y1,e.cpy1,e.y2,t)]}var nN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new LQ},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Cm(i,l,a,h,an),l=an[1],a=an[2],Cm(o,u,s,h,an),u=an[1],s=an[2]),r.quadraticCurveTo(l,u,a,s)):(h<1&&(km(i,l,c,a,h,an),l=an[1],c=an[2],a=an[3],km(o,u,f,s,h,an),u=an[1],f=an[2],s=an[3]),r.bezierCurveTo(l,u,c,f,a,s)))},t.prototype.pointAt=function(r){return YM(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=YM(this.shape,r,!0);return CP(n,n)},t}(fe);nN.prototype.type="bezier-curve";const q1=nN;var IQ=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),iN=function(e){Ae(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new IQ},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*a+i,f*a+o),r.arc(i,o,a,s,l,!u)},t}(fe);iN.prototype.type="arc";const YP=iN;var OQ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),fe.prototype.getBoundingRect.call(this)},t}(fe);const RQ=OQ;var DQ=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const oN=DQ;var NQ=function(e){Ae(t,e);function t(r,n,i,o,a,s){var l=e.call(this,a)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=s||!1,l}return t}(oN);const qP=NQ;var FQ=function(e){Ae(t,e);function t(r,n,i,o,a){var s=e.call(this,o)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=a||!1,s}return t}(oN);const BQ=FQ;var sl=[0,0],ll=[0,0],Fp=new xe,Bp=new xe,$Q=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new xe;for(var n=0;n<2;n++)this._axes[n]=new xe;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);xe.sub(i[0],n[1],n[0]),xe.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return Fp.set(1/0,1/0),Bp.set(0,0),!this._intersectCheckOneSide(this,t,Fp,Bp,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Fp,Bp,i,-1)&&(n=!1,i)||i||xe.copy(r,n?Fp:Bp),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,sl),this._getProjMinMaxOnAxis(l,r._corners,ll),sl[1]<ll[0]||sl[0]>ll[1]){if(s=!1,o)return s;var c=Math.abs(ll[0]-sl[1]),f=Math.abs(sl[0]-ll[1]);Math.min(c,f)>i.len()&&(c<f?xe.scale(i,u,-c*a):xe.scale(i,u,f*a))}else if(n){var c=Math.abs(ll[0]-sl[1]),f=Math.abs(sl[0]-ll[1]);Math.min(c,f)<n.len()&&(c<f?xe.scale(n,u,c*a):xe.scale(n,u,-f*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,a=r[0].dot(i)+o[t],s=a,l=a,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},e}();const Rm=$Q;var zQ=[],VQ=function(e){Ae(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new ae(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(zQ)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,n))return!0}return!1},t}(fu);const UQ=VQ;var GQ=Oe();function ZP(e,t,r,n,i){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=qt(n.duration,200),c=qt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ut(f)&&(f=f(r,i)),Ut(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function KP(e,t,r,n,i,o,a){var s=!1,l;Ut(i)?(a=o,o=i,i=null):It(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=ZP(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:e,during:a};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function hr(e,t,r,n,i,o){KP("update",e,t,r,n,i,o)}function Ao(e,t,r,n,i,o){KP("enter",e,t,r,n,i,o)}function wd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function tu(e,t,r,n,i,o){wd(e)||KP("leave",e,t,r,n,i,o)}function qM(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),tu(e,{style:{opacity:0}},t,r,n)}function qS(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||qM(i,t,r,n)}):qM(e,t,r,n)}function aN(e){GQ(e).oldStyle=e.style}var Dm=Math.max,Nm=Math.min,ZS={};function jQ(e){return fe.extend(e)}var WQ=gQ;function HQ(e,t){return WQ(e,t)}function zi(e,t){ZS[e]=t}function sN(e){if(ZS.hasOwnProperty(e))return ZS[e]}function Z1(e,t,r,n){var i=vQ(e,t);return r&&(n==="center"&&(r=uN(r,i.getBoundingRect())),cN(i,r)),i}function lN(e,t,r){var n=new Sa({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(uN(t,o))}}});return n}function uN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-n/2,y:a-i/2,width:n,height:i}}var XQ=mQ;function cN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function Jd(e,t){return M9(e,e,{lineWidth:t}),e}function YQ(e){return x9(e.shape,e.shape,e.style),e}var qQ=xl;function Gg(e,t){for(var r=xP([]);e&&e!==t;)xc(r,e.getLocalTransform(),r),e=e.parent;return r}function Ic(e,t,r){return t&&!$r(t)&&(t=Ml.getLocalTransform(t)),r&&(t=G1([],t)),Qr([],e,t)}function fN(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Ic(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function ZM(e){return!e.isGroup}function ZQ(e){return e.shape!=null}function hN(e,t,r){if(!e||!t)return;function n(a){var s={};return a.traverse(function(l){ZM(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return ZQ(a)&&(s.shape=ot({},a.shape)),s}var o=n(e);t.traverse(function(a){if(ZM(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),hr(a,l,r,ie(a).dataIndex)}}})}function KQ(e,t){return kt(e,function(r){var n=r[0];n=Dm(n,t.x),n=Nm(n,t.x+t.width);var i=r[1];return i=Dm(i,t.y),i=Nm(i,t.y+t.height),[n,i]})}function JQ(e,t){var r=Dm(e.x,t.x),n=Nm(e.x+e.width,t.x+t.width),i=Dm(e.y,t.y),o=Nm(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function JP(e,t,r){var n=ot({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),te(i,r),new Sa(n)):Z1(e.replace("path://",""),n,r,"center")}function QQ(e,t,r,n,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(dN(e,t,r,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function dN(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=r2(c,f,l,u);if(ttt(h))return!1;var d=e-i,p=t-o,v=r2(d,p,l,u)/h;if(v<0||v>1)return!1;var g=r2(d,p,c,f)/h;return!(g<0||g>1)}function r2(e,t,r,n){return e*n-r*t}function ttt(e){return e<=1e-6&&e>=-1e-6}function QP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Et(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&F(ve(l),function(c){ht(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=ie(e.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:n,option:te({content:n,formatterParams:s},i)}}function KM(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function hf(e,t){if(e)if(ct(e))for(var r=0;r<e.length;r++)KM(e[r],t);else KM(e,t)}zi("circle",XP);zi("ellipse",X9);zi("sector",I0);zi("ring",K9);zi("polygon",Kd);zi("polyline",eN);zi("rect",Ke);zi("line",Cs);zi("bezierCurve",q1);zi("arc",YP);const ett=Object.freeze(Object.defineProperty({__proto__:null,updateProps:hr,initProps:Ao,removeElement:tu,removeElementWithFadeOut:qS,isElementRemoved:wd,extendShape:jQ,extendPath:HQ,registerShape:zi,getShapeClass:sN,makePath:Z1,makeImage:lN,mergePath:XQ,resizePath:cN,subPixelOptimizeLine:Jd,subPixelOptimizeRect:YQ,subPixelOptimize:qQ,getTransform:Gg,applyTransform:Ic,transformDirection:fN,groupTransition:hN,clipPointsByRect:KQ,clipRectByRect:JQ,createIcon:JP,linePolygonIntersect:QQ,lineLineIntersect:dN,setTooltipConfig:QP,traverseElements:hf,Group:De,Image:Sa,Text:Je,Circle:XP,Ellipse:X9,Sector:I0,Ring:K9,Polygon:Kd,Polyline:eN,Rect:Ke,Line:Cs,BezierCurve:q1,Arc:YP,IncrementalDisplayable:UQ,CompoundPath:RQ,LinearGradient:qP,RadialGradient:BQ,BoundingRect:ae,OrientedBoundingRect:Rm,Point:xe,Path:fe},Symbol.toStringTag,{value:"Module"}));var K1={};function rtt(e,t){for(var r=0;r<ei.length;r++){var n=ei[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function JM(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Ut(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:s},u=0;u<ei.length;u++){var c=ei[u],f=t[c];l[c]=qt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function df(e,t,r,n){r=r||K1;for(var i=e instanceof Je,o=!1,a=0;a<RM.length;a++){var s=t[RM[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new Je,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=JM(r,t),c=t.normal,f=!!c.getShallow("show"),h=pn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig(Fm(c,r,!1));for(var a=0;a<ei.length;a++){var d=ei[a],s=t[d];if(s){var p=l.ensureState(d),v=!!qt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=pn(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var g=e.ensureState(d);g.textConfig=Fm(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(J1(l).setLabelText=function(m){var _=JM(r,t,m);rtt(l,_)})}else l&&(l.ignore=!0);e.dirty()}function hu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<ei.length;n++){var i=ei[n];r[i]=e.getModel([i,t])}return r}function pn(e,t,r,n,i){var o={};return ntt(o,e,r,n,i),t&&ot(o,t),o}function Fm(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),a=qt(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),o!=null&&(o*=Math.PI/180,n.rotation=o),a!=null&&(n.distance=a),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function ntt(e,t,r,n,i){r=r||K1;var o=t.ecModel,a=o&&o.option.textStyle,s=itt(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);r4(l[u]={},c,a,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),r4(e,t,a,r,n,i,!0,!1)}function itt(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||K1).rich;if(r){t=t||{};for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var QM=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],t4=["align","lineHeight","width","height","tag","verticalAlign"],e4=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function r4(e,t,r,n,i,o,a,s){r=!i&&r||K1;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=qt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=qt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=qt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=qt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<QM.length;v++){var g=QM[v],m=qt(t.getShallow(g),r[g]);m!=null&&(e[g]=m)}for(var v=0;v<t4.length;v++){var g=t4[v],m=t.getShallow(g);m!=null&&(e[g]=m)}if(e.verticalAlign==null){var _=t.getShallow("baseline");_!=null&&(e.verticalAlign=_)}if(!a||!n.disableBox){for(var v=0;v<e4.length;v++){var g=e4[v],m=t.getShallow(g);m!=null&&(e[g]=m)}var y=t.getShallow("borderType");y!=null&&(e.borderDash=y),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function pN(e,t){var r=t&&t.getModel("textStyle");return _o([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var J1=Oe();function ott(e,t,r,n){if(!!e){var i=J1(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var att=["textStyle","color"],n2=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],i2=new Je,stt=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(att):null)},e.prototype.getFont=function(){return pN({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<n2.length;n++)r[n2[n]]=this.getShallow(n2[n]);return i2.useStyle(r),i2.update(),i2.getBoundingRect()},e}();const ltt=stt;var vN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],utt=Xd(vN),ctt=function(){function e(){}return e.prototype.getLineStyle=function(t){return utt(this,t)},e}(),gN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ftt=Xd(gN),htt=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return ftt(this,t,r)},e}(),du=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){oe(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(zt(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Xt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();$P(du);XK(du);Bi(du,ctt);Bi(du,htt);Bi(du,JK);Bi(du,ltt);const Sr=du;var dtt=Math.round(Math.random()*10);function Q1(e){return[e||"",dtt++].join("_")}function ptt(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=bo(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=bo(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function vtt(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=r(a),c=u.graph,f=u.noEntryList,h={};for(F(o,function(_){h[_]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),F(p.successor,v?m:g)}F(h,function(){var _="";throw new Error(_)});function g(_){c[_].entryCount--,c[_].entryCount===0&&f.push(_)}function m(_){h[_]=!0,g(_)}};function r(o){var a={},s=[];return F(o,function(l){var u=n(a,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),F(f,function(h){ue(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(a,h);ue(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function n(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return F(o,function(l){ue(a,l)>=0&&s.push(l)}),s}}function t_(e,t){return oe(oe({},e,!0),t,!0)}const gtt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},mtt={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var Bm="ZH",tE="EN",Qd=tE,jg={},eE={},mN=Xt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Bm)>-1?Bm:Qd}():Qd;function _N(e,t){e=e.toUpperCase(),eE[e]=new Sr(t),jg[e]=t}function _tt(e){if(Et(e)){var t=jg[e.toUpperCase()]||{};return e===Bm||e===tE?zt(t):oe(zt(t),zt(jg[Qd]),!1)}else return oe(zt(e),zt(jg[Qd]),!1)}function ytt(e){return eE[e]}function btt(){return eE[Qd]}_N(tE,gtt);_N(Bm,mtt);var rE=1e3,nE=rE*60,Sd=nE*60,qn=Sd*24,n4=qn*365,Zh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},$p="{yyyy}-{MM}-{dd}",i4={year:"{yyyy}",month:"{yyyy}-{MM}",day:$p,hour:$p+" "+Zh.hour,minute:$p+" "+Zh.minute,second:$p+" "+Zh.second,millisecond:Zh.none},o2=["year","month","day","hour","minute","second","millisecond"],yN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function ul(e,t){return e+="","0000".substr(0,t-e.length)+e}function Oc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function wtt(e){return e===Oc(e)}function Stt(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function e_(e,t,r,n){var i=pa(e),o=i[iE(r)](),a=i[Rc(r)]()+1,s=Math.floor((a-1)/3)+1,l=i[r_(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[t0(r)](),f=(c-1)%12+1,h=i[n_(r)](),d=i[i_(r)](),p=i[o_(r)](),v=n instanceof Sr?n:ytt(n||mN)||btt(),g=v.getModel("time"),m=g.get("month"),_=g.get("monthAbbr"),y=g.get("dayOfWeek"),w=g.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,_[a-1]).replace(/{MM}/g,ul(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,ul(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,y[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,ul(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,ul(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,ul(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,ul(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,ul(p,3)).replace(/{S}/g,p+"")}function Ttt(e,t,r,n,i){var o=null;if(Et(r))o=r;else if(Ut(r))o=r(e.value,t,{level:e.level});else{var a=ot({},Zh);if(e.level>0)for(var s=0;s<o2.length;++s)a[o2[s]]="{primary|"+a[o2[s]]+"}";var l=r?r.inherit===!1?r:te(r,a):a,u=bN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=yN.indexOf(u),s=c-1;s>=0;--s)if(l[u]){o=l[u];break}o=o||a.none}if(ct(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return e_(new Date(e.value),o,i,n)}function bN(e,t){var r=pa(e),n=r[Rc(t)]()+1,i=r[r_(t)](),o=r[t0(t)](),a=r[n_(t)](),s=r[i_(t)](),l=r[o_(t)](),u=l===0,c=u&&s===0,f=c&&a===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function o4(e,t,r){var n=we(e)?pa(e):e;switch(t=t||bN(e,r),t){case"year":return n[iE(r)]();case"half-year":return n[Rc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Rc(r)]()+1)/4);case"month":return n[Rc(r)]();case"day":return n[r_(r)]();case"half-day":return n[t0(r)]()/24;case"hour":return n[t0(r)]();case"minute":return n[n_(r)]();case"second":return n[i_(r)]();case"millisecond":return n[o_(r)]()}}function iE(e){return e?"getUTCFullYear":"getFullYear"}function Rc(e){return e?"getUTCMonth":"getMonth"}function r_(e){return e?"getUTCDate":"getDate"}function t0(e){return e?"getUTCHours":"getHours"}function n_(e){return e?"getUTCMinutes":"getMinutes"}function i_(e){return e?"getUTCSeconds":"getSeconds"}function o_(e){return e?"getUTCMilliseconds":"getMilliseconds"}function Ptt(e){return e?"setUTCFullYear":"setFullYear"}function wN(e){return e?"setUTCMonth":"setMonth"}function SN(e){return e?"setUTCDate":"setDate"}function TN(e){return e?"setUTCHours":"setHours"}function PN(e){return e?"setUTCMinutes":"setMinutes"}function EN(e){return e?"setUTCSeconds":"setSeconds"}function AN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function kN(e){if(!EK(e))return Et(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function CN(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var O0=B7;function KS(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&_o(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?pa(e):e;if(isNaN(+l)){if(s)return"-"}else return e_(l,n,r)}if(t==="ordinal")return _S(e)?i(e):we(e)&&o(e)?e+"":"-";var u=ks(e);return o(u)?kN(u):_S(e)?i(e):typeof e=="boolean"?e+"":"-"}var a4=["a","b","c","d","e","f","g"],a2=function(e,t){return"{"+e+(t==null?"":t)+"}"};function MN(e,t,r){ct(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var a=a4[o];e=e.replace(a2(a),a2(a,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(a2(a4[l],s),r?Xn(u):u)}return e}function Ett(e,t){var r=Et(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Xn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Xn(n)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function eu(e,t){return t=t||"transparent",Et(e)?e:It(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function s4(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Wg=F,Att=["left","right","top","bottom","width","height"],zp=[["width","left","right"],["height","top","bottom"]];function oE(e,t,r,n,i){var o=0,a=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,a+=s+r,s=c.height):s=Math.max(s,c.height)}else{var g=c.height+(h?-h.y+c.y:0);p=a+g,p>i||l.newline?(o+=s+r,a=0,p=g,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=d+r:a=p+r)})}var Dc=oE;be(oE,"vertical");be(oE,"horizontal");function Ms(e,t,r){r=O0(r||0);var n=t.width,i=t.height,o=We(e.left,n),a=We(e.top,i),s=We(e.right,n),l=We(e.bottom,i),u=We(e.width,n),c=We(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-s-u-h),isNaN(a)&&(a=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":a=i/2-c/2-r[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=n-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var p=new ae(o+r[3],a+r[0],u,c);return p.margin=r,p}function ktt(e,t,r,n,i,o){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new ae(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ms(te({width:u.width,height:u.height},t),r,n),h=a?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function e0(e){var t=e.layoutMode||e.constructor.layoutMode;return It(t)?t:t?{type:t}:null}function Xc(e,t,r){var n=r&&r.ignoreSize;!ct(n)&&(n=[n,n]);var i=a(zp[0],0),o=a(zp[1],1);u(zp[0],e,i),u(zp[1],e,o);function a(c,f){var h={},d=0,p={},v=0,g=2;if(Wg(c,function(y){p[y]=e[y]}),Wg(c,function(y){s(t,y)&&(h[y]=p[y]=t[y]),l(h,y)&&d++,l(p,y)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===g||!d)return p;if(d>=g)return h;for(var m=0;m<c.length;m++){var _=c[m];if(!s(h,_)&&s(e,_)){h[_]=e[_];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){Wg(c,function(d){f[d]=h[d]})}}function a_(e){return Ctt({},e)}function Ctt(e,t){return t&&e&&Wg(Att,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var Mtt=Oe(),pf=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=Q1("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=e0(this),o=i?a_(r):{},a=n.getTheme();oe(r,a.get(this.mainType)),oe(r,this.getDefaultOption()),i&&Xc(r,o,i)},t.prototype.mergeOption=function(r,n){oe(this.option,r,!0);var i=e0(this);i&&Xc(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!jK(r))return r.defaultOption;var n=Mtt(this);if(!n.defaultOption){for(var i=[],o=r;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=oe(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return x0(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Sr);b9(pf,Sr);j1(pf);ptt(pf);vtt(pf,xtt);function xtt(e){var t=[];return F(pf.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=kt(t,function(r){return bo(r).main}),e!=="dataset"&&ue(t,"dataset")<=0&&t.unshift("dataset"),t}const Ce=pf;var xN="";typeof navigator<"u"&&(xN=navigator.platform||"");var $u="rgba(0, 0, 0, 0.2)";const Ltt={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:$u,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:$u,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:$u,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:$u,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:$u,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:$u,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:xN.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var LN=jt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),ii="original",en="arrayRows",Vi="objectRows",Pa="keyedColumns",bs="typedArray",IN="unknown",So="column",vf="row",wn={Must:1,Might:2,Not:3},ON=Oe();function Itt(e){ON(e).datasetMap=jt()}function Ott(e,t,r){var n={},i=RN(t);if(!i||!e)return n;var o=[],a=[],s=t.ecModel,l=ON(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),F(e,function(v,g){var m=It(v)?v:e[g]={name:v};m.type==="ordinal"&&c==null&&(c=g,f=p(m)),n[m.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});F(e,function(v,g){var m=v.name,_=p(v);if(c==null){var y=h.valueWayDim;d(n[m],y,_),d(a,y,_),h.valueWayDim+=_}else if(c===g)d(n[m],0,_),d(o,0,_);else{var y=h.categoryWayDim;d(n[m],y,_),d(a,y,_),h.categoryWayDim+=_}});function d(v,g,m){for(var _=0;_<m;_++)v.push(g+_)}function p(v){var g=v.dimsDef;return g?g.length:1}return o.length&&(n.itemName=o),a.length&&(n.seriesName=a),n}function RN(e){var t=e.get("data",!0);if(!t)return x0(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Si).models[0]}function Rtt(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:x0(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Si).models}function DN(e,t){return Dtt(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function Dtt(e,t,r,n,i,o){var a,s=5;if(xn(e))return wn.Not;var l,u;if(n){var c=n[o];It(c)?(l=c.name,u=c.type):Et(c)&&(l=c)}if(u!=null)return u==="ordinal"?wn.Must:wn.Not;if(t===en){var f=e;if(r===vf){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=w(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(a=w(p[o]))!=null)return a}}else if(t===Vi){var v=e;if(!l)return wn.Not;for(var d=0;d<v.length&&d<s;d++){var g=v[d];if(g&&(a=w(g[l]))!=null)return a}}else if(t===Pa){var m=e;if(!l)return wn.Not;var h=m[l];if(!h||xn(h))return wn.Not;for(var d=0;d<h.length&&d<s;d++)if((a=w(h[d]))!=null)return a}else if(t===ii)for(var _=e,d=0;d<_.length&&d<s;d++){var g=_[d],y=M0(g);if(!ct(y))return wn.Not;if((a=w(y[o]))!=null)return a}function w(T){var S=Et(T);if(T!=null&&isFinite(T)&&T!=="")return S?wn.Might:wn.Not;if(S&&T!=="-")return wn.Must}return wn.Not}var Ntt=jt();function Ftt(e,t,r){var n=Ntt.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var l4=Oe();Oe();var aE=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Ze(this.get("color",!0)),o=this.get("colorLayer",!0);return $tt(this,l4,i,o,t,r,n)},e.prototype.clearColorPalette=function(){ztt(this,l4)},e}();function Btt(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function $tt(e,t,r,n,i,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!n?r:Btt(n,a);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function ztt(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var Vp,rh,u4,c4="\0_ec_inner",Vtt=1,NN=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,a,s){o=o||{},this.option=null,this._theme=new Sr(o),this._locale=new Sr(a),this._optionManager=s},t.prototype.setOption=function(r,n,i){var o=d4(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,d4(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?u4(this,a):(this.restoreData(),this._mergeOption(a,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&F(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=jt(),u=n&&n.replaceMergeMainTypeMap;Itt(this),F(r,function(f,h){f!=null&&(Ce.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?zt(f):oe(i[h],f,!0))}),u&&u.each(function(f,h){Ce.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Ce.topologicalTravel(s,Ce.getAllClassMainTypes(),c,this);function c(f){var h=Ftt(this,f,Ze(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=CK(d,h,p);DK(v,f,Ce),i[f]=null,o.set(f,null),a.set(f,0);var g=[],m=[],_=0,y;F(v,function(w,T){var S=w.existing,P=w.newOption;if(!P)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var k=f==="series",A=Ce.getClass(f,w.keyInfo.subType,!k);if(!A)return;if(f==="tooltip"){if(y)return;y=!0}if(S&&S.constructor===A)S.name=w.keyInfo.name,S.mergeOption(P,this),S.optionUpdated(P,!1);else{var C=ot({componentIndex:T},w.keyInfo);S=new A(P,this,this,C),ot(S,C),w.brandNew&&(S.__requireNewView=!0),S.init(P,this,this),S.optionUpdated(null,!0)}}S?(g.push(S.option),m.push(S),_++):(g.push(void 0),m.push(void 0))},this),i[f]=g,o.set(f,m),a.set(f,_),f==="series"&&Vp(this)}this._seriesIndices||Vp(this)},t.prototype.getOption=function(){var r=zt(this.option);return F(r,function(n,i){if(Ce.hasClass(i)){for(var o=Ze(n),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Hd(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[i]=o}}),delete r[c4],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,a=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],F(Ze(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=f4("id",o,s):a!=null?l=f4("name",a,s):l=yr(s,function(u){return!!u}),h4(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=s(n),a=o?this.queryComponents(o):yr(this._componentsMap.get(i),function(u){return!!u});return l(h4(a,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?yr(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ut(r)){var a=n,s=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(a,h,p,p.componentIndex)}})}else for(var l=Et(r)?o.get(r):It(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=Kn(r,null);return yr(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return yr(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return yr(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){rh(this),F(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){F(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){rh(this),F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&n.call(i,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return F(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return rh(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){rh(this);var i=[];F(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(n,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=jt(i)},t.prototype.restoreData=function(r){Vp(this);var n=this._componentsMap,i=[];n.each(function(o,a){Ce.hasClass(a)&&i.push(a)}),Ce.topologicalTravel(i,Ce.getAllClassMainTypes(),function(o){F(n.get(o),function(a){a&&(o!=="series"||!Utt(a,r))&&a.restoreData()})})},t.internalField=function(){Vp=function(r){var n=r._seriesIndices=[];F(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=jt(n)},rh=function(r){},u4=function(r,n){r.option={},r.option[c4]=Vtt,r._componentsMap=jt({series:[]}),r._componentsCount=jt();var i=n.aria;It(i)&&i.enabled==null&&(i.enabled=!0),Gtt(n,r._theme.option),oe(n,Ltt,!1),r._mergeOption(n,null)}}(),t}(Sr);function Utt(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function Gtt(e,t){var r=e.color&&!e.colorLayer;F(t,function(n,i){i==="colorLayer"&&r||Ce.hasClass(i)||(typeof n=="object"?e[i]=e[i]?oe(e[i],n,!1):zt(n):e[i]==null&&(e[i]=n))})}function f4(e,t,r){if(ct(t)){var n=jt();return F(t,function(o){if(o!=null){var a=Kn(o,null);a!=null&&n.set(o,!0)}}),yr(r,function(o){return o&&n.get(o[e])})}else{var i=Kn(t,null);return yr(r,function(o){return o&&i!=null&&o[e]===i})}}function h4(e,t){return t.hasOwnProperty("subType")?yr(e,function(r){return r&&r.subType===t.subType}):e}function d4(e){var t=jt();return e&&F(Ze(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Bi(NN,aE);const FN=NN;var jtt=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],Wtt=function(){function e(t){F(jtt,function(r){this[r]=Vt(t[r],t)},this)}return e}();const BN=Wtt;var s2={},Htt=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];F(s2,function(i,o){var a=i.create(t,r);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){F(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){s2[t]=r},e.get=function(t){return s2[t]},e}();const sE=Htt;var Xtt=/^(min|max)?(.+)$/,Ytt=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&(F(Ze(t.series),function(a){a&&a.data&&xn(a.data)&&Pm(a.data)}),F(Ze(t.dataset),function(a){a&&a.source&&xn(a.source)&&Pm(a.source)})),t=zt(t);var i=this._optionBackup,o=qtt(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],zt(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=zt(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)Ztt(i[l].query,r,n)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!Jtt(a,this._currentMediaIndices)&&(s=kt(a,function(c){return zt(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},e}();function qtt(e,t,r){var n=[],i,o,a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(e.options=e.media=null),o=e),c&&ct(u)&&F(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),F(l,function(d){return h(d)}),F(n,function(d){return h(d.option)});function h(d){F(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function Ztt(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return F(e,function(o,a){var s=a.match(Xtt);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();Ktt(n[u],o,l)||(i=!1)}}),i}function Ktt(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Jtt(e,t){return e.join(",")===t.join(",")}const Qtt=Ytt;var si=F,r0=It,p4=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function l2(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=p4.length;r<n;r++){var i=p4[r],o=t.normal,a=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?oe(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),a&&a[i]&&(e[i]=e[i]||{},e[i].emphasis?oe(e[i].emphasis,a[i]):e[i].emphasis=a[i],a[i]=null)}}function Ir(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,te(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Kh(e){Ir(e,"itemStyle"),Ir(e,"lineStyle"),Ir(e,"areaStyle"),Ir(e,"label"),Ir(e,"labelLine"),Ir(e,"upperLabel"),Ir(e,"edgeLabel")}function Xe(e,t){var r=r0(e)&&e[t],n=r0(r)&&r.textStyle;if(n)for(var i=0,o=vM.length;i<o;i++){var a=vM[i];n.hasOwnProperty(a)&&(r[a]=n[a])}}function jn(e){e&&(Kh(e),Xe(e,"label"),e.emphasis&&Xe(e.emphasis,"label"))}function tet(e){if(!!r0(e)){l2(e),Kh(e),Xe(e,"label"),Xe(e,"upperLabel"),Xe(e,"edgeLabel"),e.emphasis&&(Xe(e.emphasis,"label"),Xe(e.emphasis,"upperLabel"),Xe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(l2(t),jn(t));var r=e.markLine;r&&(l2(r),jn(r));var n=e.markArea;n&&jn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!xn(o))for(var a=0;a<o.length;a++)jn(o[a]);F(e.categories,function(u){Kh(u)})}if(i&&!xn(i))for(var a=0;a<i.length;a++)jn(i[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)jn(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)ct(l[a])?(jn(l[a][0]),jn(l[a][1])):jn(l[a]);e.type==="gauge"?(Xe(e,"axisLabel"),Xe(e,"title"),Xe(e,"detail")):e.type==="treemap"?(Ir(e.breadcrumb,"itemStyle"),F(e.levels,function(u){Kh(u)})):e.type==="tree"&&Kh(e.leaves)}}function Uo(e){return ct(e)?e:e?[e]:[]}function v4(e){return(ct(e)?e[0]:e)||{}}function eet(e,t){si(Uo(e.series),function(n){r0(n)&&tet(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),si(r,function(n){si(Uo(e[n]),function(i){i&&(Xe(i,"axisLabel"),Xe(i.axisPointer,"label"))})}),si(Uo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;Xe(i,"axisLabel"),Xe(i&&i.axisPointer,"label")}),si(Uo(e.calendar),function(n){Ir(n,"itemStyle"),Xe(n,"dayLabel"),Xe(n,"monthLabel"),Xe(n,"yearLabel")}),si(Uo(e.radar),function(n){Xe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),si(Uo(e.geo),function(n){r0(n)&&(jn(n),si(Uo(n.regions),function(i){jn(i)}))}),si(Uo(e.timeline),function(n){jn(n),Ir(n,"label"),Ir(n,"itemStyle"),Ir(n,"controlStyle",!0);var i=n.data;ct(i)&&F(i,function(o){It(o)&&(Ir(o,"label"),Ir(o,"itemStyle"))})}),si(Uo(e.toolbox),function(n){Ir(n,"iconStyle"),si(n.feature,function(i){Ir(i,"iconStyle")})}),Xe(v4(e.axisPointer),"label"),Xe(v4(e.tooltip).axisPointer,"label")}function ret(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function net(e,t,r,n){for(var i=t.split(","),o=e,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(n||o[i[s]]==null)&&(o[i[s]]=r)}function g4(e){e&&F(iet,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var iet=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],oet=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],u2=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function nh(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<u2.length;r++){var n=u2[r][1],i=u2[r][0];t[n]!=null&&(t[i]=t[n])}}function m4(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function _4(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function aet(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function $N(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&$N(e[r].children,t)}function zN(e,t){eet(e,t),e.series=Ze(e.series),F(e.series,function(r){if(!!It(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),m4(r.label);var i=r.data;if(i&&!xn(i))for(var o=0;o<i.length;o++)m4(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var a=ret(r,"pointer.color");a!=null&&net(r,"itemStyle.color",a)}else if(n==="bar"){nh(r),nh(r.backgroundStyle),nh(r.emphasis);var i=r.data;if(i&&!xn(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(nh(i[o]),nh(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),_4(r),$N(r.data,_4)}else n==="graph"||n==="sankey"?aet(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&te(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),g4(r)}}),e.dataRange&&(e.visualMap=e.dataRange),F(oet,function(r){var n=e[r];n&&(ct(n)||(n=[n]),F(n,function(i){g4(i)}))})}function set(e){var t=jt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),t.each(uet)}function uet(e){F(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=a.getRawIndex(f):d=a.get(t.stackedByDimension,f);for(var v=NaN,g=r-1;g>=0;g--){var m=e[g];if(s||(p=m.data.rawIndexOf(m.stackedByDimension,d)),p>=0){var _=m.data.getByRawIndex(m.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&h>=0&&_>0||l==="samesign"&&h<=0&&_<0){h=SK(h,_),v=_;break}}}return n[0]=h,n[1]=v,n})})}var s_=function(){function e(t){this.data=t.data||(t.sourceFormat===Pa?{}:[]),this.sourceFormat=t.sourceFormat||IN,this.seriesLayoutBy=t.seriesLayoutBy||So,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&DN(this,n)===wn.Must&&(i.type="ordinal")}}return e}();function lE(e){return e instanceof s_}function JS(e,t,r){r=r||VN(e);var n=t.seriesLayoutBy,i=fet(e,r,n,t.sourceHeader,t.dimensions),o=new s_({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:zt(t)});return o}function uE(e){return new s_({data:e,sourceFormat:xn(e)?bs:ii})}function cet(e){return new s_({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:zt(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function VN(e){var t=IN;if(xn(e))t=bs;else if(ct(e)){e.length===0&&(t=en);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(ct(i)){t=en;break}else if(It(i)){t=Vi;break}}}}else if(It(e)){for(var o in e)if(ht(e,o)&&$r(e[o])){t=Pa;break}}return t}function fet(e,t,r,n,i){var o,a;if(!e)return{dimensionsDefine:y4(i),startIndex:a,dimensionsDetectedCount:o};if(t===en){var s=e;n==="auto"||n==null?b4(function(u){u!=null&&u!=="-"&&(Et(u)?a==null&&(a=1):a=0)},r,s,10):a=we(n)?n:n?1:0,!i&&a===1&&(i=[],b4(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),o=i?i.length:r===vf?s.length:s[0]?s[0].length:null}else if(t===Vi)i||(i=het(e));else if(t===Pa)i||(i=[],F(e,function(u,c){i.push(c)}));else if(t===ii){var l=M0(e[0]);o=ct(l)&&l.length||1}return{startIndex:a,dimensionsDefine:y4(i),dimensionsDetectedCount:o}}function het(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return F(r,function(i,o){n.push(o)}),n}}function y4(e){if(!!e){var t=jt();return kt(e,function(r,n){r=It(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function b4(e,t,r,n){if(t===vf)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function UN(e){var t=e.sourceFormat;return t===Vi||t===Pa}var cl,fl,hl,w4,S4,GN=function(){function e(t,r){var n=lE(t)?t:uE(t);this._source=n;var i=this._data=n.data;n.sourceFormat===bs&&(this._offset=0,this._dimSize=r,this._data=i),S4(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;S4=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=w4[cE(u,c)];if(ot(a,d),u===bs)a.getItem=r,a.count=i,a.fillStorage=n;else{var p=jN(u,c);a.getItem=Vt(p,null,s,f,h);var v=WN(u,c);a.count=Vt(v,null,s,f,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],g=s-a,m=l[h],_=0;_<g;_++){var y=c[_*f+h];m[a+_]=y,y<p&&(p=y),y>v&&(v=y)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};w4=(t={},t[en+"_"+So]={pure:!0,appendData:o},t[en+"_"+vf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Vi]={pure:!0,appendData:o},t[Pa]={pure:!0,appendData:function(a){var s=this._data;F(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[ii]={appendData:o},t[bs]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}(),T4=function(e,t,r,n){return e[n]},det=(cl={},cl[en+"_"+So]=function(e,t,r,n){return e[n+t]},cl[en+"_"+vf]=function(e,t,r,n,i){n+=t;for(var o=i||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[n]:null}return o},cl[Vi]=T4,cl[Pa]=function(e,t,r,n,i){for(var o=i||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[n]:null}return o},cl[ii]=T4,cl);function jN(e,t){var r=det[cE(e,t)];return r}var P4=function(e,t,r){return e.length},pet=(fl={},fl[en+"_"+So]=function(e,t,r){return Math.max(0,e.length-t)},fl[en+"_"+vf]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},fl[Vi]=P4,fl[Pa]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},fl[ii]=P4,fl);function WN(e,t){var r=pet[cE(e,t)];return r}var c2=function(e,t,r){return e[t]},vet=(hl={},hl[en]=c2,hl[Vi]=function(e,t,r){return e[r]},hl[Pa]=c2,hl[ii]=function(e,t,r){var n=M0(e);return n instanceof Array?n[t]:n},hl[bs]=c2,hl);function HN(e){var t=vet[e];return t}function cE(e,t){return e===en?e+"_"+t:e}function Yc(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=i.getDimensionProperty(a);return HN(o)(n,a,s)}else{var l=n;return o===ii&&(l=M0(n)),l}}}}var get=/\{@(.+?)\}/g,XN=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,a){r=r||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),i!=null&&ct(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ut(o))return l.status=r,l.dimensionIndex=i,o(l);if(Et(o)){var c=MN(o,l);return c.replace(get,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=Yc(s,t,p);if(a&&ct(a.interpolatedValue)){var g=s.getDimensionIndex(p);g>=0&&(v=a.interpolatedValue[g])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return Yc(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function E4(e){var t,r;return It(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function Td(e){return new met(e)}var met=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(_){return!(_>=1)&&(_=1),_}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(ct(v))for(var g=0;g<v.length;g++)this._doProgress(v[g],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var m=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){A4.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:A4.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),ct(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),A4=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function ws(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!we(e)&&e!=null&&e!=="-"&&(e=+pa(e)),e==null||e===""?NaN:+e)}var _et=jt({number:function(e){return parseFloat(e)},time:function(e){return+pa(e)},trim:function(e){return Et(e)?_o(e):e}});function YN(e){return _et.get(e)}var qN={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},yet=function(){function e(t,r){if(!we(r)){var n="";ne(n)}this._opFn=qN[t],this._rvalFloat=ks(r)}return e.prototype.evaluate=function(t){return we(t)?this._opFn(t,this._rvalFloat):this._opFn(ks(t),this._rvalFloat)},e}(),ZN=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=we(t)?t:ks(t),i=we(r)?r:ks(r),o=isNaN(n),a=isNaN(i);if(o&&(n=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Et(t),l=Et(r);s&&(n=l?t:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),bet=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=ks(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=ks(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function wet(e,t){return e==="eq"||e==="ne"?new bet(e==="eq",t):ht(qN,e)?new yet(e,t):null}var Tet=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return ws(t,r)},e}();function Pet(e,t){var r=new Tet,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==So&&ne(a);var s=[],l={},u=e.dimensionsDefine;if(u)F(u,function(v,g){var m=v.name,_={index:g,name:m,displayName:v.displayName};if(s.push(_),m!=null){var y="";ht(l,m)&&ne(y),l[m]=_}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var f=jN(i,So);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,s,v)},r.getRawData=Vt(Eet,null,e)),r.cloneRawData=Vt(Aet,null,e);var h=WN(i,So);r.count=Vt(h,null,n,o,s);var d=HN(i);r.retrieveValue=function(v,g){var m=f(n,o,s,v);return p(m,g)};var p=r.retrieveValueFromItem=function(v,g){if(v!=null){var m=s[g];if(m)return d(v,g,m.name)}};return r.getDimensionInfo=Vt(ket,null,s,l),r.cloneAllDimensionInfo=Vt(Cet,null,s),r}function Eet(e){var t=e.sourceFormat;if(!fE(t)){var r="";ne(r)}return e.data}function Aet(e){var t=e.sourceFormat,r=e.data;if(!fE(t)){var n="";ne(n)}if(t===en){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].slice());return i}else if(t===Vi){for(var i=[],o=0,a=r.length;o<a;o++)i.push(ot({},r[o]));return i}}function ket(e,t,r){if(r!=null){if(we(r)||!isNaN(r)&&!ht(t,r))return e[r];if(ht(t,r))return t[r]}}function Cet(e){return zt(e)}var KN=jt();function Met(e){e=zt(e);var t=e.type,r="";t||ne(r);var n=t.split(":");n.length!==2&&ne(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,KN.set(t,e)}function xet(e,t,r){var n=Ze(e),i=n.length,o="";i||ne(o);for(var a=0,s=i;a<s;a++){var l=n[a];t=Let(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function Let(e,t,r,n){var i="";t.length||ne(i),It(e)||ne(i);var o=e.type,a=KN.get(o);a||ne(i);var s=kt(t,function(u){return Pet(u,a)}),l=Ze(a.transform({upstream:s[0],upstreamList:s,config:zt(e.config)}));return kt(l,function(u,c){var f="";It(u)||ne(f),u.data||ne(f);var h=VN(u.data);fE(h)||ne(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:So,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:So,sourceHeader:0,dimensions:u.dimensions};return JS(u.data,d,null)})}function fE(e){return e===en||e===Vi}var l_="undefined",Iet=typeof Uint32Array===l_?Array:Uint32Array,Oet=typeof Uint16Array===l_?Array:Uint16Array,JN=typeof Int32Array===l_?Array:Int32Array,k4=typeof Float64Array===l_?Array:Float64Array,QN={float:k4,int:JN,ordinal:Array,number:Array,time:k4},f2;function ih(e){return e>65535?Iet:Oet}function zu(){return[1/0,-1/0]}function Ret(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function C4(e,t,r,n,i){var o=QN[r||"float"];if(i){var a=e[t],s=a&&a.length;if(s!==n){for(var l=new o(n),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new o(n)}var Det=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=f2[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],UN(i),this._dimensions=kt(r,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new QN[r||"float"](this._rawCount),this._rawExtent[o]=zu(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,a=i.ordinalOffset||0,s=n.length;a===0&&(o[t]=zu());for(var l=o[t],u=a;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];C4(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<o;p++){var c=i[p],v=f2.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var g=a[p];v<g[0]&&(g[0]=v),v>g[1]&&(g[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=kt(a,function(_){return _.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=zu()),C4(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=o[p],g=this._dimValueGetter(h,u[p],d,p);v[d]=g;var m=l[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,a=i.length;o<a;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var a=this.get(t,i);isNaN(a)||(n+=a)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(r[a]<t)i=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],a=[];if(!o)return a;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=ih(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=ih(n._rawCount),a=new o(i),s=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var g=0;g<l;g++)s[g]=f[t[g]][p];s[g]=h,d=r.apply(null,s)}d&&(a[u++]=p)}return u<i&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ve(t),o=i.length;if(!o)return this;var a=r.count(),s=ih(r._rawCount),l=new s(a),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var g=d[i[0]],m=0;m<n;m++){var _=g[m];(_>=f&&_<=h||isNaN(_))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var g=d[i[0]],y=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],m=0;m<n;m++){var _=g[m],S=y[m];(_>=f&&_<=h||isNaN(_))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var m=0;m<a;m++){var P=r.getRawIndex(m),_=d[i[0]][P];(_>=f&&_<=h||isNaN(_))&&(l[u++]=P)}else for(var m=0;m<a;m++){for(var k=!0,P=r.getRawIndex(m),A=0;A<o;A++){var C=i[A],_=d[C][P];(_<t[C][0]||_>t[C][1])&&(k=!1)}k&&(l[u++]=r.getRawIndex(m))}return u<a&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],a=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=zu();for(var f=0;f<s;f++){for(var h=t.getRawIndex(f),d=0;d<a;d++)l[d]=i[r[d]][h];l[a]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],g=p[c],m=u[v],_=i[v];_&&(_[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],a=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(ih(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var p=1;p<a-1;p+=l){for(var v=Math.min(p+l,a-1),g=Math.min(p+l*2,a),m=(g+v)/2,_=0,y=v;y<g;y++){var w=this.getRawIndex(y),T=o[w];isNaN(T)||(_+=T)}_/=g-v;var S=p,P=Math.min(p+l,a),k=p-1,A=o[u];c=-1,h=S;for(var C=-1,M=0,y=S;y<P;y++){var w=this.getRawIndex(y),T=o[w];if(isNaN(T)){M++,C<0&&(C=w);continue}f=Math.abs((k-m)*(T-A)-(k-y)*(_-A)),f>c&&(c=f,h=w)}M>0&&M<P-S&&(d[s++]=Math.min(C,h),h=Math.max(C,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),u=a[t],c=this.count(),f=o._rawExtent[t]=zu(),h=new(ih(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var g=this.getRawIndex(p+v);s[v]=u[g]}var m=n(s),_=this.getRawIndex(Math.min(p+i(s,m)||0,c-1));u[_]=m,m<f[0]&&(f[0]=m),m>f[1]&&(f[1]=m),h[d++]=_}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][s],o);break;case 2:r(i[t[0]][s],i[t[1]][s],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=zu();if(!r)return n;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&cu(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)n._chunks[a]=o[a]?Ret(i[a]):i[a];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=zt(this._extent),t._rawExtent=zt(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return ws(r[o],this._dimensions[o])}f2={arrayRows:t,objectRows:function(r,n,i,o){return ws(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var a=r&&(r.value==null?r:r.value);return ws(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const QS=Det;var tF=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(Up(t)){var a=t,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=xn(s)?bs:ii,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=qt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=qt(f.sourceHeader,h.sourceHeader),v=qt(f.dimensions,h.dimensions),g=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=g?[JS(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var m=t;if(n){var _=this._applyTransform(r);i=_.sourceList,o=_.upstreamSignList}else{var y=m.get("source",!0);i=[JS(y,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&x4(o)}var a,s=[],l=[];return F(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&x4(f),s.push(c),l.push(u._getVersionSign())}),n?a=xet(n,s,{datasetIndex:r.componentIndex}):i!=null&&(a=[cet(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[n];if(!s){var l=this._getUpstreamSourceManagers()[0];Up(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,n):(s=new QS,s.initData(new GN(r,t.length),t)),a[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Up(t)){var r=RN(t);return r?[r.getSourceManager()]:[]}else return kt(Rtt(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(Up(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function M4(e){var t=e.option.transform;t&&Pm(e.option.transform)}function Up(e){return e.mainType==="series"}function x4(e){throw new Error(e)}var eF="line-height:1";function rF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Xn(n+"")+"px;color:"+Xn(r)+";font-weight:"+Xn(i+""),valueStyle:"font-size:"+Xn(a+"")+"px;color:"+Xn(o)+";font-weight:"+Xn(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Net=[0,10,20,30],Fet=["",`
`,`

`,`


`];function xs(e,t){return t.type=e,t}function t3(e){return e.type==="section"}function nF(e){return t3(e)?Bet:$et}function iF(e){if(t3(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return F(e.blocks,function(i){var o=iF(i);o>=t&&(t=o+ +(n&&(!o||t3(i)&&!i.noHeader)))}),t}return 0}function Bet(e,t,r,n){var i=t.noHeader,o=zet(iF(t)),a=[],s=t.blocks||[];Oi(!s||ct(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(ht(u,l)){var c=new ZN(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}F(s,function(p,v){var g=t.valueFormatter,m=nF(p)(g?ot(ot({},e),{valueFormatter:g}):e,p,v>0?o.html:0,n);m!=null&&a.push(m)});var f=e.renderMode==="richText"?a.join(o.richText):e3(a.join(""),i?r:o.html);if(i)return f;var h=KS(t.header,"ordinal",e.useUTC),d=rF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?oF(e,h,d)+o.richText+f:e3('<div style="'+d+";"+eF+';">'+Xn(h)+"</div>"+f,r)}function $et(e,t,r,n){var i=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=ct(w)?w:[w],kt(w,function(T,S){return KS(T,ct(d)?d[S]:d,u)})};if(!(o&&a)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":KS(l,"ordinal",u),d=t.valueType,p=a?[]:c(t.value),v=!s||!o,g=!s&&o,m=rF(n,i),_=m.nameStyle,y=m.valueStyle;return i==="richText"?(s?"":f)+(o?"":oF(e,h,_))+(a?"":Get(e,p,v,g,y)):e3((s?"":f)+(o?"":Vet(h,!s,_))+(a?"":Uet(p,v,g,y)),r)}}function L4(e,t,r,n,i,o){if(!!e){var a=nF(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function zet(e){return{html:Net[e],richText:Fet[e]}}function e3(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+eF+';">'+e+r+"</div>"}function Vet(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Xn(e)+"</span>"}function Uet(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=ct(e)?e:[e],'<span style="'+o+";"+n+'">'+kt(e,function(a){return Xn(a)}).join("&nbsp;&nbsp;")+"</span>"}function oF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function Get(e,t,r,n,i){var o=[i],a=n?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ct(t)?t.join("  "):t,o)}function jet(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return eu(n)}function aF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var h2=function(){function e(){this.richTextStyles={},this._nextStyleNameId=p9()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=Ett({color:r,type:t,renderMode:n,markerId:i});return Et(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};ct(r)?F(r,function(o){return ot(n,o)}):ot(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function Wet(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=ct(s),u=jet(t,r),c,f,h,d;if(a>1||l&&!a){var p=Het(s,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(a){var v=i.getDimensionInfo(o[0]);d=c=Yc(i,r,o[0]),f=v.type}else d=c=l?s[0]:s;var g=FP(t),m=g&&t.name||"",_=i.getName(r),y=n?m:_;return xs("section",{header:m,noHeader:n||!g,sortParam:d,blocks:[xs("nameValue",{markerType:"item",markerColor:u,name:y,noName:!_o(y),value:c,valueType:f})].concat(h||[])})}function Het(e,t,r,n,i){var o=t.getData(),a=cu(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?F(n,function(f){c(Yc(o,r,f),f)}):F(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(xs("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var Na=Oe();function Gp(e,t){return e.getName(t)||e.getId(t)}var Xet="__universalTransitionEnabled",u_=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=Td({count:qet,reset:Zet}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=Na(this).sourceManager=new tF(this);o.prepareSource();var a=this.getInitialData(r,i);O4(a,this),this.dataTask.context.data=a,Na(this).dataBeforeProcessed=a,I4(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=e0(this),o=i?a_(r):{},a=this.subType;Ce.hasClass(a)&&(a+="Series"),oe(r,n.getTheme().get(this.subType)),oe(r,this.getDefaultOption()),FS(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&Xc(r,o,i)},t.prototype.mergeOption=function(r,n){r=oe(this.option,r,!0),this.fillDataTextStyle(r.data);var i=e0(this);i&&Xc(this.option,r,i);var o=Na(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,n);O4(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,Na(this).dataBeforeProcessed=a,I4(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!xn(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&FS(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=r3(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return Na(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=r3(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}Na(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return jt(r)},t.prototype.getSourceManager=function(){return Na(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return Na(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return Wet({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Xt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,a=aE.prototype.getColorFromPalette.call(this,r,n,i);return a||(a=o.getColorFromPalette(r,n,i)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,a=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=Gp(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ve(r),i=[],o=0;o<n.length;o++){var a=r[n[o]];a>=0&&i.push(a)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[Gp(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[Xet])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,a=this.option,s=a.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){It(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=n[c],h=Gp(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=Gp(r,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Ce.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Ce);Bi(u_,XN);Bi(u_,aE);b9(u_,Ce);function I4(e){var t=e.name;FP(e)||(e.name=Yet(e)||t)}function Yet(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return F(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function qet(e){return e.model.getRawData().count()}function Zet(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Ket}function Ket(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function O4(e,t){F(z7(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,be(Jet,t))})}function Jet(e,t){var r=r3(e);return r&&r.setOutputEnd((t||this).count()),t}function r3(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const ko=u_;var hE=function(){function e(){this.group=new De,this.uid=Q1("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();$P(hE);j1(hE);const ri=hE;function dE(){var e=Oe();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,a=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==a||o!==s)&&"reset"}}var sF=Oe(),Qet=dE(),pE=function(){function e(){this.group=new De,this.uid=Q1("viewChart"),this.renderTask=Td({plan:trt,reset:ert}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||D4(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||D4(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){hf(this.group,t)},e.markUpdateMethod=function(t,r){sF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function R4(e,t,r){e&&HS(e)&&(t==="emphasis"?Yd:qd)(e,r)}function D4(e,t,r){var n=Kl(e,t),i=t&&t.highlightKey!=null?sQ(t.highlightKey):null;n!=null?F(Ze(n),function(o){R4(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){R4(o,r,i)})}$P(pE);j1(pE);function trt(e){return Qet(e.model)}function ert(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=i&&sF(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,n,i),rrt[l]}var rrt={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const Jn=pE;var $m="\0__throttleOriginMethod",N4="\0__throttleRate",F4="\0__throttleType";function c_(e,t,r){var n,i=0,o=0,a=null,s,l,u,c;t=t||0;function f(){o=new Date().getTime(),a=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,g=c||r;c=null,s=n-(g?i:o)-v,clearTimeout(a),g?a=setTimeout(f,v):s>=0?f():a=setTimeout(f,-s),i=n};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function lF(e,t,r,n){var i=e[t];if(!!i){var o=i[$m]||i,a=i[F4],s=i[N4];if(s!==r||a!==n){if(r==null||!n)return e[t]=o;i=e[t]=c_(o,r,n==="debounce"),i[$m]=o,i[F4]=n,i[N4]=r}return i}}function n3(e,t){var r=e[t];r&&r[$m]&&(r.clear&&r.clear(),e[t]=r[$m])}var B4=Oe(),$4={itemStyle:Xd(gN,!0),lineStyle:Xd(vN,!0)},nrt={lineStyle:"stroke",itemStyle:"fill"};function uF(e,t){var r=e.visualStyleMapper||$4[t];return r||(console.warn("Unkown style type '"+t+"'."),$4.itemStyle)}function cF(e,t){var r=e.visualDrawType||nrt[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var irt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=uF(e,n),a=o(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=cF(e,n),u=a[l],c=Ut(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ut(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Ut(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),g=ot({},a);g[l]=c(v),d.setItemVisual(p,"style",g)}}}},oh=new Sr,ort={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=uF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[n]){oh.option=l[n];var u=i(oh),c=a.ensureUniqueItemVisual(s,"style");ot(c,u),oh.option.decal&&(a.setItemVisual(s,"decal",oh.option.decal),oh.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},art={performRawSeries:!0,overallReset:function(e){var t=jt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),B4(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),a=B4(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=cF(r,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,a,p)}})}})}},jp=Math.PI;function srt(e,t){t=t||{},te(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new De,n=new Ke({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new Je({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Ke({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new YP({shape:{startAngle:-jp/2,endAngle:-jp/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:jp*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:jp*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var lrt=function(){function e(t,r,n,i){this._stageTaskMap=jt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=o?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),a=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=jt();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;F(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),a="";Oi(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,a=this;F(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(g){s(i,g)&&(g.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,n);var v=a.getPerformArgs(h,i.block);p.each(function(g){g.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(g,m){s(i,g)&&g.dirty();var _=a.getPerformArgs(g,i.block);_.skip=!l.performRawSeries&&r.isSeriesFiltered(g.context.model),a.updatePayload(g,n),g.perform(_)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=jt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||Td({plan:drt,reset:prt,count:grt}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,a=r.overallTask=r.overallTask||Td({reset:urt});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=jt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Oi(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,F(n.getSeries(),p));function p(v){var g=v.uid,m=l.set(g,s&&s.get(g)||(h=!0,Td({reset:crt,onDirty:hrt})));m.context={model:v,overallProgress:f},m.agent=a,m.__block=f,o._pipe(v,m)}h&&a.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ut(t)&&(t={overallReset:t,seriesType:mrt(t)}),t.uid=Q1("stageHandler"),r&&(t.visualType=r),t},e}();function urt(e){e.overallReset(e.ecModel,e.api,e.payload)}function crt(e){return e.overallProgress&&frt}function frt(){this.agent.dirty(),this.getDownstream().dirty()}function hrt(){this.agent&&this.agent.dirty()}function drt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function prt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ze(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?kt(t,function(r,n){return fF(n)}):vrt}var vrt=fF(0);function fF(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function grt(e){return e.data.count()}function mrt(e){zm=null;try{e(n0,hF)}catch{}return zm}var n0={},hF={},zm;dF(n0,FN);dF(hF,BN);n0.eachSeriesByType=n0.eachRawSeriesByType=function(e){zm=e};n0.eachComponent=function(e){e.mainType==="series"&&e.subType&&(zm=e.subType)};function dF(e,t){for(var r in t.prototype)e[r]=Fr}const pF=lrt;var z4=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const _rt={color:z4,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],z4]};var Yr="#B9B8CE",V4="#100C2A",Wp=function(){return{axisLine:{lineStyle:{color:Yr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},U4=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],vF={darkMode:!0,color:U4,backgroundColor:V4,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Yr}},textStyle:{color:Yr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Yr}},dataZoom:{borderColor:"#71708A",textStyle:{color:Yr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Yr}},timeline:{lineStyle:{color:Yr},label:{color:Yr},controlStyle:{color:Yr,borderColor:Yr}},calendar:{itemStyle:{color:V4},dayLabel:{color:Yr},monthLabel:{color:Yr},yearLabel:{color:Yr}},timeAxis:Wp(),logAxis:Wp(),valueAxis:Wp(),categoryAxis:Wp(),line:{symbol:"circle"},graph:{color:U4},gauge:{title:{color:Yr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Yr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};vF.categoryAxis.splitLine.show=!1;const yrt=vF;var brt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Et(t)){var o=bo(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};F(t,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),i3=["symbol","symbolSize","symbolRotate","symbolOffset"],G4=i3.concat(["symbolKeepAspect"]),wrt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,a=0;a<i3.length;a++){var s=i3[a],l=e.get(s);Ut(l)?(o=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(ot({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ve(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var g=u[v];f.setItemVisual(h,g,i[g](d,p))}}return{dataEach:o?c:null}}},Srt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var a=i.getItemModel(o),s=0;s<G4.length;s++){var l=G4[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function gF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function f_(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function Trt(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function Vu(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=Kl(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:ct(h)?f.getName(h[0]):f.getName(h),selected:Et(l)?l:ot({},l)})}})}function Prt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(Vu("map","selectchanged",t,i,n),Vu("pie","selectchanged",t,i,n)):n.fromAction==="select"?(Vu("map","selected",t,i,n),Vu("pie","selected",t,i,n)):n.fromAction==="unselect"&&(Vu("map","unselected",t,i,n),Vu("pie","unselected",t,i,n))})}function bc(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var Ert=Math.round(Math.random()*9),Art=typeof Object.defineProperty=="function",krt=function(){function e(){this._id="__ec_inner_"+Ert++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return Art?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const Crt=krt;var Mrt=fe.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),xrt=fe.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),Lrt=fe.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),a=i/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,p=a*.7;e.moveTo(r-c,l+s),e.arc(r,l,a,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),e.closePath()}}),Irt=fe.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,a=n/3*2;e.moveTo(i,o),e.lineTo(i+a,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-a,o+r),e.lineTo(i,o),e.closePath()}}),Ort={line:Cs,rect:Ke,roundRect:Ke,square:Ke,circle:XP,diamond:xrt,pin:Lrt,arrow:Irt,triangle:Mrt},Rrt={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},o3={};F(Ort,function(e,t){o3[t]=new e});var Drt=fe.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Lm(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=o3[n];i||(n="rect",i=o3[n]),Rrt[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function Nrt(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function Ri(e,t,r,n,i,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=lN(e.slice(8),new ae(t,r,n,i),a?"center":"cover"):e.indexOf("path://")===0?l=Z1(e.slice(7),{},new ae(t,r,n,i),a?"center":"cover"):l=new Drt({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=Nrt,o&&l.setColor(o),l}function mF(e){return ct(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function vE(e,t){if(e!=null)return ct(e)||(e=[e,e]),[We(e[0],t[0])||0,We(qt(e[1],e[0]),t[1])||0]}function Ll(e){return isFinite(e)}function Frt(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),n=Ll(n)?n:0,i=Ll(i)?i:1,o=Ll(o)?o:0,a=Ll(a)?a:0;var s=e.createLinearGradient(n,o,i,a);return s}function Brt(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+r.x,s=s*i+r.y,l=l*o),a=Ll(a)?a:.5,s=Ll(s)?s:.5,l=l>=0&&Ll(l)?l:.5;var u=e.createRadialGradient(a,s,0,a,s,l);return u}function a3(e,t,r){for(var n=t.type==="radial"?Brt(e,t,r):Frt(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function $rt(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function Hp(e){return parseInt(e,10)}function Xp(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||Hp(s[n])||Hp(e.style[n]))-(Hp(s[o])||0)-(Hp(s[a])||0)|0}function zrt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:we(e)?[e]:ct(e)?e:null}function _F(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&zrt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=kt(r,function(o){return o/i}),n/=i)}return[r,n]}var Vrt=new Jl(!0);function Vm(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function j4(e){return typeof e=="string"&&e!=="none"}function Um(e){var t=e.fill;return t!=null&&t!=="none"}function W4(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function H4(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function s3(e,t,r){var n=w9(t.image,t.__image,r);if(W1(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*Xq),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function Urt(e,t,r,n){var i,o=Vm(r),a=Um(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||Vrt,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=a&&!!h.colorStops,v=o&&!!d.colorStops,g=a&&!!h.image,m=o&&!!d.image,_=void 0,y=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(_=f?a3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=_),v&&(y=f?a3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=y),g&&(w=f||!t.__canvasFillPattern?s3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),m&&(T=f||!t.__canvasStrokePattern?s3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=_:g&&(w?e.fillStyle=w:a=!1),v?e.strokeStyle=y:m&&(T?e.strokeStyle=T:o=!1)}var P=t.getGlobalScale();c.setScale(P[0],P[1],t.segmentIgnoreThreshold);var k,A;e.setLineDash&&r.lineDash&&(i=_F(t),k=i[0],A=i[1]);var C=!0;(u||f&hc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),C=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),C&&c.rebuildPath(e,l?s:1),k&&(e.setLineDash(k),e.lineDashOffset=A),n||(r.strokeFirst?(o&&H4(e,r),a&&W4(e,r)):(a&&W4(e,r),o&&H4(e,r))),k&&e.setLineDash([])}function Grt(e,t,r){var n=t.__image=w9(r.image,t.__image,t,t.onload);if(!(!n||!W1(n))){var i=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,a,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=a-u,h=s-c;e.drawImage(n,u,c,f,h,i,o,a,s)}else e.drawImage(n,i,o,a,s)}}function jrt(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||ql,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(n=_F(t),o=n[0],a=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?(Vm(r)&&e.strokeText(i,r.x,r.y),Um(r)&&e.fillText(i,r.x,r.y)):(Um(r)&&e.fillText(i,r.x,r.y),Vm(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var X4=["shadowBlur","shadowOffsetX","shadowOffsetY"],Y4=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function yF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){hn(e,i),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?$l.opacity:a}(n||t.blend!==r.blend)&&(o||(hn(e,i),o=!0),e.globalCompositeOperation=t.blend||$l.blend);for(var s=0;s<X4.length;s++){var l=X4[s];(n||t[l]!==r[l])&&(o||(hn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(hn(e,i),o=!0),e.shadowColor=t.shadowColor||$l.shadowColor),o}function q4(e,t,r,n,i){var o=i0(t,i.inHover),a=n?null:r&&i0(r,i.inHover)||{};if(o===a)return!1;var s=yF(e,o,a,n,i);if((n||o.fill!==a.fill)&&(s||(hn(e,i),s=!0),j4(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(hn(e,i),s=!0),j4(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(hn(e,i),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(hn(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<Y4.length;c++){var f=Y4[c],h=f[0];(n||o[h]!==a[h])&&(s||(hn(e,i),s=!0),e[h]=o[h]||f[1])}return s}function Wrt(e,t,r,n,i){return yF(e,i0(t,i.inHover),r&&i0(r,i.inHover),n,i)}function bF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function Hrt(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),bF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function Xrt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var Z4=1,K4=2,J4=3,Q4=4;function Yrt(e){var t=Um(e),r=Vm(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function hn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function i0(e,t){return t&&e.__hoverStyle||e.style}function wF(e,t){Il(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Il(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~En,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||$rt(o,a))&&(a&&a.length&&(hn(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(hn(e,r),e.save(),Hrt(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof fe&&t.autoBatch&&Yrt(t.style);s||Xrt(i,u.transform)?(hn(e,r),bF(e,t)):c||hn(e,r);var f=i0(t,r.inHover);t instanceof fe?(r.lastDrawType!==Z4&&(l=!0,r.lastDrawType=Z4),q4(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Urt(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof VS?(r.lastDrawType!==J4&&(l=!0,r.lastDrawType=J4),q4(e,t,u,l,r),jrt(e,t,f)):t instanceof Sa?(r.lastDrawType!==K4&&(l=!0,r.lastDrawType=K4),Wrt(e,t,u,l,r),Grt(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==Q4&&(l=!0,r.lastDrawType=Q4),qrt(e,t,r)),c&&n&&hn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function qrt(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=n.length;a<s;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Il(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Il(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var d2=new Crt,t6=new C0(100),e6=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Gm(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&d2.delete(e);var o=d2.get(e);if(o)return o;var a=te(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/r,d2.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<e6.length;++h){var d=a[e6[h]];if(d!=null&&!ct(d)&&!Et(d)&&!we(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=t6.get(p);v&&(i?u.svgElement=v:u.image=v)}var g=TF(a.dashArrayX),m=Zrt(a.dashArrayY),_=SF(a.symbol),y=Krt(g),w=PF(m),T=!i&&uu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},P=A(),k;T&&(T.width=P.width*r,T.height=P.height*r,k=T.getContext("2d")),C(),f&&t6.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=P.width,u.svgHeight=P.height;function A(){for(var M=1,D=0,B=y.length;D<B;++D)M=dM(M,y[D]);for(var z=1,D=0,B=_.length;D<B;++D)z=dM(z,_[D].length);M*=z;var N=w*y.length*_.length;return{width:Math.max(1,Math.min(M,a.maxTileWidth)),height:Math.max(1,Math.min(N,a.maxTileHeight))}}function C(){k&&(k.clearRect(0,0,T.width,T.height),a.backgroundColor&&(k.fillStyle=a.backgroundColor,k.fillRect(0,0,T.width,T.height)));for(var M=0,D=0;D<m.length;++D)M+=m[D];if(M<=0)return;for(var B=-w,z=0,N=0,j=0;B<P.height;){if(z%2===0){for(var Z=N/2%_.length,q=0,tt=0,Pt=0;q<P.width*2;){for(var Ot=0,D=0;D<g[j].length;++D)Ot+=g[j][D];if(Ot<=0)break;if(tt%2===0){var wt=(1-a.symbolSize)*.5,St=q+g[j][tt]*wt,Ht=B+m[z]*wt,Y=g[j][tt]*a.symbolSize,nt=m[z]*a.symbolSize,K=Pt/2%_[Z].length;pt(St,Ht,Y,nt,_[Z][K])}q+=g[j][tt],++Pt,++tt,tt===g[j].length&&(tt=0)}++j,j===g.length&&(j=0)}B+=m[z],++N,++z,z===m.length&&(z=0)}function pt(Tt,At,lt,ft,$){var G=i?1:r,X=Ri($,Tt*G,At*G,lt*G,ft*G,a.color,a.symbolKeepAspect);if(i){var J=n.painter.renderOneToVNode(X);J&&S.children.push(J)}else wF(k,X)}}}}function SF(e){if(!e||e.length===0)return[["rect"]];if(Et(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Et(e[r])){t=!1;break}if(t)return SF([e]);for(var n=[],r=0;r<e.length;++r)Et(e[r])?n.push([e[r]]):n.push(e[r]);return n}function TF(e){if(!e||e.length===0)return[[0,0]];if(we(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!we(e[n])){r=!1;break}if(r)return TF([e]);for(var i=[],n=0;n<e.length;++n)if(we(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=kt(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function Zrt(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(we(e)){var t=Math.ceil(e);return[t,t]}var r=kt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function Krt(e){return kt(e,function(t){return PF(t)})}function PF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function Jrt(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(a){var s=n.getItemVisual(a,"decal");if(s){var l=n.ensureUniqueItemVisual(a,"style");l.decal=Gm(s,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=Gm(i,t)}}})}var Qrt=new $i;const vi=Qrt;var EF={};function tnt(e,t){EF[e]=t}function ent(e){return EF[e]}var rnt=typeof window<"u",nnt=1,int=800,ont=900,ant=1e3,snt=2e3,lnt=5e3,AF=1e3,unt=1100,gE=2e3,kF=3e3,cnt=4e3,h_=4500,fnt=4600,hnt=5e3,dnt=6e3,CF=7e3,pnt={PROCESSOR:{FILTER:ant,SERIES_FILTER:int,STATISTIC:lnt},VISUAL:{LAYOUT:AF,PROGRESSIVE_LAYOUT:unt,GLOBAL:gE,CHART:kF,POST_CHART_LAYOUT:fnt,COMPONENT:cnt,BRUSH:hnt,CHART_ITEM:h_,ARIA:dnt,DECAL:CF}},Cr="__flagInMainProcess",sn="__pendingUpdate",p2="__needsUpdateStatus",r6=/^[a-zA-Z0-9_]+$/,v2="__connectUpdateStatus",n6=0,vnt=1,gnt=2;function MF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return LF(this,e,t)}}function xF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return LF(this,e,t)}}function LF(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),$i.prototype[t].apply(e,r)}var IF=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}($i),OF=IF.prototype;OF.on=xF("on");OF.off=xF("off");var Uu,g2,Yp,Fa,m2,_2,y2,ah,sh,i6,o6,b2,a6,qp,s6,RF,Dn,l6,DF=function(e){mt(t,e);function t(r,n,i){var o=e.call(this,new brt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Et(n)&&(n=NF[n]),o._dom=r;var a="canvas",s="auto",l=!1,u=o._zr=cM(r,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:qt(i.useDirtyRect,l),useCoarsePointer:qt(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=c_(Vt(u.flush,u),17),n=zt(n),n&&zN(n,!0),o._theme=n,o._locale=_tt(i.locale||mN),o._coordSysMgr=new sE;var c=o._api=s6(o);function f(h,d){return h.__prio-d.__prio}return Dg(Wm,f),Dg(l3,f),o._scheduler=new pF(o,c,l3,Wm),o._messageCenter=new IF,o._initEvents(),o.resize=Vt(o.resize,o),u.animation.on("frame",o._onframe,o),i6(u,o),o6(u,o),Pm(o),o}return t.prototype._onframe=function(){if(!this._disposed){l6(this);var r=this._scheduler;if(this[sn]){var n=this[sn].silent;this[Cr]=!0;try{Uu(this),Fa.update.call(this,null,this[sn].updateParams)}catch(l){throw this[Cr]=!1,this[sn]=null,l}this._zr.flush(),this[Cr]=!1,this[sn]=null,ah.call(this,n),sh.call(this,n)}else if(r.unfinished){var i=nnt,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),_2(this,o),r.performVisualTasks(o),qp(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Cr]){if(this._disposed){this.id;return}var o,a,s;if(It(n)&&(i=n.lazyUpdate,o=n.silent,a=n.replaceMerge,s=n.transition,n=n.notMerge),this[Cr]=!0,!this._model||n){var l=new Qtt(this._api),u=this._theme,c=this._model=new FN;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:a},u3);var f={seriesTransition:s,optionChanged:!0};if(i)this[sn]={silent:o,updateParams:f},this[Cr]=!1,this.getZr().wakeUp();else{try{Uu(this),Fa.update.call(this,null,f)}catch(h){throw this[sn]=null,this[Cr]=!1,h}this._ssr||this._zr.flush(),this[sn]=null,this[Cr]=!1,ah.call(this,o),sh.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||rnt&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Xt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return F(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],a=this;F(n,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return F(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(u6[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();F(Ed,function(y,w){if(y.group===i){var T=n?y.getZr().painter.getSvgDom().innerHTML:y.renderToCanvas(zt(r)),S=y.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=a(S.right,c),f=a(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,g=uu.createCanvas(),m=cM(g,{renderer:n?"svg":"canvas"});if(m.resize({width:p,height:v}),n){var _="";return F(h,function(y){var w=y.left-l,T=y.top-u;_+='<g transform="translate('+w+","+T+')">'+y.dom+"</g>"}),m.painter.getSvgRoot().innerHTML=_,r.connectedBackgroundColor&&m.painter.setBackgroundColor(r.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}else return r.connectedBackgroundColor&&m.add(new Ke({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),F(h,function(y){var w=new Sa({style:{x:y.left*d-l,y:y.top*d-u,image:y.dom}});m.add(w)}),m.refreshImmediately(),g.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return m2(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return m2(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,a=zy(i,r);return F(a,function(s,l){l.indexOf("Models")>=0&&F(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=zy(i,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?gF(s,l,n):f_(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;F(mnt,function(n){var i=function(o){var a=r.getModel(),s=o.target,l,u=n==="globalout";if(u?l={}:s&&bc(s,function(p){var v=ie(p);if(v&&v.dataIndex!=null){var g=v.dataModel||a.getSeriesByIndex(v.seriesIndex);return l=g&&g.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=ot({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),F(Pd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),F(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),Prt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&_9(this.getDom(),_E,"");var n=this,i=n._api,o=n._model;F(n._componentsViews,function(a){a.dispose(o,i)}),F(n._chartsViews,function(a){a.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Ed[n.id]},t.prototype.resize=function(r){if(!this[Cr]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[sn]&&(o==null&&(o=this[sn].silent),i=!0,this[sn]=null),this[Cr]=!0;try{i&&Uu(this),Fa.update.call(this,{type:"resize",animation:ot({duration:0},r&&r.animation)})}catch(a){throw this[Cr]=!1,a}this[Cr]=!1,ah.call(this,o),sh.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(It(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!c3[r]){var i=c3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=ot({},r);return n.type=Pd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(It(n)||(n={silent:!!n}),!!jm[r.type]&&!!this._model){if(this[Cr]){this._pendingActions.push(r);return}var i=n.silent;y2.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Xt.browser.weChat&&this._throttledZrFlush(),ah.call(this,i),sh.call(this,i)}},t.prototype.updateLabelLayout=function(){vi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Uu=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),g2(f,!0),g2(f,!1),h.plan()},g2=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,g=h?f._componentsMap:f._chartsMap,m=f._zr,_=f._api,y=0;y<v.length;y++)v[y].__alive=!1;h?d.eachComponent(function(S,P){S!=="series"&&w(P)}):d.eachSeries(w);function w(S){var P=S.__requireNewView;S.__requireNewView=!1;var k="_ec_"+S.id+"_"+S.type,A=!P&&g[k];if(!A){var C=bo(S.type),M=h?ri.getClass(C.main,C.sub):Jn.getClass(C.sub);A=new M,A.init(d,_),g[k]=A,v.push(A),m.add(A.group)}S.__viewId=A.__id=k,A.__alive=!0,A.__model=S,A.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(A,S,d,_)}for(var y=0;y<v.length;){var T=v[y];T.__alive?y++:(!h&&T.renderTask.dispose(),m.remove(T.group),T.dispose(d,_),v.splice(y,1),g[T.__id]===T&&delete g[T.__id],T.__id=T.group.__ecComponentInfo=null)}},Yp=function(f,h,d,p,v){var g=f._model;if(g.setUpdatePayload(d),!p){F([].concat(f._componentsViews).concat(f._chartsViews),T);return}var m={};m[p+"Id"]=d[p+"Id"],m[p+"Index"]=d[p+"Index"],m[p+"Name"]=d[p+"Name"];var _={mainType:p,query:m};v&&(_.subType=v);var y=d.excludeSeriesId,w;y!=null&&(w=jt(),F(Ze(y),function(S){var P=Kn(S,null);P!=null&&w.set(P,!0)})),g&&g.eachComponent(_,function(S){var P=w&&w.get(S.id)!==null;if(!P)if(UM(d))if(S instanceof ko)d.type===zl&&!d.notBlur&&!S.get(["emphasis","disabled"])&&QJ(S,d,f._api);else{var k=WP(S.mainType,S.componentIndex,d.name,f._api),A=k.focusSelf,C=k.dispatchers;d.type===zl&&A&&!d.notBlur&&jS(S.mainType,S.componentIndex,f._api),C&&F(C,function(M){d.type===zl?Yd(M):qd(M)})}else XS(d)&&S instanceof ko&&(rQ(S,d,f._api),zM(S),Dn(f))},f),g&&g.eachComponent(_,function(S){var P=w&&w.get(S.id)!==null;P||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,g,f._api,d)}},Fa={prepareAndUpdate:function(f){Uu(this),Fa.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,g=this._coordSysMgr,m=this._scheduler;if(!!d){d.setUpdatePayload(f),m.restoreData(d,f),m.performSeriesTasks(d),g.create(d,p),m.performDataProcessorTasks(d,f),_2(this,d),g.update(d,p),r(d),m.performVisualTasks(d,f),b2(this,d,p,f,h);var _=d.get("backgroundColor")||"transparent",y=d.get("darkMode");v.setBackgroundColor(_),y!=null&&y!=="auto"&&v.setDarkMode(y),vi.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(m,_){if(m!=="series"){var y=h.getViewOfComponentModel(_);if(y&&y.__alive)if(y.updateTransform){var w=y.updateTransform(_,d,p,f);w&&w.update&&v.push(y)}else v.push(y)}});var g=jt();d.eachSeries(function(m){var _=h._chartsMap[m.__viewId];if(_.updateTransform){var y=_.updateTransform(m,d,p,f);y&&y.update&&g.set(m.uid,1)}else g.set(m.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:g}),qp(this,d,p,f,{},g),vi.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),Jn.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),b2(this,h,this._api,f,{}),vi.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),Jn.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var g=h.getViewOfComponentModel(v);g&&g.__alive&&g.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),vi.trigger("afterupdate",d,this._api))},updateLayout:function(f){Fa.update.call(this,f)}},m2=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,g=f._coordSysMgr.getCoordinateSystems(),m,_=zy(v,d),y=0;y<g.length;y++){var w=g[y];if(w[h]&&(m=w[h](v,_,p))!=null)return m}},_2=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},y2=function(f,h){var d=this,p=this.getModel(),v=f.type,g=f.escapeConnect,m=jm[v],_=m.actionInfo,y=(_.update||"update").split(":"),w=y.pop(),T=y[0]!=null&&bo(y[0]);this[Cr]=!0;var S=[f],P=!1;f.batch&&(P=!0,S=kt(f.batch,function(z){return z=te(ot({},z),f),z.batch=null,z}));var k=[],A,C=XS(f),M=UM(f);if(M&&V9(this._api),F(S,function(z){if(A=m.action(z,d._model,d._api),A=A||ot({},z),A.type=_.event||A.type,k.push(A),M){var N=BP(f),j=N.queryOptionMap,Z=N.mainTypeSpecified,q=Z?j.keys()[0]:"series";Yp(d,w,z,q),Dn(d)}else C?(Yp(d,w,z,"series"),Dn(d)):T&&Yp(d,w,z,T.main,T.sub)}),w!=="none"&&!M&&!C&&!T)try{this[sn]?(Uu(this),Fa.update.call(this,f),this[sn]=null):Fa[w].call(this,f)}catch(z){throw this[Cr]=!1,z}if(P?A={type:_.event||v,escapeConnect:g,batch:k}:A=k[0],this[Cr]=!1,!h){var D=this._messageCenter;if(D.trigger(A.type,A),C){var B={type:"selectchanged",escapeConnect:g,selected:nQ(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};D.trigger(B.type,B)}}},ah=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();y2.call(this,d,f)}},sh=function(f){!f&&this.trigger("updated")},i6=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[sn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},o6=function(f,h){f.on("mouseover",function(d){var p=d.target,v=bc(p,HS);v&&(tQ(v,d,h._api),Dn(h))}).on("mouseout",function(d){var p=d.target,v=bc(p,HS);v&&(eQ(v,d,h._api),Dn(h))}).on("click",function(d){var p=d.target,v=bc(p,function(_){return ie(_).dataIndex!=null},!0);if(v){var g=v.selected?"unselect":"select",m=ie(v);h._api.dispatchAction({type:g,dataType:m.dataType,dataIndexInside:m.dataIndex,seriesIndex:m.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(_,y){var w=y.get("zlevel")||0,T=y.get("z")||0,S=y.getZLevelKey();p=p||!!S,(_==="series"?d:h).push({zlevel:w,z:T,idx:y.componentIndex,type:_,key:S})}),p){var v=h.concat(d),g,m;Dg(v,function(_,y){return _.zlevel===y.zlevel?_.z-y.z:_.zlevel-y.zlevel}),F(v,function(_){var y=f.getComponent(_.type,_.idx),w=_.zlevel,T=_.key;g!=null&&(w=Math.max(g,w)),T?(w===g&&T!==m&&w++,m=T):m&&(w===g&&w++,m=""),g=w,y.setZLevel(w)})}}b2=function(f,h,d,p,v){n(h),a6(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive=!1}),qp(f,h,d,p,v),F(f._chartsViews,function(g){g.__alive||g.remove(h,d)})},a6=function(f,h,d,p,v,g){F(g||f._componentsViews,function(m){var _=m.__model;u(_,m),m.render(_,h,d,p),s(_,m),c(_,m)})},qp=function(f,h,d,p,v,g){var m=f._scheduler;v=ot(v||{},{updatedSeries:h.getSeries()}),vi.trigger("series:beforeupdate",h,d,v);var _=!1;h.eachSeries(function(y){var w=f._chartsMap[y.__viewId];w.__alive=!0;var T=w.renderTask;m.updatePayload(T,p),u(y,w),g&&g.get(y.uid)&&T.dirty(),T.perform(m.getPerformArgs(T))&&(_=!0),w.group.silent=!!y.get("silent"),a(y,w),zM(y)}),m.unfinished=_||m.unfinished,vi.trigger("series:layoutlabels",h,d,v),vi.trigger("series:transition",h,d,v),h.eachSeries(function(y){var w=f._chartsMap[y.__viewId];s(y,w),c(y,w)}),o(f,h),vi.trigger("series:afterupdate",h,d,v)},Dn=function(f){f[p2]=!0,f.getZr().wakeUp()},l6=function(f){!f[p2]||(f.getZr().storage.traverse(function(h){wd(h)||i(h)}),f[p2]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===X1&&f.states.emphasis?h.push("emphasis"):f.hoverState===L0&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(g){g.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Xt.node&&!Xt.worker&&h.eachSeries(function(g){if(!g.preventUsingHoverLayer){var m=f._chartsMap[g.__viewId];m.__alive&&m.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),g=f.getTextGuideLine(),m=f.isGroup;if(m)for(var _=f.childrenRef(),y=0;y<_.length;y++)p=Math.max(l(_[y],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),g){var w=f.textGuideLineConfig;g.z=h,g.zlevel=d,isFinite(p)&&(g.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!wd(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),g=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(m){if(m.states&&m.states.emphasis){if(wd(m))return;if(m instanceof fe&&lQ(m),m.__dirty){var _=m.prevStates;_&&m.useStates(_)}if(p){m.stateTransition=g;var y=m.getTextContent(),w=m.getTextGuideLine();y&&(y.stateTransition=g),w&&(w.stateTransition=g)}m.__dirty&&i(m)}})}s6=function(f){return new(function(h){mt(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){Yd(p,v),Dn(f)},d.prototype.leaveEmphasis=function(p,v){qd(p,v),Dn(f)},d.prototype.enterBlur=function(p){F9(p),Dn(f)},d.prototype.leaveBlur=function(p){jP(p),Dn(f)},d.prototype.enterSelect=function(p){B9(p),Dn(f)},d.prototype.leaveSelect=function(p){$9(p),Dn(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(BN))(f)},RF=function(f){function h(d,p){for(var v=0;v<d.length;v++){var g=d[v];g[v2]=p}}F(Pd,function(d,p){f._messageCenter.on(p,function(v){if(u6[f.group]&&f[v2]!==n6){if(v&&v.escapeConnect)return;var g=f.makeActionFromEvent(v),m=[];F(Ed,function(_){_!==f&&_.group===f.group&&m.push(_)}),h(m,n6),F(m,function(_){_[v2]!==vnt&&_.dispatchAction(g)}),h(m,gnt)}})})}}(),t}($i),mE=DF.prototype;mE.on=MF("on");mE.off=MF("off");mE.one=function(e,t,r){var n=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var mnt=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var jm={},Pd={},l3=[],u3=[],Wm=[],NF={},c3={},Ed={},u6={},_nt=+new Date-0,_E="_echarts_instance_";function ynt(e,t,r){var n=!(r&&r.ssr);if(n){var i=bnt(e);if(i)return i}var o=new DF(e,t,r);return o.id="ec_"+_nt++,Ed[o.id]=o,n&&_9(e,_E,o.id),RF(o),vi.trigger("afterinit",o),o}function bnt(e){return Ed[$K(e,_E)]}function FF(e,t){NF[e]=t}function BF(e){ue(u3,e)<0&&u3.push(e)}function $F(e,t){bE(l3,e,t,snt)}function wnt(e){yE("afterinit",e)}function Snt(e){yE("afterupdate",e)}function yE(e,t){vi.on(e,t)}function pu(e,t,r){Ut(t)&&(r=t,t="");var n=It(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Pd[t]&&(Oi(r6.test(n)&&r6.test(t)),jm[n]||(jm[n]={action:r,actionInfo:e}),Pd[t]=n)}function Tnt(e,t){sE.register(e,t)}function Pnt(e,t){bE(Wm,e,t,AF,"layout")}function vu(e,t){bE(Wm,e,t,kF,"visual")}var c6=[];function bE(e,t,r,n,i){if((Ut(t)||It(t))&&(r=t,t=n),!(ue(c6,r)>=0)){c6.push(r);var o=pF.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function zF(e,t){c3[e]=t}function Ent(e,t,r){var n=ent("registerMap");n&&n(e,t,r)}var Ant=Met;vu(gE,irt);vu(h_,ort);vu(h_,art);vu(gE,wrt);vu(h_,Srt);vu(CF,Jrt);BF(zN);$F(ont,set);zF("default",srt);pu({type:zl,event:zl,update:zl},Fr);pu({type:Vg,event:Vg,update:Vg},Fr);pu({type:_d,event:_d,update:_d},Fr);pu({type:Ug,event:Ug,update:Ug},Fr);pu({type:yd,event:yd,update:yd},Fr);FF("light",_rt);FF("dark",yrt);function lh(e){return e==null?0:e.length||1}function f6(e){return e}var knt=function(){function e(t,r,n,i,o,a){this._old=t,this._new=r,this._oldKeyGetter=n||f6,this._newKeyGetter=i||f6,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=i[a],l=n[s],u=lh(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,a)}else u===1?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=n[l],c=i[l],f=lh(u),h=lh(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],a=lh(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[i](t[a],a);if(o||(n[a]=s),!!r){var l=r[s],u=lh(l);u===0?(r[s]=a,o&&n.push(s)):u===1?r[s]=[l,a]:l.push(a)}}},e}();const VF=knt;var Cnt=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function Mnt(e,t){var r={},n=r.encode={},i=jt(),o=[],a=[],s={};F(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;w2(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),Lnt(d.type)&&(o[0]=h),w2(s,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}LN.each(function(g,m){var _=w2(n,m),y=d.otherDims[m];y!=null&&y!==!1&&(_[y]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=kt(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=a,r.userOutput=new Cnt(s,t),r}function w2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function xnt(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function Lnt(e){return!(e==="ordinal"||e==="time")}var Int=function(){function e(t){this.otherDims={},t!=null&&ot(this,t)}return e}();const Hg=Int;var Ont=Oe(),Rnt={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},UF=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=WF(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return qt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=UN(this.source),n=!HF(t),i="",o=[],a=0,s=0;a<t;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=Rnt[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var a=this.getSourceDimension(r);a&&(i=a.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function GF(e){return e instanceof UF}function jF(e){for(var t=jt(),r=0;r<(e||[]).length;r++){var n=e[r],i=It(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function WF(e){var t=Ont(e);return t.dimNameMap||(t.dimNameMap=jF(e.dimensionsDefine))}function HF(e){return e>30}var uh=It,Ba=kt,Dnt=typeof Int32Array>"u"?Array:Int32Array,Nnt="e\0\0",h6=-1,Fnt=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Bnt=["_approximateExtent"],d6,Zp,ch,fh,S2,Kp,T2,$nt=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;GF(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Et(f)?new Hg({name:f}):f instanceof Hg?f:new Hg(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=jt();F(a,function(g){v.set(o[g].storeDimIndex,g)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(we(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof QS&&(o=t),!o){var a=this.dimensions,s=lE(t)||$r(t)?new GN(t,a.length):t;o=new QS;var l=Ba(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=Mnt(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=r[l],a&&T2(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==bs&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===ii;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&kK(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=Kn(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=Kn(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)T2(this,c);d6(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){uh(t)?ot(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=ch(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return Zp(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return ct(t)?i.getValues(Ba(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?h6:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ba(fh(t),this._getStoreDimIndex,this);this._store.each(o,i?Vt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=Ba(fh(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Vt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ve(t);return F(i,function(o){var a=r._getStoreDimIndex(o);n[a]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,a=Ba(fh(t),this._getStoreDimIndex,this),s=Kp(this);return s._store=this._store.map(a,o?Vt(r,o):r),s},e.prototype.modify=function(t,r,n,i){var o=n||i||this,a=Ba(fh(t),this._getStoreDimIndex,this);this._store.modify(a,o?Vt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=Kp(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=Kp(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Sr(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new VF(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return Zp(t,n)},function(n){return Zp(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},uh(t)?ot(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),ct(o)?o=o.slice():uh(o)&&(o=ot({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,uh(r)?ot(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){uh(t)?ot(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?ot(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;jJ(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){F(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:Ba(this.dimensions,this._getDimInfo,this),this.hostModel)),S2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ut(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(kP(arguments)))})},e.internalField=function(){d6=function(t){var r=t._invertedIndicesMap;F(r,function(n,i){var o=t._dimInfos[i],a=o.ordinalMeta,s=t._store;if(a){n=r[i]=new Dnt(a.categories.length);for(var l=0;l<n.length;l++)n[l]=h6;for(var l=0;l<s.count();l++)n[s.get(o.storeDimIndex,l)]=l}})},ch=function(t,r,n){return Kn(t._getCategory(r,n),null)},Zp=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=ch(t,t._idDimIdx,r)),n==null&&(n=Nnt+r),n},fh=function(t){return ct(t)||(t=t!=null?[t]:[]),t},Kp=function(t){var r=new e(t._schema?t._schema:Ba(t.dimensions,t._getDimInfo,t),t.hostModel);return S2(r,t),r},S2=function(t,r){F(Fnt.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,F(Bnt,function(n){t[n]=zt(r[n])}),t._calculationInfo=ot({},r._calculationInfo)},T2=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=n[r],l=i[r];if(s==null&&o!=null&&(n[r]=s=ch(t,o,r)),l==null&&a!=null&&(i[r]=l=ch(t,a,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Vl=$nt;function XF(e,t){lE(e)||(e=uE(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=jt(),o=[],a=Vnt(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&HF(a),l=n===e.dimensionsDefine,u=l?WF(e):jF(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var f=jt(c),h=new JN(a),d=0;d<h.length;d++)h[d]=-1;function p(A){var C=h[A];if(C<0){var M=n[A],D=It(M)?M:{name:M},B=new Hg,z=D.name;z!=null&&u.get(z)!=null&&(B.name=B.displayName=z),D.type!=null&&(B.type=D.type),D.displayName!=null&&(B.displayName=D.displayName);var N=o.length;return h[A]=N,B.storeDimIndex=A,o.push(B),B}return o[C]}if(!s)for(var d=0;d<a;d++)p(d);f.each(function(A,C){var M=Ze(A).slice();if(M.length===1&&!Et(M[0])&&M[0]<0){f.set(C,!1);return}var D=f.set(C,[]);F(M,function(B,z){var N=Et(B)?u.get(B):B;N!=null&&N<a&&(D[z]=N,g(p(N),C,z))})});var v=0;F(r,function(A){var C,M,D,B;if(Et(A))C=A,B={};else{B=A,C=B.name;var z=B.ordinalMeta;B.ordinalMeta=null,B=ot({},B),B.ordinalMeta=z,M=B.dimsDef,D=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}var N=f.get(C);if(N!==!1){if(N=Ze(N),!N.length)for(var j=0;j<(M&&M.length||1);j++){for(;v<a&&p(v).coordDim!=null;)v++;v<a&&N.push(v++)}F(N,function(Z,q){var tt=p(Z);if(l&&B.type!=null&&(tt.type=B.type),g(te(tt,B),C,q),tt.name==null&&M){var Pt=M[q];!It(Pt)&&(Pt={name:Pt}),tt.name=tt.displayName=Pt.name,tt.defaultTooltip=Pt.defaultTooltip}D&&te(tt.otherDims,D)})}});function g(A,C,M){LN.get(C)!=null?A.otherDims[C]=M:(A.coordDim=C,A.coordDimIndex=M,i.set(C,!0))}var m=t.generateCoord,_=t.generateCoordCount,y=_!=null;_=m?_||1:0;var w=m||"value";function T(A){A.name==null&&(A.name=A.coordDim)}if(s)F(o,function(A){T(A)}),o.sort(function(A,C){return A.storeDimIndex-C.storeDimIndex});else for(var S=0;S<a;S++){var P=p(S),k=P.coordDim;k==null&&(P.coordDim=Unt(w,i,y),P.coordDimIndex=0,(!m||_<=0)&&(P.isExtraCoord=!0),_--),T(P),P.type==null&&(DN(e,S)===wn.Must||P.isExtraCoord&&(P.otherDims.itemName!=null||P.otherDims.seriesName!=null))&&(P.type="ordinal")}return znt(o),new UF({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function znt(e){for(var t=jt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function Vnt(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return F(t,function(o){var a;It(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function Unt(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var Gnt=function(){function e(t){this.coordSysDims=[],this.axisMap=jt(),this.categoryAxisMap=jt(),this.coordSysName=t}return e}();function jnt(e){var t=e.get("coordinateSystem"),r=new Gnt(t),n=Wnt[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Wnt={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Si).models[0],o=e.getReferringComponents("yAxis",Si).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),Gu(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),Gu(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Si).models[0];t.coordSysDims=["single"],r.set("single",i),Gu(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Si).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),Gu(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),Gu(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();F(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];r.set(c,u),Gu(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function Gu(e){return e.get("type")==="category"}function Hnt(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,a,s;Xnt(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if(F(o,function(_,y){Et(_)&&(o[y]=_={name:_}),l&&!_.isExtraCoord&&(!n&&!u&&_.ordinalMeta&&(u=_),!c&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(c=_))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;F(o,function(_){_.coordDim===d&&v++});var g={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},m={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(g.storeDimIndex=s.ensureCalculationDimension(h,p),m.storeDimIndex=s.ensureCalculationDimension(f,p)),a.appendCalculationDimension(g),a.appendCalculationDimension(m)):(o.push(g),o.push(m))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function Xnt(e){return!GF(e.schema)}function ru(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function YF(e,t){return ru(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Ynt(e,t){var r=e.get("coordinateSystem"),n=sE.get(r),i;return t&&t.coordSysDims&&(i=kt(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=xnt(l)}return a})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function qnt(e,t,r){var n,i;return r&&F(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function R0(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=uE(e)):(i=n.getSource(),o=i.sourceFormat===ii);var a=jnt(t),s=Ynt(t,a),l=r.useEncodeDefaulter,u=Ut(l)?l:l?be(Ott,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=XF(i,c),h=qnt(f.dimensions,r.createInvertedIndices,a),d=o?null:n.getSharedDataStore(f),p=Hnt(t,{schema:f,store:d}),v=new Vl(f,t);v.setCalculationInfo(p);var g=h!=null&&Znt(i)?function(m,_,y,w){return w===h?y:this.defaultDimValueGetter(m,_,y,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,g),v}function Znt(e){if(e.sourceFormat===ii){var t=Knt(e.data||[]);return!ct(M0(t))}}function Knt(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var qF=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();j1(qF);const Ea=qF;var Jnt=0,Qnt=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Jnt}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&kt(n,tit);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Et(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=jt(this.categories))},e}();function tit(e){return It(e)&&e.value!=null?e.value:e+""}const f3=Qnt;function h3(e){return e.type==="interval"||e.type==="log"}function eit(e,t,r,n){var i={},o=e[1]-e[0],a=i.interval=d9(o/t,!0);r!=null&&a<r&&(a=i.interval=r),n!=null&&a>n&&(a=i.interval=n);var s=i.intervalPrecision=ZF(a),l=i.niceTickExtent=[qe(Math.ceil(e[0]/a)*a,s),qe(Math.floor(e[1]/a)*a,s)];return rit(l,e),i}function P2(e){var t=Math.pow(10,NP(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,qe(r*t)}function ZF(e){return yo(e)+2}function p6(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function rit(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),p6(e,0,t),p6(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function d_(e,t){return e>=t[0]&&e<=t[1]}function p_(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function v_(e,t){return e*(t[1]-t[0])+t[0]}var KF=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new f3({})),ct(i)&&(i=new f3({categories:kt(i,function(o){return It(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Et(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),d_(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),p_(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(v_(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);a<l;++a){var u=n[a];i[a]=u,o[u]=a}for(var c=0;a<s;++a){for(;o[c]!=null;)c++;i.push(c),o[c]=a}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Ea);Ea.registerClass(KF);const JF=KF;var dl=qe,QF=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return d_(r,this._extent)},t.prototype.normalize=function(r){return p_(r,this._extent)},t.prototype.scale=function(r){return v_(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=ZF(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<o[0]&&(r?s.push({value:dl(o[0]-n,a)}):s.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(s.push({value:u}),u=dl(u+n,a),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:o[1];return i[1]>c&&(r?s.push({value:dl(c+n,a)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),a=1;a<n.length;a++){for(var s=n[a],l=n[a-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=dl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=yo(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=dl(r.value,i,!0);return kN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,a=o[1]-o[0];if(!!isFinite(a)){a<0&&(a=-a,o.reverse());var s=eit(o,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(n[0]=dl(Math.floor(n[0]/a)*a)),r.fixMax||(n[1]=dl(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Ea);Ea.registerClass(QF);const D0=QF;var tB=typeof Float32Array<"u",nit=tB?Float32Array:Array;function na(e){return ct(e)?tB?new Float32Array(e):e:new nit(e)}var d3="__ec_stack_";function wE(e){return e.get("stack")||d3+e.seriesIndex}function SE(e){return e.dim+e.index}function iit(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(te({bandWidth:i,axisKey:n,stackId:d3+o},e));for(var a=nB(t),s=[],o=0;o<e.count;o++){var l=a[n][d3+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function eB(e,t){var r=[];return t.eachSeriesByType(e,function(n){iB(n)&&r.push(n)}),r}function oit(e){var t={};F(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,g=p.count();v<g;++v){var m=p.get(d,v);t[h]?t[h].push(m):t[h]=[m]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,a=1;a<i.length;++a){var s=i[a]-i[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[n]=o}}return r}function rB(e){var t=oit(e),r=[];return F(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(a[1]-a[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(a[1]-a[0])/d.count()}var p=We(n.get("barWidth"),s),v=We(n.get("barMaxWidth"),s),g=We(n.get("barMinWidth")||(oB(n)?.5:1),s),m=n.get("barGap"),_=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:g,barGap:m,barCategoryGap:_,axisKey:SE(o),stackId:wE(n)})}),nB(r)}function nB(e){var t={};F(e,function(n,i){var o=n.axisKey,a=n.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return F(t,function(n,i){r[i]={};var o=n.stacks,a=n.bandWidth,s=n.categoryGap;if(s==null){var l=ve(o).length;s=Math.max(35-l*4,15)+"%"}var u=We(s,a),c=We(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),F(o,function(m){var _=m.maxWidth,y=m.minWidth;if(m.width){var w=m.width;_&&(w=Math.min(w,_)),y&&(w=Math.max(w,y)),m.width=w,f-=w+c*w,h--}else{var w=d;_&&_<w&&(w=Math.min(_,f)),y&&y>w&&(w=y),w!==d&&(m.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;F(o,function(m,_){m.width||(m.width=d),v=m,p+=m.width*(1+c)}),v&&(p-=v.width*c);var g=-p/2;F(o,function(m,_){r[i][_]=r[i][_]||{bandWidth:a,offset:g,width:m.width},g+=m.width*(1+c)})}),r}function ait(e,t,r){if(e&&t){var n=e[SE(t)];return n!=null&&r!=null?n[wE(r)]:n}}function sit(e,t){var r=eB(e,t),n=rB(r);F(r,function(i){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=wE(i),u=n[SE(s)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function lit(e){return{seriesType:e,plan:dE(),reset:function(t){if(!!iB(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=ru(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=uit(i,o),p=oB(t),v=t.get("barMinHeight")||0,g=c&&r.getDimensionIndex(c),m=r.getLayout("size"),_=r.getLayout("offset");return{progress:function(y,w){for(var T=y.count,S=p&&na(T*3),P=p&&l&&na(T*3),k=p&&na(T),A=n.master.getRect(),C=h?A.width:A.height,M,D=w.getStore(),B=0;(M=y.next())!=null;){var z=D.get(f?g:a,M),N=D.get(s,M),j=d,Z=void 0;f&&(Z=+z-D.get(a,M));var q=void 0,tt=void 0,Pt=void 0,Ot=void 0;if(h){var wt=n.dataToPoint([z,N]);if(f){var St=n.dataToPoint([Z,N]);j=St[0]}q=j,tt=wt[1]+_,Pt=wt[0]-j,Ot=m,Math.abs(Pt)<v&&(Pt=(Pt<0?-1:1)*v)}else{var wt=n.dataToPoint([N,z]);if(f){var St=n.dataToPoint([N,Z]);j=St[1]}q=wt[0]+_,tt=j,Pt=m,Ot=wt[1]-j,Math.abs(Ot)<v&&(Ot=(Ot<=0?-1:1)*v)}p?(S[B]=q,S[B+1]=tt,S[B+2]=h?Pt:Ot,P&&(P[B]=h?A.x:q,P[B+1]=h?tt:A.y,P[B+2]=C),k[M]=M):w.setItemLayout(M,{x:q,y:tt,width:Pt,height:Ot}),B+=3}p&&w.setLayout({largePoints:S,largeDataIndices:k,largeBackgroundPoints:P,valueAxisHorizontal:h})}}}}}}function iB(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function oB(e){return e.pipelineContext&&e.pipelineContext.large}function uit(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var cit=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},aB=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return e_(r.value,i4[Stt(Oc(this._minLevelUnit))]||i4.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return Ttt(r,n,i,a,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),a=mit(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(a),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=qn,n[1]+=qn),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-qn}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Jp.length,l=Math.min(cit(Jp,this._approxInterval,0,s),s-1);this._interval=Jp[l][1],this._minLevelUnit=Jp[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return we(r)?r:+pa(r)},t.prototype.contain=function(r){return d_(this.parse(r),this._extent)},t.prototype.normalize=function(r){return p_(this.parse(r),this._extent)},t.prototype.scale=function(r){return v_(r,this._extent)},t.type="time",t}(D0),Jp=[["second",rE],["minute",nE],["hour",Sd],["quarter-day",Sd*6],["half-day",Sd*12],["day",qn*1.2],["half-week",qn*3.5],["week",qn*7],["month",qn*31],["quarter",qn*95],["half-year",n4/2],["year",n4]];function fit(e,t,r,n){var i=pa(t),o=pa(r),a=function(p){return o4(i,p,n)===o4(o,p,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},f=function(){return c()&&a("minute")},h=function(){return f()&&a("second")},d=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function hit(e,t){return e/=qn,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function dit(e){var t=30*qn;return e/=t,e>6?6:e>3?3:e>2?2:1}function pit(e){return e/=Sd,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function v6(e,t){return e/=t?nE:rE,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function vit(e){return d9(e,!0)}function git(e,t,r){var n=new Date(e);switch(Oc(t)){case"year":case"month":n[wN(r)](0);case"day":n[SN(r)](1);case"hour":n[TN(r)](0);case"minute":n[PN(r)](0);case"second":n[EN(r)](0),n[AN(r)](0)}return n.getTime()}function mit(e,t,r,n){var i=1e4,o=yN,a=0;function s(C,M,D,B,z,N,j){for(var Z=new Date(M),q=M,tt=Z[B]();q<D&&q<=n[1];)j.push({value:q}),tt+=C,Z[z](tt),q=Z.getTime();j.push({value:q,notAdd:!0})}function l(C,M,D){var B=[],z=!M.length;if(!fit(Oc(C),n[0],n[1],r)){z&&(M=[{value:git(new Date(n[0]),C,r)},{value:n[1]}]);for(var N=0;N<M.length-1;N++){var j=M[N].value,Z=M[N+1].value;if(j!==Z){var q=void 0,tt=void 0,Pt=void 0,Ot=!1;switch(C){case"year":q=Math.max(1,Math.round(t/qn/365)),tt=iE(r),Pt=Ptt(r);break;case"half-year":case"quarter":case"month":q=dit(t),tt=Rc(r),Pt=wN(r);break;case"week":case"half-week":case"day":q=hit(t),tt=r_(r),Pt=SN(r),Ot=!0;break;case"half-day":case"quarter-day":case"hour":q=pit(t),tt=t0(r),Pt=TN(r);break;case"minute":q=v6(t,!0),tt=n_(r),Pt=PN(r);break;case"second":q=v6(t,!1),tt=i_(r),Pt=EN(r);break;case"millisecond":q=vit(t),tt=o_(r),Pt=AN(r);break}s(q,j,Z,tt,Pt,Ot,B),C==="year"&&D.length>1&&N===0&&D.unshift({value:D[0].value-q})}}for(var N=0;N<B.length;N++)D.push(B[N]);return B}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&a++<i;++d){var p=Oc(o[d]);if(!!wtt(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?Oc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(C,M){return C.value-M.value});for(var g=[],m=0;m<c.length;++m){var _=c[m].value;(m===0||c[m-1].value!==_)&&(g.push(c[m]),_>=n[0]&&_<=n[1]&&f++)}var y=(n[1]-n[0])/t;if(f>y*1.5&&h>y/1.5||(u.push(g),f>y||e===o[d]))break}c=[]}}}for(var w=yr(kt(u,function(C){return yr(C,function(M){return M.value>=n[0]&&M.value<=n[1]&&!M.notAdd})}),function(C){return C.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var P=w[d],k=0;k<P.length;++k)T.push({value:P[k].value,level:S-d});T.sort(function(C,M){return C.value-M.value});for(var A=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&A.push(T[d]);return A}Ea.registerClass(aB);const _it=aB;var g6=Ea.prototype,Ad=D0.prototype,yit=qe,bit=Math.floor,wit=Math.ceil,Qp=Math.pow,li=Math.log,TE=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new D0,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),a=Ad.getTicks.call(this,r);return kt(a,function(s){var l=s.value,u=qe(Qp(this.base,l));return u=l===i[0]&&this._fixMin?tv(u,o[0]):u,u=l===i[1]&&this._fixMax?tv(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=li(this.base);r=li(Math.max(0,r))/i,n=li(Math.max(0,n))/i,Ad.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=g6.getExtent.call(this);n[0]=Qp(r,n[0]),n[1]=Qp(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=tv(n[0],o[0])),this._fixMax&&(n[1]=tv(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=li(r[0])/li(n),r[1]=li(r[1])/li(n),g6.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=PK(i),a=r/i*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[qe(wit(n[0]/o)*o),qe(bit(n[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Ad.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=li(r)/li(this.base),d_(r,this._extent)},t.prototype.normalize=function(r){return r=li(r)/li(this.base),p_(r,this._extent)},t.prototype.scale=function(r){return r=v_(r,this._extent),Qp(this.base,r)},t.type="log",t}(Ea),sB=TE.prototype;sB.getMinorTicks=Ad.getMinorTicks;sB.getLabel=Ad.getLabel;function tv(e,t){return yit(e,yo(t))}Ea.registerClass(TE);const Sit=TE;var Tit=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ut(o)?this._modelMinNum=ev(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=ev(t,o));var a=this._modelMaxRaw=r.get("max",!0);if(Ut(a)?this._modelMaxNum=ev(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=ev(t,a)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=ct(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ha(l[0],1),ha(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:r-o[0]*a),l==null&&(l=t?i?i-1:NaN:n+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=Tm(s)||Tm(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[Eit[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=Pit[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),Pit={min:"_determinedMin",max:"_determinedMax"},Eit={min:"_dataMin",max:"_dataMax"};function Ait(e,t,r){var n=e.rawExtentInfo;return n||(n=new Tit(e,t,r),e.rawExtentInfo=n,n)}function ev(e,t){return t==null?null:Tm(t)?NaN:e.parse(t)}function lB(e,t){var r=e.type,n=Ait(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,a=t.ecModel;if(a&&r==="time"){var s=eB("bar",a),l=!1;if(F(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=rB(s),c=kit(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function kit(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],a=ait(n,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;F(a,function(d){s=Math.min(d.offset,s)});var l=-1/0;F(a,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=1-(s+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(s/u),{min:e,max:t}}function m6(e,t){var r=t,n=lB(e,r),i=n.extent,o=r.get("splitNumber");e instanceof Sit&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function Cit(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new JF({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new _it({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Ea.getClass(t)||D0)}}function Mit(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function N0(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Et(t)?function(n){return function(i){var o=e.scale.getLabel(i),a=n.replace("{value}",o!=null?o:"");return a}}(t):Ut(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(PE(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function PE(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function xit(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof JF?i=r.count():(n=r.getTicks(),i=n.length);var a=e.getLabelModel(),s=N0(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=s(f,c),d=a.getTextRect(h),p=Lit(d,a.get("rotate")||0);l?l.union(p):l=p}return l}}function Lit(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),a=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new ae(e.x,e.y,o,a);return s}function EE(e){var t=e.get("interval");return t==null?"auto":t}function uB(e){return e.type==="category"&&EE(e.getLabelModel())===0}function Iit(e,t){var r={};return F(e.mapDimensionsAll(t),function(n){r[YF(e,n)]=!0}),ve(r)}var Oit=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),_6=[],Rit={registerPreprocessor:BF,registerProcessor:$F,registerPostInit:wnt,registerPostUpdate:Snt,registerUpdateLifecycle:yE,registerAction:pu,registerCoordinateSystem:Tnt,registerLayout:Pnt,registerVisual:vu,registerTransform:Ant,registerLoading:zF,registerMap:Ent,registerImpl:tnt,PRIORITY:pnt,ComponentModel:Ce,ComponentView:ri,SeriesModel:ko,ChartView:Jn,registerComponentModel:function(e){Ce.registerClass(e)},registerComponentView:function(e){ri.registerClass(e)},registerSeriesModel:function(e){ko.registerClass(e)},registerChartView:function(e){Jn.registerClass(e)},registerSubTypeDefaulter:function(e,t){Ce.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){_K(e,t)}};function zr(e){if(ct(e)){F(e,function(t){zr(t)});return}ue(_6,e)>=0||(_6.push(e),Ut(e)&&(e={install:e}),e.install(Rit))}var o0=Oe();function Dit(e){return e.type==="category"?Fit(e):$it(e)}function Nit(e,t){return e.type==="category"?Bit(e,t):{ticks:kt(e.scale.getTicks(),function(r){return r.value})}}function Fit(e){var t=e.getLabelModel(),r=cB(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function cB(e,t){var r=fB(e,"labels"),n=EE(t),i=hB(r,n);if(i)return i;var o,a;return Ut(n)?o=vB(e,n):(a=n==="auto"?zit(e):n,o=pB(e,a)),dB(r,n,{labels:o,labelCategoryInterval:a})}function Bit(e,t){var r=fB(e,"ticks"),n=EE(t),i=hB(r,n);if(i)return i;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ut(n))o=vB(e,n,!0);else if(n==="auto"){var s=cB(e,e.getLabelModel());a=s.labelCategoryInterval,o=kt(s.labels,function(l){return l.tickValue})}else a=n,o=pB(e,a,!0);return dB(r,n,{ticks:o,tickCategoryInterval:a})}function $it(e){var t=e.scale.getTicks(),r=N0(e);return{labels:kt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function fB(e,t){return o0(e)[t]||(o0(e)[t]=[])}function hB(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function dB(e,t,r){return e.push({key:t,value:r}),r}function zit(e){var t=o0(e).autoInterval;return t!=null?t:o0(e).autoInterval=e.calculateCategoryInterval()}function Vit(e){var t=Uit(e),r=N0(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),a=i.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=s){var p=0,v=0,g=OP(r({value:l}),t.font,"center","top");p=g.width*1.3,v=g.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var m=h/c,_=d/f;isNaN(m)&&(m=1/0),isNaN(_)&&(_=1/0);var y=Math.max(0,Math.floor(Math.min(m,_))),w=o0(e.model),T=e.getExtent(),S=w.lastAutoInterval,P=w.lastTickCount;return S!=null&&P!=null&&Math.abs(S-y)<=1&&Math.abs(P-a)<=1&&S>y&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?y=S:(w.lastTickCount=a,w.lastAutoInterval=y,w.axisExtent0=T[0],w.axisExtent1=T[1]),y}function Uit(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function pB(e,t,r){var n=N0(e),i=e.scale,o=i.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=uB(e),h=a.get("showMinLabel")||f,d=a.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(g){var m={value:g};s.push(r?g:{formattedLabel:n(m),rawLabel:i.getLabel(m),tickValue:g})}return s}function vB(e,t,r){var n=e.scale,i=N0(e),o=[];return F(n.getTicks(),function(a){var s=n.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:i(a),rawLabel:s,tickValue:l})}),o}var y6=[0,1],Git=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return wK(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),b6(n,i.count())),da(t,y6,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),b6(n,i.count()));var o=da(t,n,y6,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=Nit(this,r),i=n.ticks,o=kt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return jit(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=kt(n,function(o){return kt(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return i},e.prototype.getViewLabels=function(){return Dit(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return Vit(this)},e}();function b6(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function jit(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),a,s;if(i===1)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;F(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,a={coord:t[i-1].coord+u*s},t.push(a)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(n?a.coord=o[1]:t.pop()),n&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=qe(d),p=qe(p),f?d>p:d<p}}const Wit=Git;function Hit(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new Rm(a,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:a,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return t}function Xit(e){var t=[];e.sort(function(v,g){return g.priority-v.priority});var r=new ae(0,0,0,0);function n(v){if(!v.ignore){var g=v.ensureState("emphasis");g.ignore==null&&(g.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new Rm(p.localRect,p.transform)),f||(f=new Rm(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function w6(e,t,r){var n=uu.createCanvas(),i=t.getWidth(),o=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var Yit=function(e){Ae(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||xm,typeof r=="string"?a=w6(r,n,i):It(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(V7(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=w6("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new ae(0,0,0,0);function c(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var y=new ae(0,0,0,0);y.copy(_),a.push(y)}else{for(var w=!1,T=1/0,S=0,P=0;P<a.length;++P){var k=a[P];if(k.intersect(_)){var A=new ae(0,0,0,0);A.copy(k),A.union(_),a[P]=A,w=!0;break}else if(l){u.copy(_),u.union(k);var C=_.width*_.height,M=k.width*k.height,D=u.width*u.height,B=D-C-M;B<T&&(T=B,S=P)}}if(l&&(a[S].union(_),w=!0),!w){var y=new ae(0,0,0,0);y.copy(_),a.push(y)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&En||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&En||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var g;do{g=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var m=f+1;m<a.length;)a[f].intersect(a[m])?(g=!0,a[f].union(a[m]),a.splice(m,1)):m++;f++}}while(g);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=n+"px"),o.width=r*i,o.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function p(v,g,m,_){if(a.clearRect(v,g,m,_),n&&n!=="transparent"){var y=void 0;V1(n)?(y=n.__canvasGradient||a3(a,n,{x:0,y:0,width:m,height:_}),n.__canvasGradient=y):jq(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,y=s3(a,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),a.save(),a.fillStyle=y||n,a.fillRect(v,g,m,_),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,v,g,m,_),a.restore())}!i||u?p(0,0,s,l):i.length&&F(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}($i);const E2=Yit;var S6=1e5,pl=314159,rv=.01,qit=.001;function Zit(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function Kit(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var Jit=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=ot({},n||{}),this.dpr=n.devicePixelRatio||xm,this._singleCanvas=o,this.root=t;var a=t.style;a&&(V7(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new E2(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[pl]=d,d.zlevel=pl,s.push(pl),this._domRoot=t}else{this._width=Xp(t,0,n),this._height=Xp(t,1,n);var u=this._domRoot=Kit(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(S6)),o||(o=n.ctx,o.save()),Il(o,s,i,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(S6)},e.prototype.paintOne=function(t,r){wF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;ES(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(pl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var g=o[v],m=g.ctx,_=a&&g.createRepaintRects(t,r,d._width,d._height),y=n?g.__startIndex:g.__drawIndex,w=!n&&g.incremental&&Date.now,T=w&&Date.now(),S=g.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(g.__startIndex===g.__endIndex)g.clear(!1,S,_);else if(y===g.__startIndex){var P=t[y];(!P.incremental||!P.notClear||n)&&g.clear(!1,S,_)}y===-1&&(console.error("For some unknown reason. drawIndex is -1"),y=g.__startIndex);var k,A=function(B){var z={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(k=y;k<g.__endIndex;k++){var N=t[k];if(N.__inHover&&(f=!0),i._doPaintEl(N,g,a,B,z,k===g.__endIndex-1),w){var j=Date.now()-T;if(j>15)break}}z.prevElClipPaths&&m.restore()};if(_)if(_.length===0)k=g.__endIndex;else for(var C=d.dpr,M=0;M<_.length;++M){var D=_[M];m.save(),m.beginPath(),m.rect(D.x*C,D.y*C,D.width*C,D.height*C),m.clip(),A(D),m.restore()}else m.save(),A(),m.restore();g.__drawIndex=k,g.__drawIndex<g.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Xt.wxa&&F(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,a){var s=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(Il(s,t,o,a),t.setPrevPaintRect(l))}else Il(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=pl);var n=this._layers[t];return n||(n=new E2("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?oe(n,this._layerConfig[t],!0):this._layerConfig[t-rv]&&oe(n,this._layerConfig[t-rv],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!n[t]&&!!Zit(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(r.dom,u.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+qit,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?rv:0),this._needsManuallyCompositing),c.__builtin__||AP("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&En&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,F(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?oe(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+rv){var a=this._layers[o];oe(a,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(ue(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=Xp(o,0,i),r=Xp(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(pl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[pl].dom;var r=new E2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Il(n,c,a,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const Qit=Jit;function gf(e){e.registerPainter("canvas",Qit)}var tot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return R0(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new De,i=Ri("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,u=Ri(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?a:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(ko);const eot=tot;function a0(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Yc(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],a=0;a<r.length;a++)o.push(Yc(e,t,r[a]));return o.join(" ")}}function gB(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ct(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var rot=function(e){mt(t,e);function t(r,n,i,o){var a=e.call(this)||this;return a.updateData(r,n,i,o),a}return t.prototype._createSymbol=function(r,n,i,o,a){this.removeAll();var s=Ri(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=not,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Yd(this.childAt(0))},t.prototype.downplay=function(){qd(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var a=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,n),u=a!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):hr(h,d,s,n),aN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Ao(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,a){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,g,m;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,g=o.hoverScale,m=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var _=o&&o.itemModel?o.itemModel:r.getItemModel(n),y=_.getModel("emphasis");u=y.getModel("itemStyle").getItemStyle(),f=_.getModel(["select","itemStyle"]).getItemStyle(),c=_.getModel(["blur","itemStyle"]).getItemStyle(),h=y.get("focus"),d=y.get("blurScope"),p=y.get("disabled"),v=hu(_),g=y.getShallow("scale"),m=_.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=vE(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),m&&s.attr("cursor",m);var S=r.getItemVisual(n,"style"),P=S.fill;if(s instanceof Sa){var k=s.style;s.useStyle(ot({image:k.image,x:k.x,y:k.y,width:k.width,height:k.height},S))}else s.__isEmptyBrush?s.useStyle(ot({},S)):s.useStyle(S),s.style.decal=null,s.setColor(P,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var A=r.getItemVisual(n,"liftZ"),C=this._z2;A!=null?C==null&&(this._z2=s.z2,s.z2+=A):C!=null&&(s.z2=C,this._z2=null);var M=a&&a.useNameLabel;df(s,v,{labelFetcher:l,labelDataIndex:n,defaultText:D,inheritColor:P,defaultOpacity:S.opacity});function D(N){return M?r.getName(N):a0(r,N)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var B=s.ensureState("emphasis");B.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var z=g==null||g===!0?Math.max(1.1,3/this._sizeY):isFinite(g)&&g>0?+g:1;B.scaleX=this._sizeX*z,B.scaleY=this._sizeY*z,this.setSymbolScale(1),Ql(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),a=ie(this).dataIndex,s=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&tu(l,{style:{opacity:0}},n,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();tu(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return mF(r.getItemVisual(n,"symbolSize"))},t}(De);function not(e,t){this.parent.drift(e,t)}const g_=rot;function A2(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function T6(e){return e!=null&&!It(e)&&(e={isIgnore:e}),e||{}}function P6(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:hu(t),cursorStyle:t.get("cursor")}}var iot=function(){function e(t){this.group=new De,this._SymbolCtor=t||g_}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=T6(r);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=P6(t),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(A2(t,h,f,r)){var d=new a(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!A2(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==v)n.remove(d),d=new a(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var m={x:p[0],y:p[1]};s?d.attr(m):hr(d,m,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=P6(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=T6(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(A2(r,a,o,n)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){hf(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const mB=iot;function _B(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=oot(i,r),a=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(a),c=s==="x"||s==="radius"?1:0,f=kt(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return ru(t,f[0])&&(h=!0,f[0]=d),ru(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function oot(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:we(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function yB(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,n),a[1-o]=i,t.dataToPoint(a)}function aot(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function sot(e,t,r,n,i,o,a,s){for(var l=aot(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],g=_B(i,t,a),m=e.getLayout("points")||[],_=t.getLayout("points")||[],y=0;y<l.length;y++){var w=l[y],T=!0,S=void 0,P=void 0;switch(w.cmd){case"=":S=w.idx*2,P=w.idx1*2;var k=m[S],A=m[S+1],C=_[P],M=_[P+1];(isNaN(k)||isNaN(A))&&(k=C,A=M),u.push(k,A),c.push(C,M),f.push(r[S],r[S+1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var D=w.idx,B=g.dataDimsForPoint,z=i.dataToPoint([t.get(B[0],D),t.get(B[1],D)]);P=D*2,u.push(z[0],z[1]),c.push(_[P],_[P+1]);var N=yB(g,i,t,D);f.push(N[0],N[1]),h.push(n[P],n[P+1]),v.push(t.getRawIndex(D));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,nt){return v[Y]-v[nt]});for(var j=u.length,Z=na(j),q=na(j),tt=na(j),Pt=na(j),Ot=[],y=0;y<p.length;y++){var wt=p[y],St=y*2,Ht=wt*2;Z[St]=u[Ht],Z[St+1]=u[Ht+1],q[St]=c[Ht],q[St+1]=c[Ht+1],tt[St]=f[Ht],tt[St+1]=f[Ht+1],Pt[St]=h[Ht],Pt[St+1]=h[Ht+1],Ot[y]=d[wt]}return{current:Z,next:q,stackedOnCurrent:tt,stackedOnNext:Pt,status:Ot}}var $a=Math.min,za=Math.max;function Ul(e,t){return isNaN(e)||isNaN(t)}function p3(e,t,r,n,i,o,a,s,l){for(var u,c,f,h,d,p,v=r,g=0;g<n;g++){var m=t[v*2],_=t[v*2+1];if(v>=i||v<0)break;if(Ul(m,_)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](m,_),f=m,h=_;else{var y=m-u,w=_-c;if(y*y+w*w<.5){v+=o;continue}if(a>0){for(var T=v+o,S=t[T*2],P=t[T*2+1];S===m&&P===_&&g<n;)g++,T+=o,v+=o,S=t[T*2],P=t[T*2+1],m=t[v*2],_=t[v*2+1],y=m-u,w=_-c;var k=g+1;if(l)for(;Ul(S,P)&&k<n;)k++,T+=o,S=t[T*2],P=t[T*2+1];var A=.5,C=0,M=0,D=void 0,B=void 0;if(k>=n||Ul(S,P))d=m,p=_;else{C=S-u,M=P-c;var z=m-u,N=S-m,j=_-c,Z=P-_,q=void 0,tt=void 0;if(s==="x"){q=Math.abs(z),tt=Math.abs(N);var Pt=C>0?1:-1;d=m-Pt*q*a,p=_,D=m+Pt*tt*a,B=_}else if(s==="y"){q=Math.abs(j),tt=Math.abs(Z);var Ot=M>0?1:-1;d=m,p=_-Ot*q*a,D=m,B=_+Ot*tt*a}else q=Math.sqrt(z*z+j*j),tt=Math.sqrt(N*N+Z*Z),A=tt/(tt+q),d=m-C*a*(1-A),p=_-M*a*(1-A),D=m+C*a*A,B=_+M*a*A,D=$a(D,za(S,m)),B=$a(B,za(P,_)),D=za(D,$a(S,m)),B=za(B,$a(P,_)),C=D-m,M=B-_,d=m-C*q/tt,p=_-M*q/tt,d=$a(d,za(u,m)),p=$a(p,za(c,_)),d=za(d,$a(u,m)),p=za(p,$a(c,_)),C=m-d,M=_-p,D=m+C*tt/q,B=_+M*tt/q}e.bezierCurveTo(f,h,d,p,m,_),f=D,h=B}else e.lineTo(m,_)}u=m,c=_,v+=o}return g}var bB=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),lot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new bB},t.prototype.buildPath=function(r,n){var i=n.points,o=0,a=i.length/2;if(n.connectNulls){for(;a>0&&Ul(i[a*2-2],i[a*2-1]);a--);for(;o<a&&Ul(i[o*2],i[o*2+1]);o++);}for(;o<a;)o+=p3(r,i,o,a,a,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,a=Jl.CMD,s,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,g=void 0,m=void 0,_=void 0,y=void 0;switch(h){case a.M:s=o[f++],l=o[f++];break;case a.L:if(d=o[f++],p=o[f++],y=u?(r-s)/(d-s):(r-l)/(p-l),y<=1&&y>=0){var w=u?(p-l)*y+l:(d-s)*y+s;return u?[r,w]:[w,r]}s=d,l=p;break;case a.C:d=o[f++],p=o[f++],v=o[f++],g=o[f++],m=o[f++],_=o[f++];var T=u?Am(s,d,v,m,r,c):Am(l,p,g,_,r,c);if(T>0)for(var S=0;S<T;S++){var P=c[S];if(P<=1&&P>=0){var w=u?or(l,p,g,_,P):or(s,d,v,m,P);return u?[r,w]:[w,r]}}s=m,l=_;break}}},t}(fe),uot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(bB),cot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new uot},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,a=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&Ul(i[s*2-2],i[s*2-1]);s--);for(;a<s&&Ul(i[a*2],i[a*2+1]);a++);}for(;a<s;){var u=p3(r,i,a,s,s,1,n.smooth,l,n.connectNulls);p3(r,o,a+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),a+=u+1,r.closePath()}},t}(fe);function wB(e,t,r,n,i){var o=e.getArea(),a=o.x,s=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var f=new Ke({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ut(i)?function(g){i(g,f)}:null;Ao(f,{shape:{width:l,height:u,x:a,y:s}},r,null,n,v)}return f}function SB(e,t,r){var n=e.getArea(),i=qe(n.r0,1),o=qe(n.r,1),a=new I0({shape:{cx:qe(e.cx,1),cy:qe(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=n.startAngle:a.shape.r=i,Ao(a,{shape:{endAngle:n.endAngle,r:o}},r)}return a}function TB(e,t,r,n,i){if(e){if(e.type==="polar")return SB(e,t,r);if(e.type==="cartesian2d")return wB(e,t,r,n,i)}else return null;return null}function mf(e,t){return e.type===t}function E6(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function A6(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function k6(e,t){var r=A6(e),n=r[0],i=r[1],o=A6(t),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function C6(e){return we(e)?e:e?.5:0}function fot(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=na(n*2),o=0;o<n;o++){var a=yB(r,e,t,o);i[o*2]=a[0],i[o*2+1]=a[1]}return i}function Va(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,a=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&f.push(e[s],e[s+1]);e=f}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],a.push(l[0],l[1]),a.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function hot(e,t){var r=[],n=e.length,i,o;function a(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=UZ(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<n;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(a(o,l,t)):i&&r.push(a(i,l,0),a(i,l,t));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),o=l}return r}function dot(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,a=n.length-1;a>=0;a--){var s=e.getDimensionInfo(n[a].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){o=n[a];break}}if(!!o){var l=t.getAxis(i),u=kt(o.stops,function(y){return{coord:l.toGlobalCoord(l.dataToCoord(y.value)),color:y.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=hot(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,g=h[d-1].coord+p,m=g-v;if(m<.001)return"transparent";F(h,function(y){y.offset=(y.coord-v)/m}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var _=new qP(0,0,0,0,h,!0);return _[i]=v,_[i+"2"]=g,_}}}function pot(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&vot(o,t))){var a=t.mapDimension(o.dim),s={};return F(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function vot(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),a=0;a<i;a+=o)if(g_.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function got(e,t){return isNaN(e)||isNaN(t)}function mot(e){for(var t=e.length/2;t>0&&got(e[t*2-2],e[t*2-1]);t--);return t-1}function M6(e,t){return[e[t*2],e[t*2+1]]}function _ot(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,a,s=0,l=-1,u=0;u<n;u++)if(a=e[u*2+i],!(isNaN(a)||isNaN(e[u*2+1-i]))){if(u===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=u;break}s=u,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function PB(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<ei.length;t++)if(e.get([ei[t],"endLabel","show"]))return!0;return!1}function k2(e,t,r,n){if(mf(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=PB(n)?function(d,p){e._endLabelOnDuring(d,p,a,s,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=wB(t,r,n,function(){var d=e._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return SB(t,r,n)}function yot(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",a=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var bot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new De,n=new mB;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,g=this._polygon,m=this._lineGroup,_=r.get("animation"),y=!c.isEmpty(),w=c.get("origin"),T=_B(a,l,w),S=y&&fot(a,l,T),P=r.get("showSymbol"),k=r.get("connectNulls"),A=P&&!h&&pot(r,l,a),C=this._data;C&&C.eachItemGraphicEl(function(nt,K){nt.__temp&&(s.remove(nt),C.setItemGraphicEl(K,null))}),P||p.remove(),s.add(m);var M=h?!1:r.get("step"),D;a&&a.getArea&&r.get("clip",!0)&&(D=a.getArea(),D.width!=null?(D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2):D.r0&&(D.r0-=.5,D.r+=.5)),this._clipShapeForSymbol=D;var B=dot(l,a,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===a.type&&M===this._step))P&&p.updateData(l,{isIgnore:A,clipShape:D,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),_&&this._initSymbolLabelAnimation(l,a,D),M&&(f=Va(f,a,M,k),S&&(S=Va(S,a,M,k))),v=this._newPolyline(f),y?g=this._newPolygon(f,S):g&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,eu(B)),m.setClipPath(k2(this,a,!0,r));else{y&&!g?g=this._newPolygon(f,S):g&&!y&&(m.remove(g),g=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,eu(B));var z=m.getClipPath();if(z){var N=k2(this,a,!1,r);Ao(z,{shape:N.shape},r)}else m.setClipPath(k2(this,a,!0,r));P&&p.updateData(l,{isIgnore:A,clipShape:D,disableAnimation:!0,getSymbolPoint:function(nt){return[f[nt*2],f[nt*2+1]]}}),(!E6(this._stackedOnPoints,S)||!E6(this._points,f))&&(_?this._doUpdateAnimation(l,S,a,i,M,w,k):(M&&(f=Va(f,a,M,k),S&&(S=Va(S,a,M,k))),v.setShape({points:f}),g&&g.setShape({points:f,stackedOnPoints:S})))}var j=r.getModel("emphasis"),Z=j.get("focus"),q=j.get("blurScope"),tt=j.get("disabled");if(v.useStyle(te(u.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),Zd(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var Pt=v.getState("emphasis").style;Pt.lineWidth=+v.style.lineWidth+1}ie(v).seriesIndex=r.seriesIndex,Ql(v,Z,q,tt);var Ot=C6(r.get("smooth")),wt=r.get("smoothMonotone");if(v.setShape({smooth:Ot,smoothMonotone:wt,connectNulls:k}),g){var St=l.getCalculationInfo("stackedOnSeries"),Ht=0;g.useStyle(te(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),St&&(Ht=C6(St.get("smooth"))),g.setShape({smooth:Ot,stackedOnSmooth:Ht,smoothMonotone:wt,connectNulls:k}),Zd(g,r,"areaStyle"),ie(g).seriesIndex=r.seriesIndex,Ql(g,Z,q,tt)}var Y=function(nt){o._changePolyState(nt)};l.eachItemGraphicEl(function(nt){nt&&(nt.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=a,this._stackedOnPoints=S,this._points=f,this._step=M,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),g&&this.packEventData(r,g))},t.prototype.packEventData=function(r,n){ie(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var a=r.getData(),s=Kl(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),u=a.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new g_(a,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,a.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else Jn.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var a=r.getData(),s=Kl(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else Jn.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;US(this._polyline,r),n&&US(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new lot({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new cot({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,a,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):n.type==="polar"&&(o=s.dim==="angle",a=!0);var u=r.hostModel,c=u.get("animationDuration");Ut(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ut(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var g=[d.x,d.y],m=void 0,_=void 0,y=void 0;if(i)if(a){var w=i,T=n.pointToCoord(g);o?(m=w.startAngle,_=w.endAngle,y=-T[1]/180*Math.PI):(m=w.r0,_=w.r,y=T[0])}else{var S=i;o?(m=S.x,_=S.x+S.width,y=d.x):(m=S.y+S.height,_=S.y,y=d.y)}var P=_===m?0:(y-m)/(_-m);l&&(P=1-P);var k=Ut(f)?f(p):c*P+h,A=v.getSymbolPath(),C=A.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:k}),C&&C.animateFrom({style:{opacity:0}},{duration:300,delay:k}),A.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(PB(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new Je({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=mot(l);c>=0&&(df(s,hu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?gB(a,d):a0(a,f)},enableTextSetter:!0},yot(o,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,a,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,g=l.getBaseAxis(),m=g.isHorizontal(),_=g.inverse,y=n.shape,w=_?m?y.x:y.y+y.height:m?y.x+y.width:y.y,T=(m?v:0)*(_?-1:1),S=(m?0:-v)*(_?-1:1),P=m?"x":"y",k=_ot(f,w,P),A=k.range,C=A[1]-A[0],M=void 0;if(C>=1){if(C>1&&!d){var D=M6(f,A[0]);u.attr({x:D[0]+T,y:D[1]+S}),a&&(M=h.getRawValue(A[0]))}else{var D=c.getPointOn(w,P);D&&u.attr({x:D[0]+T,y:D[1]+S});var B=h.getRawValue(A[0]),z=h.getRawValue(A[1]);a&&(M=VK(i,p,B,z,k.t))}o.lastFrameIndex=A[0]}else{var N=r===1||o.lastFrameIndex>0?A[0]:0,D=M6(f,N);a&&(M=h.getRawValue(N)),u.attr({x:D[0]+T,y:D[1]+S})}a&&J1(u).setLabelText(M)}},t.prototype._doUpdateAnimation=function(r,n,i,o,a,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=sot(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,g=h.stackedOnNext;if(a&&(d=Va(h.current,i,a,l),p=Va(h.stackedOnCurrent,i,a,l),v=Va(h.next,i,a,l),g=Va(h.stackedOnNext,i,a,l)),k6(d,v)>3e3||c&&k6(p,g)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:g}));return}u.shape.__points=h.current,u.shape.points=d;var m={shape:{points:v}};h.current!==d&&(m.shape.__points=h.next),u.stopAnimation(),hr(u,m,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),hr(c,{shape:{stackedOnPoints:g}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var _=[],y=h.status,w=0;w<y.length;w++){var T=y[w].cmd;if(T==="="){var S=r.getItemGraphicEl(y[w].idx1);S&&_.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var P=u.shape.__points,k=0;k<_.length;k++){var A=_[k].el,C=_[k].ptIdx*2;A.x=P[C],A.y=P[C+1],A.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,a){o.__temp&&(n.remove(o),i.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(Jn);const wot=bot;function AE(e,t){return{seriesType:e,plan:dE(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(!!i){var s=kt(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");ru(n,s[0])&&(s[0]=u),ru(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,g=a&&na(v*l),m=[],_=[],y=d.start,w=0;y<d.end;y++){var T=void 0;if(l===1){var S=c.get(f,y);T=i.dataToPoint(S,null,_)}else m[0]=c.get(f,y),m[1]=c.get(h,y),T=i.dataToPoint(m,null,_);a?(g[w++]=T[0],g[w++]=T[1]):p.setItemLayout(y,T.slice())}a&&p.setLayout("points",g)}}}}}}var Sot={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},Tot=function(e){return Math.round(e.length/2)};function EB(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=i.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),u=a.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Et(o)?p=Sot[o]:Ut(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,Tot))}}}}}function F0(e){e.registerChartView(wot),e.registerSeriesModel(eot),e.registerLayout(AE("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,EB("line"))}var AB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return R0(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),a=o.getLayout("offset"),s=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=a+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(ko);ko.registerClass(AB);const x6=AB;var Pot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return R0(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=t_(x6.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(x6);const Eot=Pot;var Aot=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),kot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new Aot},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-a)*.5,u=a+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),g=Math.sin(c),m=Math.cos(f),_=Math.sin(f);p?(r.moveTo(v*a+i,g*a+o),r.arc(v*u+i,g*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*s+i,g*s+o),r.arc(i,o,s,c,f,!h),r.arc(m*u+i,_*u+o,l,f-Math.PI*2,f-Math.PI,!h),a!==0&&r.arc(i,o,a,f,c,h)},t}(fe);const L6=kot;function Cot(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var a=i.position;if(!a||a instanceof Array)return Lm(n,i,o);var s=e(a),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,g=u.endAngle,m=(v+g)/2,_=r?Math.abs(h-d)/2:0,y=Math.cos,w=Math.sin,T=c+h*y(v),S=f+h*w(v),P="left",k="top";switch(s){case"startArc":T=c+(d-l)*y(m),S=f+(d-l)*w(m),P="center",k="top";break;case"insideStartArc":T=c+(d+l)*y(m),S=f+(d+l)*w(m),P="center",k="bottom";break;case"startAngle":T=c+p*y(v)+nv(v,l+_,!1),S=f+p*w(v)+iv(v,l+_,!1),P="right",k="middle";break;case"insideStartAngle":T=c+p*y(v)+nv(v,-l+_,!1),S=f+p*w(v)+iv(v,-l+_,!1),P="left",k="middle";break;case"middle":T=c+p*y(m),S=f+p*w(m),P="center",k="middle";break;case"endArc":T=c+(h+l)*y(m),S=f+(h+l)*w(m),P="center",k="bottom";break;case"insideEndArc":T=c+(h-l)*y(m),S=f+(h-l)*w(m),P="center",k="top";break;case"endAngle":T=c+p*y(g)+nv(g,l+_,!0),S=f+p*w(g)+iv(g,l+_,!0),P="left",k="middle";break;case"insideEndAngle":T=c+p*y(g)+nv(g,-l+_,!0),S=f+p*w(g)+iv(g,-l+_,!0),P="right",k="middle";break;default:return Lm(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=P,n.verticalAlign=k,n}}function Mot(e,t,r,n){if(we(n)){e.setTextConfig({rotation:n});return}else if(ct(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,a=i.clockwise?i.endAngle:i.startAngle,s=(o+a)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function nv(e,t,r){return t*Math.sin(e)*(r?-1:1)}function iv(e,t,r){return t*Math.cos(e)*(r?1:-1)}var C2=Math.max,M2=Math.min;function xot(e,t){var r=e.getArea&&e.getArea();if(mf(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var Lot=function(e){mt(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){hf(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var a=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=Iot(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,v=xot(u,s);a.removeClipPath();var g=r.get("roundCap",!0),m=r.get("showBackground",!0),_=r.getModel("backgroundStyle"),y=_.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,P=o&&o.type==="changeAxisOrder";function k(M){var D=ov[u.type](s,M),B=$ot(u,f,D);return B.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&B.setShape("r",y),w[M]=B,B}s.diff(l).add(function(M){var D=s.getItemModel(M),B=ov[u.type](s,M,D);if(m&&k(M),!(!s.hasValue(M)||!N6[u.type](B))){var z=!1;p&&(z=I6[u.type](v,B));var N=O6[u.type](r,s,M,B,f,h,c.model,!1,g);d&&(N.forceLabelAnimation=!0),F6(N,s,M,D,B,r,f,u.type==="polar"),S?N.attr({shape:B}):d?R6(d,h,N,B,M,f,!1,!1):Ao(N,{shape:B},r,M),s.setItemGraphicEl(M,N),a.add(N),N.ignore=z}}).update(function(M,D){var B=s.getItemModel(M),z=ov[u.type](s,M,B);if(m){var N=void 0;T.length===0?N=k(D):(N=T[D],N.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&N.setShape("r",y),w[M]=N);var j=ov[u.type](s,M),Z=CB(f,j,u);hr(N,{shape:Z},h,M)}var q=l.getItemGraphicEl(D);if(!s.hasValue(M)||!N6[u.type](z)){a.remove(q);return}var tt=!1;if(p&&(tt=I6[u.type](v,z),tt&&a.remove(q)),q?aN(q):q=O6[u.type](r,s,M,z,f,h,c.model,!!q,g),d&&(q.forceLabelAnimation=!0),P){var Pt=q.getTextContent();if(Pt){var Ot=J1(Pt);Ot.prevValue!=null&&(Ot.prevValue=Ot.value)}}else F6(q,s,M,B,z,r,f,u.type==="polar");S?q.attr({shape:z}):d?R6(d,h,q,z,M,f,!0,P):hr(q,{shape:z},r,M,null),s.setItemGraphicEl(M,q),q.ignore=tt,a.add(q)}).remove(function(M){var D=l.getItemGraphicEl(M);D&&qS(D,r,M)}).execute();var A=this._backgroundGroup||(this._backgroundGroup=new De);A.removeAll();for(var C=0;C<w.length;++C)A.add(w[C]);a.add(A),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(r,n,i){this._clear(),$6(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),$6(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&TB(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,s,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(a,s){var l=i(s);l=l==null?NaN:l,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:kt(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,a=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],i.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var a=this._dataSort(r,i,n);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){qS(o,r,ie(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(Jn),I6={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=C2(t.x,e.x),s=M2(t.x+t.width,i),l=C2(t.y,e.y),u=M2(t.y+t.height,o),c=s<a,f=u<l;return t.x=c&&a>i?s:a,t.y=f&&l>o?u:l,t.width=c?0:s-a,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=M2(t.r,e.r),o=C2(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},O6={cartesian2d:function(e,t,r,n,i,o,a,s,l){var u=new Ke({shape:ot({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,a,s,l){var u=!i&&l?L6:I0,c=new u({shape:n,z2:1});c.name="item";var f=kB(i);if(c.calculateTextPosition=Cot(f,{isRoundCap:u===L6}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(s?hr:Ao)(c,{shape:p},o)}return c}};function Iot(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function R6(e,t,r,n,i,o,a,s){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?hr:Ao)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?hr:Ao)(r,{shape:u},c,i)}function D6(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var Oot=["x","y","width","height"],Rot=["cx","cy","r","startAngle","endAngle"],N6={cartesian2d:function(e){return!D6(e,Oot)},polar:function(e){return!D6(e,Rot)}},ov={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?Not(r,n):0,o=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+a*i/2,width:n.width-o*i,height:n.height-a*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function Dot(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function kB(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function F6(e,t,r,n,i,o,a,s){var l=t.getItemVisual(r,"style");s||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=s?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=hu(n);df(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:a0(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(s&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,Mot(e,d==="outside"?c:d,kB(a),n.get(["label","rotate"]))}ott(h,f,o.getRawValue(r),function(v){return gB(t,v)});var p=n.getModel(["emphasis"]);Ql(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),Zd(e,n),Dot(i)&&(e.style.fill="none",e.style.stroke="none",F(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function Not(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var Fot=function(){function e(){}return e}(),B6=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new Fot},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[a]=i[c+2],s[o]=i[c+o],s[a]=i[c+a],r.rect(s[0],s[1],l[0],l[1])},t}(fe);function $6(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new B6({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new B6({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=a,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),ie(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",z6),f.on("mousemove",z6)),r&&r.push(f)}var z6=c_(function(e){var t=this,r=Bot(t,e.offsetX,e.offsetY);ie(t).dataIndex=r>=0?r:null},30,!1);function Bot(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],s[n]=o[h+n],s[i]=o[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[c]}return-1}function CB(e,t,r){if(mf(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function $ot(e,t,r){var n=e.type==="polar"?I0:Ke;return new n({shape:CB(t,r,e),silent:!0,z2:0})}const zot=Lot;function m_(e){e.registerChartView(zot),e.registerSeriesModel(Eot),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,be(sit,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,lit("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,EB("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var Vot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return R0(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(ko);const Uot=Vot;var MB=4,Got=function(){function e(){}return e}(),jot=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new Got},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<MB,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-o[0]/2,s.y=d-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,a=this.softClipShape,s;if(!!o){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||a&&!a.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-s/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var a=this.hoverDataIdx=this.findDataIndex(r,n);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new ae(l-a/2,u-s/2,c-l+a,f-u+s)}return r},t}(fe),Wot=function(){function e(){this.group=new De}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new jot({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=Ri(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<MB;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ie(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const Hot=Wot;var Xot=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=AE("").reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,a=o.large;return(!i||a!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=a?new Hot:new mB,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(Jn);const Yot=Xot;var qot=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Ce);const Zot=qot;var v3=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Si).models[0]},t.type="cartesian2dAxis",t}(Ce);Bi(v3,Oit);var xB={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Kot=oe({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},xB),kE=oe({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},xB),Jot=oe({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},kE),Qot=te({logBase:10},kE);const tat={category:Kot,value:kE,time:Jot,log:Qot};var eat={value:1,category:1,time:1,log:1};function V6(e,t,r,n){F(eat,function(i,o){var a=oe(oe({},tat[o],!0),n,!0),s=function(l){mt(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=e0(this),d=h?a_(c):{},p=f.getTheme();oe(c,p.get(o+"Axis")),oe(c,this.getDefaultOption()),c.type=U6(c),h&&Xc(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=f3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=a,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",U6)}function U6(e){return e.type||(e.data?"category":"value")}var rat=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return kt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),yr(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const nat=rat;var g3=["x","y"];function G6(e){return e.type==="interval"||e.type==="time"}var iat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=g3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!G6(r)||!G6(n))){var i=r.getExtent(),o=n.getExtent(),a=this.dataToPoint([i[0],o[0]]),s=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(s[0]-a[0])/l,f=(s[1]-a[1])/u,h=a[0]-i[0]*c,d=a[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=G1([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),a=this.getArea(),s=new ae(i[0],i[1],o[0]-i[0],o[1]-i[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return Qr(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(a,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,a=i.getExtent(),s=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return Qr(i,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=a.coordToData(a.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),a=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-o;return new ae(i,o,a,s)},t}(nat),oat=function(e){mt(t,e);function t(r,n,i,o,a){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Wit);const aat=oat;function m3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var g={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=g[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),wi(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-m:m,o.z2=1,o}function j6(e){return e.get("coordinateSystem")==="cartesian2d"}function W6(e){var t={xAxisModel:null,yAxisModel:null};return F(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Si).models[0];t[n]=o}),t}var x2=Math.log;function sat(e,t,r){var n=D0.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),a=i.length-1,s=n.getInterval.call(r),l=lB(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=x2(e.base);u=[x2(u[0])/h,x2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],g=u[1];if(c&&f)p=(g-v)/a;else if(c)for(g=u[0]+p*a;g<u[1]&&isFinite(g)&&isFinite(u[1]);)p=P2(p),g=u[0]+p*a;else if(f)for(v=u[1]-p*a;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=P2(p),v=u[1]-p*a;else{var m=e.getTicks().length-1;m>a&&(p=P2(p));var _=p*a;g=Math.ceil(u[1]/p)*p,v=qe(g-_),v<0&&u[0]>=0?(v=0,g=qe(_)):g>0&&u[1]<=0&&(g=0,v=-qe(_))}var y=(i[0].value-o[0].value)/s,w=(i[a].value-o[a].value)/s;n.setExtent.call(e,v+p*y,g+p*w),n.setInterval.call(e,p),(y||w)&&n.setNiceExtent.call(e,v+p,g-p)}var lat=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=g3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(a){var s,l=ve(a),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=a[h],p=d.model,v=d.scale;h3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(m6(v,p),h3(v)&&(s=d))}c.length&&(s||(s=c.pop(),m6(s.scale,s.model)),F(c,function(g){sat(g.scale,g.model,s.scale)}))}}i(n.x),i(n.y);var o={};F(n.x,function(a){H6(n,"y",a,o)}),F(n.y,function(a){H6(n,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),a=Ms(i,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&(F(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=xit(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);a[f]-=c[f]+h,u.position==="top"?a.y+=c.height+h:u.position==="left"&&(a.x+=c.width+h)}}}),l()),F(this._coordsList,function(u){u.calcAffineTransform()});function l(){F(s,function(u){var c=u.isHorizontal(),f=c?[0,a.width]:[0,a.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),uat(u,c?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}It(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Si).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Si).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,ue(a,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,F(s.x,function(c,f){F(s.y,function(h,d){var p="x"+f+"y"+d,v=new iat(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!L2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var p=new aat(c,Cit(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),s[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){F(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(j6(i)){var o=W6(i),a=o.xAxisModel,s=o.yAxisModel;if(!L2(a,r)||!L2(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){F(Iit(i,o.dim),function(a){o.scale.unionExtentFromData(i,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return F(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);ue(r,o)<0&&r.push(o),ue(n,a)<0&&n.push(a)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var a=new e(i,t,r);a.name="grid_"+o,a.resize(i,r,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(!!j6(i)){var o=W6(i),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},e.dimensions=g3,e}();function L2(e,t){return e.getCoordSysModel()===t}function H6(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)X6(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&X6(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function X6(e){return e&&e.type!=="category"&&e.type!=="time"&&Mit(e)}function uat(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const cat=lat;var ds=Math.PI,Gl=function(){function e(t,r){this.group=new De,this.opt=r,this.axisModel=t,te(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new De({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!Y6[t]},e.prototype.add=function(t){Y6[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=h9(r-t),o,a;return Om(i)?(a=n>0?"top":"bottom",o="center"):Om(i-ds)?(a=n>0?"bottom":"top",o="center"):(a="middle",i>0&&i<ds?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),Y6={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(Qr(s,s,a),Qr(l,l,a));var c=ot({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new Cs({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});Jd(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Et(h)&&(h=[h,h]),(Et(d)||we(d))&&(d=[d,d]);var p=vE(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],g=d[1];F([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(m,_){if(h[_]!=="none"&&h[_]!=null){var y=Ri(h[_],-v/2,-g/2,v,g,c.stroke,!0),w=m.r+m.offset,T=u?l:s;y.attr({rotation:m.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(y)}})}}},axisTickLabel:function(e,t,r,n){var i=dat(r,n,t,e),o=vat(r,n,t,e);if(hat(t,o,i),pat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=Hit(kt(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));Xit(a)}},axisName:function(e,t,r,n){var i=wi(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,Z6(o)?e.labelOffset+a*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*ds/180);var p;Z6(o)?h=Gl.innerTextLayout(e.rotation,d!=null?d:e.rotation,a):(h=fat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),g=t.get("nameTruncate",!0)||{},m=g.ellipsis,_=wi(e.nameTruncateMaxWidth,g.maxWidth,p),y=new Je({x:f[0],y:f[1],rotation:h.rotation,silent:Gl.isLabelSilent(t),style:pn(s,{text:i,font:v,overflow:"truncate",width:_,ellipsis:m,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(QP({el:y,componentModel:t,itemName:i}),y.__fullText=i,y.anid="name",t.get("triggerEvent")){var w=Gl.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,ie(y).eventData=w}n.add(y),y.updateTransform(),r.add(y),y.decomposeTransform()}}};function fat(e,t,r,n){var i=h9(r-e),o,a,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return Om(i-ds/2)?(a=l?"bottom":"top",o="center"):Om(i-ds*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<ds*1.5&&i>ds/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function hat(e,t,r){if(!uB(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Nn(o),Nn(u)):q6(o,a)&&(n?(Nn(a),Nn(c)):(Nn(o),Nn(u))),i===!1?(Nn(s),Nn(f)):q6(l,s)&&(i?(Nn(l),Nn(h)):(Nn(s),Nn(f)))}}function Nn(e){e&&(e.ignore=!0)}function q6(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=xP([]);return LP(i,i,-e.rotation),r.applyTransform(xc([],i,e.getLocalTransform())),n.applyTransform(xc([],i,t.getLocalTransform())),r.intersect(n)}}function Z6(e){return e==="middle"||e==="center"}function LB(e,t,r,n,i){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=r,t&&(Qr(a,a,t),Qr(s,s,t));var c=new Cs({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});Jd(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function dat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=LB(u,t.transform,l,te(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function pat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(!!a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),u=te(s.getLineStyle(),te(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=LB(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function vat(e,t,r,n){var i=r.axis,o=wi(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(wi(n.labelRotate,a.get("rotate"))||0)*ds/180,c=Gl.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=Gl.isLabelSilent(r),p=r.get("triggerEvent");return F(l,function(v,g){var m=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,_=v.formattedLabel,y=v.rawLabel,w=a;if(f&&f[m]){var T=f[m];It(T)&&T.textStyle&&(w=new Sr(T.textStyle,a,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),P=i.dataToCoord(m),k=new Je({x:P,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:pn(w,{text:_,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ut(S)?S(i.type==="category"?y:i.type==="value"?m+"":m,g):S})});if(k.anid="label_"+m,p){var A=Gl.makeAxisEventDataBase(r);A.targetType="axisLabel",A.value=y,A.tickIndex=g,i.type==="category"&&(A.dataIndex=m),ie(k).eventData=A}t.add(k),k.updateTransform(),h.push(k),e.add(k),k.decomposeTransform()}),h}}const IB=Gl;function gat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return mat(r,e,t),r.seriesInvolved&&yat(r,e),r}function mat(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];F(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=s0(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if(F(s.getAxes(),be(v,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&F(p.baseAxes,be(v,d?"cross":!0,h)),d&&F(p.otherAxes,be(v,"cross",!1))}function v(g,m,_){var y=_.model.getModel("axisPointer",i),w=y.get("show");if(!(!w||w==="auto"&&!g&&!_3(y))){m==null&&(m=y.get("triggerTooltip")),y=g?_at(_,f,i,t,g,m):y;var T=y.get("snap"),S=s0(_.model),P=m||T||_.type==="category",k=e.axesInfo[S]={key:S,axis:_,coordSys:s,axisPointerModel:y,triggerTooltip:m,involveSeries:P,snap:T,useHandle:_3(y),seriesModels:[],linkGroup:null};u[S]=k,e.seriesInvolved=e.seriesInvolved||P;var A=bat(o,_);if(A!=null){var C=a[A]||(a[A]={axesInfo:{}});C.axesInfo[S]=k,C.mapper=o[A].mapper,k.linkGroup=C}}}})}function _at(e,t,r,n,i,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};F(s,function(h){l[h]=zt(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&te(u,f.textStyle)}}return e.model.getModel("axisPointer",new Sr(l,r,n))}function yat(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||F(e.coordSysAxesInfo[s0(n.model)],function(a){var s=a.axis;n.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function bat(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(I2(o[n+"AxisId"],r.id)||I2(o[n+"AxisIndex"],r.componentIndex)||I2(o[n+"AxisName"],r.name))return i}}function I2(e,t){return e==="all"||ct(e)&&ue(e,t)>=0||e===t}function wat(e){var t=CE(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=n.parse(a));var s=_3(r);o==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function CE(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[s0(e)]}function Sat(e){var t=CE(e);return t&&t.axisPointerModel}function _3(e){return!!e.get(["handle","show"])}function s0(e){return e.type+"||"+e.id}var K6={},Tat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&wat(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var a=Sat(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){K6[r]=n},t.getAxisPointerClass=function(r){return r&&K6[r]},t.type="axis",t}(ri);const OB=Tat;var y3=Oe();function Pat(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=s.length,f=y3(e).splitAreaColors,h=jt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var g=i.toGlobalCoord(u[0].coord),m=a.getAreaStyle();s=ct(s)?s:[s];for(var p=1;p<u.length;p++){var _=i.toGlobalCoord(u[p].coord),y=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(y=g,w=l.y,T=_-y,S=l.height,g=y+T):(y=l.x,w=g,T=l.width,S=_-w,g=w+S);var P=u[p-1].tickValue;P!=null&&h.set(P,d),t.add(new Ke({anid:P!=null?"area_"+P:null,shape:{x:y,y:w,width:T,height:S},style:te({fill:s[d]},m),autoBatch:!0,silent:!0})),d=(d+1)%c}y3(e).splitAreaColors=h}}}function Eat(e){y3(e).splitAreaColors=null}var Aat=["axisLine","axisTickLabel","axisName"],kat=["splitArea","splitLine","minorSplitLine"],RB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new De,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=m3(s,r),u=new IB(r,ot({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(h3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));F(Aat,u.add,u),this._axisGroup.add(u.getGroup()),F(kat,function(f){r.get([f,"show"])&&Cat[f](this,this._axisGroup,r,s)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||hN(a,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){Eat(this)},t.type="cartesianAxis",t}(OB),Cat={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=ct(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=a.getLineStyle(),v=0;v<f.length;v++){var g=i.toGlobalCoord(f[v].coord);u?(h[0]=g,h[1]=l.y,d[0]=g,d[1]=l.y+l.height):(h[0]=l.x,h[1]=g,d[0]=l.x+l.width,d[1]=g);var m=c++%s.length,_=f[v].tickValue,y=new Cs({anid:_!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:te({stroke:s[m]},p),silent:!0});Jd(y.shape,p.lineWidth),t.add(y)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=a.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var g=new Cs({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});Jd(g.shape,h.lineWidth),t.add(g)}},splitArea:function(e,t,r,n){Pat(e,t,r,n)}},DB=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}(RB),Mat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=DB.type,r}return t.type="yAxis",t}(RB),xat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Ke({shape:r.coordinateSystem.getRect(),style:te({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ri),J6={offset:0};function NB(e){e.registerComponentView(xat),e.registerComponentModel(Zot),e.registerCoordinateSystem("cartesian2d",cat),V6(e,"x",v3,J6),V6(e,"y",v3,J6),e.registerComponentView(DB),e.registerComponentView(Mat),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function B0(e){zr(NB),e.registerSeriesModel(Uot),e.registerChartView(Yot),e.registerLayout(AE("scatter"))}var Q6="\0_ec_interaction_mutex";function t5(e,t){return!!Lat(e)[t]}function Lat(e){return e[Q6]||(e[Q6]={})}pu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Fr);var Iat=function(e){mt(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=Vt(n._mousedownHandler,n),o=Vt(n._mousemoveHandler,n),a=Vt(n._mouseupHandler,n),s=Vt(n._mousewheelHandler,n),l=Vt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=te(zt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!UC(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!Xg("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||t5(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,a=this._y,s=n-o,l=i-a;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Zl(r.event),FB(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){UC(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=Xg("zoomOnMouseWheel",r,this._opt),i=Xg("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=a>3?1.4:a>1?1.2:1.1,c=o>0?u:1/u;O2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);O2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!t5(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;O2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}($i);function O2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(Zl(n.event),FB(e,t,r,n,i))}function FB(e,t,r,n,i){i.isAvailableBehavior=Vt(Xg,null,r,n),e.trigger(t,i)}function Xg(e,t,r){var n=r[e];return!e||n&&(!Et(n)||t.event[n+"Key"])}const Oat=Iat;function Rat(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function Dat(e,t,r,n){var i=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var Nat={axisPointer:1,tooltip:1,brush:1};function Fat(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!Nat.hasOwnProperty(n.mainType)&&i&&i.model!==r}var e5=Qr,Bat=function(e){mt(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new Ml,n._rawTransformable=new Ml,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new ae(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new ae(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new ae(r,n,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[We(r[0],n.getWidth()),We(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=Qr([],o,r),i=Qr([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),j7(this.transform||(this.transform=[]),n.transform||Hc()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],G1(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new Ml;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?e5(i,r,o):Yq(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?e5([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=r5(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=r5(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(Ml);function r5(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const $at=Bat;function n5(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function zat(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(n5(e,s),n)),a!=null){if(r){var l=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),l)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),f=(t.originY-e.y)*(a-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(n5(e,s),n),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function Vat(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function Uat(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){Wat(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=Hat(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function Gat(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function i5(e){return arguments.length?e:qat}function Jh(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function jat(e,t){return Ms(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Wat(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function Hat(e,t,r,n){if(t){for(var i=e,o=e,a=o.parentNode.children[0],s=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=R2(s),o=D2(o),s&&o;){i=R2(i),a=D2(a),i.hierNode.ancestor=e;var h=s.hierNode.prelim+f-o.hierNode.prelim-u+n(s,o);h>0&&(Yat(Xat(s,e,r),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=a.hierNode.modifier}s&&!R2(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),o&&!D2(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,r=e)}return r}function R2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function D2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function Xat(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function Yat(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function qat(e,t){return e.parentNode===t.parentNode?1:2}var Zat=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),Kat=function(e){mt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Zat},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=We(n.forkPosition,1),d=[];d[c]=a[c],d[f]=a[f]+(l[f]-a[f])*h,r.moveTo(a[0],a[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(fe),Jat=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new De,r}return t.prototype.init=function(r,n){this._controller=new Oat(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){o5(o,c)&&a5(o,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!o5(o,c)){h&&l5(u,f,h,s,r);return}a5(o,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&l5(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];hJ(o,a,s);var l=this._min,u=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new $at;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!Fat(u,i,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){Rat(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){Dat(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,a=n.getZoom(),s=(a-1)*i+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(Jn);function o5(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function a5(e,t,r,n,i){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=e.tree.root,f=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=a.getLayout();o?(r=new g_(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,hr(r,{x:v.x,y:v.y},i);var g=r.getSymbolPath();if(i.get("layout")==="radial"){var m=c.children[0],_=m.getLayout(),y=m.children.length,w=void 0,T=void 0;if(v.x===_.x&&a.isExpand===!0&&m.children.length){var S={x:(m.children[0].getLayout().x+m.children[y-1].getLayout().x)/2,y:(m.children[0].getLayout().y+m.children[y-1].getLayout().y)/2};w=Math.atan2(S.y-_.y,S.x-_.x),w<0&&(w=Math.PI*2+w),T=S.x<_.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-_.y,v.x-_.x),w<0&&(w=Math.PI*2+w),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(T=v.x<_.x,T&&(w=w-Math.PI)):(T=v.x>_.x,T||(w=w-Math.PI));var P=T?"left":"right",k=s.getModel("label"),A=k.get("rotate"),C=A*(Math.PI/180),M=g.getTextContent();M&&(g.setTextConfig({position:k.get("position")||P,rotation:A==null?-w:C,origin:"center"}),M.setStyle("verticalAlign","middle"))}var D=s.get(["emphasis","focus"]),B=D==="relative"?z7(a.getAncestorsIndices(),a.getDescendantIndices()):D==="ancestor"?a.getAncestorsIndices():D==="descendant"?a.getDescendantIndices():null;B&&(ie(r).focus=B),Qat(i,a,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(z){if(z!=="blur"){var N=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);N&&N.hoverState===L0||US(r.__edge,z)}})}function Qat(e,t,r,n,i,o,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new q1({shape:b3(c,f,h,i,i)})),hr(v,{shape:b3(c,f,h,o,a)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var g=t.children,m=[],_=0;_<g.length;_++){var y=g[_].getLayout();m.push([y.x,y.y])}v||(v=n.__edge=new Kat({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:d}})),hr(v,{shape:{parentPoint:[a.x,a.y],childPoints:m}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(te({strokeNoScale:!0,fill:null},p)),Zd(v,l,"lineStyle"),GP(v),s.add(v))}function s5(e,t,r,n,i){var o=t.tree.root,a=BB(o,e),s=a.source,l=a.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),g=n.get(["lineStyle","curveness"]);h&&(d==="curve"?tu(h,{shape:b3(p,v,g,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&tu(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function BB(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function l5(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=BB(a,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};tu(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){s5(u,e,n,i,l)}),s5(o,e,n,i,l)}function b3(e,t,r,n,i){var o,a,s,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=Jh(u,f),p=Jh(u,f+(h-f)*r),v=Jh(c,h+(f-h)*r),g=Jh(c,h);return{x1:d.x||0,y1:d.y||0,x2:g.x||0,y2:g.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,a=f,s=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,a=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}const tst=Jat;var Qn=Oe();function est(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,$B(t,r,e),F(r,function(n){F(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,be(rst,e))})}),t.wrapMethod("cloneShallow",be(ist,e)),F(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,be(nst,e))}),Oi(r[t.dataType]===t)}function rst(e,t){if(sst(this)){var r=ot({},Qn(this).datas);r[this.dataType]=t,$B(t,r,e)}else ME(t,this.dataType,Qn(this).mainData,e);return t}function nst(e,t){return e.struct&&e.struct.update(),t}function ist(e,t){return F(Qn(t).datas,function(r,n){r!==t&&ME(r.cloneShallow(),n,t,e)}),t}function ost(e){var t=Qn(this).mainData;return e==null||t==null?t:Qn(t).datas[e]}function ast(){var e=Qn(this).mainData;return e==null?[{data:e}]:kt(ve(Qn(e).datas),function(t){return{type:t,data:Qn(e).datas[t]}})}function sst(e){return Qn(e).mainData===e}function $B(e,t,r){Qn(e).datas={},F(t,function(n,i){ME(n,i,e,r)})}function ME(e,t,r,n){Qn(r).datas[t]=e,Qn(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=ost,e.getLinkedDataAll=ast}var lst=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ut(t)&&(n=r,r=t,t=null),t=t||{},Et(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],a;i==="preorder"&&(a=r.call(n,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),ust=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],a=1;s(t);function s(c,f){var h=c.value;a=Math.max(a,ct(h)?h.length:1),o.push(c);var d=new lst(Kn(c.name,""),i);f?cst(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=XF(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new Vl(l,r);return u.initData(o),n&&n(u),est({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function cst(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const fst=ust;function hst(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var dst=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new Sr(i,this,this.ecModel),a=fst.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=a.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return xs("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=hst(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(ko);const pst=dst;function vst(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)n.push(a[s])}for(;o=i.pop();)t(o,r)}function hh(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function gst(e,t){e.eachSeriesByType("tree",function(r){mst(r,t)})}function mst(e,t){var r=jat(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,a=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,a=i5(function(y,w){return(y.parentNode===w.parentNode?1:2)/y.depth})):(i=r.width,o=r.height,a=i5());var s=e.getData().tree.root,l=s.children[0];if(l){Vat(s),vst(l,Uat,a),s.hierNode.modifier=-l.hierNode.prelim,hh(l,Gat);var u=l,c=l,f=l;hh(l,function(y){var w=y.getLayout().x;w<u.getLayout().x&&(u=y),w>c.getLayout().x&&(c=y),y.depth>f.depth&&(f=y)});var h=u===c?1:a(u,c)/2,d=h-u.getLayout().x,p=0,v=0,g=0,m=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),hh(l,function(y){g=(y.getLayout().x+d)*p,m=(y.depth-1)*v;var w=Jh(g,m);y.setLayout({x:w.x,y:w.y,rawX:g,rawY:m},!0)});else{var _=e.getOrient();_==="RL"||_==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),hh(l,function(y){m=(y.getLayout().x+d)*v,g=_==="LR"?(y.depth-1)*p:i-(y.depth-1)*p,y.setLayout({x:g,y:m},!0)})):(_==="TB"||_==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),hh(l,function(y){g=(y.getLayout().x+d)*p,m=_==="TB"?(y.depth-1)*v:o-(y.depth-1)*v,y.setLayout({x:g,y:m},!0)}))}}}function _st(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");ot(s,a)})})}function yst(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,a=o.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,a=zat(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}function bst(e){e.registerChartView(tst),e.registerSeriesModel(pst),e.registerLayout(gst),e.registerVisual(_st),yst(e)}var l0=F,wst=It,Hm=-1,xE=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=zt(t);this.type=n,this.mappingMethod=r,this._normalizeData=Pst[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(N2(i),Sst(i)):r==="category"?i.categories?Tst(i):N2(i,!0):(Oi(r!=="linear"||i.dataExtent),N2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return ve(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){It(t)?F(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=ct(t)?[]:It(t)?{}:(i=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(n,a,s);i?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&l0(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(ct(t))t=t.slice();else if(wst(t)){var r=[];l0(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||Et(l)&&l===t+"")return a;n&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var u=r[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(sv(f[1],t,c[1]))return a}else if(c[1]===1/0){if(sv(f[0],c[0],t))return a}else if(sv(f[0],c[0],t)&&sv(f[1],t,c[1]))return a;n&&h(c[0],a),n&&h(c[1],a)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:dh("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),Qh.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=ky(r,t.parsedVisual,i),o?i:sa(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return sa(ky(t,this.option.parsedVisual),"rgba")},category:Qh,piecewise:function(t,r){var n=S3.call(this,r);return n==null&&(n=sa(ky(t,this.option.parsedVisual),"rgba")),n},fixed:Tl}},colorHue:av(function(t,r){return Cy(t,r)}),colorSaturation:av(function(t,r){return Cy(t,null,r)}),colorLightness:av(function(t,r){return Cy(t,null,null,r)}),colorAlpha:av(function(t,r){return CS(t,r)}),decal:{applyVisual:dh("decal"),_normalizedToVisual:{linear:null,category:Qh,piecewise:null,fixed:null}},opacity:{applyVisual:dh("opacity"),_normalizedToVisual:w3([0,1])},liftZ:{applyVisual:dh("liftZ"),_normalizedToVisual:{linear:Tl,category:Tl,piecewise:Tl,fixed:Tl}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:u5,category:Qh,piecewise:function(t,r){var n=S3.call(this,r);return n==null&&(n=u5.call(this,t)),n},fixed:Tl}},symbolSize:{applyVisual:dh("symbolSize"),_normalizedToVisual:w3([0,1])}},e}();function Sst(e){var t=e.pieceList;e.hasSpecialVisual=!1,F(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function Tst(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(l0(t,function(a,s){r[a]=s}),!ct(n)){var i=[];It(n)?l0(n,function(a,s){var l=r[s];i[l!=null?l:Hm]=a}):i[Hm]=n,n=zB(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function N2(e,t){var r=e.visual,n=[];It(r)?l0(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),zB(e,n)}function av(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:w3([0,1])}}function u5(e){var t=this.option.visual;return t[Math.round(da(e,[0,1],[0,t.length-1],!0))]||{}}function dh(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function Qh(e){var t=this.option.visual;return t[this.option.loop&&e!==Hm?e%t.length:e]}function Tl(){return this.option.visual[0]}function w3(e){return{linear:function(t){return da(t,e,this.option.visual,!0)},category:Qh,piecewise:function(t,r){var n=S3.call(this,r);return n==null&&(n=da(t,e,this.option.visual,!0)),n},fixed:Tl}}function S3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=xE.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function zB(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=kt(t,function(r){var n=Zn(r);return n||[0,0,0,1]})),t}var Pst={linear:function(e){return da(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=xE.findPieceIndex(e,t,!0);if(r!=null)return da(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?Hm:t},fixed:Fr};function sv(e,t,r){return e?t<=r:t<r}const vn=xE;var c5=Cs.prototype,F2=q1.prototype,VB=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(VB);function B2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Est=function(e){mt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new VB},t.prototype.buildPath=function(r,n){B2(n)?c5.buildPath.call(this,r,n):F2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return B2(this.shape)?c5.pointAt.call(this,r):F2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=B2(n)?[n.x2-n.x1,n.y2-n.y1]:F2.tangentAt.call(this,r);return CP(i,i)},t}(fe);const Ast=Est;var $2=["fromSymbol","toSymbol"];function f5(e){return"_"+e+"Type"}function h5(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=mF(i),u=vE(a||0,l),c=Ri(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function kst(e){var t=new Ast({name:"line",subPixelOptimize:!0});return T3(t.shape,e),t}function T3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var Cst=function(e){mt(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,a=r.getItemLayout(n),s=kst(a);s.shape.percent=0,Ao(s,{shape:{percent:1}},o,n),this.add(s),F($2,function(l){var u=h5(l,r,n);this.add(u),this[f5(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};T3(l.shape,s),hr(a,l,o,n),F($2,function(u){var c=r.getItemVisual(n,u),f=f5(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=h5(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=hu(p)}var g=r.getItemVisual(n,"style"),m=g.stroke;a.useStyle(g),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,F($2,function(S){var P=this.childOfName(S);if(P){P.setColor(m),P.style.opacity=g.opacity;for(var k=0;k<ei.length;k++){var A=ei[k],C=a.getState(A);if(C){var M=C.style||{},D=P.ensureState(A),B=D.style||(D.style={});M.stroke!=null&&(B[P.__isEmptyBrush?"stroke":"fill"]=M.stroke),M.opacity!=null&&(B.opacity=M.opacity)}}P.markRedraw()}},this);var _=o.getRawValue(n);df(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,P){return o.getFormattedLabel(S,P,r.dataType)}},inheritColor:m||"#000",defaultOpacity:g.opacity,defaultText:(_==null?r.getName(n):isFinite(_)?qe(_):_)+""});var y=this.getTextContent();if(y){var w=c.normal;y.__align=y.style.align,y.__verticalAlign=y.style.verticalAlign,y.__position=w.get("position")||"middle";var T=w.get("distance");ct(T)||(T=[T,T]),y.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),Ql(this,h,d,f)},t.prototype.highlight=function(){Yd(this)},t.prototype.downplay=function(){qd(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");T3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=U7([],f,c);CP(h,h);function d(C,M){var D=C.__specifiedRotation;if(D==null){var B=l.tangentAt(M);C.attr("rotation",(M===1?-1:1)*Math.PI/2-Math.atan2(B[1],B[0]))}else C.attr("rotation",D)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,g=o.__labelDistance,m=g[0]*a,_=g[1]*a,y=u/2,w=l.tangentAt(y),T=[w[1],-w[0]],S=l.pointAt(y);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var P=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var k=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(k=Math.PI+k),o.rotation=k}var A=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":A=-_,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":A=_,v="top";break;default:A=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*m+f[0],o.y=h[1]*_+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*m+c[0],o.y=-h[1]*_+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=m*P+c[0],o.y=c[1]+A,p=w[0]<0?"right":"left",o.originX=-m*P,o.originY=-A;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+A,p="center",o.originY=-A;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-m*P+f[0],o.y=f[1]+A,p=w[0]>=0?"right":"left",o.originX=m*P,o.originY=-A;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(De);const Mst=Cst;var xst=function(){function e(t){this.group=new De,this._LineCtor=t||Mst}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=d5(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=d5(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!Lst(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(z2(o)){var a=new this._LineCtor(r,i,this._seriesScope);a.traverse(n),this.group.add(a),r.setItemGraphicEl(i,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){hf(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!z2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var a=t.getItemGraphicEl(n);if(!z2(r.getItemLayout(i))){this.group.remove(a);return}a?a.updateData(r,i,o):a=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,a),this.group.add(a)},e}();function Lst(e){return e.animators&&e.animators.length>0}function d5(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:hu(t)}}function p5(e){return isNaN(e[0])||isNaN(e[1])}function z2(e){return e&&!p5(e[0])&&!p5(e[1])}const Ist=xst;function Ost(e,t,r,n,i,o){e=e||0;var a=r[1]-r[0];if(i!=null&&(i=ju(i,[0,a])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=ju(s,[0,a]),i=o=ju(s,[i,o]),n=0}t[0]=ju(t[0],r),t[1]=ju(t[1],r);var l=V2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=ju(t[n],c);var f;return f=V2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=V2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function V2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function ju(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var v5={color:"fill",borderColor:"stroke"},Rst={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},la=Oe(),Dst=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return R0(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=la(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(ko);const Nst=Dst;function Fst(e,t){return t=t||[0,0],kt(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],a=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function Bst(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Fst,e)}}}function $st(e,t){return t=t||[0,0],kt([0,1],function(r){var n=t[r],i=e[r]/2,o=[],a=[];return o[r]=n-i,a[r]=n+i,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function zst(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:Vt($st,e)}}}function Vst(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function Ust(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Vst,e)}}}function Gst(e,t){return t=t||[0,0],kt(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),a=t[n],s=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function jst(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:Vt(Gst,e)}}}function Wst(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function Hst(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||ht(e,"text")))}function Xst(e,t,r){var n=e,i,o,a;if(t==="text")a=n;else{a={},ht(n,"text")&&(a.text=n.text),ht(n,"rich")&&(a.rich=n.rich),ht(n,"textFill")&&(a.fill=n.textFill),ht(n,"textStroke")&&(a.stroke=n.textStroke),ht(n,"fontFamily")&&(a.fontFamily=n.fontFamily),ht(n,"fontSize")&&(a.fontSize=n.fontSize),ht(n,"fontStyle")&&(a.fontStyle=n.fontStyle),ht(n,"fontWeight")&&(a.fontWeight=n.fontWeight),o={type:"text",style:a,silent:!0},i={};var s=ht(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),ht(n,"textPosition")&&(i.position=n.textPosition),ht(n,"textOffset")&&(i.offset=n.textOffset),ht(n,"textRotation")&&(i.rotation=n.textRotation),ht(n,"textDistance")&&(i.distance=n.textDistance)}return g5(a,e),F(a.rich,function(l){g5(l,l)}),{textConfig:i,textContent:o}}function g5(e,t){!t||(t.font=t.textFont||t.font,ht(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),ht(t,"textAlign")&&(e.align=t.textAlign),ht(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),ht(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),ht(t,"textWidth")&&(e.width=t.textWidth),ht(t,"textHeight")&&(e.height=t.textHeight),ht(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),ht(t,"textPadding")&&(e.padding=t.textPadding),ht(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),ht(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),ht(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),ht(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),ht(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),ht(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),ht(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function m5(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";_5(n,t);var a=n.textFill==null;return i?a&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,F(t.rich,function(s){_5(s,s)}),n}function _5(e,t){!t||(ht(t,"fill")&&(e.textFill=t.fill),ht(t,"stroke")&&(e.textStroke=t.fill),ht(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),ht(t,"font")&&(e.font=t.font),ht(t,"fontStyle")&&(e.fontStyle=t.fontStyle),ht(t,"fontWeight")&&(e.fontWeight=t.fontWeight),ht(t,"fontSize")&&(e.fontSize=t.fontSize),ht(t,"fontFamily")&&(e.fontFamily=t.fontFamily),ht(t,"align")&&(e.textAlign=t.align),ht(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),ht(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),ht(t,"width")&&(e.textWidth=t.width),ht(t,"height")&&(e.textHeight=t.height),ht(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),ht(t,"padding")&&(e.textPadding=t.padding),ht(t,"borderColor")&&(e.textBorderColor=t.borderColor),ht(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),ht(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),ht(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),ht(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),ht(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),ht(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),ht(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),ht(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),ht(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),ht(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var UB={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},y5=ve(UB);cu(Eo,function(e,t){return e[t]=1,e},{});Eo.join(", ");var Xm=["","style","shape","extra"],qc=Oe();function LE(e,t,r,n,i){var o=e+"Animation",a=ZP(e,n,i)||{},s=qc(t).userDuring;return a.duration>0&&(a.during=s?Vt(tlt,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),ot(a,r[o]),a}function Yst(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,a=n.clearStyle,s=r.isAnimationEnabled(),l=qc(e),u=t.style;l.userDuring=t.during;var c={},f={};if(rlt(e,t,f),w5("shape",t,f),w5("extra",t,f),!o&&s&&(elt(e,t,c),b5("shape",e,t,c),b5("extra",e,t,c),nlt(e,t,u,c)),f.style=u,Zst(e,f,a),Jst(e,t),s)if(o){var h={};F(Xm,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),ot(p?h[p]:h,v.enterFrom))});var d=LE("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else Kst(e,t,i||0,r,c);qst(e,t),u?e.dirty():e.markRedraw()}function qst(e,t){for(var r=qc(e).leaveToProps,n=0;n<Xm.length;n++){var i=Xm[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=qc(e).leaveToProps={}),i&&(r[i]=r[i]||{}),ot(i?r[i]:r,o.leaveTo))}}function IE(e,t,r,n){if(e){var i=e.parent,o=qc(e).leaveToProps;if(o){var a=LE("update",e,t,r,0);a.done=function(){i.remove(e),n&&n()},e.animateTo(o,a)}else i.remove(e),n&&n()}}function Nc(e){return e==="all"}function Zst(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var a=i[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function Kst(e,t,r,n,i){if(i){var o=LE("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function Jst(e,t){ht(t,"silent")&&(e.silent=t.silent),ht(t,"ignore")&&(e.ignore=t.ignore),e instanceof fu&&ht(t,"invisible")&&(e.invisible=t.invisible),e instanceof fe&&ht(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var lo={},Qst={setTransform:function(e,t){return lo.el[e]=t,this},getTransform:function(e){return lo.el[e]},setShape:function(e,t){var r=lo.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=lo.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=lo.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=lo.el.style;if(t)return t[e]},setExtra:function(e,t){var r=lo.el.extra||(lo.el.extra={});return r[e]=t,this},getExtra:function(e){var t=lo.el.extra;if(t)return t[e]}};function tlt(){var e=this,t=e.el;if(!!t){var r=qc(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}lo.el=t,n(Qst)}}function b5(e,t,r,n){var i=r[e];if(!!i){var o=t[e],a;if(o){var s=r.transition,l=i.transition;if(l)if(!a&&(a=n[e]={}),Nc(l))ot(a,o);else for(var u=Ze(l),c=0;c<u.length;c++){var f=u[c],h=o[f];a[f]=h}else if(Nc(s)||ue(s,e)>=0){!a&&(a=n[e]={});for(var d=ve(o),c=0;c<d.length;c++){var f=d[c],h=o[f];ilt(i[f],h)&&(a[f]=h)}}}}}function w5(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ve(n),a=0;a<o.length;a++){var s=o[a];i[s]=gd(n[s])}}function elt(e,t,r){for(var n=t.transition,i=Nc(n)?Eo:Ze(n||[]),o=0;o<i.length;o++){var a=i[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function rlt(e,t,r){for(var n=0;n<y5.length;n++){var i=y5[n],o=UB[i],a=t[i];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var n=0;n<Eo.length;n++){var s=Eo[n];t[s]!=null&&(r[s]=t[s])}}function nlt(e,t,r,n){if(!!r){var i=e.style,o;if(i){var a=r.transition,s=t.transition;if(a&&!Nc(a)){var l=Ze(a);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&(Nc(s)||Nc(a)||ue(s,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ve(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function ilt(e,t){return $r(e)?e!==t:e!=null&&isFinite(e)}var GB=Oe(),olt=["percent","easing","shape","style","extra"];function alt(e){e.stopAnimation("keyframe"),e.attr(GB(e))}function jB(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ct(t)){F(t,function(s){jB(e,s,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=ZP("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var a=GB(e);F(Xm,function(s){if(!(s&&!e[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),F(n,function(u){var c=e.animators,f=s?u[s]:u;if(!!f){var h=ve(f);if(s||(h=yr(h,function(v){return ue(olt,v)<0})),!!h.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(a[s]=a[s]||{});var p=s?a[s]:a;F(h,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var ua="emphasis",ps="normal",OE="blur",RE="select",Ls=[ps,ua,OE,RE],U2={normal:["itemStyle"],emphasis:[ua,"itemStyle"],blur:[OE,"itemStyle"],select:[RE,"itemStyle"]},G2={normal:["label"],emphasis:[ua,"label"],blur:[OE,"label"],select:[RE,"label"]},slt=["x","y"],llt="e\0\0",Fn={normal:{},emphasis:{},blur:{},select:{}},ult={cartesian2d:Bst,geo:zst,single:Ust,polar:jst,calendar:Wst};function P3(e){return e instanceof fe}function E3(e){return e instanceof fu}function clt(e,t){t.copyTransform(e),E3(t)&&E3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,P3(t)&&P3(e)&&t.setShape(e.shape))}var flt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,u=S5(r,s,n,i);a||l.removeAll(),s.diff(a).add(function(f){j2(i,null,f,u(f,o),r,l,s)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&IE(h,la(h).option,r)}).update(function(f,h){var d=a.getItemGraphicEl(h);j2(i,d,f,u(f,o),r,l,s)}).execute();var c=r.get("clip",!0)?TB(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,a){var s=n.getData(),l=S5(n,s,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=j2(null,null,f,l(f,a),n,this.group,s);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){hf(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(Jn);const hlt=flt;function DE(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=XB(n);r=Z1(o,null,i,n.layout||"center"),la(r).customPathData=o}else if(t==="image")r=new Sa({}),la(r).customImagePath=e.style.image;else if(t==="text")r=new Je({});else if(t==="group")r=new De;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=sN(t);if(!a){var s="";ne(s)}r=new a}return la(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function NE(e,t,r,n,i,o,a){alt(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=slt);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;ht(u,"textFill")&&(u.fill=u.textFill),ht(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=P3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=Gm(f,e)),l.__decalPattern=c}if(E3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Yst(t,n,o,{dataIndex:r,isInit:a,clearStyle:!0}),jB(t,n.keyframeAnimation,o)}function WB(e,t,r,n,i){var o=t.isGroup?null:t,a=i&&i[e].cfg;if(o){var s=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),GP(o)}}function dlt(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var a=t.z2;a!=null&&(n.z2=a||0);for(var s=0;s<Ls.length;s++)plt(n,t,Ls[s])}}function plt(e,t,r){var n=r===ps,i=n?t:Ym(t,r),o=i?i.z2:null,a;o!=null&&(a=n?e:e.ensureState(r),a.z2=o||0)}function S5(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):ult[o.type](o));for(var s=te({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:P,visual:C,barLayout:M,currentSeriesIndices:D,font:B},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:vlt(e.getData())},u,c,f={},h={},d={},p={},v=0;v<Ls.length;v++){var g=Ls[v];d[g]=e.getModel(U2[g]),p[g]=e.getModel(G2[g])}function m(z){return z===u?c||(c=t.getItemModel(z)):t.getItemModel(z)}function _(z,N){return t.hasItemOption?z===u?f[N]||(f[N]=m(z).getModel(U2[N])):m(z).getModel(U2[N]):d[N]}function y(z,N){return t.hasItemOption?z===u?h[N]||(h[N]=m(z).getModel(G2[N])):m(z).getModel(G2[N]):p[N]}return function(z,N){return u=z,c=null,f={},h={},i&&i(te({dataIndexInside:z,dataIndex:t.getRawIndex(z),actionType:N?N.type:null},l),s)};function w(z,N){return N==null&&(N=u),t.getStore().get(t.getDimensionIndex(z||0),N)}function T(z,N){N==null&&(N=u),z=z||0;var j=t.getDimensionInfo(z);if(!j){var Z=t.getDimensionIndex(z);return Z>=0?t.getStore().get(Z,N):void 0}var q=t.get(j.name,N),tt=j&&j.ordinalMeta;return tt?tt.categories[q]:q}function S(z,N){N==null&&(N=u);var j=t.getItemVisual(N,"style"),Z=j&&j.fill,q=j&&j.opacity,tt=_(N,ps).getItemStyle();Z!=null&&(tt.fill=Z),q!=null&&(tt.opacity=q);var Pt={inheritColor:Et(Z)?Z:"#000"},Ot=y(N,ps),wt=pn(Ot,null,Pt,!1,!0);wt.text=Ot.getShallow("show")?qt(e.getFormattedLabel(N,ps),a0(t,N)):null;var St=Fm(Ot,Pt,!1);return A(z,tt),tt=m5(tt,wt,St),z&&k(tt,z),tt.legacy=!0,tt}function P(z,N){N==null&&(N=u);var j=_(N,ua).getItemStyle(),Z=y(N,ua),q=pn(Z,null,null,!0,!0);q.text=Z.getShallow("show")?pd(e.getFormattedLabel(N,ua),e.getFormattedLabel(N,ps),a0(t,N)):null;var tt=Fm(Z,null,!0);return A(z,j),j=m5(j,q,tt),z&&k(j,z),j.legacy=!0,j}function k(z,N){for(var j in N)ht(N,j)&&(z[j]=N[j])}function A(z,N){z&&(z.textFill&&(N.textFill=z.textFill),z.textPosition&&(N.textPosition=z.textPosition))}function C(z,N){if(N==null&&(N=u),ht(v5,z)){var j=t.getItemVisual(N,"style");return j?j[v5[z]]:null}if(ht(Rst,z))return t.getItemVisual(N,z)}function M(z){if(o.type==="cartesian2d"){var N=o.getBaseAxis();return iit(te({axis:N},z))}}function D(){return r.getCurrentSeriesIndices()}function B(z){return pN(z,r)}}function vlt(e){var t={};return F(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function j2(e,t,r,n,i,o,a){if(!n){o.remove(t);return}var s=FE(e,t,r,n,i,o);return s&&a.setItemGraphicEl(r,s),s&&Ql(s,n.focus,n.blurScope,n.emphasisDisabled),s}function FE(e,t,r,n,i,o){var a=-1,s=t;t&&HB(t,n,i)&&(a=ue(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=DE(n),s&&clt(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Fn.normal.cfg=Fn.normal.conOpt=Fn.emphasis.cfg=Fn.emphasis.conOpt=Fn.blur.cfg=Fn.blur.conOpt=Fn.select.cfg=Fn.select.conOpt=null,Fn.isLegacy=!1,mlt(u,r,n,i,l,Fn),glt(u,r,n,i,l),NE(e,u,r,n,Fn,i,l),ht(n,"info")&&(la(u).info=n.info);for(var c=0;c<Ls.length;c++){var f=Ls[c];if(f!==ps){var h=Ym(n,f),d=BE(n,h,f);WB(f,u,h,d,Fn)}}return dlt(u,n,i),n.type==="group"&&_lt(e,u,r,n,i),a>=0?o.replaceAt(u,a):o.add(u),u}function HB(e,t,r){var n=la(e),i=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&Slt(o)&&XB(o)!==n.customPathData||i==="image"&&ht(a,"image")&&a.image!==n.customImagePath}function glt(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&HB(a,o,n)&&(a=null),a||(a=DE(o),e.setClipPath(a)),NE(null,a,t,o,null,n,i)}}function mlt(e,t,r,n,i,o){if(!e.isGroup){T5(r,null,o),T5(r,ua,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(a!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(a===!1)c&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=DE(a),e.setTextContent(c)),NE(null,c,t,a,null,n,i);for(var f=a&&a.style,h=0;h<Ls.length;h++){var d=Ls[h];if(d!==ps){var p=o[d].conOpt;WB(d,c,p,BE(a,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function T5(e,t,r){var n=t?Ym(e,t):e,i=t?BE(e,n,ua):e.style,o=e.type,a=n?n.textConfig:null,s=e.textContent,l=s?t?Ym(s,t):s:null;if(i&&(r.isLegacy||Hst(i,o,!!a,!!l))){r.isLegacy=!0;var u=Xst(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=a,f.conOpt=l}function Ym(e,t){return t?e?e[t]:null:e}function BE(e,t,r){var n=t&&t.style;return n==null&&r===ua&&e&&(n=e.styleEmphasis),n}function _lt(e,t,r,n,i){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!a&&!l&&!u)){if(l){blt({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<a;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),FE(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);ylt(t,p,i)}}}function ylt(e,t,r){t&&IE(t,la(e).option,r)}function blt(e){new VF(e.oldChildren,e.newChildren,P5,P5,e).add(E5).update(E5).remove(wlt).execute()}function P5(e,t){var r=e&&e.name;return r!=null?r:llt+t}function E5(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;FE(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function wlt(e){var t=this.context,r=t.oldChildren[e];r&&IE(r,la(r).option,t.seriesModel)}function XB(e){return e&&(e.pathData||e.d)}function Slt(e){return e&&(ht(e,"pathData")||ht(e,"d"))}function Tlt(e){e.registerChartView(hlt),e.registerSeriesModel(Nst)}var kl=Oe(),A5=zt,W2=Vt,Plt=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new De,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),n.getZr().add(s);else{var h=be(k5,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}M5(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=CE(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var a=kl(t).pointerEl=new ett[o.type](A5(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=kl(t).labelEl=new Je(A5(r.label));t.add(o),C5(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=kl(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=kl(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),C5(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=JP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Zl(u.event)},onmousedown:W2(this._onHandleDragMove,this,0,0),drift:W2(this._onHandleDragMove,this),ondragend:W2(this._onHandleDragEnd,this)}),n.add(i)),M5(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ct(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,lF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){k5(this._axisPointerModel,!r&&this._moveAnimation,this._handle,H2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(H2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(H2(i)),kl(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),n3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function k5(e,t,r,n){YB(kl(r).lastProp,n)||(kl(r).lastProp=n,t?hr(r,n,e):(r.stopAnimation(),r.attr(n)))}function YB(e,t){if(It(e)&&It(t)){var r=!0;return F(t,function(n,i){r=r&&YB(e[i],n)}),!!r}else return e===t}function C5(e,t){e[t.get(["label","show"])?"show":"hide"]()}function H2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function M5(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const Elt=Plt;function Alt(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function klt(e,t,r,n,i){var o=r.get("value"),a=qB(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=O0(s.get("padding")||0),u=s.getFont(),c=OP(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),Clt(f,h,d,n);var g=s.get("backgroundColor");(!g||g==="auto")&&(g=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:pn(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:g}),z2:10}}function Clt(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function qB(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),a=i.formatter;if(a){var s={value:PE(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};F(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Et(a)?o=a.replace("{value}",o):Ut(a)&&(o=a(s))}return o}function ZB(e,t,r){var n=Hc();return LP(n,n,r.rotation),PS(n,n,r.position),Ic([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function Mlt(e,t,r,n,i,o){var a=IB.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),klt(t,n,i,o,{position:ZB(n.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function xlt(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function Llt(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var Ilt=function(e){mt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=x5(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=Alt(o),d=Olt[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=m3(l.model,i);Mlt(n,r,p,i,o,a)},t.prototype.getHandleTransform=function(r,n,i){var o=m3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=ZB(n.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=x5(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(Elt);function x5(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var Olt={line:function(e,t,r){var n=xlt([t,r[0]],[t,r[1]],L5(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:Llt([t-n/2,r[0]],[n,i],L5(e))}}};function L5(e){return e.dim==="x"?0:1}const Rlt=Ilt;var Dlt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Ce);const Nlt=Dlt;var ia=Oe(),Flt=F;function KB(e,t,r){if(!Xt.node){var n=t.getZr();ia(n).records||(ia(n).records={}),Blt(n,t);var i=ia(n).records[e]||(ia(n).records[e]={});i.handler=r}}function Blt(e,t){if(ia(e).initialized)return;ia(e).initialized=!0,r("click",be(I5,"click")),r("mousemove",be(I5,"mousemove")),r("globalout",zlt);function r(n,i){e.on(n,function(o){var a=Vlt(t);Flt(ia(e).records,function(s){s&&i(s,o,a.dispatchAction)}),$lt(a.pendings,t)})}}function $lt(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function zlt(e,t,r){e.handler("leave",null,r)}function I5(e,t,r,n){t.handler(e,r,n)}function Vlt(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function A3(e,t){if(!Xt.node){var r=t.getZr(),n=(ia(r).records||{})[e];n&&(ia(r).records[e]=null)}}var Ult=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";KB("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){A3("axisPointer",n)},t.prototype.dispose=function(r,n){A3("axisPointer",n)},t.type="axisPointer",t}(ri);const Glt=Ult;function JB(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),a=Kl(o,e);if(a==null||a<0||ct(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,a),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(kt(l.dimensions,function(m){return o.mapDimension(m)}),a))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),r=[g.x+g.width/2,g.y+g.height/2]}return{point:r,el:s}}var O5=Oe();function jlt(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,a=e.dispatchAction||Vt(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){Yg(i)&&(i=JB({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Yg(i),u=o.axesInfo,c=s.axesInfo,f=n==="leave"||Yg(i),h={},d={},p={list:[],map:{}},v={showPointer:be(Hlt,d),showTooltip:be(Xlt,p)};F(s.coordSysMap,function(m,_){var y=l||m.containPoint(i);F(s.coordSysAxesInfo[_],function(w,T){var S=w.axis,P=Klt(u,w);if(!f&&y&&(!u||P)){var k=P&&P.value;k==null&&!l&&(k=S.pointToData(i)),k!=null&&R5(w,k,v,!1,h)}})});var g={};return F(c,function(m,_){var y=m.linkGroup;y&&!d[_]&&F(y.axesInfo,function(w,T){var S=d[T];if(w!==m&&S){var P=S.value;y.mapper&&(P=m.axis.scale.parse(y.mapper(P,D5(w),D5(m)))),g[m.key]=P}})}),F(g,function(m,_){R5(c[_],m,v,!0,h)}),Ylt(d,c,h),qlt(p,i,e,a),Zlt(c,a,r),h}}function R5(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=Wlt(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&ot(i,s[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function Wlt(e,t){var r=t.axis,n=r.dim,i=e,o=[],a=Number.MAX_VALUE,s=-1;return F(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=a&&((v<a||p>=0&&s<0)&&(a=v,s=p,i=f,o.length=0),F(h,function(g){o.push({seriesIndex:l.seriesIndex,dataIndexInside:g,dataIndex:l.getData().getRawIndex(g)})}))}}),{payloadBatch:o,snapToValue:i}}function Hlt(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function Xlt(e,t,r,n){var i=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=s0(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Ylt(e,t,r){var n=r.axesInfo=[];F(t,function(i,o){var a=i.axisPointerModel.option,s=e[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function qlt(e,t,r,n){if(Yg(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Zlt(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=O5(n)[i]||{},a=O5(n)[i]={};F(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&F(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];F(o,function(u,c){!a[c]&&l.push(u)}),F(a,function(u,c){!o[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Klt(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function D5(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function Yg(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function QB(e){OB.registerAxisPointerClass("CartesianAxisPointer",Rlt),e.registerComponentModel(Nlt),e.registerComponentView(Glt),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ct(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=gat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},jlt)}function $0(e){zr(NB),zr(QB)}function Jlt(e,t){var r=O0(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Ke({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Qlt=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Ce);const tut=Qlt;function t$(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function e$(e){if(!!Xt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var r$=e$(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),eut=e$(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function n$(e,t){if(!e)return t;t=CN(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function rut(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var nut=n$(eut,"transition"),$E=n$(r$,"transform"),iut="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Xt.transform3dSupported?"will-change:transform;":"");function out(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function aut(e,t,r){if(!Et(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=eu(t);var o=out(r),a=Math.max(Math.round(i)*1.5,6),s="",l=$E+":",u;ue(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+a+"px;height:"+a+"px;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function sut(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Xt.transformSupported?","+$E+n:",left"+n+",top"+n),nut+":"+i}function N5(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Xt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Xt.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+$E+":"+a+";":[["top",0],["left",0],[r$,a]]}function lut(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),F(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function uut(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=aF(e,"html"),h=l+"px "+u+"px "+a+"px "+s;return n.push("box-shadow:"+h),t&&i&&n.push(sut(i,r)),o&&n.push("background-color:"+o),F(["width","color","radius"],function(d){var p="border-"+d,v=CN(p),g=e.get(v);g!=null&&n.push(p+":"+g+(d==="color"?"":"px"))}),n.push(lut(c)),f!=null&&n.push("padding:"+O0(f).join("px ")+"px"),n.join(";")+";"}function F5(e,t,r,n,i){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&iZ(e,a,document.body,n,i)}else{e[0]=n,e[1]=i;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var cut=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Xt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),a=this._appendToBody=n&&n.appendToBody;F5(this._styleCoord,o,a,r.getWidth()/2,r.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();Gn(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=rut(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=iut+uut(t,!this._firstShow,this._longHide)+N5(o[0],o[1],!0)+("border-color:"+eu(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(Et(o)&&n.get("trigger")==="item"&&!t$(n)&&(s=aut(n,i,o)),Et(t))a.innerHTML=t+s;else if(t){a.innerHTML="",ct(t)||(t=[t]);for(var l=0;l<t.length;l++)Sm(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(F5(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=N5(n[0],n[1]);F(o,function(a){i[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Xt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const fut=cut;var hut=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),$5(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var a=this;It(t)&&ne(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new Je({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:aF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),F(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),F(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=B5(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;$5(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,a=as(o.borderWidth||0),s=B5(o);n.x=t+a+s.left,n.y=r+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function as(e){return Math.max(0,e)}function B5(e){var t=as(e.shadowBlur||0),r=as(e.shadowOffsetX||0),n=as(e.shadowOffsetY||0);return{left:as(t-r),right:as(t+r),top:as(t-n),bottom:as(t+n)}}function $5(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const dut=hut;var put=new Ke({shape:{x:-1,y:-1,width:2,height:2}}),vut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Xt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=zK(i.get("renderMode"));this._tooltipContent=o==="richText"?new dut(n):new fut(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Xt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?lF(this,"_updatePosition",50,"fixRate"):n3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");KB("itemTooltip",this._api,Vt(function(i,o,a){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(r,n,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Xt.node||!i.getDom())){var a=z5(o,i);this._ticket="";var s=o.dataByCoordSys,l=yut(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=put;c.x=o.x,c.y=o.y,c.update(),ie(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=JB(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,n,i,o){var a=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(z5(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var a=o.seriesIndex,s=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=n.getSeriesByIndex(a);if(!!u){var c=u.getData(),f=ph([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(i){this._lastDataByCoordSys=null;var s,l;bc(i,function(u){if(ie(u).dataIndex!=null)return s=u,!0;if(ie(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Vt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,a=[n.offsetX,n.offsetY],s=ph([n.tooltipOption],o),l=this._renderMode,u=[],c=xs("section",{blocks:[],noHeader:!0}),f=[],h=new h2;F(r,function(_){F(_.dataByAxis,function(y){var w=i.getComponent(y.axisDim+"Axis",y.axisIndex),T=y.value;if(!(!w||T==null)){var S=qB(T,w.axis,i,y.seriesDataIndices,y.valueLabelOpt),P=xs("section",{header:S,noHeader:!_o(S),sortBlocks:!0,blocks:[]});c.blocks.push(P),F(y.seriesDataIndices,function(k){var A=i.getSeriesByIndex(k.seriesIndex),C=k.dataIndexInside,M=A.getDataParams(C);if(!(M.dataIndex<0)){M.axisDim=y.axisDim,M.axisIndex=y.axisIndex,M.axisType=y.axisType,M.axisId=y.axisId,M.axisValue=PE(w.axis,{value:T}),M.axisValueLabel=S,M.marker=h.makeTooltipMarker("item",eu(M.color),l);var D=E4(A.formatTooltip(C,!0,null)),B=D.frag;if(B){var z=ph([A],o).get("valueFormatter");P.blocks.push(z?ot({valueFormatter:z},B):B)}D.text&&f.push(D.text),u.push(M)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),v=L4(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var g=l==="richText"?`

`:"<br/>",m=f.join(g);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,m,u,Math.random()+"",a[0],a[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,a=ie(n),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=ph([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),g=v.get("trigger");if(!(g!=null&&g!=="item")){var m=u.getDataParams(c,f),_=new h2;m.marker=_.makeTooltipMarker("item",eu(m.color),d);var y=E4(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=y.frag,P=S?L4(T?ot({valueFormatter:T},S):S,_,d,w,o.get("useUTC"),v.get("textStyle")):y.text,k="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,P,m,k,r.offsetX,r.offsetY,r.position,r.target,_)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=ie(n),a=o.tooltipConfig,s=a.option||{};if(Et(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=r.positionDefault,h=ph(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new h2;this._showOrMove(h,function(){var g=zt(h.get("formatterParams")||{});this._showTooltipContent(h,d,g,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,a,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([a,s],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Et(h)){var g=r.ecModel.get("useUTC"),m=ct(i)?i[0]:i,_=m&&m.axisType&&m.axisType.indexOf("time")>=0;d=h,_&&(d=e_(m.axisValue,d,g)),d=MN(d,i,!0)}else if(Ut(h)){var y=Vt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,y)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,a,s,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||ct(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ct(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=a.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ut(n)&&(n=n([i,o],s,a.el,p,{viewSize:[u,c],contentSize:f.slice()})),ct(n))i=We(n[0],u),o=We(n[1],c);else if(It(n)){var v=n;v.width=f[0],v.height=f[1];var g=Ms(v,{width:u,height:c});i=g.x,o=g.y,h=null,d=null}else if(Et(n)&&l){var m=_ut(n,p,f,r.get("borderWidth"));i=m[0],o=m[1]}else{var m=gut(i,o,a,u,c,h?null:20,d?null:20);i=m[0],o=m[1]}if(h&&(i-=V5(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=V5(d)?f[1]/2:d==="bottom"?f[1]:0),t$(r)){var m=mut(i,o,a,u,c);i=m[0],o=m[1]}a.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===r.length;return a&&F(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&F(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],g=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===g.length,a&&F(v,function(m,_){var y=g[_];a=a&&m.seriesIndex===y.seriesIndex&&m.dataIndex===y.dataIndex}),o&&F(h.seriesDataIndices,function(m){var _=m.seriesIndex,y=n[_],w=o[_];y&&w&&w.data!==y.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Xt.node||!n.getDom()||(n3(this,"_updatePosition"),this._tooltipContent.dispose(),A3("itemTooltip",n))},t.type="tooltip",t}(ri);function ph(e,t,r){var n=t.ecModel,i;r?(i=new Sr(r,n,n),i=new Sr(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof Sr&&(a=a.get("tooltip",!0)),Et(a)&&(a={formatter:a}),a&&(i=new Sr(a,i,n)))}return i}function z5(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function gut(e,t,r,n,i,o,a){var s=r.getSize(),l=s[0],u=s[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),a!=null&&(t+u+a>i?t-=u+a:t+=a),[e,t]}function mut(e,t,r,n,i){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,n)-a,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function _ut(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":s=t.x+u/2-i/2,l=t.y-o-a;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+a;break;case"left":s=t.x-i-a,l=t.y+c/2-o/2;break;case"right":s=t.x+u+a,l=t.y+c/2-o/2}return[s,l]}function V5(e){return e==="center"||e==="middle"}function yut(e,t,r){var n=BP(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=x0(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(!!a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=ie(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const but=vut;function _f(e){zr(QB),e.registerComponentModel(tut),e.registerComponentView(but),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Fr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Fr)}var U5=F;function G5(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function j5(e,t,r){var n={};return U5(t,function(o){var a=n[o]=i();U5(e[o],function(s,l){if(!!vn.isValidType(l)){var u={type:l,visual:s};r&&r(u,o),a[l]=new vn(u),l==="opacity"&&(u=zt(u),u.type="colorAlpha",a.__hidden.__alphaForOpacity=new vn(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function wut(e,t,r){var n;F(r,function(i){t.hasOwnProperty(i)&&G5(t[i])&&(n=!0)}),n&&F(r,function(i){t.hasOwnProperty(i)&&G5(t[i])?e[i]=zt(t[i]):delete e[i]})}function Sut(e,t,r,n){var i={};return F(e,function(o){var a=vn.prepareVisualTypes(t[o]);i[o]=a}),{progress:function(a,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return gF(s,f,T)}function c(T,S){Trt(s,f,T,S)}for(var f,h=s.getStore();(f=a.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),g=t[v],m=i[v],_=0,y=m.length;_<y;_++){var w=m[_];g[w]&&g[w].applyVisual(p,u,c)}}}}}var Tut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Ce),Put=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=qt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new Je({style:pn(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new Je({style:pn(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),g=r.get("triggerEvent",!0);c.silent=!p&&!g,d.silent=!v&&!g,p&&c.on("click",function(){s4(p,"_"+r.get("target"))}),v&&d.on("click",function(){s4(v,"_"+r.get("subtarget"))}),ie(c).eventData=ie(d).eventData=g?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var m=o.getBoundingRect(),_=r.getBoxLayoutParams();_.width=m.width,_.height=m.height;var y=Ms(_,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?y.x+=y.width:l==="center"&&(y.x+=y.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?y.y+=y.height:u==="middle"&&(y.y+=y.height/2),u=u||"top"),o.x=y.x,o.y=y.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),m=o.getBoundingRect();var T=y.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var P=new Ke({shape:{x:m.x-T[3],y:m.y-T[0],width:m.width+T[1]+T[3],height:m.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(P)}},t.type="title",t}(ri);function yf(e){e.registerComponentModel(Tut),e.registerComponentView(Put)}function i$(e,t){if(!e)return!1;for(var r=ct(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function lv(e){FS(e,"label",["show"])}var uv=Oe(),o$=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Xt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=uv(s)[a];if(!l||!l.data){uv(s)[a]=null;return}u?u._mergeOption(l,n,!0):(o&&lv(l),F(l.data,function(c){c instanceof Array?(lv(c[0]),lv(c[1])):lv(c)}),u=this.createMarkerModelFromSeries(l,this,n),ot(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),uv(s)[a]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return xs("section",{header:this.name,blocks:[xs("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return uv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Ce);Bi(o$,XN.prototype);const Zc=o$;function k3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function Eut(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function cv(e,t,r,n,i,o){var a=[],s=ru(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=zE(t,l,e),c=t.indicesOfNearest(l,u)[0];a[i]=t.get(r,c),a[o]=t.get(l,c);var f=t.get(n,c),h=yo(t.get(n,c));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,f]}var X2={min:be(cv,"min"),max:be(cv,"max"),average:be(cv,"average"),median:be(cv,"median")};function qm(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!Eut(t)&&!ct(t.coord)&&n){var i=n.dimensions,o=a$(t,r,n,e);if(t=zt(t),t.type&&X2[t.type]&&o.baseAxis&&o.valueAxis){var a=ue(i,o.baseAxis.dim),s=ue(i,o.valueAxis.dim),l=X2[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)X2[u[c]]&&(u[c]=zE(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function a$(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(Aut(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function Aut(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function Zm(e,t){return e&&e.containData&&t.coord&&!k3(t)?e.containData(t.coord):!0}function kut(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!k3(t)&&!k3(r)?e.containZone(t.coord,r.coord):!0}function Cut(e,t){return e?function(r,n,i,o){var a=o<2?r.coord&&r.coord[o]:r.value;return ws(a,t[o])}:function(r,n,i,o){return ws(r.value,t[o])}}function zE(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var Y2=Oe(),Mut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=jt()},t.prototype.render=function(r,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){Y2(s).keep=!1}),n.eachSeries(function(s){var l=Zc.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!Y2(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){Y2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;F(r,function(o){var a=Zc.getMarkerModelFromSeries(o,i.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(n?F9(l):jP(l))})}})},t.type="marker",t}(ri);const s$=Mut;var xut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Zc);const Lut=xut;var fv=Oe(),Iut=function(e,t,r,n){var i=e.getData(),o;if(ct(n))o=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=wi(n.yAxis,n.xAxis);else{var u=a$(n,i,t,e);s=u.valueAxis;var c=YF(i,u.valueDataDim);l=zE(i,c,a)}var f=s.dim==="x"?0:1,h=1-f,d=zt(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&we(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:a,valueIndex:n.valueIndex,value:l}]}else o=[]}var g=[qm(e,o[0]),qm(e,o[1]),ot({},o[2])];return g[2].type=g[2].type||null,oe(g[2],g[0]),oe(g[2],g[1]),g};function Km(e){return!isNaN(e)&&!isFinite(e)}function W5(e,t,r,n){var i=1-e,o=n.dimensions[e];return Km(t[i])&&Km(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function Out(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(W5(1,r,n,e)||W5(0,r,n,e)))return!0}return Zm(e,t[0])&&Zm(e,t[1])}function q2(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get("x"),i.getWidth()),u=We(a.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);s=o.dataToPoint([f,h])}if(mf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;Km(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):Km(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var Rut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Zc.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=fv(a).from,u=fv(a).to;l.each(function(c){q2(l,c,!0,o,i),q2(u,c,!1,o,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new Ist);this.group.add(c.group);var f=Dut(a,r,n),h=f.from,d=f.to,p=f.line;fv(n).from=h,fv(n).to=d,n.setData(p);var v=n.get("symbol"),g=n.get("symbolSize"),m=n.get("symbolRotate"),_=n.get("symbolOffset");ct(v)||(v=[v,v]),ct(g)||(g=[g,g]),ct(m)||(m=[m,m]),ct(_)||(_=[_,_]),f.from.each(function(w){y(h,w,!0),y(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){ie(w).dataModel=n,w.traverse(function(T){ie(T).dataModel=n})});function y(w,T,S){var P=w.getItemModel(T);q2(w,T,S,r,o);var k=P.getModel("itemStyle").getItemStyle();k.fill==null&&(k.fill=f_(l,"color")),w.setItemVisual(T,{symbolKeepAspect:P.get("symbolKeepAspect"),symbolOffset:qt(P.get("symbolOffset",!0),_[S?0:1]),symbolRotate:qt(P.get("symbolRotate",!0),m[S?0:1]),symbolSize:qt(P.get("symbolSize"),g[S?0:1]),symbol:qt(P.get("symbol",!0),v[S?0:1]),style:k})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(s$);function Dut(e,t,r){var n;e?n=kt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return ot(ot({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Vl(n,r),o=new Vl(n,r),a=new Vl([],r),s=kt(r.get("data"),be(Iut,t,e,r));e&&(s=yr(s,be(Out,e)));var l=Cut(!!e,n);return i.initData(kt(s,function(u){return u[0]}),null,l),o.initData(kt(s,function(u){return u[1]}),null,l),a.initData(kt(s,function(u){return u[2]})),a.hasItemOption=!0,{from:i,to:o,line:a}}const Nut=Rut;function __(e){e.registerComponentModel(Lut),e.registerComponentView(Nut),e.registerPreprocessor(function(t){i$(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var Fut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Zc);const But=Fut;var hv=Oe(),$ut=function(e,t,r,n){var i=qm(e,n[0]),o=qm(e,n[1]),a=i.coord,s=o.coord;a[0]=wi(a[0],-1/0),a[1]=wi(a[1],-1/0),s[0]=wi(s[0],1/0),s[1]=wi(s[1],1/0);var l=Vq([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function Jm(e){return!isNaN(e)&&!isFinite(e)}function H5(e,t,r,n){var i=1-e;return Jm(t[i])&&Jm(r[i])}function zut(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return mf(e,"cartesian2d")?r&&n&&(H5(1,r,n)||H5(0,r,n))?!0:kut(e,i,o):Zm(e,i)||Zm(e,o)}function X5(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=We(a.get(r[0]),i.getWidth()),u=We(a.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),s=o.dataToPoint(h,!0)}if(mf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);Jm(c)?s[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):Jm(f)&&(s[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var Y5=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Vut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Zc.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=kt(Y5,function(f){return X5(s,l,f,o,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new De});this.group.add(c.group),this.markKeep(c);var f=Uut(a,r,n);n.setData(f),f.each(function(h){var d=kt(Y5,function(k){return X5(f,h,k,r,o)}),p=a.getAxis("x").scale,v=a.getAxis("y").scale,g=p.getExtent(),m=v.getExtent(),_=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],y=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];Im(_),Im(y);var w=!(g[0]>_[1]||g[1]<_[0]||m[0]>y[1]||m[1]<y[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),P=f_(l,"color");S.fill||(S.fill=P,Et(S.fill)&&(S.fill=CS(S.fill,.4))),S.stroke||(S.stroke=P),f.setItemVisual(h,"style",S)}),f.diff(hv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new Kd({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=hv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?hr(p,{shape:{points:v.points}},n,h):p=new Kd({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=hv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),df(h,hu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Et(v.fill)?CS(v.fill,1):"#000"}),Zd(h,p),Ql(h,null,null,p.get(["emphasis","disabled"])),ie(h).dataModel=n}),hv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(s$);function Uut(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var a=kt(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return ot(ot({},f),{name:u,ordinalMeta:null})});i=kt(o,function(u,c){return{name:u,type:a[c%2].type}}),n=new Vl(i,r)}else i=[{name:"value",type:"float"}],n=new Vl(i,r);var s=kt(r.get("data"),be($ut,t,e,r));e&&(s=yr(s,be(zut,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return ws(d,i[h])}:function(u,c,f,h){return ws(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}const Gut=Vut;function z0(e){e.registerComponentModel(But),e.registerComponentView(Gut),e.registerPreprocessor(function(t){i$(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var jut=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Wut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),ct(n)&&F(n,function(o,a){Et(o)&&(o={type:o}),n[a]=oe(o,jut(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(s){var l=s.name;i.push(l);var u;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(s)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&FP(s)&&n.push(s.name)}),this._availableNames=i;var o=this.get("data")||n,a=kt(o,function(s){return(Et(s)||we(s))&&(s={name:s}),new Sr(s,this,this.ecModel)},this);this._data=a},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;F(o,function(a){n[a.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;F(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&ue(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Ce);const C3=Wut;var Wu=be,M3=F,dv=De,Hut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new dv),this.group.add(this._selectorGroup=new dv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ms(c,f,h),p=this.layoutInner(r,a,d,o,l,u),v=Ms(te({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Jlt(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this.getContentGroup(),c=jt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),M3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var g=new dv;g.newline=!0,u.add(g);return}var m=i.getSeriesByName(v)[0];if(!c.get(v))if(m){var _=m.getData(),y=_.getVisual("legendLineStyle")||{},w=_.getVisual("legendIcon"),T=_.getVisual("style"),S=this._createItem(m,v,p,d,n,r,y,T,w,f,o);S.on("click",Wu(q5,v,null,o,h)).on("mouseover",Wu(x3,m.name,null,o,h)).on("mouseout",Wu(L3,m.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(P){if(!c.get(v)&&P.legendVisualProvider){var k=P.legendVisualProvider;if(!k.containName(v))return;var A=k.indexOfName(v),C=k.getItemVisual(A,"style"),M=k.getItemVisual(A,"legendIcon"),D=Zn(C.fill);D&&D[3]===0&&(D[3]=.2,C=ot(ot({},C),{fill:sa(D,"rgba")}));var B=this._createItem(P,v,p,d,n,r,{},C,M,f,o);B.on("click",Wu(q5,null,v,o,h)).on("mouseover",Wu(x3,null,v,o,h)).on("mouseout",Wu(L3,null,v,o,h)),c.set(v,!0)}},this)},this),a&&this._createSelector(a,n,o,s,l)},t.prototype._createSelector=function(r,n,i,o,a){var s=this.getSelectorGroup();M3(r,function(u){var c=u.type,f=new Je({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);df(f,{normal:h,emphasis:d},{defaultText:u.title}),WS(f)})},t.prototype._createItem=function(r,n,i,o,a,s,l,u,c,f,h){var d=r.visualDrawType,p=a.get("itemWidth"),v=a.get("itemHeight"),g=a.isSelected(n),m=o.get("symbolRotate"),_=o.get("symbolKeepAspect"),y=o.get("icon");c=y||c||"roundRect";var w=Xut(c,o,l,u,d,g,h),T=new dv,S=o.getModel("textStyle");if(Ut(r.getLegendIcon)&&(!y||y==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:m,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}));else{var P=y==="inherit"&&r.getData().getVisual("symbol")?m==="inherit"?r.getData().getVisual("symbolRotate"):m:0;T.add(Yut({itemWidth:p,itemHeight:v,icon:c,iconRotate:P,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}))}var k=s==="left"?p+5:-5,A=s,C=a.get("formatter"),M=n;Et(C)&&C?M=C.replace("{name}",n!=null?n:""):Ut(C)&&(M=C(n));var D=o.get("inactiveColor");T.add(new Je({style:pn(S,{text:M,x:k,y:v/2,fill:g?S.getTextColor():D,align:A,verticalAlign:"middle"})}));var B=new Ke({shape:T.getBoundingRect(),invisible:!0}),z=o.getModel("tooltip");return z.get("show")&&QP({el:B,componentModel:a,itemName:n,itemTooltipOption:z.option}),T.add(B),T.eachChild(function(N){N.silent=!0}),B.silent=!f,this.getContentGroup().add(T),WS(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Dc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){Dc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,g=v===0?"width":"height",m=v===0?"height":"width",_=v===0?"y":"x";s==="end"?d[v]+=c[g]+p:f[v]+=h[g]+p,d[1-v]+=c[m]/2-h[m]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var y={x:0,y:0};return y[g]=c[g]+p+h[g],y[m]=Math.max(c[m],h[m]),y[_]=Math.min(0,h[_]+d[1-v]),y}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ri);function Xut(e,t,r,n,i,o,a){function s(g,m){g.lineWidth==="auto"&&(g.lineWidth=m.lineWidth>0?2:0),M3(g,function(_,y){g[y]==="inherit"&&(g[y]=m[y])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:Gm(f,a),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function Yut(e){var t=e.icon||"roundRect",r=Ri(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function q5(e,t,r,n){L3(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),x3(e,t,r,n)}function l$(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function x3(e,t,r,n){l$(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function L3(e,t,r,n){l$(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const u$=Hut;function qut(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function vh(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();F(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function Zut(e){e.registerAction("legendToggleSelect","legendselectchanged",be(vh,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",be(vh,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",be(vh,"inverseSelect")),e.registerAction("legendSelect","legendselected",be(vh,"select")),e.registerAction("legendUnSelect","legendunselected",be(vh,"unSelect"))}function c$(e){e.registerComponentModel(C3),e.registerComponentView(u$),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,qut),e.registerSubTypeDefaulter("legend",function(){return"plain"}),Zut(e)}var Kut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=a_(r);e.prototype.init.call(this,r,n,i),Z5(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),Z5(this,this.option,r)},t.type="legend.scroll",t.defaultOption=t_(C3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(C3);function Z5(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,Xc(t,r,{type:"box",ignoreSize:!!i})}const Jut=Kut;var K5=De,Z2=["width","height"],K2=["x","y"],Qut=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new K5),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new K5)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,a,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=ct(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new Je({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,g){var m=v+"DataIndex",_=JP(n.get("pageIcons",!0)[n.getOrient().name][g],{onclick:Vt(u._pageGo,u,m,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});_.name=v,c.add(_)}},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=Z2[u],f=K2[u],h=Z2[1-u],d=K2[1-u];a&&Dc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),g=[-v.x,-v.y],m=zt(i);a&&(m[c]=i[c]-v[c]-p);var _=this._layoutContentAndController(r,o,m,u,c,h,d,f);if(a){if(s==="end")g[u]+=_[c]+p;else{var y=v[c]+p;g[u]-=y,_[f]-=y}_[c]+=v[c]+p,g[1-u]+=_[d]+_[h]/2-v[h]/2,_[h]=Math.max(_[h],v[h]),_[d]=Math.min(_[d],v[d]+g[1-u]),l.x=g[0],l.y=g[1],l.markRedraw()}return _},t.prototype._layoutContentAndController=function(r,n,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Dc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Dc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[a]>i[a],g=[-d.x,-d.y];n||(g[o]=c[u]);var m=[0,0],_=[-p.x,-p.y],y=qt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?_[o]+=i[a]-p[a]:m[o]+=p[a]+y}_[1-o]+=d[s]/2-p[s]/2,c.setPosition(g),f.setPosition(m),h.setPosition(_);var T={x:0,y:0};if(T[a]=v?i[a]:d[a],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+_[1-o]),f.__rectSize=i[a],v){var S={x:0,y:0};S[a]=Math.max(i[a]-p[a]-y,0),S[s]=T[s],f.setClipPath(new Ke({shape:S})),f.__rectSize=S[a]}else h.eachChild(function(k){k.attr({invisible:!0,silent:!0})});var P=this._getPageInfo(r);return P.pageIndex!=null&&hr(c,{x:P.contentPosition[0],y:P.contentPosition[1]},v?r:null),this._updatePageInfoView(r,P),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;F(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;o&&a&&o.setStyle("text",Et(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=Z2[a],l=K2[a],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[a]=-v.s;for(var g=u+1,m=v,_=v,y=null;g<=h;++g)y=w(c[g]),(!y&&_.e>m.s+o||y&&!T(y,m.s))&&(_.i>m.i?m=_:m=y,m&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=m.i),++p.pageCount)),_=y;for(var g=u-1,m=v,_=v,y=null;g>=-1;--g)y=w(c[g]),(!y||!T(_,y.s))&&m.i<_.i&&(_=m,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=m.i),++p.pageCount,++p.pageIndex),m=y;return p;function w(S){if(S){var P=S.getBoundingRect(),k=P[l]+S[l];return{s:k,e:k+P[s],i:S.__legendDataIndex}}}function T(S,P){return S.e>=P&&S.s<=P+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(n=s)}),n!=null?n:o},t.type="legend.scroll",t}(u$);const tct=Qut;function ect(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function rct(e){zr(c$),e.registerComponentModel(Jut),e.registerComponentView(tct),ect(e)}function bf(e){zr(c$),zr(rct)}var nct={get:function(e,t,r){var n=zt((ict[e]||{})[t]);return r&&ct(n)?n[n.length-1]:n}},ict={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const f$=nct;var J5=vn.mapVisual,oct=vn.eachVisual,act=ct,Q5=F,sct=Im,lct=da,uct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&wut(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=Vt(r,this),this.controllerVisuals=j5(this.option.controller,n,r),this.targetVisuals=j5(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=Ze(r),n},t.prototype.eachTargetSeries=function(r,n){F(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,u;i=i||["<",">"],ct(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Et(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ut(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,n=sct([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var a=i[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),a=n.controller||(n.controller={});oe(o,i),oe(a,i);var s=this.isCategory();l.call(this,o),l.call(this,a),u.call(this,o,"inRange","outOfRange"),c.call(this,a);function l(f){act(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},Q5(p,function(g,m){if(!!vn.isValidType(m)){var _=f$.get(m,"inactive",s);_!=null&&(v[m]=_,m==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),g=v||"roundRect";Q5(this.stateList,function(m){var _=this.itemSize,y=f[m];y||(y=f[m]={color:s?p:[p]}),y.symbol==null&&(y.symbol=h&&zt(h)||(s?g:[g])),y.symbolSize==null&&(y.symbolSize=d&&zt(d)||(s?_[0]:[_[0],_[0]])),y.symbol=J5(y.symbol,function(S){return S==="none"?g:S});var w=y.symbolSize;if(w!=null){var T=-1/0;oct(w,function(S){S>T&&(T=S)}),y.symbolSize=J5(w,function(S){return lct(S,[0,T],[0,_[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Ce);const Qm=uct;var tx=[20,140],cct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=tx[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=tx[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):ct(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),F(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=Im((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],a=i.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=ex(this,"outOfRange",this.getExtent()),i=ex(this,"inRange",this.option.range.slice()),o=[];function a(d,p){o.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&a(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&o.length&&a(i[s],"outOfRange"),a(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&a(o[o.length-1].value,"outOfRange"),f=0),a(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=t_(Qm.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(Qm);function ex(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],a=[],s=0;s<=n&&o<r[1];s++)a.push(o),o+=i;return a.push(r[1]),a}const fct=cct;var hct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=O0(n.get("padding")||0),o=r.getBoundingRect();r.add(new Ke({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,a=this.visualMapModel,s={};if(n==="color"){var l=a.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=a.controllerVisuals[o||a.getValueState(r)],h=vn.prepareVisualTypes(f);return F(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),vn.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;ktt(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(ri);const h$=hct;var rx=[["left","right","width"],["top","bottom","height"]];function d$(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},a=n.orient==="horizontal"?1:0,s=rx[a],l=[0,null,10],u={},c=0;c<3;c++)u[rx[1-a][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][a],h=Ms(u,o,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function qg(e,t){return F(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var uo=da,dct=F,nx=Math.min,J2=Math.max,pct=12,vct=6,gct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new Je({style:pn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,a=this._orient,s=this._useHandle,l=d$(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new De;u.add(c),c.add(i.outOfRange=ix()),c.add(i.inRange=ix(null,s?ax(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new Ke({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=J2(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,a),this._createHandle(n,u,1,o,h,a)),this._createIndicator(n,u,o,h,a),r.add(u)},t.prototype._createHandle=function(r,n,i,o,a,s){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=ha(r.get("handleSize"),o[0]),f=Ri(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=ax(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(m){Zl(m.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),HP(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new Je({cursor:h,draggable:!0,drift:l,onmousemove:function(m){Zl(m.event)},ondragend:u,style:pn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],g=this._shapes;g.handleThumbs[i]=f,g.handleLabelPoints[i]=v,g.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,a){var s=ha(r.get("indicatorSize"),i[0]),l=Ri(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof Sa){var c=l.style;l.useStyle(ot({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new Je({silent:!0,invisible:!0,style:pn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(a==="horizontal"?o/2:vct)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var a=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():ox(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[uo(n[0],i,o,!0),uo(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,a=[0,i.itemSize[1]];Ost(n,o,a,r,0);var s=i.getExtent();this._dataInterval=[uo(o[0],a,s,!0),uo(o[1],a,s,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,a=[0,n.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,n,i,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],u=this._createBarPoints(i,l);return{barColor:new qP(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],a=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new De(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,a=i.handleThumbs,s=i.handleLabels,l=o.itemSize,u=o.getExtent();dct([0,1],function(c){var f=a[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=uo(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Ic(i.handleLabelPoints[c],Gg(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=uo(r,s,u,!0),g=l[0]-p/2,m={x:f.x,y:f.y};f.y=v,f.x=g;var _=Ic(c.indicatorLabelPoint,Gg(f,this.group)),y=c.indicatorLabel;y.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";y.setStyle({text:(i||"")+a.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var P={x:g,y:v,style:{fill:d}},k={style:{x:_[0],y:_[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var A={duration:100,easing:"cubicInOut",additive:!0};f.x=m.x,f.y=m.y,f.animateTo(P,A),y.animateTo(k,A)}else f.attr(P),y.attr(k);this._firstShowIndicator=!1;var C=this._shapes.handleLabels;if(C)for(var M=0;M<C.length;M++)this._api.enterBlur(C[M])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=nx(J2(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var a=[0,o[1]],s=i.getExtent();r=nx(J2(a[0],r),a[1]);var l=mct(i,s,a),u=[r-l,r+l],c=uo(r,a,s,!0),f=[uo(u[0],a,s,!0),uo(u[1],a,s,!0)];u[0]<a[0]&&(f[0]=-1/0),u[1]>a[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||ox(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=FK(h,d);this._dispatchHighDown("downplay",qg(p[0],i)),this._dispatchHighDown("highlight",qg(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(bc(r.target,function(l){var u=ie(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var a=i.getData(n.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",qg(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var a=Gg(n,o?null:this.group);return ct(r)?Ic(r,a,i):fN(r,a,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(h$);function ix(e,t,r,n){return new Kd({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){Zl(i.event)},ondragend:n})}function mct(e,t,r){var n=pct/2,i=e.get("hoverLinkDataSize");return i&&(n=uo(i,t,r,!0)/2),n}function ox(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function ax(e){return e==="vertical"?"ns-resize":"ew-resize"}const _ct=gct;var yct={type:"selectDataRange",event:"dataRangeSelected",update:"update"},bct=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},wct=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(Sut(n.stateList,n.targetVisuals,Vt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(Vt(Sct,null,e,i))||{stops:[],outerColors:[]},a=i.getDataDimensionIndex(r);a>=0&&(o.dimension=a,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function Sct(e,t,r,n){for(var i=t.targetVisuals[n],o=vn.prepareVisualTypes(i),a={color:f_(e.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return a.color;function f(d){return a[d]}function h(d,p){a[d]=p}}var sx=F;function Tct(e){var t=e&&e.visualMap;ct(t)||(t=t?[t]:[]),sx(t,function(r){if(!!r){Hu(r,"splitList")&&!Hu(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&ct(n)&&sx(n,function(i){It(i)&&(Hu(i,"start")&&!Hu(i,"min")&&(i.min=i.start),Hu(i,"end")&&!Hu(i,"max")&&(i.max=i.end))})}})}function Hu(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var lx=!1;function p$(e){lx||(lx=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(yct,bct),F(wct,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(Tct))}function Pct(e){e.registerComponentModel(fct),e.registerComponentView(_ct),p$(e)}var Ect=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],Act[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(a,s){i==="categories"?(a.mappingMethod="category",a.categories=zt(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=kt(this._pieceList,function(l){return l=zt(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=vn.listVisualTypes(),o=this.isCategory();F(r.pieces,function(s){F(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),F(n,function(s,l){var u=!1;F(this.stateList,function(c){u=u||a(r,c,l)||a(r.target,c,l)},this),!u&&F(this.stateList,function(c){(r[c]||(r[c]={}))[l]=f$.get(l,c==="inRange"?"active":"inactive",o)})},this);function a(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,a=(n?i:r).selected||{};if(i.selected=a,F(o,function(l,u){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),i.selectedMode==="single"){var s=!1;F(o,function(l,u){var c=this.getSelectedMapKey(l);a[c]&&(s?a[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=zt(r)},t.prototype.getValueState=function(r){var n=vn.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=vn.findPieceIndex(l,i);c===r&&a.push(u)},this),n.push({seriesId:o.id,dataIndex:a})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function a(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return F(s,function(c){var f=c.interval;f&&(f[0]>u&&a([u,f[0]],"outOfRange"),a(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=t_(Qm.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(Qm),Act={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<i;s+=o,a++){var l=a===i-1?n[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),hM(e),F(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;F(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),ux(t,e)},pieces:function(e){var t=this.option;F(t.pieces,function(r,n){It(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&a[f]==null;d++)a[f]=r[h[d]],s[f]=l[d],c[f]=d===2;a[f]==null&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=vn.retrieveVisuals(r),e.push(i)},this),ux(t,e),hM(e),F(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function ux(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const kct=Ect;var Cct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=wi(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),F(c.viewPieceList,function(d){var p=d.piece,v=new De;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var g=n.getRepresentValue(p);if(this._createItemSymbol(v,g,[0,0,u[0],u[1]]),h){var m=this.visualMapModel.getValueState(g);v.add(new Je({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:m==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Dc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:a,batch:qg(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return d$(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,a){if(!!n){var s=new De,l=this.visualMapModel.textStyleModel;s.add(new Je({style:pn(l,{x:o?a==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?a:"center",text:n})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=kt(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(Ri(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var a=zt(i.selected),s=n.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,F(a,function(l,u){a[u]=u===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(h$);const Mct=Cct;function xct(e){e.registerComponentModel(kct),e.registerComponentView(Mct),p$(e)}function Lct(e){zr(Pct),zr(xct)}var cx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},Ict=function(){function e(t){var r=this._condVal=Et(t)?new RegExp(t):Wq(t)?t:null;if(r==null){var n="";ne(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Et(r)?this._condVal.test(t):we(r)?this._condVal.test(t+""):!1},e}(),Oct=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),Rct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),Dct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),Nct=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),Fct=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function VE(e,t){if(e===!0||e===!1){var r=new Oct;return r.value=e,r}var n="";return v$(e)||ne(n),e.and?fx("and",e,t):e.or?fx("or",e,t):e.not?Bct(e,t):$ct(e,t)}function fx(e,t,r){var n=t[e],i="";ct(n)||ne(i),n.length||ne(i);var o=e==="and"?new Rct:new Dct;return o.children=kt(n,function(a){return VE(a,r)}),o.children.length||ne(i),o}function Bct(e,t){var r=e.not,n="";v$(r)||ne(n);var i=new Nct;return i.child=VE(r,t),i.child||ne(n),i}function $ct(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ve(e),a=e.parser,s=a?YN(a):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=ht(cx,u)?cx[u]:u,f=e[u],h=s?s(f):f,d=wet(c,h)||c==="reg"&&new Ict(h);d||ne(r),i.push(d)}}i.length||ne(r);var p=new Fct;return p.valueGetterParam=n,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function v$(e){return It(e)&&!$r(e)}var zct=function(){function e(t,r){this._cond=VE(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function Vct(e,t){return new zct(e,t)}var Uct={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=Vct(e.config,{valueGetterAttrMap:jt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;ht(s,"dimension")||ne(l);var c=t.getDimensionInfo(u);return c||ne(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),i=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},Gct={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=Ze(r);i.length||ne(n);var o=[];F(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&ne(n),h!=="asc"&&h!=="desc"&&ne(n),p&&p!=="min"&&p!=="max"){var v="";ne(v)}if(h!=="asc"&&h!=="desc"){var g="";ne(g)}var m=t.getDimensionInfo(f);m||ne(n);var _=d?YN(d):null;d&&!_&&ne(n),o.push({dimIdx:m.index,parser:_,comparator:new ZN(h,p)})});var a=t.sourceFormat;a!==en&&a!==Vi&&ne(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var g=d.comparator.evaluate(p,v);if(g!==0)return g}return 0}),{data:s}}};function y_(e){e.registerTransform(Uct),e.registerTransform(Gct)}var jct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new tF(this),M4(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),M4(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:So},t}(Ce),Wct=function(e){mt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(ri);function b_(e){e.registerComponentModel(jct),e.registerComponentView(Wct)}var Q2=null;function Hct(e){return Q2||(Q2=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),Q2(e)}var tb=null;function Xct(e){tb||(tb=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),tb(e)}function Yct(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function pv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function g$(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function I3(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(g$(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var qct='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',O3=0,Zg=null;function Zct(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Qct.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||t1(e)}),a=I3(e),s=a.detached,l=a.rendered;e.__resize_observer_triggered__=s===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){t1(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(O3||(Zg=Yct(qct)),tft(e),e.__resize_rendered__=I3(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),O3++}function Kct(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",UE),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--O3&&Zg&&Zg.parentNode.removeChild(Zg)}}function Jct(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function Qct(){var e=I3(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(GE(this),this.addEventListener("scroll",UE,!0)),this.__resize_rendered__=t,t1(this))}function UE(){var e=this;GE(this),this.__resize_raf__&&Xct(this.__resize_raf__),this.__resize_raf__=Hct(function(){var t=Jct(e);t&&(e.__resize_last__=t,t1(e))})}function t1(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function tft(e){var t=g$(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=pv("div",{className:"resize-triggers"}),n=pv("div",{className:"resize-expand-trigger"}),i=pv("div"),o=pv("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},GE(e),e.addEventListener("scroll",UE,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function GE(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,a=i.scrollHeight,s=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=a,n.style.width=s+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var Ko=function(){return Ko=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ko.apply(this,arguments)},eft=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function rft(e){return t=Object.create(null),eft.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var nft={autoresize:Boolean},ift={loading:Boolean,loadingOptions:Object},oft=/^on[^a-z]/,aft=function(e){return oft.test(e)},hx=[],gh=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=hx.indexOf(o);a===-1&&(a=hx.push(o)-1,gh[a]={}),r=gh[a]&&gh[a][n]?gh[a][n]:gh[a][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var sft="ecTheme",wf=uP({name:"echarts",props:Ko(Ko({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},nft),ift),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=kg(),i=kg(),o=kg(),a=An("ecTheme",null),s=An("ecInitOptions",null),l=An("ecUpdateOptions",null),u=Jw(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ye(function(){return o.value||e.option||null}),v=Ye(function(){return e.theme||_r(a)||{}}),g=Ye(function(){return e.initOptions||_r(s)||{}}),m=Ye(function(){return e.updateOptions||_r(l)||{}}),_=Ye(function(){return function(k){var A={};for(var C in k)aft(C)||(A[C]=k[C]);return A}(r)}),y=pP().proxy.$listeners;function w(k){if(n.value){var A=i.value=ynt(n.value,v.value,g.value);e.group&&(A.group=e.group);var C=y;C||(C={},Object.keys(r).filter(function(D){return D.indexOf("on")===0&&D.length>2}).forEach(function(D){var B=D.charAt(2).toLowerCase()+D.slice(3);B.substring(B.length-4)==="Once"&&(B="~".concat(B.substring(0,B.length-4))),C[B]=r[D]})),Object.keys(C).forEach(function(D){var B=C[D];if(B){var z=D.toLowerCase();z.charAt(0)==="~"&&(z=z.substring(1),B.__once__=!0);var N=A;if(z.indexOf("zr:")===0&&(N=A.getZr(),z=z.substring(3)),B.__once__){delete B.__once__;var j=B;B=function(){for(var Z=[],q=0;q<arguments.length;q++)Z[q]=arguments[q];j.apply(void 0,Z),N.off(z,B)}}N.on(z,B)}}),c.value?$d(function(){A&&!A.isDisposed()&&A.resize(),M()}):M()}function M(){var D=k||p.value;D&&A.setOption(D,m.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;mo(f,function(k){typeof S=="function"&&(S(),S=null),k||(S=mo(function(){return e.option},function(A,C){A&&(i.value?i.value.setOption(A,Ko({notMerge:A.value!==(C==null?void 0:C.value)},m.value)):w())},{deep:!0}))},{immediate:!0}),mo([v,g],function(){T(),w()},{deep:!0}),Xk(function(){e.group&&i.value&&(i.value.group=e.group)});var P=rft(i);return function(k,A,C){var M=An("ecLoadingOptions",{}),D=Ye(function(){return Ko(Ko({},_r(M)),C==null?void 0:C.value)});Xk(function(){var B=k.value;B&&(A.value?B.showLoading(D.value):B.hideLoading())})}(i,h,d),function(k,A,C){var M=null;mo([C,k,A],function(D,B,z){var N=D[0],j=D[1],Z=D[2];N&&j&&Z&&(M=c_(function(){j.resize()},100),Zct(N,M)),z(function(){M&&N&&Kct(N,M)})})}(i,c,n),W8(function(){w()}),D1(T),Ko({chart:i,root:n,setOption:function(k,A){e.manualUpdate&&(o.value=k),i.value?i.value.setOption(k,A||{}):w(k)},nonEventAttrs:_},P)},render:function(){var e=Ko({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",vP("x-vue-echarts",e)}});zr([gf,F0,B0,yf,_f,bf,$0,Lct,z0]);const lft={setup(){const e=re();return{gameStore:xt(),userStore:e}},components:{VChart:wf},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionModifiers2.hasOwnProperty(this.rgk)||(this.userStore.regionModifiers2[this.rgk]=[0]),this.userStore.regionModifiers2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianModifier(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianModifier",t,e),this.workload*(2-e/100)},tierModifiers(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let a=i;a<=o;a++){const s=Math.max(2-this.wspd*a/r,0),l=r*(2-s),u=this.userStore.chanceAtModifier(this.rgk,s*100),c=u-t;e.push({wld:l,mod:s,tier:a,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtModifier(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierModifiers){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>modifier \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption2(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"modifier",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"y"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${n.toFixed(1)}% chance to get<br/>${t.toFixed(1)} or more modifier<br/>${r.toFixed(1)} or less workload<br/>${Bt(i*10,1)} \u2192 ${Math.ceil(i)*10} minute cycle`},textStyle:{fontSize:11}},legend:{show:!1}}}},methods:{formatFixed:Bt,updStore(e){this.userStore.regionModifiers2[this.rgk]=e.split(",")},spaceSep(e,t){return Bt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},gu=e=>(Vr("data-v-04376293"),e=e(),Ur(),e),uft=V(" Observations: "),cft=gu(()=>b("abbr",{class:"tooltip",title:"Enter comma-separated modifier values (0..100 range) observed evenly across all worker-active time. The order does not matter, but repeat occurence of same value does. You can sneak in newlines and comments like 'evening,0,0.1,2,morning,3,22,0' - text will be stored, but ignored in calculations."},"\u2139\uFE0F",-1)),fft=gu(()=>b("br",null,null,-1)),hft=["value"],dft=gu(()=>b("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),pft={class:"fsxs tar"},vft=gu(()=>b("th",null,"work time",-1)),gft=gu(()=>b("th",null,"workload \u2264",-1)),mft=gu(()=>b("th",null,"modifier \u2265",-1)),_ft=gu(()=>b("th",null,"chance",-1));function yft(e,t,r,n,i,o){const a=de("v-chart");return O(),R(W,null,[uft,cft,fft,b("textarea",{value:this.userStore.regionModifiers2[this.rgk],onInput:t[0]||(t[0]=s=>o.updStore(s.target.value)),class:"multiline"},`
  `,40,hft),b("div",null,[Mt(a,{class:"chart hmid",option:o.chartOption2},null,8,["option"])]),dft,b("table",pft,[b("tr",null,[vft,(O(!0),R(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),R("td",null,L(10*s.tier)+" min",1))),256))]),b("tr",null,[gft,(O(!0),R(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),R("td",null,L(o.formatFixed(s.wld,2)),1))),256))]),b("tr",null,[mft,(O(!0),R(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),R("td",null,L(o.formatFixed(100*s.mod,2)),1))),256))]),b("tr",null,[_ft,(O(!0),R(W,null,Nt(o.tierModifiers.filter(s=>s.time),s=>(O(),R("td",null,L(o.formatFixed(s.time,2))+"%",1))),256))])])],64)}const jE=$e(lft,[["render",yft],["__scopeId","data-v-04376293"]]);const bft={setup(){const e=re();return{gameStore:xt(),userStore:e}},components:{FloatingModifierEdit:jE},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}return this.gameStore.wspdBonus(this.workerEditing,e)},statRank(){return this.gameStore.workerStatRank(this.workerEditing)}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{makeIconSrc:Fi,formatFixed:Bt,randBetween:cs,levelup:dd,spaceSep(e,t){return Bt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey)).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e)}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const a=["mspd","luck"],s=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))a.some(d=>f.hasOwnProperty(d))&&s.add(c);console.log("mlSkills",s);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of s){if(n[r-c].skills.some(g=>g==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,g)=>g.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),s.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=t-1,n=this.gameStore.workerStatic[this.workerEditing.charkey],i=this.gameStore.workerStatic[e],o=this.workerEditing.wspdSheet*1e6-n.wspd,a=i.wspd_lo*r,s=i.wspd_hi*r,l=a+(s-a)*this.statRank.wspd_rank,u=i.mspd_lo*r,c=i.mspd_hi*r,f=u+(c-u)*this.statRank.mspd_rank,h=this.workerEditing.luckSheet*1e4-n.luck,d=i.luck_lo*r,p=i.luck_hi*r,v=d+(p-d)*this.statRank.luck_rank;console.log(`recalculating levelups: 
        ${i.wspd/1e6}+${r}*[${i.wspd_lo/1e6}\u2026${i.wspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F528} 
        ${i.mspd/100}+${r}*[${i.mspd_lo/1e6}\u2026${i.mspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F9B6} 
        ${i.luck/1e4}+${r}*[${i.luck_lo/1e4}\u2026${i.luck_hi/1e4}]*${Math.round(this.statRank.luck_rank*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(i.wspd-n.wspd+l-o)/1e6,this.workerEditing.mspdSheet=i.mspd/100*(1+f/1e6),this.workerEditing.luckSheet+=(i.luck-n.luck+v-h)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,dd(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),dd(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=cs(t.wspd_lo,t.wspd_hi),n+=cs(t.mspd_lo,t.mspd_hi),i+=cs(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},Gr=e=>(Vr("data-v-369c132d"),e=e(),Ur(),e),wft={key:0,id:"columns"},Sft={id:"worker"},Tft={class:"borderless"},Pft=Gr(()=>b("td",null,"name:",-1)),Eft={style:{float:"right"}},Aft=Gr(()=>b("td",null,"type:",-1)),kft=["value"],Cft=["value"],Mft=Gr(()=>b("td",null,"job:",-1)),xft=V(" idle "),Lft={key:0},Ift={key:1},Oft=V(" \u270D\uFE0F "),Rft=V(" @ "),Dft=V("M$/day "),Nft=V("CP "),Fft=V(" [\u{1F33B}] "),Bft={class:"fsxs"},$ft=V(" \u270D\uFE0F "),zft=V(" @ "),Vft=V("M$/day "),Uft=V("CP "),Gft=V(" UNKNOWN_JOBTYPE "),jft={key:0},Wft=Gr(()=>b("td",null,"$/day:",-1)),Hft={key:0},Xft={key:0},Yft={key:3,class:"fsxs"},qft={colspan:"2"},Zft={key:0,class:"borderless"},Kft=Gr(()=>b("tr",null,[b("th",null,"stats:"),b("th",{class:"fsxs"},"rank"),b("th",null,"sheet"),b("th",null,"+"),b("th",null,"skill"),b("th",null,"="),b("th",null,"final"),b("th")],-1)),Jft={class:"center"},Qft={rowspan:"3"},tht=Gr(()=>b("br",null,null,-1)),eht={class:"fsxs"},rht=Gr(()=>b("td",null,null,-1)),nht=Gr(()=>b("td",null,null,-1)),iht=Gr(()=>b("td",null,"\u{1F528}",-1)),oht={class:"center"},aht={class:"fsxs"},sht=Gr(()=>b("td",null,null,-1)),lht=Gr(()=>b("td",null,null,-1)),uht=Gr(()=>b("td",null,"\u{1F9B6}",-1)),cht={class:"center"},fht={class:"fsxs"},hht=Gr(()=>b("td",null,null,-1)),dht=Gr(()=>b("td",null,null,-1)),pht=Gr(()=>b("td",null,"\u{1F340}",-1)),vht={class:"center"},ght=Gr(()=>b("td",null,"skills:",-1)),mht={style:{float:"right"}},_ht=["disabled"],yht={colspan:"2",s:""},bht=["id","onUpdate:modelValue"],wht=["value"],Sht=["src"],Tht=V(" use floating modifier for this regionGroup "),Pht={key:0,id:"chartPane"};function Eht(e,t,r,n,i,o){const a=de("FloatingModifierEdit");return r.workerEditing?(O(),R("div",wft,[b("div",Sft,[b("table",Tft,[b("tr",null,[Pft,b("td",null,[yt(b("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.workerEditing.label=s),style:{width:"10em"}},null,512),[[pe,r.workerEditing.label]]),V(" lvl."+L(r.workerEditing.level)+" ",1),b("button",{onClick:t[1]||(t[1]=s=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),b("button",{onClick:t[2]||(t[2]=s=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),st("",!0),b("div",Eft,[e.wasChanged&&r.workerInitial?(O(),R("button",{key:0,onClick:t[4]||(t[4]=s=>o.revert())},"revert")):st("",!0)])])]),b("tr",null,[Aft,b("td",null,[e.prerelease_charkind?(O(),R("select",{key:0,onChange:t[5]||(t[5]=s=>o.recalcStats(s.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(O(!0),R(W,null,Nt(n.gameStore.workerStatic,(s,l)=>(O(),R("option",{value:l},L(l)+" "+L(n.gameStore.uloc.char[l])+" "+L(s.wspd/1e6)+" / "+L(s.mspd/100)+" / "+L(s.luck/1e4),9,Cft))),256))],40,kft)):(O(),R(W,{key:1},[V(L(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),b("tr",null,[Mft,b("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(O(),R(W,{key:0},[xft],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(O(),R(W,{key:1},[V(L(n.gameStore.plantzoneName(r.workerEditing.job))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(O(),R("span",Lft,[V(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job],2))+" ",1),b("span",{onClick:t[6]||(t[6]=s=>e.showChartPane=!e.showChartPane)},L(e.showChartPane?"\u25C0":"\u25B6"),1)])):(O(),R("span",Ift,L(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(O(),R(W,{key:2},[Oft,yt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[7]||(t[7]=s=>r.workerEditing.job[3]=s)},null,512),[[pe,r.workerEditing.job[3]]]),Rft,yt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[8]||(t[8]=s=>r.workerEditing.job[1]=s)},null,512),[[pe,r.workerEditing.job[1],void 0,{number:!0}]]),Dft,yt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[9]||(t[9]=s=>r.workerEditing.job[2]=s)},null,512),[[pe,r.workerEditing.job[2],void 0,{number:!0}]]),Nft],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(O(),R(W,{key:3},[Fft],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(O(),R(W,{key:4},[V(L(n.gameStore.workerJobDescription(r.workerEditing))+" ",1),n.userStore.userWorkshops[r.workerEditing.job.hk].label?(O(),R(W,{key:0},[V(' "'+L(n.userStore.userWorkshops[r.workerEditing.job.hk].label)+'" ',1)],64)):st("",!0),V(" "+L(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" workload ",1),b("span",Bft," ["+L(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(O(),R(W,{key:5},[$ft,yt(b("input",{class:"workshop-label-input","onUpdate:modelValue":t[10]||(t[10]=s=>r.workerEditing.job[3]=s)},null,512),[[pe,r.workerEditing.job[3]]]),zft,yt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[11]||(t[11]=s=>r.workerEditing.job[1]=s)},null,512),[[pe,r.workerEditing.job[1],void 0,{number:!0}]]),Vft,yt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[12]||(t[12]=s=>r.workerEditing.job[2]=s)},null,512),[[pe,r.workerEditing.job[2],void 0,{number:!0}]]),Uft],64)):(O(),R(W,{key:6},[Gft],64))])]),r.workerEditing.job?(O(),R("tr",jft,[Wft,b("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(O(),R(W,{key:0},[V(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(O(),R("span",Hft,[V(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:Jr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):st("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(O(),R(W,{key:1},[V(L(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(O(),R(W,{key:2},[V(L(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(O(),R("span",Xft,[V(" \u2192 "+L(o.spaceSep(o.newProfit))+" ",1),b("span",{class:Jr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},L(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):st("",!0)],64)):st("",!0),n.gameStore.isGiant(r.workerEditing.charkey)?(O(),R("span",Yft," with giant bonus ")):st("",!0)])])):st("",!0),b("tr",null,[b("td",qft,[n.gameStore.ready?(O(),R("table",Zft,[Kft,b("tr",Jft,[b("td",Qft,[b("button",{onClick:t[13]||(t[13]=s=>o.setStatsMedian()),class:"fsxxs"},"median"),tht,b("button",{onClick:t[14]||(t[14]=s=>o.setStatsRandom()),class:"fsxxs"},"random")]),b("td",eht,L(o.formatFixed(o.statRank.wspd_rank*100,1))+"% ",1),b("td",null,[yt(b("input",{type:"number","onUpdate:modelValue":t[15]||(t[15]=s=>r.workerEditing.wspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.wspdSheet]])]),rht,b("td",null,L(o.formatFixed(o.currentWspdBonus,2)),1),nht,b("td",null,L(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),iht]),b("tr",oht,[b("td",aht,L(o.formatFixed(o.statRank.mspd_rank*100,1))+"% ",1),b("td",null,[yt(b("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>r.workerEditing.mspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.mspdSheet]])]),sht,b("td",null,L(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),lht,b("td",null,L(o.formatFixed(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100*(r.workerEditing.mspdSheet/(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100)+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),uht]),b("tr",cht,[b("td",fht,L(o.formatFixed(o.statRank.luck_rank*100,1))+"% ",1),b("td",null,[yt(b("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>r.workerEditing.luckSheet=s),step:"0.01",class:"w5em right"},null,512),[[pe,r.workerEditing.luckSheet]])]),hht,b("td",null,L(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),dht,b("td",null,L(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),pht])])):st("",!0)])]),b("tr",vht,[ght,b("td",null,[b("div",mht,[r.workerEditing.job?(O(),R("button",{key:0,disabled:!(r.workerEditing.job in n.userStore.pzJobs),onClick:t[18]||(t[18]=s=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,_ht)):st("",!0)])])]),(O(),R(W,null,Nt(9,s=>b("tr",null,[b("td",yht,[yt(b("select",{id:"skill"+(s-1),"onUpdate:modelValue":l=>r.workerEditing.skills[s-1]=l,class:"w30em animable",style:{width:"30em"}},[(O(!0),R(W,null,Nt(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[s-1]),l=>(O(),R("option",{value:l},L(n.gameStore.uloc.skill[l]+" / "+n.gameStore.uloc.skilldesc[l]),9,wht))),256))],8,bht),[[fn,r.workerEditing.skills[s-1]]]),e.prerelease_skillicon?(O(),R("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[s-1]}.png`,width:"22",height:"22"},null,8,Sht)):st("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&typeof r.workerEditing.job=="number"&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.allowFloating?(O(),R(W,{key:0},[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[19]||(t[19]=s=>n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]=s)},null,512),[[wr,n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]]]),Tht],64)):st("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job].regiongroup&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job].regiongroup]?(O(),R("div",Pht,[Mt(a,{rgk:n.gameStore.plantzones[r.workerEditing.job].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job].workload,show:!0},null,8,["rgk","wspd","workload"])])):st("",!0)])):st("",!0)}const m$=$e(bft,[["render",Eht],["__scopeId","data-v-369c132d"]]);const Aht={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{options:Object,show:{type:Boolean,default:!1}},data:()=>({customProfit:0,customCP:0,customLabel:""}),methods:{makeIconSrc:Fi,formatFixed:Bt,assignWorker(e,t){this.userStore.assignWorker(e,t),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,["workshop",this.customProfit,this.customCP,this.customLabel]),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}}},Aa=e=>(Vr("data-v-3a635d4e"),e=e(),Ur(),e),kht=Aa(()=>b("tr",null,[b("th",null,"node"),b("th",null,"workload"),b("th",null,"walk"),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"+efficiency"),b("th",null,"action")],-1)),Cht=["href"],Mht=V(L(" ")+" "),xht=["src"],Lht={class:"tac"},Iht={class:"tac"},Oht={class:"tac"},Rht={class:"tac"},Dht=["title"],Nht=V("+"),Fht=["title"],Bht={class:"tac"},$ht=["onClick"],zht=Aa(()=>b("tr",null,[b("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1)),Vht={key:0},Uht=Aa(()=>b("td",null,[V(" \u{1F33B} Farm "),b("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10"},"\u2139\uFE0F")],-1)),Ght=Aa(()=>b("td",{class:"tac"},"x",-1)),jht=Aa(()=>b("td",{class:"tac"},"x",-1)),Wht={class:"tac"},Hht={class:"tac"},Xht=["title"],Yht={class:"tac"},qht=Aa(()=>b("abbr",{title:"see Settings > Workshops config"},"\u2139\uFE0F",-1)),Zht={class:"tac"},Kht={class:"tac"},Jht={class:"tac"},Qht={class:"tac"},tdt={class:"tac"},edt=["onClick"],rdt=V(" \u270D\uFE0F Custom job "),ndt=Aa(()=>b("abbr",{title:"enter daily profit and CP cost for this specific job. these are per worker - so for Mass Production, divide by worker count manually"},"\u2139\uFE0F",-1)),idt={style:{float:"right"}},odt=V(" label: "),adt=Aa(()=>b("td",{class:"tac"},"x",-1)),sdt=Aa(()=>b("td",{class:"tac"},"x",-1)),ldt={class:"tac"},udt={class:"tac"},cdt={class:"tac"};function fdt(e,t,r,n,i,o){const a=de("RouterLink");return r.options?(O(),R(W,{key:0},[b("div",null,[V(" Send "+L(r.options.worker.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(O(),R(W,{key:0},[V(L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.options.worker).luck,2))+"\u{1F340} ",1)],64)):(O(),R(W,{key:1},[V(L(o.formatFixed(r.options.worker.wspdSheet,2))+"\u{1F528} "+L(o.formatFixed(r.options.worker.mspdSheet,2))+"\u{1F9B6} "+L(o.formatFixed(r.options.worker.luckSheet,2))+"\u{1F340} ",1)],64)),V(" ) where? "+L(r.options.jobs.length)+" top untaken nodes near "+L(n.gameStore.uloc.town[n.gameStore.tnk2tk(r.options.worker.tnk)])+": ",1)]),b("table",null,[kht,(O(!0),R(W,null,Nt(r.options.jobs,s=>(O(),R("tr",null,[b("td",null,[b("a",{href:this.userStore.codexNodeUrl+s.pz.key},L(s.pz.name),9,Cht),(O(!0),R(W,null,Nt(this.gameStore.plantzones[s.pz.key].itemkeys,l=>(O(),R(W,null,[Mht,Mt(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,xht)]),_:2},1032,["to"])],64))),256))]),b("td",Lht,L(n.userStore.useFloatingModifiers[s.pz.regiongroup]?"~":"")+L(o.formatFixed(n.userStore.medianWorkloads[s.pz.key],2)),1),b("td",Iht,L(o.formatFixed(s.profit.dist,0)),1),b("td",Oht,L(o.formatFixed(s.profit.priceDaily,2)),1),b("td",Rht,[b("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`)},L(s.mapCp),9,Dht),Nht,b("abbr",{title:s.infraTooltip},L(o.formatFixed(s.townCp)),9,Fht),V("="+L(o.formatFixed(s.cp)),1)]),b("td",Bht,L(o.formatFixed(s.dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:l=>o.assignWorker(r.options.worker,s.pz.key)},"assign",8,$ht)])]))),256)),zht,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(O(),R("tr",Vht,[Uht,Ght,jht,b("td",Wht,L(o.formatFixed(n.userStore.farmingProfitPerCP,2)),1),b("td",Hht,[b("abbr",{title:n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).infraTooltip},L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).townCp)),9,Xht)]),b("td",Yht,L(o.formatFixed(n.gameStore.farmSelectionEntry(n.gameStore.tnk2tk(r.options.worker.tnk)).dailyPerCp,3,!0)),1),b("td",null,[b("button",{onClick:t[0]||(t[0]=s=>o.assignWorker(r.options.worker,"farming"))},"assign")])])):st("",!0),(O(!0),R(W,null,Nt(n.userStore.userWorkshops,(s,l)=>(O(),R("tr",null,[(!o.workshopBusy(l)||s.industry=="mass")&&n.gameStore.houseDistance(r.options.worker.tnk,l)<1e6?(O(),R(W,{key:0},[b("td",null,[V(" \u{1F3ED} "+L(n.gameStore.uloc.char[l])+" ",1),qht]),b("td",Zht,L(s.manualWorkload),1),b("td",Kht,L(o.formatFixed(n.gameStore.houseDistance(r.options.worker.tnk,l),0)),1),b("td",Jht,L(o.formatFixed(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),2)),1),b("td",Qht,L(n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),1),b("td",tdt,L(o.formatFixed(n.userStore.jobEfficiencyDelta(n.gameStore.profitWorkshopWorker(l,s,r.options.worker),n.userStore.occupiedWorkshops.has(Number(l))?0:s.manualCp),3,!0)),1),b("td",null,[b("button",{onClick:u=>o.assignWorkerWorkshop(r.options.worker,l)},"assign",8,edt)])],64)):st("",!0)]))),256)),b("tr",null,[b("td",null,[rdt,ndt,b("div",idt,[odt,yt(b("input",{"onUpdate:modelValue":t[1]||(t[1]=s=>e.customLabel=s),class:"workshop-label-input"},null,512),[[pe,e.customLabel]])])]),adt,sdt,b("td",ldt,[yt(b("input",{type:"number",class:"float2",step:"0.1","onUpdate:modelValue":t[2]||(t[2]=s=>e.customProfit=s)},null,512),[[pe,e.customProfit,void 0,{number:!0}]])]),b("td",udt,[yt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[3]||(t[3]=s=>e.customCP=s)},null,512),[[pe,e.customCP,void 0,{number:!0}]])]),b("td",cdt,L(o.formatFixed(n.userStore.jobEfficiencyDelta(e.customProfit,e.customCP),3,!0)),1),b("td",null,[b("button",{onClick:t[4]||(t[4]=s=>o.assignWorkerCustom(r.options.worker))},"assign")])])])],64)):st("",!0)}const hdt=$e(Aht,[["render",fdt],["__scopeId","data-v-3a635d4e"]]),ddt={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:Bt}},pdt=V(" Connect to nearest town "),vdt=b("tr",null,[b("th",null,"House"),b("th",null,"\u{1F6CF}\uFE0F"),b("th",null,"CP")],-1),gdt=["disabled","onUpdate:modelValue"],mdt=V(" "+L(" ")+" "),_dt=["href"],ydt=["disabled"],bdt=V(" P2W slots \u2192 Total: ");function wdt(e,t,r,n,i,o){return r.o?(O(),R(W,{key:0},[b("h3",null,L(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(O(),R(W,{key:0},[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[wr,n.userStore.activateAncado]]),pdt],64)):st("",!0),b("table",null,[vdt,(O(!0),R(W,null,Nt(r.o.houses,a=>(O(),R("tr",null,[b("td",null,[yt(b("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":s=>n.userStore.lodgingTaken[a.key]=s},null,8,gdt),[[wr,n.userStore.lodgingTaken[a.key]]]),mdt,b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,_dt)]),b("td",null,L(a.lodgingSpaces),1),b("td",null,L(a.CP),1)]))),256)),b("tr",null,[b("td",null,[yt(b("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a),class:"short"},null,8,ydt),[[pe,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),bdt]),b("td",null,L(n.userStore.haveLodging.slots.perTown[r.tk]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):st("",!0)}const Sdt=$e(ddt,[["render",wdt]]);const Tdt={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.length&&e.push(1022),e.sort((n,i)=>{var o=this.gameStore.itemInfo[i].typePriority-this.gameStore.itemInfo[n].typePriority;if(o)return o;var o=this.gameStore.itemInfo[i].grade-this.gameStore.itemInfo[n].grade;return o||i-n});const t=Array(this.userStore.storagePersonal[this.tk]).fill("P"),r=e.concat(t);return e.length&&r.push("F"),r}},methods:{formatFixed:Bt,makeIconSrc:Fi,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)}}},jr=e=>(Vr("data-v-8b0dccec"),e=e(),Ur(),e),Pdt={style:{"font-size":"x-large"}},Edt=V(" housing config"),Adt=V(" Connect to nearest town "),kdt={class:"section"},Cdt=jr(()=>b("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),Mdt=jr(()=>b("br",null,null,-1)),xdt=V(" - 1 initial"),Ldt=jr(()=>b("br",null,null,-1)),Idt=V(" - "),Odt=["disabled"],Rdt=V(" from P2W"),Ddt=jr(()=>b("br",null,null,-1)),Ndt={key:0},Fdt={key:1,class:"red"},Bdt=jr(()=>b("br",null,null,-1)),$dt={class:"section"},zdt={id:"storageParent"},Vdt={id:"storageLeft"},Udt=jr(()=>b("h3",null,"\u{1F4E6} storage",-1)),Gdt=jr(()=>b("br",null,null,-1)),jdt=V(" + 1 Seal + 1 Free slot"),Wdt=jr(()=>b("br",null,null,-1)),Hdt=V(" + "),Xdt=V(" Personal items"),Ydt=jr(()=>b("br",null,null,-1)),qdt=jr(()=>b("span",{class:"markInnate underline"},"initial",-1)),Zdt=jr(()=>b("br",null,null,-1)),Kdt=V(" - "),Jdt=V(" "+L(" ")),Qdt=jr(()=>b("span",{class:"markP2W underline"},"from P2W",-1)),t0t=jr(()=>b("br",null,null,-1)),e0t=jr(()=>b("span",{class:"markProvided underline"},"required",-1)),r0t={key:1},n0t={key:2,class:"red"},i0t=jr(()=>b("br",null,null,-1)),o0t=jr(()=>b("span",{class:"markExtra underline"},"extra",-1)),a0t={id:"storageItemList"},s0t={key:0},l0t={key:0,class:"textItem"},u0t={key:1,class:"textItem"},c0t=["title"],f0t=["src"],h0t=["title"];function d0t(e,t,r,n,i,o){return r.tk>0?(O(),R(W,{key:0},[b("p",null,[b("span",Pdt,L(n.gameStore.uloc.town[r.tk]),1),Edt]),r.tk==619?(O(),R(W,{key:0},[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[wr,n.userStore.activateAncado]]),Adt],64)):st("",!0),b("div",kdt,[Cdt,V(" "+L(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),Mdt,xdt,Ldt,Idt,yt(b("input",{type:"number",class:"w3em",min:"0",max:"20",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,Odt),[[pe,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),Rdt,Ddt,V(" = "+L(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(O(),R("span",Ndt,"\u2190 max possible")):st("",!0),n.userStore.townsInfra[r.tk].errL?(O(),R("span",Fdt,"\u2190 too much!")):st("",!0),Bdt,b("strong",null,L(n.userStore.townsInfra[r.tk].lodging)+" found ",1)]),b("div",$dt,[b("div",zdt,[b("div",Vdt,[Udt,V(" "+L(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),Gdt,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(O(),R(W,{key:0},[jdt,Wdt],64)):st("",!0),Hdt,yt(b("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[pe,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),Xdt,Ydt,V(" - "+L(n.userStore.baseStorage)+" ",1),qdt,Zdt,Kdt,yt(b("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[pe,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),Jdt,Qdt,t0t,V(" = "+L(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),e0t,n.userStore.townsInfra[r.tk].warnS?(O(),R("span",r0t,"\u2190 max possible")):st("",!0),n.userStore.townsInfra[r.tk].errS?(O(),R("span",n0t,"\u2190 too much!")):st("",!0),i0t,b("strong",null,L(n.userStore.townsInfra[r.tk].storage)+" found",1),V(" \u2192 "+L(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),o0t]),b("div",a0t,[(O(!0),R(W,null,Nt(o.storageViewCount,a=>(O(),R(W,null,[a>1&&(a-1)%9==0?(O(),R("br",s0t)):st("",!0),b("div",{class:Jr(["storageCell",{markInnate:0<=a&&a<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[a-1>o.ingameSortedItems.length?(O(),R("span",l0t)):isNaN(o.ingameSortedItems[a-1])?(O(),R("span",u0t,L(o.ingameSortedItems[a-1]),1)):(O(),R("abbr",{key:2,title:o.ingameSortedItems[a-1]+" "+n.gameStore.uloc.item[o.ingameSortedItems[a-1]]},[b("img",{src:o.makeIconSrc(o.ingameSortedItems[a-1]),class:"iconitem"},null,8,f0t)],8,c0t))],2)],64))),256))])])]),V(" Found cost: "+L(n.userStore.townsInfra[r.tk].cost)+" CP ",1),n.userStore.townsInfra[r.tk].success?(O(),R("abbr",{key:1,class:"tooltip",title:o.houseCraftPickedTooltip(r.tk)},"\u2139\uFE0F",8,h0t)):st("",!0)],64)):st("",!0)}const p0t=$e(Tdt,[["render",d0t],["__scopeId","data-v-8b0dccec"]]);function e1(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const WE=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),dx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);dx&&parseFloat(dx[1]);const v0t="3.2.7";function va(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const R3=typeof process!="object"||String(process)!=="[object process]"||process.browser,g0t=typeof window<"u"&&typeof window.orientation<"u",px=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);px&&parseFloat(px[1]);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class m0t{constructor(t,r){E(this,"name",void 0),E(this,"workerThread",void 0),E(this,"isRunning",!0),E(this,"result",void 0),E(this,"_resolve",()=>{}),E(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){va(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){va(this.isRunning),this.isRunning=!1,this._reject(t)}}class eb{}const rb=new Map;function _0t(e){va(e.source&&!e.url||!e.source&&e.url);let t=rb.get(e.source||e.url);return t||(e.url&&(t=y0t(e.url),rb.set(e.url,t)),e.source&&(t=_$(e.source),rb.set(e.source,t))),va(t),t}function y0t(e){if(!e.startsWith("http"))return e;const t=b0t(e);return _$(t)}function _$(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function b0t(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function y$(e,t=!0,r){const n=r||new Set;if(e){if(vx(e))n.add(e);else if(vx(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)y$(e[i],t,n)}}return r===void 0?Array.from(n):[]}function vx(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const nb=()=>{};class D3{static isSupported(){return typeof Worker<"u"&&R3||typeof eb!==void 0}constructor(t){E(this,"name",void 0),E(this,"source",void 0),E(this,"url",void 0),E(this,"terminated",!1),E(this,"worker",void 0),E(this,"onMessage",void 0),E(this,"onError",void 0),E(this,"_loadableURL","");const{name:r,source:n,url:i}=t;va(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=nb,this.onError=o=>console.log(o),this.worker=R3?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=nb,this.onError=nb,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||y$(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=_0t({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new eb(n,{eval:!1})}else if(this.source)t=new eb(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class w0t{static isSupported(){return D3.isSupported()}constructor(t){E(this,"name","unnamed"),E(this,"source",void 0),E(this,"url",void 0),E(this,"maxConcurrency",1),E(this,"maxMobileConcurrency",1),E(this,"onDebug",()=>{}),E(this,"reuseWorkers",!0),E(this,"props",{}),E(this,"jobQueue",[]),E(this,"idleQueue",[]),E(this,"count",0),E(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,a)=>i.done(a),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new m0t(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new D3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return g0t?this.maxMobileConcurrency:this.maxConcurrency}}const S0t={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class ra{static isSupported(){return D3.isSupported()}static getWorkerFarm(t={}){return ra._workerFarm=ra._workerFarm||new ra({}),ra._workerFarm.setProps(t),ra._workerFarm}constructor(t){E(this,"props",void 0),E(this,"workerPools",new Map),this.props={...S0t},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new w0t({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}E(ra,"_workerFarm",void 0);const T0t="latest";function P0t(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=T0t);const a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(a,"/dist/").concat(n)}return va(i),i}function E0t(e,t=v0t){va(e,"no worker provided");const r=e.version;return!(!t||!r)}function A0t(e,t){return!ra.isSupported()||!R3&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function k0t(e,t,r,n,i){const o=e.id,a=P0t(e,r),l=ra.getWorkerFarm(r).getWorkerPool({name:o,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",C0t.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function C0t(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:i,result:s})}catch(s){const l=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function b$(e){return e&&typeof e=="object"&&e.isBuffer}function M0t(e){return b$(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function w$(e){if(b$(e))return M0t(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function x0t(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function L0t(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,a)=>o+a.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function I0t(e){const t=[];for await(const r of e)t.push(r);return L0t(...t)}function gx(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class mx{constructor(t,r){E(this,"name",void 0),E(this,"type",void 0),E(this,"sampleSize",1),E(this,"time",void 0),E(this,"count",void 0),E(this,"samples",void 0),E(this,"lastTiming",void 0),E(this,"lastSampleTime",void 0),E(this,"lastSampleCount",void 0),E(this,"_count",0),E(this,"_time",0),E(this,"_samples",0),E(this,"_startTime",0),E(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=gx(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(gx()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class w_{constructor(t){E(this,"id",void 0),E(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof mx?this.stats[r]=t:this.stats[r]=new mx(r,n)),this.stats[r]}}const O0t="Queued Requests",R0t="Active Requests",D0t="Cancelled Requests",N0t="Queued Requests Ever",F0t="Active Requests Ever",B0t={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class $0t{constructor(t={}){E(this,"props",void 0),E(this,"stats",void 0),E(this,"activeRequestCount",0),E(this,"requestQueue",[]),E(this,"requestMap",new Map),E(this,"deferredUpdate",null),this.props={...B0t,...t},this.stats=new w_({id:this.props.id}),this.stats.get(O0t),this.stats.get(R0t),this.stats.get(D0t),this.stats.get(N0t),this.stats.get(F0t)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let z0t="";const _x={};function V0t(e){for(const t in _x)if(e.startsWith(t)){const r=_x[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(z0t).concat(e)),e}function U0t(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const G0t=e=>typeof e=="boolean",kd=e=>typeof e=="function",V0=e=>e!==null&&typeof e=="object",yx=e=>V0(e)&&e.constructor==={}.constructor,j0t=e=>e&&typeof e[Symbol.iterator]=="function",W0t=e=>e&&typeof e[Symbol.asyncIterator]=="function",Sf=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Tf=e=>typeof Blob<"u"&&e instanceof Blob,H0t=e=>e&&typeof e=="object"&&e.isBuffer,X0t=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||V0(e)&&kd(e.tee)&&kd(e.cancel)&&kd(e.getReader),Y0t=e=>V0(e)&&kd(e.read)&&kd(e.pipe)&&G0t(e.readable),S$=e=>X0t(e)||Y0t(e),q0t=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,Z0t=/^([-\w.]+\/[-\w.+]+)/;function K0t(e){const t=Z0t.exec(e);return t?t[1]:e}function bx(e){const t=q0t.exec(e);return t?t[1]:""}const J0t=/\?.*/;function S_(e){if(Sf(e)){const t=ib(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:K0t(r)||bx(t)}}return Tf(e)?{url:ib(e.name||""),type:e.type||""}:typeof e=="string"?{url:ib(e),type:bx(e)}:{url:"",type:""}}function Q0t(e){return Sf(e)?e.headers["content-length"]||-1:Tf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function ib(e){return e.replace(J0t,"")}async function T$(e){if(Sf(e))return e;const t={},r=Q0t(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=S_(e);i&&(t["content-type"]=i);const o=await rpt(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:n}),a}async function tpt(e){if(!e.ok){const t=await ept(e);throw new Error(t)}}async function ept(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function rpt(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var a;return n(o==null||(a=o.target)===null||a===void 0?void 0:a.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=npt(r);return"data:base64,".concat(n)}return null}function npt(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function Sx(e,t){if(typeof e=="string"){e=V0t(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await T$(e)}function P$(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function ka(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||P$()}const Kg={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},vv=Kg.window||Kg.self||Kg.global,mh=Kg.process||{},E$=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";ka();const ob=globalThis;function A$(e){if(!e&&!ka())return"Node";if(P$(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":ob.chrome?"Chrome":ob.safari?"Safari":ob.mozInnerScreenX?"Firefox":"Unknown"}function ipt(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class opt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";E(this,"storage",void 0),E(this,"id",void 0),E(this,"config",{}),this.storage=ipt(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function apt(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function spt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function ab(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let r1;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(r1||(r1={}));function Tx(e){return typeof e=="string"?r1[e.toUpperCase()]||r1.WHITE:e}function lpt(e,t,r){return!ka&&typeof e=="string"&&(t&&(t=Tx(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=Tx(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function upt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function n1(e,t){if(!e)throw new Error(t||"Assertion failed")}function Xu(){let e;if(ka&&"performance"in vv){var t,r;e=vv==null||(t=vv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in mh){var n;const i=mh==null||(n=mh.hrtime)===null||n===void 0?void 0:n.call(mh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Yu={debug:ka&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},cpt={enabled:!0,level:0};function Hn(){}const Px={},Ex={once:!0};class U0{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};E(this,"id",void 0),E(this,"VERSION",E$),E(this,"_startTs",Xu()),E(this,"_deltaTs",Xu()),E(this,"_storage",void 0),E(this,"userData",{}),E(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new opt("__probe-".concat(this.id,"__"),cpt),this.userData={},this.timeStamp("".concat(this.id," started")),upt(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((Xu()-this._startTs).toPrecision(10))}getDelta(){return Number((Xu()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){n1(t,r)}warn(t){return this._getLogFunction(0,t,Yu.warn,arguments,Ex)}error(t){return this._getLogFunction(0,t,Yu.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Yu.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Yu.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,Yu.debug||Yu.info,arguments,Ex)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Hn,n&&[n],{tag:ppt(r)}):Hn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:a=1}=t;return this._shouldLog(r||n)?ka?dpt({image:i,message:o,scale:a}):hpt({image:i,message:o,scale:a}):Hn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Hn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Ax({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Hn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=k$(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Ax({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,n1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=Xu();const a=o.tag||o.message;if(o.once)if(!Px[a])Px[a]=Xu();else return Hn;return r=fpt(this.id,o.message,o),n.bind(console,r,...o.args)}return Hn}}E(U0,"VERSION",E$);function k$(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return n1(Number.isFinite(t)&&t>=0),t}function Ax(e){const{logLevel:t,message:r}=e;e.logLevel=k$(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return n1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function fpt(e,t,r){if(typeof t=="string"){const n=r.time?spt(apt(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=lpt(t,r.color,r.background)}return t}function hpt(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Hn}function dpt(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const a=ab(o,r,n);console.log(...a)},o.src=t,Hn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...ab(t,r,n)),Hn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...ab(o,r,n)),o.src=t.toDataURL(),Hn}return Hn}function ppt(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const kx=new U0({id:"loaders.gl"});class vpt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class gpt{constructor(){E(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const C$={fetch:null,mimeType:void 0,nothrow:!1,log:new gpt,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:WE,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},mpt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function M$(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const x$=()=>{const e=M$();return e.globalOptions=e.globalOptions||{...C$},e.globalOptions};function _pt(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],ypt(e,r),wpt(t,e,n)}function L$(e,t){const r=x$(),n=e||r;return typeof n.fetch=="function"?n.fetch:V0(n.fetch)?i=>Sx(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:Sx}function ypt(e,t){Cx(e,null,C$,mpt,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};Cx(n,r.id,i,o,t)}}function Cx(e,t,r,n,i){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&V0(e[s]),u=s==="baseUri"&&!t,c=s==="workerUrl"&&t;if(!(s in r)&&!u&&!c){if(s in n)kx.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!l){const f=bpt(s,i);kx.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(f))()}}}}function bpt(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const a=o.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function wpt(e,t,r){const i={...e.options||{}};return Spt(i,r),i.log===null&&(i.log=new vpt),Mx(i,x$()),Mx(i,t),i}function Mx(e,t){for(const r in t)if(r in t){const n=t[r];yx(n)&&yx(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function Spt(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function HE(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function XE(e){var t,r;e1(e,"null loader"),e1(HE(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const I$=()=>{const e=M$();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function Tpt(e){const t=I$();e=Array.isArray(e)?e:[e];for(const r of e){const n=XE(r);t.find(i=>n===i)||t.unshift(n)}}function Ppt(){return I$()}const Ept=new U0({id:"loaders.gl"}),Apt=/\.([^.]+)$/;async function kpt(e,t=[],r,n){if(!O$(e))return null;let i=xx(e,t,{...r,nothrow:!0},n);if(i)return i;if(Tf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=xx(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error(R$(e));return i}function xx(e,t=[],r,n){if(!O$(e))return null;if(t&&!Array.isArray(t))return XE(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...Ppt()),Mpt(i);const o=Cpt(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error(R$(e));return o}function Cpt(e,t,r,n){const{url:i,type:o}=S_(e),a=i||(n==null?void 0:n.url);let s=null,l="";if(r!=null&&r.mimeType&&(s=sb(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),s=s||xpt(t,a),l=l||(s?"matched url ".concat(a):""),s=s||sb(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||Ipt(t,e),l=l||(s?"matched initial data ".concat(D$(e)):""),s=s||sb(t,r==null?void 0:r.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l){var u;Ept.log(1,"selectLoader selected ".concat((u=s)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return s}function O$(e){return!(e instanceof Response&&e.status===204)}function R$(e){const{url:t,type:r}=S_(e);let n="No valid loader found (";n+=t?"".concat(U0t(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?D$(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function Mpt(e){for(const t of e)XE(t)}function xpt(e,t){const r=t&&Apt.exec(t),n=r&&r[1];return n?Lpt(e,n):null}function Lpt(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function sb(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function Ipt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(Opt(t,r))return r}else if(ArrayBuffer.isView(t)){if(Lx(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Lx(t,0,r))return r;return null}function Opt(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function Lx(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>Rpt(e,t,r,i))}function Rpt(e,t,r,n){if(n instanceof ArrayBuffer)return x0t(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=N3(e,t,n.length);return n===i;default:return!1}}function D$(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?N3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?N3(e,0,t):""}function N3(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const Dpt=256*1024;function*Npt(e,t){const r=(t==null?void 0:t.chunkSize)||Dpt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),a=e.slice(n,n+o);n+=o,yield i.encode(a)}}const Fpt=256*1024;function*Bpt(e,t={}){const{chunkSize:r=Fpt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),a=new Uint8Array(e,n,i);new Uint8Array(o).set(a),n+=i,yield o}}const $pt=1024*1024;async function*zpt(e,t){const r=(t==null?void 0:t.chunkSize)||$pt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function Ix(e,t){return WE?Vpt(e,t):Upt(e)}async function*Vpt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:a}=await i;if(o)return;yield w$(a)}}catch{r.releaseLock()}}async function*Upt(e,t){for await(const r of e)yield w$(r)}function Gpt(e,t){if(typeof e=="string")return Npt(e,t);if(e instanceof ArrayBuffer)return Bpt(e,t);if(Tf(e))return zpt(e,t);if(S$(e))return Ix(e,t);if(Sf(e))return Ix(e.body,t);throw new Error("makeIterator")}const N$="Cannot convert supplied data type";function jpt(e,t,r){if(t.text&&typeof e=="string")return e;if(H0t(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(N$)}async function Wpt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return jpt(e,t);if(Tf(e)&&(e=await T$(e)),Sf(e)){const i=e;return await tpt(i),t.binary?await i.arrayBuffer():await i.text()}if(S$(e)&&(e=Gpt(e,r)),j0t(e)||W0t(e))return I0t(e);throw new Error(N$)}function Hpt(e,t,r=null){if(r)return r;const n={fetch:L$(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function Xpt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function YE(e,t,r,n){va(!n||typeof n=="object"),t&&!Array.isArray(t)&&!HE(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=S_(e),a=Xpt(t,n),s=await kpt(e,a,r);return s?(r=_pt(r,s,a,i),n=Hpt({url:i,parse:YE,loaders:a},r,n),await Ypt(s,e,r,n)):null}async function Ypt(e,t,r,n){if(E0t(e),Sf(t)){const i=t,{ok:o,redirected:a,status:s,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:a,status:s,statusText:l,type:u,url:c}}if(t=await Wpt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(A0t(e,r))return await k0t(e,t,r,n,YE);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw va(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function i1(e,t,r,n){!Array.isArray(t)&&!HE(t)&&(r=t,t=void 0);const i=L$(r);let o=e;return typeof e=="string"&&(o=await i(e)),Tf(e)&&(o=await i(e)),await YE(o,t,r)}const qpt="3.2.7",{_parseImageNode:Zpt}=globalThis,F3=typeof Image<"u",B3=typeof ImageBitmap<"u",Kpt=Boolean(Zpt),$3=WE?!0:Kpt;function Jpt(e){switch(e){case"auto":return B3||F3||$3;case"imagebitmap":return B3;case"image":return F3;case"data":return $3;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function Qpt(){if(B3)return"imagebitmap";if(F3)return"image";if($3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function tvt(e){const t=rvt(e);if(!t)throw new Error("Not an image");return t}function evt(e){switch(tvt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function rvt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const nvt=/^data:image\/svg\+xml/,ivt=/\.svg((\?|#).*)?$/;function qE(e){return e&&(nvt.test(e)||ivt.test(e))}function ovt(e,t){if(qE(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return F$(e,t)}function F$(e,t){if(qE(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function B$(e,t,r){const n=ovt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await avt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function avt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const svt={};let Ox=!0;async function lvt(e,t,r){let n;qE(r)?n=await B$(e,t,r):n=F$(e,r);const i=t&&t.imagebitmap;return await uvt(n,i)}async function uvt(e,t=null){if((cvt(t)||!Ox)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),Ox=!1}return await createImageBitmap(e)}function cvt(e){for(const t in e||svt)return!1;return!0}const vo=!1,Cd=!0;function $$(e){const t=G0(e);return fvt(t)||pvt(t)||hvt(t)||dvt(t)}function fvt(e){const t=G0(e);return t.byteLength>=24&&t.getUint32(0,vo)===2303741511?{mimeType:"image/png",width:t.getUint32(16,vo),height:t.getUint32(20,vo)}:null}function hvt(e){const t=G0(e);return t.byteLength>=10&&t.getUint32(0,vo)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Cd),height:t.getUint16(8,Cd)}:null}function dvt(e){const t=G0(e);return t.byteLength>=14&&t.getUint16(0,vo)===16973&&t.getUint32(2,Cd)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Cd),height:t.getUint32(22,Cd)}:null}function pvt(e){const t=G0(e);if(!(t.byteLength>=3&&t.getUint16(0,vo)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=vvt();let o=2;for(;o+9<t.byteLength;){const a=t.getUint16(o,vo);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,vo),width:t.getUint16(o+7,vo)};if(!n.has(a))return null;o+=2,o+=t.getUint16(o,vo)}return null}function vvt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function G0(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function gvt(e,t){const{mimeType:r}=$$(e)||{},n=globalThis._parseImageNode;return e1(n),await n(e,r)}async function mvt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},a=_vt(i);let s;switch(a){case"imagebitmap":s=await lvt(e,t,o);break;case"image":s=await B$(e,t,o);break;case"data":s=await gvt(e);break;default:e1(!1)}return i==="data"&&(s=evt(s)),s}function _vt(e){switch(e){case"auto":case"data":return Qpt();default:return Jpt(e),e}}const yvt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],bvt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],wvt={image:{type:"auto",decode:!0}},z$={id:"image",module:"images",name:"Images",version:qpt,mimeTypes:bvt,extensions:yvt,parse:mvt,tests:[e=>Boolean($$(new DataView(e)))],options:wvt},Wt=new U0({id:"deck"});let z3={};function Svt(e){z3=e}function Or(e,t,r,n){Wt.level>0&&z3[e]&&z3[e].call(null,t,r,n)}function Tvt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const Pvt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:Tvt,parseTextSync:JSON.parse},Md="8.8.8",Jg=globalThis.deck&&globalThis.deck.VERSION;if(Jg&&Jg!==Md)throw new Error("deck.gl - multiple versions detected: ".concat(Jg," vs ").concat(Md));Jg||(Wt.log(1,"deck.gl ".concat(Md))(),globalThis.deck={...globalThis.deck,VERSION:Md,version:Md,log:Wt,_registerLoggers:Svt},Tpt([Pvt,[z$,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Evt=globalThis.deck,Lt=new U0({id:"luma.gl"});function Zr(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Avt="Invalid WebGLRenderingContext",kvt="Requires WebGL2";function T_(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function Qt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Cvt(e){return Qt(e)?e:null}function P_(e){return Zr(T_(e),Avt),e}function Dr(e){return Zr(Qt(e),kvt),e}const td={};function Mvt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function xvt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function Lvt(e,t){td[e]=!0,t!==void 0&&Mvt(t)}function Ivt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(td[n]=!0);while(n!==0);for(n in td)if(td[n])return delete td[n],parseInt(n,10);return 0}}const j0=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};j0.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};j0.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const mu=function(t){const r=this;this.gl=t,Ivt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,a){switch(o){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,a){const l=r.currentVertexArrayObject.attribs[o];switch(a){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,a,s,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=a,h.type=s,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{xvt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};mu.prototype.VERTEX_ARRAY_BINDING_OES=34229;mu.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new j0(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};mu.prototype.createVertexArrayOES=function(){const t=new j0(this);return this.vertexArrayObjects.push(t),t};mu.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};mu.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof j0&&t.hasBeenBound&&t.ext===this)};mu.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){Lvt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=s;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(a!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),a=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function Ovt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new mu(this)),this.__OESVertexArrayObject))}}const Rx="OES_element_index",Dx="WEBGL_draw_buffers",Rvt="EXT_disjoint_timer_query",Dvt="EXT_disjoint_timer_query_webgl2",Nvt="EXT_texture_filter_anisotropic",Nx="WEBGL_debug_renderer_info",Fvt=35723,Bvt=4352,$vt=36795,zvt=34047,Vvt=37445,Uvt=37446,Re=e=>Qt(e)?void 0:0,Gvt={[3074]:e=>Qt(e)?void 0:36064,[Fvt]:e=>Qt(e)?void 0:Bvt,[35977]:Re,[32937]:Re,[$vt]:(e,t)=>{const r=Qt(e)?e.getExtension(Dvt):e.getExtension(Rvt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[Vvt]:(e,t)=>{const r=e.getExtension(Nx);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[Uvt]:(e,t)=>{const r=e.getExtension(Nx);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[zvt]:(e,t)=>{const r=e.luma.extensions[Nvt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:Re,[35071]:Re,[37447]:Re,[36063]:(e,t)=>{if(!Qt(e)){const r=e.getExtension(Dx);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:Re,[35374]:Re,[35377]:Re,[34852]:e=>{if(!Qt(e)){const t=e.getExtension(Dx);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(Rx)?2147483647:65535,[33001]:e=>e.getExtension(Rx)?16777216:65535,[33e3]:e=>16777216,[37157]:Re,[35373]:Re,[35657]:Re,[36183]:Re,[37137]:Re,[34045]:Re,[35978]:Re,[35979]:Re,[35968]:Re,[35376]:Re,[35375]:Re,[35659]:Re,[37154]:Re,[35371]:Re,[35658]:Re,[35076]:Re,[35077]:Re,[35380]:Re};function jvt(e,t,r){const n=Gvt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const Wvt="OES_vertex_array_object",V$="ANGLE_instanced_arrays",Hvt="WEBGL_draw_buffers",Xvt="EXT_disjoint_timer_query",Yvt="EXT_texture_filter_anisotropic",qvt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Zvt(e,t){return{webgl2:Qt(e),ext:e.getExtension(t)}}const U$={[Wvt]:{meta:{suffix:"OES"},createVertexArray:()=>{Zr(!1,qvt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[V$]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){Zr(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Hvt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{Zr(!1)}},[Xvt]:{meta:{suffix:"EXT"},createQuery:()=>{Zr(!1)},deleteQuery:()=>{Zr(!1)},beginQuery:()=>{Zr(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},lb={readBuffer:(e,t,r)=>{Qt(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=Zvt(e,V$);let a;switch(n){case 35069:a=i?void 0:!1;break;case 35070:a=!i&&!o?0:void 0;break}return a!==void 0?a:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!Qt(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!Qt(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[Yvt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:jvt,hint(e,t,r,n){return t(r,n)}};function Kvt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(Ovt(e),Jvt(e),tgt(e,U$),Qvt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=Kvt;function Jvt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function Qvt(e,t){let{target:r,target2:n}=t;Object.keys(lb).forEach(i=>{if(typeof lb[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},a=lb[i].bind(null,e,o);r[i]=a,n[i]=a}})}function tgt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&egt(e,{extension:r,target:e.luma,target2:e})}function egt(e,t){let{extension:r,target:n,target2:i}=t;const o=U$[r];Zr(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(s);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const ZE={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Ua=(e,t,r)=>t?e.enable(r):e.disable(r),Fx=(e,t,r)=>e.hint(r,t),yn=(e,t,r)=>e.pixelStorei(r,t),rgt=(e,t)=>{const r=Qt(e)?36009:36160;return e.bindFramebuffer(r,t)},ngt=(e,t)=>e.bindFramebuffer(36008,t);function _h(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const igt={[3042]:Ua,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Ua,[2885]:(e,t)=>e.cullFace(t),[2929]:Ua,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Ua,[35723]:Fx,[36006]:rgt,[2886]:(e,t)=>e.frontFace(t),[33170]:Fx,[2849]:(e,t)=>e.lineWidth(t),[32823]:Ua,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Ua,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Ua,[3088]:(e,t)=>e.scissor(...t),[2960]:Ua,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:yn,[3317]:yn,[37440]:yn,[37441]:yn,[37443]:yn,[3330]:yn,[3332]:yn,[3331]:yn,[36010]:ngt,[3314]:yn,[32878]:yn,[3316]:yn,[3315]:yn,[32877]:yn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=_h(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=_h(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=_h(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=_h(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=_h(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function je(e,t,r){return t[e]!==void 0?t[e]:r[e]}const ogt={blendEquation:(e,t,r)=>e.blendEquationSeparate(je(32777,t,r),je(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(je(32969,t,r),je(32968,t,r),je(32971,t,r),je(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(je(32824,t,r),je(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(je(32938,t,r),je(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,je(2962,t,r),je(2967,t,r),je(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,je(34816,t,r),je(36003,t,r),je(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,je(2964,t,r),je(2965,t,r),je(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,je(34817,t,r),je(34818,t,r),je(34819,t,r))},Bx={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},Ji=(e,t)=>e.isEnabled(t),$x={[3042]:Ji,[2884]:Ji,[2929]:Ji,[3024]:Ji,[32823]:Ji,[32926]:Ji,[32928]:Ji,[3089]:Ji,[2960]:Ji,[35977]:Ji};function G$(e){for(const t in e)return!1;return!0}function agt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function zx(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function sgt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...a);return l&&n(...a),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function lgt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class ugt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?fgt(t):Object.assign({},ZE),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){Zr(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];ga(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){Zr(o!==void 0);const a=t[o],s=this.cache[o];agt(a,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=a)}return{valueChanged:r,oldValue:n}}}function j$(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(Zr(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new ugt(e,{copyState:n}),lgt(e);for(const o in Bx){const a=Bx[o];sgt(e,o,a)}zx(e,"getParameter"),zx(e,"isEnabled")}return e.state.enable=r,e}function cgt(e){e.state||j$(e,{copyState:!1}),e.state.push()}function Vx(e){Zr(e.state),e.state.pop()}function ga(e,t){if(Zr(T_(e),"setParameters requires a WebGL context"),G$(t))return;const r={};for(const i in t){const o=Number(i),a=igt[i];a&&(typeof a=="string"?r[a]=!0:a(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=ogt[i];o(e,t,n)}}function fgt(e,t){if(t=t||ZE,typeof t=="number"){const i=t,o=$x[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=$x[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function hgt(e){ga(e,ZE)}function ti(e,t,r){if(G$(t))return r(e);const{nocatch:n=!0}=t;cgt(e),ga(e,t);let i;if(n)i=r(e),Vx(e);else try{i=r(e)}finally{Vx(e)}return i}function Kc(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function ub(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Kc(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return pgt(t,n,i,o,r)}function dgt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function pgt(e,t,r,n,i){const o=Ux(e[0],t,r);let a=Gx(e[1],t,n,i),s=Ux(e[0]+1,t,r);const l=s===r-1?s:s-1;s=Gx(e[1]+1,t,n,i);let u;return i?(s=s===0?s:s+1,u=a,a=s):u=s===n-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(u-a+1,1)}}function Ux(e,t,r){return Math.min(Math.round(e*t),r-1)}function Gx(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const KE=ka(),vgt=KE&&typeof document<"u",W$={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function H$(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Zr(KE,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},W$,e);const{width:t,height:r}=e;function n(s){if(e.throwOnError)throw new Error(s);return console.error(s),null}e.onError=n;let i;const{canvas:o}=e,a=ygt({canvas:o,width:t,height:r,onError:n});return i=_gt(a,e),i?(i=JE(i,e),bgt(i),i):null}function JE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||wgt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},W$,t);const{manageState:r,debug:n}=t;return r&&j$(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Lt.log(1,...o)()}}),KE&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Lt.level=Math.max(Lt.level,1)):Lt.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function ggt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function mgt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=dgt(t.useDevicePixels);Sgt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function _gt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):r("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function ygt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(vgt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function bgt(e){const t=Qt(e)?"WebGL2":"WebGL1",r=ggt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Lt.info(1,"".concat(t).concat(i," context ").concat(n))()}function wgt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function Sgt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Lt.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let a=t;const s=Math.floor(n*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,(e.drawingBufferWidth!==s||e.drawingBufferHeight!==l)&&(Lt.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const xd="8.5.16",Tgt="set luma.log.level=1 (or higher) to trace rendering";class X${constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new w_({id:t})),this.stats.get(t)}}const Ol=new X$;if(globalThis.luma&&globalThis.luma.VERSION!==xd)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(xd));globalThis.luma||(ka()&&Lt.log(1,"luma.gl ".concat(xd," - ").concat(Tgt))(),globalThis.luma=globalThis.luma||{VERSION:xd,version:xd,log:Lt,stats:Ol,globals:{modules:{},nodeIO:{}}});function Pgt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function Egt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function gt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function cb(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return gt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function Ss(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const fb={};function Is(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";fb[e]=fb[e]||1;const t=fb[e]++;return"".concat(e,"-").concat(t)}function jx(e){return gt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function Jc(e){let t=!0;for(const r in e){t=!1;break}return t}function Y$(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(a=>{o.methodName||(o[a]=()=>{throw Lt.removed("Calling removed method ".concat(t,".").concat(a,": "),i)(),new Error(a)})})}const qu="Resource subclass must define virtual methods";class Ca{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P_(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Is(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=cb(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const s=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:s}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=Qt(this.gl),a={},s=r||Object.keys(i);for(const l of s){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?Ss(this.gl,l):l;a[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(a[f]=Ss(this.gl,a[f]))}}return a}setParameter(t,r){t=cb(this.gl,t),gt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=Qt(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=cb(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return Y$(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(qu)}_deleteHandle(){throw new Error(qu)}_bindHandle(t){throw new Error(qu)}_getOptsFromHandle(){throw new Error(qu)}_getParameter(t,r){throw new Error(qu)}_setParameter(t,r){throw new Error(qu)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new X$}_addStats(){const t=this[Symbol.toStringTag],r=Ol.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Ol.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Ol.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ol.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Agt="Failed to deduce GL constant from typed array";function V3(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Agt)}}function u0(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function kgt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const a=r*i;o=o||new Uint8Array(a);for(let s=0;s<n/2;++s){const l=s*a,u=(n-s-1)*a;o.set(t.subarray(l,l+a)),t.copyWithin(l,u,u+a),t.set(o,u)}}function Cgt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)a[(s*i+l)*4+u]=t[(s*2*r+l*2)*4+u];return{data:a,width:i,height:o}}function U3(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const u=n[s]?"".concat(e,".").concat(n[s]):"N/A";Lt.removed("".concat(e,".").concat(s),u)()}for(const s in i)if(s in t){const l=i[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))()}let a=null;for(const s in o)if(s in t){const l=o[s];Lt.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))(),a=a||Object.assign({},t),a[l]=t[s],delete a[s]}return a||t}const Mgt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},xgt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Tn{static getBytesPerElement(t){return u0(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return gt(t.size),u0(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Tn(Mgt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Tn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Tn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=U3("Accessor",t,xgt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const Wx=10,q$={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Lgt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:q$},Igt={removedProps:q$};class Pe extends Ca{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Tn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Tn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=U3("Buffer",t,Lgt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=U3("Buffer",t,Igt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new Tn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;gt(r);const a=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(a,this.handle),i!==0||o!==void 0?(Dr(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(a,n,r),this.gl.bindBuffer(a,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:a}=this;return Dr(a),a.bindBuffer(36662,r.handle),a.bindBuffer(36663,this.handle),a.copyBufferSubData(36662,36663,n,i,o),a.bindBuffer(36662,null),a.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Dr(this.gl);const o=u0(this.accessor.type||5126,{clamped:!1}),a=this._getAvailableElementCount(r),s=n;let l,u;t?(u=t.length,l=u-s):(l=Math.min(a,i||a),u=s+l);const c=Math.min(a,l);return i=i||c,gt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(gt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Wx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;gt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,Wx),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=V3(t);return gt(o),this.setAccessor(new Tn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;gt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=u0(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new Tn(this.accessor,{type:V3(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Lt.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Lt.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Lt.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Lt.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Tn(this.accessor,t),this}}const QE={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},Z$={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},K$={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function Ogt(e,t){const r=QE[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=Qt(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function Rgt(e,t){const r=QE[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const Dgt=[9729,9728],Hx=globalThis.WebGLBuffer||function(){};class nu extends Ca{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&Ogt(t,n),o=o&&(!i||Rgt(t,n))),o}constructor(t,r){const{id:n=Is("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(_=>this.initialize(Object.assign({},t,{pixels:_,data:_}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:a=0,recreate:s=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:g=!0}=t;const{depth:m=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=m,this.format=o,this.type=p,this.dataFormat=d,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),g&&this._isNPOT()&&(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),g=!1,this._updateForNPOT(l)),this.mipmaps=g,this.setImageData({data:r,width:f,height:h,depth:m,format:o,type:p,dataFormat:d,border:a,mipmaps:g,parameters:u,compressed:v}),g&&this.generateMipmap(),this.setParameters(l),s&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Lt.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),ti(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:a=this.border,offset:s=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let g=null;({data:u,dataType:g}=this._getDataType({data:u,compressed:p}));let m,_=0;if(ti(this.gl,l,()=>{switch(g){case"null":v.texImage2D(r,i,o,f,h,a,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,a,d,c,u,s);break;case"buffer":m=Dr(v),m.bindBuffer(35052,u.handle||u),m.texImage2D(r,i,o,f,h,a,d,c,s),m.bindBuffer(35052,null);break;case"browser-object":Qt(v)?v.texImage2D(r,i,o,f,h,a,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[y,w]of u.entries())v.compressedTexImage2D(r,y,w.format,w.width,w.height,a,w.data),_+=w.levelSize;break;default:gt(!1,"Unknown image data type")}}),g==="compressed")this._trackAllocatedMemory(_,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const y=Z$[this.dataFormat]||4,w=K$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*y*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:a=0,width:s=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:g={}}=t;if({type:f,dataFormat:h,compressed:d,width:s,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:s,height:l}),gt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const m=i;i=m.data,s=m.shape[0],l=m.shape[1]}i instanceof Pe&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),ti(this.gl,g,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,a,s,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,a,s,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,a,s,l,h,f,i,p);else if(i instanceof Hx){const m=Dr(this.gl);m.bindBuffer(35052,i),m.texSubImage2D(r,u,o,a,s,l,h,f,p),m.bindBuffer(35052,null)}else Qt(this.gl)?Dr(this.gl).texSubImage2D(r,u,o,a,s,l,h,f,i):this.gl.texSubImage2D(r,u,o,a,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Lt.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Pe?{data:r.handle,dataType:"buffer"}:r instanceof Hx?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:a,type:s,compressed:l}=t;const u=QE[r];return a=a||u&&u.dataFormat,s=s||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:a,type:s,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},gt(i,"Could not deduced texture size"),gt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),gt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:gt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return Qt(this.gl)||!this.width||!this.height?!1:!jx(this.width)||!jx(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:Dgt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let Ngt="";function Fgt(e,t){return gt(typeof e=="string"),e=Ngt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class gn extends nu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return nu.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P_(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:Fgt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const G3=[34069,34070,34071,34072,34073,34074];class J$ extends nu{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P_(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:a})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(G3.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),G3.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Lt.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,s,r,n,a,s,l,p):u.texImage2D(h,v,s,s,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:a,border:s=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,s,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}J$.FACES=G3;class Bgt extends nu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Dr(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:a=1,border:s=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),ti(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,f),f instanceof Pe&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=Z$[this.dataFormat]||4,p=K$[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const vl="EXT_color_buffer_float",Xx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:vl,bpp:2},[33327]:{gl2:vl,bpp:4},[34842]:{gl2:vl,bpp:8},[33326]:{gl2:vl,bpp:4},[33328]:{gl2:vl,bpp:8},[34836]:{gl2:vl,bpp:16},[35898]:{gl2:vl,bpp:4}};function $gt(e,t,r){const n=r[t];if(!n)return!1;const i=Qt(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class wc extends Ca{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||$gt(t,r,Xx)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return gt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&Qt(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*Xx[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const zgt=256,Vgt=1024,Ugt=16384,Yx=6144,qx=6145,Zx=6146,Kx=34041,Q$="clear: bad arguments";function tA(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;r&&(a|=Ugt,r!==!0&&(o.clearColor=r)),n&&(a|=zgt,n!==!0&&(o.clearDepth=n)),i&&(a|=Vgt,n!==!0&&(o.clearStencil=n)),gt(a!==0,Q$),ti(e,o,()=>{e.clear(a)})}function Ggt(e){let{framebuffer:t=null,buffer:r=Yx,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Dr(e),ti(e,{framebuffer:t},()=>{switch(r){case Yx:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case qx:e.clearBufferfv(qx,0,[i]);break;case Zx:e.clearBufferiv(Zx,0,[i]);break;case Kx:const[o,a]=i;e.clearBufferfi(Kx,0,o,a);break;default:gt(!1,Q$)}})}function jgt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return gt(!1),0}}function E_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=tz(e);gt(c);const{gl:h,handle:d,attachments:p}=c;s=s||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),gt(p[o]),u=u||p[o].type,a=Hgt(a,u,i,s,l),u=u||V3(a);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,s,l,i,u,a),h.bindFramebuffer(36160,v||null),f&&c.delete(),a}function Jx(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=E_(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=Cgt({data:n,width:i,height:o}));kgt({data:n,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(n),s.putImageData(l,0,0),a.toDataURL()}function Wgt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=r;let{targetX:s,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=tz(e);gt(h);const{gl:p,handle:v}=h,g=typeof s<"u"||typeof l<"u"||typeof u<"u";s=s||0,l=l||0,u=u||0;const m=p.bindFramebuffer(36160,v);gt(t);let _=null;if(t instanceof nu&&(_=t,c=Number.isFinite(c)?c:_.width,f=Number.isFinite(f)?f:_.height,_.bind(0),t=_.target),!g)p.copyTexImage2D(t,o,a,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,s,l,n,i,c,f);break;case 35866:case 32879:Dr(p).copyTexSubImage3D(t,o,s,l,u,n,i,c,f);break}return _&&_.unbind(),p.bindFramebuffer(36160,m||null),d&&h.delete(),_}function tz(e){return e instanceof nr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:emt(e),deleteFramebuffer:!0}}function Hgt(e,t,r,n,i){if(e)return e;t=t||5121;const o=u0(t,{clamped:!1}),a=jgt(r);return new o(n*i*a)}const Be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function Xgt(e){const t=new gn(e,{format:6408,type:5126,dataFormat:6408}),r=new nr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const ez={[Be.WEBGL2]:[!1,!0],[Be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Be.FLOAT_BLEND]:["EXT_float_blend"],[Be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Be.TEXTURE_FLOAT]:["OES_texture_float",!0],[Be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Be.COLOR_ATTACHMENT_RGBA32F]:[Xgt,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},Ygt=2;function qgt(e,t){return eA(e,t)}function eA(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>rz(e,r))}function Zgt(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in ez)e.luma.caps[t]===void 0&&(e.luma.caps[t]=rz(e,t));return e.luma.caps}function rz(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=Kgt(e,t)),e.luma.caps[t]||Lt.log(Ygt,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function Kgt(e,t){const r=ez[t];gt(r,t);let n;const i=Qt(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:gt(!1);return n}const Qx="Multiple render targets not supported";class nr extends Ca{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new nr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Dr(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Dr(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:a=!0,stencil:s=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(gt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,a,s,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:a=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:a});const{gl:s}=this,l=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return gt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Lt.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(a=>{i[a]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const a in i){gt(a!==void 0,"Misspelled framebuffer binding point?");const s=Number(a),l=i[s];let u=l;if(!u)this._unattach(s);else if(u instanceof wc)this._attachRenderbuffer({attachment:s,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:s,texture:c,layer:f,level:h})}else this._attachTexture({attachment:s,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(Qgt(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,a=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&tA(this.gl,{color:r,depth:n,stencil:i}),o.forEach((s,l)=>{Ggt(this.gl,{drawBuffer:l,value:s})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){return Lt.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Lt.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Lt.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Lt.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Lt.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Lt.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:a}=t;const s=Dr(this.gl),l=s.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&a===void 0?s.invalidateFramebuffer(36008,r):s.invalidateFramebuffer(36008,r,n,i,o,a),s.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=Ss(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const a=r?Ss(this.gl,o):o;i[a]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),a=t?Ss(this.gl,o):o;n[a]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(Jx(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Lt.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=Jx(this,{targetMaxHeight:100});return Lt.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let a=null;return t&&(a=a||{},a[36064]=new gn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(a[36064])),r&&n?(a=a||{},a[33306]=new wc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new wc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(a[36096])):n&&gt(!1),a}_unattach(t){const r=this.attachments[t];!r||(r instanceof wc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:a}=this;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Dr(a).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=Jgt(i);a.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:gt(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=Cvt(this.gl);r?r.readBuffer(t):gt(t===36064||t===1029,Qx),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Dr(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):gt(t.length===1&&(t[0]===36064||t[0]===1029),Qx)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=Zgt(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function Jgt(e){return e<34069?e+34069:e}function Qgt(e){return(nr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const tmt=[36049,36048,33296,33298,33299,33300,33301,33302,33303];nr.ATTACHMENT_PARAMETERS=tmt;function nz(e,t){gt(e instanceof gn||e instanceof J$||e instanceof Bgt);const r=e.constructor,{gl:n,width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function emt(e,t){const{gl:r,width:n,height:i,id:o}=e;return new nr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function Qg(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const rmt=35632,nmt=35633;function imt(e){switch(e){case rmt:return"fragment";case nmt:return"vertex";default:return"unknown type"}}function omt(e,t,r,n){const i=e.split(/\r?\n/),o={},a={},s=n||Qg(t)||"(unnamed)",l="".concat(imt(r)," shader ").concat(s);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:a[p]=f}const u=amt(t);return{shaderName:l,errors:tL(o,u),warnings:tL(a,u)}}function tL(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=iz("^^^ ".concat(s,": ").concat(u,`

`),l)}}return r}function amt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,a)=>{const s=String(a+t),l=s.length;return iz(s,i-l)+r+o})}function iz(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function oz(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const smt="Shader: GLSL source code must be a JavaScript string";class c0 extends Ca{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return gt(!1),"unknown"}}constructor(t,r){P_(t),gt(typeof r.source=="string",smt);const n=Qg(r.source,null)||r.id||Is("unnamed ".concat(c0.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=Qg(r,null);n&&(this.id=Is(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(c0.getTypeName(this.shaderType),":").concat(this.id)}getName(){return Qg(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:a}=omt(n,this.source,this.shaderType,this.id);throw Lt.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Lt.warn("GLSL compilation warnings in ".concat(i,`
`).concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class hb extends c0{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class db extends c0{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const lmt={[5126]:Fe.bind(null,"uniform1fv",bn,1,Mr),[35664]:Fe.bind(null,"uniform2fv",bn,2,Mr),[35665]:Fe.bind(null,"uniform3fv",bn,3,Mr),[35666]:Fe.bind(null,"uniform4fv",bn,4,Mr),[5124]:Fe.bind(null,"uniform1iv",Ga,1,Mr),[35667]:Fe.bind(null,"uniform2iv",Ga,2,Mr),[35668]:Fe.bind(null,"uniform3iv",Ga,3,Mr),[35669]:Fe.bind(null,"uniform4iv",Ga,4,Mr),[35670]:Fe.bind(null,"uniform1iv",Ga,1,Mr),[35671]:Fe.bind(null,"uniform2iv",Ga,2,Mr),[35672]:Fe.bind(null,"uniform3iv",Ga,3,Mr),[35673]:Fe.bind(null,"uniform4iv",Ga,4,Mr),[35674]:Fe.bind(null,"uniformMatrix2fv",bn,4,Go),[35675]:Fe.bind(null,"uniformMatrix3fv",bn,9,Go),[35676]:Fe.bind(null,"uniformMatrix4fv",bn,16,Go),[35678]:gr,[35680]:gr,[5125]:Fe.bind(null,"uniform1uiv",gv,1,Mr),[36294]:Fe.bind(null,"uniform2uiv",gv,2,Mr),[36295]:Fe.bind(null,"uniform3uiv",gv,3,Mr),[36296]:Fe.bind(null,"uniform4uiv",gv,4,Mr),[35685]:Fe.bind(null,"uniformMatrix2x3fv",bn,6,Go),[35686]:Fe.bind(null,"uniformMatrix2x4fv",bn,8,Go),[35687]:Fe.bind(null,"uniformMatrix3x2fv",bn,6,Go),[35688]:Fe.bind(null,"uniformMatrix3x4fv",bn,12,Go),[35689]:Fe.bind(null,"uniformMatrix4x2fv",bn,8,Go),[35690]:Fe.bind(null,"uniformMatrix4x3fv",bn,12,Go),[35678]:gr,[35680]:gr,[35679]:gr,[35682]:gr,[36289]:gr,[36292]:gr,[36293]:gr,[36298]:gr,[36299]:gr,[36300]:gr,[36303]:gr,[36306]:gr,[36307]:gr,[36308]:gr,[36311]:gr},umt={},cmt={},fmt={},eL=[0];function rA(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(eL[0]=e,e=eL);const i=e.length;if(i%t&&Lt.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let a=0;a<i;a++)o[a]=e[a];return o}function bn(e,t){return rA(e,t,Float32Array,umt)}function Ga(e,t){return rA(e,t,Int32Array,cmt)}function gv(e,t){return rA(e,t,Uint32Array,fmt)}function rL(e,t,r){const n=lmt[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function hmt(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function dmt(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!pmt(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function pmt(e){return Array.isArray(e)||ArrayBuffer.isView(e)?gmt(e):isFinite(e)||e===!0||e===!1||e instanceof nu||e instanceof wc?!0:e instanceof nr?Boolean(e.texture):!1}function vmt(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function gmt(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function gr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function Fe(e,t,r,n){let i=null,o=null;return(a,s,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{gt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(a,e,s,u),i.set(u)),f}}function Mr(e,t,r,n){e[t](r,n)}function Go(e,t,r,n){e[t](r,!1,n)}const mmt=5120,_mt=5121,ymt=5122,bmt=5123,nL=0,mv=1,wmt=2,Smt=3,_v=4,Tmt=5,Pmt=6,ir=5126,Emt=35664,Amt=35665,kmt=35666,yh=5124,Cmt=35667,Mmt=35668,xmt=35669,bh=5125,Lmt=36294,Imt=36295,Omt=36296,Rmt=35670,Dmt=35671,Nmt=35672,Fmt=35673,Bmt=35674,$mt=35675,zmt=35676,Vmt=35685,Umt=35686,Gmt=35687,jmt=35688,Wmt=35689,Hmt=35690,j3={[ir]:[ir,1,"float"],[Emt]:[ir,2,"vec2"],[Amt]:[ir,3,"vec3"],[kmt]:[ir,4,"vec4"],[yh]:[yh,1,"int"],[Cmt]:[yh,2,"ivec2"],[Mmt]:[yh,3,"ivec3"],[xmt]:[yh,4,"ivec4"],[bh]:[bh,1,"uint"],[Lmt]:[bh,2,"uvec2"],[Imt]:[bh,3,"uvec3"],[Omt]:[bh,4,"uvec4"],[Rmt]:[ir,1,"bool"],[Dmt]:[ir,2,"bvec2"],[Nmt]:[ir,3,"bvec3"],[Fmt]:[ir,4,"bvec4"],[Bmt]:[ir,8,"mat2"],[Vmt]:[ir,8,"mat2x3"],[Umt]:[ir,8,"mat2x4"],[$mt]:[ir,12,"mat3"],[Gmt]:[ir,12,"mat3x2"],[jmt]:[ir,12,"mat3x4"],[zmt]:[ir,16,"mat4"],[Wmt]:[ir,16,"mat4x2"],[Hmt]:[ir,16,"mat4x3"]};function Xmt(e){switch(e){case nL:return nL;case mv:return mv;case Smt:return mv;case wmt:return mv;case _v:return _v;case Tmt:return _v;case Pmt:return _v;default:return gt(!1),0}}function iL(e){const t=j3[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function az(e,t){switch(e){case mmt:case _mt:case ymt:case bmt:e=ir;break}for(const r in j3){const[n,i,o]=j3[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class Ymt{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!Qt(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,a,s)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:a}=iL(n),s={type:o,size:i*a};this._inferProperties(t,r,s);const l={location:t,name:r,accessor:new Tn(s)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:a}=iL(n),s=new Tn({type:o,size:i*a}),l={location:t,name:r,accessor:s};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const oL=4,qmt=35981,Zmt=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class sz extends Ca{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",Zmt),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:a=qmt}=t;return this.hash=r||"",this.vs=typeof n=="string"?new hb(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new db(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,gt(this.vs instanceof hb),gt(this.fs instanceof db),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Dr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new Ymt(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:a,end:s,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:g,samplers:m}=t;if((g||m)&&(Lt.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(g||{})),Lt.priority>=r){const _=p?p.id:"default",y="mode=".concat(Ss(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(Ss(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(_);Lt.log(r,y)()}return gt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const _=Xmt(n);d.begin(_)}this._bindTextures(),ti(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&Qt(this.gl)&&!isNaN(a)&&!isNaN(s)?this.gl2.drawRangeElements(n,a,s,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Lt.priority>=2&&dmt(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,a=!1;if(o instanceof nr&&(o=o.texture),o instanceof nu)if(a=this.uniforms[r]!==n,a){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const s=o,{textureIndex:l}=i;s.bind(l),o=l,this._textureUniforms[r]=s}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||a)&&vmt(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new hb({handle:i});break;case 35632:n.fs=new db({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Is(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Lt.time(oL,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Lt.timeEnd(oL,"linkProgram for ".concat(this._getName()))(),t.debug||Lt.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=hmt(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=rL(t,o,n),n.size>1)for(let a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=rL(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const Kmt=34918,Jmt=34919,Qmt=35007,t1t=36795,e1t=35976,r1t=35887,n1t=36202;class o1 extends Ca{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=Qt(t),i=eA(t,Be.TIMER_QUERY);let o=n||i;for(const a of r)switch(a){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:gt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(Qmt)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?n1t:r1t)}beginTransformFeedbackQuery(){return this.begin(e1t)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,Jmt);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(t1t)}getResult(){return this.gl2.getQueryParameter(this.handle,Kmt)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return o1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class lz extends Ca{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Dr(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,Jc(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:a}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Lt.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,a,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Pe?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let yv=null;function i1t(e){return(!yv||yv.byteLength<e)&&(yv=new ArrayBuffer(e)),yv}function o1t(e,t){const r=i1t(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function a1t(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,a=i*o;let s=0;for(let l=n;s<o;s++)t[l++]=r[s];for(;s<a;)s<a-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+a-s),s=a);return t}const s1t="elements must be GL.ELEMENT_ARRAY_BUFFER";class Sn extends Ca{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?Qt(t)||A$()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new Sn(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return Sn.MAX_ATTRIBUTES=Sn.MAX_ATTRIBUTES||t.getParameter(34921),Sn.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:Sn._setConstantFloatArray(t,r,n);break;case Int32Array:Sn._setConstantIntArray(t,r,n);break;case Uint32Array:Sn._setConstantUintArray(t,r,n);break;default:gt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return Sn.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return gt(!t||t.target===34963,s1t),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:a,offset:s,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(gt(Qt(f)),h.vertexAttribIPointer(t,i,o,a,s)):f.vertexAttribPointer(t,i,o,l,a,s),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!Sn.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new Pe(this.gl,i),a=a||this.buffer.reallocate(i),a=a||!this._compareConstantArrayValues(n,this.bufferValue),a){const s=o1t(r.constructor,o);a1t({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:gt(!1)}}static _setConstantIntArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:gt(!1)}}static _setConstantUintArray(t,r,n){switch(gt(Qt(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:gt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return gt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const l1t="VertexArray: attributes must be Buffers or constants (i.e. typed array)",u1t=/^(.+)__LOCATION_([0-9]+)$/,c1t=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class f1t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new Sn(t),Y$(this,"VertexArray","v6.0",c1t),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Pe(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Pe&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Pe&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:a,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=r,Lt.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(s||a);if(!l)return o;const u=this.accessors[a]||{},c=Tn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return gt(Number.isFinite(f)&&Number.isFinite(h)),{location:a,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=u1t.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Pe)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Pe){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Pe){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(l1t)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(Sn.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){Sn.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,a=o>0;if(t.isInstanced=t.isInstanced||a,n instanceof Pe){const s=n;if(a){const l=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Lt.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function h1t(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let a=0;a<e.length&&a<r;++a)a>0&&(i+=",".concat(a%n===0?" ":"")),i+=f0(e[a],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function f0(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return h1t(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function aL(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;gt(r);const o=".*_.*",a=".*Matrix",s=r._uniformSetters,l={},u=Object.keys(s).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(a)&&pb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(a)&&pb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||pb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:f0(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function pb(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const a=n[i],s=d1t(a);return!o||!s?(t[i]={[r]:s?f0(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0):!1}function d1t(e){return e!=null}function p1t(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=sL(t,t.elements,null,r));const i=t.values;for(const o in i){const a=t._getAttributeInfo(o);if(a){let s="".concat(o,": ").concat(a.name);const l=t.accessors[a.location];l&&(s="".concat(o,": ").concat(v1t(a.name,l))),n[s]=sL(t,i[o],l,r)}}return n}function sL(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",a=1,s=0,l=0,u,c,f;if(r&&(o=r.type,a=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Pe){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,s=l/d.BYTES_PER_ELEMENT/a;let v;if(r){const g=r.divisor>0;v="".concat(g?"I ":"P "," ").concat(s," (x").concat(a,"=").concat(l," bytes ").concat(Ss(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(f0(f,{size:a,isInteger:u})),"Format ":v}}return f=t,a=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(f0(f,{size:a,isInteger:u})," (constant)"),"Format ":"".concat(a,"x").concat(o," (constant)")}}function v1t(e,t){const{type:r,size:n}=t,i=az(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function g1t(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=lL(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=lL(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function lL(e){const{type:t,size:r}=e.accessor,n=az(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const uL=ka()&&typeof document<"u";let m1t=0;class _1t{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=g=>H$(g),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:a=()=>{},onError:s,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Ol.get("animation-loop-".concat(m1t++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Lt.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:a,onError:s,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return gt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=o1.isSupported(this.gl,["timers"])?new o1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Lt.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=uL?new Promise((t,r)=>{if(uL&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):Egt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):Pgt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?JE(this.props.gl,t):this.onCreateContext(t),!T_(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");hgt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&mgt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new nr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const W0="vs",nA="fs";function Cn(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const vb={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function y1t(e){const t={};for(const r in e){const n=e[r],i=b1t(n);t[r]=i}return t}function b1t(e){let t=cL(e);return t==="object"?e?"type"in e?Object.assign({},e,vb[e.type]):"value"in e?(t=cL(e.value),Object.assign({type:t},e,vb[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},vb[t])}function cL(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const w1t="vs",S1t="fs";class fL{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:s,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;Cn(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=T1t(c),a&&(this.uniforms=y1t(a))}getModuleSource(t){let r;switch(t){case w1t:r=this.vs||"";break;case S1t:r=this.fs||"";break;default:Cn(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&Cn(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function T1t(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function P1t(e){return E1t(cz(e))}function E1t(e){const t={},r={};return uz({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function uz(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&uz({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function cz(e,t){return e.map(r=>(r instanceof fL||(Cn(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),Cn(r.name,"shader module has no name"),r=new fL(r),r.dependencies=cz(r.dependencies)),r))}function A1t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const k1t=7936,C1t=7937,M1t=7938,x1t=35724,iA={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Pl={};Object.keys(iA).forEach(e=>{Pl[e]=e});function L1t(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function I1t(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||k1t),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||C1t);return{gpuVendor:O1t(r,n),vendor:r,renderer:n,version:e.getParameter(M1t),shadingLanguageVersion:e.getParameter(x1t)}}function O1t(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const gb={};function hL(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=iA[t];if(Cn(n,t),!A1t(r))return!0;if(t in gb)return gb[t];const i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),gb[t]=l,l}function R1t(e,t){const r=iA[t];Cn(r,t);const n=L1t(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return Cn(i===!1||i===!0),i}function bv(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>R1t(e,r))}function D1t(e){switch(I1t(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function N1t(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return bv(e,Pl.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),bv(e,Pl.GLSL_DERIVATIVES)&&hL(e,Pl.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),bv(e,Pl.GLSL_FRAG_DATA)&&hL(e,Pl.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),bv(e,Pl.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const F1t=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,B1t=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,$1t={[W0]:F1t,[nA]:B1t},tm="__LUMA_INJECT_DECLARATIONS__",dL=/void\s+main\s*\([^)]*\)\s*\{\n?/,pL=/}\n?[^{}]*$/,mb=[];function vL(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===W0;for(const o in r){const a=r[o];a.sort((l,u)=>l.order-u.order),mb.length=a.length;for(let l=0,u=a.length;l<u;++l)mb[l]=a[l].injection;const s="".concat(mb.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(tm,s));break;case"vs:#main-start":i&&(e=e.replace(dL,l=>l+s));break;case"vs:#main-end":i&&(e=e.replace(pL,l=>s+l));break;case"fs:#decl":i||(e=e.replace(tm,s));break;case"fs:#main-start":i||(e=e.replace(dL,l=>l+s));break;case"fs:#main-end":i||(e=e.replace(pL,l=>s+l));break;default:e=e.replace(o,l=>l+s)}}return e=e.replace(tm,""),n&&(e=e.replace(/\}\s*$/,o=>o+$1t[t])),e}function W3(e){const t={};return Cn(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function Qc(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const fz=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],z1t=[...fz,[Qc("attribute"),"in $1"],[Qc("varying"),"out $1"]],V1t=[...fz,[Qc("varying"),"in $1"]],hz=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],U1t=[...hz,[Qc("in"),"attribute $1"],[Qc("out"),"varying $1"]],G1t=[...hz,[Qc("in"),"varying $1"]],H3="gl_FragColor",X3=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,j1t=/void\s+main\s*\([^)]*\)\s*\{\n?/;function W1t(e,t,r){switch(t){case 300:return r?a1(e,z1t):H1t(e);case 100:return r?a1(e,U1t):X1t(e);default:throw new Error("unknown GLSL version ".concat(t))}}function a1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function H1t(e){e=a1(e,V1t);const t=e.match(X3);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(H3,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(j1t,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(H3,"\\b"),"g"),r)}return e}function X1t(e){e=a1(e,G1t);const t=e.match(X3);if(t){const r=t[1];e=e.replace(X3,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),H3)}return e}const Y1t=`

`.concat(tm,`

`),dz={[W0]:"vertex",[nA]:"fragment"},q1t=`precision highp float;

`;function Z1t(e,t){const{vs:r,fs:n}=t,i=P1t(t.modules||[]);return{gl:e,vs:gL(e,Object.assign({},t,{source:r,type:W0,modules:i})),fs:gL(e,Object.assign({},t,{source:n,type:nA,modules:i})),getUniforms:K1t(i)}}function gL(e,t){let{id:r,source:n,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;Cn(typeof n=="string","shader source must be a string");const h=i===W0,d=n.split(`
`);let p=100,v="",g=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],g=d.slice(1).join(`
`)):v="#version ".concat(p);const m={};o.forEach(P=>{Object.assign(m,P.getDefines())}),Object.assign(m,a);let _=c?"".concat(v,`
`).concat(Q1t({id:r,source:n,type:i}),`
`).concat(J1t({type:i}),`
`).concat(D1t(e),`
`).concat(N1t(e),`
`).concat(t_t(m),`
`).concat(h?"":q1t,`
`):"".concat(v,`
`);const y=r_t(s),w={},T={},S={};for(const P in l){const k=typeof l[P]=="string"?{injection:l[P],order:0}:l[P],A=P.match(/^(v|f)s:(#)?([\w-]+)$/);if(A){const C=A[2],M=A[3];C?M==="decl"?T[P]=[k]:S[P]=[k]:w[P]=[k]}else S[P]=[k]}for(const P of o){f&&P.checkDeprecations(g,f),_+=P.getModuleSource(i,p);const A=P.injections[i];for(const C in A){const M=C.match(/^(v|f)s:#([\w-]+)$/);if(M){const B=M[2]==="decl"?T:S;B[C]=B[C]||[],B[C].push(A[C])}else w[C]=w[C]||[],w[C].push(A[C])}}return _+=Y1t,_=vL(_,i,T),_+=e_t(y[i],w),_+=g,_=vL(_,i,S),_=W1t(_,u?100:p,h),_}function K1t(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function J1t(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(dz[t].toUpperCase(),`
`)}function Q1t(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(dz[n],`

`):""}function t_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function e_t(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((a,s)=>a.order-s.order);for(const a of o)r+="  ".concat(a.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function r_t(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),a=r.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})}),t}const n_t="void main() {gl_FragColor = vec4(0);}",pz=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,i_t=`#version 300 es
`.concat(pz);function vz(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const a=o.split(";")[0];return{qualifier:n,type:i,name:a}}function gz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?i_t:t>300?"#version ".concat(t,`
`).concat(pz):n_t;const o=s_t(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function o_t(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return Cn(!1),null}}function a_t(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return Cn(!1),null}}function s_t(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return Cn(!1),null}}const l_t=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,u_t={name:"fp32",vs:l_t,fs:null};function h0(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const Kr={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function c_t(e,{precision:t=Kr.precision}={}){return e=f_t(e),"".concat(parseFloat(e.toPrecision(t)))}function iu(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function br(e,t,r){return d_t(e,n=>Math.max(t,Math.min(r,n)))}function jl(e,t,r){return iu(e)?e.map((n,i)=>jl(n,t[i],r)):r*t+(1-r)*e}function To(e,t,r){const n=Kr.EPSILON;r&&(Kr.EPSILON=r);try{if(e===t)return!0;if(iu(e)&&iu(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!To(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=Kr.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{Kr.EPSILON=n}}function f_t(e){return Math.round(e/Kr.EPSILON)*Kr.EPSILON}function h_t(e){return e.clone?e.clone():new Array(e.length)}function d_t(e,t,r){if(iu(e)){const n=e;r=r||h_t(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function p_t(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class oA extends p_t(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:iu(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(Kr)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+c_t(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!To(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(Kr.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function v_t(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function Me(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Ld(e,t,r=""){if(Kr.debug&&!v_t(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class mz extends oA{get x(){return this[0]}set x(t){this[0]=Me(t)}get y(){return this[1]}set y(t){this[1]=Me(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return Me(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return Me(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return h0(t>=0&&t<this.ELEMENTS,"index is out of range"),Me(this[t])}setComponent(t,r){return h0(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var Id=1e-6,Di=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function g_t(){var e=new Di(2);return Di!=Float32Array&&(e[0]=0,e[1]=0),e}function s1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function _z(e,t){return e[0]=-t[0],e[1]=-t[1],e}function yz(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function m_t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function __t(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=g_t();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}})();function y_t(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function bz(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function b_t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function w_t(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function wz(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function Sz(){var e=new Di(3);return Di!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function S_t(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function mL(e,t,r){var n=new Di(3);return n[0]=e,n[1]=t,n[2]=r,n}function T_t(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function P_t(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function E_t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function A_t(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Tz(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function em(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function k_t(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function aA(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function Pz(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function Ez(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-n*u,h=n*l-i*s,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,g=a*2;return c*=g,f*=g,h*=g,d*=2,p*=2,v*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function C_t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function M_t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function x_t(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function L_t(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,f=c&&Tz(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var Az=T_t,kz=S_t,_b=P_t;(function(){var e=Sz();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const yb=[0,0,0];let wv;class bt extends mz{static get ZERO(){return wv||(wv=new bt(0,0,0),Object.freeze(wv)),wv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&iu(t)?this.copy(t):(Kr.debug&&(Me(t),Me(r),Me(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return Kr.debug&&(Me(t.x),Me(t.y),Me(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=Me(t)}angle(t){return L_t(this,t)}cross(t){return em(this,this,t),this.check()}rotateX({radians:t,origin:r=yb}){return C_t(this,this,r,t),this.check()}rotateY({radians:t,origin:r=yb}){return M_t(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=yb}){return x_t(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return aA(this,this,t),this.check()}transformAsVector(t){return bz(this,this,t),this.check()}transformByMatrix3(t){return Pz(this,this,t),this.check()}transformByMatrix2(t){return b_t(this,this,t),this.check()}transformByQuaternion(t){return Ez(this,this,t),this.check()}}let Sv;class sA extends mz{static get ZERO(){return Sv||(Sv=new sA(0,0,0,0),Object.freeze(Sv)),Sv}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),iu(t)&&arguments.length===1?this.copy(t):(Kr.debug&&(Me(t),Me(r),Me(n),Me(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return Kr.debug&&(Me(t.x),Me(t.y),Me(t.z),Me(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=Me(t)}get w(){return this[3]}set w(t){this[3]=Me(t)}transform(t){return aA(this,this,t),this.check()}transformByMatrix3(t){return wz(this,this,t),this.check()}transformByMatrix2(t){return w_t(this,this,t),this.check()}transformByQuaternion(t){return Ez(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class Cz extends oA{toString(){let t="[";if(Kr.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=Me(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function I_t(){var e=new Di(9);return Di!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function O_t(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function R_t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null}function D_t(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*i+a*s)+n*(l*i-o*s)}function _L(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],g=r[4],m=r[5],_=r[6],y=r[7],w=r[8];return e[0]=h*n+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+g*a+m*u,e[4]=v*i+g*s+m*c,e[5]=v*o+g*l+m*f,e[6]=_*n+y*a+w*u,e[7]=_*i+y*s+w*c,e[8]=_*o+y*l+w*f,e}function N_t(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*n+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f,e}function F_t(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function yL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function B_t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[3]=c-m,e[6]=h+g,e[1]=c+m,e[4]=1-u-p,e[7]=d-v,e[2]=h-g,e[5]=d+v,e[8]=1-u-f,e}var Y3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(Y3||(Y3={}));const $_t=Object.freeze([1,0,0,0,1,0,0,0,1]);class Tr extends Cz{static get IDENTITY(){return V_t()}static get ZERO(){return z_t()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return Y3}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy($_t)}fromObject(t){return this.check()}fromQuaternion(t){return B_t(this,t),this.check()}set(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=a,this[8]=u,this.check()}determinant(){return D_t(this)}transpose(){return O_t(this,this),this.check()}invert(){return R_t(this,this),this.check()}multiplyLeft(t){return _L(this,t,this),this.check()}multiplyRight(t){return _L(this,this,t),this.check()}rotate(t){return F_t(this,this,t),this.check()}scale(t){return Array.isArray(t)?yL(this,this,t):yL(this,this,[t,t]),this.check()}translate(t){return N_t(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=m_t(r||[-0,-0],t,this);break;case 3:n=Pz(r||[-0,-0,-0],t,this);break;case 4:n=wz(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Ld(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let Tv,Pv;function z_t(){return Tv||(Tv=new Tr([0,0,0,0,0,0,0,0,0]),Object.freeze(Tv)),Tv}function V_t(){return Pv||(Pv=new Tr,Object.freeze(Pv)),Pv}function U_t(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function G_t(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function q3(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],g=t[14],m=t[15],_=r*s-n*a,y=r*l-i*a,w=r*u-o*a,T=n*l-i*s,S=n*u-o*s,P=i*u-o*l,k=c*v-f*p,A=c*g-h*p,C=c*m-d*p,M=f*g-h*v,D=f*m-d*v,B=h*m-d*g,z=_*B-y*D+w*M+T*C-S*A+P*k;return z?(z=1/z,e[0]=(s*B-l*D+u*M)*z,e[1]=(i*D-n*B-o*M)*z,e[2]=(v*P-g*S+m*T)*z,e[3]=(h*S-f*P-d*T)*z,e[4]=(l*C-a*B-u*A)*z,e[5]=(r*B-i*C+o*A)*z,e[6]=(g*w-p*P-m*y)*z,e[7]=(c*P-h*w+d*y)*z,e[8]=(a*D-s*C+u*k)*z,e[9]=(n*C-r*D-o*k)*z,e[10]=(p*S-v*w+m*_)*z,e[11]=(f*w-c*S-d*_)*z,e[12]=(s*A-a*M-l*k)*z,e[13]=(r*M-n*A+i*k)*z,e[14]=(v*y-p*T-g*_)*z,e[15]=(c*T-f*y+h*_)*z,e):null}function j_t(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],g=e[15],m=t*a-r*o,_=t*s-n*o,y=t*l-i*o,w=r*s-n*a,T=r*l-i*a,S=n*l-i*s,P=u*p-c*d,k=u*v-f*d,A=u*g-h*d,C=c*v-f*p,M=c*g-h*p,D=f*g-h*v;return m*D-_*M+y*C+w*A-T*k+S*P}function Wl(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],g=t[13],m=t[14],_=t[15],y=r[0],w=r[1],T=r[2],S=r[3];return e[0]=y*n+w*s+T*f+S*v,e[1]=y*i+w*l+T*h+S*g,e[2]=y*o+w*u+T*d+S*m,e[3]=y*a+w*c+T*p+S*_,y=r[4],w=r[5],T=r[6],S=r[7],e[4]=y*n+w*s+T*f+S*v,e[5]=y*i+w*l+T*h+S*g,e[6]=y*o+w*u+T*d+S*m,e[7]=y*a+w*c+T*p+S*_,y=r[8],w=r[9],T=r[10],S=r[11],e[8]=y*n+w*s+T*f+S*v,e[9]=y*i+w*l+T*h+S*g,e[10]=y*o+w*u+T*d+S*m,e[11]=y*a+w*c+T*p+S*_,y=r[12],w=r[13],T=r[14],S=r[15],e[12]=y*n+w*s+T*f+S*v,e[13]=y*i+w*l+T*h+S*g,e[14]=y*o+w*u+T*d+S*m,e[15]=y*a+w*c+T*p+S*_,e}function l1(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,f,h,d,p,v,g,m;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],g=t[10],m=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=g,e[11]=m,e[12]=a*n+c*i+p*o+t[12],e[13]=s*n+f*i+v*o+t[13],e[14]=l*n+h*i+g*o+t[14],e[15]=u*n+d*i+m*o+t[15]),e}function lA(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function W_t(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,k,A,C,M,D,B,z,N;return s<Id?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],g=t[5],m=t[6],_=t[7],y=t[8],w=t[9],T=t[10],S=t[11],P=i*i*c+u,k=o*i*c+a*l,A=a*i*c-o*l,C=i*o*c-a*l,M=o*o*c+u,D=a*o*c+i*l,B=i*a*c+o*l,z=o*a*c-i*l,N=a*a*c+u,e[0]=f*P+v*k+y*A,e[1]=h*P+g*k+w*A,e[2]=d*P+m*k+T*A,e[3]=p*P+_*k+S*A,e[4]=f*C+v*M+y*D,e[5]=h*C+g*M+w*D,e[6]=d*C+m*M+T*D,e[7]=p*C+_*M+S*D,e[8]=f*B+v*z+y*N,e[9]=h*B+g*z+w*N,e[10]=d*B+m*z+T*N,e[11]=p*B+_*z+S*N,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Mz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e}function H_t(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=l*n+h*i,e}function xz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e}function X_t(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function Y_t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,g=o*s,m=o*l;return e[0]=1-f-p,e[1]=c+m,e[2]=h-g,e[3]=0,e[4]=c-m,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+g,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function q_t(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function Z_t(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}var K_t=Z_t;function J_t(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}var Q_t=J_t;function tyt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p=t[0],v=t[1],g=t[2],m=n[0],_=n[1],y=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<Id&&Math.abs(v-T)<Id&&Math.abs(g-S)<Id?U_t(e):(c=p-w,f=v-T,h=g-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=_*h-y*f,o=y*c-m*h,a=m*f-_*c,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+a*g),e[13]=-(s*p+l*v+u*g),e[14]=-(c*p+f*v+h*g),e[15]=1,e)}function eyt(){var e=new Di(4);return Di!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function ryt(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function uA(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function nyt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function iyt(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function oyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function ayt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function syt(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function Pf(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function lyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,f=u*i+l*n-a*o,h=u*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}(function(){var e=eyt();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var Z3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(Z3||(Z3={}));const uyt=45*Math.PI/180,cyt=1,bb=.1,wb=500,fyt=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Br extends Cz{static get IDENTITY(){return dyt()}static get ZERO(){return hyt()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return Z3}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=g,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,g){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=a,this[6]=c,this[7]=p,this[8]=n,this[9]=s,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=g,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(fyt)}fromObject(t){return this.check()}fromQuaternion(t){return Y_t(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:a=bb,far:s=wb}=t;return s===1/0?pyt(this,r,n,i,o,a):q_t(this,r,n,i,o,a,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return tyt(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:a=bb,far:s=wb}=t;return Q_t(this,r,n,i,o,a,s),this.check()}orthographic(t){const{fovy:r=uyt,aspect:n=cyt,focalDistance:i=1,near:o=bb,far:a=wb}=t;bL(r);const s=r/2,l=i*Math.tan(s),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:a})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return bL(r),K_t(this,r,n,i,o),this.check()}determinant(){return j_t(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*a,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*a,t}transpose(){return G_t(this,this),this.check()}invert(){return q3(this,this),this.check()}multiplyLeft(t){return Wl(this,t,this),this.check()}multiplyRight(t){return Wl(this,this,t),this.check()}rotateX(t){return Mz(this,this,t),this.check()}rotateY(t){return H_t(this,this,t),this.check()}rotateZ(t){return xz(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return W_t(this,this,t,r),this.check()}scale(t){return lA(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return l1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=Pf(r||[-0,-0,-0,-0],t,this),Ld(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=__t(r||[-0,-0],t,this);break;case 3:i=aA(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Ld(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=y_t(r||[-0,-0],t,this);break;case 3:n=bz(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Ld(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let Ev,Av;function hyt(){return Ev||(Ev=new Br([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Ev)),Ev}function dyt(){return Av||(Av=new Br,Object.freeze(Av)),Av}function bL(e){if(e>Math.PI*2)throw Error("expected radians")}function pyt(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function wL(){var e=new Di(4);return Di!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function vyt(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Lz(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function SL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-n*u,e[2]=o*c+a*u+n*l-i*s,e[3]=a*c-n*s-i*l-o*u,e}function gyt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function myt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}function _yt(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function yyt(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function rm(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,g;return d=i*l+o*u+a*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Id?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,g=Math.sin(n*h)/p):(v=1-n,g=n),e[0]=v*i+g*l,e[1]=v*o+g*u,e[2]=v*a+g*c,e[3]=v*s+g*f,e}function byt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e}function wyt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Iz(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+a]-t[a*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}var Syt=ryt,Tyt=uA,Pyt=ayt,Eyt=syt,Ayt=nyt,kyt=iyt,Oz=oyt,Cyt=function(){var e=Sz(),t=mL(1,0,0),r=mL(0,1,0);return function(n,i,o){var a=Tz(i,o);return a<-.999999?(em(e,t,i),kz(e)<1e-6&&em(e,r,i),A_t(e,e),Lz(n,e,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(em(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+a,Oz(n,n))}}();(function(){var e=wL(),t=wL();return function(r,n,i,o,a,s){return rm(e,n,a,s),rm(t,i,o,s),rm(r,e,t,2*s*(1-s)),r}})();(function(){var e=I_t();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],Oz(t,Iz(t,e))}})();const Myt=[0,0,0,1];class TL extends oA{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return Iz(this,t),this.check()}fromAxisRotation(t,r){return Lz(this,t,r),this.check()}identity(){return vyt(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=Me(t)}get y(){return this[1]}set y(t){this[1]=Me(t)}get z(){return this[2]}set z(t){this[2]=Me(t)}get w(){return this[3]}set w(t){this[3]=Me(t)}len(){return Ayt(this)}lengthSquared(){return kyt(this)}dot(t){return Pyt(this,t)}rotationTo(t,r){return Cyt(this,t,r),this.check()}add(t){return Syt(this,this,t),this.check()}calculateW(){return yyt(this,this),this.check()}conjugate(){return wyt(this,this),this.check()}invert(){return byt(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(Eyt(this,t,r,n),this.check())}multiplyRight(t){return SL(this,this,t),this.check()}multiplyLeft(t){return SL(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return gyt(this,this,t),this.check()}rotateY(t){return myt(this,this,t),this.check()}rotateZ(t){return _yt(this,this,t),this.check()}scale(t){return Tyt(this,this,t),this.check()}slerp(t,r,n){let i,o,a;switch(arguments.length){case 1:({start:i=Myt,target:o,ratio:a}=t);break;case 2:i=this,o=t,a=r;break;default:i=t,o=r,a=n}return rm(this,i,o,a),this.check()}transformVector4(t,r=new sA){return lyt(r,t,this),Ld(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const Rz={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},PL=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,xyt={lightSources:{}};function Sb(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function Lyt(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=Sb(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,a)=>{i["lighting_uPointLight[".concat(a,"].color")]=Sb(o),i["lighting_uPointLight[".concat(a,"].position")]=o.position,i["lighting_uPointLight[".concat(a,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,a)=>{i["lighting_uDirectionalLight[".concat(a,"].color")]=Sb(o),i["lighting_uDirectionalLight[".concat(a,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function Dz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:xyt;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},Lyt({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return Dz({lightSources:t})}return{}}const Iyt={name:"lights",vs:PL,fs:PL,getUniforms:Dz,defines:{MAX_LIGHTS:3}},Oyt=new Uint8Array([0,255,255,255]),Ryt={pickingSelectedColor:null,pickingHighlightColor:Oyt,pickingActive:!1,pickingAttribute:!1};function Dyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ryt;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const Nyt=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,Fyt=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,Byt={name:"picking",vs:Nyt,fs:Fyt,getUniforms:Dyt},$yt=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,zyt={};function Vyt(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function Uyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:zyt;if(!("material"in e))return{};const{material:t}=e;return t?Vyt(t):{lighting_uEnabled:!1}}const Gyt={name:"gouraud-lighting",dependencies:[Iyt],vs:$yt,defines:{LIGHTING_VERTEX:1},getUniforms:Uyt},jyt=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,Wyt={name:"transform",vs:jyt,fs:null};class H0{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new H0(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:a=[],bufferMode:s=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(y=>this._getHash(y.name)).sort(),d=a.map(y=>this._getHash(y)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),g=[],m=[];for(const y of p)g.push(this._getHash(y)),g.push(this._getHash(i[y]));for(const y of v)m.push(this._getHash(y)),m.push(this._getHash(o[y]));const _="".concat(c,"/").concat(f,"D").concat(g.join("/"),"M").concat(h.join("/"),"I").concat(m.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(l?"T":"");if(!this._programCache[_]){const y=Z1t(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[_]=new sz(this.gl,{hash:_,vs:y.vs,fs:y.fs,varyings:a,bufferMode:s}),this._getUniforms[_]=y.getUniforms||(w=>{}),this._useCounts[_]=0}return this._useCounts[_]++,this._programCache[_]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,a=this._defaultModules.length;o<a;++o){const s=this._defaultModules[o],l=s.name;r[i++]=s,n[l]=!0}for(let o=0,a=t.length;o<a;++o){const s=t[o],l=s.name;n[l]||(r[i++]=s,n[l]=!0)}return r.length=i,r}}const Hyt={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Xyt(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const a=t.attributes[o],s=Yyt(o,r);if(o==="indices")i=a;else if(a.constant)n[s]=a.value;else{const l=a.value,u={...a};delete u.value,n[s]=[new Pe(e,l),u],qyt(o,u)}}if(i){const o=i.value||i;gt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const a={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Pe(e,{data:o,target:34963}),a]}return n}function Yyt(e,t){const{attributeMap:r=Hyt}=t||{};return r&&r[e]||e}function qyt(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}gt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const Zu=2,Zyt=1e4,Kyt="Model needs drawMode and vertexCount",EL=()=>{},Jyt={};class ma{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Is("model")}=r;gt(T_(t)),this.id=n,this.gl=t,this.id=r.id||Is("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||H0.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},gt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),Kyt)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return gt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return gt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=Xyt(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Jc(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return tA(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:a=this.transformFeedback,parameters:s={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Lt.priority>=Zu&&(u=this._logDrawCallStart(Zu));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Lt.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:g}=this,{onBeforeRender:m=EL,onAfterRender:_=EL}=this.props;m(),this.program.setUniforms(this.uniforms);const y=this.program.draw(Object.assign(Jyt,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:a,isIndexed:f,indexType:h,isInstanced:v,instanceCount:g,offset:f?d:0}));return _(),Lt.priority>=Zu&&this._logDrawCallEnd(u,l,n),y}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(a=>a.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(a=>a.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Lt.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}gt(r instanceof sz,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new f1t(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Pe&&r.delete()}}_setAnimationProps(t){this.animated&&gt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(Jc(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new lz(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:Zyt;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Lt.group(Zu,">>> DRAWING MODEL ".concat(this.id),{collapsed:Lt.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=p1t({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:a,unusedTable:s,unusedCount:l}=aL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=aL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Lt.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Lt.log("UNUSED UNIFORMS",Object.keys(s))();const f=g1t(this.vertexArray.configuration);Lt.table(t,o)(),Lt.table(t,a)(),Lt.table(t+1,f)(),i&&i.log({logLevel:Zu,message:"Rendered to ".concat(i.id)}),Lt.groupEnd(Zu)()}}class Qyt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Pe?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&gt(Qt(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const a=r[o],{byteLength:s,usage:l,accessor:u}=a;n[i]=this._createNewBuffer(i,{byteLength:s,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new lz(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],gt(n[o]instanceof Pe)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Pe(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const t2t="transform_uSampler_",u1="transform_uSize_",AL="transform_position";function e2t(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,a=Object.keys(r).length,s=null;const l={};let u=t,c={};if(a>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(a>0){const g=a2t(d,r);if(g){const{updatedLine:m,inject:_}=g;h[p]=m,c=W3([c,_]),Object.assign(l,g.samplerTextureMap),a--}}n&&!s&&(s=o2t(d,n))}),n){gt(i);const d="".concat(u1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(AL," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(AL,`, 0, 1.);
`);c=W3([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:s,inject:c,samplerTextureMap:l}}function r2t(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,a;r&&({width:o,height:a}=n,i["".concat(u1).concat(r)]=[o,a]);for(const s in t)({width:o,height:a}=t[s]),i["".concat(u1).concat(s)]=[o,a];return i}function n2t(e){return vz(e,["attribute","in"])}function i2t(e){const t="".concat(t2t).concat(e),r="".concat(u1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function o2t(e,t){const r=vz(e,["varying","out"]);return r&&r.name===t?r.type:null}function a2t(e,t){const r={},n=n2t(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const a="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:s,sizeName:l,uniformDeclerations:u}=i2t(o),c=o_t(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(s,", ").concat(l,").").concat(c,`;
`);return r[s]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const s2t={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},l2t="transform_output";class u2t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],a=Object.assign({},r,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){a.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];s[f]=n[h]}this._setSourceTextureParameters();const c=r2t({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=E_(r);if(!t)return n;const i=n.constructor,o=a_t(this.targetTextureType),a=new i(n.length*o/4);let s=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)a[s++]=n[l+u];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof gn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Pe(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:a,height:s}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:a,height:s})):t.framebuffer=new nr(this.gl,{id:"transform-framebuffer",width:a,height:s,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(s2t)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=nz(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:a,inject:s,samplerTextureMap:l}=e2t({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=W3([t.inject||{},s]);this.targetTextureType=a,this.samplerTextureMap=l;const c=t._fs||gz({version:oz(i),input:this.targetTextureVarying,inputType:a,output:l2t}),f=this.hasSourceTextures||this.targetTextureVarying?[Wyt].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class cA{static isSupported(t){return Qt(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();gt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new ma(r,Object.assign({},t,{fs:t.fs||gz({version:oz(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){c2t(r)&&(this.bufferTransform=new Qyt(t,r)),f2t(r)&&(this.textureTransform=new u2t(t,r)),gt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function c2t(e){return!!(!Jc(e.feedbackBuffers)||!Jc(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function f2t(e){return!!(!Jc(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const kL={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class _u{static get DRAW_MODE(){return kL}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Is("geometry"),drawMode:n=kL.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,gt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(gt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:a,size:s,constant:l}=o;!l&&a&&s>=1&&(n=Math.min(n,a.length/s))}return gt(Number.isFinite(n)),n}}let h2t=1,d2t=1;class Nz{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,a=h2t++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(a,s),a}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:a}=i;o.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=d2t++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const Fz="#define SMOOTH_EDGE_RADIUS 0.5",p2t=`
`.concat(Fz,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),v2t=`
`.concat(Fz,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),g2t={name:"geometry",vs:p2t,fs:v2t},le={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(le,"IDENTITY",{get:()=>(Wt.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const Ti={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Os={common:0,meters:1,pixels:2},CL={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},X0={DRAW:"draw",MASK:"mask"},m2t=Object.keys(le).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(le[e],";")).join(""),_2t=Object.keys(Ti).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(Ti[e],";")).join(""),y2t=Object.keys(Os).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Os[e],";")).join(""),b2t="".concat(m2t,`
`).concat(_2t,`
`).concat(y2t,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function w2t(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function Y0(e){let t={},r;return n=>{for(const i in n)if(!w2t(n[i],t[i])){r=e(n),t=n;break}return r}}const ML=[0,0,0,0],S2t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Bz=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],T2t=[0,0,0],$z=[0,0,0],P2t=Y0(k2t);function zz(e,t,r=$z){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===le.LNGLAT_OFFSETS||t===le.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case Ti.WEB_MERCATOR:(t===le.LNGLAT||t===le.CARTESIAN)&&(i=[0,0,0],o=!1);break;case Ti.WEB_MERCATOR_AUTO_OFFSET:t===le.LNGLAT?n=i:t===le.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case Ti.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case Ti.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function E2t(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=ML,l=ML,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=zz(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=Pf([],l,a),o=n||o,a=Wl([],i,o),a=Wl([],a,S2t)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function A2t({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=le.DEFAULT,coordinateOrigin:i=$z,autoWrapLongitude:o=!1}){n===le.DEFAULT&&(n=e.isGeospatial?le.LNGLAT:le.CARTESIAN);const a=P2t({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return a.project_uWrapLongitude=o,a.project_uModelMatrix=r||Bz,a}function k2t({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:u}=E2t(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=Pf([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:T2t,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:Bz,project_uCameraPosition:s};if(u){const p=e.getDistanceScales(u);switch(r){case le.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case le.LNGLAT:case le.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case le.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const C2t={};function M2t(e=C2t){return"viewport"in e?A2t(e):{}}const fA={name:"project",dependencies:[u_t,g2t],vs:b2t,getUniforms:M2t},x2t=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,yu={name:"project32",dependencies:[fA],vs:x2t};function L2t(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Fc(e,t){const r=Pf([],t,e);return uA(r,r,1/r[3]),r}function xL(e,t){const r=e%t;return r<0?t+r:r}function K3(e,t,r){return e<t?t:e>r?r:e}function I2t(e){return Math.log(e)*Math.LOG2E}const hA=Math.log2||I2t;function _a(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Pi=Math.PI,Vz=Pi/4,Mi=Pi/180,J3=180/Pi,d0=512,Q3=4003e4,kv=85.051129,O2t=1.5;function R2t(e){return hA(e)}function Rs(e){const[t,r]=e;_a(Number.isFinite(t)),_a(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*Mi,i=r*Mi,o=d0*(n+Pi)/(2*Pi),a=d0*(Pi+Math.log(Math.tan(Vz+i*.5)))/(2*Pi);return[o,a]}function tf(e){const[t,r]=e,n=t/d0*(2*Pi)-Pi,i=2*(Math.atan(Math.exp(r/d0*(2*Pi)-Pi))-Vz);return[n*J3,i*J3]}function D2t(e){const{latitude:t}=e;_a(Number.isFinite(t));const r=Math.cos(t*Mi);return R2t(Q3*r)-9}function tT(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;_a(Number.isFinite(t)&&Number.isFinite(r));const i=d0,o=Math.cos(t*Mi),a=i/360,s=a/o,l=i/Q3/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(n){const c=Mi*Math.tan(t*Mi)/o,f=a*c/2,h=i/Q3*c,d=h/s*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function Uz(e,t){const[r,n,i]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:u}=tT({longitude:r,latitude:n,highPrecision:!0}),c=Rs(e);c[0]+=o*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const f=tf(c),h=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[f[0],f[1],h]:f}function N2t(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:a}=e,s=L2t();l1(s,s,[0,0,-i]),Mz(s,s,-r*Mi),xz(s,s,n*Mi);const l=o/t;return lA(s,s,[l,l,l]),a&&l1(s,s,E_t([],a)),s}function F2t(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=c1(O2t)}=e;n!==void 0&&(c=c1(n));const f=c*Mi,h=i*Mi,d=Gz(c);let p=d;a&&(p+=a[2]*s/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),g=Math.sin(v)*p/Math.sin(K3(Math.PI/2-h-v,.01,Math.PI-.01)),m=Math.sin(h)*g+p,_=p*10,y=Math.min(m*u,_);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:y}}function c1(e){return 2*Math.atan(.5/e)*J3}function Gz(e){return .5/Math.tan(.5*e*Mi)}function jz(e,t){const[r,n,i=0]=e;return _a(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),Fc(t,[r,n,i,1])}function A_(e,t,r=0){const[n,i,o]=e;if(_a(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Fc(t,[n,i,o,1]);const a=Fc(t,[n,i,0,1]),s=Fc(t,[n,i,1,1]),l=a[2],u=s[2],c=l===u?0:((r||0)-l)/(u-l);return yz([],a,s,c)}function Wz(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[u,c]]=n,f=B2t(e.padding),h=Rs([s,K3(c,-kv,kv)]),d=Rs([u,K3(l,-kv,kv)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(a[0])*2,r-f.top-f.bottom-Math.abs(a[1])*2];_a(v[0]>0&&v[1]>0);const g=v[0]/p[0],m=v[1]/p[1],_=(f.right-f.left)/2/g,y=(f.top-f.bottom)/2/m,w=[(d[0]+h[0])/2+_,(d[1]+h[1])/2+y],T=tf(w),S=Math.min(o,hA(Math.abs(Math.min(g,m))));return _a(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function B2t(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(_a(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const LL=Math.PI/180;function $2t(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},a=i([0,n],o),s=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*LL:Math.atan(.5/e.altitude),f=(90-e.pitch)*LL;return c>f-.01?(l=IL(e,0,t),u=IL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[a,s,u,l]}function IL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=Fc(n,[t,0,1,1]),o=Fc(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=yz([],i,o,s),u=tf(l);return u.push(r),u}const OL=512;function z2t(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=e;(i<-180||i>180)&&(i=xL(i+180,360)-180),(s<-180||s>180)&&(s=xL(s+180,360)-180);const l=hA(r/OL);if(a<=l)a=l,o=0;else{const u=r/2/Math.pow(2,a),c=tf([0,u])[1];if(o<c)o=c;else{const f=tf([0,OL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:a,pitch:n,bearing:s}}const V2t=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,U2t=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,G2t=Y0(Y2t),j2t=Y0(q2t),W2t=[0,0,0,1],H2t=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function X2t(e,t){const[r,n,i]=e,o=A_([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function Y2t({viewport:e,center:t}){return new Br(e.viewProjectionMatrix).invert().transform(t)}function q2t({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>X2t(a,n));for(const a of t){const s=a.clone().translate(new bt(e.center).negate()),l=o.map(c=>s.transform(c)),u=new Br().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(a))}return r}function Z2t(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||W2t,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=G2t({viewport:e.viewport,center:t.project_uCenter}),o=[],a=j2t({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const l=a[s],u=l.clone().translate(new bt(e.viewport.center).negate());t.project_uCoordinateSystem===le.LNGLAT&&t.project_uProjectionMode===Ti.WEB_MERCATOR?(a[s]=u,o[s]=i):(a[s]=l.clone().multiplyRight(H2t),o[s]=u.transform(i))}for(let s=0;s<a.length;s++)n["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],n["shadow_uProjectCenters[".concat(s,"]")]=o[s],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(s)]=e.shadowMaps[s]:n["shadow_uShadowMap".concat(s)]=e.dummyShadowMap;return n}const Tb={name:"shadow",dependencies:[fA],vs:V2t,fs:U2t,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?Z2t(e,t):{}},bu={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...Byt},K2t=[fA],J2t=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function Q2t(e){const t=H0.getDefaultProgramManager(e);for(const r of K2t)t.addDefaultModule(r);for(const r of J2t)t.addShaderHook(r);return t}const tbt=[255,255,255],ebt=1;let rbt=0;class nbt{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","ambient");const{color:r=tbt}=t,{intensity:n=ebt}=t;this.id=t.id||"ambient-".concat(rbt++),this.color=r,this.intensity=n}}const ibt=[255,255,255],obt=1,abt=[0,0,-1];let sbt=0;class RL{constructor(t={}){E(this,"id",void 0),E(this,"color",void 0),E(this,"intensity",void 0),E(this,"type","directional"),E(this,"direction",void 0),E(this,"shadow",void 0);const{color:r=ibt}=t,{intensity:n=obt}=t,{direction:i=abt}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(sbt++),this.color=r,this.intensity=n,this.type="directional",this.direction=new bt(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class lbt{constructor(t,r={id:"pass"}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class k_ extends lbt{constructor(...t){super(...t),E(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return ga(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:a,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&cbt(u),s&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];a(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const g=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(g)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:a,moduleParameters:s}){const l=[],u=Hz(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,a,n,s),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:a,view:s},l){const u=ubt(t,{moduleParameters:n,target:o,viewport:a});if(s&&s.props.clear){const f=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;ti(t,{scissorTest:!0,scissor:u},()=>tA(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ga(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:g}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=a;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:g})}catch(m){h.raiseError(m,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(r))return!1;r.layer=a,a=a.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const a=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Kc(this.gl)});if(r)for(const l of r){var s;Object.assign(a,(s=l.getModuleParameters)===null||s===void 0?void 0:s.call(l,t))}return Object.assign(a,this.getModuleParameters(t,r),i)}}function Hz(e=0,t={}){const r={},n=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||Hz(t[l],t);u=c(i,o),r[s]=c}else Number.isFinite(a)?(u=a+(t[l]||0),r[s]=null):u=e;return o&&u>=e&&(e=u+1),t[s]=u,u};return n}function ubt(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||Kc(e),a=i?r.height:e.drawingBufferHeight,s=n;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}function cbt(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;ga(e,{viewport:[0,0,t,r]}),e.clear(16640)}class fbt extends k_{constructor(t,r){super(t,r),E(this,"shadowMap",void 0),E(this,"depthBuffer",void 0),E(this,"fbo",void 0),this.shadowMap=new gn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new wc(t,{format:33189,width:1,height:1}),this.fbo=new nr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;ti(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=Kc(this.gl),o=n.width*i,a=n.height*i;(o!==r.width||a!==r.height)&&r.resize({width:o,height:a}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const hbt={color:[255,255,255],intensity:1},DL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],dbt=[0,0,0,200/255];class Xz{constructor(t={}){E(this,"id","lighting-effect"),E(this,"props",null),E(this,"shadowColor",dbt),E(this,"shadow",void 0),E(this,"ambientLight",null),E(this,"directionalLights",[]),E(this,"pointLights",[]),E(this,"shadowPasses",[]),E(this,"shadowMaps",[]),E(this,"dummyShadowMap",null),E(this,"programManager",void 0),E(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=H0.getDefaultProgramManager(t),Tb&&this.programManager.addDefaultModule(Tb)),this.dummyShadowMap||(this.dummyShadowMap=new gn(t,{width:1,height:1}));for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(Tb),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new Br().lookAt({eye:new bt(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new fbt(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new nbt(hbt),this.directionalLights.push(new RL(DL[0]),new RL(DL[1])))}}class pbt{constructor(t={}){E(this,"_pool",[]),E(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,s,f);return t&&a?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const a=this._pool,s=t.BYTES_PER_ELEMENT*o,l=a.findIndex(u=>u.byteLength>=s);if(l>=0){const u=new t(a.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(a=>a.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const ef=new pbt;function ed(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function vbt(e,t){const r=e%t;return r<0?t+r:r}function gbt(e){return[e[12],e[13],e[14]]}function mbt(e){return{left:Ku(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Ku(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Ku(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Ku(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Ku(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Ku(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const NL=new bt;function Ku(e,t,r,n){NL.set(e,t,r);const i=NL.len();return{distance:n/i,normal:new bt(-e/i,-t/i,-r/i)}}function _bt(e){return e-Math.fround(e)}let wh;function Pb(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;wh=ef.allocate(wh,o,{type:Float32Array,size:r*2});let a=n,s=0;for(;a<i;){for(let l=0;l<r;l++){const u=e[a++];wh[s+l]=u,wh[s+l+r]=_bt(u)}s+=r*2}return wh.subarray(0,o*r*2)}const ybt=Math.PI/180,bbt=ed(),FL=[0,0,0],wbt={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function Sbt({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:a,far:s}){const l=e/t,u=r?new Br().orthographic({fovy:n,aspect:l,focalDistance:i,near:a,far:s}):new Br().perspective({fovy:n,aspect:l,near:a,far:s});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=br((c+e-f)/2,0,e)-e/2,v=br((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class Ds{constructor(t={}){E(this,"id",void 0),E(this,"x",void 0),E(this,"y",void 0),E(this,"width",void 0),E(this,"height",void 0),E(this,"isGeospatial",void 0),E(this,"zoom",void 0),E(this,"focalDistance",void 0),E(this,"position",void 0),E(this,"modelMatrix",void 0),E(this,"distanceScales",void 0),E(this,"scale",void 0),E(this,"center",void 0),E(this,"cameraPosition",void 0),E(this,"projectionMatrix",void 0),E(this,"viewMatrix",void 0),E(this,"viewMatrixUncentered",void 0),E(this,"viewMatrixInverse",void 0),E(this,"viewProjectionMatrix",void 0),E(this,"pixelProjectionMatrix",void 0),E(this,"pixelUnprojectionMatrix",void 0),E(this,"resolution",void 0),E(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||wbt,this.focalDistance=t.focalDistance||1,this.position=t.position||FL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?Ti.WEB_MERCATOR:Ti.WEB_MERCATOR_AUTO_OFFSET:Ti.IDENTITY}equals(t){return t instanceof Ds?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&To(t.projectionMatrix,this.projectionMatrix)&&To(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=jz(n,this.pixelProjectionMatrix),[o,a]=i,s=r?a:this.height-a;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=A_([i,s,a],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=Rs(t);return r[1]=br(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?tf(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]}getDistanceScales(t){return t?tT({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,mbt(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=D2t({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||tT({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:a}=t;let s=FL;if(o&&(s=a?new Br(a).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new bt(s).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=bbt,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:a=75,near:s=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new Br().multiplyRight(r).translate(new bt(this.center).negate()),this.projectionMatrix=n||Sbt({width:this.width,height:this.height,orthographic:i,fovyRadians:o||a*ybt,focalDistance:c,padding:u,near:s,far:l});const f=ed();Wl(f,f,this.projectionMatrix),Wl(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=q3([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=gbt(this.viewMatrixInverse);const h=ed(),d=ed();lA(h,h,[this.width/2,-this.height/2,1]),l1(h,h,[1,-1,0]),Wl(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=q3(ed(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Wt.warn("Pixel project matrix not invertible")()}}E(Ds,"displayName","Viewport");const Tbt=512,Pbt=4003e4,Ebt=Math.PI/180;function BL(e){const t=Math.cos(e*Ebt);return Tbt/Pbt/t}class Co extends Ds{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:a=0,nearZMultiplier:s=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:g=1.5}=t;const m=Math.pow(2,i);p=p||1,v=v||1;let _,y=null;c?(g=c[5]/2,_=c1(g)):(t.fovy?(_=t.fovy,g=Gz(_)):_=c1(g),y=F2t({width:p,height:v,pitch:o,fovy:_,nearZMultiplier:s,farZMultiplier:l}));let w=N2t({height:v,pitch:o,bearing:a,scale:m,altitude:g});h&&(w=new Br().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,...y,fovy:_,focalDistance:g}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"pitch",void 0),E(this,"bearing",void 0),E(this,"altitude",void 0),E(this,"fovy",void 0),E(this,"orthographic",void 0),E(this,"_subViewports",void 0),E(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=a,this.altitude=g,this.fovy=_,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Co({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*BL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/BL(n);return[r,n,i]}addMetersToLngLat(t,r){return Uz(t,r)}panByPosition(t,r){const n=A_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=s1([],i,_z([],n)),a=s1([],this.center,o),[s,l]=this.unprojectFlat(a);return{longitude:s,latitude:l}}getBounds(t={}){const r=$2t(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:a,zoom:s}=Wz({width:n,height:i,bounds:t,...r});return new Co({width:n,height:i,longitude:o,latitude:a,zoom:s})}}E(Co,"displayName","WebMercatorViewport");function Eb(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Co){const[i,o,a=0]=e,s=t.getDistanceScales([i,o]);n[2]=a*s.unitsPerMeter[2]}return n}function Abt(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return i===le.DEFAULT&&(i=t.isGeospatial?le.LNGLAT:le.CARTESIAN),o===void 0&&(o=i),a===void 0&&(a=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}}function Yz(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[a,s,l=0]=e;switch(r&&([a,s,l]=Pf([],[a,s,l,1],r)),n){case le.LNGLAT:return Eb([a,s,l],t,o);case le.LNGLAT_OFFSETS:return Eb([a+i[0],s+i[1],l+(i[2]||0)],t,o);case le.METER_OFFSETS:return Eb(Uz(i,[a,s,l]),t,o);case le.CARTESIAN:default:return t.isGeospatial?[a+i[0],s+i[1],l+i[2]]:t.projectPosition([a,s,l])}}function kbt(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=Abt(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=zz(r,n,i),f=Yz(e,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:c});if(c){const h=r.projectPosition(l||u);Az(f,f,h)}return f}const pc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},f1=Symbol.for("component"),Bc=Symbol.for("asyncPropDefaults"),ou=Symbol.for("asyncPropOriginal"),vs=Symbol.for("asyncPropResolved");function C_(e,t=()=>!0){return Array.isArray(e)?qz(e,t,[]):t(e)?[e]:[]}function qz(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?qz(i,t,r):t(i)&&r.push(i)}return r}function Cbt({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let a=0;for(let s=r;a<i;a++)e[s++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class Mbt{constructor(t,r,n){E(this,"id",void 0),E(this,"context",void 0),E(this,"isLoaded",void 0),E(this,"persistent",void 0),E(this,"_loadCount",0),E(this,"_subscribers",new Set),E(this,"_data",void 0),E(this,"_loader",void 0),E(this,"_error",void 0),E(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=i1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class xbt{constructor({gl:t,protocol:r}){E(this,"protocol",void 0),E(this,"_context",void 0),E(this,"_resources",void 0),E(this,"_consumers",void 0),E(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new Mbt(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,a=o[t]=o[t]||{},s=a[r]||{},l=s.resourceId&&this._resources[s.resourceId];l&&(l.unsubscribe(s),this.prune()),n&&(a[r]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const Lbt="layerManager.setLayers",Ibt="layerManager.activateViewport";class Obt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){E(this,"layers",void 0),E(this,"context",void 0),E(this,"resourceManager",void 0),E(this,"_lastRenderedLayers",[]),E(this,"_needsRedraw",!1),E(this,"_needsUpdate",!1),E(this,"_nextLayers",null),E(this,"_debug",!1),E(this,"activateViewport",a=>{Or(Ibt,this,a),a&&(this.context.viewport=a)}),this.layers=[],this.resourceManager=new xbt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&Q2t(t),stats:n||new w_({id:"deck.gl"}),viewport:i||new Ds({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new Nz,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Or(Lbt,this,r,t),this._lastRenderedLayers=t;const n=C_(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const a of t)n[a.id]?Wt.warn("Multiple old layers with same id ".concat(a.id))():n[a.id]=a;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const a of i)if(a.hasUniformTransition()){o="Uniform transition in ".concat(a);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&Wt.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let a=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),a=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}a&&this._updateSublayersRecursively(a,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=pc.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=pc.MATCHED,r!==t&&(t.lifecycle=pc.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=pc.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=pc.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function Ef(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Ef(n,i)))return!1}return!0}class Rbt{constructor(t){E(this,"width",void 0),E(this,"height",void 0),E(this,"views",void 0),E(this,"viewState",void 0),E(this,"controllers",void 0),E(this,"timeline",void 0),E(this,"_viewports",void 0),E(this,"_viewportMap",void 0),E(this,"_isUpdating",void 0),E(this,"_needsRedraw",void 0),E(this,"_needsUpdate",void 0),E(this,"_eventManager",void 0),E(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.containsPixel(i)){const s=t.slice();return s[0]-=a.x,s[1]-=a.y,a.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=C_(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!Ef(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Wt.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const a={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],a=this.getViewState(o),s=o.makeViewport({viewState:a,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,a,s,l),this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const Dbt=/([0-9]+\.?[0-9]*)(%|px)/;function ja(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=Dbt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function Wa(e,t){return e.relative?Math.round(e.position*t):e.position}function ur(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class Zz{constructor(t){E(this,"id",void 0),E(this,"viewportInstance",void 0),E(this,"_x",void 0),E(this,"_y",void 0),E(this,"_width",void 0),E(this,"_height",void 0),E(this,"_padding",void 0),E(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:a="100%",padding:s=null,viewportInstance:l}=t||{};ur(!l||l instanceof Ds),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=ja(n),this._y=ja(i),this._width=ja(o),this._height=ja(a),this._padding=s&&{left:ja(s.left||0),right:ja(s.right||0),top:ja(s.top||0),bottom:ja(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&Ef(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:Wa(this._x,t),y:Wa(this._y,r),width:Wa(this._width,t),height:Wa(this._height,r)};return this._padding&&(n.padding={left:Wa(this._padding.left,t),top:Wa(this._padding.top,r),right:Wa(this._padding.right,t),bottom:Wa(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class q0{constructor(t){E(this,"_inProgress",void 0),E(this,"_handle",void 0),E(this,"_timeline",void 0),E(this,"time",void 0),E(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const $L=()=>{},eT={BREAK:1,SNAP_TO_END:2,IGNORE:3},Nbt=e=>e,Fbt=eT.BREAK;class Bbt{constructor(t){E(this,"getControllerState",void 0),E(this,"props",void 0),E(this,"propsInTransition",void 0),E(this,"transition",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:a,duration:s,easing:l}}=r,u=l(n/s),c=i.interpolateProps(o,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new q0(t.timeline),this.onViewStateChange=t.onViewStateChange||$L,this.onStateChange=t.onStateChange||$L}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:a}=this.transition.settings;i={...n,...o===eT.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===eT.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(a===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const l={duration:a,easing:r.transitionEasing||Nbt,interpolator:o,interruption:r.transitionInterruption||Fbt,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class $bt{constructor(t){E(this,"_propsToCompare",void 0),E(this,"_propsToExtract",void 0),E(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!To(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];ur(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const zbt=["longitude","latitude","zoom","bearing","pitch"],Vbt=["longitude","latitude","zoom"];class M_ extends $bt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:zbt,required:Vbt},super(n.transitionProps),E(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const a=i(t),s=i(r),l=a.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=jl(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,jl(t.around,r.around,n)))}return i}}const Ha={transitionDuration:0},Ubt=300,Cv=e=>1-(1-e)*(1-e),Ju={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},gl={};class Kz{constructor(t){E(this,"props",void 0),E(this,"state",{}),E(this,"transitionManager",void 0),E(this,"eventManager",void 0),E(this,"onViewStateChange",void 0),E(this,"onStateChange",void 0),E(this,"makeViewport",void 0),E(this,"_controllerState",void 0),E(this,"_events",{}),E(this,"_interactionState",{isDragging:!1}),E(this,"_customEvents",[]),E(this,"_eventStartBlocked",null),E(this,"_panMove",!1),E(this,"invertPan",!1),E(this,"dragMode","rotate"),E(this,"inertia",0),E(this,"scrollZoom",!0),E(this,"dragPan",!0),E(this,"dragRotate",!0),E(this,"doubleClickZoom",!0),E(this,"touchZoom",!0),E(this,"touchRotate",!1),E(this,"keyboard",!0),this.transitionManager=new Bbt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?Ubt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:a=!0,touchZoom:s=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(Ju.WHEEL,c&&n),this.toggleEvents(Ju.PAN,c&&(i||o)),this.toggleEvents(Ju.PINCH,c&&(s||l)),this.toggleEvents(Ju.TRIPLE_PAN,c&&l),this.toggleEvents(Ju.DOUBLE_TAP,c&&a),this.toggleEvents(Ju.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=a,this.touchZoom=s,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Ha,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Ha,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ha,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let a=2/(1+Math.exp(-Math.abs(o*n)));o<0&&a!==0&&(a=1/a);const s=this.controllerState.zoom({pos:r,scale:a});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Ha,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ha,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return gl._startPinchRotation=t.rotation,gl._lastPinchEvent=t,this.updateViewport(n,Ha,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:gl._startPinchRotation-n})}return this.updateViewport(r,Ha,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),gl._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=gl;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Cv},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return gl._startPinchRotation=null,gl._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=s.rotateLeft(o),u.isRotating=!0):(l=s.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=s.rotateRight(o),u.isRotating=!0):(l=s.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=s.rotateUp(a),u.isRotating=!0):(l=s.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=s.rotateDown(a),u.isRotating=!0):(l=s.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Ha:t?{...r,transitionInterpolator:new M_({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class Jz{constructor(t,r){E(this,"_viewportProps",void 0),E(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const zL=5,Gbt=1.2;class jbt extends Jz{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:_,startPitch:y,startZoom:w,normalize:T=!0}=t;ur(Number.isFinite(o)),ur(Number.isFinite(i)),ur(Number.isFinite(a)),super({width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:g,startRotatePos:m,startBearing:_,startPitch:y,startZoom:w}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||o===void 0||a===void 0)return this;let s;return t?s=this._getNewRotation(t,i,a,o):s={bearing:o+r,pitch:a+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(n);l=br(l,s,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=br(i,n,r);const{maxPitch:o,minPitch:a,pitch:s}=t;t.pitch=br(s,a,o);const{normalize:l=!0}=t;return l&&Object.assign(t,z2t(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],a=t[1]-r[1],s=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;a>0?Math.abs(c-l)>zL&&(h=a/(l-c)*Gbt):a<0&&l>zL&&(h=1-s/l),h=br(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let g=n;return h>0?g=n+h*(p-n):h<0&&(g=n-h*(d-n)),{pitch:g,bearing:v}}}class Wbt extends Kz{constructor(...t){super(...t),E(this,"ControllerState",jbt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new M_({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),E(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class Qz extends Zz{get ViewportType(){return Co}get ControllerType(){return Wbt}}E(Qz,"displayName","MapView");class Hbt extends k_{constructor(t,r){super(t,r),E(this,"maskMap",void 0),E(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new gn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new nr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,ti(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===X0.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const Xbt=new Br().lookAt({eye:[0,0,1]});function Ybt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,a=e/2,s=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=br((u+e-c)/2,0,e)-e/2,p=br((f+t-h)/2,0,t)-t/2;o-=d,a-=d,s+=p,l+=p}return new Br().ortho({left:o,right:a,bottom:s,top:l,near:r,far:n})}class qbt extends Ds{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:a=0,target:s=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,f=Array.isArray(a)?a[1]:a,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),g=Math.pow(2,f);p={unitsPerMeter:[v/d,g/d,1],metersPerUnit:[d/v,d/g,1]}}super({...t,longitude:void 0,position:s,viewMatrix:Xbt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:Ybt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=A_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=s1([],i,_z([],n)),a=s1([],this.center,o);return{target:this.unprojectFlat(a)}}}class Zbt extends Jz{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:a=[0,0,0],zoom:s=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:a,zoom:s,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:g,startZoom:m}),E(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:a}=this.getState(),{width:s,height:l}=this.getViewportProps();if(!i||o===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-i[0])/s;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:a+c*180}}else u={rotationX:o+n,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const a=this._calculateNewZoom({scale:n,startZoom:i}),s=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...s.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return br(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[br(i[0],n,r),br(i[1],n,r)]:br(i,n,r),t.rotationX=br(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=vbt(s+180,360)-180),t}}class Kbt extends Zbt{constructor(t){super(t),E(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[a,s]=r;switch(this.zoomAxis){case"X":a=br(a+o,i,n);break;case"Y":s=br(s+o,i,n);break;default:let l=Math.min(a+o,s+o);l<i&&(o+=i-l),l=Math.max(a+o,s+o),l>n&&(o+=n-l),a+=o,s+=o}return[a,s]}return br(r+o,i,n)}}class Jbt extends Kz{constructor(...t){super(...t),E(this,"ControllerState",Kbt),E(this,"transition",{transitionDuration:300,transitionInterpolator:new M_(["target","zoom"])}),E(this,"dragMode","pan")}_onPanRotate(){return!1}}class dA extends Zz{get ViewportType(){return qbt}get ControllerType(){return Jbt}}E(dA,"displayName","OrthographicView");function Qbt({layers:e,viewport:t}){let r=null;for(const o of e){const a=o.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}const n=t.getBounds();if(!r)return n;const i=ewt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function twt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Co){const{longitude:s,latitude:l,zoom:u}=Wz({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Co({longitude:s,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],a=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new dA({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(a)}})}function ewt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class rwt{constructor(){E(this,"id","mask-effect"),E(this,"props",null),E(this,"useInPicking",!0),E(this,"dummyMaskMap",void 0),E(this,"channels",[]),E(this,"masks",null),E(this,"maskPass",void 0),E(this,"maskMap",void 0),E(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){this.dummyMaskMap||(this.dummyMaskMap=new gn(t,{width:1,height:1}));const s=r.filter(f=>f.props.visible&&f.props.operation===X0.MASK);if(s.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new Hbt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:a}){const s=this.channels[t.index];if(!s)return;const l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==s.layerBounds[c]);if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=Qbt({layers:t.layers,viewport:o}),l||!To(t.bounds,s.bounds))){const{maskPass:u,maskMap:c}=this,f=twt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let a=r[o];if(!a){if(++n>4){Wt.warn("Too many mask layers. The max supported is 4")();continue}a={id:o,index:this.channels.findIndex(s=>(s==null?void 0:s.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(a=>!a),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const nwt=new Xz;class iwt{constructor(){E(this,"effects",void 0),E(this,"_internalEffects",void 0),E(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!Ef(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new rwt),t.some(r=>r instanceof Xz)||this._internalEffects.push(nwt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class owt extends k_{shouldDrawLayer(t){return t.props.operation===X0.DRAW}}const VL={blendFunc:[1,0,32771,0],blendEquation:32774};class tV extends k_{constructor(...t){super(...t),E(this,"pickZ",void 0),E(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const g=p?null:{byLayer:new Map,byAlpha:[]};this._colors=g;const m=ti(v,{scissorTest:!0,scissor:[s,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...VL,blend:!p},()=>super.render({target:a,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(y=>y.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:g&&swt.bind(null,g),stats:m}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===X0.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,VL),i.blend=!0,i.blendColor=awt(this._colors,t,n)):i.blend=!1,i}}function awt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,a=n.get(t);return a?(a.viewports.push(r),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:t,viewports:[r]},n.set(t,a),i[o]=a):(Wt.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function swt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const lwt="deckRenderer.renderLayers";class uwt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new owt(t),this.pickLayersPass=new tV(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||nr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Or(lwt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new nr(this.gl),new nr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const a=o.postRender(this.gl,i);i.inputBuffer=a,i.swapBuffer=a===n[0]?n[1]:n[0]}}}const cwt={pickedColor:null,pickedObjectIndex:-1};function fwt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:a,y:s,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+s-n,v=p*p;if(v>c)h+=4*l;else for(let g=0;g<l;g++){if(e[h+3]-1>=0){const _=g+a-r,y=_*_+v;y<=c&&(c=y,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),g=f/4-v*l;return{...p,pickedColor:d,pickedX:a+g,pickedY:s+v}}Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}return cwt}function hwt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),a=o.join(",");if(!r.has(a)){const s=t(o);s?r.set(a,{...s,color:o}):Wt.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function eV({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let a=t[0];t.length>1&&(a=pwt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(a){const l=[n-a.x,i-a.y];o!==void 0&&(l[2]=o),s=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function dwt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=a?a.props.id:null;if(d!==h||s!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=s,r.info=null}}const u=eV(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===a&&(h.color=o,h.index=s,h.picked=!0),h=rV({layer:f,info:h,mode:n});const d=h.layer;f===a&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function rV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function pwt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class vwt{constructor(t){E(this,"gl",void 0),E(this,"pickingFBO",void 0),E(this,"depthFBO",void 0),E(this,"pickLayersPass",void 0),E(this,"layerFilter",void 0),E(this,"lastPickedInfo",void 0),E(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new tV(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?n.find(h=>h.id===a):null,u=s&&i.find(h=>h.id===s)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new nr(n),nr.isSupported(n,{colorBufferFloat:!0}))){const i=new nr(n);i.attach({[36064]:new gn(n,{format:Qt(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=Kc(this.gl);if(!h)return{result:[],emptyInfo:eV({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=ub(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],g=Math.round(a*d),{width:m,height:_}=this.pickingFBO,y=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceWidth:m,deviceHeight:_}),w={x:i-a,y:o-a,width:a*2+1,height:a*2+1};let T;const S=[],P=new Set;for(let k=0;k<s;k++){let A;if(y){const M=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:y,cullRect:w,effects:f,pass:"picking:".concat(l)});A=fwt({...M,deviceX:v[0],deviceY:v[1],deviceRadius:g,deviceRect:y})}else A={pickedColor:null,pickedObjectIndex:-1};let C;A.pickedLayer&&u&&this.depthFBO&&(C=this._drawAndSample({layers:[A.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:A.pickedX,y:A.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),A.pickedLayer&&k+1<s&&(P.add(A.pickedLayer),A.pickedLayer.disablePickingIndex(A.pickedObjectIndex)),T=dwt({pickInfo:A,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:C,pixelRatio:d});for(const M of T.values())M.layer&&S.push(M);if(!A.pickedColor)break}for(const k of P)k.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=Kc(this.gl),p=ub(this.gl,[i,o],!0),v=p.x,g=p.y+p.height,m=ub(this.gl,[i+a,o+s],!0),_=m.x+m.width,y=m.y,w={x:v,y,width:_-v,height:g-y},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:a,height:s},effects:f,pass:"picking:".concat(l)}),S=hwt(T),P=new Map,k=Number.isFinite(u);for(let A=0;A<S.length&&!(k&&u&&P.size>=u);A++){const C=S[A];let M={color:C.pickedColor,layer:null,index:C.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};M=rV({layer:C.pickedLayer,info:M,mode:l}),P.has(M.object)||P.set(M.object,M)}return Array.from(P.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,g=new(u?Float32Array:Uint8Array)(p*v*4);return E_(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:g}),{pickedColors:g,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const a=Math.max(0,t-n),s=Math.max(0,r-n),l=Math.min(i,t+n+1)-a,u=Math.min(o,r+n+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}const gwt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class mwt{constructor(t){E(this,"el",null),E(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,gwt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Af={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),s="function",l=Math.round,u=Math.abs,c=Date.now;function f(x,I,U){return setTimeout(y(x,U),I)}function h(x,I,U){return Array.isArray(x)?(d(x,U[I],U),!0):!1}function d(x,I,U){var H;if(!!x)if(x.forEach)x.forEach(I,U);else if(x.length!==i)for(H=0;H<x.length;)I.call(U,x[H],H,x),H++;else for(H in x)x.hasOwnProperty(H)&&I.call(U,x[H],H,x)}function p(x,I,U){var H="DEPRECATED METHOD: "+I+`
`+U+` AT 
`;return function(){var et=new Error("get-stack-trace"),_t=et&&et.stack?et.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",Yt=t.console&&(t.console.warn||t.console.log);return Yt&&Yt.call(t.console,H,_t),x.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(I){if(I===i||I===null)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(I),H=1;H<arguments.length;H++){var et=arguments[H];if(et!==i&&et!==null)for(var _t in et)et.hasOwnProperty(_t)&&(U[_t]=et[_t])}return U}:v=Object.assign;var g=p(function(I,U,H){for(var et=Object.keys(U),_t=0;_t<et.length;)(!H||H&&I[et[_t]]===i)&&(I[et[_t]]=U[et[_t]]),_t++;return I},"extend","Use `assign`."),m=p(function(I,U){return g(I,U,!0)},"merge","Use `assign`.");function _(x,I,U){var H=I.prototype,et;et=x.prototype=Object.create(H),et.constructor=x,et._super=H,U&&v(et,U)}function y(x,I){return function(){return x.apply(I,arguments)}}function w(x,I){return typeof x==s?x.apply(I&&I[0]||i,I):x}function T(x,I){return x===i?I:x}function S(x,I,U){d(C(I),function(H){x.addEventListener(H,U,!1)})}function P(x,I,U){d(C(I),function(H){x.removeEventListener(H,U,!1)})}function k(x,I){for(;x;){if(x==I)return!0;x=x.parentNode}return!1}function A(x,I){return x.indexOf(I)>-1}function C(x){return x.trim().split(/\s+/g)}function M(x,I,U){if(x.indexOf&&!U)return x.indexOf(I);for(var H=0;H<x.length;){if(U&&x[H][U]==I||!U&&x[H]===I)return H;H++}return-1}function D(x){return Array.prototype.slice.call(x,0)}function B(x,I,U){for(var H=[],et=[],_t=0;_t<x.length;){var Yt=I?x[_t][I]:x[_t];M(et,Yt)<0&&H.push(x[_t]),et[_t]=Yt,_t++}return U&&(I?H=H.sort(function(vr,Hr){return vr[I]>Hr[I]}):H=H.sort()),H}function z(x,I){for(var U,H,et=I[0].toUpperCase()+I.slice(1),_t=0;_t<o.length;){if(U=o[_t],H=U?U+et:I,H in x)return H;_t++}return i}var N=1;function j(){return N++}function Z(x){var I=x.ownerDocument||x;return I.defaultView||I.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,tt="ontouchstart"in t,Pt=z(t,"PointerEvent")!==i,Ot=tt&&q.test(navigator.userAgent),wt="touch",St="pen",Ht="mouse",Y="kinect",nt=25,K=1,pt=2,Tt=4,At=8,lt=1,ft=2,$=4,G=8,X=16,J=ft|$,Q=G|X,ut=J|Q,vt=["x","y"],at=["clientX","clientY"];function it(x,I){var U=this;this.manager=x,this.callback=I,this.element=x.element,this.target=x.options.inputTarget,this.domHandler=function(H){w(x.options.enable,[x])&&U.handler(H)},this.init()}it.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&P(this.element,this.evEl,this.domHandler),this.evTarget&&P(this.target,this.evTarget,this.domHandler),this.evWin&&P(Z(this.element),this.evWin,this.domHandler)}};function rt(x){var I,U=x.options.inputClass;return U?I=U:Pt?I=ey:Ot?I=up:tt?I=ry:I=Us,new I(x,Rt)}function Rt(x,I,U){var H=U.pointers.length,et=U.changedPointers.length,_t=I&K&&H-et===0,Yt=I&(Tt|At)&&H-et===0;U.isFirst=!!_t,U.isFinal=!!Yt,_t&&(x.session={}),U.eventType=I,Ct(x,U),x.emit("hammer.input",U),x.recognize(U),x.session.prevInput=U}function Ct(x,I){var U=x.session,H=I.pointers,et=H.length;U.firstInput||(U.firstInput=Kt(I)),et>1&&!U.firstMultiple?U.firstMultiple=Kt(I):et===1&&(U.firstMultiple=!1);var _t=U.firstInput,Yt=U.firstMultiple,sr=Yt?Yt.center:_t.center,vr=I.center=me(H);I.timeStamp=c(),I.deltaTime=I.timeStamp-_t.timeStamp,I.angle=ji(sr,vr),I.distance=Ar(sr,vr),Dt(U,I),I.offsetDirection=Te(I.deltaX,I.deltaY);var Hr=_e(I.deltaTime,I.deltaX,I.deltaY);I.overallVelocityX=Hr.x,I.overallVelocityY=Hr.y,I.overallVelocity=u(Hr.x)>u(Hr.y)?Hr.x:Hr.y,I.scale=Yt?Vs(Yt.pointers,H):1,I.rotation=Yt?sp(Yt.pointers,H):0,I.maxPointers=U.prevInput?I.pointers.length>U.prevInput.maxPointers?I.pointers.length:U.prevInput.maxPointers:I.pointers.length,$t(U,I);var Hi=x.element;k(I.srcEvent.target,Hi)&&(Hi=I.srcEvent.target),I.target=Hi}function Dt(x,I){var U=I.center,H=x.offsetDelta||{},et=x.prevDelta||{},_t=x.prevInput||{};(I.eventType===K||_t.eventType===Tt)&&(et=x.prevDelta={x:_t.deltaX||0,y:_t.deltaY||0},H=x.offsetDelta={x:U.x,y:U.y}),I.deltaX=et.x+(U.x-H.x),I.deltaY=et.y+(U.y-H.y)}function $t(x,I){var U=x.lastInterval||I,H=I.timeStamp-U.timeStamp,et,_t,Yt,sr;if(I.eventType!=At&&(H>nt||U.velocity===i)){var vr=I.deltaX-U.deltaX,Hr=I.deltaY-U.deltaY,Hi=_e(H,vr,Hr);_t=Hi.x,Yt=Hi.y,et=u(Hi.x)>u(Hi.y)?Hi.x:Hi.y,sr=Te(vr,Hr),x.lastInterval=I}else et=U.velocity,_t=U.velocityX,Yt=U.velocityY,sr=U.direction;I.velocity=et,I.velocityX=_t,I.velocityY=Yt,I.direction=sr}function Kt(x){for(var I=[],U=0;U<x.pointers.length;)I[U]={clientX:l(x.pointers[U].clientX),clientY:l(x.pointers[U].clientY)},U++;return{timeStamp:c(),pointers:I,center:me(I),deltaX:x.deltaX,deltaY:x.deltaY}}function me(x){var I=x.length;if(I===1)return{x:l(x[0].clientX),y:l(x[0].clientY)};for(var U=0,H=0,et=0;et<I;)U+=x[et].clientX,H+=x[et].clientY,et++;return{x:l(U/I),y:l(H/I)}}function _e(x,I,U){return{x:I/x||0,y:U/x||0}}function Te(x,I){return x===I?lt:u(x)>=u(I)?x<0?ft:$:I<0?G:X}function Ar(x,I,U){U||(U=vt);var H=I[U[0]]-x[U[0]],et=I[U[1]]-x[U[1]];return Math.sqrt(H*H+et*et)}function ji(x,I,U){U||(U=vt);var H=I[U[0]]-x[U[0]],et=I[U[1]]-x[U[1]];return Math.atan2(et,H)*180/Math.PI}function sp(x,I){return ji(I[1],I[0],at)+ji(x[1],x[0],at)}function Vs(x,I){return Ar(I[0],I[1],at)/Ar(x[0],x[1],at)}var lp={mousedown:K,mousemove:pt,mouseup:Tt},Wr="mousedown",On="mousemove mouseup";function Us(){this.evEl=Wr,this.evWin=On,this.pressed=!1,it.apply(this,arguments)}_(Us,it,{handler:function(I){var U=lp[I.type];U&K&&I.button===0&&(this.pressed=!0),U&pt&&I.which!==1&&(U=Tt),this.pressed&&(U&Tt&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[I],changedPointers:[I],pointerType:Ht,srcEvent:I}))}});var JG={pointerdown:K,pointermove:pt,pointerup:Tt,pointercancel:At,pointerout:At},QG={2:wt,3:St,4:Ht,5:Y},Pk="pointerdown",Ek="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(Pk="MSPointerDown",Ek="MSPointerMove MSPointerUp MSPointerCancel");function ey(){this.evEl=Pk,this.evWin=Ek,it.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(ey,it,{handler:function(I){var U=this.store,H=!1,et=I.type.toLowerCase().replace("ms",""),_t=JG[et],Yt=QG[I.pointerType]||I.pointerType,sr=Yt==wt,vr=M(U,I.pointerId,"pointerId");_t&K&&(I.button===0||sr)?vr<0&&(U.push(I),vr=U.length-1):_t&(Tt|At)&&(H=!0),!(vr<0)&&(U[vr]=I,this.callback(this.manager,_t,{pointers:U,changedPointers:[I],pointerType:Yt,srcEvent:I}),H&&U.splice(vr,1))}});var tj={touchstart:K,touchmove:pt,touchend:Tt,touchcancel:At},ej="touchstart",rj="touchstart touchmove touchend touchcancel";function Ak(){this.evTarget=ej,this.evWin=rj,this.started=!1,it.apply(this,arguments)}_(Ak,it,{handler:function(I){var U=tj[I.type];if(U===K&&(this.started=!0),!!this.started){var H=nj.call(this,I,U);U&(Tt|At)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:wt,srcEvent:I})}}});function nj(x,I){var U=D(x.touches),H=D(x.changedTouches);return I&(Tt|At)&&(U=B(U.concat(H),"identifier",!0)),[U,H]}var ij={touchstart:K,touchmove:pt,touchend:Tt,touchcancel:At},oj="touchstart touchmove touchend touchcancel";function up(){this.evTarget=oj,this.targetIds={},it.apply(this,arguments)}_(up,it,{handler:function(I){var U=ij[I.type],H=aj.call(this,I,U);!H||this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:wt,srcEvent:I})}});function aj(x,I){var U=D(x.touches),H=this.targetIds;if(I&(K|pt)&&U.length===1)return H[U[0].identifier]=!0,[U,U];var et,_t,Yt=D(x.changedTouches),sr=[],vr=this.target;if(_t=U.filter(function(Hr){return k(Hr.target,vr)}),I===K)for(et=0;et<_t.length;)H[_t[et].identifier]=!0,et++;for(et=0;et<Yt.length;)H[Yt[et].identifier]&&sr.push(Yt[et]),I&(Tt|At)&&delete H[Yt[et].identifier],et++;if(!!sr.length)return[B(_t.concat(sr),"identifier",!0),sr]}var sj=2500,kk=25;function ry(){it.apply(this,arguments);var x=y(this.handler,this);this.touch=new up(this.manager,x),this.mouse=new Us(this.manager,x),this.primaryTouch=null,this.lastTouches=[]}_(ry,it,{handler:function(I,U,H){var et=H.pointerType==wt,_t=H.pointerType==Ht;if(!(_t&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(et)lj.call(this,U,H);else if(_t&&uj.call(this,H))return;this.callback(I,U,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function lj(x,I){x&K?(this.primaryTouch=I.changedPointers[0].identifier,Ck.call(this,I)):x&(Tt|At)&&Ck.call(this,I)}function Ck(x){var I=x.changedPointers[0];if(I.identifier===this.primaryTouch){var U={x:I.clientX,y:I.clientY};this.lastTouches.push(U);var H=this.lastTouches,et=function(){var _t=H.indexOf(U);_t>-1&&H.splice(_t,1)};setTimeout(et,sj)}}function uj(x){for(var I=x.srcEvent.clientX,U=x.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var et=this.lastTouches[H],_t=Math.abs(I-et.x),Yt=Math.abs(U-et.y);if(_t<=kk&&Yt<=kk)return!0}return!1}var Mk=z(a.style,"touchAction"),xk=Mk!==i,Lk="compute",Ik="auto",ny="manipulation",Gs="none",Uf="pan-x",Gf="pan-y",cp=fj();function iy(x,I){this.manager=x,this.set(I)}iy.prototype={set:function(x){x==Lk&&(x=this.compute()),xk&&this.manager.element.style&&cp[x]&&(this.manager.element.style[Mk]=x),this.actions=x.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var x=[];return d(this.manager.recognizers,function(I){w(I.options.enable,[I])&&(x=x.concat(I.getTouchAction()))}),cj(x.join(" "))},preventDefaults:function(x){var I=x.srcEvent,U=x.offsetDirection;if(this.manager.session.prevented){I.preventDefault();return}var H=this.actions,et=A(H,Gs)&&!cp[Gs],_t=A(H,Gf)&&!cp[Gf],Yt=A(H,Uf)&&!cp[Uf];if(et){var sr=x.pointers.length===1,vr=x.distance<2,Hr=x.deltaTime<250;if(sr&&vr&&Hr)return}if(!(Yt&&_t)&&(et||_t&&U&J||Yt&&U&Q))return this.preventSrc(I)},preventSrc:function(x){this.manager.session.prevented=!0,x.preventDefault()}};function cj(x){if(A(x,Gs))return Gs;var I=A(x,Uf),U=A(x,Gf);return I&&U?Gs:I||U?I?Uf:Gf:A(x,ny)?ny:Ik}function fj(){if(!xk)return!1;var x={},I=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){x[U]=I?t.CSS.supports("touch-action",U):!0}),x}var fp=1,Rn=2,ku=4,La=8,No=La,jf=16,Wi=32;function Fo(x){this.options=v({},this.defaults,x||{}),this.id=j(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=fp,this.simultaneous={},this.requireFail=[]}Fo.prototype={defaults:{},set:function(x){return v(this.options,x),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(x){if(h(x,"recognizeWith",this))return this;var I=this.simultaneous;return x=hp(x,this),I[x.id]||(I[x.id]=x,x.recognizeWith(this)),this},dropRecognizeWith:function(x){return h(x,"dropRecognizeWith",this)?this:(x=hp(x,this),delete this.simultaneous[x.id],this)},requireFailure:function(x){if(h(x,"requireFailure",this))return this;var I=this.requireFail;return x=hp(x,this),M(I,x)===-1&&(I.push(x),x.requireFailure(this)),this},dropRequireFailure:function(x){if(h(x,"dropRequireFailure",this))return this;x=hp(x,this);var I=M(this.requireFail,x);return I>-1&&this.requireFail.splice(I,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(x){return!!this.simultaneous[x.id]},emit:function(x){var I=this,U=this.state;function H(et){I.manager.emit(et,x)}U<La&&H(I.options.event+Ok(U)),H(I.options.event),x.additionalEvent&&H(x.additionalEvent),U>=La&&H(I.options.event+Ok(U))},tryEmit:function(x){if(this.canEmit())return this.emit(x);this.state=Wi},canEmit:function(){for(var x=0;x<this.requireFail.length;){if(!(this.requireFail[x].state&(Wi|fp)))return!1;x++}return!0},recognize:function(x){var I=v({},x);if(!w(this.options.enable,[this,I])){this.reset(),this.state=Wi;return}this.state&(No|jf|Wi)&&(this.state=fp),this.state=this.process(I),this.state&(Rn|ku|La|jf)&&this.tryEmit(I)},process:function(x){},getTouchAction:function(){},reset:function(){}};function Ok(x){return x&jf?"cancel":x&La?"end":x&ku?"move":x&Rn?"start":""}function Rk(x){return x==X?"down":x==G?"up":x==ft?"left":x==$?"right":""}function hp(x,I){var U=I.manager;return U?U.get(x):x}function ai(){Fo.apply(this,arguments)}_(ai,Fo,{defaults:{pointers:1},attrTest:function(x){var I=this.options.pointers;return I===0||x.pointers.length===I},process:function(x){var I=this.state,U=x.eventType,H=I&(Rn|ku),et=this.attrTest(x);return H&&(U&At||!et)?I|jf:H||et?U&Tt?I|La:I&Rn?I|ku:Rn:Wi}});function dp(){ai.apply(this,arguments),this.pX=null,this.pY=null}_(dp,ai,{defaults:{event:"pan",threshold:10,pointers:1,direction:ut},getTouchAction:function(){var x=this.options.direction,I=[];return x&J&&I.push(Gf),x&Q&&I.push(Uf),I},directionTest:function(x){var I=this.options,U=!0,H=x.distance,et=x.direction,_t=x.deltaX,Yt=x.deltaY;return et&I.direction||(I.direction&J?(et=_t===0?lt:_t<0?ft:$,U=_t!=this.pX,H=Math.abs(x.deltaX)):(et=Yt===0?lt:Yt<0?G:X,U=Yt!=this.pY,H=Math.abs(x.deltaY))),x.direction=et,U&&H>I.threshold&&et&I.direction},attrTest:function(x){return ai.prototype.attrTest.call(this,x)&&(this.state&Rn||!(this.state&Rn)&&this.directionTest(x))},emit:function(x){this.pX=x.deltaX,this.pY=x.deltaY;var I=Rk(x.direction);I&&(x.additionalEvent=this.options.event+I),this._super.emit.call(this,x)}});function oy(){ai.apply(this,arguments)}_(oy,ai,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gs]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.scale-1)>this.options.threshold||this.state&Rn)},emit:function(x){if(x.scale!==1){var I=x.scale<1?"in":"out";x.additionalEvent=this.options.event+I}this._super.emit.call(this,x)}});function ay(){Fo.apply(this,arguments),this._timer=null,this._input=null}_(ay,Fo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Ik]},process:function(x){var I=this.options,U=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime>I.time;if(this._input=x,!H||!U||x.eventType&(Tt|At)&&!et)this.reset();else if(x.eventType&K)this.reset(),this._timer=f(function(){this.state=No,this.tryEmit()},I.time,this);else if(x.eventType&Tt)return No;return Wi},reset:function(){clearTimeout(this._timer)},emit:function(x){this.state===No&&(x&&x.eventType&Tt?this.manager.emit(this.options.event+"up",x):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function sy(){ai.apply(this,arguments)}_(sy,ai,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gs]},attrTest:function(x){return this._super.attrTest.call(this,x)&&(Math.abs(x.rotation)>this.options.threshold||this.state&Rn)}});function ly(){ai.apply(this,arguments)}_(ly,ai,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|Q,pointers:1},getTouchAction:function(){return dp.prototype.getTouchAction.call(this)},attrTest:function(x){var I=this.options.direction,U;return I&(J|Q)?U=x.overallVelocity:I&J?U=x.overallVelocityX:I&Q&&(U=x.overallVelocityY),this._super.attrTest.call(this,x)&&I&x.offsetDirection&&x.distance>this.options.threshold&&x.maxPointers==this.options.pointers&&u(U)>this.options.velocity&&x.eventType&Tt},emit:function(x){var I=Rk(x.offsetDirection);I&&this.manager.emit(this.options.event+I,x),this.manager.emit(this.options.event,x)}});function pp(){Fo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(pp,Fo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[ny]},process:function(x){var I=this.options,U=x.pointers.length===I.pointers,H=x.distance<I.threshold,et=x.deltaTime<I.time;if(this.reset(),x.eventType&K&&this.count===0)return this.failTimeout();if(H&&et&&U){if(x.eventType!=Tt)return this.failTimeout();var _t=this.pTime?x.timeStamp-this.pTime<I.interval:!0,Yt=!this.pCenter||Ar(this.pCenter,x.center)<I.posThreshold;this.pTime=x.timeStamp,this.pCenter=x.center,!Yt||!_t?this.count=1:this.count+=1,this._input=x;var sr=this.count%I.taps;if(sr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=No,this.tryEmit()},I.interval,this),Rn):No}return Wi},failTimeout:function(){return this._timer=f(function(){this.state=Wi},this.options.interval,this),Wi},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==No&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Bo(x,I){return I=I||{},I.recognizers=T(I.recognizers,Bo.defaults.preset),new uy(x,I)}Bo.VERSION="2.0.7",Bo.defaults={domEvents:!1,touchAction:Lk,enable:!0,inputTarget:null,inputClass:null,preset:[[sy,{enable:!1}],[oy,{enable:!1},["rotate"]],[ly,{direction:J}],[dp,{direction:J},["swipe"]],[pp],[pp,{event:"doubletap",taps:2},["tap"]],[ay]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var hj=1,Dk=2;function uy(x,I){this.options=v({},Bo.defaults,I||{}),this.options.inputTarget=this.options.inputTarget||x,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=x,this.input=rt(this),this.touchAction=new iy(this,this.options.touchAction),Nk(this,!0),d(this.options.recognizers,function(U){var H=this.add(new U[0](U[1]));U[2]&&H.recognizeWith(U[2]),U[3]&&H.requireFailure(U[3])},this)}uy.prototype={set:function(x){return v(this.options,x),x.touchAction&&this.touchAction.update(),x.inputTarget&&(this.input.destroy(),this.input.target=x.inputTarget,this.input.init()),this},stop:function(x){this.session.stopped=x?Dk:hj},recognize:function(x){var I=this.session;if(!I.stopped){this.touchAction.preventDefaults(x);var U,H=this.recognizers,et=I.curRecognizer;(!et||et&&et.state&No)&&(et=I.curRecognizer=null);for(var _t=0;_t<H.length;)U=H[_t],I.stopped!==Dk&&(!et||U==et||U.canRecognizeWith(et))?U.recognize(x):U.reset(),!et&&U.state&(Rn|ku|La)&&(et=I.curRecognizer=U),_t++}},get:function(x){if(x instanceof Fo)return x;for(var I=this.recognizers,U=0;U<I.length;U++)if(I[U].options.event==x)return I[U];return null},add:function(x){if(h(x,"add",this))return this;var I=this.get(x.options.event);return I&&this.remove(I),this.recognizers.push(x),x.manager=this,this.touchAction.update(),x},remove:function(x){if(h(x,"remove",this))return this;if(x=this.get(x),x){var I=this.recognizers,U=M(I,x);U!==-1&&(I.splice(U,1),this.touchAction.update())}return this},on:function(x,I){if(x!==i&&I!==i){var U=this.handlers;return d(C(x),function(H){U[H]=U[H]||[],U[H].push(I)}),this}},off:function(x,I){if(x!==i){var U=this.handlers;return d(C(x),function(H){I?U[H]&&U[H].splice(M(U[H],I),1):delete U[H]}),this}},emit:function(x,I){this.options.domEvents&&dj(x,I);var U=this.handlers[x]&&this.handlers[x].slice();if(!(!U||!U.length)){I.type=x,I.preventDefault=function(){I.srcEvent.preventDefault()};for(var H=0;H<U.length;)U[H](I),H++}},destroy:function(){this.element&&Nk(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function Nk(x,I){var U=x.element;if(!!U.style){var H;d(x.options.cssProps,function(et,_t){H=z(U.style,_t),I?(x.oldCssProps[H]=U.style[H],U.style[H]=et):U.style[H]=x.oldCssProps[H]||""}),I||(x.oldCssProps={})}}function dj(x,I){var U=r.createEvent("Event");U.initEvent(x,!0,!0),U.gesture=I,I.target.dispatchEvent(U)}v(Bo,{INPUT_START:K,INPUT_MOVE:pt,INPUT_END:Tt,INPUT_CANCEL:At,STATE_POSSIBLE:fp,STATE_BEGAN:Rn,STATE_CHANGED:ku,STATE_ENDED:La,STATE_RECOGNIZED:No,STATE_CANCELLED:jf,STATE_FAILED:Wi,DIRECTION_NONE:lt,DIRECTION_LEFT:ft,DIRECTION_RIGHT:$,DIRECTION_UP:G,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:Q,DIRECTION_ALL:ut,Manager:uy,Input:it,TouchAction:iy,TouchInput:up,MouseInput:Us,PointerEventInput:ey,TouchMouseInput:ry,SingleTouchInput:Ak,Recognizer:Fo,AttrRecognizer:ai,Tap:pp,Pan:dp,Swipe:ly,Pinch:oy,Rotate:sy,Press:ay,on:S,off:P,each:d,merge:m,extend:g,assign:v,inherit:_,bindFn:y,prefixed:z});var pj=typeof t<"u"?t:typeof self<"u"?self:{};pj.Hammer=Bo,typeof i=="function"&&i.amd?i(function(){return Bo}):e.exports?e.exports=Bo:t[n]=Bo})(window,document,"Hammer")})(Af);const _wt=Af.exports,Qi=vj({__proto__:null,default:_wt},[Af.exports]),nV=1,iV=2,rT=4,ywt={mousedown:nV,mousemove:iV,mouseup:rT};function bwt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function wwt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(bwt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function Swt(e){e.prototype.handler=function(r){let n=ywt[r.type];n&nV&&r.button>=0&&(this.pressed=!0),n&iV&&r.which===0&&(n=rT),this.pressed&&(n&rT&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}wwt(Af.exports.PointerEventInput);Swt(Af.exports.MouseInput);const Twt=Af.exports.Manager;class x_{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const Pwt=Qi?[[Qi.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[Qi.Rotate,{enable:!1}],[Qi.Pinch,{enable:!1}],[Qi.Swipe,{enable:!1}],[Qi.Pan,{threshold:0,enable:!1}],[Qi.Press,{enable:!1}],[Qi.Tap,{event:"doubletap",taps:2,enable:!1}],[Qi.Tap,{event:"anytap",enable:!1}],[Qi.Tap,{enable:!1}]]:null,UL={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},Ewt={doubletap:["tap"]},Awt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},pA={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},kwt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},GL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},Cwt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",Sc=typeof window<"u"?window:global;let nT=!1;try{const e={get passive(){return nT=!0,!0}};Sc.addEventListener("test",null,e),Sc.removeEventListener("test",null)}catch{nT=!1}const Mwt=Cwt.indexOf("firefox")!==-1,{WHEEL_EVENTS:xwt}=pA,jL="wheel",WL=4.000244140625,Lwt=40,Iwt=.25;class Owt extends x_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;Sc.WheelEvent&&(Mwt&&i.deltaMode===Sc.WheelEvent.DOM_DELTA_PIXEL&&(o/=Sc.devicePixelRatio),i.deltaMode===Sc.WheelEvent.DOM_DELTA_LINE&&(o*=Lwt)),o!==0&&o%WL===0&&(o=Math.floor(o/WL)),i.shiftKey&&o&&(o=o*Iwt),this.callback({type:jL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(xwt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,nT?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===jL&&(this.options.enable=r)}}const{MOUSE_EVENTS:Rwt}=pA,HL="pointermove",XL="pointerover",YL="pointerout",qL="pointerenter",ZL="pointerleave";class Dwt extends x_{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(Rwt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===HL&&(this.enableMoveEvent=r),t===XL&&(this.enableOverEvent=r),t===YL&&(this.enableOutEvent=r),t===qL&&(this.enableEnterEvent=r),t===ZL&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(XL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(YL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(qL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(ZL,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(HL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:Nwt}=pA,KL="keydown",JL="keyup";class Fwt extends x_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:KL,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:JL,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(Nwt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===KL&&(this.enableDownEvent=r),t===JL&&(this.enableUpEvent=r)}}const QL="contextmenu";class Bwt extends x_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:QL,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===QL&&(this.options.enable=r)}}const iT=1,h1=2,oT=4,$wt={pointerdown:iT,pointermove:h1,pointerup:oT,mousedown:iT,mousemove:h1,mouseup:oT},zwt=1,Vwt=2,Uwt=3,Gwt=0,jwt=1,Wwt=2,Hwt=1,Xwt=2,Ywt=4;function qwt(e){const t=$wt[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,a=!1,s=!1;return t===oT||t===h1&&!Number.isFinite(r)?(o=i===zwt,a=i===Vwt,s=i===Uwt):t===h1?(o=Boolean(r&Hwt),a=Boolean(r&Ywt),s=Boolean(r&Xwt)):t===iT&&(o=n===Gwt,a=n===jwt,s=n===Wwt),{leftButton:o,middleButton:a,rightButton:s}}function Zwt(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,a={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:a}}const Ab={srcElement:"root",priority:0};class Kwt{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:a,handlersByElement:s}=this;let l=Ab;typeof n=="string"||n&&n.addEventListener?l={...Ab,srcElement:n}:n&&(l={...Ab,...n});let u=s.get(l.srcElement);u||(u=[],s.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type===t&&a.handler===r){n.splice(o,1);const s=i.get(a.srcElement);s.splice(s.indexOf(a),1),s.length===0&&i.delete(a.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},a=()=>{t.handled=!0,i=!0},s=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:a}),f&&s.push(n[l]),i)break}for(let l=0;l<s.length;l++){const{type:u,handler:c}=s[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...qwt(t),...Zwt(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const Jwt={events:null,recognizers:null,recognizerOptions:{},Manager:Twt,touchAction:"none",tabIndex:0};class Qwt{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,a=Awt[o.type];a&&this.manager.emit(a,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...Jwt,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||Pwt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(UL).forEach(i=>{const o=this.manager.get(i);o&&UL[i].forEach(a=>{o.recognizeWith(a)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const a=r.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new Owt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new Dwt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new Fwt(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new Bwt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=Ewt[t];o&&!this.options.recognizers&&o.forEach(a=>{const s=n.get(a);r?(s.requireFailure(t),i.dropRequireFailure(a)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:a,events:s}=this,l=GL[t]||t;let u=s.get(l);u||(u=new Kwt(this),s.set(l,u),u.recognizerName=kwt[l]||l,a&&a.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:n}=this,i=GL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:a}=o;let s=!1;for(const l of n.values())if(l.recognizerName===a&&!l.isEmpty()){s=!0;break}s||this._toggleRecognizer(a,!1)}}}function ml(){}const tSt=({isDragging:e})=>e?"grabbing":"grab",oV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:ml,onResize:ml,onViewStateChange:ml,onInteractionStateChange:ml,onBeforeRender:ml,onAfterRender:ml,onLoad:ml,onError:e=>Wt.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:tSt,getTooltip:null,debug:!1,drawPickingColors:!1};class vA{constructor(t){E(this,"props",void 0),E(this,"width",0),E(this,"height",0),E(this,"userData",{}),E(this,"canvas",null),E(this,"viewManager",null),E(this,"layerManager",null),E(this,"effectManager",null),E(this,"deckRenderer",null),E(this,"deckPicker",null),E(this,"eventManager",null),E(this,"tooltip",null),E(this,"metrics",void 0),E(this,"animationLoop",void 0),E(this,"stats",void 0),E(this,"viewState",void 0),E(this,"cursorState",void 0),E(this,"_needsRedraw",void 0),E(this,"_pickRequest",void 0),E(this,"_lastPointerDownInfo",null),E(this,"_metricsCounter",void 0),E(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),E(this,"_onEvent",r=>{const n=CL[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=a,l=s&&(s[n.handler]||s.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(s,a,r)),!c&&u&&u(a,r)}),E(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...oV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Wt.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),A$()==="IE"&&Wt.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new w_({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&ef.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,a,s;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Wt.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Wt.removed("onLayerClick","onClick")(),t.initialViewState&&!Ef(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||a,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return ur(this.viewManager),this.viewManager.views}getViewports(t){return ur(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){ur(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),ur(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:a,onError:s,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new _1t({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>H$({...o,...f,canvas:this.canvas,debug:a,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new Qz({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,a=!1;for(const s of n){var r;o=s,a=((r=s.layer)===null||r===void 0?void 0:r.onHover(s,t.event))||a}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const s=this.props.getTooltip(o);this.tooltip.setTooltip(s,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,JE(t,{enable:!0,copyState:!0})),this.tooltip=new mwt(this.canvas),ga(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new Nz;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new Qwt(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in CL)this.eventManager.on(i,this._onEvent);this.viewManager=new Rbt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new Obt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new iwt,this.deckRenderer=new uwt(t),this.deckPicker=new vwt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;ga(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Wt.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Ol.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}E(vA,"defaultProps",oV);E(vA,"VERSION",Evt.VERSION);class kb{constructor(t,r){E(this,"opts",void 0),E(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const a=r.elementOffset||0;for(let s=0;s<i;++s)o[s]=n[a+s]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function eSt(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function nm(e){return e.stride||e.size*e.bytesPerElement}function aV(e,t){t.offset&&Wt.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=nm(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function rSt(e,t){const r=aV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class nSt{constructor(t,r,n){E(this,"gl",void 0),E(this,"id",void 0),E(this,"size",void 0),E(this,"settings",void 0),E(this,"value",void 0),E(this,"doublePrecision",void 0),E(this,"_buffer",void 0),E(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:a}=r;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let s;o?s=5126:!i&&r.isIndexed?s=t&&qgt(t,Be.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;let l=eSt(i||s||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:a,logicalType:i,type:s,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Pe(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*nm(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),ef.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=rSt(this.getAccessor(),r||{});return n[t]=new kb(this,o.high),n["".concat(t,"64Low")]=i?new kb(this,o.low):new Float32Array(this.size),n}if(r){const n=aV(this.getAccessor(),r);return{[t]:new kb(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Pe?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const a=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(a?2:1),i.stride=nm(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=nm(i);const{buffer:a,byteOffset:s}=this;this.doublePrecision&&o instanceof Float64Array&&(o=Pb(o,i));const l=o.byteLength+s+i.stride*2;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:o,offset:s}),i.type=n.type||a.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?Pb(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=ef.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:s}=this;return a.byteLength<o.byteLength+s&&(a.reallocate(o.byteLength+s),r&&i&&a.subData({data:i instanceof Float64Array?Pb(i,this):i,offset:s})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&Wt.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let a=o;for(;--a>=0;)r[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const tI=[],eI=[];function L_(e,t=0,r=1/0){let n=tI;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(eI.length=e.length,n=eI):n=tI,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function sV(e){return e&&e[Symbol.asyncIterator]}function lV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=n?n/s:r,u=i?i/s:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const m=h*l+u;for(let _=0;_<r;_++)d[_]=e[m+_];return d}const p=o[h],v=o[h+1]||c;let g;if(a){g=new Array(v-p);for(let m=p;m<v;m++){const _=m*l+u;d=new Array(r);for(let y=0;y<r;y++)d[y]=e[_+y];g[m-p]=d}}else if(l===r)g=e.subarray(p*r+u,v*r+u);else{g=new e.constructor((v-p)*r);let m=0;for(let _=p;_<v;_++){const y=_*l+u;for(let w=0;w<r;w++)g[m++]=e[y+w]}}return g}}const iSt=[],im=[[0,1/0]];function oSt(e,t){if(e===im||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const a=e[o];a[1]<t[0]?(r.push(a),i=o+1):a[0]>t[1]?r.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return r.splice(i,0,t),r}function Cb(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,a=e.end||r.length,s=t.length,l=a-n;if(s>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=s;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function aSt({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return Cb({source:e,target:t,size:r,getData:n}),t;let a=0,s=0;const l=n&&((c,f)=>n(c+s,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;Cb({source:e.subarray(a,f),target:t,start:s,end:h,size:r,getData:l}),a=f,s=h}return s<t.length&&Cb({source:[],target:t,start:s,size:r,getData:l}),t}const sSt={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function uV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...sSt[r],...t,...e,type:r}}function cV(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function fV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function hV(e){e.push(e.shift())}function gA(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,a=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*a}function dV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=a=>a}){const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,s=r.size*a,l=r.byteOffset,u=r.startIndices,c=i&&u,f=gA(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const m=o;o=(_,y)=>r.normalizeConstant(m(_,y))}const p=h?(m,_)=>o(d,_):(m,_)=>o(d.subarray(m,m+s),_),v=e.getData({length:n}),g=new Float32Array(f);aSt({source:v,target:g,sourceStartIndices:i,targetStartIndices:u,size:s,getData:p}),e.byteLength<g.byteLength+l&&e.reallocate(g.byteLength+l),e.subData({data:g,offset:l})}class mA extends nSt{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:im}),E(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return uV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=oSt(this.state.updateRanges,[n,i])}else this.state.updateRanges=im}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=iSt}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==im),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[u,c]of o)a.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;ur(ArrayBuffer.isView(a.value),"invalid ".concat(i.accessor));const s=Boolean(a.size)&&a.size!==this.size;return n.binaryAccessor=lV(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:a}){if(t.constant)return;const{settings:s,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=s,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);ur(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:g,objectInfo:m}=L_(r,n,i);for(const _ of g){m.index++;let y=p(_,m);if(d&&(y=d.call(this,y)),f){const w=(m.index<f.length-1?f[m.index+1]:a)-f[m.index];if(y&&Array.isArray(y[0])){let T=v;for(const S of y)t._normalizeValue(S,u,T),T+=c}else y&&y.length>c?u.set(y,v):(t._normalizeValue(y,m.target,0),Cbt({target:u,source:m.target,start:v,count:w}));v+=w*c}else t._normalizeValue(y,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class lSt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","interpolation"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.transition=new q0(n),this.attribute=r,this.attributeInTransition=new mA(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=cSt(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;hV(i);const a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)dV({buffer:s,...a});this.currentStartIndices=o.startIndices,this.currentLength=gA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:cV(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const uSt=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function cSt(e,t){const r=fV(t.size);return new cA(e,{vs:uSt,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class fSt{constructor({gl:t,attribute:r,timeline:n}){E(this,"gl",void 0),E(this,"type","spring"),E(this,"attributeInTransition",void 0),E(this,"settings",void 0),E(this,"attribute",void 0),E(this,"transition",void 0),E(this,"currentStartIndices",void 0),E(this,"currentLength",void 0),E(this,"texture",void 0),E(this,"framebuffer",void 0),E(this,"transform",void 0),E(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new q0(n),this.attribute=r,this.attributeInTransition=new mA(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=dSt(t),this.framebuffer=pSt(t,this.texture),this.transform=hSt(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Pe(t,i),new Pe(t,i),new Pe(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)dV({buffer:s,...a});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=gA(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:cV(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const a=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.stiffness,damping:a.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),hV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),E_(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function hSt(e,t,r){const n=fV(t.size);return new cA(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function dSt(e){return new gn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function pSt(e,t){return new nr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const vSt={interpolation:lSt,spring:fSt};class gSt{constructor(t,{id:r,timeline:n}){E(this,"id",void 0),E(this,"isSupported",void 0),E(this,"gl",void 0),E(this,"timeline",void 0),E(this,"transitions",void 0),E(this,"needsRedraw",void 0),E(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=cA.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],a=o.getTransitionSetting(r);!a||this._updateAttribute(i,o,a)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){Wt.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const a=vSt[n.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(Wt.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const rI="attributeManager.invalidate",mSt="attributeManager.updateStart",_St="attributeManager.updateEnd",ySt="attribute.updateStart",bSt="attribute.allocate",wSt="attribute.updateEnd";class SSt{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){E(this,"id",void 0),E(this,"gl",void 0),E(this,"attributes",void 0),E(this,"updateTriggers",void 0),E(this,"needsRedraw",void 0),E(this,"userData",void 0),E(this,"stats",void 0),E(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new gSt(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Or(rI,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Or(rI,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:a={},context:s={}}){let l=!1;Or(mSt,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&Wt.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof f=="string"?a[f]:void 0,t.startIndices)||typeof f=="string"&&!a[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&Or(_St,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const a=r[o];a.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=a)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new mA(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(a=>{const s=n[a];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Or(ySt,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Or(bSt,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Or(wSt,r,n))}}class TSt extends q0{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,a=o(t/i);this._value=jl(r,n,a)}}const nI=1e-5;function iI(e,t,r,n,i){const o=t-e,s=(r-t)*i,l=-o*n;return s+l+o+t}function PSt(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let a=0;a<r.length;a++)o[a]=iI(e[a],t[a],r[a],n,i);return o}return iI(e,t,r,n,i)}function oI(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class ESt extends q0{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:a=t}=this;let s=PSt(o,a,r,n,i);const l=oI(s,r),u=oI(s,a);l<nI&&u<nI&&(s=r,this.end()),this._prevValue=a,this._currValue=s}}const ASt={interpolation:TSt,spring:ESt};class kSt{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=uV(i),!i)return;const a=ASt[i.type];if(!a){Wt.error("unsupported transition type '".concat(i.type,"'"))();return}const s=new a(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function CSt(e){const t=_A(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function MSt(e,t){const r=pV({newProps:e,oldProps:t,propTypes:_A(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=LSt(e,t);let i=!1;return n||(i=ISt(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:OSt(e,t),transitionsChanged:xSt(e,t)}}function xSt(e,t){if(!e.transitions)return!1;const r={},n=_A(e);let i=!1;for(const o in e.transitions){const a=n[o],s=a&&a.type;(s==="number"||s==="color"||s==="array")&&aT(e[o],t[o],a)&&(r[o]=!0,i=!0)}return i?r:!1}function pV({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const a=aT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const a=aT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}}return!1}function aT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function LSt(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function ISt(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&aI(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&aI(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function OSt(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function aI(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,pV({oldProps:i,newProps:n,triggerName:r})}function _A(e){const t=e[f1],r=t&&t.constructor;return r?r._propTypes:{}}const RSt="count(): argument not an object",DSt="count(): argument not a container";function NSt(e){if(!BSt(e))throw new Error(RSt);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if(FSt(e))return Object.keys(e).length;throw new Error(DSt)}function FSt(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function BSt(e){return e!==null&&typeof e=="object"}function $St(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const zSt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},sT={};function VSt(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof gn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new gn(r,{...t,parameters:{...zSt,...n,...e.props.textureParameters}});return sT[i.id]=!0,i}function USt(e){!e||!(e instanceof gn)||sT[e.id]&&(e.delete(),delete sT[e.id])}const GSt={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||p0(e)&&(e.length===3||e.length===4)},equal(e,t,r){return Mb(e,t)}},accessor:{validate(e,t){const r=d1(e);return r==="function"||r===d1(t.value)},equal(e,t,r){return typeof t=="function"?!0:Mb(e,t)}},array:{validate(e,t){return t.optional&&!e||p0(e)},equal(e,t,r){return r.compare?Mb(e,t):e===t}},object:{equal(e,t,r){return r.compare?Ef(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>VSt(r,e),release:e=>{USt(e)}}};function Mb(e,t){if(e===t)return!0;if(!p0(e)||!p0(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function jSt(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const a=o==null?void 0:o.deprecatedFor;if(a)n[i]=Array.isArray(a)?a:[a];else{const s=WSt(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function WSt(e,t){switch(d1(t)){case"object":return Sh(e,t);case"array":return Sh(e,{type:"array",value:t,compare:!1});case"boolean":return Sh(e,{type:"boolean",value:t});case"number":return Sh(e,{type:"number",value:t});case"function":return Sh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function Sh(e,t){return"type"in t?{name:e,...GSt[t.type],...t}:"value"in t?{name:e,type:d1(t.value),...t}:{name:e,type:"object",value:t}}function p0(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function d1(e){return p0(e)?"array":e===null?"null":typeof e}function HSt(e,t){const r=vV(e.constructor),n=Object.create(r);n[f1]=e,n[ou]={},n[vs]={};for(let i=0;i<t.length;++i){const o=t[i];for(const a in o)n[a]=o[a]}return Object.freeze(n),n}function vV(e){const t=p1(e,"_mergedDefaultProps");return t||(XSt(e),e._mergedDefaultProps)}function XSt(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=vV(r),i=p1(e,"defaultProps")||{},o=jSt(i),a=YSt(o.defaultProps,n,e),s={...r._propTypes,...o.propTypes};ZSt(a,s);const l={...r._deprecatedProps,...o.deprecatedProps};qSt(a,l),e._mergedDefaultProps=a,e._propTypes=s,e._deprecatedProps=l}function YSt(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=JSt(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function qSt(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])gV(this,o)||(this[o]=n);Wt.deprecated(i,t[r].join("/"))()}})}function ZSt(e,t){const r={},n={};for(const i in t){const o=t[i],{name:a,value:s}=o;o.async&&(r[a]=s,n[a]=KSt(a))}e[Bc]=r,e[ou]={},Object.defineProperties(e,n)}function KSt(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||sV(t)?this[ou][e]=t:this[vs][e]=t},get(){if(this[vs]){if(e in this[vs])return this[vs][e]||this[Bc][e];if(e in this[ou]){const t=this[f1]&&this[f1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[Bc][e]}}return this[Bc][e]}}}function gV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function p1(e,t){return gV(e,t)&&e[t]}function JSt(e){const t=p1(e,"layerName")||p1(e,"componentName");return t||Wt.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let QSt=0;class yA{constructor(...t){E(this,"id",void 0),E(this,"props",void 0),E(this,"count",void 0),this.props=HSt(this,t),this.id=this.props.id,this.count=QSt++}clone(t){const{props:r}=this,n={};for(const i in r[Bc])i in r[vs]?n[i]=r[vs][i]:i in r[ou]&&(n[i]=r[ou][i]);return new this.constructor({...r,...n,...t})}}E(yA,"componentName","Component");E(yA,"defaultProps",{});const t3t=Object.freeze({});class e3t{constructor(t){E(this,"component",void 0),E(this,"onAsyncPropUpdated",void 0),E(this,"asyncProps",void 0),E(this,"oldProps",void 0),E(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||t3t}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[vs]||{},n=t[ou]||t,i=t[Bc]||{};for(const o in r){const a=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(const o in n){const a=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(sV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],a=0;for await(const s of r){const{dataTransform:l}=this.component.props;l?o=l(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class r3t extends e3t{constructor({attributeManager:t,layer:r}){super(r),E(this,"attributeManager",void 0),E(this,"needsRedraw",void 0),E(this,"needsUpdate",void 0),E(this,"subLayers",void 0),E(this,"usesPickingColorCache",void 0),E(this,"changeFlags",void 0),E(this,"viewport",void 0),E(this,"uniformTransitions",void 0),E(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const n3t="layer.changeFlag",i3t="layer.initialize",o3t="layer.update",a3t="layer.finalize",s3t="layer.matched",sI=2**24-1,l3t=Object.freeze([]),u3t=Y0(({oldViewport:e,viewport:t})=>e.equals(t));let to=new Uint8ClampedArray(0);const c3t={data:{type:"data",value:l3t,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:a}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var s;i={...i,fetch:{...(s=i)===null||s===void 0?void 0:s.fetch,signal:o}}}let l=a.contains(e);return!l&&!i&&(a.add({resourceId:e,data:i1(e,n),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):i1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:X0.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:le.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class Io extends yA{constructor(...t){super(...t),E(this,"internalState",null),E(this,"lifecycle",pc.NO_STATE),E(this,"context",void 0),E(this,"state",void 0),E(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){ur(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=Yz(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,a]=jz(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,a]}unproject(t){return ur(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){ur(this.internalState);const n=this.internalState.viewport||this.context.viewport;return kbt(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===le.DEFAULT||t===le.LNGLAT||t===le.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){ur(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:NSt(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=$St(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,a=Number.isInteger(o.highlightedObjectIndex)||o.pickable,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(a!==s&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(s&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!s&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,a;(o=this.context)===null||o===void 0||(a=o.onError)===null||a===void 0||a.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!u3t({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(to.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>sI&&Wt.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),to=ef.allocate(to,r,{size:3,copy:!0,maxCount:Math.max(r,sI)});const i=Math.floor(to.length/3),o=[];for(let a=n;a<i;a++)this.encodePickingColor(a,o),to[a*3+0]=o[0],to[a*3+1]=o[1],to[a*3+2]=o[2]}t.value=to.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==to.buffer&&(n.value=to.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){ur(!this.internalState),ur(Number.isFinite(this.props.coordinateSystem)),Or(i3t,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new r3t({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Wt.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new kSt(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Or(s3t,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Or(o3t,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,a=this._updateUniformTransition();i.propsInTransition=a,n.viewport=i.viewport||o,this.props=a;try{const s=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(s);else try{this.updateState(s)}catch{}for(const c of this.props.extensions)c.updateState.call(this,s,c);const u=this.getModels()[0]!==l[0];this._postUpdate(s,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Or(a3t,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,l=s&&s(r)||[0,0];ga(o.gl,{polygonOffset:l}),ti(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const a=t[i],s=r[i];a&&Array.isArray(s)&&(r.dataChanged=Array.isArray(a)?s.concat(a):a,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Or(n3t,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=MSt(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){CSt(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new SSt(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:l}=n;if(r||i.autoHighlight!==a||i.highlightedObjectIndex!==s||i.highlightColor!==l){const u={};a||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(s)&&(u.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}E(Io,"defaultProps",c3t);E(Io,"layerName","Layer");const f3t="compositeLayer.renderLayers";class I_ extends Io{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:_,_subLayerProps:y}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:g,fetch:m,operation:_},T=y&&t.id&&y[t.id],S=T&&T.updateTriggers,P=t.id||"sublayer";if(T){const k=this.constructor._propTypes,A=t.type?t.type._propTypes:{};for(const C in T){const M=A[C]||k[C];M&&M.type==="accessor"&&(T[C]=this.getSubLayerAccessor(T[C]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(P),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const k of g){const A=k.getSubLayerProps.call(this,k);A&&Object.assign(w,A,{updateTriggers:Object.assign(w.updateTriggers,A.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=C_(o,Boolean),this.internalState.subLayers=n}Or(f3t,this,i,n);for(const o of n)o.parent=this}}E(I_,"layerName","CompositeLayer");const Mv=Math.PI/180,lI=180/Math.PI,om=6370972,Tc=256;function h3t(){const e=Tc/om,t=Math.PI/180*Tc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class d3t extends Ds{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:a=2,resolution:s=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new Br().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*Mv),c.rotateZ(-n*Mv),c.scale(f/l);const h=Math.atan(.5/u),d=Tc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:h3t(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*a}),E(this,"longitude",void 0),E(this,"latitude",void 0),E(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=s}get projectionMode(){return Ti.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),a=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(a))u=xb(l,[i,s,a,1]);else{const d=xb(l,[i,s,-1,1]),p=xb(l,[i,s,1,1]),v=((n||0)/om+1)*Tc,g=_b(Az([],d,p)),m=_b(d),_=_b(p),y=(4*m*_-(g-m-_)**2)/16,w=4*y/g,T=Math.sqrt(m-w),S=Math.sqrt(Math.max(0,v*v-w)),P=(T-S)/Math.sqrt(g);u=k_t([],d,p,P)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*Mv,a=n*Mv,s=Math.cos(a),l=(i/om+1)*Tc;return[Math.sin(o)*s*l,-Math.cos(o)*s*l,Math.sin(a)*l]}unprojectPosition(t){const[r,n,i]=t,o=kz(t),a=Math.asin(i/o),l=Math.atan2(r,-n)*lI,u=a*lI,c=(o/Tc-1)*om;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function xb(e,t){const r=Pf([],t,e);return uA(r,r,1/r[3]),r}class mV{constructor(t){E(this,"opts",void 0),E(this,"typedArrayManager",void 0),E(this,"indexStarts",[0]),E(this,"vertexStarts",[0]),E(this,"vertexCount",0),E(this,"instanceCount",0),E(this,"attributes",void 0),E(this,"_attributeDefs",void 0),E(this,"data",void 0),E(this,"getGeometry",void 0),E(this,"geometryBuffer",void 0),E(this,"buffers",void 0),E(this,"positionSize",void 0),E(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=ef,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:s,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(ur(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(s))for(const u of s)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?lV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:a}=this;for(const s in o)if(s in i)a.release(n[s]),n[s]=null;else{const l=o[s];l.copy=r,n[s]=a.allocate(n[s],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:s}=L_(i,r,n);for(const l of a){s.index++;const u=o?o(l,s):null;t(u,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!a)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},s,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(a))i=i||a.length/this.positionSize;else if(a instanceof Pe){const f=a.accessor.stride||this.positionSize*4;i=i||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;i=i||a.buffer.byteLength/f}else if(a.value){const f=a.value,h=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},s,l),this.vertexCount=r[r.length-1]}}const p3t=new Uint16Array([0,2,1,0,3,2]),v3t=new Float32Array([0,1,0,0,1,0,1,1]);function g3t(e,t){if(!t)return m3t(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),g=_3t(e,d,v);u[c*3+0]=g[0],u[c*3+1]=g[1],u[c*3+2]=g[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function m3t(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:p3t,texCoords:v3t}}function _3t(e,t,r){return jl(jl(e[0],e[1],r),jl(e[3],e[2],r),t)}const y3t=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,b3t=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,w3t=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(b3t,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),S3t={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:le.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class bA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:y3t,fs:w3t,modules:[yu,bu]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}if(t.bounds!==r.bounds){const a=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(const l in s)a&&a[l]!==s[l]&&i.invalidate(l);this.setState({mesh:s,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const a=T3t(n.color),s=[Math.floor(a[0]*i),Math.floor(a[1]*o)];return n.bitmap={size:{width:i,height:o},uv:a,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return uI(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),g3t(r,this.context.viewport.resolution)}_getModel(t){return t?new ma(t,{...this.getShaders(),id:this.props.id,geometry:new _u({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:a,disablePicking:s}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&s||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:a}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=le;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!uI(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&a===r)return{coordinateConversion:-1,bounds:o};if(i===r&&a===t){const s=Rs([o[0],o[1]]),l=Rs([o[2],o[3]]);return{coordinateConversion:1,bounds:[s[0],s[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}E(bA,"layerName","BitmapLayer");E(bA,"defaultProps",S3t);function T3t(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function uI(e){return Number.isFinite(e[0])}const P3t=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,E3t=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,A3t=1024,k3t=4,cI=()=>{},C3t={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function M3t(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function x3t(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function v0(e){return e&&(e.id||e.url)}function L3t(e,t,r){const n=e.width,i=e.height,o=nz(e,{width:t,height:r});return Wgt(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function fI(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],a=v0(i);e[a]={...i,x:o,y:r}}}function I3t({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const u=e[l],c=v0(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>a&&(fI(r,s,i),n=0,i=o+i+t,o=0,s=[]),s.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return s.length>0&&fI(r,s,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:a,canvasHeight:M3t(o+i+t)}}function O3t(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=L_(e);for(const a of i){o.index++;const s=t(a,o),l=v0(s);if(!s)throw new Error("Icon is missing.");if(!s.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||s.url!==r[l].url)&&(n[l]={...s,source:a,sourceIndex:o.index})}return n}class R3t{constructor(t,{onUpdate:r=cI,onError:n=cI}){E(this,"gl",void 0),E(this,"onUpdate",void 0),E(this,"onError",void 0),E(this,"_loadOptions",null),E(this,"_texture",null),E(this,"_externalTexture",null),E(this,"_mapping",{}),E(this,"_textureParameters",null),E(this,"_pendingCount",0),E(this,"_autoPacking",!1),E(this,"_xOffset",0),E(this,"_yOffset",0),E(this,"_rowHeight",0),E(this,"_buffer",k3t),E(this,"_canvasWidth",A3t),E(this,"_canvasHeight",0),E(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?v0(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var a;(a=this._texture)===null||a===void 0||a.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(O3t(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:a,rowHeight:s,canvasHeight:l}=I3t({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=i,this._xOffset=o,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=new gn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||C3t})),this._texture.height!==this._canvasHeight&&(this._texture=L3t(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,i1(n.url,z$,this._loadOptions).then(i=>{const o=v0(n),{x:a,y:s,width:l,height:u}=this._mapping[o],c=x3t(r,i,l,u);this._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const _V=[0,0,0,255],D3t={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:_V},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class Z0 extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:P3t,fs:E3t,modules:[yu,bu]})}initializeState(){this.state={iconManager:new R3t(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:_V},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:a,iconMapping:s,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=a||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:a,iconMapping:h?s:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Os[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new _u({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):Wt.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}E(Z0,"defaultProps",D3t);E(Z0,"layerName","IconLayer");const N3t=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,F3t=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,B3t=[0,0,0,255],$3t={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:B3t},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class wA extends Io{getShaders(){return super.getShaders({vs:N3t,fs:F3t,modules:[yu,bu]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:Os[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new _u({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}E(wA,"layerName","LineLayer");E(wA,"defaultProps",$3t);const z3t=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,V3t=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,hI=[0,0,0,255],U3t={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:hI},getLineColor:{type:"accessor",value:hI},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class SA extends Io{getShaders(){return super.getShaders({vs:z3t,fs:V3t,modules:[yu,bu]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:Os[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Os[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new _u({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}E(SA,"defaultProps",U3t);E(SA,"layerName","ScatterplotLayer");const yV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function bV(e,t,r={}){return G3t(e,r)!==t?(W3t(e,r),!0):!1}function G3t(e,t={}){return Math.sign(j3t(e,t))}function j3t(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let a=r,s=n-i;a<n;a+=i)o+=(e[a]-e[s])*(e[a+1]+e[s+1]),s=a;return o/2}function W3t(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const l=r+s*i,u=r+(o-1-s)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Ei(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function lT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function g0(e,t,r,n,i=[]){const o=n+t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return i}function uT(e,t,r,n,i=[]){let o,a;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),a=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),a=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),a=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),a=0;else return null;for(let s=0;s<e.length;s++)i[s]=(a&1)===s?n[a]:o*(t[s]-e[s])+e[s];return i}function am(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function wV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/r;let u=[];const c=[u],f=g0(e,0,r,a);let h,d;const p=TV(f,i,o,[]),v=[];Ei(u,f);for(let g=1;g<l;g++){for(h=g0(e,g,r,a,h),d=am(h,p);d;){uT(f,h,d,p,v);const m=am(v,p);m&&(uT(f,v,m,p,v),d=m),Ei(u,v),lT(f,v),X3t(p,i,d),n&&u.length>r&&(u=[],c.push(u),Ei(u,f)),d=am(h,p)}Ei(u,h),lT(f,h)}return n?c:c[0]}const dI=0,H3t=1;function xv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function SV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=r||{},s=[],l=[{pos:e,types:a?new Array(e.length/n).fill(H3t):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();Y3t(f,n,d[0]||f.length,u),c=TV(u[0],i,o,c);const p=am(u[1],c);if(p){let v=pI(f,h,n,0,d[0]||f.length,c,p);const g={pos:v[0].pos,types:v[0].types,holes:[]},m={pos:v[1].pos,types:v[1].types,holes:[]};l.push(g,m);for(let _=0;_<d.length;_++)v=pI(f,h,n,d[_],d[_+1]||f.length,c,p),v[0]&&(g.holes.push(g.pos.length),g.pos=xv(g.pos,v[0].pos),a&&(g.types=xv(g.types,v[0].types))),v[1]&&(m.holes.push(m.pos.length),m.pos=xv(m.pos,v[1].pos),a&&(m.types=xv(m.types,v[1].types)))}else{const v={positions:f};a&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),s.push(v)}}return s}function pI(e,t,r,n,i,o,a){const s=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const g=g0(e,s-1,r,n);let m=Math.sign(a&8?g[1]-o[3]:g[0]-o[2]),_=t&&t[s-1],y=0,w=0;for(let T=0;T<s;T++)d=g0(e,T,r,n,d),p=Math.sign(a&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&m&&m!==p&&(uT(g,d,a,o,h),Ei(l,h)&&c.push(_),Ei(u,h)&&f.push(_)),p<=0?(Ei(l,d)&&c.push(v),y-=p):c.length&&(c[c.length-1]=dI),p>=0?(Ei(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=dI),lT(g,d),m=p,_=v;return[y?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function TV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function X3t(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function Y3t(e,t,r,n){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return n[0][0]=i,n[0][1]=a,n[1][0]=o,n[1][1]=s,n}const q3t=85.051129;function Z3t(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},a=e.slice(n,i);PV(a,r,0,i-n);const s=wV(a,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)EV(l,r);return s}function K3t(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const a=[],s=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=J3t(e,n,l,h);for(let v=p;v<h;v++)a[u++]=e[v];for(let v=l;v<p;v++)a[u++]=e[v];PV(a,n,d,u),Q3t(a,n,d,u,r==null?void 0:r.maxLatitude),l=h,s[f]=u}s.pop();const c=SV(a,s,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)EV(f.positions,n);return c}function J3t(e,t,r,n){let i=-1,o=-1;for(let a=r+1;a<n;a+=t){const s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function Q3t(e,t,r,n,i=q3t){const o=e[r],a=e[n-t];if(Math.abs(o-a)>180){const s=g0(e,0,t,r);s[0]+=Math.round((a-o)/360)*360,Ei(e,s),s[1]=Math.sign(s[1])*i,Ei(e,s),s[0]=o,Ei(e,s)}}function PV(e,t,r,n){let i=e[0],o;for(let a=r;a<n;a+=t){o=e[a];const s=o-i;(s>180||s<-180)&&(o-=Math.round(s/360)*360),e[a]=i=o}}function EV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function tTt(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let a=0;a<e.length;a++)for(let s=0;s<t;s++)i[a*t+s]=e[a][s]||0}else i=e;return r?wV(i,{size:t,gridResolution:r}):n?Z3t(i,{size:t}):i}const eTt=1,rTt=2,Lb=4;class nTt extends mV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?tTt(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(vI(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&vI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:a}=r;n.fill(0,o,o+a),i?(n[o]=Lb,n[o+a-2]=Lb):(n[o]+=eTt,n[o+a-2]+=rTt),n[o+a-1]=Lb}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,a=new Array(3);for(let s=i,l=0;l<o;s++,l++)this.getPointOnPath(t,l,a),n[s*3]=a[0],n[s*3+1]=a[1],n[s*3+2]=a[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function vI(e){return Array.isArray(e[0])}const iTt=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,oTt=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,AV=[0,0,0,255],aTt={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:AV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Ib={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class TA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:iTt,fs:oTt,modules:[yu,bu]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Ib,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Ib,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Ib,defaultValue:AV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new nTt({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:s}=this.state,l=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var a;const{gl:s}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(s),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Os[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new _u({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}E(TA,"defaultProps",aTt);E(TA,"layerName","PathLayer");var PA={exports:{}};PA.exports=O_;PA.exports.default=O_;function O_(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=kV(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=fTt(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return m0(o,a,r,s,l,d,0),a}function kV(e,t,r,n,i){var o,a;if(i===hT(e,t,r,n)>0)for(o=t;o<r;o+=n)a=gI(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=gI(o,e[o],e[o+1],a);return a&&R_(a,a.next)&&(y0(a),a=a.next),a}function au(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(R_(r,r.next)||Ue(r.prev,r,r.next)===0)){if(y0(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function m0(e,t,r,n,i,o,a){if(!!e){!a&&o&&gTt(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?lTt(e,n,i,o):sTt(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),y0(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=uTt(au(e),t,r),m0(e,t,r,n,i,o,2)):a===2&&cTt(e,t,r,n,i,o):m0(au(e),t,r,n,i,o,1);break}}}}function sTt(e){var t=e.prev,r=e,n=e.next;if(Ue(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&Pc(i,s,o,l,a,u,p.x,p.y)&&Ue(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function lTt(e,t,r,n){var i=e.prev,o=e,a=e.next;if(Ue(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=s>l?s>u?s:u:l>u?l:u,g=c>f?c>h?c:h:f>h?f:h,m=cT(d,p,t,r,n),_=cT(v,g,t,r,n),y=e.prevZ,w=e.nextZ;y&&y.z>=m&&w&&w.z<=_;){if(y.x>=d&&y.x<=v&&y.y>=p&&y.y<=g&&y!==i&&y!==a&&Pc(s,c,l,f,u,h,y.x,y.y)&&Ue(y.prev,y,y.next)>=0||(y=y.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&Pc(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;y&&y.z>=m;){if(y.x>=d&&y.x<=v&&y.y>=p&&y.y<=g&&y!==i&&y!==a&&Pc(s,c,l,f,u,h,y.x,y.y)&&Ue(y.prev,y,y.next)>=0)return!1;y=y.prevZ}for(;w&&w.z<=_;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=g&&w!==i&&w!==a&&Pc(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function uTt(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!R_(i,o)&&CV(i,n,n.next,o)&&_0(i,o)&&_0(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),y0(n),y0(n.next),n=e=o),n=n.next}while(n!==e);return au(n)}function cTt(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&yTt(a,s)){var l=MV(a,s);a=au(a,a.next),l=au(l,l.next),m0(a,t,r,n,i,o,0),m0(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function fTt(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=kV(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(_Tt(u));for(i.sort(hTt),o=0;o<i.length;o++)r=dTt(i[o],r);return r}function hTt(e,t){return e.x-t.x}function dTt(e,t){var r=pTt(e,t);if(!r)return t;var n=MV(r,e);return au(n,n.next),au(r,r.next)}function pTt(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&Pc(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),_0(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&vTt(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function vTt(e,t){return Ue(e.prev,e,t.prev)<0&&Ue(t.next,e,e.next)<0}function gTt(e,t,r,n){var i=e;do i.z===0&&(i.z=cT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,mTt(i)}function mTt(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function cT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function _Tt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Pc(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function yTt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!bTt(e,t)&&(_0(e,t)&&_0(t,e)&&wTt(e,t)&&(Ue(e.prev,e,t.prev)||Ue(e,t.prev,t))||R_(e,t)&&Ue(e.prev,e,e.next)>0&&Ue(t.prev,t,t.next)>0)}function Ue(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function R_(e,t){return e.x===t.x&&e.y===t.y}function CV(e,t,r,n){var i=Iv(Ue(e,t,r)),o=Iv(Ue(e,t,n)),a=Iv(Ue(r,n,e)),s=Iv(Ue(r,n,t));return!!(i!==o&&a!==s||i===0&&Lv(e,r,t)||o===0&&Lv(e,n,t)||a===0&&Lv(r,e,n)||s===0&&Lv(r,t,n))}function Lv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Iv(e){return e>0?1:e<0?-1:0}function bTt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&CV(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function _0(e,t){return Ue(e.prev,e,e.next)<0?Ue(e,t,e.next)>=0&&Ue(e,e.prev,t)>=0:Ue(e,t,e.prev)<0||Ue(e,e.next,t)<0}function wTt(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function MV(e,t){var r=new fT(e.i,e.x,e.y),n=new fT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function gI(e,t,r,n){var i=new fT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function y0(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function fT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}O_.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(hT(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(hT(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function hT(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}O_.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Ov=yV.CLOCKWISE,mI=yV.COUNTER_CLOCKWISE,gs={isClosed:!0};function STt(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function rd(e){return"positions"in e?e.positions:e}function sm(e){return"holeIndices"in e?e.holeIndices:null}function TTt(e){return Array.isArray(e[0])}function PTt(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function ETt(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function ATt(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function _I(e,t,r,n,i){let o=t;const a=r.length;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e[o++]=r[s][l]||0;if(!ETt(r))for(let s=0;s<n;s++)e[o++]=r[0][s]||0;return gs.start=t,gs.end=o,gs.size=n,bV(e,i,gs),o}function yI(e,t,r,n,i=0,o,a){o=o||r.length;const s=o-i;if(s<=0)return t;let l=t;for(let u=0;u<s;u++)e[l++]=r[i+u];if(!ATt(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return gs.start=t,gs.end=l,gs.size=n,bV(e,a,gs),l}function kTt(e,t){STt(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let a=0;for(let s=0;s<=o.length;s++)a=yI(r,a,i,t,o[s-1],o[s],s===0?Ov:mI),n.push(a);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!TTt(e))return yI(r,0,e,t,0,r.length,Ov),r;if(!PTt(e)){let i=0;for(const[o,a]of e.entries())i=_I(r,i,a,t,o===0?Ov:mI),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return _I(r,0,e,t,Ov),r}function CTt(e,t,r){let n=sm(e);n&&(n=n.map(o=>o/t));let i=rd(e);if(r){const o=i.length;i=i.slice();const a=[];for(let s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];const l=r(a);i[s]=l[0],i[s+1]=l[1]}}return PA.exports(i,n,t)}class MTt extends mV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=kTt(t,this.positionSize);return this.opts.resolution?SV(rd(r),sm(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?K3t(rd(r),sm(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(bI(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return rd(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&bI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=CTt(t,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;a[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=rd(t);for(let s=r,l=0;l<n;s++,l++){const u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[s*3]=u,i[s*3+1]=c,i[s*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&sm(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),a)for(let s=0;s<a.length;s++)o[r+a[s]/i-1]=0;o[r+n-1]=0}}function bI(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const xV=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,xTt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(xV,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),LTt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(xV,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),ITt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,v1=[0,0,0,255],OTt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:v1},getLineColor:{type:"accessor",value:v1},material:!0},Rv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class EA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?xTt:LTt,fs:ITt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[yu,Gyt,bu]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===le.DEFAULT&&(n=le.LNGLAT),this.setState({numInstances:0,polygonTesselator:new MTt({preproject:n===le.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||eA(t,Be.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Rv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Rv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Rv,accessor:"getFillColor",defaultValue:v1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Rv,accessor:"getLineColor",defaultValue:v1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(a,{index:s,target:l})=>this.encodePickingColor(a&&a.__source?a.__source.index:s,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(u),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var s;(s=this.state.models)===null||s===void 0||s.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,a;if(n){const s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,o=new ma(t,{...s,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(a=new ma(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new _u({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),a.userData.excludeAttributes={indices:!0}),{models:[a,o].filter(Boolean),topModel:o,sideModel:a}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}E(EA,"defaultProps",OTt);E(EA,"layerName","SolidPolygonLayer");function RTt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,a=e.length;let s=a,l=a;for(let h=0;h<a;h++){const d=t(e[h]);if(s>h&&d>=i&&(s=h),d>=o){l=h;break}}let u=s;const f=l-s!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:s,endRow:s+n.length}}function DTt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?NTt(e,n,r):null}function NTt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function FTt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let a=0;a<i.length;a++)t(i[a],o),r[n][a*3+0]=o[0],r[n][a*3+1]=o[1],r[n][a*3+2]=o[2]}return r}const BTt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,wI=192/256,SI=[],$Tt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class AA extends Z0{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:BTt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&Wt.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:wI,outlineBuffer:i?Math.max(n,wI*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):SI}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):SI}}E(AA,"defaultProps",$Tt);E(AA,"layerName","MultiIconLayer");var kA={exports:{}};kA.exports=K0;kA.exports.default=K0;var $c=1e20;function K0(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,s=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function zTt(e,t,r,n,i,o,a){o.fill($c,0,t*r),a.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,a[c]=$c;else if(f===0)o[c]=$c,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}function VTt(e,t,r,n,i,o,a){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}K0.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,a,s,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=a+i,s=l+i,this.ctx.textBaseline="alphabetic"):(o=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,a,l));var p=new Uint8ClampedArray(o*s);return zTt(d,o,s,a,l,this.gridOuter,this.gridInner),TI(this.gridOuter,o,s,this.f,this.v,this.z),TI(this.gridInner,o,s,this.f,this.v,this.z),VTt(p,o,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:l,sdfWidth:o,sdfHeight:s,top:u,left:0,advance:n}}};K0.prototype.draw=function(e){return this._draw(e,!1).data};K0.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function TI(e,t,r,n,i,o){for(var a=0;a<t;a++)PI(e,a,t,r,n,i,o);for(var s=0;s<r;s++)PI(e,s*t,1,t,n,i,o)}function PI(e,t,r,n,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-$c,a[1]=$c,s=0;s<n;s++)i[s]=e[t+s*r];for(s=1,l=0,u=0;s<n;s++){do c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2;while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=$c}for(s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*r]=i[c]+(s-c)*(s-c)}}const UTt=32,GTt=[];function jTt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function WTt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,u=a;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:s+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:s+l*c,canvasHeight:jTt(s+(l+1)*c)}}function LV(e,t,r,n){let i=0;for(let a=t;a<r;a++){var o;const s=e[a];i+=((o=n[s])===null||o===void 0?void 0:o.width)||0}return i}function IV(e,t,r,n,i,o){let a=t,s=0;for(let l=t;l<r;l++){const u=LV(e,l,l+1,i);s+u>n&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function HTt(e,t,r,n,i,o){let a=t,s=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>s){let f=LV(e,s,l,i);u+f>n&&(a<s&&(o.push(s),a=s,u=0),f>n&&(f=IV(e,s,l,n,i,o),a=o[o.length-1])),s=l,u+=f}return u}function XTt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const a=[];return t==="break-all"?IV(e,i,o,r,n,a):HTt(e,i,o,r,n,a),a}function YTt(e,t,r,n,i,o){let a=0,s=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(Wt.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=UTt)}o[0]=a,o[1]=s}function EI(e,t,r,n,i){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let g=0;g<=a;g++){const m=o[g];if((m===`
`||g===a)&&(v=g),v>p){const _=c?XTt(o,r,n,i,p,v):GTt;for(let y=0;y<=_.length;y++){const w=y===0?p:_[y-1],T=y<_.length?_[y]:v;YTt(o,w,T,i,s,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}m===`
`&&(s[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:s,y:l,rowWidth:u,size:f}}function qTt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=r?r/a:1,l=n?n/a:0,u=i[t]||Math.ceil((e.length-l)/s),c=o&&new Set,f=new Array(t);let h=e;if(s>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*s+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,g=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,g),c&&g.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class OV{constructor(t=5){E(this,"limit",void 0),E(this,"_cache",{}),E(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function ZTt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Od={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:ZTt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},AI=1024,KTt=.9,kI=1.2,RV=3;let g1=new OV(RV);function JTt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=g1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function QTt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function CI(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function tPt(e){Wt.assert(Number.isFinite(e)&&e>=RV,"Invalid cache limit"),g1=new OV(e)}class ePt{constructor(){E(this,"props",{...Od}),E(this,"_key",void 0),E(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return kI}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=JTt(this._key,this.props.characterSet),i=g1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,g1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:a,buffer:s,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=AI);const h=f.getContext("2d");CI(h,i,a,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:g}=WTt({getFontWidth:m=>h.measureText(m).width,fontHeight:a*kI,buffer:s,characterSet:r,maxCanvasWidth:AI,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const m=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(m,0,0)}if(CI(h,i,a,o),l){const m=new kA.exports(a,s,u,c,i,o),_=h.getImageData(0,0,m.size,m.size);for(const y of r)QTt(m.draw(y),_),h.putImageData(_,d[y].x-s,d[y].y+s)}else for(const m of r)h.fillText(m,d[m].x,d[m].y+a*KTt);return{xOffset:v,yOffset:g,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:a,cutoff:s}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const rPt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,nPt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,iPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class CA extends Io{constructor(...t){super(...t),E(this,"state",void 0)}getShaders(){return super.getShaders({vs:rPt,fs:nPt,modules:[yu,bu]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(s),padding:l,sizeUnits:Os[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new ma(t,{...this.getShaders(),id:this.props.id,geometry:new _u({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}E(CA,"defaultProps",iPt);E(CA,"layerName","TextBackgroundLayer");const MI={start:1,middle:0,end:-1},xI={top:1,center:0,bottom:-1},Ob=[0,0,0,255],oPt=1,aPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Ob},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Od.characterSet},fontFamily:Od.fontFamily,fontWeight:Od.fontWeight,lineHeight:oPt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Ob},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Ob},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class MA extends I_{constructor(...t){super(...t),E(this,"state",void 0),E(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=EI(f,l,a,s,i),p=MI[typeof u=="function"?u(r,n):u],v=xI[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),E(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,g]}=EI(f,l,a,s,i),m=MI[typeof u=="function"?u(r,n):u],_=xI[typeof c=="function"?c(r,n):c],y=h.length,w=new Array(y*2);let T=0;for(let S=0;S<y;S++){const P=(1-m)*(v-p[S])/2;w[T++]=(m-1)*v/2+P+h[S],w[T++]=(_-1)*g/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new ePt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,a={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(a),!0;for(const s in a)if(a[s]!==i.props[s])return i.setProps(a),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,a=r.startIndices,s;const l=n==="auto"&&new Set;if(i&&a){const{texts:u,characterCount:c}=qTt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:a,characterSet:l});s=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=L_(r);a=[0],s=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),s+=h.length,a.push(s)}}this.setState({getText:o,startIndices:a,numInstances:s,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:a},styleVersion:s}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:g,getBorderWidth:m,backgroundPadding:_,background:y,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:P,sizeScale:k,sizeUnits:A,sizeMinPixels:C,sizeMaxPixels:M,transitions:D,updateTriggers:B}=this.props,z=this.getSubLayerClass("characters",AA),N=this.getSubLayerClass("background",CA);return[y&&new N({getFillColor:v,getLineColor:g,getLineWidth:m,padding:_,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:k/this.state.fontAtlasManager.props.fontSize,sizeUnits:A,sizeMinPixels:C,sizeMaxPixels:M,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getSize:D.getSize,getFillColor:D.getBackgroundColor,getLineColor:D.getBorderColor,getLineWidth:D.getBorderWidth,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:B.getPosition,getAngle:B.getAngle,getSize:B.getSize,getFillColor:B.getBackgroundColor,getLineColor:B.getBorderColor,getLineWidth:B.getBorderWidth,getPixelOffset:B.getPixelOffset,getBoundingRect:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new z({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Od.smoothing,outlineWidth:S,outlineColor:P,iconAtlas:o,iconMapping:a,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:k*i,sizeUnits:A,sizeMinPixels:C*i,sizeMaxPixels:M*i,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getColor:D.getColor,getSize:D.getSize,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:B.getText,getPosition:B.getPosition,getAngle:B.getAngle,getColor:B.getColor,getSize:B.getSize,getPixelOffset:B.getPixelOffset,getIconOffsets:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){tPt(t)}}E(MA,"defaultProps",aPt);E(MA,"layerName","TextLayer");const lm={circle:{type:SA,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Z0,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:MA,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},um={type:TA,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},dT={type:EA,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Th({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function Rb(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),i.updateTriggers[a]=n[o],r&&(i.transitions[a]=r[o])),i[a]=s}return i}function sPt(e){if(Array.isArray(e))return e;switch(Wt.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Wt.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function LI(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let a=i;a<o;a++){const s=e[a];Wt.assert(s&&s.geometry,"GeoJSON does not have geometry");const{geometry:l}=s;if(l.type==="GeometryCollection"){Wt.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];II(f,n,t,s,a)}}else II(l,n,t,s,a)}return n}function II(e,t,r,n,i){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!uPt(o,a)){Wt.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":a.forEach(f=>{s.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":a.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),a.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":a.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const lPt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function uPt(e,t){let r=lPt[e];for(Wt.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function DV(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Dv(e){return e.geometry.coordinates}function cPt(e,t){const r=DV(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=Dv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=Dv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=Dv,r.polygonsOutline.data=a,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=Dv,r}function fPt(e,t){const r=DV(),{points:n,lines:i,polygons:o}=e,a=FTt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:a.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const hPt=["points","linestrings","polygons"],dPt={...Th(lm.circle),...Th(lm.icon),...Th(lm.text),...Th(um),...Th(dT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class xA extends I_{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=fPt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=sPt(t.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),a[u]=[];for(const u of r.dataChanged){const c=LI(n,i,u);for(const f in l)a[f].push(RTt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=LI(n,i);const s=cPt(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=hPt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,dT.type);if(o){const a=Rb(this,dT.props),s=t&&r;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",a=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,um.type),s=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,um.type);if(a||s){const l=Rb(this,um.props);return[a&&new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),s&&new s(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(s=>s.__source.index===i));const o=new Set(t.split("+")),a=[];for(const s of o){const l="points-".concat(s),u=lm[s],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=Rb(this,u.props);let h=r.points;if(s==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}a.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return a}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:a}=i,s=DTt(o,a);return t(s,i)}}}E(xA,"layerName","GeoJsonLayer");E(xA,"defaultProps",dPt);class pPt{constructor(t){E(this,"index",void 0),E(this,"isVisible",void 0),E(this,"isSelected",void 0),E(this,"parent",void 0),E(this,"children",void 0),E(this,"content",void 0),E(this,"state",void 0),E(this,"layers",void 0),E(this,"id",void 0),E(this,"bbox",void 0),E(this,"zoom",void 0),E(this,"userData",void 0),E(this,"_abortController",void 0),E(this,"_loader",void 0),E(this,"_loaderId",void 0),E(this,"_isLoaded",void 0),E(this,"_isCancelled",void 0),E(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||Wt.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:a,bbox:s,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:a,bbox:s,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Rr={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},OI=new bt,vPt=new bt;class LA{constructor(t=[0,0,0],r=[0,0,0],n){E(this,"center",void 0),E(this,"halfDiagonal",void 0),E(this,"minimum",void 0),E(this,"maximum",void 0),n=n||OI.copy(t).add(r).scale(.5),this.center=new bt(n),this.halfDiagonal=new bt(r).subtract(this.center),this.minimum=new bt(t),this.maximum=new bt(r)}clone(){return new LA(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=vPt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Rr.INSIDE:o+i<0?Rr.OUTSIDE:Rr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=OI.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Ph=new bt,RI=new bt;class IA{constructor(t=[0,0,0],r=0){E(this,"center",void 0),E(this,"radius",void 0),this.radius=-0,this.center=new bt,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Ph.from(r),this.center=new bt().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new IA(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,a=Ph.copy(i).subtract(r),s=a.magnitude();if(n>=s+o)return this.clone();if(o>=s+n)return t.clone();const l=(n+s+o)*.5;return RI.copy(a).scale((-n+l)/s).add(r),this.center.copy(RI),this.radius=l,this}expand(t){const n=Ph.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=X_t(Ph,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Ph.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Rr.OUTSIDE:o<n?Rr.INTERSECTING:Rr.INSIDE}}const gPt=new bt,mPt=new bt,Nv=new bt,Fv=new bt,Bv=new bt,_Pt=new bt,yPt=new bt,jo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class OA{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){E(this,"center",void 0),E(this,"halfAxes",void 0),this.center=new bt().from(t),this.halfAxes=new Tr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new bt(t).len(),new bt(r).len(),new bt(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new bt(t).normalize(),o=new bt(r).normalize(),a=new bt(n).normalize();return new TL().fromMatrix3(new Tr([...i,...o,...a]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new TL(n),o=new Tr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new bt().from(t),this.halfAxes=o,this}clone(){return new OA(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new IA){const r=this.halfAxes,n=r.getColumn(0,Nv),i=r.getColumn(1,Fv),o=r.getColumn(2,Bv),a=gPt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=a.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,l=Math.abs(o*i[jo.COLUMN0ROW0]+a*i[jo.COLUMN0ROW1]+s*i[jo.COLUMN0ROW2])+Math.abs(o*i[jo.COLUMN1ROW0]+a*i[jo.COLUMN1ROW1]+s*i[jo.COLUMN1ROW2])+Math.abs(o*i[jo.COLUMN2ROW0]+a*i[jo.COLUMN2ROW1]+s*i[jo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Rr.OUTSIDE:u>=l?Rr.INSIDE:Rr.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=mPt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Nv),o=n.getColumn(1,Fv),a=n.getColumn(2,Bv),s=i.magnitude(),l=o.magnitude(),u=a.magnitude();i.normalize(),o.normalize(),a.normalize();let c=0,f;return f=Math.abs(r.dot(i))-s,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(a))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=this.center,s=this.halfAxes,l=s.getColumn(0,Nv),u=s.getColumn(1,Fv),c=s.getColumn(2,Bv),f=_Pt.copy(l).add(u).add(c).add(a),h=yPt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Nv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,Fv);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Bv);return i.transformAsPoint(t),this.halfAxes=new Tr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const DI=new bt,NI=new bt;class rf{constructor(t=[0,0,1],r=0){E(this,"normal",void 0),E(this,"distance",void 0),this.normal=new bt,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return h0(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=DI.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),h0(To(this.normal.len(),1)),this.distance=i,this}clone(){return new rf(this.normal,this.distance)}equals(t){return To(this.distance,t.distance)&&To(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=NI.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=DI.from(t);const n=this.getPointDistance(t),i=NI.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const FI=[new bt([1,0,0]),new bt([0,1,0]),new bt([0,0,1])],BI=new bt,bPt=new bt;new rf(new bt(1,0,0),0);class oa{constructor(t=[]){E(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*FI.length;const r=t.center,n=t.radius;let i=0;for(const o of FI){let a=this.planes[i],s=this.planes[i+1];a||(a=this.planes[i]=new rf),s||(s=this.planes[i+1]=new rf);const l=BI.copy(o).scale(-n).add(r);-o.dot(l),a.fromPointNormal(l,o);const u=BI.copy(o).scale(n).add(r),c=bPt.copy(o).negate();-c.dot(u),s.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Rr.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Rr.OUTSIDE:return Rr.OUTSIDE;case Rr.INTERSECTING:r=Rr.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(h0(Number.isFinite(r),"parentPlaneMask is required."),r===oa.MASK_OUTSIDE||r===oa.MASK_INSIDE)return r;let n=oa.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&(r&a)===0)continue;const s=i[o],l=t.intersectPlane(s);if(l===Rr.OUTSIDE)return oa.MASK_OUTSIDE;l===Rr.INTERSECTING&&(n|=a)}return n}}E(oa,"MASK_OUTSIDE",4294967295);E(oa,"MASK_INSIDE",0);E(oa,"MASK_INDETERMINATE",2147483647);new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;new bt;const co=new Tr,wPt=new Tr,SPt=new Tr,$v=new Tr,$I=new Tr;function TPt(e,t={}){const r=Rz.EPSILON20,n=10;let i=0,o=0;const a=wPt,s=SPt;a.identity(),s.copy(e);const l=r*PPt(s);for(;o<n&&EPt(s)>l;)APt(s,$v),$I.copy($v).transpose(),s.multiplyRight($v),s.multiplyLeft($I),a.multiplyRight($v),++i>2&&(++o,i=0);return t.unitary=a.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}function PPt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const pT=[1,0,0],vT=[2,2,1];function EPt(e){let t=0;for(let r=0;r<3;++r){const n=e[co.getElementIndex(vT[r],pT[r])];t+=2*n*n}return Math.sqrt(t)}function APt(e,t){const r=Rz.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[co.getElementIndex(vT[u],pT[u])]);c>n&&(i=u,n=c)}const o=pT[i],a=vT[i];let s=1,l=0;if(Math.abs(e[co.getElementIndex(a,o)])>r){const u=e[co.getElementIndex(a,a)],c=e[co.getElementIndex(o,o)],f=e[co.getElementIndex(a,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),s=1/Math.sqrt(1+d*d),l=d*s}return Tr.IDENTITY.to(t),t[co.getElementIndex(o,o)]=t[co.getElementIndex(a,a)]=s,t[co.getElementIndex(a,o)]=l,t[co.getElementIndex(o,a)]=-l,t}const Xa=new bt,kPt=new bt,CPt=new bt,MPt=new bt,xPt=new bt,LPt=new Tr,IPt={diagonal:new Tr,unitary:new Tr};function OPt(e,t=new OA){if(!e||e.length===0)return t.halfAxes=new Tr([0,0,0,0,0,0,0,0,0]),t.center=new bt,t;const r=e.length,n=new bt(0,0,0);for(const A of e)n.add(A);const i=1/r;n.multiplyByScalar(i);let o=0,a=0,s=0,l=0,u=0,c=0;for(const A of e){const C=Xa.copy(A).subtract(n);o+=C.x*C.x,a+=C.x*C.y,s+=C.x*C.z,l+=C.y*C.y,u+=C.y*C.z,c+=C.z*C.z}o*=i,a*=i,s*=i,l*=i,u*=i,c*=i;const f=LPt;f[0]=o,f[1]=a,f[2]=s,f[3]=a,f[4]=l,f[5]=u,f[6]=s,f[7]=u,f[8]=c;const{unitary:h}=TPt(f,IPt),d=t.halfAxes.copy(h);let p=d.getColumn(0,CPt),v=d.getColumn(1,MPt),g=d.getColumn(2,xPt),m=-Number.MAX_VALUE,_=-Number.MAX_VALUE,y=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const A of e)Xa.copy(A),m=Math.max(Xa.dot(p),m),_=Math.max(Xa.dot(v),_),y=Math.max(Xa.dot(g),y),w=Math.min(Xa.dot(p),w),T=Math.min(Xa.dot(v),T),S=Math.min(Xa.dot(g),S);p=p.multiplyByScalar(.5*(w+m)),v=v.multiplyByScalar(.5*(T+_)),g=g.multiplyByScalar(.5*(S+y)),t.center.copy(p).add(v).add(g);const P=kPt.set(m-w,_-T,y-S).multiplyByScalar(.5),k=new Tr([P[0],0,0,0,P[1],0,0,0,P[2]]);return t.halfAxes.multiplyRight(k),t}const Ec=512,zI=3,NV=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],FV=NV.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),RPt=FV.concat([[.25,.5],[.75,.5]]);class Ac{constructor(t,r,n){E(this,"x",void 0),E(this,"y",void 0),E(this,"z",void 0),E(this,"childVisible",void 0),E(this,"selected",void 0),E(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new Ac(t,r,n),new Ac(t,r+1,n),new Ac(t+1,r,n),new Ac(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:a,bounds:s,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(s&&!this.insideBounds(s)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<a&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),a=Ec/o;return this.x*a<n&&this.y*a<i&&(this.x+1)*a>t&&(this.y+1)*a>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?RPt:this.z<2?FV:NV,u=[];for(const c of l){const f=gT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return OPt(u)}const i=Math.pow(2,this.z),o=Ec/i,a=this.x*o+r*Ec,s=Ec-(this.y+1)*o;return new LA([a,s,t[0]],[a+o,s+o,t[1]])}}function DPt(e,t,r,n){const i=e instanceof d3t&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new rf(d.clone().negate(),p)),a=new oa(o),s=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*s||0,u=r&&r[1]*s||0,c=e instanceof Co&&e.pitch<=60?t:0;if(n){const[d,p,v,g]=n,m=Rs([d,g]),_=Rs([v,p]);n=[m[0],Ec-m[1],_[0],Ec-_[1]]}const f=new Ac(0,0,0),h={viewport:e,project:i,cullingVolume:a,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Co&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-zI););for(h.offset=1;f.update(h)&&!(++h.offset>zI););}return f.getSelected()}const ya=512,NPt=[-1/0,-1/0,1/0,1/0],FPt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function BV(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function BPt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function $Pt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=BPt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const a=new RegExp("{".concat(o,"}"),"g");i=i.replace(a,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function zPt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,a=e.getBounds({z:i}),s=e.getBounds({z:o});n=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function m1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:a}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+a],u),d=e.unproject([n+o,i+a],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const s=m1({viewport:e,z:t[0],cullRect:r}),l=m1({viewport:e,z:t[1],cullRect:r});return[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}function VPt(e,t,r){return r?BV(e,r).map(i=>i*t/ya):e.map(n=>n*t/ya)}function RA(e,t){return Math.pow(2,e)*ya/t}function gT(e,t,r){const n=RA(r,ya),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,a=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,a]}function VI(e,t,r,n){const i=RA(r,n);return[e/i*ya,t/i*ya]}function UPt(e,t,r,n,i=ya){if(e.isGeospatial){const[u,c]=gT(t,r,n),[f,h]=gT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,a]=VI(t,r,n,i),[s,l]=VI(t+1,r+1,n,i);return{left:o,top:a,right:s,bottom:l}}function GPt(e,t,r,n,i){const o=zPt(e,null,n),a=RA(t,r),[s,l,u,c]=VPt(o,a,i),f=[];for(let h=Math.floor(s);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function jPt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=ya,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(ya/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return a&&s&&i&&!e.isGeospatial&&(c=BV(i,a)),e.isGeospatial?DPt(e,u,n,i):GPt(e,u,o,c||NPt,s)}const UI=1,D_=2,WPt="never",HPt="no-overlap",DA="best-available",XPt=5,YPt={[DA]:ZPt,[HPt]:KPt,[WPt]:()=>{}};class qPt{constructor(t){E(this,"opts",void 0),E(this,"_requestScheduler",void 0),E(this,"_cache",void 0),E(this,"_dirty",void 0),E(this,"_tiles",void 0),E(this,"_cacheByteSize",void 0),E(this,"_viewport",void 0),E(this,"_zRange",void 0),E(this,"_selectedTiles",void 0),E(this,"_frameNumber",void 0),E(this,"_modelMatrix",void 0),E(this,"_modelMatrixInverse",void 0),E(this,"_maxZoom",void 0),E(this,"_minZoom",void 0),E(this,"onTileLoad",void 0),E(this,"_getCullBounds",Y0(m1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new $0t({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Br,this._modelMatrixInverse=new Br,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new Br(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!To(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(s=>this._getTile(s.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,a]=m1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:s}=t;if("west"in s)return s.west<o&&s.east>n&&s.south<a&&s.north>i;const l=Math.min(s.top,s.bottom),u=Math.max(s.top,s.bottom);return s.left<o&&s.right>n&&l<a&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:a}){const{tileSize:s,extent:l,zoomOffset:u}=this.opts;return jPt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:UPt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||DA,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:YPt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:XPt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[a,s]of t)if(s.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?s.byteLength:0,t.delete(a),this.opts.onTileUnload(s)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((a,s)=>a.zoom-s.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new pPt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function ZPt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!$V(t)&&NA(t);for(const t of e)t.isVisible=Boolean(t.state&D_)}function KPt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&$V(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&D_),r.children&&(r.isVisible||r.state&UI))for(const n of r.children)n.state=UI;else r.isSelected&&NA(r)}function $V(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=D_,!0;t=t.parent}return!1}function NA(e){for(const t of e.children)t.isLoaded||t.content?t.state|=D_:NA(t)}const JPt={TilesetClass:qPt,data:{type:"data",value:[]},dataComparator:FPt.equals,renderSubLayers:{type:"function",value:e=>new xA(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:DA,zRange:null,maxRequests:6,zoomOffset:0};class FA extends I_{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:a,minZoom:s,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:a,minZoom:s,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?$Pt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=C_(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}E(FA,"defaultProps",JPt);E(FA,"layerName","TileLayer");var wu={};Object.defineProperty(wu,"__esModule",{value:!0});wu.calcRdx=eEt;wu.isFunction=nEt;var QPt=wu.isNumber=iEt;wu.toVector=oEt;wu.isArray=void 0;var tEt=Array.prototype.concat,zV=Object.prototype.toString;function eEt(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}var rEt=Array.isArray||function(t){return zV.call(t)==="[object Array]"};wu.isArray=rEt;function nEt(e){return zV.call(e)==="[object Function]"}function iEt(e){return typeof e=="number"?e-e===0:!1}function oEt(e){return tEt.apply([],e)}const aEt={setup(){const e=xt(),t=re(),r=Ii(),n=$1();return t.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panToPaPos:Object},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panToPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},panToPaPos(e){if(e){const t={...this.initialViewState};t.target=[e.x,-e.z],t.zoom=-7,t.transitionDuration=100,t.transitionInterpolator=new M_({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:t})}}},computed:{iconsCalc(){console.log("iconsCalc");let e=[];return this.iconData&&this.iconData.forEach(([t,r])=>{t in this.scores.pathCosts&&e.push({key:t,kind:r,pos:this.iconPositions[t],taken:this.userStore.autotakenNodes.has(t),thisCpCost:this.gameStore.nodes[t].CP,fromTown:this.scores.needTakes[t][0],fromTownCpCost:this.scores.pathCosts[t],fromTownPath:this.scores.needTakes[t]})}),e},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.autotakenGrindNodes.has(t)&&this.userStore.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.clickedObject.key in this.gameStore._tnk2tk){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(!QPt(r.job))return;const n=this.userStore.pzJobs[r.job];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o})}}return e}},methods:{makeIconImg:dY,formatFixed:Bt,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.towns;let i=new Wh((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},a={[n]:[]};for(var s;i.size();)s=i.pop(),r[s].forEach(l=>{if(!(l in t))return;const u=o[s]+t[l].CP;l in o?u<o[l]&&(o[l]=u,a[l]=[...a[s],l]):(i.push(l),o[l]=u,a[l]=[...a[s],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:a,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},a={0:0},s={0:0};for(const u of Object.keys(t))a[u]=1/0,s[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=a[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<s[f]&&(a[f]=h,s[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,a[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:a}},makeIconsLayer(){return new Z0({data:this.iconsCalc,pickable:!0,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>e.taken?[0,0,0,255]:[0,0,0,255],getIcon:function(e){return{url:e.taken?`data/icons/node/${e.kind}.png`:`data/icons/node/gray/${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{getColor:this.userStore.countNodesTaken},transitions:{getColor:100},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:30,autoHighlight:!0})},makeLineLayer(){return new wA({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState),console.log("initializeDeck",this.mapStore.target),this.tileLayer=new FA({data:"data/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new bA(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),new vA({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer],controller:{doubleClickZoom:!1},views:[new dA({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)}}},sEt={id:"deck-canvas",ref:"canvas"},lEt={id:"hack"};function uEt(e,t,r,n,i,o){return O(),R(W,null,[b("canvas",sEt,null,512),b("div",lEt,L(o.iconsCalc.length)+" icons",1)],64)}const cEt=$e(aEt,[["render",uEt],["__scopeId","data-v-a056ba81"]]);const fEt={setup(){const e=re(),t=xt(),r=Ii();return{gameStore:t,userStore:e,marketStore:r}},emits:["panToPaPos"],data:()=>({activeTab:"daily"}),methods:{makeIconSrc:Fi,formatFixed:Bt,strShortenLeft:mY},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now(),t=re(),r=xt();let n=[];this.gameStore.towns.forEach(o=>{const a=this.gameStore.dijDiscountedNearestPlantzones(o,10);n[o]=a});let i=[];for(const[o,a]of Object.entries(n))a.forEach(([s,l,u])=>{if(this.userStore.workedPlantzones.has(s.toString()))return;const c=r.profitPzTownArtisans(s,o,l);if(!c.connected)return;c.path=u;const f=r.tnk2tk(o),h=t.townInfraAddCost(f,1,r.plantzones[s].itemkeys);c.townCp=h.cost,c.townCpTooltip=h.tooltip,c.dailyPerCp=c.priceDaily/(c.cp+c.townCp),c.deltaEff=t.jobEfficiencyDelta(c.priceDaily,c.cp+c.townCp),!isNaN(c.deltaEff)&&i.push(c)});return i.sort((o,a)=>a.deltaEff-o.deltaEff),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),i}}},J0=e=>(Vr("data-v-313f30d6"),e=e(),Ur(),e),hEt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},dEt={key:0},pEt=J0(()=>b("tr",null,[b("th",null,"Item"),b("th",null,"Qty"),b("th",null,"M$")],-1)),vEt=["href"],gEt=["src","data-key"],mEt={class:"right"},_Et={class:"right"},yEt={key:1},bEt=J0(()=>b("tr",null,[b("th",{rowspan:"2"},"town"),b("th",{rowspan:"2"},"job"),b("th",{rowspan:"2"},"M$/day"),b("th",{colspan:"2"},"CP"),b("th",{rowspan:"2"},"M$/day/CP")],-1)),wEt=J0(()=>b("tr",null,[b("th",null,"\xA0\xA0\u{1F5FA}\uFE0F\xA0\xA0"),b("th",null,"\u{1F6CF}\uFE0F\u{1F4E6}")],-1)),SEt=["onClick"],TEt={class:""},PEt={class:"hlim parent"},EEt=["onClick"],AEt={class:"hlim right"},kEt=["src"],CEt={key:1,class:"hlim left"},MEt={class:"tac"},xEt={class:"tac"},LEt={class:"tac"},IEt={class:"tac"},OEt=J0(()=>b("span",{class:"fsxs"},"Compares 10 nearest (by CP) untaken nodes of each town. Uses stats of median 40lvl artisans.",-1)),REt=J0(()=>b("tr",null,[b("th",null,"town"),b("th",null,"job"),b("th",null,"worker"),b("th",null,"+M$/day"),b("th",null,"+CP"),b("th",null,"+efficiency")],-1)),DEt=["onClick"],NEt={class:"hlim parent"},FEt=["onClick"],BEt={class:"hlim right"},$Et=["src"],zEt={class:"tac"},VEt=["title"],UEt={class:"tac"},GEt={class:"tac"},jEt=["title"],WEt=V("+"),HEt=["title"],XEt={class:"tac"};function YEt(e,t,r,n,i,o){const a=de("RouterLink");return O(),R(W,null,[b("nav",hEt,[b("span",{onClick:t[0]||(t[0]=s=>e.activeTab="daily"),class:Jr({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),b("span",{onClick:t[1]||(t[1]=s=>e.activeTab="worst"),class:Jr({tab:1,green:e.activeTab!="worst"})},"Worst Taken",2),b("span",{onClick:t[2]||(t[2]=s=>e.activeTab="best"),class:Jr({tab:1,green:e.activeTab!="best"})},"Best Untaken",2)]),e.activeTab=="daily"?(O(),R("div",dEt,[b("table",null,[pEt,(O(!0),R(W,null,Nt(n.userStore.jobsTally,(s,l)=>(O(),R("tr",null,[b("td",null,[b("a",{href:this.userStore.itemUrl+l},[b("img",{src:o.makeIconSrc(l),class:"iconitem","data-key":l},null,8,gEt),V(" "+L(n.gameStore.uloc.item[l]),1)],8,vEt)]),b("td",mEt,L(o.formatFixed(s,s<1?2:s<10?1:0)),1),b("td",_Et,L(o.formatFixed(this.marketStore.priceBunch({[l]:s})/1e6,2)),1)]))),256))])])):st("",!0),e.activeTab=="worst"?(O(),R("table",yEt,[bEt,wEt,(O(!0),R(W,null,Nt(n.userStore.workersSortedByIncomePerCp,({w:s,i:l,ipc:u})=>(O(),R("tr",null,[b("td",null,[b("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.uloc.town[n.gameStore.tnk2tk(s.tnk)]),9,SEt)]),b("td",TEt,[b("div",PEt,[s.job in n.userStore.pzJobs?(O(),R(W,{key:0},[b("span",{class:"hlim left clickable",onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.job].pos)},L(n.gameStore.parentNodeName(s.job)),9,EEt),b("span",AEt,[(O(!0),R(W,null,Nt(n.gameStore.plantzones[s.job].itemkeys,c=>(O(),fa(a,{tag:"a",to:{path:"./settings",hash:"#item"+c}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(c),class:"iconitem"},null,8,kEt)]),_:2},1032,["to"]))),256))])],64)):(O(),R("span",CEt,L(n.gameStore.workerJobDescription(s)),1))])]),b("td",MEt,L(o.formatFixed(l,2)),1),b("td",xEt,L(o.formatFixed(n.userStore.workerSharedCp(s),2)),1),b("td",LEt,L(o.formatFixed(n.userStore.workerSharedLodgingCp(s),2)),1),b("td",IEt,L(o.formatFixed(u,2)),1)]))),256))])):st("",!0),e.activeTab=="best"?(O(),R(W,{key:2},[OEt,b("table",null,[REt,(O(!0),R(W,null,Nt(o.untakenPlantzonesNearestCpTownProfit,s=>(O(),R("tr",null,[b("td",null,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},L(n.gameStore.nodeName(s.tnk)),9,DEt)]),b("td",null,[b("div",NEt,[b("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.key].pos),class:"hlim left clickable"},L(n.gameStore.parentNodeName(s.key)),9,FEt),b("span",BEt,[(O(!0),R(W,null,Nt(s.itemkeys,l=>(O(),fa(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:Ee(()=>[b("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,$Et)]),_:2},1032,["to"]))),256))])])]),b("td",zEt,[s.alt_workers?(O(),R("abbr",{key:0,class:"tooltip nound",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day = ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},L({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,VEt)):st("",!0)]),b("td",UEt,L(o.formatFixed(s.priceDaily,2)),1),b("td",GEt,[b("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`),class:"tooltip"},L(o.formatFixed(s.cp)),9,jEt),WEt,b("abbr",{title:s.townCpTooltip,class:"tooltip"},L(o.formatFixed(s.townCp)),9,HEt),V("="+L(o.formatFixed(s.cp+s.townCp)),1)]),b("td",XEt,L(o.formatFixed(s.deltaEff,3,!0)),1)]))),256))])],64)):st("",!0)],64)}const qEt=$e(fEt,[["render",YEt],["__scopeId","data-v-313f30d6"]]);const ZEt={setup(){const e=xt(),t=re(),r=Ii(),n=$1();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{Worker:R7,Town:eq,Plantzone:Eq,ModalDialog:SP,WorkerEdit:m$,WorkerSendSelection:hdt,LodgingSelection:Sdt,HousesSelection:p0t,NodeMap:cEt,EmpireOverview:qEt,FloatingModifierEdit:jE},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendSelection:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:"0",housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,modifierDialogWspd:150,modifierDialogRgroup:1,modifierDialogWkld:400,modifierDialogVisible:!1,panToPzk:null,panToPaPos:null,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1}),created(){},watch:{},computed:{},methods:{makeIconSrc:Fi,formatFixed:Bt,randBetween:cs,levelup:dd,townNearestCpPlantzonesProfit(e,t,r,n){const i=Date.now();let o=[];const a=this.gameStore.tk2tnk(e);return this.gameStore.dijDiscountedNearestPlantzones(a,80).forEach(([l,u,c])=>{if(this.userStore.workedPlantzones.has(l.toString()))return;const f=this.gameStore.pzSelectionEntry(l,e,a,u,c,r,n);f.profit.dist>1e6||o.push(f)}),o.sort((l,u)=>u.dailyPerCp-l.dailyPerCp),console.log("cpt: townNearestCpPlantzonesProfit took",Date.now()-i,"ms"),o.slice(0,t)},hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.gameStore.uloc.town[e].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),r=this.userStore.townWorkers(e).length+1,n=7572;let i={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:n,label:t+r,level:1,wspdSheet:this.gameStore.workerStatic[n].wspd/1e6,mspdSheet:this.gameStore.workerStatic[n].mspd/100,luckSheet:this.gameStore.workerStatic[n].luck/1e4,skills:[],job:null};return i.skills.push(this.gameStore.randomSkill(i.skills)),dd(this.gameStore,i,40),i.wspdSheet=Math.round(i.wspdSheet*100)/100,i.mspdSheet=Math.round(i.mspdSheet*100)/100,i.luckSheet=Math.round(i.luckSheet*100)/100,i},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){const t=this.gameStore.workerStatsOnPlantzone(e);this.sendSelection={worker:e,jobs:this.townNearestCpPlantzonesProfit(this.gameStore.tnk2tk(e.tnk),16,e,t)},this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);r.userWorkers.forEach(n=>{if(delete n.tk,"wspdLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const o=this.gameStore.workerStatic[n.charkey].mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,delete n.mspdLvlup}if("mspdBase"in n&&delete n.mspdBase,"luckLvlup"in n){const o=(this.gameStore.workerStatic[n.charkey].luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),this.gameStore.jobIsPz(n.job)&&!(n.job in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk ${n.job}`),n.job=null)}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showModifierDialog(e){this.modifierDialogVisible=!0,this.modifierDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.modifierDialogWkld=this.gameStore.plantzones[e].peg.time,this.modifierDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))}},mounted(){this.panToHash()}},ge=e=>(Vr("data-v-65cd3a77"),e=e(),Ur(),e),KEt=ge(()=>b("button",null,"import",-1)),JEt=ge(()=>b("br",null,null,-1)),QEt={style:{width:"24em"}},tAt=V("Test with workspeed: "),eAt={id:"canvas-limiter"},rAt={key:0},nAt=["src"],iAt=ge(()=>b("br",null,null,-1)),oAt={id:"topleft"},aAt=ge(()=>b("summary",null,"Empire",-1)),sAt={id:"leftside"},lAt={key:0,id:"mapObjDetail"},uAt=ge(()=>b("div",null,"\u02C5",-1)),cAt=[uAt],fAt={id:"clickedTownInfo",class:"vscrollable"},hAt={key:0},dAt={key:0,id:"clickedNodeInfo"},pAt=V(),vAt=ge(()=>b("abbr",{title:"is involved in a zero-cost path"},"\u2139\uFE0F",-1)),gAt={key:0,class:"fsxs"},mAt=V(" shared by active nodejobs: "),_At=["checked"],yAt=V(" zero-cost connection to nearest town (invested for droprate) "),bAt={key:1,id:"clickedPlantzoneInfo"},wAt={id:"rightside"},SAt={id:"totals"},TAt={class:"fsxs"},PAt=ge(()=>b("br",null,null,-1)),EAt={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},AAt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},kAt=ge(()=>b("br",null,null,-1)),CAt=ge(()=>b("br",null,null,-1)),MAt=ge(()=>b("br",null,null,-1)),xAt={class:"fsxs"},LAt=V(" invested for droprate: "),IAt=["title"],OAt=ge(()=>b("br",null,null,-1)),RAt=ge(()=>b("br",null,null,-1)),DAt=ge(()=>b("br",null,null,-1)),NAt=ge(()=>b("br",null,null,-1)),FAt=ge(()=>b("br",null,null,-1)),BAt=ge(()=>b("br",null,null,-1)),$At=ge(()=>b("br",null,null,-1)),zAt={class:"fsxs"},VAt=ge(()=>b("br",null,null,-1)),UAt=ge(()=>b("br",null,null,-1)),GAt=ge(()=>b("br",null,null,-1)),jAt=ge(()=>b("br",null,null,-1)),WAt=V(" (M$/day/CP) "),HAt={class:"fsxs"},XAt=ge(()=>b("br",null,null,-1)),YAt=ge(()=>b("br",null,null,-1)),qAt=ge(()=>b("br",null,null,-1)),ZAt=ge(()=>b("br",null,null,-1)),KAt=ge(()=>b("div",{style:{clear:"both"}},null,-1)),JAt={id:"workerlist"},QAt=ge(()=>b("summary",null,"All towns/workers list",-1)),tkt=V(" show: "),ekt={class:"switch mauto"},rkt=ge(()=>b("span",{class:"slider"},null,-1)),nkt=V(" names "),ikt={class:"switch mauto"},okt=["disabled"],akt=ge(()=>b("span",{class:"slider"},null,-1)),skt=V(" stat ranks "),lkt={class:"switch mauto"},ukt=["disabled"],ckt=ge(()=>b("span",{class:"slider"},null,-1)),fkt=V(" stats after skills "),hkt={class:"switch mauto"},dkt=ge(()=>b("span",{class:"slider"},null,-1)),pkt=V(" efficiency ");function vkt(e,t,r,n,i,o){const a=de("WorkerEdit"),s=de("ModalDialog"),l=de("WorkerSendSelection"),u=de("LodgingSelection"),c=de("HousesSelection"),f=de("FloatingModifierEdit"),h=de("NodeMap"),d=de("EmpireOverview"),p=de("Town"),v=de("Plantzone");return O(),R(W,null,[Mt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=g=>e.workerDialogVisible=g)},{default:Ee(()=>[Mt(a,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=g=>e.workerDialogVisible=g)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),Mt(s,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=g=>e.sendDialogVisible=g)},{default:Ee(()=>[Mt(l,{options:e.sendSelection,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=g=>e.sendDialogVisible=g)},null,8,["options","show"])]),_:1},8,["show"]),Mt(s,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=g=>e.lodgingDialogVisible=g)},{default:Ee(()=>[Mt(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=g=>e.lodgingDialogVisible=g)},null,8,["tk","o","show"])]),_:1},8,["show"]),Mt(s,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=g=>e.housesDialogVisible=g)},{default:Ee(()=>[Mt(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=g=>e.housesDialogVisible=g)},null,8,["tk","show"])]),_:1},8,["show"]),Mt(s,{show:e.importDialogVisible,"onUpdate:show":t[10]||(t[10]=g=>e.importDialogVisible=g)},{default:Ee(()=>[b("form",{onSubmit:t[9]||(t[9]=ym(g=>o.fileImport(g),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[8]||(t[8]=g=>o.fileImport())}),KEt,JEt],32)]),_:1},8,["show"]),Mt(s,{show:e.modifierDialogVisible,"onUpdate:show":t[13]||(t[13]=g=>e.modifierDialogVisible=g)},{default:Ee(()=>[Mt(f,{rgk:e.modifierDialogRgroup,wspd:e.modifierDialogWspd,workload:e.modifierDialogWkld,show:e.modifierDialogVisible,"onUpdate:show":t[11]||(t[11]=g=>e.modifierDialogVisible=g)},null,8,["rgk","wspd","workload","show"]),b("div",QEt,[tAt,yt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[12]||(t[12]=g=>e.modifierDialogWspd=g),min:"40",max:"200",step:"0.01"},null,512),[[pe,e.modifierDialogWspd,void 0,{number:!0}]]),V(" "+L(e.modifierDialogWspd),1)])]),_:1},8,["show"]),b("main",null,[b("div",eAt,[Mt(h,{clickedObj:e.clickedNode,"onUpdate:clickedObj":t[14]||(t[14]=g=>e.clickedNode=g),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[15]||(t[15]=g=>e.hoverInfo=g),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[16]||(t[16]=g=>e.panToPzk=g),panToPaPos:e.panToPaPos,"onUpdate:panToPaPos":t[17]||(t[17]=g=>e.panToPaPos=g),onPanAnywhere:t[18]||(t[18]=g=>e.panToPaPos=null)},null,8,["clickedObj","hoverInfo","panToPzk","panToPaPos"]),e.hoverInfo&&e.hoverInfo.object?(O(),R("div",{key:0,id:"tooltip",style:Dl({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[V(L(e.hoverInfo.object.key)+" "+L(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+L(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(O(),R("span",rAt,[(O(!0),R(W,null,Nt(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,g=>(O(),R("img",{src:o.makeIconSrc(g),class:"iconitem"},null,8,nAt))),256))])):st("",!0),iAt],4)):st("",!0),b("div",oAt,[b("details",null,[aAt,Mt(d,{onPanToPaPos:t[19]||(t[19]=g=>e.panToPaPos=g)})])]),b("div",sAt,[e.clickedNode?(O(),R("div",lAt,[b("div",{class:"rolldown",onClick:t[20]||(t[20]=g=>e.clickedNode=null)},cAt),b("div",fAt,[e.clickedNode.key in n.gameStore._tnk2tk&&n.gameStore.tnk2tk(e.clickedNode.key)in n.gameStore.lodgingPerTown?(O(),R("table",hAt,[Mt(p,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(e.clickedNode.key)],tk:n.gameStore.tnk2tk(e.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[21]||(t[21]=g=>e.panToPaPos=g)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"])])):st("",!0)]),!(n.gameStore.tnk2tk[e.clickedNode.key]in n.gameStore.lodgingPerTown)&&!(e.clickedNode.key in n.gameStore.plantzoneDrops)?(O(),R("div",dAt,[b("p",null,[V(L(n.gameStore.uloc.node[e.clickedNode.key])+" ",1),n.userStore.autotakenGrindNodes.has(e.clickedNode.key)?(O(),R(W,{key:0},[b("s",null,L(e.clickedNode.thisCpCost)+"CP",1),pAt,vAt],64)):(O(),R(W,{key:1},[V(L(e.clickedNode.thisCpCost)+"CP ",1)],64))]),e.clickedNode.key in n.userStore.currentNodesJobs?(O(),R("p",gAt,[mAt,(O(!0),R(W,null,Nt(n.userStore.currentNodesJobs[e.clickedNode.key],g=>(O(),R("p",null,L(o.formatFixed(100*n.userStore.pzJobs[g].profit.priceDaily/n.userStore.currentNodesCashflow[e.clickedNode.key]))+"% - "+L(n.gameStore.plantzoneName(g))+" @ "+L(o.formatFixed(n.userStore.pzJobs[g].profit.priceDaily,2))+" M$/day ",1))),256))])):st("",!0),e.prerelease_zerocost?(O(),R(W,{key:1},[b("input",{type:"checkbox",onChange:t[22]||(t[22]=g=>n.userStore.modifyGrindTakens(g,e.clickedNode.key)),checked:n.userStore.grindTakenSet.has(e.clickedNode.key)},null,40,_At),yAt],64)):st("",!0)])):st("",!0),e.clickedNode.key in n.gameStore.plantzoneDrops?(O(),R("div",bAt,[Mt(v,{pzk:e.clickedNode.key,onShowModifierDialog:o.showModifierDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowModifierDialog","onEditWorker"])])):st("",!0)])):st("",!0)]),b("div",wAt,[b("div",SAt,[b("details",null,[b("summary",null,"Total workers: "+L(n.userStore.countWorkers),1),b("p",TAt,[V(" nodes: "+L(n.userStore.workedPlantzones.size)+" ",1),PAt,n.userStore.workersFarmingCount?(O(),R(W,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(O(),R("abbr",AAt,"\u26A0\uFE0F")):st("",!0):(O(),R("abbr",EAt,"\u26A0\uFE0F")),V(" farming: "+L(n.userStore.workersFarmingCount)+" ",1),kAt],64)):st("",!0),n.userStore.workersWorkshopCount?(O(),R(W,{key:1},[V(" workshop: "+L(n.userStore.workersWorkshopCount)+" ",1),CAt],64)):st("",!0),n.userStore.workersCustomCount?(O(),R(W,{key:2},[V(" custom: "+L(n.userStore.workersCustomCount)+" ",1),MAt],64)):st("",!0),n.userStore.workersIdleCount?(O(),R(W,{key:3},[V(" \u26A0\uFE0F idle: "+L(n.userStore.workersIdleCount),1)],64)):st("",!0)])]),b("details",null,[b("summary",null,"Total CP: "+L(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),b("p",xAt,[n.userStore.autotakenGrindNodesCP?(O(),R(W,{key:0},[LAt,b("abbr",{class:"tooltip",title:n.userStore.grindTakenDesc},L(n.userStore.autotakenGrindNodesCP),9,IAt),OAt],64)):st("",!0),V(" nodes: "+L(n.userStore.autotakenNodesCP)+" ",1),RAt,n.userStore.farmingEnable?(O(),R(W,{key:1},[V(" farming: "+L(n.userStore.farmingCP)+" ",1),DAt],64)):st("",!0),n.userStore.workersWorkshopCount?(O(),R(W,{key:2},[V(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),NAt],64)):st("",!0),n.userStore.workersCustomCount?(O(),R(W,{key:3},[V(" custom: "+L(o.formatFixed(n.userStore.customTotalCP))+" ",1),FAt],64)):st("",!0),n.userStore.prerelease_housesconfig?(O(),R(W,{key:4},[V(" lodgage: "+L(n.userStore.lodgage)+" ",1),BAt],64)):(O(),R(W,{key:5},[V(" lodging: "+L(n.userStore.haveLodging.cp.total)+" ",1),$At],64))])]),b("details",null,[b("summary",null,"Total M$/day: "+L(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),b("p",zAt,[V(" nodes: "+L(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),VAt,n.userStore.workersFarmingCount?(O(),R(W,{key:0},[V(" farming: "+L(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),UAt],64)):st("",!0),n.userStore.workersWorkshopCount?(O(),R(W,{key:1},[V(" workshops: "+L(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),GAt],64)):st("",!0),n.userStore.workersCustomCount?(O(),R(W,{key:2},[V(" custom: "+L(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),jAt],64)):st("",!0)])]),b("details",null,[b("summary",null,"Total efficiency: "+L(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),WAt,b("p",HAt,[V(" nodes: "+L(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),XAt,n.userStore.farmingEnable?(O(),R(W,{key:0},[V(" farming: "+L(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),YAt],64)):st("",!0),n.userStore.workersWorkshopCount?(O(),R(W,{key:1},[V(" workshop: "+L(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),qAt],64)):st("",!0),n.userStore.workersCustomCount?(O(),R(W,{key:2},[V(" custom: "+L(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),ZAt],64)):st("",!0)])])]),KAt,b("div",JAt,[b("details",null,[QAt,tkt,b("label",ekt,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=g=>n.userStore.displayWorkerNames=g)},null,512),[[wr,n.userStore.displayWorkerNames]]),rkt,nkt]),b("label",ikt,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=g=>n.userStore.displayWorkerStatsRank=g),disabled:n.userStore.displayWorkerStatsForPz},null,8,okt),[[wr,n.userStore.displayWorkerStatsRank]]),akt,skt]),b("label",lkt,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[25]||(t[25]=g=>n.userStore.displayWorkerStatsForPz=g),disabled:n.userStore.displayWorkerStatsRank},null,8,ukt),[[wr,n.userStore.displayWorkerStatsForPz]]),ckt,fkt]),b("label",hkt,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[26]||(t[26]=g=>n.userStore.displayProfitPerCp=g)},null,512),[[wr,n.userStore.displayProfitPerCp]]),dkt,pkt]),b("button",{onClick:t[27]||(t[27]=g=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[28]||(t[28]=g=>o.fileExport())},"export"),st("",!0),b("button",{onClick:t[30]||(t[30]=g=>o.fireAll())},"fire all"),b("table",null,[(O(!0),R(W,null,Nt(n.gameStore.lodgingPerTown,(g,m)=>(O(),fa(p,{o:g,tk:m,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:t[31]||(t[31]=_=>e.panToPaPos=_)},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker"]))),256))])])])])])])],64)}const gkt=$e(ZEt,[["render",vkt],["__scopeId","data-v-65cd3a77"]]);const mkt={setup(){const e=re(),t=xt(),r=Ii(),n=$1();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},data:()=>({wspd:150,mspd:10,luck:10,isGiant:!1}),methods:{makeIconSrc:Fi,formatFixed:Bt,highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=40;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key;let i=this.gameStore.dijkstraNearestTowns(n,2);i.sort((l,u)=>l[1]-u[1]);let o={},a={};for(let l=0;l<i.length;l++){const[u,c]=i[l],f=this.gameStore.profitPzTownArtisans(n,u,c);if(u!=1343&&f.connected){if(a[f.tnk]=f.dailyPerCp,!("priceDaily"in o)){o=f;continue}if(f.dailyPerCp>o.dailyPerCp){o=f;break}}}if(!("alt_workers"in o))throw new Error(`Failed to calc alt_workers for pzk=${n}`);const s=Object.entries(a).map(([l,u])=>({tnk:l,dailyPerCp:u}));s.sort((l,u)=>u.dailyPerCp-l.dailyPerCp),o.alt_towns_dict=a,o.alt_towns=s,t.push(o)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit;return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},dr=e=>(Vr("data-v-f08b0b77"),e=e(),Ur(),e),_kt=dr(()=>b("div",{id:"toptext"},[b("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with Farm Knowledge skill. Home page has more tiers, levels, and skills. "),b("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. "),b("p",null," For example, taking both Shakatu Fig nodes is not 3+3 but 3+1 CP. Use worker management on Home page to take this (and also lodging/storage costs) into account. "),b("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Modifiers as well. ")],-1)),ykt={class:"scroll"},bkt=dr(()=>b("th",{rowspan:"2"},"Node",-1)),wkt=dr(()=>b("th",{colspan:"3"},"cycle drops",-1)),Skt=dr(()=>b("th",{colspan:"3"},"best town",-1)),Tkt=dr(()=>b("th",{colspan:"2"},"best worker",-1)),Pkt=dr(()=>b("th",{rowspan:"2"},"workload",-1)),Ekt=dr(()=>b("th",{colspan:"3"},"daily",-1)),Akt={key:0,rowspan:"2"},kkt=dr(()=>b("abbr",{class:"tooltip nound",title:"assigned on Home page?"},"\u{1F3E0}",-1)),Ckt=[kkt],Mkt=V("unlucky ("),xkt=V(" with giant bonus)"),Lkt=dr(()=>b("th",null,"lucky",-1)),Ikt=dr(()=>b("th",null,"$ value",-1)),Okt=dr(()=>b("th",null,"name",-1)),Rkt=dr(()=>b("th",null,"walk",-1)),Dkt=dr(()=>b("th",null,"CP",-1)),Nkt=dr(()=>b("th",null,"type",-1)),Fkt=dr(()=>b("th",null,"wspd",-1)),Bkt=dr(()=>b("th",null,"cycles",-1)),$kt=dr(()=>b("th",null,"M$",-1)),zkt=dr(()=>b("th",null,"M$/CP",-1)),Vkt=["id"],Ukt=["src"],Gkt=["src"],jkt={class:"tac"},Wkt=["src"],Hkt={class:"tac"},Xkt={class:"tac"},Ykt=["title"],qkt={class:"tac"},Zkt={class:"tac"},Kkt={class:"tac"},Jkt=["title"],Qkt={class:"tac"},tCt={class:"tac"},eCt={class:"tac"},rCt={class:"tac"},nCt={class:"tac"},iCt={key:0,class:"tac"},oCt={key:0,class:"tooltip nound",title:"all good"},aCt=["title"],sCt=V(" \u26A0\uFE0F "),lCt=V(" \u2714\uFE0F "),uCt=["title"],cCt={key:1,class:"tooltip nound",title:"not assigned"};function fCt(e,t,r,n,i,o){const a=de("RouterLink");return O(),R("main",null,[_kt,b("div",ykt,[b("table",null,[b("tr",null,[bkt,wkt,Skt,Tkt,Pkt,Ekt,n.userStore.workedPlantzones.size?(O(),R("th",Akt,Ckt)):st("",!0)]),b("tr",null,[b("th",null,[Mkt,yt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>e.isGiant=s)},null,512),[[wr,e.isGiant]]),xkt]),Lkt,Ikt,Okt,Rkt,Dkt,Nkt,Fkt,Bkt,$kt,zkt]),(O(!0),R(W,null,Nt(o.allPlantzonesNearestCpTownProfit_sorted,s=>(O(),R("tr",{id:"drops"+s.key},[b("td",null,[Mt(a,{tag:"a",to:{path:"./",hash:"#node"+s.key}},{default:Ee(()=>[V(L(n.gameStore.plantzoneName(s.key)),1)]),_:2},1032,["to"])]),b("td",null,[e.isGiant?(O(!0),R(W,{key:0},Nt(s.unlucky_gi,(l,u)=>(O(),R("div",null,[Mt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[V(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,Ukt),V(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256)):(O(!0),R(W,{key:1},Nt(s.unlucky,(l,u)=>(O(),R("div",null,[Mt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[b("span",null,[V(L(o.formatFixed(l,2))+" ",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,Gkt),V(" "+L(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"])]))),256))]),b("td",jkt,[(O(!0),R(W,null,Nt(s.lucky,(l,u)=>(O(),R("div",null,[Mt(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:Ee(()=>[V(L(o.formatFixed(l,2))+"\xA0",1),b("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,Wkt)]),_:2},1032,["to"])]))),256))]),b("td",Hkt,L(o.formatFixed(s.cycleValue,0)),1),b("td",Xkt,[b("abbr",{class:"tooltip nound",title:s.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/s.dailyPerCp)}%`).join(`
`)},L(n.gameStore.nodeName(s.tnk)),9,Ykt)]),b("td",qkt,L(o.formatFixed(s.dist,0)),1),b("td",Zkt,L(s.cp),1),b("td",Kkt,[b("abbr",{class:"tooltip nound",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},L({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,Jkt)]),b("td",Qkt,L(o.formatFixed(s.wspd+5,1)),1),b("td",tCt,[n.userStore.allowFloating&&n.userStore.useFloatingModifiers[s.regiongroup]?(O(),R(W,{key:0},[V(" ~"+L(o.formatFixed(n.userStore.medianWorkloads[s.key],2)),1)],64)):(O(),R(W,{key:1},[V(L(o.formatFixed(s.activeWorkload,2)),1)],64))]),b("td",eCt,L(o.formatFixed(s.cyclesDaily,1)),1),b("td",rCt,L(o.formatFixed(s.priceDaily,2)),1),b("td",nCt,L(o.formatFixed(s.dailyPerCp,3)),1),n.userStore.workedPlantzones.size?(O(),R("td",iCt,[n.userStore.workedPlantzones.has(s.key.toString())?(O(),R(W,{key:0},[n.userStore.pzJobs[s.key].worker.tnk==s.tnk?(O(),R(W,{key:0},[n.userStore.pzJobs[s.key].worker.charkey==s.charkey?(O(),R("abbr",oCt,"\u2714\uFE0F")):(O(),R("abbr",{key:1,class:"tooltip nound",title:`worker used: ${n.gameStore.uloc.char[n.userStore.pzJobs[s.key].worker.charkey]}
suggested: ${n.gameStore.uloc.char[s.charkey]}`+(n.userStore.pzJobs[s.key].worker.charkey in s.alt_workers_dict?` (${o.formatFixed(s.priceDaily/s.alt_workers_dict[n.userStore.pzJobs[s.key].worker.charkey]*100-100)}% better)`:"")},[n.userStore.pzJobs[s.key].worker.charkey in s.alt_workers_dict&&s.alt_workers_dict[n.userStore.pzJobs[s.key].worker.charkey]/s.priceDaily<.9?(O(),R(W,{key:0},[sCt],64)):(O(),R(W,{key:1},[lCt],64))],8,aCt))],64)):(O(),R("abbr",{key:1,class:"tooltip nound",title:`town used: ${n.gameStore.nodeName(n.userStore.pzJobs[s.key].worker.tnk)}
suggested: ${n.gameStore.nodeName(s.tnk)}`+(n.userStore.pzJobs[s.key].worker.tnk in s.alt_towns_dict?` (${o.formatFixed(s.dailyPerCp/s.alt_towns_dict[n.userStore.pzJobs[s.key].worker.tnk]*100-100)}% better)`:"")}," \u26A0\uFE0F ",8,uCt))],64)):(O(),R("abbr",cCt,"\u274C"))])):st("",!0)],8,Vkt))),256))])])])}const hCt=$e(mkt,[["render",fCt],["__scopeId","data-v-f08b0b77"]]),dCt={setup(){const e=xt(),t=re(),r=Ii();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},pCt=b("br",null,null,-1),vCt=b("br",null,null,-1),gCt=b("tr",null,[b("th"),b("th",null,"Town / House"),b("th",null,"Lodging"),b("th",null,"CP")],-1),mCt=b("td",null,null,-1),_Ct={class:"header"},yCt=V(" P2W: "),bCt=["onUpdate:modelValue"],wCt=["onUpdate:modelValue"],SCt=["href"];function TCt(e,t,r,n,i,o){return O(),R("main",null,[V(" Total lodging slots: "+L(n.userStore.haveLodging.slots.total),1),pCt,V(" Total CP spent: "+L(n.userStore.haveLodging.cp.total),1),vCt,b("table",null,[gCt,(O(!0),R(W,null,Nt(n.gameStore.lodgingPerTown,(a,s)=>(O(),R(W,null,[b("tr",null,[mCt,b("td",null,[b("span",_Ct,L(n.gameStore.uloc.town[s]),1),yCt,yt(b("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[s]=l,class:"short"},null,8,bCt),[[pe,n.userStore.lodgingP2W[s],void 0,{number:!0}]])]),b("td",null,L(n.userStore.haveLodging.slots.perTown[s]),1),b("td",null,L(n.userStore.haveLodging.cp.perTown[s]),1)]),(O(!0),R(W,null,Nt(a.houses,l=>(O(),R("tr",null,[b("td",null,[yt(b("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,wCt),[[wr,n.userStore.lodgingTaken[l.key]]])]),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+l.key},L(n.gameStore.uloc.char[l.key]),9,SCt)]),b("td",null,L(l.lodgingSpaces),1),b("td",null,L(l.CP),1)]))),256))],64))),256))])])}const PCt=$e(dCt,[["render",TCt]]);const ECt={setup(){const e=xt(),t=re(),r=Ii();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:SP,FloatingModifierEdit:jE},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{formatFixed:Bt,fileParse(e){let t=e.target.result,r=JSON.parse(t);this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");let t={regionModifiers:this.userStore.regionModifiers,regionModifiers2:this.userStore.regionModifiers2};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="modifiers.json",e.click()},clear(){this.userStore.regionModifiers={},this.userStore.regionModifiers2={}}}},Ui=e=>(Vr("data-v-71ddcc88"),e=e(),Ur(),e),ACt=Ui(()=>b("button",null,"import",-1)),kCt=Ui(()=>b("br",null,null,-1)),CCt=V(" Test on node: "),MCt=["value"],xCt=Ui(()=>b("br",null,null,-1)),LCt=V(" With workspeed: "),ICt={id:"toptext"},OCt=Ui(()=>b("p",null,"Productivity modifiers are shown ingame as green bars at world map > resource view.",-1)),RCt=Ui(()=>b("p",null,"Low modifier means lots of players are working in the area and workloads are increased (up to 2x of base).",-1)),DCt=Ui(()=>b("p",null,"If unspecified, 0% modifier will be used (= max workload = min cycles per day)",-1)),NCt=Ui(()=>b("summary",null,"Advanced",-1)),FCt=V("allow floating modifiers "),BCt=Ui(()=>b("tr",null,[b("th",null,"#"),b("th",null,"Modifier%"),b("th",null,"Contains nodes")],-1)),$Ct={class:"center"},zCt={class:"center"},VCt={key:0,class:"switch mauto"},UCt=["onUpdate:modelValue"],GCt=Ui(()=>b("span",{class:"slider"},null,-1)),jCt=V(" floating"),WCt=Ui(()=>b("br",null,null,-1)),HCt=["onClick"],XCt=V(" constant"),YCt=Ui(()=>b("br",null,null,-1)),qCt=["onUpdate:modelValue"];function ZCt(e,t,r,n,i,o){const a=de("ModalDialog"),s=de("FloatingModifierEdit"),l=de("RouterLink");return O(),R(W,null,[Mt(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:Ee(()=>[b("form",{onSubmit:t[1]||(t[1]=ym(u=>o.fileImport(u),["prevent"]))},[b("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),ACt],32)]),_:1},8,["show"]),Mt(a,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:Ee(()=>[Mt(s,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),kCt,CCt,yt(b("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(O(!0),R(W,null,Nt(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(O(),R("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},L(n.gameStore.plantzoneName(u))+" - "+L(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base ",9,MCt))),256))],512),[[fn,e.floatingDialogWkld]]),xCt,LCt,yt(b("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[pe,e.floatingDialogWspd,void 0,{number:!0}]]),V(" "+L(e.floatingDialogWspd),1)]),_:1},8,["show"]),b("div",ICt,[OCt,RCt,DCt,b("details",null,[NCt,b("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),b("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),b("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),b("label",null,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[wr,n.userStore.allowFloating]]),FCt])])]),b("table",null,[BCt,(O(!0),R(W,null,Nt(n.gameStore.regionGroups,(u,c)=>(O(),R("tr",null,[b("td",$Ct,L(c),1),b("td",zCt,[n.userStore.allowFloating?(O(),R("label",VCt,[yt(b("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingModifiers[c]=f},null,8,UCt),[[wr,n.userStore.useFloatingModifiers[c]]]),GCt])):st("",!0),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(O(),R(W,{key:1},[jCt,WCt,V(" ~"+L(o.formatFixed(n.userStore.medianModifiers[c],2))+" ",1),b("button",{onClick:f=>o.showDialog(c)},"edit",8,HCt)],64)):(O(),R(W,{key:2},[XCt,YCt,yt(b("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionModifiers[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,qCt),[[pe,n.userStore.regionModifiers[c],void 0,{number:!0}]])],64))]),b("td",null,[(O(!0),R(W,null,Nt(u,f=>(O(),R("div",null,[Mt(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[V(L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),V(" "+L(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(O(),R(W,{key:0},[V(" \u2933 "+L(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(O(),R(W,{key:1},[V(" \u2192 "+L(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])],64)}const KCt=$e(ECt,[["render",ZCt],["__scopeId","data-v-71ddcc88"]]),JCt={setup(){const e=re();return{gameStore:xt(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:Bt,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},QCt=b("h3",null,"\u{1F3ED}Workshops config",-1),tMt={class:"sa"},eMt=b("tr",null,[b("th",null,"House"),b("th",null,"label"),b("th",null,"worktype"),b("th",null,"workload"),b("th",null,[V("$/cycle "),b("abbr",{title:"use Sho's Workshop Profitability Calculator"},"\u2139\uFE0F")]),b("th",null,[V("CP "),b("abbr",{title:"full cost of operating the workshop (including connection houses)"},"\u2139\uFE0F")]),b("th",null,"action")],-1),rMt=["onUpdate:modelValue"],nMt=["onUpdate:modelValue"],iMt=hP('<option value="unk">unknown</option><option value="jewelry">jewelry</option><option value="mass">mass</option><option value="weap">weapon</option><option value="tool">tool</option><option value="furn">furniture</option><option value="costume">costume</option><option value="refine">refine</option><option value="siege">siege</option><option value="mount">mount</option><option value="exclus">exclusive</option><option value="pack_produce">pack_produce</option><option value="pack_herb">pack_herb</option><option value="pack_mushr">pack_mushr</option><option value="pack_fish">pack_fish</option><option value="pack_timber">pack_timber</option><option value="pack_ore">pack_ore</option>',17),oMt=[iMt],aMt=["onUpdate:modelValue"],sMt=["onUpdate:modelValue"],lMt=["onUpdate:modelValue"],uMt=["onClick"],cMt=V(" new entry:"),fMt=b("br",null,null,-1),hMt={class:"borderless"},dMt=b("td",null,"town",-1),pMt=["value"],vMt=b("td",null,"usage",-1),gMt=["value"],mMt=b("td",null,"level",-1),_Mt=["value"],yMt=b("td",null,"house",-1),bMt=["value"],wMt=["disabled"],SMt={key:0,class:"fsxs"};function TMt(e,t,r,n,i,o){return O(),R(W,null,[QCt,b("table",tMt,[eMt,(O(!0),R(W,null,Nt(n.userStore.userWorkshops,(a,s)=>(O(),R("tr",null,[b("td",null,L(n.gameStore.uloc.char[s]),1),b("td",null,[yt(b("input",{class:"w5em","onUpdate:modelValue":l=>a.label=l},null,8,rMt),[[pe,a.label,void 0,{number:!0}]])]),b("td",null,[yt(b("select",{"onUpdate:modelValue":l=>a.industry=l},oMt,8,nMt),[[fn,a.industry]])]),b("td",null,[yt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualWorkload=l},null,8,aMt),[[pe,a.manualWorkload,void 0,{number:!0}]])]),b("td",null,[yt(b("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualCycleIncome=l},null,8,sMt),[[pe,a.manualCycleIncome,void 0,{number:!0}]])]),b("td",null,[yt(b("input",{type:"number",class:"float2","onUpdate:modelValue":l=>a.manualCp=l},null,8,lMt),[[pe,a.manualCp,void 0,{number:!0}]])]),b("td",null,[b("button",{onClick:l=>o.deleteWorkshop(s)},"delete",8,uMt)])]))),256))]),cMt,fMt,b("table",hMt,[b("tr",null,[dMt,b("td",null,[yt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(O(!0),R(W,null,Nt(o.filteredTowns,a=>(O(),R("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,pMt))),256))],512),[[fn,e.filterTown]])])]),b("tr",null,[vMt,b("td",null,[yt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(O(!0),R(W,null,Nt(o.filteredUsages,a=>(O(),R("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,gMt))),256))],512),[[fn,e.filterUsage]])])]),b("tr",null,[mMt,b("td",null,[yt(b("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.filterLevel=a)},[(O(!0),R(W,null,Nt(o.filteredLevels,a=>(O(),R("option",{value:a},L(a>=0?a+"+":"any"),9,_Mt))),256))],512),[[fn,e.filterLevel]])])]),b("tr",null,[yMt,b("td",null,[yt(b("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.selectedHouse=a)},[(O(!0),R(W,null,Nt(o.filteredHouses,a=>(O(),R("option",{value:a},L(a)+" "+L(n.gameStore.uloc.char[a])+" "+L(a in n.userStore.userWorkshops?"\u{1F451}":""),9,bMt))),256))],512),[[fn,e.selectedHouse]])])])]),b("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=a=>o.addWorkshop(e.selectedHouse))},"add",8,wMt),e.selectedHouse in n.userStore.userWorkshops?(O(),R("span",SMt," already in list! ")):st("",!0)],64)}const PMt=$e(JCt,[["render",TMt]]);const EMt={setup(){const e=xt(),t=re(),r=Ii();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:SP,WorkerEdit:m$,WorkshopsConfig:PMt},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,highlightPending:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{makeIconSrc:Fi,formatFixed:Bt,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},_n=e=>(Vr("data-v-fcd536db"),e=e(),Ur(),e),AMt={id:"toptext"},kMt=V(" Enable \u{1F33B}Farming "),CMt=V(" (reserve 80 CP for 10 large fences)."),MMt=_n(()=>b("br",null,null,-1)),xMt=V(" Total profit:"),LMt=_n(()=>b("br",null,null,-1)),IMt=V(" 10 workers: "),OMt=V(" M$/day (use "),RMt=_n(()=>b("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),DMt=V(" to estimate) "),NMt=_n(()=>b("br",null,null,-1)),FMt=V(" 0 workers: "),BMt=V(" M$/day (half growth speed) "),$Mt=_n(()=>b("div",{class:"spacer"},null,-1)),zMt={key:1},VMt={class:"sa"},UMt=V(" Default worker for hire: "),GMt=V(" "+L(" ")+" "),jMt=_n(()=>b("label",{for:"f"},"Random Artisan Goblin",-1)),WMt=V(" "+L(" ")+" "),HMt=V(" "+L(" ")+" "),XMt=_n(()=>b("label",{for:"t"},"Custom",-1)),YMt=_n(()=>b("br",null,null,-1)),qMt=V(" Tax: "),ZMt=hP('<option value="0.65" data-v-fcd536db>0.65 (0)</option><option value="0.65325" data-v-fcd536db>0.65325 (1000)</option><option value="0.6565" data-v-fcd536db>0.6565 (4000)</option><option value="0.65975" data-v-fcd536db>0.65975 (7000)</option><option value="0.65975" data-v-fcd536db>0.69225 (7000 + ring)</option><option value="0.845" data-v-fcd536db>0.845 (0 + VP)</option><option value="0.84825" data-v-fcd536db>0.84825 (1000 + VP)</option><option value="0.8515" data-v-fcd536db>0.8515 (4000 + VP)</option><option value="0.85475" data-v-fcd536db>0.85475 (7000 + VP)</option><option value="0.88725" data-v-fcd536db>0.88725 (7000 + ring + VP)</option><option value="1" data-v-fcd536db>1 (test)</option>',11),KMt=[ZMt],JMt=V(" Language: "),QMt=_n(()=>b("option",null,"en",-1)),t4t=_n(()=>b("option",null,"ru",-1)),e4t=[QMt,t4t],r4t=V(" Server: "),n4t=hP("<option data-v-fcd536db>NA</option><option data-v-fcd536db>EU</option><option data-v-fcd536db>RU</option><option data-v-fcd536db>KR</option><option data-v-fcd536db>JP</option><option data-v-fcd536db>TH</option><option data-v-fcd536db>TW</option><option data-v-fcd536db>SA</option><option data-v-fcd536db>SEA</option><option data-v-fcd536db>MENA</option><option data-v-fcd536db>CEU</option><option data-v-fcd536db>CNA</option>",12),i4t=[n4t],o4t=V(" Market API status: "),a4t={key:2},s4t={key:3},l4t=V(" \xA0"),u4t=_n(()=>b("div",{class:"spacer"},null,-1)),c4t=_n(()=>b("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),f4t=_n(()=>b("p",null,"If the item is for self use, select Keep and/or enter Custom price:",-1)),h4t={class:"scrollable"},d4t=_n(()=>b("tr",null,[b("th",null,"Item"),b("th",null,"Market"),b("th",null,"Custom"),b("th",null,"Keep"),b("th",null,"Value")],-1)),p4t=["id"],v4t=["href"],g4t=["src","data-key"],m4t=V(" "+L(" ")+" "),_4t={key:0},y4t=["title"],b4t={class:"right"},w4t=["href"],S4t=["onUpdate:modelValue"],T4t={class:"center"},P4t=["disabled","onUpdate:modelValue"],E4t={class:"right"};function A4t(e,t,r,n,i,o){const a=de("WorkerEdit"),s=de("ModalDialog"),l=de("WorkshopsConfig");return O(),R(W,null,[Mt(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=u=>e.workerDialogVisible=u)},{default:Ee(()=>[Mt(a,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=u=>e.workerDialogVisible=u)},null,8,["workerEditing","show"])]),_:1},8,["show"]),Mt(s,{show:e.workshopsConfigVisible,"onUpdate:show":t[2]||(t[2]=u=>e.workshopsConfigVisible=u)},{default:Ee(()=>[Mt(l)]),_:1},8,["show"]),b("main",null,[b("div",AMt,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=u=>n.userStore.farmingEnable=u)},null,512),[[wr,n.userStore.farmingEnable]]),kMt,n.userStore.farmingEnable?(O(),R(W,{key:0},[CMt,MMt,xMt,LMt,IMt,yt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[4]||(t[4]=u=>n.userStore.farmingProfit=u)},null,512),[[pe,n.userStore.farmingProfit,void 0,{number:!0}]]),OMt,RMt,DMt,NMt,FMt,yt(b("input",{type:"number",class:"float2","onUpdate:modelValue":t[5]||(t[5]=u=>n.userStore.farmingBareProfit=u)},null,512),[[pe,n.userStore.farmingBareProfit,void 0,{number:!0}]]),BMt,$Mt],64)):(O(),R("br",zMt)),b("p",VMt,[b("button",{onClick:t[6]||(t[6]=u=>e.workshopsConfigVisible=!0)},"\u{1F3ED}Workshops config")]),UMt,yt(b("input",{type:"radio",name:"dw",id:"f",value:!1,"onUpdate:modelValue":t[7]||(t[7]=u=>n.userStore.useDefaultWorker=u)},null,512),[[cd,n.userStore.useDefaultWorker]]),GMt,jMt,WMt,yt(b("input",{type:"radio",name:"dw",id:"t",value:!0,"onUpdate:modelValue":t[8]||(t[8]=u=>n.userStore.useDefaultWorker=u)},null,512),[[cd,n.userStore.useDefaultWorker]]),HMt,XMt,V(" ("+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+L(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),b("button",{onClick:t[9]||(t[9]=u=>e.workerDialogVisible=!0)},"edit"),YMt,qMt,yt(b("select",{"onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.selectedTax=u)},KMt,512),[[fn,n.userStore.selectedTax]]),JMt,yt(b("select",{"onUpdate:modelValue":t[11]||(t[11]=u=>n.userStore.selectedLang=u),onChange:t[12]||(t[12]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},e4t,544),[[fn,n.userStore.selectedLang]]),r4t,yt(b("select",{"onUpdate:modelValue":t[13]||(t[13]=u=>n.userStore.selectedRegion=u),onChange:t[14]||(t[14]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},i4t,544),[[fn,n.userStore.selectedRegion]]),o4t,n.marketStore.ready?(O(),R("span",a4t,"\u2713")):(O(),R("span",s4t,"\u274C")),l4t,b("button",{onClick:t[15]||(t[15]=u=>o.reload())},"reload"),u4t,c4t,f4t]),b("div",h4t,[b("table",null,[d4t,(O(!0),R(W,null,Nt(n.gameStore.itemKeys,u=>(O(),R("tr",{id:"item"+u},[b("td",null,[b("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,g4t),V(" "+L(n.gameStore.uloc.item[u]),1)],8,v4t),m4t,u in n.marketStore.calculatedPrices?(O(),R("span",_4t,[b("abbr",{class:"tooltip",title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[u]).map(([c,f])=>o.formatFixed(f,3)+" "+n.gameStore.uloc.item[c]).join(`
`)},"\u2139\uFE0F",8,y4t)])):st("",!0)]),b("td",b4t,[u in n.marketStore.apiPrices?(O(),R("a",{key:0,href:this.marketStore.itemPriceUrl(u)},L(o.formatFixed(n.marketStore.apiPrices[u])),9,w4t)):(O(),R(W,{key:1},[V(L(o.formatFixed(n.gameStore.vendorPrices[u])),1)],64))]),b("td",null,[yt(b("input",{type:"number",class:"mid right","onUpdate:modelValue":c=>n.userStore.customPrices[u]=c},null,8,S4t),[[pe,n.userStore.customPrices[u],void 0,{number:!0}]])]),b("td",T4t,[yt(b("input",{type:"checkbox",disabled:u in n.gameStore.vendorPrices,"onUpdate:modelValue":c=>n.userStore.keepItems[u]=c},null,8,P4t),[[wr,n.userStore.keepItems[u]]])]),b("td",E4t,L(o.formatFixed(n.marketStore.prices[u])),1)],8,p4t))),256))])])])],64)}const k4t=$e(EMt,[["render",A4t],["__scopeId","data-v-fcd536db"]]);const C4t={setup(){const e=xt(),t=re(),r=Ii();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:Bt},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},M4t=b("div",{id:"toptext"},[b("p",null,"Using 150/10/10 worker")],-1),x4t=b("tr",null,[b("th",null,"Node/Town"),b("th",null,"connect"),b("th",null,"distance"),b("th",null,"M$/day"),b("th",null,"M$/day/CP")],-1),L4t={colspan:"5"};function I4t(e,t,r,n,i,o){return O(),R(W,null,[M4t,b("table",null,[x4t,(O(!0),R(W,null,Nt(n.gameStore.plantzones,(a,s)=>(O(),R(W,null,[b("tr",null,[b("td",L4t,[b("h3",null,L(s)+" "+L(a.name),1)])]),(O(!0),R(W,null,Nt(o.plantzonesNearestCpTownsProfits150[s],l=>(O(),R("tr",null,[b("td",null,L(n.gameStore.nodeName(l.tnk)),1),b("td",null,L(l.cp)+"CP ",1),b("td",null,L(o.formatFixed(l.dist,0)),1),b("td",null,L(o.formatFixed(l.priceDaily,2)),1),b("td",null,L(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const O4t=$e(C4t,[["render",I4t]]),R4t={setup(){const e=xt(),t=re();return{gameStore:e,userStore:t}},data:()=>({houses:{},houseCrafts:{},towns:[-1],usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{makeIconSrc:Fi,async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.craftItems=await(await fetch("data/house_craft_outputs.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}}},D4t={id:"toptext"},N4t=V(" Town: "),F4t=["value"],B4t=V(" Usage: "),$4t=["value"],z4t={key:0},V4t=b("summary",null,"Craftables",-1),U4t=["href"],G4t=["src","data-key"],j4t=b("tr",null,[b("th",null,"town"),b("th",null,"node"),b("th",null,"name"),b("th",null,"CP"),b("th",null,"usage/level")],-1),W4t={key:0},H4t=["href"],X4t=V(L(" "));function Y4t(e,t,r,n,i,o){return O(),R("main",null,[b("div",D4t,[N4t,yt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(O(!0),R(W,null,Nt(e.towns,a=>(O(),R("option",{value:a},L(a>=0?n.gameStore.uloc.town[a]:"any"),9,F4t))),256))],512),[[fn,e.filterTown]]),B4t,yt(b("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(O(!0),R(W,null,Nt(e.usages,a=>(O(),R("option",{value:a},L(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,$4t))),256))],512),[[fn,e.filterUsage]]),e.filterUsage!=-1?(O(),R("details",z4t,[V4t,(O(!0),R(W,null,Nt(this.houseCrafts[e.filterUsage].groups,(a,s)=>(O(),R("div",null,[V(" level "+L(s+1)+": ",1),b("table",null,[(O(!0),R(W,null,Nt(a,l=>(O(),R("tr",null,[(O(!0),R(W,null,Nt(this.craftItems[l],u=>(O(),R("a",{href:this.userStore.itemUrl+u},[b("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,G4t),V(" "+L(n.gameStore.uloc.item[u]),1)],8,U4t))),256))]))),256))])]))),256))])):st("",!0)]),b("table",null,[j4t,(O(!0),R(W,null,Nt(e.houses,(a,s)=>(O(),R(W,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(O(),R("tr",W4t,[b("td",null,L(a.affTown),1),b("td",null,L(a.parentNode),1),b("td",null,[b("a",{href:"https://bdocodex.com/us/npc/"+a.key},L(n.gameStore.uloc.char[a.key]),9,H4t)]),b("td",null,L(a.CP)+" ("+L(a.CPfull)+")",1),b("td",null,[(O(!0),R(W,null,Nt(a.CraftList,(l,u)=>(O(),R("span",null,[V(L(n.gameStore.uloc.housetype[u]),1),b("sup",null,L(l),1),X4t]))),256))])])):st("",!0)],64))),256))])])}const q4t=$e(R4t,[["render",Y4t]]);zr([gf,bst,yf,_f,bf]);const Z4t={setup(){const e=re();return{gameStore:xt(),userStore:e}},components:{VChart:wf},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready||!this.bestLookup.success)return e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const s=this.bestLookup.indices.indexOf(n);s!==-1&&(o=this.bestLookup.states[s])}const a={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(a),r=a}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:Bt}},Q0=e=>(Vr("data-v-0aa4b1f8"),e=e(),Ur(),e),K4t={class:"limit"},J4t={id:"controls"},Q4t=Q0(()=>b("p",null,[V("data from "),b("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),t6t=V(" town "),e6t=["value"],r6t={id:"fluid"},n6t={id:"sliders"},i6t=Q0(()=>b("span",{class:"lodging"},"lodging",-1)),o6t=V(" needed: "),a6t=["max"],s6t=Q0(()=>b("br",null,null,-1)),l6t=Q0(()=>b("span",{class:"storage"},"storage",-1)),u6t=V(" needed: "),c6t=["max"],f6t={id:"cost"},h6t=Q0(()=>b("div",{style:{clear:"both"}},null,-1)),d6t={key:0,id:"houselist"};function p6t(e,t,r,n,i,o){const a=de("v-chart");return O(),R("main",null,[b("div",K4t,[b("div",J4t,[Q4t,this.gameStore.ready?(O(),R(W,{key:0},[t6t,yt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.tk=s)},[(O(!0),R(W,null,Nt(this.gameStore._tk2tnk,(s,l)=>(O(),R("option",{value:l},L(n.gameStore.uloc.town[l]),9,e6t))),256))],512),[[fn,e.tk]])],64)):st("",!0),b("div",r6t,[b("div",n6t,[i6t,o6t,yt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=s=>e.wantLodging=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,a6t),[[pe,e.wantLodging,void 0,{number:!0}]]),V(" "+L(e.wantLodging)+" \u2192 "+L(o.bestLookup?o.bestLookup.lodging:"?")+" found ",1),s6t,l6t,u6t,yt(b("input",{type:"range",class:"wlong","onUpdate:modelValue":t[2]||(t[2]=s=>e.wantStorage=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,c6t),[[pe,e.wantStorage,void 0,{number:!0}]]),V(" "+L(e.wantStorage)+" \u2192 "+L(o.bestLookup?o.bestLookup.storage:"?")+" found ",1)]),b("div",f6t," cost: "+L(o.bestLookup?o.bestLookup.cost:"?")+" CP ",1)])]),h6t,o.bestLookup?(O(),R("div",d6t,[(O(!0),R(W,null,Nt(o.bestLookup.indices,(s,l)=>(O(),R(W,null,[o.bestLookup.states[l]>0?(O(),R("p",{key:0,class:Jr({storage:o.bestLookup.states[l]==1,lodging:o.bestLookup.states[l]==2})},L(n.gameStore.uloc.char[s]),3)):st("",!0)],64))),256))])):st("",!0),Mt(a,{class:"chart",option:o.chartOption},null,8,["option"])])])}const v6t=$e(Z4t,[["render",p6t],["__scopeId","data-v-0aa4b1f8"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g6t=typeof Object.defineProperty=="function"?Object.defineProperty:null,m6t=g6t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _6t=m6t;function y6t(){try{return _6t({},"x",{}),!0}catch{return!1}}var b6t=y6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w6t=Object.defineProperty,S6t=w6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kf=Object.prototype,GI=kf.toString,jI=kf.__defineGetter__,WI=kf.__defineSetter__,T6t=kf.__lookupGetter__,P6t=kf.__lookupSetter__;function E6t(e,t,r){var n,i,o,a;if(typeof e!="object"||e===null||GI.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||GI.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&(T6t.call(e,t)||P6t.call(e,t)?(n=e.__proto__,e.__proto__=kf,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&jI&&jI.call(e,t,r.get),a&&WI&&WI.call(e,t,r.set),e}var A6t=E6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k6t=b6t,C6t=S6t,M6t=A6t,mT;k6t()?mT=C6t:mT=M6t;var VV=mT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x6t=VV;function L6t(e,t,r){x6t(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var I6t=L6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O6t=I6t,R6t=O6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var D6t=VV;function N6t(e,t,r){D6t(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var F6t=N6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B6t=F6t,pr=B6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $6t=Math.floor,z6t=$6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V6t=z6t,Ln=V6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var U6t=Ln;function G6t(e){return U6t(e)===e}var j6t=G6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W6t=j6t,Ns=W6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H6t=4294967295>>>0,X6t=H6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y6t=Ns,q6t=X6t;function Z6t(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&Y6t(e.length)&&e.length>=0&&e.length<=q6t}var K6t=Z6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J6t=K6t,Q6t=J6t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t5t=Q6t;function e5t(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!t5t(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var r5t=e5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n5t=r5t,i5t=n5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function o5t(e){return typeof e=="number"}var UV=o5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function a5t(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var s5t=a5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l5t=s5t,u5t=l5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c5t=u5t,f5t=c5t();function h5t(){return f5t&&typeof Symbol.toStringTag=="symbol"}var d5t=h5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var p5t=d5t,N_=p5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v5t=Object.prototype.toString,GV=v5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g5t=GV;function m5t(e){return g5t.call(e)}var _5t=m5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y5t=Object.prototype.hasOwnProperty;function b5t(e,t){return e==null?!1:y5t.call(e,t)}var w5t=b5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var S5t=w5t,F_=S5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var T5t=typeof Symbol=="function"?Symbol.toStringTag:"",P5t=T5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E5t=F_,Eh=P5t,Db=GV;function A5t(e){var t,r,n;if(e==null)return Db.call(e);r=e[Eh],t=E5t(e,Eh);try{e[Eh]=void 0}catch{return Db.call(e)}return n=Db.call(e),t?e[Eh]=r:delete e[Eh],n}var k5t=A5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C5t=N_,M5t=_5t,x5t=k5t,_T;C5t()?_T=x5t:_T=M5t;var Gi=_T;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var L5t=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var I5t=L5t,BA=I5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var O5t=BA,R5t=O5t.prototype.toString,D5t=R5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var N5t=D5t;function F5t(e){try{return N5t.call(e),!0}catch{return!1}}var B5t=F5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $5t=N_,z5t=Gi,V5t=BA,U5t=B5t,G5t=$5t();function j5t(e){return typeof e=="object"?e instanceof V5t?!0:G5t?U5t(e):z5t(e)==="[object Number]":!1}var jV=j5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W5t=UV,H5t=jV;function X5t(e){return W5t(e)||H5t(e)}var Y5t=X5t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WV=pr,$A=Y5t,q5t=UV,Z5t=jV;WV($A,"isPrimitive",q5t);WV($A,"isObject",Z5t);var Cf=$A;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HV=pr,zA=i5t,VA=Cf,K5t=zA(VA.isPrimitive),J5t=zA(VA.isObject),UA=zA(VA);HV(UA,"primitives",K5t);HV(UA,"objects",J5t);var Q5t=UA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var txt=Number.POSITIVE_INFINITY,Ne=txt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ext=BA,rxt=ext.NEGATIVE_INFINITY,Er=rxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nxt=Ne,ixt=Er,oxt=Ns;function axt(e){return e<nxt&&e>ixt&&oxt(e)}var XV=axt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sxt=Cf.isPrimitive,lxt=XV;function uxt(e){return sxt(e)&&lxt(e)}var YV=uxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cxt=Cf.isObject,fxt=XV;function hxt(e){return cxt(e)&&fxt(e.valueOf())}var qV=hxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dxt=YV,pxt=qV;function vxt(e){return dxt(e)||pxt(e)}var gxt=vxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZV=pr,GA=gxt,mxt=YV,_xt=qV;ZV(GA,"isPrimitive",mxt);ZV(GA,"isObject",_xt);var B_=GA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yxt=B_.isPrimitive;function bxt(e){return yxt(e)&&e>=0}var KV=bxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wxt=B_.isObject;function Sxt(e){return wxt(e)&&e.valueOf()>=0}var JV=Sxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Txt=KV,Pxt=JV;function Ext(e){return Txt(e)||Pxt(e)}var Axt=Ext;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QV=pr,jA=Axt,kxt=KV,Cxt=JV;QV(jA,"isPrimitive",kxt);QV(jA,"isObject",Cxt);var Mxt=jA;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xxt(e){return e!==e}var Lxt=xxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ixt=Lxt,Zt=Ixt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Oxt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var tU=Oxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rxt=tU;function Dxt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(a){return Rxt(e,a)}}var Nxt=Dxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fxt=pr,eU=tU,Bxt=Nxt;Fxt(eU,"factory",Bxt);var Fs=eU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $xt=Gi,zxt=typeof Uint32Array=="function";function Vxt(e){return zxt&&e instanceof Uint32Array||$xt(e)==="[object Uint32Array]"}var Uxt=Vxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gxt=Uxt,jxt=Gxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Wxt=4294967295,Hxt=Wxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xxt=typeof Uint32Array=="function"?Uint32Array:null,Yxt=Xxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qxt=jxt,Nb=Hxt,HI=Yxt;function Zxt(){var e,t;if(typeof HI!="function")return!1;try{t=[1,3.14,-3.14,Nb+1,Nb+2],t=new HI(t),e=qxt(t)&&t[0]===1&&t[1]===3&&t[2]===Nb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var Kxt=Zxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Jxt=Kxt,Qxt=Jxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tLt=typeof Uint32Array=="function"?Uint32Array:void 0,eLt=tLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rLt(){throw new Error("not implemented")}var nLt=rLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iLt=Qxt,oLt=eLt,aLt=nLt,yT;iLt()?yT=oLt:yT=aLt;var Mf=yT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sLt=Gi,lLt=typeof Float64Array=="function";function uLt(e){return lLt&&e instanceof Float64Array||sLt(e)==="[object Float64Array]"}var cLt=uLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fLt=cLt,hLt=fLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dLt=typeof Float64Array=="function"?Float64Array:null,pLt=dLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vLt=hLt,XI=pLt;function gLt(){var e,t;if(typeof XI!="function")return!1;try{t=new XI([1,3.14,-3.14,NaN]),e=vLt(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var mLt=gLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Lt=mLt,yLt=_Lt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bLt=typeof Float64Array=="function"?Float64Array:void 0,wLt=bLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SLt(){throw new Error("not implemented")}var TLt=SLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PLt=yLt,ELt=wLt,ALt=TLt,bT;PLt()?bT=ELt:bT=ALt;var xf=bT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kLt=Gi,CLt=typeof Uint8Array=="function";function MLt(e){return CLt&&e instanceof Uint8Array||kLt(e)==="[object Uint8Array]"}var xLt=MLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LLt=xLt,ILt=LLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OLt=255,RLt=OLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DLt=typeof Uint8Array=="function"?Uint8Array:null,NLt=DLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FLt=ILt,Fb=RLt,YI=NLt;function BLt(){var e,t;if(typeof YI!="function")return!1;try{t=[1,3.14,-3.14,Fb+1,Fb+2],t=new YI(t),e=FLt(t)&&t[0]===1&&t[1]===3&&t[2]===Fb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var $Lt=BLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zLt=$Lt,VLt=zLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ULt=typeof Uint8Array=="function"?Uint8Array:void 0,GLt=ULt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jLt(){throw new Error("not implemented")}var WLt=jLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HLt=VLt,XLt=GLt,YLt=WLt,wT;HLt()?wT=XLt:wT=YLt;var qLt=wT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZLt=Gi,KLt=typeof Uint16Array=="function";function JLt(e){return KLt&&e instanceof Uint16Array||ZLt(e)==="[object Uint16Array]"}var QLt=JLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tIt=QLt,eIt=tIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rIt=65535,nIt=rIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iIt=typeof Uint16Array=="function"?Uint16Array:null,oIt=iIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aIt=eIt,Bb=nIt,qI=oIt;function sIt(){var e,t;if(typeof qI!="function")return!1;try{t=[1,3.14,-3.14,Bb+1,Bb+2],t=new qI(t),e=aIt(t)&&t[0]===1&&t[1]===3&&t[2]===Bb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var lIt=sIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uIt=lIt,cIt=uIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fIt=typeof Uint16Array=="function"?Uint16Array:void 0,hIt=fIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dIt(){throw new Error("not implemented")}var pIt=dIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vIt=cIt,gIt=hIt,mIt=pIt,ST;vIt()?ST=gIt:ST=mIt;var _It=ST;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yIt=qLt,bIt=_It,wIt={uint16:bIt,uint8:yIt},SIt=wIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZI=SIt,rU;function TIt(){var e,t;return e=new ZI.uint16(1),e[0]=4660,t=new ZI.uint8(e.buffer),t[0]===52}rU=TIt();var PIt=rU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EIt=PIt,Lf=EIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AIt=Lf,TT;AIt===!0?TT=1:TT=0;var kIt=TT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CIt=Mf,MIt=xf,xIt=kIt,nU=new MIt(1),LIt=new CIt(nU.buffer);function IIt(e){return nU[0]=e,LIt[xIt]}var OIt=IIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RIt=OIt,oi=RIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DIt=Lf,PT;DIt===!0?PT=1:PT=0;var NIt=PT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FIt=Mf,BIt=xf,$It=NIt,ET=new BIt(1),zIt=new FIt(ET.buffer);function VIt(e,t){return ET[0]=e,zIt[$It]=t>>>0,ET[0]}var UIt=VIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GIt=UIt,tp=GIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jIt=1023,Su=jIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WIt=.34657359027997264,HIt=WIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XIt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var YIt=XIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var qIt=Zt,$b=oi,zv=tp,KI=Ne,ZIt=Er,KIt=Su,JIt=HIt,QIt=YIt,tOt=709.782712893384,zb=.6931471803691238,Vb=19082149292705877e-26,JI=1.4426950408889634,eOt=38.816242111356935,rOt=1.0397207708399179;function nOt(e){var t,r,n,i,o,a,s,l,u,c,f,h;if(e===KI||qIt(e))return e;if(e===ZIt)return-1;if(e===0)return e;if(e<0?(r=!0,s=-e):(r=!1,s=e),s>=eOt){if(r)return-1;if(s>=tOt)return KI}if(o=$b(s)|0,s>JIt)s<rOt?r?(n=e+zb,i=-Vb,h=-1):(n=e-zb,i=Vb,h=1):(r?h=JI*e-.5:h=JI*e+.5,h|=0,c=h,n=e-c*zb,i=c*Vb),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*QIt(l),c=3-a*t,f=l*((a-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(s=1-(f-e),n=$b(s)+(h<<20)|0,s=zv(s,n),s-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=zv(c,n),s=c-(f-e)):(n=KIt-h<<20|0,c=zv(c,n),s=e-(f+c),s+=1),n=$b(s)+(h<<20)|0,zv(s,n)))}var iOt=nOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oOt=iOt,If=oOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aOt(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var sOt=aOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var lOt=Zt,QI=oi,tO=tp,uOt=Ne,cOt=Er,eO=Su,fOt=sOt,Ub=.6931471803691238,Gb=19082149292705877e-26,hOt=.41421356237309503,dOt=-.2928932188134525,pOt=1862645149230957e-24,vOt=5551115123125783e-32,gOt=9007199254740992,mOt=.6666666666666666;function _Ot(e){var t,r,n,i,o,a,s,l,u,c;if(e<-1||lOt(e))return NaN;if(e===-1)return cOt;if(e===uOt||e===0)return e;if(e<0?n=-e:n=e,c=1,n<hOt){if(n<pOt)return n<vOt?e:e-e*e*.5;e>dOt&&(c=0,i=e,r=1)}return c!==0&&(n<gOt?(u=1+e,r=QI(u),c=(r>>20)-eO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=QI(u),c=(r>>20)-eO,o=0),r&=1048575,r<434334?u=tO(u,r|1072693248):(c+=1,u=tO(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*Gb,c*Ub+o):(l=t*(1-mOt*i),c*Ub-(l-(c*Gb+o)-i)):(a=i/(2+i),s=a*a,l=s*fOt(s),c===0?i-(t-a*(t+l)):c*Ub-(t-(a*(t+l)+(c*Gb+o))-i))}var yOt=_Ot;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bOt=yOt,In=bOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wOt=Math.sqrt,SOt=wOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TOt=SOt,tr=TOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var POt=.7853981633974483,iU=POt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EOt(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var AOt=EOt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kOt(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var COt=kOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var MOt=Zt,xOt=tr,rO=iU,LOt=AOt,IOt=COt,OOt=6123233995736766e-32;function ROt(e){var t,r,n,i,o;if(MOt(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*IOt(r),r=xOt(r+r),o=rO-r,r=r*i-OOt,o-=r,o+=rO;else{if(n<1e-8)return e;r=n*n,o=r*LOt(r),o=n*o+n}return t?-o:o}var DOt=ROt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NOt=DOt,WA=NOt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FOt(e){return Math.abs(e)}var BOt=FOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Ot=BOt,he=$Ot;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zOt=Math.ceil,VOt=zOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UOt=VOt,oU=UOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GOt=Ln,jOt=oU;function WOt(e){return e<0?jOt(e):GOt(e)}var HOt=WOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XOt=HOt,HA=XOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YOt=1023,qOt=YOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZOt=-1023,KOt=ZOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JOt=-1074,QOt=JOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tRt=Ne,eRt=Er;function rRt(e){return e===tRt||e===eRt}var nRt=rRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iRt=nRt,Of=iRt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oRt=2147483648>>>0,aRt=oRt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sRt=2147483647>>>0,$_=sRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lRt=Lf,aU,AT,kT;lRt===!0?(AT=1,kT=0):(AT=0,kT=1);aU={HIGH:AT,LOW:kT};var uRt=aU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cRt=Mf,fRt=xf,sU=uRt,lU=new fRt(1),nO=new cRt(lU.buffer),hRt=sU.HIGH,dRt=sU.LOW;function pRt(e,t,r,n){return lU[0]=e,t[n]=nO[hRt],t[n+r]=nO[dRt],t}var uU=pRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vRt=uU;function gRt(e){return vRt(e,[0>>>0,0>>>0],1,0)}var mRt=gRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Rt=pr,cU=mRt,yRt=uU;_Rt(cU,"assign",yRt);var XA=cU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bRt=Lf,fU,CT,MT;bRt===!0?(CT=1,MT=0):(CT=0,MT=1);fU={HIGH:CT,LOW:MT};var wRt=fU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SRt=Mf,TRt=xf,hU=wRt,dU=new TRt(1),iO=new SRt(dU.buffer),PRt=hU.HIGH,ERt=hU.LOW;function ARt(e,t){return iO[PRt]=e,iO[ERt]=t,dU[0]}var kRt=ARt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CRt=kRt,YA=CRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MRt=aRt,xRt=$_,LRt=XA,IRt=oi,ORt=YA,jb=[0,0];function RRt(e,t){var r,n;return LRt.assign(e,jb,1,0),r=jb[0],r&=xRt,n=IRt(t),n&=MRt,r|=n,ORt(r,jb[1])}var DRt=RRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NRt=DRt,qA=NRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FRt=22250738585072014e-324,Tu=FRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BRt=Tu,$Rt=Of,zRt=Zt,VRt=he,URt=4503599627370496;function GRt(e,t,r,n){return zRt(e)||$Rt(e)?(t[n]=e,t[n+r]=0,t):e!==0&&VRt(e)<BRt?(t[n]=e*URt,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var pU=GRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jRt=pU;function WRt(e){return jRt(e,[0,0],1,0)}var HRt=WRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XRt=pr,vU=HRt,YRt=pU;XRt(vU,"assign",YRt);var qRt=vU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZRt=2146435072,KRt=ZRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JRt=oi,QRt=KRt,tDt=Su;function eDt(e){var t=JRt(e);return t=(t&QRt)>>>20,t-tDt|0}var rDt=eDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nDt=rDt,iDt=nDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oDt=Ne,aDt=Er,sDt=Su,lDt=qOt,uDt=KOt,cDt=QOt,fDt=Zt,hDt=Of,dDt=qA,pDt=qRt.assign,vDt=iDt,gDt=XA,mDt=YA,_Dt=2220446049250313e-31,yDt=2148532223>>>0,Wb=[0,0],Hb=[0,0];function bDt(e,t){var r,n;return t===0||e===0||fDt(e)||hDt(e)?e:(pDt(e,Wb,1,0),e=Wb[0],t+=Wb[1],t+=vDt(e),t<cDt?dDt(0,e):t>lDt?e<0?aDt:oDt:(t<=uDt?(t+=52,n=_Dt):n=1,gDt.assign(e,Hb,1,0),r=Hb[0],r&=yDt,r|=t+sDt<<20,n*mDt(r,Hb[1])))}var wDt=bDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SDt=wDt,Rf=SDt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TDt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var PDt=TDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var EDt=Rf,ADt=PDt;function kDt(e,t,r){var n,i,o,a;return n=e-t,i=n*n,o=n-i*ADt(i),a=1-(t-n*o/(2-o)-e),EDt(a,r)}var CDt=kDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var MDt=Zt,oO=HA,xDt=Er,aO=Ne,LDt=CDt,IDt=.6931471803691238,ODt=19082149292705877e-26,sO=1.4426950408889634,RDt=709.782712893384,DDt=-745.1332191019411,gU=1/(1<<28),NDt=-gU;function FDt(e){var t,r,n;return MDt(e)||e===aO?e:e===xDt?0:e>RDt?aO:e<DDt?0:e>NDt&&e<gU?1+e:(e<0?n=oO(sO*e-.5):n=oO(sO*e+.5),t=e-n*IDt,r=n*ODt,LDt(t,r,n))}var BDt=FDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Dt=BDt,Ve=$Dt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zDt=Ns;function VDt(e){return zDt(e/2)}var UDt=VDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GDt=UDt,jDt=GDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lO=jDt;function WDt(e){return e>0?lO(e-1):lO(e+1)}var HDt=WDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XDt=HDt,ZA=XDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YDt=Lf,xT;YDt===!0?xT=0:xT=1;var qDt=xT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZDt=Mf,KDt=xf,JDt=qDt,LT=new KDt(1),QDt=new ZDt(LT.buffer);function t8t(e,t){return LT[0]=e,QDt[JDt]=t>>>0,LT[0]}var e8t=t8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var r8t=e8t,ep=r8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function n8t(e){return e|0}var i8t=n8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o8t=i8t,mU=o8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var uO=ZA,a8t=qA,s8t=Er,Vv=Ne;function l8t(e,t){return t===s8t?Vv:t===Vv?0:t>0?uO(t)?e:0:uO(t)?a8t(Vv,e):Vv}var u8t=l8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var c8t=$_,f8t=oi,h8t=1072693247,Uv=1e300,Gv=1e-300;function d8t(e,t){var r,n;return n=f8t(e),r=n&c8t,r<=h8t?t<0?Uv*Uv:Gv*Gv:t>0?Uv*Uv:Gv*Gv}var p8t=d8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v8t=he,cO=Ne;function g8t(e,t){return e===-1?(e-e)/(e-e):e===1?1:v8t(e)<1==(t===cO)?0:cO}var m8t=g8t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _8t(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var y8t=_8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var b8t=oi,jv=ep,fO=tp,w8t=Su,S8t=y8t,T8t=1048575,hO=1048576,P8t=1072693248,E8t=536870912,A8t=524288,k8t=20,C8t=9007199254740992,M8t=.9617966939259756,x8t=.9617967009544373,L8t=-7028461650952758e-24,I8t=[1,1.5],O8t=[0,.5849624872207642],R8t=[0,1350039202129749e-23];function D8t(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,k;return S=0,r<hO&&(t*=C8t,S-=53,r=b8t(t)),S+=(r>>k8t)-w8t|0,P=r&T8t|0,r=P|P8t|0,P<=235662?k=0:P<767610?k=1:(k=0,S+=1,r-=hO),t=fO(t,r),c=I8t[k],w=t-c,T=1/(t+c),i=w*T,a=jv(i,0),n=(r>>1|E8t)+A8t,n+=k<<18,l=fO(0,n),u=t-(l-c),s=T*(w-a*l-a*u),o=i*i,y=o*o*S8t(o),y+=s*(a+i),o=a*a,l=3+o+y,l=jv(l,0),u=y-(l-3-o),w=a*l,T=s*l+u*i,h=w+T,h=jv(h,0),d=T-(h-w),p=x8t*h,v=L8t*h+d*M8t+R8t[k],f=O8t[k],_=S,g=p+v+f+_,g=jv(g,0),m=v-(g-_-f-p),e[0]=g,e[1]=m,e}var N8t=D8t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F8t(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var B8t=F8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var $8t=ep,z8t=B8t,V8t=1.4426950408889634,U8t=1.4426950216293335,G8t=19259629911266175e-24;function j8t(e,t){var r,n,i,o,a,s;return i=t-1,o=i*i*z8t(i),a=U8t*i,s=i*G8t-o*V8t,n=a+s,n=$8t(n,0),r=s-(n-a),e[0]=n,e[1]=r,e}var W8t=j8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var H8t=.6931471805599453,X8t=H8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Y8t=1048575,q8t=Y8t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Z8t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var K8t=Z8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var J8t=oi,dO=tp,Q8t=ep,t7t=mU,e7t=Rf,r7t=X8t,pO=Su,vO=$_,gO=q8t,n7t=K8t,mO=1048576,i7t=1071644672,Ah=20,o7t=.6931471824645996,a7t=-1904654299957768e-24;function s7t(e,t,r){var n,i,o,a,s,l,u,c,f,h,d;return h=e&vO|0,d=(h>>Ah)-pO|0,f=0,h>i7t&&(f=e+(mO>>d+1)>>>0,d=((f&vO)>>Ah)-pO|0,n=(f&~(gO>>d))>>>0,o=dO(0,n),f=(f&gO|mO)>>Ah-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=Q8t(o,0),s=o*o7t,l=(r-(o-t))*r7t+o*a7t,c=s+l,u=l-(c-s),o=c*c,i=c-o*n7t(o),a=c*i/(i-2)-(u+c*u),c=1-(a-c),e=J8t(c),e=t7t(e),e+=f<<Ah>>>0,e>>Ah<=0?c=e7t(c,f):c=dO(c,e),c}var l7t=s7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var _O=Zt,yO=ZA,bO=Of,u7t=Ns,wO=tr,c7t=he,Xb=XA,f7t=ep,SO=mU,h7t=Er,d7t=Ne,Yb=$_,p7t=u8t,v7t=p8t,g7t=m8t,m7t=N8t,_7t=W8t,y7t=l7t,b7t=1072693247,w7t=1105199104,S7t=1139802112,TO=1083179008,T7t=1072693248,P7t=1083231232,E7t=3230714880>>>0,PO=31,Ya=1e300,qa=1e-300,A7t=8008566259537294e-32,Wo=[0,0],EO=[0,0];function _U(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,g,m;if(_O(e)||_O(t))return NaN;if(Xb.assign(t,Wo,1,0),s=Wo[0],l=Wo[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return wO(e);if(t===-.5)return 1/wO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(bO(t))return g7t(e,t)}if(Xb.assign(e,Wo,1,0),o=Wo[0],a=Wo[1],a===0){if(o===0)return p7t(e,t);if(e===1)return 1;if(e===-1&&yO(t))return-1;if(bO(e))return e===h7t?_U(-0,-t):t<0?0:d7t}if(e<0&&u7t(t)===!1)return(e-e)/(e-e);if(i=c7t(e),r=o&Yb|0,n=s&Yb|0,u=o>>>PO|0,c=s>>>PO|0,u&&yO(t)?u=-1:u=1,n>w7t){if(n>S7t)return v7t(e,t);if(r<b7t)return c===1?u*Ya*Ya:u*qa*qa;if(r>T7t)return c===0?u*Ya*Ya:u*qa*qa;p=_7t(EO,i)}else p=m7t(EO,i,r);if(f=f7t(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,Xb.assign(v,Wo,1,0),g=SO(Wo[0]),m=SO(Wo[1]),g>=TO){if((g-TO|m)!==0||d+A7t>v-h)return u*Ya*Ya}else if((g&Yb)>=P7t&&((g-E7t|m)!==0||d<=v-h))return u*qa*qa;return v=y7t(g,h,d),u*v}var k7t=_U;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C7t=k7t,er=C7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var M7t=2.718281828459045,Df=M7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x7t=2220446049250313e-31,Ma=x7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L7t(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var I7t=L7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AO=Zt,O7t=In,R7t=tr,D7t=he,N7t=Ve,qb=er,F7t=Df,Zb=Ma,Kb=I7t,Jb=10.900511;function B7t(e,t){var r,n,i,o,a,s,l;return AO(e)||AO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<Zb?(a=l/e,a/=t,a):l===e&&t<Zb?1/t:l===t&&e<Zb?1/e:(e<t&&(s=t,t=e,e=s),n=e+Jb-.5,i=t+Jb-.5,o=l+Jb-.5,a=Kb(e)*(Kb(t)/Kb(l)),r=e-.5-t,D7t(t*r)<o*100&&e>100?a*=N7t(r*O7t(-t/o)):a*=qb(n/o,r),o>1e10?a*=qb(n/o*(i/o),t):a*=qb(n*i/(o*o),t),a*=R7t(F7t/i),a))}var $7t=B7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z7t=$7t,yU=z7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V7t=Ne;function U7t(e){return e===0&&1/e===V7t}var G7t=U7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var j7t=G7t,W7t=j7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kO=W7t,Qb=Zt,H7t=Er,Wv=Ne;function X7t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return Qb(e)||Qb(t)?NaN:e===Wv||t===Wv?Wv:e===t&&e===0?kO(e)?e:t:e>t?e:t;for(n=H7t,o=0;o<r;o++){if(i=arguments[o],Qb(i)||i===Wv)return i;(i>n||i===n&&i===0&&kO(i))&&(n=i)}return n}var Y7t=X7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q7t=Y7t,Pu=q7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z7t=Er;function K7t(e){return e===0&&1/e===Z7t}var J7t=K7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q7t=J7t,bU=Q7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CO=bU,tw=Zt,Hv=Er,t9t=Ne;function e9t(e,t){var r,n,i,o;if(r=arguments.length,r===2)return tw(e)||tw(t)?NaN:e===Hv||t===Hv?Hv:e===t&&e===0?CO(e)?e:t:e<t?e:t;for(n=t9t,o=0;o<r;o++){if(i=arguments[o],tw(i)||i===Hv)return i;(i<n||i===n&&i===0&&CO(i))&&(n=i)}return n}var r9t=e9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n9t=r9t,Bs=n9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i9t=17976931348623157e292,Nf=i9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o9t=2147483647,a9t=o9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s9t=1.5707963267948966,KA=s9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l9t=3.141592653589793,$s=l9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function u9t(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var c9t=u9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function f9t(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var h9t=f9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var d9t=c9t,p9t=h9t;function v9t(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*d9t(o),n+=i*i*p9t(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var g9t=v9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m9t=g9t,wU=m9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var MO=-.16666666666666632,_9t=.00833333333332249,y9t=-.0001984126982985795,b9t=27557313707070068e-22,w9t=-25050760253406863e-24,S9t=158969099521155e-24;function T9t(e,t){var r,n,i,o;return o=e*e,i=o*o,r=_9t+o*(y9t+o*b9t)+o*i*(w9t+o*S9t),n=o*e,t===0?e+n*(MO+o*r):e-(o*(.5*t-n*r)-t-n*MO)}var P9t=T9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E9t=P9t,SU=E9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var A9t=Lf,IT;A9t===!0?IT=0:IT=1;var k9t=IT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var C9t=Mf,M9t=xf,x9t=k9t,TU=new M9t(1),L9t=new C9t(TU.buffer);function I9t(e){return TU[0]=e,L9t[x9t]}var O9t=I9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R9t=O9t,D9t=R9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function N9t(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var F9t=N9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var B9t=F9t,$9t=B9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z9t=$9t;function V9t(e){return z9t(0,e)}var U9t=V9t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var G9t=U9t,j9t=G9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var W9t=Ln,Xv=Rf,z_=j9t,PU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],H9t=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],ew=16777216,rw=5960464477539063e-23,Yv=z_(20),xO=z_(20),qv=z_(20),mr=z_(20);function EU(e,t,r,n,i,o,a,s,l){var u,c,f,h,d,p,v,g,m;for(h=o,m=n[r],g=r,d=0;g>0;d++)c=rw*m|0,mr[d]=m-ew*c|0,m=n[g-1]+c,g-=1;if(m=Xv(m,i),m-=8*W9t(m*.125),v=m|0,m-=v,f=0,i>0?(d=mr[r-1]>>24-i,v+=d,mr[r-1]-=d<<24-i,f=mr[r-1]>>23-i):i===0?f=mr[r-1]>>23:m>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)g=mr[d],u===0?g!==0&&(u=1,mr[d]=16777216-g):mr[d]=16777215-g;if(i>0)switch(i){case 1:mr[r-1]&=8388607;break;case 2:mr[r-1]&=4194303;break}f===2&&(m=1-m,u!==0&&(m-=Xv(1,i)))}if(m===0){for(g=0,d=r-1;d>=o;d--)g|=mr[d];if(g===0){for(p=1;mr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[s+d]=PU[a+d],c=0,g=0;g<=s;g++)c+=e[g]*l[s+(d-g)];n[d]=c}return r+=p,EU(e,t,r,n,i,o,a,s,l)}}if(m===0)for(r-=1,i-=24;mr[r]===0;)r-=1,i-=24;else m=Xv(m,-i),m>=ew?(c=rw*m|0,mr[r]=m-ew*c|0,r+=1,i+=24,mr[r]=c):mr[r]=m|0;for(c=Xv(1,i),d=r;d>=0;d--)n[d]=c*mr[d],c*=rw;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=H9t[p]*n[d+p];qv[r-d]=c}for(c=0,d=r;d>=0;d--)c+=qv[d];for(f===0?t[0]=c:t[0]=-c,c=qv[0]-c,d=1;d<=r;d++)c+=qv[d];return f===0?t[1]=c:t[1]=-c,v&7}function X9t(e,t,r,n){var i,o,a,s,l,u,c,f,h;for(o=4,s=n-1,a=(r-3)/24|0,a<0&&(a=0),u=r-24*(a+1),f=a-s,h=s+o,c=0;c<=h;c++)f<0?Yv[c]=0:Yv[c]=PU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=s;f++)i+=e[f]*Yv[s+(c-f)];xO[c]=i}return l=o,EU(e,t,l,xO,u,o,a,s,Yv)}var Y9t=X9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q9t=Math.round,Z9t=q9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var K9t=Z9t,V_=K9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var J9t=V_,LO=oi,Q9t=.6366197723675814,tNt=1.5707963267341256,eNt=6077100506506192e-26,rNt=6077100506303966e-26,nNt=20222662487959506e-37,iNt=20222662487111665e-37,oNt=84784276603689e-45,IO=2047;function aNt(e,t,r){var n,i,o,a,s,l,u;return i=J9t(e*Q9t),a=e-i*tNt,s=i*eNt,u=t>>20|0,r[0]=a-s,n=LO(r[0]),l=u-(n>>20&IO),l>16&&(o=a,s=i*rNt,a=o-s,s=i*nNt-(o-a-s),r[0]=a-s,n=LO(r[0]),l=u-(n>>20&IO),l>49&&(o=a,s=i*iNt,a=o-s,s=i*oNt-(o-a-s),r[0]=a-s)),r[1]=a-r[0]-s,i}var sNt=aNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var lNt=oi,uNt=D9t,cNt=YA,fNt=Y9t,Zv=sNt,hNt=0,dNt=16777216,Za=1.5707963267341256,Rl=6077100506506192e-26,Kv=2*Rl,Jv=3*Rl,Qv=4*Rl,pNt=2147483647,vNt=2146435072,gNt=1048575,mNt=598523,_Nt=1072243195,yNt=1073928572,bNt=1074752122,wNt=1074977148,SNt=1075183036,TNt=1075388923,PNt=1075594811,ENt=1094263291,kh=[0,0,0],Ch=[0,0];function ANt(e,t){var r,n,i,o,a,s,l,u;if(i=lNt(e),o=i&pNt|0,o<=_Nt)return t[0]=e,t[1]=0,0;if(o<=bNt)return(o&gNt)===mNt?Zv(e,o,t):o<=yNt?e>0?(u=e-Za,t[0]=u-Rl,t[1]=u-t[0]-Rl,1):(u=e+Za,t[0]=u+Rl,t[1]=u-t[0]+Rl,-1):e>0?(u=e-2*Za,t[0]=u-Kv,t[1]=u-t[0]-Kv,2):(u=e+2*Za,t[0]=u+Kv,t[1]=u-t[0]+Kv,-2);if(o<=PNt)return o<=SNt?o===wNt?Zv(e,o,t):e>0?(u=e-3*Za,t[0]=u-Jv,t[1]=u-t[0]-Jv,3):(u=e+3*Za,t[0]=u+Jv,t[1]=u-t[0]+Jv,-3):o===TNt?Zv(e,o,t):e>0?(u=e-4*Za,t[0]=u-Qv,t[1]=u-t[0]-Qv,4):(u=e+4*Za,t[0]=u+Qv,t[1]=u-t[0]+Qv,-4);if(o<ENt)return Zv(e,o,t);if(o>=vNt)return t[0]=NaN,t[1]=NaN,0;for(r=uNt(e),n=(o>>20)-1046,u=cNt(o-(n<<20|0),r),s=0;s<2;s++)kh[s]=u|0,u=(u-kh[s])*dNt;for(kh[2]=u,a=3;kh[a-1]===hNt;)a-=1;return l=fNt(kh,Ch,n,a),e<0?(t[0]=-Ch[0],t[1]=-Ch[1],-l):(t[0]=Ch[0],t[1]=Ch[1],l)}var kNt=ANt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var CNt=kNt,AU=CNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var MNt=oi,OO=wU,nw=SU,xNt=AU,LNt=2147483647,INt=2146435072,ONt=1072243195,RNt=1045430272,Ho=[0,0];function DNt(e){var t,r;if(t=MNt(e),t&=LNt,t<=ONt)return t<RNt?e:nw(e,0);if(t>=INt)return NaN;switch(r=xNt(e,Ho),r&3){case 0:return nw(Ho[0],Ho[1]);case 1:return OO(Ho[0],Ho[1]);case 2:return-nw(Ho[0],Ho[1]);default:return-OO(Ho[0],Ho[1])}}var NNt=DNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FNt=NNt,rp=FNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BNt=2.5066282746310007,U_=BNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Nt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var zNt=$Nt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var VNt=U_,RO=er,UNt=Ve,GNt=zNt,jNt=143.01608;function WNt(e){var t,r,n;return t=1/e,t=1+t*GNt(t),r=UNt(e),e>jNt?(n=RO(e,.5*e-.25),r=n*(n/r)):r=RO(e,e-.5)/r,VNt*r*t}var HNt=WNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XNt=.5772156649015329,YNt=XNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var qNt=YNt;function ZNt(e,t){return t/((1+qNt*e)*e)}var KNt=ZNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JNt(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var QNt=JNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var tFt=Zt,eFt=Ns,rFt=bU,DO=he,nFt=Ln,iFt=rp,NO=Ne,FO=Er,BO=$s,$O=HNt,zO=KNt,oFt=QNt;function aFt(e){var t,r,n,i;if(eFt(e)&&e<0||e===FO||tFt(e))return NaN;if(e===0)return rFt(e)?FO:NO;if(e>171.61447887182297)return NO;if(e<-170.5674972726612)return 0;if(r=DO(e),r>33)return e>=0?$O(e):(n=nFt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*iFt(BO*i),t*BO/(DO(i)*$O(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return zO(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return zO(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*oFt(e))}var sFt=aFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lFt=sFt,Oo=lFt;const uFt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cFt=Zt,fFt=Ns,hFt=Oo,dFt=Ne,pFt=uFt,vFt=170;function gFt(e){return cFt(e)?NaN:fFt(e)?e<0?NaN:e<=vFt?pFt[e]:dFt:hFt(e+1)}var mFt=gFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Ft=mFt,kU=_Ft;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yFt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var bFt=yFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var wFt=bFt,SFt=wFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TFt=SFt,PFt=TFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EFt=10.900511,np=EFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var VO=PFt,AFt=Oo,UO=In,GO=he,jO=Ve,WO=er,kFt=Ma,CFt=Df,MFt=np,HO=170,xFt=4269068009004705e289;function CU(e,t){var r,n,i;return e<kFt?t>HO?(n=CU(t,HO-t),n*=e,n*=xFt,1/n):1/(e*AFt(e+t)):(i=e+MFt-.5,e+t===e?GO(t)<10?r=jO((.5-e)*UO(t/i)):r=1:(GO(t)<10?r=jO((.5-e)*UO(t/i)):r=WO(i/(i+t),e-.5),r*=VO(e)/VO(e+t)),r*=WO(CFt/(i+t),t),r)}var LFt=CU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IFt=he,XO=Ln,YO=Oo,qO=kU,OFt=LFt,ZO=170;function RFt(e,t){var r,n,i;if(e<=0||e+t<=0)return YO(e)/YO(e+t);if(n=XO(t),n===t){if(i=XO(e),i===e&&e<=ZO&&e+t<=ZO)return qO(i-1)/qO(n+i-1);if(IFt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return OFt(e,t)}var DFt=RFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NFt=DFt,JA=NFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FFt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var BFt=FFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Ft(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var zFt=$Ft;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var KO=oi,VFt=tp,UFt=Zt,GFt=Su,jFt=Er,WFt=BFt,HFt=zFt,tg=.6931471803691238,eg=19082149292705877e-26,XFt=0x40000000000000,YFt=.3333333333333333,JO=1048575,qFt=2146435072,ZFt=1048576,KFt=1072693248;function JFt(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e===0?jFt:UFt(e)||e<0?NaN:(r=KO(e),o=0,r<ZFt&&(o-=54,e*=XFt,r=KO(e)),r>=qFt?e+e:(o+=(r>>20)-GFt|0,r&=JO,l=r+614244&1048576|0,e=VFt(e,r|l^KFt),o+=l>>20|0,s=e-1,(JO&2+r)<3?s===0?o===0?0:o*tg+o*eg:(a=s*s*(.5-YFt*s),o===0?s-a:o*tg-(a-o*eg-s)):(c=s/(2+s),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*WFt(f),n=h*HFt(f),l|=u,a=n+i,l>0?(t=.5*s*s,o===0?s-(t-c*(t+a)):o*tg-(t-(c*(t+a)+o*eg)-s)):o===0?s-c*(s-a):o*tg-(c*(s-a)-o*eg-s))))}var QFt=JFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tBt=QFt,Se=tBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var eBt=oi,iw=wU,QO=SU,rBt=AU,Xo=[0,0],nBt=2147483647,iBt=1072243195,oBt=1044381696,aBt=2146435072;function sBt(e){var t,r;if(t=eBt(e),t&=nBt,t<=iBt)return t<oBt?1:iw(e,0);if(t>=aBt)return NaN;switch(r=rBt(e,Xo),r&3){case 0:return iw(Xo[0],Xo[1]);case 1:return-QO(Xo[0],Xo[1]);case 2:return-iw(Xo[0],Xo[1]);default:return QO(Xo[0],Xo[1])}}var lBt=sBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uBt=lBt,QA=uBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cBt=Zt,fBt=Of,tR=QA,ow=rp,hBt=he,Mh=qA,xh=$s;function dBt(e){var t,r;return cBt(e)?NaN:fBt(e)?NaN:(r=e%2,t=hBt(r),t===0||t===1?Mh(0,r):t<.25?ow(xh*r):t<.75?(t=.5-t,Mh(tR(xh*t),r)):t<1.25?(r=Mh(1,r)-r,ow(xh*r)):t<1.75?(t-=1.5,-Mh(tR(xh*t),r)):(r-=Mh(2,r),ow(xh*r)))}var pBt=dBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vBt=pBt,gBt=vBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mBt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var _Bt=mBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yBt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var bBt=yBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wBt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var SBt=wBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TBt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var PBt=TBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EBt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var ABt=EBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kBt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var CBt=kBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MBt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var xBt=MBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LBt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var IBt=LBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OBt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var RBt=OBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DBt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var NBt=DBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var FBt=Zt,BBt=Of,$Bt=he,Qu=Se,zBt=HA,VBt=gBt,UBt=$s,aw=Ne,GBt=_Bt,jBt=bBt,WBt=SBt,HBt=PBt,XBt=ABt,YBt=CBt,qBt=xBt,ZBt=IBt,KBt=RBt,JBt=NBt,QBt=.07721566490153287,t$t=.3224670334241136,e$t=1,r$t=-.07721566490153287,n$t=.48383612272381005,i$t=-.1475877229945939,o$t=.06462494023913339,a$t=-.07721566490153287,s$t=1,l$t=.4189385332046727,rg=1.4616321449683622,u$t=4503599627370496,c$t=0x400000000000000,f$t=8470329472543003e-37,eR=1.4616321449683622,h$t=-.12148629053584961,d$t=-3638676997039505e-33;function p$t(e){var t,r,n,i,o,a,s,l,u,c,f,h,d;if(FBt(e)||BBt(e))return e;if(e===0)return aw;if(e<0?(t=!0,e=-e):t=!1,e<f$t)return-Qu(e);if(t){if(e>=u$t||(u=VBt(e),u===0))return aw;r=Qu(UBt/$Bt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-Qu(e),e>=rg-1+.27?(f=1-e,n=0):e>=rg-1-.27?(f=e-(eR-1),n=1):(f=e,n=2)):(d=0,e>=rg+.27?(f=2-e,n=0):e>=rg-.27?(f=e-eR,n=1):(f=e-1,n=2)),n){case 0:h=f*f,a=QBt+h*GBt(h),o=h*(t$t+h*jBt(h)),s=f*a+o,d+=s-.5*f;break;case 1:h=f*f,c=h*f,a=n$t+c*XBt(c),o=i$t+c*YBt(c),i=o$t+c*qBt(c),s=h*a-(d$t-c*(o+f*i)),d+=h$t+s;break;case 2:a=f*(a$t+f*ZBt(f)),o=s$t+f*KBt(f),d+=-.5*f+a/o;break}else if(e<8)switch(n=zBt(e),f=e-n,s=f*(r$t+f*HBt(f)),l=e$t+f*WBt(f),d=.5*f+s/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=Qu(h)}else e<c$t?(u=Qu(e),h=1/e,f=h*h,c=l$t+h*JBt(f),d=(e-.5)*(u-1)+c):d=e*(Qu(e)-1);return t&&(d=r-d),d}var v$t=p$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var g$t=v$t,Ff=g$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m$t=14901161193847656e-24,_$t=m$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y$t=709.782712893384,Eu=y$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var b$t=Ve;function w$t(e,t){var r,n,i,o;if(i=b$t(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var S$t=w$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function T$t(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var P$t=T$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function E$t(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var A$t=E$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function k$t(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var C$t=k$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function M$t(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var x$t=M$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function L$t(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var I$t=L$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function O$t(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var R$t=O$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function D$t(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var N$t=D$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function F$t(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var B$t=F$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var $$t=Zt,rR=Ve,z$t=ep,V$t=Ne,U$t=Er,G$t=P$t,j$t=A$t,W$t=C$t,H$t=x$t,X$t=I$t,Y$t=R$t,q$t=N$t,Z$t=B$t,ng=1e-300,K$t=13877787807814457e-33,nR=.8450629115104675,J$t=.12837916709551256,Q$t=1,tzt=-.0023621185607526594,ezt=1,rzt=-.009864944034847148,nzt=1,izt=-.0098649429247001,ozt=1;function azt(e){var t,r,n,i,o,a,s,l;if($$t(e))return NaN;if(e===V$t)return 0;if(e===U$t)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<K$t?1-e:(n=e*e,i=J$t+n*G$t(n),o=Q$t+n*j$t(n),a=i/o,e<.25?1-(e+e*a):(i=e*a,i+=e-.5,.5-i));if(r<1.25)return o=r-1,s=tzt+o*W$t(o),l=ezt+o*H$t(o),t?1+nR+s/l:1-nR-s/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=rzt+o*X$t(o),o=nzt+o*Y$t(o);else{if(e<-6)return 2-ng;i=izt+o*q$t(o),o=ozt+o*Z$t(o)}return n=z$t(r,0),i=rR(-(n*n)-.5625)*rR((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-ng:ng*ng}var szt=azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lzt=szt,MU=lzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uzt=MU,iR=tr,czt=Ve,fzt=$s;function hzt(e,t){var r,n,i,o,a;if(o=uzt(iR(t)),o!==0&&e>1){for(n=czt(-t)/iR(fzt*t),n*=t,r=.5,n/=r,i=n,a=2;a<e;++a)n/=a-r,n*=t,i+=n;o+=i}return o}var dzt=hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pzt=-708.3964185322641,Bf=pzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var tc=Ve,ig=er,vzt=Se,oR=Eu,aR=Bf;function gzt(e,t){var r,n;return n=e*vzt(t),t>=1?n<oR&&-t>aR?r=ig(t,e)*tc(-t):e>=1?r=ig(t/tc(t/e),e):r=tc(n-t):n>aR?r=ig(t,e)*tc(-t):t/e<oR?r=ig(t/tc(t/e),e):r=tc(n-t),r}var mzt=gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _zt=6.283185307179586,xU=_zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function yzt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var bzt=yzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wzt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var Szt=wzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Tzt(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var Pzt=Tzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ezt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var Azt=Ezt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kzt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var Czt=kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Mzt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var xzt=Mzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Lzt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var Izt=Lzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ozt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var Rzt=Ozt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Dzt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var Nzt=Dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Fzt=Fs,Bzt=MU,sw=tr,$zt=Ve,zzt=Se,Vzt=xU,Uzt=bzt,Gzt=Szt,jzt=Pzt,Wzt=Azt,Hzt=Czt,Xzt=xzt,Yzt=Izt,qzt=Rzt,Zzt=Nzt,ui=[0,0,0,0,0,0,0,0,0,0];function Kzt(e,t){var r,n,i,o,a;return n=(t-e)/e,i=-zzt(1+n)+n,o=e*i,a=sw(2*i),t<e&&(a=-a),ui[0]=Uzt(a),ui[1]=Gzt(a),ui[2]=jzt(a),ui[3]=Wzt(a),ui[4]=Hzt(a),ui[5]=Xzt(a),ui[6]=Yzt(a),ui[7]=qzt(a),ui[8]=Zzt(a),ui[9]=-.0005967612901927463,r=Fzt(ui,1/e),r*=$zt(-o)/sw(Vzt*e),t<e&&(r=-r),r+=Bzt(sw(o))/2,r}var Jzt=Kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qzt=eval,tVt=Qzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eVt=tVt;function rVt(){var e;try{eVt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var nVt=rVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iVt=nVt,LU=iVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var og=he,oVt=Ma,aVt=1e6;function sVt(e,t){var r,n,i,o,a,s;if(s={},arguments.length>1&&(s=t),n=s.tolerance||oVt,o=s.maxTerms||aVt,a=s.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(a+=i,og(n*a)>=og(i)||--o===0)break}else do i=e(),a+=i;while(og(n*a)<og(i)&&--o);return a}var lVt=sVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sR=he,uVt=Ma,cVt=1e6;function fVt(e,t){var r,n,i,o,a;a={},arguments.length>1&&(a=t),r=a.tolerance||uVt,i=a.maxTerms||cVt,o=a.initialValue||0;do n=e(),o+=n;while(sR(r*o)<sR(n)&&--i);return o}var hVt=fVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dVt=LU,pVt=lVt,vVt=hVt,OT;dVt()?OT=pVt:OT=vVt;var ek=OT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function gVt(e,t){var r=1,n=e,i=t;return o;function o(){var a=r;return n+=1,r*=i/n,a}}var mVt=gVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _Vt=ek,yVt=mVt;function bVt(e,t,r){var n,i;return r=r||0,i=yVt(e,t),n=_Vt(i,{initialValue:r}),n}var wVt=bVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SVt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var TVt=SVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var PVt=TVt,EVt=PVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AVt=EVt,G_=AVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var kVt=G_,CVt=Ff,MVt=Oo,xVt=In,LVt=tr,IVt=he,Ka=Ve,Lh=er,lw=Pu,uw=Bs,lR=Se,ag=Eu,Ih=Bf,cw=np,OVt=Df;function RVt(e,t){var r,n,i,o,a,s,l;return i=e+cw-.5,l=(t-e-cw+.5)/i,e<1?t<=Ih?Ka(e*lR(t)-t-CVt(e)):Lh(t,e)*Ka(-t)/MVt(e):(IVt(l*l*e)<=100&&e>150?(r=e*(xVt(l)-l)+t*(.5-cw)/i,r=Ka(r)):(o=e*lR(t/i),a=e-t,uw(o,a)<=Ih||lw(o,a)>=ag?(n=a/e,uw(o,a)/2>Ih&&lw(o,a)/2<ag?(s=Lh(t/i,e/2)*Ka(a/2),r=s*s):uw(o,a)/4>Ih&&lw(o,a)/4<ag&&t>e?(s=Lh(t/i,e/4)*Ka(a/4),r=s*s,r*=r):n>Ih&&n<ag?r=Lh(t*Ka(n)/i,e):r=Ka(o+a)):r=Lh(t/i,e)*Ka(a)),r*=LVt(i/OVt)/kVt(e),r)}var DVt=RVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var uR=Zt,cR=he,NVt=If,FVt=Se,BVt=er,$Vt=HA;function zVt(e,t){var r;if(uR(e)||uR(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((cR(t*(e-1))<.5||cR(t)<.2)&&(r=FVt(e)*t,r<.5))return NVt(r)}else if($Vt(t)!==t)return NaN;return BVt(e,t)-1}var VVt=zVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UVt=VVt,GVt=UVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jVt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var WVt=jVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HVt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var XVt=HVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YVt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var qVt=YVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var fw=Se,ZVt=Ma,KVt=WVt,JVt=XVt,QVt=qVt,tUt=.15896368026733398,eUt=.5281534194946289,rUt=.45201730728149414;function nUt(e,t,r){var n,i,o,a;if(e<ZVt)return-fw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=fw(e);while(e>=3);r=e-2}return o=r*(e+1),a=KVt(r),i+=o*tUt+o*a,i}return e<1&&(i+=-fw(e),r=t,t=e,e+=1),e<=1.5?(o=JVt(t),n=t*r,i+=n*eUt+n*o,i):(o=r*t,a=QVt(-r),i+=o*rUt+o*a,i)}var iUt=nUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var fR=Oo,hR=If,oUt=In,aUt=Zt,dR=iUt;function sUt(e){return aUt(e)?NaN:e<0?e<-.5?fR(1+e)-1:hR(-oUt(e)+dR(e+2,e+1,e)):e<2?hR(dR(e+1,e,e-1)):fR(1+e)-1}var lUt=sUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uUt=lUt,cUt=uUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function fUt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,a;function a(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var hUt=fUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dUt=GVt,pUt=ek,vUt=cUt,gUt=hUt;function mUt(e,t,r){var n,i,o,a,s;return i=vUt(e),o=(i+1)/e,a=dUt(t,e),i-=a,i/=e,s=gUt(e,t),a+=1,n=r?o:0,i=-a*pUt(s,{initialValue:(n-i)/a}),r&&(i=-i),[i,o]}var _Ut=mUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yUt=11754943508222875e-54,j_=yUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _1=he,go=j_,bUt=Ma,wUt=1e6;function SUt(e,t,r){var n,i,o,a,s,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),a=u[1],o=u[0],a===0&&(a=go),s=a,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=go),s=u[1]+u[0]/s,s===0&&(s=go),l=1/l,i=s*l,a*=i);while(_1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=go),s=u[1]+u[0]/s,s===0&&(s=go),l=1/l,i=s*l,a*=i);while(u&&_1(i-1)>t&&--r);return o/a}function TUt(e,t,r){var n,i,o,a,s,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=go),a=o,s=0,n===!0)do l=e.next().value,l&&(s=l[1]+l[0]*s,s===0&&(s=go),a=l[1]+l[0]/a,a===0&&(a=go),s=1/s,i=a*s,o*=i);while(l&&_1(i-1)>t&&--r);else do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=go),a=l[1]+l[0]/a,a===0&&(a=go),s=1/s,i=a*s,o*=i);while(l&&_1(i-1)>t&&--r);return o}function PUt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||wUt,i=n.tolerance||bUt,n.keep?TUt(e,i,r):SUt(e,i,r)}var EUt=PUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IU=he,AUt=Ma,zc=j_,kUt=1e6;function CUt(e,t,r){var n,i,o,a,s,l;l=e(),s=l[1],i=l[0],s===0&&(s=zc),o=s,a=0;do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=zc),o=l[1]+l[0]/o,o===0&&(o=zc),a=1/a,n=o*a,s*=n);while(l&&IU(n-1)>t&&--r);return i/s}function MUt(e,t,r){var n,i,o,a,s;s=e(),a=s[1],a===0&&(a=zc),i=a,o=0;do s=e(),s&&(o=s[1]+s[0]*o,o===0&&(o=zc),i=s[1]+s[0]/i,i===0&&(i=zc),o=1/o,n=i*o,a*=n);while(s&&IU(n-1)>t&&--r);return a}function xUt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||AUt,r=n.maxIter||kUt,n.keep?MUt(e,i,r):CUt(e,i,r)}var LUt=xUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IUt=LU,OUt=EUt,RUt=LUt,RT;IUt()?RT=OUt:RT=RUt;var OU=RT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function DUt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var NUt=DUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var FUt=OU,BUt=NUt;function $Ut(e,t){var r=BUt(e,t);return 1/(t-e+1+FUt(r))}var zUt=$Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var VUt=Ff,UUt=Ln,Oh=Oo,pR=he,GUt=Ve,vR=er,ci=Se,jUt=_$t,gR=Nf,WUt=U_,mR=Eu,HUt=Ne,XUt=S$t,YUt=dzt,_R=mzt,qUt=Jzt,hw=wVt,yR=DVt,ZUt=_Ut,bR=zUt,KUt=170;function RU(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,_;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=KUt&&!o)return f&&t*4<e?(h=t*ci(e)-e,h+=ci(bR(t,e))):!f&&t>4*e?(h=t*ci(e)-e,s=0,h+=ci(hw(t,e,s)/t)):(h=RU(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=ci(h)-t+(t-.5)*ci(t),h+=ci(WUt)):(h=t*ci(e)-e,s=0,h+=ci(hw(t,e,s)/t)):h=ci(h)+VUt(t)),h>mR?HUt:GUt(h);switch(c=t<30&&t<=e+1&&e<mR,c?(m=UUt(t),d=m===t,l=d?!1:pR(m-t)===.5):d=l=!1,d&&e>.6?(f=!f,a=0):l&&e>.2?(f=!f,a=1):e<jUt&&t>1?a=6:e<.5?-.4/ci(e)<t?a=2:a=3:e<1.1?e*.75<t?a=2:a=3:(u=!1,o&&t>20&&(p=pR((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?a=5:e-1/(3*e)<t?a=2:(a=4,f=!f)),a){case 0:h=XUt(t,e),o===!1&&(h*=Oh(t));break;case 1:h=YUt(t,e),o===!1&&(h*=Oh(t));break;case 2:h=o?yR(t,e):_R(t,e),h!==0&&(s=0,i=!1,f&&(s=o?1:Oh(t),o||h>=1||gR*h>s?(s/=h,o||t<1||gR/t>s?(s*=-t,i=!0):s=0):s=0)),h*=hw(t,e,s)/t,i&&(f=!1,h=-h);break;case 3:f=!f,g=ZUt(t,e,f),h=g[0],_=g[1],f=!1,o&&(h/=_);break;case 4:h=o?yR(t,e):_R(t,e),h!==0&&(h*=bR(t,e));break;case 5:h=qUt(t,e),e>=t&&(f=!f);break;case 6:h=o?vR(e,t)/Oh(t+1):vR(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:Oh(t),h=v-h),h}var JUt=RU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QUt=JUt,DU=QUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ec=Ve,sg=er,tGt=Se,wR=Eu,SR=Bf;function eGt(e,t){var r,n;return n=e*tGt(t),t>=1?n<wR&&-t>SR?r=sg(t,e)*ec(-t):e>=1?r=sg(t/ec(t/e),e):r=ec(n-t):n>SR?r=sg(t,e)*ec(-t):t/e<wR?r=sg(t/ec(t/e),e):r=ec(n-t),r}var rGt=eGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nGt=G_,iGt=Ff,oGt=Oo,aGt=In,sGt=tr,lGt=he,Ja=Ve,Rh=er,dw=Pu,pw=Bs,TR=Se,lg=Eu,Dh=Bf,vw=np,uGt=Df;function cGt(e,t){var r,n,i,o,a,s,l;return i=e+vw-.5,l=(t-e-vw+.5)/i,e<1?t<=Dh?Ja(e*TR(t)-t-iGt(e)):Rh(t,e)*Ja(-t)/oGt(e):(lGt(l*l*e)<=100&&e>150?(r=e*(aGt(l)-l)+t*(.5-vw)/i,r=Ja(r)):(o=e*TR(t/i),a=e-t,pw(o,a)<=Dh||dw(o,a)>=lg?(n=a/e,pw(o,a)/2>Dh&&dw(o,a)/2<lg?(s=Rh(t/i,e/2)*Ja(a/2),r=s*s):pw(o,a)/4>Dh&&dw(o,a)/4<lg&&t>e?(s=Rh(t/i,e/4)*Ja(a/4),r=s*s,r*=r):n>Dh&&n<lg?r=Rh(t*Ja(n)/i,e):r=Ja(o+a)):r=Rh(t/i,e)*Ja(a)),r*=sGt(i/uGt)/nGt(e),r)}var fGt=cGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var hGt=JA,PR=kU,dGt=DU,pGt=In,ug=he,ER=er,vGt=Se,gGt=Tu,AR=Ma,mGt=rGt,_Gt=fGt,Qa=new Array(30);function yGt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,k;if(h=t-1,P=e+h/2,n<.35?g=pGt(-n):g=vGt(r),k=-P*g,_=_Gt(t,k),_<=gGt)return i;for(a?(s=_/hGt(e,t),s/=ER(P,t)):s=mGt(t,k)/ER(P,t),s*=o,Qa[0]=1,y=dGt(k,t,!0,!0),y/=_,c=i+s*y,u=1,d=g/2,d*=d,p=1,m=4*P*P,f=t,T=1;T<Qa.length;++T){for(u+=2,Qa[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,Qa[T]+=v*Qa[T-w]/PR(l),l+=2;if(Qa[T]/=T,Qa[T]+=h/PR(u),y=(f*(f+1)*y+(k+f+1)*p)/m,p*=d,f+=2,S=s*Qa[T]*y,c+=S,S>1){if(ug(S)<ug(AR*c))break}else if(ug(S/AR)<ug(c))break}return c}var bGt=yGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function wGt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var SGt=wGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gw=he,kR=Pu,TGt=Ne;function PGt(e,t){var r,n,i;if(r=arguments.length,r===0)return TGt;if(r===2)return kR(gw(e),gw(t));for(n=[],i=0;i<r;i++)n.push(gw(arguments[i]));return kR.apply(null,n)}var EGt=PGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AGt=EGt,kGt=AGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mw=he,CR=Bs,CGt=Ne;function MGt(e,t){var r,n,i;if(r=arguments.length,r===0)return CGt;if(r===2)return CR(mw(e),mw(t));for(n=[],i=0;i<r;i++)n.push(mw(arguments[i]));return CR.apply(null,n)}var xGt=MGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LGt=xGt,IGt=LGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _w=G_,OGt=kGt,RGt=IGt,MR=If,ts=In,xR=tr,cg=he,eo=Ve,ro=er,DGt=Bs,Bn=Se,no=Eu,rc=Bf,yw=np,NGt=Df;function FGt(e,t,r,n,i){var o,a,s,l,u,c,f,h,d,p,v,g,m,_;if(!i)return ro(r,e)*ro(n,t);if(m=e+t,l=e+yw-.5,u=t+yw-.5,c=m+yw-.5,o=_w(m),o/=_w(e)*_w(t),o*=xR(u/NGt),o*=xR(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,RGt(f,h)<.2)if(f*h>0||DGt(e,t)<1)cg(f)<.1?o*=eo(e*ts(f)):o*=ro(r*c/l,e),cg(h)<.1?o*=eo(t*ts(h)):o*=ro(n*c/u,t);else if(OGt(f,h)<.5)a=e<t,s=t/e,a&&s*h<.1||!a&&f/s>.1?(d=MR(s*ts(h)),d=f+d+d*f,d=e*ts(d),o*=eo(d)):(d=MR(ts(f)/s),d=h+d+d*h,d=t*ts(d),o*=eo(d));else if(cg(f)<cg(h))if(_=e*ts(f)+t*Bn(n*c/u),_<=rc||_>=no){if(_+=Bn(o),_>=no)return NaN;o=eo(_)}else o*=eo(_);else if(_=t*ts(h)+e*Bn(r*c/l),_<=rc||_>=no){if(_+=Bn(o),_>=no)return NaN;o=eo(_)}else o*=eo(_);else if(v=r*c/l,g=n*c/u,f=e*Bn(v),h=t*Bn(g),f>=no||f<=rc||h>=no||h<=rc)if(e<t)if(p=ro(g,t/e),d=e*(Bn(v)+Bn(p)),d<no&&d>rc)o*=ro(p*v,e);else{if(h+=f+Bn(o),h>=no)return NaN;o=eo(h)}else if(p=ro(v,e/t),d=(Bn(p)+Bn(g))*t,d<no&&d>rc)o*=ro(p*g,t);else{if(h+=f+Bn(o),h>=no)return NaN;o=eo(h)}else o*=ro(v,e)*ro(g,t);return o}var rk=FGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var BGt=OU,$Gt=rk,zGt={keep:!0,maxIter:1e3};function VGt(e,t,r,n){var i=0;return o;function o(){var a,s,l;return s=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,a=e+2*i-1,s/=a*a,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[s,l]}}function UGt(e,t,r,n,i,o){var a,s,l;return a=$Gt(e,t,r,n,i),o&&(o[1]=a),a===0?a:(l=VGt(e,t,r,n),s=BGt(l,zGt),a/s)}var GGt=UGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bw=Ns,LR=Zt,jGt=ZA,WGt=V_;function NU(e,t){var r,n;if(LR(e)||LR(t))return NaN;if(!bw(e)||!bw(t))return NaN;if(t<0)return 0;if(e<0)return r=NU(-e+t-1,t),jGt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return bw(r)?r:WGt(r)}var HGt=NU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XGt=HGt,YGt=XGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var IR=YGt,_l=Ln,Nh=er,qGt=Tu;function ZGt(e,t,r,n){var i,o,a,s,l;if(o=Nh(r,e),o>qGt)for(s=o,l=_l(e-1);l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;else if(a=_l(e*r),a<=t+1&&(a=_l(t+2)),o=Nh(r,a)*Nh(n,e-a),o*=IR(_l(e),_l(a)),o===0)for(l=a-1;l>t;l--)o+=Nh(r,l)*Nh(n,e-l),o*=IR(_l(e),_l(l));else{for(s=o,i=o,l=a-1;l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;for(s=i,l=a+1;l<=e;l++)s*=(e-l+1)*r/(l*n),o+=s}return o}var KGt=ZGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var JGt=rk;function QGt(e,t,r,n,i,o,a){var s,l,u,c;if(s=JGt(e,t,r,n,o),a&&(a[1]=s),s/=e,s===0)return s;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return s*=u,s}var tjt=QGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var ww=G_,ejt=ek,rjt=In,njt=tr,Sw=Ve,fg=er,Fh=Se,ijt=Tu,OR=Eu,RR=Bf,Tw=np,ojt=Df,DR={maxTerms:100};function ajt(e,t,r,n){var i=1-t,o=1;return a;function a(){var s=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,s}}function sjt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p;return i?(d=e+t,l=e+Tw-.5,u=t+Tw-.5,c=d+Tw-.5,s=ww(d)/(ww(e)*ww(t)),f=Fh(c/u)*(t-.5),h=Fh(r*c/l)*e,f>RR&&f<OR&&h>RR&&h<OR?(e*t<u*10?s*=Sw((t-.5)*rjt(e/u)):s*=fg(c/u,t-.5),s*=fg(r*c/l,e),s*=njt(l/ojt),o&&(o[1]=s*fg(a,t))):(s=Fh(s)+f+h+(Fh(l)-1)/2,o&&(o[1]=Sw(s+t*Fh(a))),s=Sw(s))):s=fg(r,e),s<ijt?n:(p=ajt(e,t,r,s),DR.initialValue=n,ejt(p,DR))}var ljt=sjt,ujt=Zt,cjt=If,hg=Ln,NR=In,FR=WA,$n=yU,Pw=tr,fjt=Ve,Bh=er,hjt=Pu,BR=Bs,dg=Nf,$R=Tu,djt=a9t,pjt=KA,FU=$s,es=bGt,Ew=SGt,vjt=rk,zR=GGt,gjt=KGt,$h=tjt,io=ljt,mjt=1/FU;function _jt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,_,y;if(y=1-e,p=s,v=s+a,o[v]=-1,ujt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?dg/2:$R*2,i?(o[p]=n?1:$n(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?dg/2:$R*2,i?o[p]=0:o[p]=n?1:$n(t,r),o):t===.5&&r===.5?(o[v]=mjt*Pw(y*e),_=FR(Pw(i?y:e)),_/=pjt,n||(_*=FU),o[p]=_,o):(t===1&&(d=r,r=t,t=d,d=y,y=e,e=d,i=!i),r===1?t===1?(o[p]=i?y:e,o[v]=1,o):(o[v]=t*Bh(e,t-1),y<.5?_=i?-cjt(t*NR(-y)):fjt(t*NR(-y)):_=i?-(Bh(e,t)-1):Bh(e,t),n||(_/=t),o[p]=_,o):(BR(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=y,y=e,e=d,i=!i),hjt(t,r)<=1?t>=BR(.2,r)||Bh(e,t)<=.9?i?(c=-(n?1:$n(t,r)),i=!1,c=-io(t,r,e,c,n,o,y)):c=io(t,r,e,0,n,o,y):(d=r,r=t,t=d,d=y,y=e,e=d,i=!i,y>=.3?i?(c=-(n?1:$n(t,r)),i=!1,c=-io(t,r,e,c,n,o,y)):c=io(t,r,e,0,n,o,y):(n?u=1:u=Ew(t+r,t,20),c=$h(t,r,e,y,20,n,o),i?(c-=n?1:$n(t,r),i=!1,c=-es(t+20,r,e,y,c,u,n)):c=es(t+20,r,e,y,c,u,n))):r<=1||e<.1&&Bh(r*e,t)<=.7?i?(c=-(n?1:$n(t,r)),i=!1,c=-io(t,r,e,c,n,o,y)):c=io(t,r,e,0,n,o,y):(d=r,r=t,t=d,d=y,y=e,e=d,i=!i,y>=.3?i?(c=-(n?1:$n(t,r)),i=!1,c=-io(t,r,e,c,n,o,y)):c=io(t,r,e,0,n,o,y):t>=15?i?(c=-(n?1:$n(t,r)),i=!1,c=-es(t,r,e,y,c,1,n)):c=es(t,r,e,y,0,1,n):(n?u=1:u=Ew(t+r,t,20),c=$h(t,r,e,y,20,n,o),i?(c-=n?1:$n(t,r),i=!1,c=-es(t+20,r,e,y,c,u,n)):c=es(t+20,r,e,y,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*y-r,l<0&&(d=r,r=t,t=d,d=y,y=e,e=d,i=!i),r<40?hg(t)===t&&hg(r)===r&&t<djt-100?(g=t-1,m=r+g,c=gjt(m,g,e,y),n||(c*=$n(t,r))):r*e<=.7?i?(c=-(n?1:$n(t,r)),i=!1,c=-io(t,r,e,c,n,o,y)):c=io(t,r,e,0,n,o,y):t>15?(m=hg(r),m===r&&(m-=1),f=r-m,n?u=1:u=Ew(t+f,f,m),c=$h(f,t,y,e,m,n),c=es(t,f,e,y,c,1,n),c/=u):n?(m=hg(r),f=r-m,f<=0&&(m-=1,f+=1),c=$h(f,t,y,e,m,n),c+=$h(t,f,e,y,20,n),i&&(c-=1),c=es(t+20,f,e,y,c,1,n),i&&(c=-c,i=!1)):c=zR(t,r,e,y,n,o):c=zR(t,r,e,y,n,o)),o[v]<0&&(o[v]=vjt(t,r,e,y,!0)),h=y*e,o[v]!==0&&(dg*h<o[v]?o[v]=dg/2:o[v]/=h),o[p]=i?(n?1:$n(t,r))-c:c,o))}var BU=_jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yjt=BU;function bjt(e,t,r,n,i){return yjt(e,t,r,n,i,[0,0],1,0)}var wjt=bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sjt=pr,$U=wjt,Tjt=BU;Sjt($U,"assign",Tjt);var zU=$U;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pjt=zU.assign;function Ejt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,Pjt(e,t,r,n,i,o,1,0),o[0]}var Ajt=Ejt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kjt=Ajt,nk=kjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Cjt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var Mjt=Cjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xjt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var Ljt=xjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Ijt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var Ojt=Ijt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rjt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var Djt=Rjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Njt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var Fjt=Njt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Bjt=Zt,VR=tr,UR=Se,$jt=Ne,zjt=Er,Vjt=Mjt,Ujt=Ljt,Gjt=Ojt,jjt=Djt,Wjt=Fjt,Hjt=.08913147449493408,Xjt=2.249481201171875,Yjt=.807220458984375,qjt=.9399557113647461,Zjt=.9836282730102539;function Kjt(e){var t,r,n,i,o;return Bjt(e)?NaN:e===0?$jt:e===2?zjt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=Vjt(e),t*(i*Hjt+i*o)):n>=.25?(i=VR(-2*UR(n)),n-=.25,o=Ujt(n),t*(i/(Xjt+o))):(n=VR(-UR(n)),n<3?(r=n-1.125,o=Gjt(r),t*(Yjt*n+o*n)):n<6?(r=n-3,o=jjt(r),t*(qjt*n+o*n)):(r=n-6,o=Wjt(r),t*(Zjt*n+o*n))))}var Jjt=Kjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qjt=Jjt,ip=Qjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var tWt=Zt,GR=WA,eWt=tr,jR=iU,rWt=6123233995736766e-32;function nWt(e){var t;return tWt(e)?NaN:e<-1||e>1?NaN:e>.5?2*GR(eWt(.5-.5*e)):(t=jR-GR(e),t+=rWt,t+=jR,t)}var iWt=nWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oWt=iWt,aWt=oWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sWt=1.4142135623730951,ik=sWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lWt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var uWt=lWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cWt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var fWt=cWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hWt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var dWt=hWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function pWt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var vWt=pWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gWt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var mWt=gWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Wt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var yWt=_Wt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bWt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var wWt=bWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SWt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var TWt=SWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PWt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var EWt=PWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AWt=JA,kWt=Fs,CWt=tr,MWt=$s,xWt=uWt,LWt=fWt,IWt=dWt,OWt=vWt,RWt=mWt,DWt=yWt,NWt=wWt,FWt=TWt,BWt=EWt,$Wt=0,oo=[1,0,0,0,0,0,0,0,0,0];function zWt(e,t){var r,n;return n=AWt(e/2,.5)*CWt(e*MWt)*(t-.5),r=1/e,oo[1]=xWt(r),oo[2]=LWt(r),oo[3]=IWt(r),oo[4]=OWt(r),oo[5]=RWt(r),oo[6]=DWt(r),oo[7]=NWt(r),oo[8]=FWt(r),oo[9]=BWt(r),$Wt+n*kWt(oo,n*n)}var VWt=zWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var UWt=JA,GWt=Fs,WR=tr,jWt=er,WWt=$s,rs=[0,0,0,0,0,0,0];function HWt(e,t){var r,n,i,o,a,s,l,u;return u=UWt(e/2,.5)*WR(e*WWt)*t,o=e+2,a=e+4,s=e+6,rs[0]=1,rs[1]=-(e+1)/(2*o),o*=e+2,rs[2]=-e*(e+1)*(e+3)/(8*o*a),o*=e+2,rs[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*a*s),o*=e+2,a*=e+4,rs[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*a*s*(e+8)),o*=e+2,rs[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*a*s*(e+8)*(e+10)),o*=e+2,a*=e+4,s*=e+6,rs[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*a*s*(e+8)*(e+10)*(e+12)),l=WR(e),i=jWt(l*u,1/e),n=i*i,r=GWt(rs,n),r*=l,r/=i,-r}var XWt=HWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var HR=ip,YWt=If,XR=tr,qWt=er,ZWt=KA,YR=ik;function KWt(e,t){var r,n,i,o,a,s,l;return e>1e20?-HR(2*t)*YR:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*XR(r*ZWt)*e,l=qWt(o*2*t,2/e),l>.05+r?(s=-HR(2*t)*YR,l=s*s,e<5&&(i+=.3*(e-4.5)*(s+.6)),i+=(((.05*o*s-5)*s-7)*s-2)*s+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*s,l=YWt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,a=XR(e*l),-a)}var JWt=KWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var qR=ip,ZR=Ln,Aw=Rf,KR=V_,QWt=aWt,pg=tr,tHt=he,JR=QA,eHt=er,rHt=rp,QR=ik,tD=$s,eD=VWt,vg=XWt,kw=JWt,rD=268435456,nHt=1/3,iHt=2*53/3,oHt=.8549879733383485;function aHt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_;if(s=0,t>r?(u=r,r=t,t=u,a=!0):a=!1,ZR(e)===e&&e<20)switch(i=Aw(1,iHt),ZR(e)){case 1:t===.5?s=0:s=-JR(tD*t)/rHt(tD*t);break;case 2:s=(2*t-1)/pg(2*t*r);break;case 4:l=4*t*r,o=pg(l),v=4*JR(QWt(o)/3)/o,g=pg(v-4),s=t-.5<0?-g:g;break;case 6:if(t<1e-150)return(a?-1:1)*kw(e,t);m=4*(t-t*t),_=eHt(m,nHt),p=6*(1+oHt*(1/_-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*m*d-270*f+2187)/(5*(4*m*h-216*p-243));while(tHt((p-c)/p)>i);p=pg(p-e),s=t-.5<0?-p:p;break;default:e>rD?s=qR(2*t)*QR:e<3?(n=.2742-e*.0242143,t>n?s=eD(e,t):s=vg(e,t)):(n=Aw(1,KR(e/-.654)),t>n?s=kw(e,t):s=vg(e,t))}else e>rD?s=-qR(2*t)*QR:e<3?(n=.2742-e*.0242143,t>n?s=eD(e,t):s=vg(e,t)):(n=Aw(1,KR(e/-.654)),t>n?s=kw(e,t):s=vg(e,t));return a?-s:s}var sHt=aHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var lHt=sHt;function uHt(e,t,r){var n,i,o,a;return i=t/2,o=1-i,n=e*2,a=lHt(n,i,o),r&&(r.value=a*a/(n+a*a)),n/(n+a*a)}var cHt=uHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var gg=Fs,fHt=ip,nD=tr,hHt=Ve,Yo=ik,ze=[0,0,0,0,0,0,0],zh=[0,0,0,0];function dHt(e,t,r){var n,i,o,a,s,l,u;return n=fHt(2*r),n/=-nD(e/2),zh[0]=n,l=t-e,a=l*l,s=a*l,ze[0]=-l*Yo/2,ze[1]=(1-2*l)/8,ze[2]=-(l*Yo/48),ze[3]=-1/192,ze[4]=-l*Yo/3840,ze[5]=0,ze[6]=0,zh[1]=gg(ze,n),ze[0]=l*Yo*(3*l-2)/12,ze[1]=(20*a-12*l+1)/128,ze[2]=l*Yo*(20*l-1)/960,ze[3]=(16*a+30*l-15)/4608,ze[4]=l*Yo*(21*l+32)/53760,ze[5]=(-(32*a)+63)/368640,ze[6]=-l*Yo*(120*l+17)/25804480,zh[2]=gg(ze,n),ze[0]=l*Yo*(-75*a+80*l-16)/480,ze[1]=(-1080*s+868*a-90*l-45)/9216,ze[2]=l*Yo*(-1190*a+84*l+373)/53760,ze[3]=(-2240*s-2508*a+2100*l-165)/368640,ze[4]=0,ze[5]=0,ze[6]=0,zh[3]=gg(ze,n),o=gg(zh,1/e),i=o*o,u=-hHt(-i/2),i===0?.5:(1+o*nD((1+u)/i))/2}var pHt=dHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var iD=Se,vHt=Nf,mg=vHt/4;function gHt(e,t){return r;function r(n){var i,o,a;return a=1-n,a===0?[-mg,-mg]:n===0?[-mg,-mg]:(o=iD(n)+t*iD(a)+e,i=1/n-t/a,[o,i])}}var VU=gHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mHt=Zt;function _Ht(e){return e===0||mHt(e)?e:e<0?-1:1}var yHt=_Ht;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bHt=yHt,UU=bHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var oD=UU,_g=he,wHt=Rf,Cw=Nf;function SHt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v;p=0,a=0,c=t,u=wHt(1,1-i),h=Cw,s=Cw,l=Cw,f=o;do{if(a=p,l=s,s=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(a===0&&(c===r?t=n:t=r,a=e(t),h=t-c),oD(a)*oD(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,_g(h*2)>_g(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&_g(c*u)<_g(h));return c}var GU=SHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function THt(e){return e===0?-1:-1+e*(-5+e*5)}var PHt=THt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EHt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var AHt=EHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kHt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var CHt=kHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MHt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var xHt=MHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LHt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var IHt=LHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OHt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var RHt=OHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DHt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var NHt=DHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FHt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var BHt=FHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Ht(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var zHt=$Ht;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function VHt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var UHt=VHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GHt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var jHt=GHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WHt(e){return e===0?1:1+e*(-13+e*13)}var HHt=WHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XHt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var YHt=XHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nc=Fs,qHt=ip,ZHt=he,KHt=Ve,aD=Se,JHt=tr,QHt=rp,tXt=QA,eXt=VU,rXt=GU,nXt=PHt,iXt=AHt,oXt=CHt,aXt=xHt,sXt=IHt,lXt=RHt,uXt=NHt,cXt=BHt,fXt=zHt,hXt=UHt,dXt=jHt,pXt=HHt,vXt=YHt,ee=[0,0,0,0,0,0],Vh=[0,0,0,0];function gXt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S;return s=qHt(2*e)/-JHt(t/2),w=QHt(r),y=tXt(r),Vh[0]=s,m=w*w,_=y*y,v=w*y,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,ee[0]=(2*m-1)/(3*v),ee[1]=-nXt(m)/(36*p),ee[2]=iXt(m)/(1620*d),ee[3]=oXt(m)/(6480*h),ee[4]=aXt(m)/(90720*f),ee[5]=0,Vh[1]=nc(ee,s),ee[0]=-sXt(m)/(405*d),ee[1]=lXt(m)/(2592*h),ee[2]=-uXt(m)/(204120*f),ee[3]=-cXt(m)/(2099520*c),ee[4]=0,ee[5]=0,Vh[2]=nc(ee,s),ee[0]=fXt(m)/(102060*f),ee[1]=-hXt(m)/(20995200*c),ee[2]=dXt(m)/(36741600*u),ee[3]=0,ee[4]=0,ee[5]=0,Vh[3]=nc(ee,s),l=nc(Vh,1/t),o=y/w,o*=o,g=-(l*l)/(2*m)+aD(m)+_*aD(_)/m,ZHt(l)<.7?(ee[0]=m,ee[1]=v,ee[2]=(1-2*m)/3,ee[3]=pXt(m)/(36*v),ee[4]=vXt(m)/(270*p),ee[5]=0,S=nc(ee,l)):(T=KHt(g),ee[0]=T,ee[1]=o,ee[2]=0,ee[3]=3*o*(3*o+1)/6,ee[4]=4*o*(4*o+1)*(4*o+2)/24,ee[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=nc(ee,T),(S-m)*l<0&&(S=1-S)),l<0?(i=0,n=m):(i=m,n=1),(S<i||S>n)&&(S=(i+n)/2),a=eXt(-g,o),S=rXt(a,S,i,n,32,100),S}var mXt=gXt,y1={exports:{}},DT={exports:{}},b0=1e3,w0=b0*60,S0=w0*60,T0=S0*24,_Xt=T0*365.25,yXt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return bXt(e);if(r==="number"&&isNaN(e)===!1)return t.long?SXt(e):wXt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function bXt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*_Xt;case"days":case"day":case"d":return r*T0;case"hours":case"hour":case"hrs":case"hr":case"h":return r*S0;case"minutes":case"minute":case"mins":case"min":case"m":return r*w0;case"seconds":case"second":case"secs":case"sec":case"s":return r*b0;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function wXt(e){return e>=T0?Math.round(e/T0)+"d":e>=S0?Math.round(e/S0)+"h":e>=w0?Math.round(e/w0)+"m":e>=b0?Math.round(e/b0)+"s":e+"ms"}function SXt(e){return yg(e,T0,"day")||yg(e,S0,"hour")||yg(e,w0,"minute")||yg(e,b0,"second")||e+" ms"}function yg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=yXt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var g=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(_,y){if(_==="%%")return _;g++;var w=t.formatters[y];if(typeof w=="function"){var T=p[g];_=w.call(f,T),p.splice(g,1),g--}return _}),t.formatArgs.call(f,p);var m=c.log||t.log||console.log.bind(console);m.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function a(){t.enable("")}function s(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(DT,DT.exports);(function(e,t){t=e.exports=DT.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=a,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(a());function s(){try{return window.localStorage}catch{}}})(y1,y1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TXt=34028234663852886e22,W_=TXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PXt=y1.exports,sD=DU,EXt=he,AXt=Ve,lD=Se,kXt=W_,uD=PXt("gammaincinv:higher_newton");function CXt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,g,m,_,y,w,T;T=e,_=1,y=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*lD(T)+T+o,l>lD(kXt))return uD("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=AXt(l)}else w=-a*T;s?(v=sD(T,t,!0,!1),c=-w*(v-n)):(g=sD(T,t,!0,!0),c=w*(g-i)),w=c,n>1e-120||y>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,_=EXt(T/e-1),y+=1,T=e,T<0&&(T=u,y=100)}while(_>2e-14&&y<35);return(_>2e-14||y>99)&&uD("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),m=T||0,m}var MXt=CXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function xXt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var LXt=xXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IXt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var OXt=IXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RXt=he,DXt=Ve,cD=Se,NXt=Fs,FXt=LXt,BXt=OXt,$Xt=1e-8,zXt=.08333333333333333,VXt=.008333333333333333,ic=[1,0,0,0,0,0];function UXt(e){var t,r,n,i,o,a,s,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=DXt(-1-u),o=FXt(l)):e<1?(l=e,o=BXt(l)):(l=11+u,a=cD(l),o=l+a,l=1/l,t=a*a,r=t*a,n=r*a,i=n*a,ic[1]=(2-a)*.5,ic[2]=(-9*a+6+2*t)/6,ic[3]=-(3*r+36*a-22*t-12)*zXt,ic[4]=(60+350*t-300*a-125*r+12*n)/60,ic[5]=-(-120-274*n+900*a-1700*t+1125*r+20*i)*VXt,o+=a*l*NXt(ic,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,s=o;do o=s*(u+cD(s))/(s-1),l=RXt(s/o-1),s=o;while(l>$Xt)}return o}var jU=UXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GXt=.9189385332046728,WU=GXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jXt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function WXt(e,t){var r,n,i,o,a;n=0,i=0,r=t+t,a=e;do o=i,i=n,n=r*i-o+jXt[a],a-=1;while(a>=0);return(n-o)/2}var HXt=WXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XXt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var YXt=XXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qXt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var ZXt=qXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mw=Ff,bg=Se,xw=WU,KXt=j_,JXt=W_,QXt=HXt,tYt=YXt,eYt=ZXt,rYt=.30865217988013566;function nYt(e){var t;return e<KXt?JXt:e<1?Mw(e+1)-(e+.5)*bg(e)+e-xw:e<2?Mw(e)-(e-.5)*bg(e)+e-xw:e<3?Mw(e-1)-(e-.5)*bg(e)+e-xw+bg(e-1):e<12?(t=18/(e*e)-1,QXt(17,t)/(12*e)):(t=1/(e*e),e<1e3?tYt(t)/(rYt+t)/e:eYt(t)/e)}var iYt=nYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fD=Ve,oYt=Oo,aYt=Se,sYt=W_,lYt=U_,uYt=iYt;function cYt(e){return e>=3?fD(uYt(e)):e>0?oYt(e)/(fD(-e+(e-.5)*aYt(e))*lYt):sYt}var fYt=cYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function hYt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var dYt=hYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pYt=he,vYt=Se,gYt=jU,mYt=dYt;function _Yt(e){var t;return pYt(e)<1?mYt(e):(t=gYt(e),vYt(e/(t-1))/e)}var yYt=_Yt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bYt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var wYt=bYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function SYt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var TYt=SYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PYt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var EYt=PYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AYt=Se,kYt=wYt,CYt=TYt,MYt=EYt;function xYt(e){var t,r;return e<-5?(r=e*e,t=AYt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?kYt(e):e<2?CYt(e):e<1e3?(r=1/e,MYt(e)/(-12*e)):-1/(12*e)}var LYt=xYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function IYt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var OYt=IYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RYt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var DYt=RYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NYt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var FYt=NYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BYt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var $Yt=BYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zYt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var VYt=zYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hD=Se,UYt=OYt,GYt=DYt,jYt=FYt,WYt=$Yt,HYt=VYt;function XYt(e){var t,r;return e<-8?(t=e*e,r=hD(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?UYt(e)/(e*e):e<-2?GYt(e):e<2?jYt(e):e<10?(t=1/e,WYt(t)/(e*e)):e<100?(t=1/e,HYt(t)/(e*e)):-hD(e)/(12*e*e*e)}var YYt=XYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qYt=y1.exports,dD=Fs,fi=Ff,ZYt=ip,pD=Oo,wg=tr,vD=he,oc=Ve,KYt=Bs,JYt=er,zn=Se,QYt=U_,tqt=W_,eqt=xU,rqt=MXt,gD=jU,mD=fYt,nqt=yYt,iqt=LYt,oqt=YYt,aqt=qYt("gammaincinv:compute"),ns=.5,Lw=.3333333333333333,sqt=.25,_D=.2,yD=.16666666666666666,lqt=.08333333333333333,uqt=.041666666666666664,Vn=[0,0,0,0,0];function cqt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,k,A,C,M,D,B,z,N,j,Z,q,tt,Pt,Ot,wt,St,Ht,Y,nt,K,pt,Tt,At;if(t<ns?(a=!0,s=t,pt=-1):(a=!1,s=r,pt=1),Y=0,vD(e-1)<1e-4&&(nt=0,a?t<.001?(q=t*t,z=q*t,Z=z*t,S=Z*t,T=S*t,P=t+q*ns+z*Lw+Z*sqt+S*_D+T*yD):P=-zn(1-t):P=-zn(r),e===1?(Y=2,Pt=P):(o=fi(e),Y=1)),r<1e-30&&e<ns&&(nt=0,P=-zn(r*pD(e))+(e-1)*zn(-zn(r*pD(e))),Y=1,o=fi(e)),e>1&&e<500&&t<1e-80){for(nt=0,l=1/e,n=1/(e+1),P=(fi(e+1)+zn(t))*l,P=oc(P),g=P,Ht=0;Ht<10;Ht++)P=g*oc(P*l)*JYt(1-P*n,l);Y=1,o=fi(e)}if(u=1/e*(zn(t)+fi(e+1)),u<zn(_D*(1+e))&&Y===0&&(K=oc(u),nt=0,k=e*e,tt=k*e,N=tt*e,m=e+1,d=m*m,h=m*d,f=d*d,_=e+2,c=_*_,y=e+3,Vn[0]=1,Vn[1]=1/m,Vn[2]=ns*(3*e+5)/(d*_),Vn[3]=Lw*(31+8*k+33*e)/(h*_*y),Vn[4]=uqt*(2888+1179*tt+125*N+3971*k+5661*e)/(f*c*y*(e+4)),P=K*dD(Vn,K),o=fi(e),Y=1),e<10&&Y===0&&(p=wg(e)/(mD(e)*QYt),v=KYt(.02,p),r<v&&(nt=0,wt=1-e,D=wt*wt,B=D*wt,w=wg(-2/e*zn(r/p)),P=e*gD(w),St=zn(P),P>5?(A=St*St,C=A*St,M=C*St,K=1/P,Vn[0]=St-1,Vn[1]=(3*wt-2*wt*St+A-2*St+2)*ns,Vn[2]=(24*wt*St-11*D-24*wt-6*A+12*St-12-9*wt*A+6*D*St+2*C)*yD,Vn[3]=(-12*B*St+8.04*wt*A-114*D*St+(72+36*A)+(3*M-72*St+162)*(wt-168*wt*St)-(12*C+25*B)-(22*wt*C+36*D*A+120*D))*lqt,Vn[4]=0,P=P-St+wt*K*dD(Vn,K)):(K=1/P,A=St*St,Ot=St-1,Tt=St-wt*K*Ot,Tt<P&&(P-=Tt)),o=fi(e),Y=1)),vD(s-ns)<1e-5&&Y===0&&(nt=0,l=1/e,P=e-Lw+(.019753086419753086+.007211444248481286*l)*l,o=fi(e),Y=1),e<1&&Y===0&&(nt=0,a?P=oc(1/e*(zn(s)+fi(e+1))):P=oc(1/e*(zn(1-s)+fi(e+1))),o=fi(e),Y=1),Y===0)if(nt=1,l=1/e,K=ZYt(2*s),w=pt*K/wg(e*ns),K<tqt)w+=(nqt(w)+(iqt(w)+oqt(w)*l)*l)*l,P=e*gD(w),At=w,j=-wg(e/eqt)*oc(-ns*e*At*At)/mD(e),i=1/j;else return aqt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(Pt=rqt(P,e,nt,t,r,o,i,a)),Pt}var fqt=cqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bD=Zt,hqt=j_,wD=Ne,SD=fqt;function dqt(e,t,r){return bD(e)||bD(t)?NaN:t<hqt?NaN:e>1||e<0?NaN:r===!0?e===0?wD:e===1?0:SD(t,1-e,e):e===0?0:e===1?wD:SD(t,e,1-e)}var pqt=dqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vqt=pqt,gqt=vqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mqt=5e-324,_qt=mqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TD=gqt,PD=Se,yqt=tr,bqt=_qt,wqt=VU,Sqt=GU;function Tqt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,k,A,C,M,D,B,z,N,j,Z;return r<n?l=TD(r,t,!0):l=TD(n,t,!1),l/=e,m=t/e,N=yqt(1+m),T=N*N,S=T*N,P=T*T,k=S*T,A=S*S,C=P*S,M=P*P,D=k*P,c=k*k,z=l-m,_=z*z,y=_*z,w=_*_,B=N+1,f=B*B,h=B*f,d=f*f,p=(N+2)*(N-1)/(3*N),p+=(S+9*T+21*N+5)*z/(36*T*B),p-=(P-13*S+69*T+167*N+46)*_/(1620*f*S),p-=(7*k+21*P+70*S+26*T-93*N-31)*y/(6480*h*P),p-=(75*A+202*k+188*P-888*S-1345*T+118*N+138)*w/(272160*d*k),v=(28*P+131*S+402*T+581*N+208)*(N-1)/(1620*B*S),v-=(35*A-154*k-623*P-1636*S-3983*T-3514*N-925)*z/(12960*f*P),v-=(2132*C+7915*A+16821*k+35066*P+87490*S+141183*T+95993*N+21640)*_/(816480*k*h),v-=(11053*M+53308*C+117010*A+163924*k+116188*P-258428*S-677042*T-481940*N-105497)*y/(14696640*d*A),g=-((3592*C+8375*A-1323*k-29198*P-89578*S-154413*T-116063*N-29632)*(N-1))/(816480*k*f),g-=(442043*D+2054169*M+3803094*C+3470754*A+2141568*k-2393568*P-19904934*S-34714674*T-23128299*N-5253353)*z/(146966400*A*h),g-=(116932*c+819281*D+2378172*M+4341330*C+6806004*A+10622748*k+18739500*P+30651894*S+30869976*T+15431867*N+2919016)*_/(146966400*d*C),u=l+p/e+v/(e*e)+g/(e*e*e),u<=0&&(u=bqt),j=u-m*PD(u)+(1+m)*PD(1+m)-m,i=1/(1+m),a=u<m?i:0,s=u<m?1:i,Z=(a+s)/2,o=wqt(j,m),Sqt(o,Z,a,s,32,100)}var Pqt=Tqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rr=he,Eqt=Rf,Iw=UU,Aqt=Pu,Ow=Nf;function kqt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T;y=0,s=!1,f=t,c=Eqt(1,1-i),p=Aqt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=y,u=l,l=p,_=e(f),y=_[0],w=_[1],T=_[2],d-=1,y===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),Iw(h)*Iw(y)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=y/w:(v=2*y,m=2*w-y*(T/w),rr(m)<1&&rr(v)>=rr(m)*Ow?p=y/w:p=v/m,p*w/y<0&&(p=y/w,rr(p)>2*rr(t)&&(p=(p<0?-1:1)*2*rr(t)))),a=rr(p/u),a>.8&&a<2&&(p=p>0?(f-r)/2:(f-n)/2,rr(p)>f&&(p=Iw(p)*f),u=p*3),t=f,f-=p,f<r){if(rr(r)<1&&rr(f)>1&&Ow/rr(f)<rr(r)?g=1e3:g=f/r,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-r),f=t-p,s=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(rr(n)<1&&rr(f)>1&&Ow/rr(f)<rr(n)?g=1e3:g=f/n,rr(g)<1&&(g=1/g),!s&&g>0&&g<3)p=.99*(t-n),f=t-p,s=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&rr(f*c)<rr(p));return f}var Cqt=kqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Mqt=zU.assign,xqt=he,Lqt=Nf,Rw=Tu;function Iqt(e,t,r,n){return i;function i(o){var a,s,l,u,c;return c=1-o,a=[0,0],Mqt(o,e,t,!0,n,a,1,0),u=a[0]-r,s=a[1],n&&(s=-s),c===0&&(c=Rw*64),o===0&&(o=Rw*64),l=s*(-(c*e)+(t-2)*o+1),xqt(l)<c*o*Lqt&&(l/=c*o),n&&(l=-l),s===0&&(s=(n?-1:1)*Rw*64),[u,s,l]}}var Oqt=Iqt,Rqt=Fs,ED=nk,Dw=If,AD=In,Dqt=WA,ac=yU,kD=tr,Nqt=he,CD=Ve,ao=er,MD=rp,Fqt=Pu,Bqt=Bs,xD=Se,Nw=Tu,LD=KA,ID=Ma,$qt=cHt,zqt=pHt,Vqt=mXt,Uqt=Pqt,Gqt=Cqt,jqt=Oqt,Wqt=32,Hqt=1e3,yl=[0,0,0,0,0];function Xqt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,g,m,_,y,w,T,S,P,k,A,C,M,D,B,z,N,j;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(N=0,s=0,u=1,e===.5){if(t===.5)return N=MD(r*LD),N*=N,j=MD(n*LD),j*=j,[N,j];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)k={},N=$qt(e,r,k),j=k.value;else{if(t===1)return r<n?e>1?(N=ao(r,1/e),j=-Dw(xD(r)/e)):(N=ao(r,1/e),j=1-N):(N=CD(AD(-n)/e),j=-Dw(AD(-n)/e)),o&&(v=j,j=N,N=v),[N,j];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=Bqt(e,t),f=Fqt(e,t),kD(h)>f-h&&h>5?(N=zqt(e,t,r),j=1-N):(D=e+t,l=Dqt(kD(e/D)),a=h/D,a>=.2&&a<=.8&&D>=10?(p=ao(r,1/e),p<.0025&&e+t<200?N=p*ao(e*ac(e,t),1/e):N=Vqt(r,D,l),j=1-N):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=ac(e,t)),d===0?j=1:(j=ao(t*n*d,1/t),N=1-j)),j>1e-5&&(N=Uqt(e,t,r,n),j=1-N));else if(e<1&&t<1){if(P=(1-e)/(2-e-t),y=ED(P,e,t)-r,Nqt(y)/r<ID*3)return o?[1-P,P]:[P,1-P];y<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,P=1-P),S=ao(e*r*ac(e,t),1/e),N=S/(1+S),j=1/(1+S),N>P&&(N=P),u=P}else e>1&&t>1?(P=(e-1)/(e+t-2),g=(t-1)/(e+t-2),T=ED(P,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=g,g=P,P=v,o=!o),w=xD(r*e*ac(e,t))/e,N=CD(w),j=N<.9?1-N:-Dw(w),t<e&&N<.2&&(m=e-1,_=t-1,A=e*e,C=e*A,M=t*t,yl[0]=0,yl[1]=1,yl[2]=_/m,m*=m,yl[3]=_*(3*e*t+5*t+A-e-4)/(2*(e+2)*m),m*=e+1,yl[4]=_*(33*e*M+31*M+8*A*M-30*e*t-47*t+11*A*t+6*C*t+18+4*e-C+A*A-10*A),yl[4]/=3*(e+3)*(e+2)*m,N=Rqt(yl,N)),N>P&&(N=P),u=P):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),ao(r,1/e)<.5?(N=ao(r*e*ac(e,t),1/e),N===0&&(N=Nw),j=1-N):(j=ao(1-ao(r,t*ac(e,t)),1/t),j===0&&(j=Nw),N=1-j))}return N>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=j,j=N,N=v,o=!o,B=1-u,z=1-s,s=B,u=z),s===0&&(o?(s=ID,N<s&&(N=s)):s=Nw,N<s&&(N=s)),i=Wqt,N<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=jqt(e,t,r<n?r:n,r>=n),N=Gqt(c,N,s,u,i,Hqt),N===s&&(N=0),o?[1-N,N]:[N,1-N]}var Yqt=Xqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qqt=Yqt,Zqt=qqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Fw=Zt,OD=Zqt;function Kqt(e,t,r,n){return Fw(e)||Fw(t)||Fw(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?OD(t,r,1-e,e)[0]:OD(t,r,e,1-e)[0]}var Jqt=Kqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qqt=Jqt,HU=Qqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tZt=HU,Bw=Zt;function eZt(e,t,r){return Bw(e)||Bw(t)||Bw(r)||t<=0||r<=0||e<0||e>1?NaN:tZt(e,t,r)}var rZt=eZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function nZt(e){return t;function t(){return e}}var iZt=nZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oZt=iZt,H_=oZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aZt=H_,sZt=HU,$w=Zt;function lZt(e,t){if($w(e)||$w(t)||e<=0||t<=0)return aZt(NaN);return r;function r(n){return $w(n)||n<0||n>1?NaN:sZt(n,e,t)}}var uZt=lZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cZt=pr,XU=rZt,fZt=uZt;cZt(XU,"factory",fZt);var hZt=XU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dZt=Ln;function pZt(e){return dZt(e)===e&&e>=0}var vZt=pZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gZt=vZt,X_=gZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mZt=X_,_Zt=nk,zw=Zt,yZt=Ln,bZt=Ne;function wZt(e,t,r){return zw(e)||zw(t)||zw(r)||r<0||r>1||!mZt(t)||t===bZt?NaN:e<0?0:e>=t?1:(e=yZt(e+1e-7),_Zt(r,e+1,t-e,!0,!0))}var SZt=wZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TZt=X_,PZt=H_,EZt=nk,Vw=Zt,AZt=Ln,kZt=Ne;function CZt(e,t){if(Vw(e)||Vw(t)||t<0||t>1||!TZt(e)||e===kZt)return PZt(NaN);return r;function r(n){return Vw(n)?NaN:n<0?0:n>=e?1:(n=AZt(n+1e-7),EZt(t,n+1,e-n,!0,!0))}}var MZt=CZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xZt=pr,YU=SZt,LZt=MZt;xZt(YU,"factory",LZt);var IZt=YU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var qU=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],OZt=qU.length;function RZt(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<OZt;o++)r=n,n=i,i=t*n-r+qU[o];return(i-r)*.5}var DZt=RZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var NZt=er,FZt=DZt,BZt=9490626562425156e-8,$Zt=3745194030963158e291;function zZt(e){return e<10?NaN:e>=$Zt?0:e<BZt?FZt(2*NZt(10/e,2)-1)/e:1/(e*12)}var VZt=zZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var UZt=Ff,RD=In,Uw=Oo,GZt=Pu,jZt=Bs,Sg=Se,WZt=WU,HZt=Er,DD=Ne,Uh=VZt;function XZt(e,t){var r,n,i;return n=jZt(e,t),i=GZt(e,t),n<0?NaN:n===0?DD:i===DD?HZt:n>=10?(r=Uh(n)+Uh(i)-Uh(n+i),-.5*Sg(i)+WZt+r+(n-.5)*Sg(n/(n+i))+i*RD(-n/(n+i))):i>=10?(r=Uh(i)-Uh(n+i),UZt(n)+r+n-n*Sg(n+i)+(i-.5)*RD(-n/(n+i))):Sg(Uw(n)*(Uw(i)/Uw(n+i)))}var YZt=XZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qZt=YZt,ZZt=qZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ND=Ns,FD=Zt,KZt=ZZt,JZt=he,BD=Se,$D=Er;function NT(e,t){return FD(e)||FD(t)?NaN:!ND(e)||!ND(t)?NaN:e<0?NT(-e+t-1,t):t<0?$D:t===0?0:t===1?BD(JZt(e)):e<t?$D:e-t<2?NT(e,e-t):-BD(e+1)-KZt(e-t+1,t+1)}var QZt=NT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tKt=QZt,ZU=tKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zD=X_,eKt=ZU,Gw=Zt,rKt=In,nKt=Ve,iKt=Se,oKt=Ne;function aKt(e,t,r){var n;return Gw(e)||Gw(t)||Gw(r)||r<0||r>1||!zD(t)||t===oKt?NaN:zD(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=eKt(t,e),n+=e*iKt(r)+(t-e)*rKt(-r),nKt(n)):0}var sKt=aKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VD=Zt;function lKt(e,t){return VD(e)||VD(t)?NaN:e===t?1:0}var uKt=lKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cKt=H_,UD=Zt;function fKt(e){if(UD(e))return cKt(NaN);return t;function t(r){return UD(r)?NaN:r===e?1:0}}var hKt=fKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dKt=pr,KU=uKt,pKt=hKt;dKt(KU,"factory",pKt);var vKt=KU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GD=X_,gKt=H_,mKt=ZU,jD=vKt.factory,jw=Zt,_Kt=In,yKt=Ve,bKt=Se,wKt=Ne;function SKt(e,t){if(jw(e)||jw(t)||!GD(e)||e===wKt||t<0||t>1)return gKt(NaN);if(t===0||e===0)return jD(0);if(t===1)return jD(e);return r;function r(n){var i;return jw(n)?NaN:GD(n)?n>e?0:(i=mKt(e,n),i+=n*bKt(t)+(e-n)*_Kt(-t),yKt(i)):0}}var TKt=SKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PKt=pr,JU=sKt,EKt=TKt;PKt(JU,"factory",EKt);var AKt=JU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kKt=Gi,FT;function CKt(e){return kKt(e)==="[object Array]"}Array.isArray?FT=Array.isArray:FT=CKt;var MKt=FT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xKt=MKt,QU=xKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LKt=QU;function IKt(e){return typeof e=="object"&&e!==null&&!LKt(e)}var OKt=IKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RKt=OKt,DKt=RKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NKt=/./,FKt=NKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BKt(e){return typeof e=="boolean"}var tG=BKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Kt=Boolean.prototype.toString,zKt=$Kt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VKt=zKt;function UKt(e){try{return VKt.call(e),!0}catch{return!1}}var GKt=UKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jKt=N_,WKt=Gi,HKt=GKt,XKt=jKt();function YKt(e){return typeof e=="object"?e instanceof Boolean?!0:XKt?HKt(e):WKt(e)==="[object Boolean]":!1}var eG=YKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qKt=tG,ZKt=eG;function KKt(e){return qKt(e)||ZKt(e)}var JKt=KKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rG=pr,ok=JKt,QKt=tG,tJt=eG;rG(ok,"isPrimitive",QKt);rG(ok,"isObject",tJt);var nG=ok;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eJt(){return new Function("return this;")()}var rJt=eJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nJt=typeof self=="object"?self:null,iJt=nJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oJt=typeof window=="object"?window:null,aJt=oJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sJt=typeof gS=="object"?gS:null,lJt=sJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uJt=nG.isPrimitive,cJt=rJt,WD=iJt,HD=aJt,XD=lJt;function fJt(e){if(arguments.length){if(!uJt(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return cJt()}if(WD)return WD;if(HD)return HD;if(XD)return XD;throw new Error("unexpected error. Unable to resolve global object.")}var hJt=fJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dJt=hJt,pJt=dJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vJt=pJt,YD=vJt(),gJt=YD.document&&YD.document.childNodes,mJt=gJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Jt=Int8Array,yJt=_Jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bJt=FKt,wJt=mJt,SJt=yJt;function TJt(){return typeof bJt=="function"||typeof SJt=="object"||typeof wJt=="function"}var PJt=TJt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EJt(){return/^\s*function\s*([^(]*)/i}var iG=EJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AJt=iG,kJt=AJt(),CJt=kJt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MJt=pr,oG=iG,xJt=CJt;MJt(oG,"REGEXP",xJt);var LJt=oG;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IJt=QU;function OJt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!IJt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var RJt=OJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DJt=RJt,NJt=DJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FJt(e){return e!==null&&typeof e=="object"}var BJt=FJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Jt=pr,zJt=NJt,ak=BJt,VJt=zJt(ak);$Jt(ak,"isObjectLikeArray",VJt);var UJt=ak;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GJt=UJt;function jJt(e){return GJt(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var WJt=jJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HJt=WJt,XJt=HJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YJt=Gi,qJt=LJt.REGEXP,ZJt=XJt;function KJt(e){var t,r,n;if(r=YJt(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=qJt.exec(n.toString()),t)return t[1]}return ZJt(e)?"Buffer":r}var JJt=KJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QJt=JJt,aG=QJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tQt=aG;function eQt(e){var t;return e===null?"null":(t=typeof e,t==="object"?tQt(e).toLowerCase():t)}var rQt=eQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nQt=aG;function iQt(e){return nQt(e).toLowerCase()}var oQt=iQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aQt=PJt,sQt=rQt,lQt=oQt,uQt=aQt()?lQt:sQt,cQt=uQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fQt=cQt;function hQt(e){return fQt(e)==="function"}var dQt=hQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pQt=dQt,sG=pQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vQt=Object.getPrototypeOf,gQt=vQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mQt(e){return e.__proto__}var _Qt=mQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yQt=Gi,bQt=_Qt;function wQt(e){var t=bQt(e);return t||t===null?t:yQt(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var SQt=wQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TQt=sG,PQt=gQt,EQt=SQt,BT;TQt(Object.getPrototypeOf)?BT=PQt:BT=EQt;var AQt=BT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kQt=AQt;function CQt(e){return e==null?null:(e=Object(e),kQt(e))}var MQt=CQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xQt=MQt,LQt=xQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IQt=DKt,qD=sG,OQt=LQt,cm=F_,RQt=Gi,DQt=Object.prototype;function NQt(e){var t;for(t in e)if(!cm(e,t))return!1;return!0}function FQt(e){var t;return IQt(e)?(t=OQt(e),t?!cm(e,"constructor")&&cm(t,"constructor")&&qD(t.constructor)&&RQt(t.constructor)==="[object Function]"&&cm(t,"isPrototypeOf")&&qD(t.isPrototypeOf)&&(t===DQt||NQt(e)):!0):!1}var BQt=FQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Qt=BQt,lG=$Qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zQt(e){return typeof e=="string"}var uG=zQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VQt=String.prototype.valueOf,UQt=VQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GQt=UQt;function jQt(e){try{return GQt.call(e),!0}catch{return!1}}var WQt=jQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HQt=N_,XQt=Gi,YQt=WQt,qQt=HQt();function ZQt(e){return typeof e=="object"?e instanceof String?!0:qQt?YQt(e):XQt(e)==="[object String]":!1}var cG=ZQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KQt=uG,JQt=cG;function QQt(e){return KQt(e)||JQt(e)}var tte=QQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fG=pr,sk=tte,ete=uG,rte=cG;fG(sk,"isPrimitive",ete);fG(sk,"isObject",rte);var nte=sk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ite=Cf.isPrimitive,ote=Zt;function ate(e){return ite(e)&&ote(e)}var hG=ate;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ste=Cf.isObject,lte=Zt;function ute(e){return ste(e)&&lte(e.valueOf())}var dG=ute;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cte=hG,fte=dG;function hte(e){return cte(e)||fte(e)}var dte=hte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pG=pr,lk=dte,pte=hG,vte=dG;pG(lk,"isPrimitive",pte);pG(lk,"isObject",vte);var gte=lk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZD=Cf.isPrimitive,mte=lG,_te=nte.isPrimitive,KD=gte,Ww=F_;function yte(e,t){return mte(t)?Ww(t,"alpha")&&(e.alpha=t.alpha,!ZD(e.alpha)||KD(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):Ww(t,"alternative")&&(e.alternative=t.alternative,!_te(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):Ww(t,"p")&&(e.p=t.p,!ZD(e.p)||KD(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var bte=yte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wte=B_.isPrimitive;function Ste(e){return wte(e)&&e>0}var vG=Ste;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Tte=B_.isObject;function Pte(e){return Tte(e)&&e.valueOf()>0}var gG=Pte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ete=vG,Ate=gG;function kte(e){return Ete(e)||Ate(e)}var Cte=kte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mG=pr,uk=Cte,Mte=vG,xte=gG;mG(uk,"isPrimitive",Mte);mG(uk,"isObject",xte);var Lte=uk;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ite=9007199254740991,Ote=Ite;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Rte=308,Dte=Rte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nte=-308,Fte=Nte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bte=-324,$te=Bte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JD=Zt,Tg=Of,QD=er,zte=he,t8=V_,Vte=Ote,e8=Dte,Ute=Fte,Gte=$te,jte=Vte+1,r8=1e308;function Wte(e,t){var r,n;return JD(e)||JD(t)||Tg(t)?NaN:Tg(e)||e===0||t<Gte||zte(e)>jte&&t<=0?e:t>e8?0*e:t<Ute?(r=QD(10,-(t+e8)),n=e*r8*r,Tg(n)?e:t8(n)/r8/r):(r=QD(10,-t),n=e*r,Tg(n)?e:t8(n)/r)}var Hte=Wte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xte=Hte,Yte=Xte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qte=Lte,Zte=lG,Kte=nG.isPrimitive,n8=F_,Pg=Yte;function Jte(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!Zte(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(n8(e,"digits")){if(!qte(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(n8(e,"decision")){if(!Kte(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+Pg(this.pValue,-r)+`
`,n+="    statistic: "+Pg(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+Pg(this.ci[0],-r)+","+Pg(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var Qte=Jte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qo=R6t,tee=Q5t,i8=Mxt,_G=hZt,eee=Ln,ree=oU,sc=IZt,Hw=AKt,o8=bte,nee=Qte,a8=1+1e-7;function s8(e,t,r){return e===0?0:_G(r,e,t-e+1)}function l8(e,t,r){return e===t?1:_G(1-r,e+1,t-e)}function iee(){var e,t,r,n,i,o,a,s,l,u,c,f,h,d,p;if(t={},tee(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(a=o8(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!i8(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!i8(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(a=o8(t,arguments[2]))}if(a)throw a;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=sc(h,c,f),r=[0,l8(h,c,e)];break;case"greater":n=1-sc(h-1,c,f),r=[s8(h,c,e),1];break;case"two-sided":if(l=Hw(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=ree(u);p<=c;p++)Hw(p,c,f)<=l*a8&&(d+=1);n=sc(h,c,f)+(1-sc(c-d,c,f))}else{for(d=0,p=0;p<=eee(u);p++)Hw(p,c,f)<=l*a8&&(d+=1);n=sc(d-1,c,f)+(1-sc(h-1,c,f))}r=[s8(h,c,e/2),l8(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return s={},qo(s,"rejected",n<=e),qo(s,"alpha",e),qo(s,"pValue",n),qo(s,"statistic",i),qo(s,"ci",r),qo(s,"nullValue",f),qo(s,"alternative",o),qo(s,"method","Exact binomial test"),qo(s,"print",nee),s}var oee=iee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aee=oee,yG=aee;const see=Array.prototype.concat,bG=Object.prototype.toString;function wG(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const Mo=Array.isArray||function(t){return bG.call(t)==="[object Array]"};function P0(e){return bG.call(e)==="[object Function]"}function Pr(e){return typeof e=="number"?e-e===0:!1}function lee(e){return see.apply([],e)}const SG={calcRdx:wG,isArray:Mo,isFunction:P0,isNumber:Pr,toVector:lee};let ni=Math.random;function TG(e){if(typeof e!="function")throw new TypeError("fn is not a function");ni=e}function Y_(e){return e.length||1}function PG(e){return e[0].length||1}function uee(e){return{rows:Y_(e),cols:PG(e)}}function ck(e,t){return Mo(t)?t.map(r=>ck(e,r)):e[t]}function EG(e,t){return ck(e,t)}function b1(e,t){if(Mo(t)){const n=Ie(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Ie(e.length).forEach(function(a){n[a][o]=e[a][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function AG(e,t){return b1(e,t).map(r=>r[0])}function cee(e){const t=Y_(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function fee(e){for(var t=Y_(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Ts(e){var t=[],r,n,i,o,a;for(Mo(e[0])||(e=[e]),n=e.length,i=e[0].length,a=0;a<i;a++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][a];t.push(r)}return t.length===1?t[0]:t}function rn(e,t,r){var n,i,o,a,s;for(Mo(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),s=0;s<o;s++)a[n][s]=t(e[n][s],n,s);return a.length===1?a[0]:a}function q_(e,t,r){var n,i,o,a,s;for(Mo(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),s=1;s<o;s++)a[n][s]=t(a[n][s-1],e[n][s]);return a.length===1?a[0]:a}function fk(e,t){return rn(e,t,!0)}function $f(e,t,r){var n=new Array(e),i,o;for(P0(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function kG(){return 0}function hee(){return 1}function dee(e,t){return e===t?1:0}function Ro(e,t){return Pr(t)||(t=e),$f(e,t,kG)}function pee(e,t){return Pr(t)||(t=e),$f(e,t,hee)}function vee(e,t){return Pr(t)||(t=e),$f(e,t,ni)}function su(e,t){return Pr(t)||(t=e),$f(e,t,dee)}function gee(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function mee(e){return fk(e,kG)}function CG(e,t,r,n){P0(n)||(n=!1);var i=[],o=wG(e,t),a=(t*o-e*o)/((r-1)*o),s=e,l;for(l=0;s<=t&&l<r;l++,s=(e*o+a*o*l)/o)i.push(n?n(s,l):s);return i}function Ie(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function Jo(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return Z_(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Pr(t.row)){if(Pr(t.col))return e[t.row][t.col];var o=EG(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Pr(t.col)){var a=AG(e,t.col);return i=t.row||{},r(a,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var s=r(e,i.start,i.end,i.step);return s.map(function(l){return r(l,n.start,n.end,n.step)})}function nd(e,t,r){var n,i;if(Pr(t.row)){if(Pr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Ie(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(s,l){e[o][s]=r[l]}),e}if(Pr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Ie(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var a=t.col;return i.forEach(function(s,l){e[s][a]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Ie(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Ie(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(s,l){n.forEach(function(u,c){e[s][u]=r[l][c]})}),e}function _ee(e){var t=Ro(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function Z_(e){return e.map(function(t){return Pr(t)?t:t.map(function(r){return r})})}const yee=Object.freeze(Object.defineProperty({__proto__:null,utils:SG,get random_fn(){return ni},setRandom:TG,rows:Y_,cols:PG,dimensions:uee,row:ck,rowa:EG,col:b1,cola:AG,diag:cee,antidiag:fee,transpose:Ts,map:rn,cumreduce:q_,alter:fk,create:$f,zeros:Ro,ones:pee,rand:vee,identity:su,symmetric:gee,clear:mee,seq:CG,arange:Ie,slice:Jo,sliceAssign:nd,diagonal:_ee,copy:Z_},Symbol.toStringTag,{value:"Module"}));function zf(e,t){return e-t}function u8(e,t,r){return Math.max(t,Math.min(e,r))}function nn(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function bee(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function K_(e){for(var t=ar(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function wee(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function MG(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function hk(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function dk(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function See(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function ar(e){return nn(e)/e.length}function Tee(e){return K_(e)/e.length}function Pee(e){return Math.pow(MG(e),1/e.length)}function $T(e){var t=e.length,r=e.slice().sort(zf);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function Eee(e){return q_(e,function(t,r){return t+r})}function Aee(e){return q_(e,function(t,r){return t*r})}function kee(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function zT(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(zf),a={},s=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=s,c=s+l-1,f=(u+c)/2;a[i]=f,s+=l}return e.map(function(h){return a[h]})}function Cee(e){var t=e.length,r=e.slice().sort(zf),n=1,i=0,o=0,a=[],s;for(s=0;s<t;s++)r[s]===r[s+1]?n++:(n>i?(a=[r[s]],i=n,o=0):n===i&&(a.push(r[s]),o++),n=1);return o===0?a[0]:a}function Mee(e){return dk(e)-hk(e)}function xG(e,t){return K_(e)/(e.length-(t?1:0))}function LG(e){var t=e.reduce(function(n,i){return n+K_(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function xee(e){for(var t=ar(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function ba(e,t){return Math.sqrt(xG(e,t))}function IG(e){return Math.sqrt(LG(e))}function Lee(e){for(var t=ar(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return ar(r)}function Iee(e){for(var t=$T(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return $T(r)}function Oee(e){return ba(e)/ar(e)}function Ree(e){var t=e.length,r=e.slice().sort(zf);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Dee(e,t,r,n){var i=e.slice().sort(zf),o=[t.length],a=e.length,s,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),s=0;s<t.length;s++)l=t[s],u=r+l*(1-r-n),c=a*l+u,f=Math.floor(u8(c,1,a-1)),h=u8(c-f,0,1),o[s]=(1-h)*i[f-1]+h*i[f];return o}function Nee(e,t,r){var n=e.slice().sort(zf),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),a=i-o;return o+1<n.length?n[o-1]+a*(n[o]-n[o-1]):n[o-1]}function Fee(e,t,r){var n=0,i=e.length,o=!1,a,s;for(r==="strict"&&(o=!0),s=0;s<i;s++)a=e[s],(o&&a<t||!o&&a<=t)&&n++;return n/i}function Bee(e,t){t=t||4;var r=hk(e),n=(dk(e)-r)/t,i=e.length,o=[],a;for(a=0;a<t;a++)o[a]=0;for(a=0;a<i;a++)o[Math.min(Math.floor((e[a]-r)/n),t-1)]+=1;return o}function OG(e,t){var r=ar(e),n=ar(t),i=e.length,o=new Array(i),a;for(a=0;a<i;a++)o[a]=(e[a]-r)*(t[a]-n);return nn(o)/(i-1)}function RG(e,t){return OG(e,t)/ba(e,1)/ba(t,1)}function $ee(e,t){return e=zT(e),t=zT(t),RG(e,t)}function pk(e,t){for(var r=ar(e),n=ba(e),i=e.length,o=0,a=0;a<i;a++)o+=Math.pow((e[a]-r)/n,t);return o/e.length}function zee(e){return pk(e,3)}function Vee(e){return pk(e,4)-3}const Uee=Object.freeze(Object.defineProperty({__proto__:null,sum:nn,sumsqrd:bee,sumsqerr:K_,sumrow:wee,product:MG,min:hk,max:dk,unique:See,mean:ar,meansqerr:Tee,geomean:Pee,median:$T,cumsum:Eee,cumprod:Aee,diff:kee,rank:zT,mode:Cee,range:Mee,variance:xG,pooledvariance:LG,deviation:xee,stdev:ba,pooledstdev:IG,meandev:Lee,meddev:Iee,coeffvar:Oee,quartiles:Ree,quantiles:Dee,percentile:Nee,percentileOfScore:Fee,histogram:Bee,covariance:OG,corrcoeff:RG,spearmancoeff:$ee,stanMoment:pk,skewness:zee,kurtosis:Vee},Symbol.toStringTag,{value:"Module"}));function Gee(e,t,r){return e<t||e>r?0:1/(r-t)}function jee(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function Wee(e,t,r){return t+e*(r-t)}function Hee(e,t){return .5*(e+t)}function Xee(e,t){return ar(e)}function Yee(){throw new Error("mode is not yet implemented")}function DG(e,t){return e/2+t/2+(t/2-e/2)*(2*ni()-1)}function qee(e,t){return Math.pow(t-e,2)/12}const Zee=Object.freeze(Object.defineProperty({__proto__:null,pdf:Gee,cdf:jee,inv:Wee,mean:Hee,median:Xee,mode:Yee,sample:DG,variance:qee},Symbol.toStringTag,{value:"Module"}));function Kee(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function Jee(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function Qee(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function tre(e,t){return t<=e?NaN:(e+t)/2}function ere(e,t){return t<=e?NaN:(e+t)/2}function rre(){throw new Error("mode is not yet implemented")}function nre(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*DG(0,1))}function ire(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const ore=Object.freeze(Object.defineProperty({__proto__:null,pdf:Kee,cdf:Jee,inv:Qee,mean:tre,median:ere,mode:rre,sample:nre,variance:ire},Symbol.toStringTag,{value:"Module"}));function Ge(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,a;for(a=(o=i=e)+5.5,a-=(i+.5)*Math.log(a);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-a}function NG(e){var t,r,n,i,o,a,s,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,s=0,e==1||e==2)return 0;for(e<=7&&(s=Math.floor(7-e),t=e+s),r=1/(t*t),n=2*Math.PI,o=l[9],a=8;a>=0;a--)o*=r,o+=l[a];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(a=1;a<=s;a++)i-=Math.log(t-1),t-=1;return i}function xi(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,a=0,s=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(s<=0)if(f=s%1+36e-17,f)n=(s&1?-1:1)*Math.PI/Math.sin(Math.PI*f),s=1-s;else return 1/0;for(c=s,s<1?u=s++:u=(s-=i=(s|0)-1)-1,l=0;l<8;++l)a=(a+t[l])*u,o=o*u+r[l];if(f=a/o+1,c<s)f/=c;else if(c>s)for(l=0;l<i;++l)f*=s,s++;return n&&(f=n/f),f}function are(e,t){return Vf(e,t)*xi(e)}function Vf(e,t){var r=Ge(e),n=e,i=1/e,o=i,a=t+1-e,s=1/1e-30,l=1/a,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),a+=2,l=h*l+a,s=a+h/s,l=1/l,u*=l*s;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function fm(e){return e<0?NaN:Ge(e+1)}function Hl(e){return e<0?NaN:xi(e+1)}function vk(e,t){return e>170||t>170?Math.exp(FG(e,t)):Hl(e)/Hl(t)/Hl(e-t)}function FG(e,t){return fm(e)-fm(t)-fm(e-t)}function sre(e,t){return Hl(e)/Hl(e-t)}function J_(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(gk(e,t)):xi(e)*xi(t)/xi(e+t)}function gk(e,t){return Ge(e)+Ge(t)-Ge(e+t)}function VT(e,t,r){var n=1e-30,i=1,o=t+r,a=t+1,s=t-1,l=1,u=1-o*e/a,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((s+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(a+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function Q_(e,t){var r=0,n=t-1,i=1e-8,o=Ge(t),a,s,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),a=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(a=-a),a=Math.max(.001,t*Math.pow(1-1/(9*t)-a/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?a=Math.pow(e/l,1/t):a=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(a<=0)return 0;if(s=Vf(t,a)-e,t>1?l=h*Math.exp(-(a-n)+n*(Math.log(a)-f)):l=Math.exp(-a+n*Math.log(a)-o),u=s/l,a-=l=u/(1-.5*Math.min(1,u*((t-1)/a-1))),a<=0&&(a=.5*(a+l)),Math.abs(l)<i*a)break}return a}function ty(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,a,s,l,u;for(e<0&&(e=-e,n=!0),a=2/(2+e),s=4*a-2;r>0;r--)l=i,i=s*i-o+t[r],o=l;return u=a*Math.exp(-e*e+.5*(t[0]+s*i)-o),n?u-1:1-u}function BG(e){return 1-ty(e)}function mk(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=BG(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function op(e,t,r){var n=1e-8,i=t-1,o=r-1,a=0,s,l,u,c,f,h,d,p,v,g,m;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),g=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*g))):(s=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*s)/t,f=Math.exp(r*l)/r,g=c+f,e<c/g?d=Math.pow(t*g*e,1/t):d=1-Math.pow(r*g*(1-e),1/r)),m=-Ge(t)-Ge(r)+Ge(t+r);a<10;a++){if(d===0||d===1)return d;if(h=ap(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+m),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&a>0)break}return d}function ap(e,t,r){var n=e===0||e===1?0:Math.exp(Ge(t+r)-Ge(t)-Ge(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*VT(e,t,r)/t:1-n*VT(1-e,r,t)/r}function Au(e,t){var r,n,i,o,a;if(t||(t=e),e)return $f(e,t,function(){return Au()});do r=ni(),n=1.7156*(ni()-.5),i=r-.449871,o=Math.abs(n)+.386595,a=i*i+o*(.196*o-.25472*i);while(a>.27597&&(a>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function xo(e,t,r){var n=e,i,o,a,s,l,u;if(r||(r=t),e||(e=1),t)return u=Ro(t,r),u.alter(function(){return xo(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=Au(),s=1+o*l;while(s<=0);s=s*s*s,a=ni()}while(a>1-.331*Math.pow(l,4)&&Math.log(a)>.5*l*l+i*(1-s+Math.log(s)));if(e==n)return i*s;do a=ni();while(a===0);return Math.pow(a,1/n)*i*s}const lre=Object.freeze(Object.defineProperty({__proto__:null,gammaln:Ge,loggam:NG,gammafn:xi,gammap:are,lowRegGamma:Vf,factorialln:fm,factorial:Hl,combination:vk,combinationln:FG,permutation:sre,betafn:J_,betaln:gk,betacf:VT,gammapinv:Q_,erf:ty,erfc:BG,erfcinv:mk,ibetainv:op,ibeta:ap,randn:Au,randg:xo},Symbol.toStringTag,{value:"Module"}));function ure(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/J_(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-gk(t,r))}function w1(e,t,r){return e>1||e<0?(e>1)*1:ap(e,t,r)}function cre(e,t,r){return op(e,t,r)}function fre(e,t){return e/(e+t)}function hre(e,t){return op(.5,e,t)}function dre(e,t){return(e-1)/(e+t-2)}function pre(e,t){var r=xo(e);return r/(r+xo(t))}function vre(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const gre=Object.freeze(Object.defineProperty({__proto__:null,pdf:ure,cdf:w1,inv:cre,mean:fre,median:hre,mode:dre,sample:pre,variance:vre},Symbol.toStringTag,{value:"Module"}));function c8(e,t,r,n){for(var i=0,o=1,a=1,s=1,l=0,u=0,c;Math.abs((a-u)/a)>n;)u=a,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=a+c*i,o=s+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),a=i+c*a,s=o+c*s,i=i/s,o=o/s,a=a/s,s=1;return a/t}function $G(e,t,r){return r===0||r===1?t*r===e?1:0:vk(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function mre(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,a=e+1,s=t-e,l=a+s,u=Math.exp(Ge(l)-Ge(s)-Ge(a)+a*Math.log(o)+s*Math.log(1-o));return o<(a+1)/(l+2)?n=u*c8(o,a,s,i):n=1-u*c8(1-o,s,a,i),Math.round((1-n)*(1/i))/(1/i)}const _re=Object.freeze(Object.defineProperty({__proto__:null,pdf:$G,cdf:mre},Symbol.toStringTag,{value:"Module"}));function yre(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function bre(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function wre(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function Sre(e){return e}function Tre(e){return e}function Pre(e,t){return Au()*Math.sqrt(1/(2*randg(.5)))*t+e}const Ere=Object.freeze(Object.defineProperty({__proto__:null,pdf:yre,cdf:bre,inv:wre,median:Sre,mode:Tre,sample:Pre},Symbol.toStringTag,{value:"Module"}));function Are(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/J_(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*$G((t-2)/2,(t+r-2)/2,n))}function S1(e,t,r){return e<0?0:ap(t*e/(t*e+r),t/2,r/2)}function kre(e,t,r){return r/(t*(1/op(e,t/2,r/2)-1))}function Cre(e,t){return t>2?t/(t-2):void 0}function Mre(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function xre(e,t){var r=xo(e/2)*2,n=xo(t/2)*2;return r/e/(n/t)}function Lre(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const Ire=Object.freeze(Object.defineProperty({__proto__:null,pdf:Are,cdf:S1,inv:kre,mean:Cre,mode:Mre,sample:xre,variance:Lre},Symbol.toStringTag,{value:"Module"}));function Ore(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-Ge(t/2))}function Rre(e,t){return e<0?0:Vf(t/2,e/2)}function Dre(e,t){return 2*Q_(e,.5*t)}function Nre(e){return e}function Fre(e){return e*Math.pow(1-2/(9*e),3)}function Bre(e){return e-2>0?e-2:0}function $re(e){return xo(e/2)*2}function zre(e){return 2*e}const Vre=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ore,cdf:Rre,inv:Dre,mean:Nre,median:Fre,mode:Bre,sample:$re,variance:zre},Symbol.toStringTag,{value:"Module"}));function Ure(e,t){return e<0?0:t*Math.exp(-t*e)}function Gre(e,t){return e<0?0:1-Math.exp(-t*e)}function jre(e,t){return-Math.log(1-e)/t}function Wre(e){return 1/e}function Hre(e){return 1/e*Math.log(2)}function Xre(){return 0}function Yre(e){return-1/e*Math.log(ni())}function qre(e){return Math.pow(e,-2)}const Zre=Object.freeze(Object.defineProperty({__proto__:null,pdf:Ure,cdf:Gre,inv:jre,mean:Wre,median:Hre,mode:Xre,sample:Yre,variance:qre},Symbol.toStringTag,{value:"Module"}));function Kre(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-Ge(t)-t*Math.log(r))}function Jre(e,t,r){return e<0?0:Vf(t,e/r)}function Qre(e,t,r){return Q_(e,t)*r}function tne(e,t){return e*t}function ene(e,t){if(e>1)return(e-1)*t}function rne(e,t){return xo(e)*t}function nne(e,t){return e*t*t}const ine=Object.freeze(Object.defineProperty({__proto__:null,pdf:Kre,cdf:Jre,inv:Qre,mean:tne,mode:ene,sample:rne,variance:nne},Symbol.toStringTag,{value:"Module"}));function id(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?id(t-r-n+e,t,t-r,t-n):id(n-e,t,t-r,n);if(n*2>t)return id(r-e,t,r,t-n);if(r<n)return id(e,t,n,r);for(var i=1,o=0,a=0;a<e;a++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function od(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?od(t-r-n+e,t,t-r,t-n):1-od(n-e-1,t,t-r,n);if(n*2>t)return 1-od(r-e-1,t,r,t-n);if(r<n)return od(e,t,n,r);for(var i=1,o=1,a=0,s=0;s<e;s++){for(;i>1&&a<n;){var l=1-r/(t-a);o*=l,i*=l,a++}o*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1)),i+=o}for(;a<n;a++)i*=1-r/(t-a);return Math.min(1,Math.max(0,i))}const one=Object.freeze(Object.defineProperty({__proto__:null,pdf:id,cdf:od},Symbol.toStringTag,{value:"Module"}));function ane(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-Ge(t)+t*Math.log(r))}function sne(e,t,r){return e<=0?0:1-Vf(t,r/e)}function lne(e,t,r){return r/Q_(1-e,t)}function une(e,t){return e>1?t/(e-1):void 0}function cne(e,t){return t/(e+1)}function fne(e,t){return t/xo(e)}function hne(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const dne=Object.freeze(Object.defineProperty({__proto__:null,pdf:ane,cdf:sne,inv:lne,mean:une,mode:cne,sample:fne,variance:hne},Symbol.toStringTag,{value:"Module"}));function pne(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function vne(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function gne(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function mne(e,t){return t*xi(1+1/e)*xi(t)/xi(1+1/e+t)}function _ne(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function yne(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function bne(){throw new Error("variance not yet implemented")}const wne=Object.freeze(Object.defineProperty({__proto__:null,pdf:pne,cdf:vne,inv:gne,mean:mne,median:_ne,mode:yne,variance:bne},Symbol.toStringTag,{value:"Module"}));function Sne(e){return e/Math.abs(e)}function Tne(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function Pne(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function Ene(e){return e}function Ane(e){return e}function kne(e){return e}function Cne(e,t){return 2*t*t}function Mne(e,t){var r=ni()-.5;return e-t*Sne(r)*Math.log(1-2*Math.abs(r))}const xne=Object.freeze(Object.defineProperty({__proto__:null,pdf:Tne,cdf:Pne,mean:Ene,median:Ane,mode:kne,variance:Cne,sample:Mne},Symbol.toStringTag,{value:"Module"}));function Lne(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function Ine(e,t,r){return e<0?0:.5+.5*ty((Math.log(e)-t)/Math.sqrt(2*r*r))}function One(e,t,r){return Math.exp(-1.4142135623730951*r*mk(2*e)+t)}function Rne(e,t){return Math.exp(e+t*t/2)}function Dne(e){return Math.exp(e)}function Nne(e,t){return Math.exp(e-t*t)}function Fne(e,t){return Math.exp(Au()*t+e)}function Bne(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const $ne=Object.freeze(Object.defineProperty({__proto__:null,pdf:Lne,cdf:Ine,inv:One,mean:Rne,median:Dne,mode:Nne,sample:Fne,variance:Bne},Symbol.toStringTag,{value:"Module"}));function zG(e,t,r){return e!==e>>>0?!1:e<0?0:vk(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function zne(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=zG(i,t,r);return n}const Vne=Object.freeze(Object.defineProperty({__proto__:null,pdf:zG,cdf:zne},Symbol.toStringTag,{value:"Module"}));function VG(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*J_(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function Qo(e,t){var r=t/2;return ap((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function T1(e,t){var r=op(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function Une(e){return e>1?0:void 0}function Gne(){return 0}function jne(){return 0}function Wne(e){return Au()*Math.sqrt(e/(2*xo(e/2)))}function Hne(e){return e>2?e/(e-2):e>1?1/0:void 0}const Xne=Object.freeze(Object.defineProperty({__proto__:null,pdf:VG,cdf:Qo,inv:T1,mean:Une,median:Gne,mode:jne,sample:Wne,variance:Hne},Symbol.toStringTag,{value:"Module"}));function Yne(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function _i(e,t,r){return .5*(1+ty((e-t)/Math.sqrt(2*r*r)))}function UT(e,t,r){return-1.4142135623730951*r*mk(2*e)+t}function qne(e){return e}function Zne(e){return e}function Kne(e){return e}function Jne(e,t){return Au()*t+e}function Qne(e,t){return t*t}const tie=Object.freeze(Object.defineProperty({__proto__:null,pdf:Yne,cdf:_i,inv:UT,mean:qne,median:Zne,mode:Kne,sample:Jne,variance:Qne},Symbol.toStringTag,{value:"Module"}));function eie(e,t,r){var n=1e-14;return Math.abs(r)<n?VG(e,t):Math.abs(e)<n?Math.exp(Ge((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-Ge(t/2)):t/e*(GT(e*Math.sqrt(1+2/t),t+2,r)-GT(e,t,r))}function GT(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return Qo(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var a=_i(-r,0,1),s=n+1,l=s,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-Ge(3/2))*r;c<i||l>n||s>n;)l=s,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),s=f*w1(u,c+.5,t/2)+h*w1(u,c+1,t/2),a+=.5*s,c++;return o?1-a:a}const rie=Object.freeze(Object.defineProperty({__proto__:null,pdf:eie,cdf:GT},Symbol.toStringTag,{value:"Module"}));function nie(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function iie(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function oie(e,t,r){return t/Math.pow(1-e,1/r)}function aie(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function sie(e,t){return e*(t*Math.SQRT2)}function lie(e){return e}function uie(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const cie=Object.freeze(Object.defineProperty({__proto__:null,pdf:nie,cdf:iie,inv:oie,mean:aie,median:sie,mode:lie,variance:uie},Symbol.toStringTag,{value:"Module"}));function dt(...e){return new dt._init(...e)}dt._init=function(...e){if(Mo(e[0]))if(Mo(e[0][0])){P0(e[1])&&(e[0]=rn(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=P0(e[1])?rn(e[0],e[1]):e[0],this.length=1;else if(Pr(e[0]))this[0]=CG.apply(null,e),this.length=1;else{if(e[0]instanceof dt)return dt(e[0].toArray());this[0]=[],this.length=1}return this};dt._init.prototype=dt.prototype;dt._init.constructor=dt;dt.setRandom=TG;const mn=dt.prototype;mn.length=0;mn.push=Array.prototype.push;mn.sort=Array.prototype.sort;mn.splice=Array.prototype.splice;mn.slice=Array.prototype.slice;mn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};mn.map=function(e,t){return dt(rn(this,e,t))};mn.cumreduce=function(e,t){return dt(q_(this,e,t))};mn.alter=function(e){return fk(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{mn[e]=function(t){if(t)return t.call(this,mn[e].call(this)),this;const r=dt[e](this);return Array.isArray(r)?dt(r):r}});"row col".split(" ").forEach(e=>{mn[e]=function(t,r){return r?(r.call(this,mn[e].call(this,t)),this):dt(dt[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{mn[e]=function(...t){return dt(dt[e](...t))}});function UG(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/Hl(e)}function fie(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(UG(n,t));return nn(r)}function hie(e){return e}function die(e){return e}function pie(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=dt._random_fn();while(t>n);return r-1}function vie(e){var t=e,r,n,i,o,a,s,l,u,c,f;for(o=Math.sqrt(t),a=Math.log(t),l=.931+2.53*o,s=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*s/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(s/(f*f)+l)<=-t+r*a-NG(r+1))return r}}function gie(e){return e<10?pie(e):vie(e)}const mie=Object.freeze(Object.defineProperty({__proto__:null,pdf:UG,cdf:fie,mean:hie,variance:die,sample:gie},Symbol.toStringTag,{value:"Module"}));function _ie(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function yie(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function bie(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function wie(e,t,r){return(e+t+r)/3}function Sie(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function Tie(e,t,r){return r}function Pie(e,t,r){var n=ni();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function Eie(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const Aie=Object.freeze(Object.defineProperty({__proto__:null,pdf:_ie,cdf:yie,inv:bie,mean:wie,median:Sie,mode:Tie,sample:Pie,variance:Eie},Symbol.toStringTag,{value:"Module"}));function f8(e,t,r){var n=12,i=6,o=-30,a=-50,s=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*_i(p,0,1)-1;v>=Math.exp(a/r)?v=Math.pow(v,r):v=0;var g;e>u?g=c:g=f;for(var m=p,_=(l-p)/g,y=m+_,w=0,T=r-1,S=1;S<=g;S++){for(var P=0,k=.5*(y+m),A=.5*(y-m),C=1;C<=n;C++){var M,D;i<C?(M=n-C+1,D=h[M-1]):(M=C,D=-h[M-1]);var B=A*D,z=k+B,N=z*z;if(N>s)break;var j=2*_i(z,0,1),Z=2*_i(z,e,1),q=j*.5-Z*.5;q>=Math.exp(o/T)&&(q=d[M-1]*Math.exp(-(.5*N))*Math.pow(q,T),P+=q)}P*=2*A*r/Math.sqrt(2*Math.PI),w+=P,m=y,y+=_}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function kie(e,t,r){var n=.322232421088,i=.099348462606,o=-1,a=.588581570495,s=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,g=1.208,m=1.4142,_=120,y=.5-.5*e,w=Math.sqrt(Math.log(1/(y*y))),T=w+((((w*f+u)*w+s)*w+o)*w+n)/((((w*h+c)*w+l)*w+a)*w+i);r<_&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<_&&(S+=-v/r+g*T/r),T*(S*Math.log(t-1)+m)}function Rd(e,t,r){var n=1,i=t,o=16,a=8,s=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,g=.125,m=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],_=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return f8(e,n,i);var y=r*.5,w=y*Math.log(r)-r*Math.log(2)-Ge(y),T=y-1,S=r*.25,P;r<=u?P=d:r<=c?P=p:r<=f?P=v:P=g,w+=Math.log(P);for(var k=0,A=1;A<=50;A++){for(var C=0,M=(2*A-1)*P,D=1;D<=o;D++){var B,z;a<D?(B=D-a-1,z=w+T*Math.log(M+m[B]*P)-(m[B]*P+M)*S):(B=D-1,z=w+T*Math.log(M-m[B]*P)+(m[B]*P-M)*S);var N;if(z>=s){a<D?N=e*Math.sqrt((m[B]*P+M)*.5):N=e*Math.sqrt((-(m[B]*P)+M)*.5);var j=f8(N,n,i),Z=j*_[B]*Math.exp(z);C+=Z}}if(A*P>=1&&C<=l)break;k+=C}if(C>l)throw new Error("tukey.cdf failed to converge");return k>1&&(k=1),k}function Cie(e,t,r){var n=1,i=t,o=1e-4,a=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var s=kie(e,i,r),l=Rd(s,t,r)-e,u;l>0?u=Math.max(0,s-1):u=s+1;for(var c=Rd(u,t,r)-e,f,h=1;h<a;h++){f=u-c*(u-s)/(c-l),l=c,s=u,f<0&&(f=0,c=-e),c=Rd(f,t,r)-e,u=f;var d=Math.abs(u-s);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const Mie=Object.freeze(Object.defineProperty({__proto__:null,cdf:Rd,inv:Cie},Symbol.toStringTag,{value:"Module"}));function xie(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function Lie(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function Iie(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function GG(e,t){return e*xi(1+1/t)}function Oie(e,t){return e*Math.pow(Math.log(2),1/t)}function Rie(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Die(e,t){return e*Math.pow(-Math.log(ni()),1/t)}function Nie(e,t){return e*e*xi(1+2/t)-Math.pow(GG(e,t),2)}const Fie=Object.freeze(Object.defineProperty({__proto__:null,pdf:xie,cdf:Lie,inv:Iie,mean:GG,median:Oie,mode:Rie,sample:Die,variance:Nie},Symbol.toStringTag,{value:"Module"})),Bie=Object.freeze(Object.defineProperty({__proto__:null,arcsine:ore,beta:gre,binomial:_re,cauchy:Ere,centralF:Ire,chisquare:Vre,exponential:Zre,gamma:ine,hypgeom:one,invgamma:dne,kumaraswamy:wne,laplace:xne,lognormal:$ne,negbin:Vne,noncentralt:rie,normal:tie,pareto:cie,poisson:mie,studentt:Xne,triangular:Aie,tukey:Mie,uniform:Zee,weibull:Fie},Symbol.toStringTag,{value:"Module"}));function jT(){const e=[...arguments];return Pr(e[1])?(e[0]-e[1])/e[2]:(e[0]-ar(e[1]))/ba(e[1],e[2])}function _k(){const e=[...arguments];let t;return Mo(e[1])?(t=jT(e[0],e[1],e[3]),e[2]===1?_i(-Math.abs(t),0,1):_i(-Math.abs(t),0,1)*2):e.length>2?(t=jT(e[0],e[1],e[2]),e[3]===1?_i(-Math.abs(t),0,1):_i(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?_i(-Math.abs(t),0,1):_i(-Math.abs(t),0,1)*2)}function WT(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-ar(e[1]))/(ba(e[1],!0)/Math.sqrt(e[1].length))}function $ie(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(WT(e[0],e[1],e[2],e[3])),e[4]===1?Qo(-t,e[3]-1):Qo(-t,e[3]-1)*2):Pr(e[1])?(t=Math.abs(e[0]),e[2]===1?Qo(-t,e[1]-1):Qo(-t,e[1]-1)*2):(t=Math.abs(WT(e[0],e[1])),e[2]===1?Qo(-t,e[1].length-1):Qo(-t,e[1].length-1)*2)}function zie(){var e=[...arguments],t,r,n,i,o,a,s,l;if(e.length===1){for(o=new Array(e[0].length),s=0;s<e[0].length;s++)o[s]=e[0][s];e=o}for(r=[],s=0;s<e.length;s++)r=r.concat(e[s]);for(n=ar(r),t=0,s=0;s<e.length;s++)t=t+e[s].length*Math.pow(ar(e[s])-n,2);for(t/=e.length-1,a=0,s=0;s<e.length;s++)for(i=ar(e[s]),l=0;l<e[s].length;l++)a+=Math.pow(e[s][l]-i,2);return a/=r.length-e.length,t/a}function Vie(){var e=[...arguments],t,r,n,i;if(Pr(e[0]))return 1-S1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-S1(o,t,r)}function Uie(e,t,r){return 1-S1(e,t,r)}function HT(){var e=[...arguments],t,r,n,i,o;return Pr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=ar(e[0]),r=ar(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function jG(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=HT(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=HT(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Rd(t,n,r-n)}function Gie(e){for(var t=IG(e),r=e.map(l=>ar(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var a=o+1;a<e.length;++a){var s=jG(r[o],r[a],e[o].length,e[a].length,t,n,e.length);i.push([[o,a],s])}return i}function jie(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(UT(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(UT(e[1]/2,0,1)*ba(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Wie(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(T1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(T1(e[1]/2,e[2].length-1)*ba(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function Hie(e,t){return e<t}function WG(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function Xie(e,t,r,n){const i=WG(e,t,r,n);return _k(i,1)}function Yie(e,t,r,n){const i=WG(e,t,r,n);return _k(i,2)}const qie=Object.freeze(Object.defineProperty({__proto__:null,zscore:jT,ztest:_k,tscore:WT,ttest:$ie,anovafscore:zie,anovaftest:Vie,ftest:Uie,qscore:HT,qtest:jG,tukeyhsd:Gie,normalci:jie,tci:Wie,significant:Hie,oneSidedDifferenceOfProportions:Xie,twoSidedDifferenceOfProportions:Yie},Symbol.toStringTag,{value:"Module"}));function Ni(e){return Mo(e)||e.constructor.name==="jStat"}function dn(e,t){return Ni(t)?(Ni(t[0])||(t=[t]),rn(e,function(r,n,i){return r+t[n][i]})):rn(e,function(r){return r+t})}function lu(e,t){return Ni(t)?(Ni(t[0])||(t=[t]),rn(e,function(r,n,i){return r-t[n][i]||0})):rn(e,function(r){return r-t})}function XT(e,t){return Ni(t)?(Ni(t[0])||(t=[t]),Jt(e,Lo(t))):rn(e,function(r){return r/t})}function Jt(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,a=Ro(i,r=Ni(t)?t[0].length:o);let s=0;if(Ni(t)){for(;s<r;s++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][s];a[l][s]=n}return i===1&&s===1?a[0][0]:a}return rn(e,function(l){return l*t})}function Zie(e,t){return Jt(e.map(r=>[r]),[t])}function P1(e,t){Ni(e[0])||(e=[e]),Ni(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Ts(e):e,n=t[0].length===1&&t.length!==1?Ts(t):t,i=[],o=r.length,a=r[0].length,s,l;for(let u=0;u<o;u++){for(i[u]=[],s=0,l=0;l<a;l++)s+=r[u][l]*n[u][l];i[u]=s}return i.length===1?i[0]:i}function YT(e,t){return rn(e,r=>Math.pow(r,t))}function Kie(e){return rn(e,t=>Math.exp(t))}function Jie(e){return rn(e,t=>Math.log(t))}function Qie(e){return rn(e,t=>Math.abs(t))}function nf(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),Ni(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function toe(e,t){return Math.acos(P1(e,t)/(nf(e)*nf(t)))}function yk(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Lo(e){for(var t=e.length,r=e[0].length,n=su(t,r),i=HG(e,n),o=[],a=0,s;a<t;a++)for(o[a]=[],s=r;s<i[0].length;s++)o[a][s-r]=i[a][s];return o}function eoe(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,a=i-t+1,s=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[a<0?a+t:a]*=e[l][c],n[s<t?s+t:s]*=e[l][c],a++,s--;a=--i-t+1,s=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function roe(e,t){var r=0,n=0,i=e.length,o=e[0].length,a=1,s=0,l=[],u,c,f,h;for(e=yk(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(a=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-a*e[r][h]}for(r=i-1;r>=0;r--){for(s=0,n=r+1;n<=i-1;n++)s=s+l[n]*e[r][n];l[r]=(e[r][u-1]-s)/e[r][r]}return l}function HG(e,t){var r=yk(e,t),n=r.length,i=r[0].length,o=0,a,s,l;for(s=0;s<n;s++){var u=s;for(l=s+1;l<n;l++)Math.abs(r[l][s])>Math.abs(r[u][s])&&(u=l);var c=r[s];for(r[s]=r[u],r[u]=c,l=s+1;l<n;l++)for(o=r[l][s]/r[s][s],a=s;a<i;a++)r[l][a]-=r[s][a]*o}for(s=n-1;s>=0;s--){for(o=r[s][s],l=0;l<s;l++)for(a=i-1;a>s-1;a--)r[l][a]-=r[s][a]*r[l][s]/o;for(r[s][s]/=o,a=n;a<i;a++)r[s][a]/=o}return r}function noe(e,t){var r=e[0].length,n=Ro(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r-1,-1,-1).forEach(function(a){i=Ie(a+1,r).map(function(s){return n[s]*e[a][s]}),n[a]=(t[a]-nn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function ioe(e,t){var r=e[0].length,n=Ro(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Ie(r).forEach(function(a){i=Ie(a).map(function(s){return e[a][s]*n[s]}),n[a]=(t[a]-nn(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function ooe(e){var t=e.length,r=su(t),n=Ro(e.length,e[0].length),i;return Ie(t).forEach(function(o){n[0][o]=e[0][o]}),Ie(1,t).forEach(function(o){Ie(o).forEach(function(a){i=Ie(a).map(function(s){return r[o][s]*n[s][a]}),r[o][a]=(e[o][a]-nn(i))/n[a][a]}),Ie(o,t).forEach(function(a){i=Ie(o).map(function(s){return r[o][s]*n[s][a]}),n[o][a]=e[i.length][a]-nn(i)})}),[r,n]}function aoe(e){var t=e.length,r=Ro(e.length,e[0].length),n;return Ie(t).forEach(function(i){n=Ie(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-nn(n)),Ie(i+1,t).forEach(function(o){n=Ie(i).map(function(a){return r[i][a]*r[o][a]}),r[o][i]=(e[i][o]-nn(n))/r[i][i]})}),r}function soe(e,t,r,n){for(var i=0,o=0,a=e.length,s=[],l=[],u=[],c,f,h,d;i<a;i++)for(s[i]=[],l[i]=[],u[i]=[],o=0;o<a;o++)i>o?(s[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],s[i][o]=u[i][o]=0):(u[i][o]=e[i][o],s[i][o]=l[i][o]=0);for(h=Jt(Jt(Lo(u),dn(s,l)),-1),f=Jt(Lo(u),t),c=r,d=dn(Jt(h,r),f),i=2;Math.abs(nf(lu(d,c)))>n;)c=d,d=dn(Jt(h,c),f),i++;return d}function loe(e,t,r,n){for(var i=0,o=e.length,a=[],s=[],l=[],u,c,f,h,d;i<o;i++)for(a[i]=[],s[i]=[],l[i]=[],u=0;u<o;u++)i>u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):i<u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):(l[i][u]=e[i][u],a[i][u]=s[i][u]=0);for(h=Jt(Jt(Lo(dn(l,a)),s),-1),f=Jt(Lo(dn(l,a)),t),c=r,d=dn(Jt(h,r),f),i=2;Math.abs(nf(lu(d,c)))>n;)c=d,d=dn(Jt(h,c),f),i=i+1;return d}function uoe(e,t,r,n,i){for(var o=0,a=e.length,s=[],l=[],u=[],c,f,h,d,p;o<a;o++)for(s[o]=[],l[o]=[],u[o]=[],c=0;c<a;c++)o>c?(s[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],s[o][c]=u[o][c]=0):(u[o][c]=e[o][c],s[o][c]=l[o][c]=0);for(d=Jt(Lo(dn(u,Jt(s,i))),lu(Jt(u,1-i),Jt(l,i))),h=Jt(Jt(Lo(dn(u,Jt(s,i))),t),i),f=r,p=dn(Jt(d,r),h),o=2;Math.abs(nf(lu(p,f)))>n;)f=p,p=dn(Jt(d,f),h),o++;return p}function coe(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],a,s,l,u,c;n<t-1;n++){for(a=0,u=n+1;u<r;u++)a+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,a=c*Math.sqrt(a),s=Math.sqrt((a*a-e[n+1][n]*a)/2),i=Ro(t,1),i[n+1][0]=(e[n+1][n]-a)/(2*s),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*s);o=lu(su(t,r),Jt(Jt(i,Ts(i)),2)),e=Jt(o,Jt(e,o))}return e}function XG(e){var t=e.length,r=e[0].length,n=Ro(r,r);e=Z_(e);var i,o,a;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(nn(Ie(t).map(function(s){return e[s][o]*e[s][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(a=o+1;a<r;a++)for(n[o][a]=nn(Ie(t).map(function(s){return e[s][o]*e[s][a]})),i=0;i<t;i++)e[i][a]=e[i][a]-e[i][o]*n[o][a]}return[e,n]}function foe(e){e=Z_(e);var t=e.length,r=su(t);return Ie(t-1,-1,-1).forEach(function(n){nd(r,{row:n},XT(Jo(r,{row:n}),e[n][n])),nd(e,{row:n},XT(Jo(e,{row:n}),e[n][n])),Ie(n).forEach(function(i){var o=Jt(e[i][n],-1),a=Jo(e,{row:i}),s=Jt(Jo(e,{row:n}),o);nd(e,{row:i},dn(a,s));var l=Jo(r,{row:i}),u=Jt(Jo(r,{row:n}),o);nd(r,{row:i},dn(l,u))})}),r}function YG(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=XG(e),o=e[0].length,a=Jo(n,{col:{end:o}}),s=Jo(i,{row:{end:o}}),l=foe(s),u=Ts(a);u[0].length===void 0&&(u=[u]);var c=Jt(Jt(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function qG(e){for(var t=1,r=e.length,n=su(r,r),i=[],o,a,s,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,a=0;a<r;a++)for(s=0;s<r;s++)a!=s&&c<Math.abs(e[a][s])&&(c=Math.abs(e[a][s]),l=a,u=s);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=su(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=Jt(n,h),o=Jt(Jt(Lo(h),e),h),e=o,t=0,a=1;a<r;a++)for(s=1;s<r;s++)a!=s&&Math.abs(e[a][s])>.001&&(t=1)}for(a=0;a<r;a++)i.push(e[a][a]);return[n,i]}function hoe(e,t,r,n,i,o){var a,s,l,u,c;if(o===2)for(;n<=r;)a=t*e(n,i),s=t*e(n+t,i+a),l=i+(a+s)/2,i=l,n=n+t;if(o===4)for(;n<=r;)a=t*e(n,i),s=t*e(n+t/2,i+a/2),u=t*e(n+t/2,i+s/2),c=t*e(n+t,i+u),l=i+(a+2*s+2*u+c)/6,i=l,n=n+t;return i}function doe(e,t,r,n){for(var i=0,o=(r-t)/2,a=[],s=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)a[h]=f;for(u=a.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(a[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)s[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=s.length,l=s,s=[],u++}return l}function poe(e,t,r,n){function i(p,v){for(var g=0,m=p.length,_;g<m;g++)p[g]===v&&(_=g);return _}for(var o=Math.abs(r-e[i(e,r)+1]),a=0,s=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),s[a]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,a++;for(h=s.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*s[d+1]-s[d])/(Math.pow(4,f)-1);h=l.length,s=l,l=[],f++}return s}function voe(e,t,r,n){for(var i=(r-t)/n,o=e(t),a=[],s=t,l=0,u=1,c;s<=r;s=s+i,l++)a[l]=s;for(c=a.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(a[u]);return i/3*(o+e(r))}function goe(e,t,r,n){for(var i=e.length,o=0,a=0,s=[],l=[],u=[],c=[],f;a<i;a++){for(s[a]=1,f=0;f<i;f++)a!=f&&(s[a]*=(n-e[f])/(e[a]-e[f]));for(l[a]=0,f=0;f<i;f++)a!=f&&(l[a]+=1/(e[a]-e[f]));u[a]=(1-2*(n-e[a])*l[a])*(s[a]*s[a]),c[a]=(n-e[a])*(s[a]*s[a]),o+=u[a]*t[a]+c[a]*r[a]}return o}function moe(e,t,r){for(var n=0,i=0,o,a,s=e.length;i<s;i++){for(a=t[i],o=0;o<s;o++)i!=o&&(a*=(r-e[o])/(e[i]-e[o]));n+=a}return n}function _oe(e,t,r){for(var n=e.length,i=0,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)a[i]=[],s[i]=[],a[i][i-1]=c[i-1],a[i][i]=2*(c[i-1]+c[i]),a[i][i+1]=c[i],s[i][0]=l[i];for(u=Jt(Lo(a),s),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+YT(r-e[o],2)*u[o]+(r-e[o])*YT(r-e[o],2)*h[o]}function yoe(){throw new Error("gauss_quadrature not yet implemented")}function boe(e){var t=e.length,r=e[0].length,n=0,i,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)a[n]=nn(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-a[i];for(h=Ts(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=P1([h[n]],[h[i]])/(r-1);for(l=qG(d),p=l[0],s=l[1],v=Ts(p),n=0;n<s.length;n++)for(i=n;i<s.length;i++)s[n]<s[i]&&(o=s[n],s[n]=s[i],s[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=Ts(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=P1([v[n]],[f[i]]);return[e,s,v,c]}const woe=Object.freeze(Object.defineProperty({__proto__:null,add:dn,subtract:lu,divide:XT,multiply:Jt,outer:Zie,dot:P1,pow:YT,exp:Kie,log:Jie,abs:Qie,norm:nf,angle:toe,aug:yk,inv:Lo,det:eoe,gauss_elimination:roe,gauss_jordan:HG,triaUpSolve:noe,triaLowSolve:ioe,lu:ooe,cholesky:aoe,gauss_jacobi:soe,gauss_seidel:loe,SOR:uoe,householder:coe,QR:XG,lstsq:YG,jacobi:qG,rungekutta:hoe,romberg:doe,richardson:poe,simpson:voe,hermite:goe,lagrange:moe,cubic_spline:_oe,gauss_quadrature:yoe,PCA:boe},Symbol.toStringTag,{value:"Module"}));function Soe(e){var t=e[0].length,r=Ie(t).map(function(n){var i=Ie(t).filter(function(o){return o!==n});return ZG(b1(e,n).map(function(o){return o[0]}),b1(e,i))});return r}function ZG(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=YG(t,e),a=Jt(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),s=lu(e,a),l=ar(e),u=nn(a.map(function(d){return Math.pow(d-l,2)})),c=nn(e.map(function(d,p){return Math.pow(d-a[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:a,resid:s,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function Toe(e){var t=Soe(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=Qo(l,e.df_resid);return(u>.5?1-u:u)*2}),a=T1(.975,e.df_resid),s=e.coef.map(function(l,u){var c=a*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:s}}function Poe(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,a){return w1(i/(a/o+i),o/2,a/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function Eoe(e,t){var r=ZG(e,t),n=Toe(r),i=Poe(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const Aoe={ols:Eoe},koe=Object.freeze(Object.defineProperty({__proto__:null,models:Aoe},Symbol.toStringTag,{value:"Module"}));Object.assign(dt,yee,Uee,qie,woe,koe,lre);for(const[e,t]of Object.entries(Bie)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),dt[e]=r,dt.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?dt.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?dt.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){dt.prototype[e]=function(){return dt(dt.map(this,function(t){return dt[e](t)}))}});dt.prototype.randn=function(){return dt(dt.randn.apply(null,arguments))};const bk=SG.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(bk(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(s=n===!0?this:this.transpose();a<s.length;a++)o[a]=dt[r](s[a]);return o}return dt[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(bk(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(r!=="sumrow"&&(s=n===!0?this:this.transpose());a<s.length;a++)o[a]=dt[r](s[a]);return n===!0?dt[r](dt.utils.toVector(o)):o}return dt[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(){var n=[],i=0,o=this,a=Array.prototype.slice.call(arguments),s;if(bk(a[a.length-1])){s=a[a.length-1];var l=a.slice(0,a.length-1);return setTimeout(function(){s.call(o,dt.prototype[r].apply(o,l))}),this}else{s=void 0;var u=function(f){return dt[r].apply(o,[f].concat(a))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));dt.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};dt.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?dt.normal.cdf(-i,0,1):dt.normal.cdf(-i,0,1)*2};dt.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};dt.prototype.ttest=function(t,r){return r===1?1-dt.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):dt.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};dt.prototype.anovafscore=function(){return dt.anovafscore(this.toArray())};dt.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return dt.ftest(this.anovafscore(),this.length-1,t-this.length)};dt.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};dt.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{dt.prototype[e]=function(t,r){const n=this;return r?(r.call(n,dt.prototype[e].call(n,t)),this):typeof dt[e](this,t)=="number"?dt[e](this,t):dt(dt[e](this,t))}});dt.jStat=dt;function wk(e,t,r){const n=t;let i=[];for(let o=0;o<=r;o++){const a=dt.binomial.pdf(o,r,e/r);if(a<0)return null;const s=a*n;s<.01||i.push([o,s])}return i}function Coe(e,t){let r={};if(e)for(let[o,a]of e)r[o]=a;for(let[o,a]of t)o in r?r[o]+=a:r[o]=a;let n=Object.entries(r).sort((o,a)=>o[0]-a[0]),i=[];for(let[o,a]of n)i.push([o,a]);return i}function Sk(e,t,r,n,i){return n?xoe(e,t,r):Moe(e,t,r,i)}function Moe(e,t,r,n){const o=r+2,a=Object.keys(e).sort((d,p)=>e[p][1]-e[d][1]);let s={},l=0;if(a.forEach(d=>{const p=e[d][0];if(n&&p=="0")return;const v=e[d][1],g=p in t?t[p]:0;(v>=5||g>=5||l<o)&&(s[p]={y_model:v,y_observed:g},l++)}),Object.keys(s).length==0)return console.log("can't compute chiSquared: discarded",s),{chisq:void 0,pval:NaN};let c=0,f=0;for(const[d,{y_model:p,y_observed:v}]of Object.entries(s)){const g=p-v;f+=g*g/p,c++}if(c-1-r<1)return console.log("can't compute pval: bins",c,"variables",r),{chisq:f,pval:NaN};const h=1-dt.chisquare.cdf(f,c-1-r);return{chisq:f,pval:h}}function xoe(e,t,r,n){if(this.stats.len<=5)return console.log("can't compute chiSquared: count <",5),{chisq:0,pval:1};let o={},a=0,s=0,l=e.length,u=0;for(;l--;){let d=e[l][0];if(a+=e[l][1],s+=d in t?t[d]:0,s>=5){o[d]={bell:a,hist:s},a=0,s=0,u=d;break}}for(const[d,p]of e){if(d==u)break;a+=p,s+=d in t?t[d]:0,s>=5&&(o[d]={bell:a,hist:s},a=0,s=0)}o[u].bell+=a,o[u].hist+=s;let c=0,f=0;for(const[d,{bell:p,hist:v}]of Object.entries(o)){let g=p-v;f+=g*g/p,c++}if(c-1-r<1)return console.log("can't compute pval: bins",c,"variables",r),{chisq:f,pval:1};const h=1-dt.chisquare.cdf(f,c-1-r);return{chisq:f,pval:h}}function KG(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}zr([gf,m_,F0,B0,yf,_f,bf,$0,b_,y_,__,z0]);const Loe={data:()=>({selected_np:1,selected_n:10}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:wf},methods:{formatFixed:Bt,isGoodVal:ho,formatKMG:bP,makeBinomialArray:wk,loss:Sk,applyGiantBonus:KG,makeModelA(e,t){let r={np:e,n:t};return r.bell=this.makeBinomialArray(e,this.stats.len,t,this.stats.generalSigmas),r.bell?(this.isGiant&&this.applyGiantBonus(r.bell),r.loss=this.loss(r.bell,this.histogram.map,2),r):null},tuneModelA(e,t){let r=[t];t===void 0&&(r=[1,10,20,40,110,120,140,150],r=r.filter(i=>i>=e&&i<=this.stats.max*5));let n={n:NaN,loss:{chisq:NaN,pval:NaN}};return r.forEach(i=>{const o=this.makeModelA(e,i);if(!o)return;const a=ho(o.loss.pval)&&(!ho(n.loss.pval)||o.loss.pval>n.loss.pval),s=ho(o.loss.chisq)&&(!ho(n.loss.chisq)||o.loss.chisq<n.loss.chisq);(a||s)&&(n=o)}),n},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(n=>{const i=n[0],o=n[1],a=o/e,s=t*Math.sqrt(a*(1-a)/e),l=Math.max(0,a-s)*e,u=Math.min(1,a+s)*e;r.push([i,o,l,u])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of r)if(Math.floor(this.sweepRange.range/a)<20){t=a;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let a=n;a<=this.sweepRange.hi;a+=t){let s=this.tuneModelA(a,void 0);a>this.sweepRange.init&&a<this.sweepRange.init+t&&o.push([this.sweepRange.init,e.loss.chisq,e.loss.pval,s.n]),o.push([a,s.loss.chisq,s.loss.pval,s.n]),s.loss.chisq<i.loss.chisq&&(i=s)}return isFinite(i.loss.chisq)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>Bt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>Bt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Bt(r[0],2)}<br/>n=${Bt(r[3],2)}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Bt(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},zs=e=>(Vr("data-v-90485a5f"),e=e(),Ur(),e),Ioe=V(" with giant bonus"),Ooe=zs(()=>b("span",{class:"title"},"Model A",-1)),Roe=zs(()=>b("span",null,[V(": all points were taken from a single distribution with "),b("i",null,"np = M")],-1)),Doe={style:{float:"left"}},Noe=V(" Sweeping through "),Foe=zs(()=>b("i",null,"np",-1)),Boe={key:0,id:"chartSweep"},$oe={key:1},zoe={style:{padding:"1em"}},Voe=zs(()=>b("tr",null,[b("th"),b("th",null,"np"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),Uoe=zs(()=>b("td",null,"Best fit:",-1)),Goe=zs(()=>b("td",null,"Manual:",-1)),joe=V(" np: "),Woe=["value","min","max","step"],Hoe=V(" n: "),Xoe=["value","min"],Yoe=zs(()=>b("br",null,null,-1)),qoe={id:"chartHisto",style:{float:"left"}},Zoe=zs(()=>b("div",{style:{clear:"both"}},null,-1));function Koe(e,t,r,n,i,o){const a=de("v-chart");return O(),R(W,null,[b("p",null,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[wr,r.isGiant]]),Ioe]),Ooe,Roe,b("div",null,[b("div",Doe,[Noe,Foe,V(" values in "+L(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+L(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(O(),R("div",Boe,[Mt(a,{option:o.makeChartASweep},null,8,["option"])])):(O(),R("div",$oe," [failed] ")),b("div",zoe,[b("table",null,[Voe,o.modelASweep.result?(O(),R("tr",{key:0,class:Jr({strike:r.stats.aBad})},[Uoe,b("td",null,L(o.formatFixed(o.modelASweep.result.np,4)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.n)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):st("",!0),b("tr",null,[Goe,b("td",null,L(o.formatFixed(e.selected_np,4)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelA.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelA.loss.pval,4)),1)])]),joe,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNP(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Woe),Hoe,b("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,Xoe),Yoe])]),b("div",qoe,[o.modelA.bell?(O(),fa(a,{key:0,option:o.makeChartHist},null,8,["option"])):(O(),R(W,{key:1},[V(" [failed to build the requested distribution np="+L(o.modelA.np)+" n="+L(o.modelA.n)+" ] ",1)],64))]),Zoe])],64)}const Joe=$e(Loe,[["render",Koe],["__scopeId","data-v-90485a5f"]]);zr([gf,m_,F0,B0,Tlt,yf,_f,bf,$0,b_,y_,__,z0]);const Qoe={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:wf},methods:{formatFixed:Bt,formatKMG:bP,makeBinomialArray:wk,loss:Sk,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t,this.stats.generalSigmas);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=1 in r&&Object.keys(r).length==2&&1 in i&&Object.keys(i).length==1,a=this.histogramLuckOnly.err[0][1],s=this.histogramLuckOnly.err[0][2];if(r[0]<a){const l={...i};l[0]=a,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>s){const l={...i};l[0]=s,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(o){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=yG(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue):n.loss.binomtest=NaN}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*3));let n={np:0,n:1,loss:{chisq:1e99,pval:0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;const a=o.loss.pval&&n.loss.pval&&o.loss.pval>n.loss.pval,s=o.loss.chisq&&n.loss.chisq&&o.loss.chisq<.9999*n.loss.chisq;(a||s)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),a=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,a,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of n)if(Math.floor(t/s)<40){r=s;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{chisq:1e99,pval:0}};const a=[];for(let s=i;s<=this.sweep_hi;s+=r){const l=this.tuneModelB(s,void 0);if(!l)continue;a.push([s,l.loss.chisq,l.loss.pval,l.n]);const u=l.loss.pval&&o.loss.pval&&l.loss.pval>o.loss.pval,c=l.loss.chisq<o.loss.chisq;(u||c)&&(o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:a}},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelB.bell}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,3)},showSymbol:!1},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),a=r.size([1,0])[0]*.1,s=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-a,y1:i[1],x2:i[0]+a,y2:i[1]},style:s},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s},{type:"line",transition:["shape"],shape:{x1:o[0]-a,y1:o[1],x2:o[0]+a,y2:o[1]},style:s}]}},tooltip:{show:!1},z:100}]}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${Bt(r[0],2)}<br/>n=${Bt(r[3])}<br/>\u03C7\xB2=${r[1].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(r[2],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"\u03C7\xB2",type:"line",encode:{x:0,y:1},tooltip:{valueFormatter:t=>Bt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>Bt(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e}}},Do=e=>(Vr("data-v-2d1b7899"),e=e(),Ur(),e),tae=Do(()=>b("span",{class:"title"},"Model B",-1)),eae=Do(()=>b("span",null,[V(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),b("i",null,"np"),V(", that \u03BB"),b("i",null,"np"),V(" = M")],-1)),rae=V("Sweeping through "),nae=Do(()=>b("i",null,"np",-1)),iae={style:{float:"left"}},oae={key:0,id:"chartSweep"},aae={style:{padding:"1em"}},sae={style:{float:"left"}},lae=Do(()=>b("tr",null,[b("th"),b("th",null,"np"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),uae={key:0},cae=Do(()=>b("td",null,"Best fit:",-1)),fae=Do(()=>b("td",null,"Manual:",-1)),hae=V(" np\u1D38: "),dae=["value","min","max","step"],pae=V(" n\u1D38: "),vae=["value"],gae=Do(()=>b("div",{style:{clear:"both"}},null,-1)),mae={key:0,id:"chartHisto"},_ae=Do(()=>b("br",null,null,-1)),yae={key:0},bae=V(" Corresponding range for "),wae=Do(()=>b("i",null,"np",-1)),Sae={key:1},Tae=Do(()=>b("div",{style:{clear:"both"}},null,-1));function Pae(e,t,r,n,i,o){const a=de("v-chart");return O(),R(W,null,[tae,eae,o.modelB?(O(),R(W,{key:0},[b("p",null,[rae,nae,V(" values in "+L(o.formatFixed(this.sweep_lo,2))+"\u2026"+L(o.formatFixed(this.sweep_hi,2))+" range:",1)]),b("div",iae,[o.modelBSweep?(O(),R("div",oae,[Mt(a,{option:o.makeChartBSweep},null,8,["option"])])):st("",!0),b("div",aae,[b("div",sae,[b("table",null,[lae,o.modelBSweep.result?(O(),R("tr",uae,[cae,b("td",null,L(o.formatFixed(o.modelBSweep.result.np,3)),1),b("td",null,L(o.modelBSweep.result.n),1),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):st("",!0),b("tr",null,[fae,b("td",null,L(o.formatFixed(e.selected_np,3)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelB.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelB.loss.pval,4)),1)])]),b("p",null,[hae,b("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNp(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,dae),pae,b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,vae)])]),gae])]),o.modelB.bell?(O(),R("div",mae,[Mt(a,{option:o.makeChartBHist},null,8,["option"]),V(" Bin 0 has 1-\u03BB \u2248 "+L(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+L(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),_ae,V(" Depending on \u03BB could potentially be "+L(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+L(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(O(),R("p",yae,[bae,wae,V(": "+L(o.formatFixed(o.npRangeForBinary.min,2))+"\u2026"+L(o.formatFixed(o.npRangeForBinary.max,2)),1)])):st("",!0)])):(O(),R("div",Sae," bad parameters ")),Tae],64)):st("",!0)],64)}const Eae=$e(Qoe,[["render",Pae],["__scopeId","data-v-2d1b7899"]]);zr([gf,m_,F0,B0,yf,_f,bf,$0,b_,y_,__,z0]);class Aae{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))t.push([r/1e4,i/1e4,o.loss.chisq,o.loss.pval,o.n]);return t}}const kae={data:()=>({selected_npL:1,selected_npU:1,selected_n:10}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:wf},methods:{isGoodVal:ho,formatFixed:Bt,formatKMG:bP,makeBinomialArray:wk,sumDistributions:Coe,loss:Sk,applyGiantBonus:KG,l2u(e,t,r){return r/(1-t)-t*e/(1-t)},findPsStep(e,t,r,n,i){let a={il:0,iu:0,model:i};for(let s=-30;s<=30;s++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+s*n;if(u<0||c<u)continue;const f=this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),e.put(u,c,d)),d.loss.chisq<a.model.loss.chisq&&(a={il:s,iu:l,model:d})}return a},findPsRound(e,t,r,n,i,o){for(;t<=150;){let a=this.findPsStep(e,r,n,o,i);if(a.il==0&&a.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:a.model};if(r+=a.iu*o,n+=a.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:a.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max&&o<this.stats.max*8));let i={n:0,loss:{chisq:1/0,pval:0}};return n.forEach(o=>{const a={npL:e,n:o,npU:r};a.bellL=this.makeBinomialArray(e,this.stats.lucky.len,o),a.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),this.isGiant&&this.applyGiantBonus(a.bellU),a.bell=this.sumDistributions(a.bellL,a.bellU),a.loss=this.loss(a.bell,this.histogram.map,3);const s=ho(a.loss.pval)&&(!ho(i.loss.pval)||a.loss.pval>i.loss.pval),l=ho(a.loss.chisq)&&(!ho(i.loss.chisq)||a.loss.chisq<i.loss.chisq);(s||l)&&(i=a)}),i||console.log("makemodelC failed",e,r,t),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:this.stats.mean};return this.isGiant&&(e.u_init>10?(e.u_lo/=1.684,e.u_init/=1.684,e.u_hi/=1.684,e.l_init/=1.684):e.u_init>1&&(e.u_lo/=1.684,e.u_init/=1.684,e.u_hi/=1,e.l_init/=1.684)),e},modelCSweep(){if(isNaN(this.stats.mean))return!1;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<n&&(i=n);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let a=new Aae;a.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(a,e,n,i,o,r);const s=a.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:a,psGridDots:s}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>Bt(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>Bt(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,a=(n+i)/2;let s=.2;this.stats.mean<2&&(s=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+s,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+s;if(l/u>e){const m=l,_=l/e;t=o-m/2,r=o+m/2,n=a-_/2,i=a+_/2}else{const m=u*e,_=u;t=o-m/2,r=o+m/2,n=a-_/2,i=a+_/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.chisq,max:this.modelCSweep.result.loss.chisq*2,dimension:2,text:["\u03C7\xB2",""]}:{min:0,max:this.modelCSweep.result.loss.pval,dimension:3,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(m){const _=m.data;return`np\u1D41=${Bt(_[0],2)}<br/>np\u1D38=${Bt(_[1],2)}<br/>n=${Bt(_[4],2)}<br/>\u03C7\xB2=${_[2].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${Bt(_[3],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:m=>`${m[1]} \u2192 ${Bt(m[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi,this.l2u(this.sweepRange.u_hi,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo,this.l2u(this.sweepRange.u_lo,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...v}}}}},xa=e=>(Vr("data-v-b4316b01"),e=e(),Ur(),e),Cae=V(" with giant bonus"),Mae=xa(()=>b("span",{class:"title"},"Model C",-1)),xae=xa(()=>b("br",null,null,-1)),Lae={style:{float:"left"}},Iae={key:0,style:{width:"570px",height:"270px"}},Oae={style:{padding:"1em"}},Rae={style:{float:"left"}},Dae=xa(()=>b("tr",null,[b("th"),b("th",null,"np\u1D41"),b("th",null,"np\u1D38"),b("th",null,"n"),b("th",null,"\u03C7\xB2"),b("th",null,"p-val")],-1)),Nae=xa(()=>b("td",null,"Best fit:",-1)),Fae=xa(()=>b("td",null,"Manual:",-1)),Bae=["value","min","max","step"],$ae=V(" np\u1D41 "),zae=xa(()=>b("br",null,null,-1)),Vae=["value","min","max","step"],Uae=V(" np\u1D38 "),Gae=xa(()=>b("br",null,null,-1)),jae=["value"],Wae=V(" n "),Hae=xa(()=>b("div",{style:{clear:"both"}},null,-1)),Xae={key:0,id:"chartHisto",style:{float:"left"}},Yae=xa(()=>b("div",{style:{clear:"both"}},null,-1));function qae(e,t,r,n,i,o){const a=de("v-chart");return O(),R(W,null,[b("p",null,[yt(b("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[wr,r.isGiant]]),Cae]),Mae,b("span",null,": some points were taken from a distribution L, and the rest from distribution U, so \u03BB np\u1D38 + (1 - \u03BB) np\u1D41 = M, where \u03BB \u2208 "+L(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(r.stats.lucky.shareHi*100,2))+"%, M \u2208 "+L(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+L(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2))+", and 0 < np\u1D41 < np\u1D38",1),xae,b("div",Lae,[o.modelCSweep?(O(),R("div",Iae,[Mt(a,{option:o.makeChartCGrid},null,8,["option"])])):st("",!0),b("div",Oae,[b("div",Rae,[b("table",null,[Dae,o.modelCSweep.result?(O(),R("tr",{key:0,class:Jr({strike:r.stats.dBad})},[Nae,b("td",null,L(o.formatFixed(o.modelCSweep.result.npU,2)),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.npL,2)),1),b("td",null,L(o.modelCSweep.result.n),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):st("",!0),b("tr",null,[Fae,b("td",null,L(o.formatFixed(e.selected_npU,2)),1),b("td",null,L(o.formatFixed(e.selected_npL,2)),1),b("td",null,L(e.selected_n),1),b("td",null,L(o.formatFixed(o.modelC.loss.chisq,2)),1),b("td",null,L(o.formatFixed(o.modelC.loss.pval,4)),1)])]),b("p",null,[b("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNpU(Number(s.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Bae),$ae,zae,b("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedNpL(Number(s.target.value))),value:e.selected_npL,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Vae),Uae,Gae,b("input",{type:"range",onInput:t[3]||(t[3]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,jae),Wae])]),Hae])]),o.modelC.bell?(O(),R("div",Xae,[Mt(a,{option:o.makeChartCHist},null,8,["option"])])):st("",!0),Yae],64)}const Zae=$e(kae,[["render",qae],["__scopeId","data-v-b4316b01"]]);zr([gf,m_,F0,B0,yf,_f,bf,$0,b_,y_,__,z0]);const Kae={setup(){const e=xt(),t=bY(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{VChart:wf,DRMA:Joe,DRMB:Eae,DRMC:Zae},provide(){return{[sft]:Ye(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const a=dt.binomial.cdf(o,n,1-t/100);i.push(a)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,a)=>o-a),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[v,g]of Object.entries(e))t+=e[v].length,r+=e[v].length;const n=this.weightedDataset;for(let[v,g]of Object.entries(n))for(let m of g.weights)m>this.stats.generalConfidence/100,m>1-this.stats.generalConfidence/100;let i=[],o=[],a=0,s=100,l=0;for(const[v,g]of Object.entries(n)){s=Math.min(s,v),l=Math.max(l,v);let{len:m,luckyLen:_,sorted:y,weights:w}=g;a+=_,i.push(...y),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:s,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:dt.min(i),max:dt.max(i),range:dt.range(i),mean:dt.mean(i),meanErr:0,meanLo:0,meanHi:0,std:dt.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/150*(1-c.mean/150)/c.len*150),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:a,share:a/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},!isNaN(c.lucky.share)){console.log("lucky share binomTest",c.lucky.share);const v=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-this.stats.generalConfidence/100});c.lucky.shareLo=v.ci[0],c.lucky.shareHi=v.ci[1],c.lucky.lenLo=v.ci[0]*c.len,c.lucky.lenHi=v.ci[1]*c.len}c.unlucky={len:c.len-a,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[v,g]of Object.entries(n)){let{len:m,luckyLen:_,luckeyLen95:y,sorted:w,weights:T}=g;for(let S=0;S<m;S++){const P=w[S],k=T[S];f+=P*(1-k),h+=P*k}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[v,g]of Object.entries(n)){let{len:m,sorted:_,weights:y}=g;for(let w=0;w<m;w++){const T=y[w],S=_[w]-c.unlucky.mean;d+=S*S*(1-T);const P=_[w]-c.lucky.mean;p+=P*P*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=dt.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:Bt,makeIconSrc:Fi,binomialTest:yG,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},on=e=>(Vr("data-v-9945467e"),e=e(),Ur(),e),Jae={id:"menu"},Qae={style:{display:"none"}},tse=on(()=>b("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),ese=on(()=>b("p",{class:"fsxs"},"Right: #observations used to find out the real parameters",-1)),rse={key:1},nse=on(()=>b("tr",null,[b("th",{class:"fsxs"},"n"),b("th",{class:"fsxs"},"np\u1D41"),b("th",{class:"fsxs"},"np\u1D38"),b("th",{class:"fsxs"},"item"),b("th",{class:"fsxs"},"normal"),b("th",{class:"fsxs"},"giant")],-1)),ise={class:"fsxs"},ose={class:"fsxs"},ase={class:"fsxs"},sse=["src"],lse={class:"center"},use=["title","onClick"],cse=["title"],fse={id:"content"},hse=on(()=>b("tr",null,[b("td",null,"mute"),b("td",null,"luck")],-1)),dse={class:"center"},pse=["onUpdate:modelValue"],vse=V(" Possible luck procs observed with "),gse=on(()=>b("option",{value:"1.5"},"\xB11.5\u03C3 (86.6%)",-1)),mse=on(()=>b("option",{value:"2"},"\xB12\u03C3 (95.4%)",-1)),_se=on(()=>b("option",{value:"2.5"},"\xB12.5\u03C3 (98.8%)",-1)),yse=on(()=>b("option",{value:"3"},"\xB13\u03C3 (99.7%)",-1)),bse=[gse,mse,_se,yse],wse=V(" confidence: "),Sse=on(()=>b("tr",null,[b("th"),b("th",null,"min"),b("th",null,"max")],-1)),Tse=on(()=>b("td",null,"count",-1)),Pse=on(()=>b("td",null,"% of total",-1)),Ese={id:"settings"},Ase=V(" Use model:"),kse=on(()=>b("br",null,null,-1)),Cse=on(()=>b("label",{for:"option1"},[V("A. Same item drop regardless of luck (plants, lumber, ores)"),b("br")],-1)),Mse=on(()=>b("label",{for:"option2"},[V("B. Item only drops when luck procs (sacks, lumbering rares)"),b("br")],-1)),xse=on(()=>b("label",{for:"option3"},[V("C. Different drops when luck procs and when not (eggs, honey)"),b("br")],-1)),Lse={key:0,id:"modelA",style:{float:"left"}},Ise={key:1},Ose={key:2};function Rse(e,t,r,n,i,o){const a=de("RouterLink"),s=de("DRMA"),l=de("DRMB"),u=de("DRMC");return O(),R("main",null,[b("div",Jae,[b("div",Qae,L(n.dropratesStore.selected_pzk)+" "+L(n.dropratesStore.selected_ik)+" "+L(n.dropratesStore.selected_specie),1),tse,ese,(O(!0),R(W,null,Nt(i.alldata,(c,f)=>(O(),R(W,null,[f in n.gameStore.plantzoneStatic?(O(),fa(a,{key:0,tag:"a",to:{path:"./",hash:"#node"+f}},{default:Ee(()=>[V(L(f)+" "+L(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"])):(O(),R("span",rse,L(f),1)),b("table",null,[nse,(O(!0),R(W,null,Nt(c,(h,d)=>(O(),R("tr",null,[b("td",ise,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones?(O(),R(W,{key:0},[V(L(n.gameStore.plantzones[Number(f)].rolls),1)],64)):st("",!0)]),b("td",ose,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].unlucky?(O(),R(W,{key:0},[V(L(n.gameStore.plantzones[Number(f)].unlucky[d]),1)],64)):st("",!0)]),b("td",ase,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].lucky?(O(),R(W,{key:0},[V(L(n.gameStore.plantzones[Number(f)].lucky[d]),1)],64)):st("",!0)]),b("td",null,[Mt(a,{tag:"a",to:{path:"./settings",hash:"#item"+d}},{default:Ee(()=>[b("span",null,[b("img",{src:o.makeIconSrc(d),class:"iconitem"},null,8,sse)])]),_:2},1032,["to"]),V(" "+L(n.gameStore.itemName(d)),1)]),(O(),R(W,null,Nt(["normal","giant"],p=>b("td",lse,[p in h?(O(),R(W,{key:0},[f!=n.dropratesStore.selected_pzk||d!=n.dropratesStore.selected_ik||p!=n.dropratesStore.selected_specie?(O(),R("button",{key:0,title:"item "+d,onClick:v=>o.activate(f,d,p)},L(Object.values(h[p]).flat().length),9,use)):(O(),R("button",{key:1,title:"item "+d,class:"pressed"},L(Object.values(h[p]).flat().length),9,cse))],64)):st("",!0)])),64))]))),256))])],64))),256))]),b("div",fse,[b("details",null,[b("summary",null,[V("Dataset: size N = "+L(o.stats.len)+", mean M = "+L(o.formatFixed(o.stats.mean,2))+"\xB1"+L(o.formatFixed(1.96*o.stats.meanErr,2))+", ",1),this.stats.minLuck==this.stats.maxLuck?(O(),R(W,{key:0},[V(L(this.stats.maxLuck),1)],64)):(O(),R(W,{key:1},[V(L(o.formatFixed(this.stats.minLuck,2))+"\u2026"+L(o.formatFixed(this.stats.maxLuck,2)),1)],64)),V("\u{1F340} \u2192 \u03BB \u2208 "+L(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+L(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),b("div",null,[b("table",null,[hse,(O(!0),R(W,null,Nt(o.stats.dataRaw,(c,f)=>(O(),R("tr",{class:Jr({strike:i.hide_buckets[f]})},[b("td",dse,[yt(b("input",{"onUpdate:modelValue":h=>i.hide_buckets[f]=h,type:"checkbox"},null,8,pse),[[wr,i.hide_buckets[f]]])]),b("td",null,L(f),1),(O(!0),R(W,null,Nt(c,h=>(O(),R("td",null,L(h),1))),256))],2))),256))])]),b("p",null,[vse,yt(b("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.generalSigmas=c)},bse,512),[[fn,i.generalSigmas]]),wse,b("table",null,[Sse,b("tr",null,[Tse,b("td",null,L(o.formatFixed(o.stats.lucky.lenLo,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),b("tr",null,[Pse,b("td",null,L(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),b("td",null,L(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),b("div",Ese,[Ase,kse,yt(b("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=c=>n.dropratesStore.selected_model=c)},null,512),[[cd,n.dropratesStore.selected_model]]),Cse,yt(b("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=c=>n.dropratesStore.selected_model=c)},null,512),[[cd,n.dropratesStore.selected_model]]),Mse,yt(b("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=c=>n.dropratesStore.selected_model=c)},null,512),[[cd,n.dropratesStore.selected_model]]),xse]),n.dropratesStore.selected_model=="a"?(O(),R("div",Lse,[Mt(s,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):st("",!0),n.dropratesStore.selected_model=="b"?(O(),R("div",Ise,[Mt(l,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):st("",!0),n.dropratesStore.selected_model=="c"?(O(),R("div",Ose,[Mt(u,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):st("",!0)])])}const Dse=$e(Kae,[["render",Rse],["__scopeId","data-v-9945467e"]]),Nse=fY({history:CX("/workerman/"),routes:[{path:"/",name:"home",component:gkt},{path:"/plantzones",component:hCt},{path:"/modifiers",component:KCt},{path:"/settings",component:k4t},{path:"/about",component:()=>IY(()=>import("./AboutView.8087a1a5.js"),[])},{path:"/othertowns",component:O4t},{path:"/workshops",component:q4t},{path:"/housecraft",component:v6t},{path:"/droprates",component:Dse},{path:"/lodging",component:PCt}]});const Tk=DH(MY),Fse=sX();Tk.use(Fse);Tk.use(Nse);Tk.mount("#app");export{W as F,$e as _,b as a,V as b,R as c,Mt as d,hP as e,de as f,Ur as g,O as o,Vr as p,OW as r,Ee as w};
