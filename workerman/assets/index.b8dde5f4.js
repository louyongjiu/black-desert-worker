function bG(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(n,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function r(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=r(i);fetch(i.href,o)}})();function ZT(e,t){const r=Object.create(null),n=e.split(",");for(let i=0;i<n.length;i++)r[n[i]]=!0;return t?i=>!!r[i.toLowerCase()]:i=>!!r[i]}const wG="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",SG=ZT(wG);function pD(e){return!!e||e===""}function Nl(e){if($t(e)){const t={};for(let r=0;r<e.length;r++){const n=e[r],i=mr(n)?PG(n):Nl(n);if(i)for(const o in i)t[o]=i[o]}return t}else{if(mr(e))return e;if(er(e))return e}}const TG=/;(?![^(]*\))/g,kG=/:(.+)/;function PG(e){const t={};return e.split(TG).forEach(r=>{if(r){const n=r.split(kG);n.length>1&&(t[n[0].trim()]=n[1].trim())}}),t}function xr(e){let t="";if(mr(e))t=e;else if($t(e))for(let r=0;r<e.length;r++){const n=xr(e[r]);n&&(t+=n+" ")}else if(er(e))for(const r in e)e[r]&&(t+=r+" ");return t.trim()}function EG(e,t){if(e.length!==t.length)return!1;let r=!0;for(let n=0;r&&n<e.length;n++)r=Yl(e[n],t[n]);return r}function Yl(e,t){if(e===t)return!0;let r=BC(e),n=BC(t);if(r||n)return r&&n?e.getTime()===t.getTime():!1;if(r=Nd(e),n=Nd(t),r||n)return e===t;if(r=$t(e),n=$t(t),r||n)return r&&n?EG(e,t):!1;if(r=er(e),n=er(t),r||n){if(!r||!n)return!1;const i=Object.keys(e).length,o=Object.keys(t).length;if(i!==o)return!1;for(const a in e){const s=e.hasOwnProperty(a),l=t.hasOwnProperty(a);if(s&&!l||!s&&l||!Yl(e[a],t[a]))return!1}}return String(e)===String(t)}function KT(e,t){return e.findIndex(r=>Yl(r,t))}const A=e=>mr(e)?e:e==null?"":$t(e)||er(e)&&(e.toString===mD||!Gt(e.toString))?JSON.stringify(e,vD,2):String(e),vD=(e,t)=>t&&t.__v_isRef?vD(e,t.value):xc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((r,[n,i])=>(r[`${n} =>`]=i,r),{})}:sf(t)?{[`Set(${t.size})`]:[...t.values()]}:er(t)&&!$t(t)&&!_D(t)?String(t):t,Ie={},Mc=[],Oi=()=>{},CG=()=>!1,AG=/^on[^a-z]/,E1=e=>AG.test(e),JT=e=>e.startsWith("onUpdate:"),on=Object.assign,QT=(e,t)=>{const r=e.indexOf(t);r>-1&&e.splice(r,1)},MG=Object.prototype.hasOwnProperty,ue=(e,t)=>MG.call(e,t),$t=Array.isArray,xc=e=>Cp(e)==="[object Map]",sf=e=>Cp(e)==="[object Set]",BC=e=>Cp(e)==="[object Date]",Gt=e=>typeof e=="function",mr=e=>typeof e=="string",Nd=e=>typeof e=="symbol",er=e=>e!==null&&typeof e=="object",gD=e=>er(e)&&Gt(e.then)&&Gt(e.catch),mD=Object.prototype.toString,Cp=e=>mD.call(e),xG=e=>Cp(e).slice(8,-1),_D=e=>Cp(e)==="[object Object]",ek=e=>mr(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Eg=ZT(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),C1=e=>{const t=Object.create(null);return r=>t[r]||(t[r]=e(r))},LG=/-(\w)/g,Mo=C1(e=>e.replace(LG,(t,r)=>r?r.toUpperCase():"")),IG=/\B([A-Z])/g,lf=C1(e=>e.replace(IG,"-$1").toLowerCase()),A1=C1(e=>e.charAt(0).toUpperCase()+e.slice(1)),fy=C1(e=>e?`on${A1(e)}`:""),Fd=(e,t)=>!Object.is(e,t),Cg=(e,t)=>{for(let r=0;r<e.length;r++)e[r](t)},pm=(e,t,r)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:r})},vm=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let zC;const OG=()=>zC||(zC=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});let po;class yD{constructor(t=!1){this.active=!0,this.effects=[],this.cleanups=[],!t&&po&&(this.parent=po,this.index=(po.scopes||(po.scopes=[])).push(this)-1)}run(t){if(this.active){const r=po;try{return po=this,t()}finally{po=r}}}on(){po=this}off(){po=this.parent}stop(t){if(this.active){let r,n;for(r=0,n=this.effects.length;r<n;r++)this.effects[r].stop();for(r=0,n=this.cleanups.length;r<n;r++)this.cleanups[r]();if(this.scopes)for(r=0,n=this.scopes.length;r<n;r++)this.scopes[r].stop(!0);if(this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.active=!1}}}function bD(e){return new yD(e)}function RG(e,t=po){t&&t.active&&t.effects.push(e)}const rk=e=>{const t=new Set(e);return t.w=0,t.n=0,t},wD=e=>(e.w&Es)>0,SD=e=>(e.n&Es)>0,DG=({deps:e})=>{if(e.length)for(let t=0;t<e.length;t++)e[t].w|=Es},NG=e=>{const{deps:t}=e;if(t.length){let r=0;for(let n=0;n<t.length;n++){const i=t[n];wD(i)&&!SD(i)?i.delete(e):t[r++]=i,i.w&=~Es,i.n&=~Es}t.length=r}},Yw=new WeakMap;let jh=0,Es=1;const qw=30;let Pi;const Fl=Symbol(""),Zw=Symbol("");class nk{constructor(t,r=null,n){this.fn=t,this.scheduler=r,this.active=!0,this.deps=[],this.parent=void 0,RG(this,n)}run(){if(!this.active)return this.fn();let t=Pi,r=ys;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Pi,Pi=this,ys=!0,Es=1<<++jh,jh<=qw?DG(this):VC(this),this.fn()}finally{jh<=qw&&NG(this),Es=1<<--jh,Pi=this.parent,ys=r,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Pi===this?this.deferStop=!0:this.active&&(VC(this),this.onStop&&this.onStop(),this.active=!1)}}function VC(e){const{deps:t}=e;if(t.length){for(let r=0;r<t.length;r++)t[r].delete(e);t.length=0}}let ys=!0;const TD=[];function uf(){TD.push(ys),ys=!1}function cf(){const e=TD.pop();ys=e===void 0?!0:e}function On(e,t,r){if(ys&&Pi){let n=Yw.get(e);n||Yw.set(e,n=new Map);let i=n.get(r);i||n.set(r,i=rk()),kD(i)}}function kD(e,t){let r=!1;jh<=qw?SD(e)||(e.n|=Es,r=!wD(e)):r=!e.has(Pi),r&&(e.add(Pi),Pi.deps.push(e))}function va(e,t,r,n,i,o){const a=Yw.get(e);if(!a)return;let s=[];if(t==="clear")s=[...a.values()];else if(r==="length"&&$t(e))a.forEach((l,u)=>{(u==="length"||u>=n)&&s.push(l)});else switch(r!==void 0&&s.push(a.get(r)),t){case"add":$t(e)?ek(r)&&s.push(a.get("length")):(s.push(a.get(Fl)),xc(e)&&s.push(a.get(Zw)));break;case"delete":$t(e)||(s.push(a.get(Fl)),xc(e)&&s.push(a.get(Zw)));break;case"set":xc(e)&&s.push(a.get(Fl));break}if(s.length===1)s[0]&&Kw(s[0]);else{const l=[];for(const u of s)u&&l.push(...u);Kw(rk(l))}}function Kw(e,t){const r=$t(e)?e:[...e];for(const n of r)n.computed&&UC(n);for(const n of r)n.computed||UC(n)}function UC(e,t){(e!==Pi||e.allowRecurse)&&(e.scheduler?e.scheduler():e.run())}const FG=ZT("__proto__,__v_isRef,__isVue"),PD=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Nd)),$G=ik(),BG=ik(!1,!0),zG=ik(!0),WC=VG();function VG(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...r){const n=he(this);for(let o=0,a=this.length;o<a;o++)On(n,"get",o+"");const i=n[t](...r);return i===-1||i===!1?n[t](...r.map(he)):i}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...r){uf();const n=he(this)[t].apply(this,r);return cf(),n}}),e}function ik(e=!1,t=!1){return function(n,i,o){if(i==="__v_isReactive")return!e;if(i==="__v_isReadonly")return e;if(i==="__v_isShallow")return t;if(i==="__v_raw"&&o===(e?t?nj:xD:t?MD:AD).get(n))return n;const a=$t(n);if(!e&&a&&ue(WC,i))return Reflect.get(WC,i,o);const s=Reflect.get(n,i,o);return(Nd(i)?PD.has(i):FG(i))||(e||On(n,"get",i),t)?s:He(s)?a&&ek(i)?s:s.value:er(s)?e?LD(s):ff(s):s}}const UG=ED(),WG=ED(!0);function ED(e=!1){return function(r,n,i,o){let a=r[n];if($d(a)&&He(a)&&!He(i))return!1;if(!e&&!$d(i)&&(Jw(i)||(i=he(i),a=he(a)),!$t(r)&&He(a)&&!He(i)))return a.value=i,!0;const s=$t(r)&&ek(n)?Number(n)<r.length:ue(r,n),l=Reflect.set(r,n,i,o);return r===he(o)&&(s?Fd(i,a)&&va(r,"set",n,i):va(r,"add",n,i)),l}}function GG(e,t){const r=ue(e,t);e[t];const n=Reflect.deleteProperty(e,t);return n&&r&&va(e,"delete",t,void 0),n}function jG(e,t){const r=Reflect.has(e,t);return(!Nd(t)||!PD.has(t))&&On(e,"has",t),r}function HG(e){return On(e,"iterate",$t(e)?"length":Fl),Reflect.ownKeys(e)}const CD={get:$G,set:UG,deleteProperty:GG,has:jG,ownKeys:HG},XG={get:zG,set(e,t){return!0},deleteProperty(e,t){return!0}},YG=on({},CD,{get:BG,set:WG}),ok=e=>e,M1=e=>Reflect.getPrototypeOf(e);function g0(e,t,r=!1,n=!1){e=e.__v_raw;const i=he(e),o=he(t);r||(t!==o&&On(i,"get",t),On(i,"get",o));const{has:a}=M1(i),s=n?ok:r?lk:Bd;if(a.call(i,t))return s(e.get(t));if(a.call(i,o))return s(e.get(o));e!==i&&e.get(t)}function m0(e,t=!1){const r=this.__v_raw,n=he(r),i=he(e);return t||(e!==i&&On(n,"has",e),On(n,"has",i)),e===i?r.has(e):r.has(e)||r.has(i)}function _0(e,t=!1){return e=e.__v_raw,!t&&On(he(e),"iterate",Fl),Reflect.get(e,"size",e)}function GC(e){e=he(e);const t=he(this);return M1(t).has.call(t,e)||(t.add(e),va(t,"add",e,e)),this}function jC(e,t){t=he(t);const r=he(this),{has:n,get:i}=M1(r);let o=n.call(r,e);o||(e=he(e),o=n.call(r,e));const a=i.call(r,e);return r.set(e,t),o?Fd(t,a)&&va(r,"set",e,t):va(r,"add",e,t),this}function HC(e){const t=he(this),{has:r,get:n}=M1(t);let i=r.call(t,e);i||(e=he(e),i=r.call(t,e)),n&&n.call(t,e);const o=t.delete(e);return i&&va(t,"delete",e,void 0),o}function XC(){const e=he(this),t=e.size!==0,r=e.clear();return t&&va(e,"clear",void 0,void 0),r}function y0(e,t){return function(n,i){const o=this,a=o.__v_raw,s=he(a),l=t?ok:e?lk:Bd;return!e&&On(s,"iterate",Fl),a.forEach((u,c)=>n.call(i,l(u),l(c),o))}}function b0(e,t,r){return function(...n){const i=this.__v_raw,o=he(i),a=xc(o),s=e==="entries"||e===Symbol.iterator&&a,l=e==="keys"&&a,u=i[e](...n),c=r?ok:t?lk:Bd;return!t&&On(o,"iterate",l?Zw:Fl),{next(){const{value:f,done:h}=u.next();return h?{value:f,done:h}:{value:s?[c(f[0]),c(f[1])]:c(f),done:h}},[Symbol.iterator](){return this}}}}function Ra(e){return function(...t){return e==="delete"?!1:this}}function qG(){const e={get(o){return g0(this,o)},get size(){return _0(this)},has:m0,add:GC,set:jC,delete:HC,clear:XC,forEach:y0(!1,!1)},t={get(o){return g0(this,o,!1,!0)},get size(){return _0(this)},has:m0,add:GC,set:jC,delete:HC,clear:XC,forEach:y0(!1,!0)},r={get(o){return g0(this,o,!0)},get size(){return _0(this,!0)},has(o){return m0.call(this,o,!0)},add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear"),forEach:y0(!0,!1)},n={get(o){return g0(this,o,!0,!0)},get size(){return _0(this,!0)},has(o){return m0.call(this,o,!0)},add:Ra("add"),set:Ra("set"),delete:Ra("delete"),clear:Ra("clear"),forEach:y0(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(o=>{e[o]=b0(o,!1,!1),r[o]=b0(o,!0,!1),t[o]=b0(o,!1,!0),n[o]=b0(o,!0,!0)}),[e,r,t,n]}const[ZG,KG,JG,QG]=qG();function ak(e,t){const r=t?e?QG:JG:e?KG:ZG;return(n,i,o)=>i==="__v_isReactive"?!e:i==="__v_isReadonly"?e:i==="__v_raw"?n:Reflect.get(ue(r,i)&&i in n?r:n,i,o)}const tj={get:ak(!1,!1)},ej={get:ak(!1,!0)},rj={get:ak(!0,!1)},AD=new WeakMap,MD=new WeakMap,xD=new WeakMap,nj=new WeakMap;function ij(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function oj(e){return e.__v_skip||!Object.isExtensible(e)?0:ij(xG(e))}function ff(e){return $d(e)?e:sk(e,!1,CD,tj,AD)}function aj(e){return sk(e,!1,YG,ej,MD)}function LD(e){return sk(e,!0,XG,rj,xD)}function sk(e,t,r,n,i){if(!er(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=i.get(e);if(o)return o;const a=oj(e);if(a===0)return e;const s=new Proxy(e,a===2?n:r);return i.set(e,s),s}function fa(e){return $d(e)?fa(e.__v_raw):!!(e&&e.__v_isReactive)}function $d(e){return!!(e&&e.__v_isReadonly)}function Jw(e){return!!(e&&e.__v_isShallow)}function ID(e){return fa(e)||$d(e)}function he(e){const t=e&&e.__v_raw;return t?he(t):e}function Ti(e){return pm(e,"__v_skip",!0),e}const Bd=e=>er(e)?ff(e):e,lk=e=>er(e)?LD(e):e;function OD(e){ys&&Pi&&(e=he(e),kD(e.dep||(e.dep=rk())))}function RD(e,t){e=he(e),e.dep&&Kw(e.dep)}function He(e){return!!(e&&e.__v_isRef===!0)}function x1(e){return DD(e,!1)}function Ag(e){return DD(e,!0)}function DD(e,t){return He(e)?e:new sj(e,t)}class sj{constructor(t,r){this.__v_isShallow=r,this.dep=void 0,this.__v_isRef=!0,this._rawValue=r?t:he(t),this._value=r?t:Bd(t)}get value(){return OD(this),this._value}set value(t){t=this.__v_isShallow?t:he(t),Fd(t,this._rawValue)&&(this._rawValue=t,this._value=this.__v_isShallow?t:Bd(t),RD(this))}}function Pr(e){return He(e)?e.value:e}const lj={get:(e,t,r)=>Pr(Reflect.get(e,t,r)),set:(e,t,r,n)=>{const i=e[t];return He(i)&&!He(r)?(i.value=r,!0):Reflect.set(e,t,r,n)}};function ND(e){return fa(e)?e:new Proxy(e,lj)}function Qw(e){const t=$t(e)?new Array(e.length):{};for(const r in e)t[r]=Mg(e,r);return t}class uj{constructor(t,r,n){this._object=t,this._key=r,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}}function Mg(e,t,r){const n=e[t];return He(n)?n:new uj(e,t,r)}class cj{constructor(t,r,n,i){this._setter=r,this.dep=void 0,this.__v_isRef=!0,this._dirty=!0,this.effect=new nk(t,()=>{this._dirty||(this._dirty=!0,RD(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!i,this.__v_isReadonly=n}get value(){const t=he(this);return OD(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}function fj(e,t,r=!1){let n,i;const o=Gt(e);return o?(n=e,i=Oi):(n=e.get,i=e.set),new cj(n,i,o||!i,r)}function bs(e,t,r,n){let i;try{i=n?e(...n):e()}catch(o){L1(o,t,r)}return i}function Ri(e,t,r,n){if(Gt(e)){const o=bs(e,t,r,n);return o&&gD(o)&&o.catch(a=>{L1(a,t,r)}),o}const i=[];for(let o=0;o<e.length;o++)i.push(Ri(e[o],t,r,n));return i}function L1(e,t,r,n=!0){const i=t?t.vnode:null;if(t){let o=t.parent;const a=t.proxy,s=r;for(;o;){const u=o.ec;if(u){for(let c=0;c<u.length;c++)if(u[c](e,a,s)===!1)return}o=o.parent}const l=t.appContext.config.errorHandler;if(l){bs(l,null,10,[e,a,s]);return}}hj(e,r,i,n)}function hj(e,t,r,n=!0){console.error(e)}let gm=!1,tS=!1;const An=[];let oa=0;const sd=[];let Hh=null,cc=0;const ld=[];let as=null,fc=0;const FD=Promise.resolve();let uk=null,eS=null;function zd(e){const t=uk||FD;return e?t.then(this?e.bind(this):e):t}function dj(e){let t=oa+1,r=An.length;for(;t<r;){const n=t+r>>>1;Vd(An[n])<e?t=n+1:r=n}return t}function $D(e){(!An.length||!An.includes(e,gm&&e.allowRecurse?oa+1:oa))&&e!==eS&&(e.id==null?An.push(e):An.splice(dj(e.id),0,e),BD())}function BD(){!gm&&!tS&&(tS=!0,uk=FD.then(UD))}function pj(e){const t=An.indexOf(e);t>oa&&An.splice(t,1)}function zD(e,t,r,n){$t(e)?r.push(...e):(!t||!t.includes(e,e.allowRecurse?n+1:n))&&r.push(e),BD()}function vj(e){zD(e,Hh,sd,cc)}function gj(e){zD(e,as,ld,fc)}function I1(e,t=null){if(sd.length){for(eS=t,Hh=[...new Set(sd)],sd.length=0,cc=0;cc<Hh.length;cc++)Hh[cc]();Hh=null,cc=0,eS=null,I1(e,t)}}function VD(e){if(I1(),ld.length){const t=[...new Set(ld)];if(ld.length=0,as){as.push(...t);return}for(as=t,as.sort((r,n)=>Vd(r)-Vd(n)),fc=0;fc<as.length;fc++)as[fc]();as=null,fc=0}}const Vd=e=>e.id==null?1/0:e.id;function UD(e){tS=!1,gm=!0,I1(e),An.sort((r,n)=>Vd(r)-Vd(n));const t=Oi;try{for(oa=0;oa<An.length;oa++){const r=An[oa];r&&r.active!==!1&&bs(r,null,14)}}finally{oa=0,An.length=0,VD(),gm=!1,uk=null,(An.length||sd.length||ld.length)&&UD(e)}}function mj(e,t,...r){if(e.isUnmounted)return;const n=e.vnode.props||Ie;let i=r;const o=t.startsWith("update:"),a=o&&t.slice(7);if(a&&a in n){const c=`${a==="modelValue"?"model":a}Modifiers`,{number:f,trim:h}=n[c]||Ie;h&&(i=r.map(d=>d.trim())),f&&(i=r.map(vm))}let s,l=n[s=fy(t)]||n[s=fy(Mo(t))];!l&&o&&(l=n[s=fy(lf(t))]),l&&Ri(l,e,6,i);const u=n[s+"Once"];if(u){if(!e.emitted)e.emitted={};else if(e.emitted[s])return;e.emitted[s]=!0,Ri(u,e,6,i)}}function WD(e,t,r=!1){const n=t.emitsCache,i=n.get(e);if(i!==void 0)return i;const o=e.emits;let a={},s=!1;if(!Gt(e)){const l=u=>{const c=WD(u,t,!0);c&&(s=!0,on(a,c))};!r&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!s?(n.set(e,null),null):($t(o)?o.forEach(l=>a[l]=null):on(a,o),n.set(e,a),a)}function O1(e,t){return!e||!E1(t)?!1:(t=t.slice(2).replace(/Once$/,""),ue(e,t[0].toLowerCase()+t.slice(1))||ue(e,lf(t))||ue(e,t))}let Gr=null,R1=null;function mm(e){const t=Gr;return Gr=e,R1=e&&e.type.__scopeId||null,t}function Xe(e){R1=e}function Ye(){R1=null}function we(e,t=Gr,r){if(!t||e._n)return e;const n=(...i)=>{n._d&&iA(-1);const o=mm(t),a=e(...i);return mm(o),n._d&&iA(1),a};return n._n=!0,n._c=!0,n._d=!0,n}function hy(e){const{type:t,vnode:r,proxy:n,withProxy:i,props:o,propsOptions:[a],slots:s,attrs:l,emit:u,render:c,renderCache:f,data:h,setupState:d,ctx:p,inheritAttrs:v}=e;let m,g;const _=mm(e);try{if(r.shapeFlag&4){const w=i||n;m=_o(c.call(w,w,f,o,d,h,p)),g=l}else{const w=t;m=_o(w.length>1?w(o,{attrs:l,slots:s,emit:u}):w(o,null)),g=t.props?l:_j(l)}}catch(w){cd.length=0,L1(w,e,1),m=Et(Cs)}let b=m;if(g&&v!==!1){const w=Object.keys(g),{shapeFlag:T}=b;w.length&&T&7&&(a&&w.some(JT)&&(g=yj(g,a)),b=Wc(b,g))}return r.dirs&&(b=Wc(b),b.dirs=b.dirs?b.dirs.concat(r.dirs):r.dirs),r.transition&&(b.transition=r.transition),m=b,mm(_),m}const _j=e=>{let t;for(const r in e)(r==="class"||r==="style"||E1(r))&&((t||(t={}))[r]=e[r]);return t},yj=(e,t)=>{const r={};for(const n in e)(!JT(n)||!(n.slice(9)in t))&&(r[n]=e[n]);return r};function bj(e,t,r){const{props:n,children:i,component:o}=e,{props:a,children:s,patchFlag:l}=t,u=o.emitsOptions;if(t.dirs||t.transition)return!0;if(r&&l>=0){if(l&1024)return!0;if(l&16)return n?YC(n,a,u):!!a;if(l&8){const c=t.dynamicProps;for(let f=0;f<c.length;f++){const h=c[f];if(a[h]!==n[h]&&!O1(u,h))return!0}}}else return(i||s)&&(!s||!s.$stable)?!0:n===a?!1:n?a?YC(n,a,u):!0:!!a;return!1}function YC(e,t,r){const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!0;for(let i=0;i<n.length;i++){const o=n[i];if(t[o]!==e[o]&&!O1(r,o))return!0}return!1}function wj({vnode:e,parent:t},r){for(;t&&t.subTree===e;)(e=t.vnode).el=r,t=t.parent}const Sj=e=>e.__isSuspense;function Tj(e,t){t&&t.pendingBranch?$t(e)?t.effects.push(...e):t.effects.push(e):gj(e)}function xg(e,t){if(gr){let r=gr.provides;const n=gr.parent&&gr.parent.provides;n===r&&(r=gr.provides=Object.create(n)),r[e]=t}}function xn(e,t,r=!1){const n=gr||Gr;if(n){const i=n.parent==null?n.vnode.appContext&&n.vnode.appContext.provides:n.parent.provides;if(i&&e in i)return i[e];if(arguments.length>1)return r&&Gt(t)?t.call(n.proxy):t}}function qC(e,t){return ck(e,null,t)}const ZC={};function So(e,t,r){return ck(e,t,r)}function ck(e,t,{immediate:r,deep:n,flush:i,onTrack:o,onTrigger:a}=Ie){const s=gr;let l,u=!1,c=!1;if(He(e)?(l=()=>e.value,u=Jw(e)):fa(e)?(l=()=>e,n=!0):$t(e)?(c=!0,u=e.some(g=>fa(g)||Jw(g)),l=()=>e.map(g=>{if(He(g))return g.value;if(fa(g))return Ml(g);if(Gt(g))return bs(g,s,2)})):Gt(e)?t?l=()=>bs(e,s,2):l=()=>{if(!(s&&s.isUnmounted))return f&&f(),Ri(e,s,3,[h])}:l=Oi,t&&n){const g=l;l=()=>Ml(g())}let f,h=g=>{f=m.onStop=()=>{bs(g,s,4)}};if(Wd)return h=Oi,t?r&&Ri(t,s,3,[l(),c?[]:void 0,h]):l(),Oi;let d=c?[]:ZC;const p=()=>{if(!!m.active)if(t){const g=m.run();(n||u||(c?g.some((_,b)=>Fd(_,d[b])):Fd(g,d)))&&(f&&f(),Ri(t,s,3,[g,d===ZC?void 0:d,h]),d=g)}else m.run()};p.allowRecurse=!!t;let v;i==="sync"?v=p:i==="post"?v=()=>hn(p,s&&s.suspense):v=()=>vj(p);const m=new nk(l,v);return t?r?p():d=m.run():i==="post"?hn(m.run.bind(m),s&&s.suspense):m.run(),()=>{m.stop(),s&&s.scope&&QT(s.scope.effects,m)}}function kj(e,t,r){const n=this.proxy,i=mr(e)?e.includes(".")?GD(n,e):()=>n[e]:e.bind(n,n);let o;Gt(t)?o=t:(o=t.handler,r=t);const a=gr;Gc(this);const s=ck(i,o.bind(n),r);return a?Gc(a):$l(),s}function GD(e,t){const r=t.split(".");return()=>{let n=e;for(let i=0;i<r.length&&n;i++)n=n[r[i]];return n}}function Ml(e,t){if(!er(e)||e.__v_skip||(t=t||new Set,t.has(e)))return e;if(t.add(e),He(e))Ml(e.value,t);else if($t(e))for(let r=0;r<e.length;r++)Ml(e[r],t);else if(sf(e)||xc(e))e.forEach(r=>{Ml(r,t)});else if(_D(e))for(const r in e)Ml(e[r],t);return e}function fk(e){return Gt(e)?{setup:e,name:e.name}:e}const ud=e=>!!e.type.__asyncLoader,jD=e=>e.type.__isKeepAlive;function Pj(e,t){HD(e,"a",t)}function Ej(e,t){HD(e,"da",t)}function HD(e,t,r=gr){const n=e.__wdc||(e.__wdc=()=>{let i=r;for(;i;){if(i.isDeactivated)return;i=i.parent}return e()});if(D1(t,n,r),r){let i=r.parent;for(;i&&i.parent;)jD(i.parent.vnode)&&Cj(n,t,r,i),i=i.parent}}function Cj(e,t,r,n){const i=D1(t,e,n,!0);N1(()=>{QT(n[t],i)},r)}function D1(e,t,r=gr,n=!1){if(r){const i=r[e]||(r[e]=[]),o=t.__weh||(t.__weh=(...a)=>{if(r.isUnmounted)return;uf(),Gc(r);const s=Ri(t,r,e,a);return $l(),cf(),s});return n?i.unshift(o):i.push(o),o}}const Pa=e=>(t,r=gr)=>(!Wd||e==="sp")&&D1(e,t,r),Aj=Pa("bm"),XD=Pa("m"),Mj=Pa("bu"),xj=Pa("u"),Lj=Pa("bum"),N1=Pa("um"),Ij=Pa("sp"),Oj=Pa("rtg"),Rj=Pa("rtc");function Dj(e,t=gr){D1("ec",e,t)}function ht(e,t){const r=Gr;if(r===null)return e;const n=B1(r)||r.proxy,i=e.dirs||(e.dirs=[]);for(let o=0;o<t.length;o++){let[a,s,l,u=Ie]=t[o];Gt(a)&&(a={mounted:a,updated:a}),a.deep&&Ml(s),i.push({dir:a,instance:n,value:s,oldValue:void 0,arg:l,modifiers:u})}return e}function js(e,t,r,n){const i=e.dirs,o=t&&t.dirs;for(let a=0;a<i.length;a++){const s=i[a];o&&(s.oldValue=o[a].value);let l=s.dir[n];l&&(uf(),Ri(l,r,8,[e.el,s,e,t]),cf())}}const YD="components";function Qt(e,t){return Fj(YD,e,!0,t)||e}const Nj=Symbol();function Fj(e,t,r=!0,n=!1){const i=Gr||gr;if(i){const o=i.type;if(e===YD){const s=dH(o,!1);if(s&&(s===t||s===Mo(t)||s===A1(Mo(t))))return o}const a=KC(i[e]||o[e],t)||KC(i.appContext[e],t);return!a&&n?o:a}}function KC(e,t){return e&&(e[t]||e[Mo(t)]||e[A1(Mo(t))])}function Ct(e,t,r,n){let i;const o=r&&r[n];if($t(e)||mr(e)){i=new Array(e.length);for(let a=0,s=e.length;a<s;a++)i[a]=t(e[a],a,void 0,o&&o[a])}else if(typeof e=="number"){i=new Array(e);for(let a=0;a<e;a++)i[a]=t(a+1,a,void 0,o&&o[a])}else if(er(e))if(e[Symbol.iterator])i=Array.from(e,(a,s)=>t(a,s,void 0,o&&o[s]));else{const a=Object.keys(e);i=new Array(a.length);for(let s=0,l=a.length;s<l;s++){const u=a[s];i[s]=t(e[u],u,s,o&&o[s])}}else i=[];return r&&(r[n]=i),i}function $j(e,t,r={},n,i){if(Gr.isCE||Gr.parent&&ud(Gr.parent)&&Gr.parent.isCE)return Et("slot",t==="default"?null:{name:t},n&&n());let o=e[t];o&&o._c&&(o._d=!1),I();const a=o&&qD(o(r)),s=xo(j,{key:r.key||`_${t}`},a||(n?n():[]),a&&e._===1?64:-2);return!i&&s.scopeId&&(s.slotScopeIds=[s.scopeId+"-s"]),o&&o._c&&(o._d=!0),s}function qD(e){return e.some(t=>bm(t)?!(t.type===Cs||t.type===j&&!qD(t.children)):!0)?e:null}const rS=e=>e?s7(e)?B1(e)||e.proxy:rS(e.parent):null,_m=on(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>rS(e.parent),$root:e=>rS(e.root),$emit:e=>e.emit,$options:e=>KD(e),$forceUpdate:e=>e.f||(e.f=()=>$D(e.update)),$nextTick:e=>e.n||(e.n=zd.bind(e.proxy)),$watch:e=>kj.bind(e)}),Bj={get({_:e},t){const{ctx:r,setupState:n,data:i,props:o,accessCache:a,type:s,appContext:l}=e;let u;if(t[0]!=="$"){const d=a[t];if(d!==void 0)switch(d){case 1:return n[t];case 2:return i[t];case 4:return r[t];case 3:return o[t]}else{if(n!==Ie&&ue(n,t))return a[t]=1,n[t];if(i!==Ie&&ue(i,t))return a[t]=2,i[t];if((u=e.propsOptions[0])&&ue(u,t))return a[t]=3,o[t];if(r!==Ie&&ue(r,t))return a[t]=4,r[t];nS&&(a[t]=0)}}const c=_m[t];let f,h;if(c)return t==="$attrs"&&On(e,"get",t),c(e);if((f=s.__cssModules)&&(f=f[t]))return f;if(r!==Ie&&ue(r,t))return a[t]=4,r[t];if(h=l.config.globalProperties,ue(h,t))return h[t]},set({_:e},t,r){const{data:n,setupState:i,ctx:o}=e;return i!==Ie&&ue(i,t)?(i[t]=r,!0):n!==Ie&&ue(n,t)?(n[t]=r,!0):ue(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=r,!0)},has({_:{data:e,setupState:t,accessCache:r,ctx:n,appContext:i,propsOptions:o}},a){let s;return!!r[a]||e!==Ie&&ue(e,a)||t!==Ie&&ue(t,a)||(s=o[0])&&ue(s,a)||ue(n,a)||ue(_m,a)||ue(i.config.globalProperties,a)},defineProperty(e,t,r){return r.get!=null?e._.accessCache[t]=0:ue(r,"value")&&this.set(e,t,r.value,null),Reflect.defineProperty(e,t,r)}};let nS=!0;function zj(e){const t=KD(e),r=e.proxy,n=e.ctx;nS=!1,t.beforeCreate&&JC(t.beforeCreate,e,"bc");const{data:i,computed:o,methods:a,watch:s,provide:l,inject:u,created:c,beforeMount:f,mounted:h,beforeUpdate:d,updated:p,activated:v,deactivated:m,beforeDestroy:g,beforeUnmount:_,destroyed:b,unmounted:w,render:T,renderTracked:S,renderTriggered:k,errorCaptured:C,serverPrefetch:E,expose:M,inheritAttrs:x,components:D,directives:B,filters:V}=t;if(u&&Vj(u,n,null,e.appContext.config.unwrapInjectedRef),a)for(const Z in a){const q=a[Z];Gt(q)&&(n[Z]=q.bind(r))}if(i){const Z=i.call(r,r);er(Z)&&(e.data=ff(Z))}if(nS=!0,o)for(const Z in o){const q=o[Z],et=Gt(q)?q.bind(r,r):Gt(q.get)?q.get.bind(r,r):Oi,At=!Gt(q)&&Gt(q.set)?q.set.bind(r):Oi,Dt=Ze({get:et,set:At});Object.defineProperty(n,Z,{enumerable:!0,configurable:!0,get:()=>Dt.value,set:Tt=>Dt.value=Tt})}if(s)for(const Z in s)ZD(s[Z],n,r,Z);if(l){const Z=Gt(l)?l.call(r):l;Reflect.ownKeys(Z).forEach(q=>{xg(q,Z[q])})}c&&JC(c,e,"c");function G(Z,q){$t(q)?q.forEach(et=>Z(et.bind(r))):q&&Z(q.bind(r))}if(G(Aj,f),G(XD,h),G(Mj,d),G(xj,p),G(Pj,v),G(Ej,m),G(Dj,C),G(Rj,S),G(Oj,k),G(Lj,_),G(N1,w),G(Ij,E),$t(M))if(M.length){const Z=e.exposed||(e.exposed={});M.forEach(q=>{Object.defineProperty(Z,q,{get:()=>r[q],set:et=>r[q]=et})})}else e.exposed||(e.exposed={});T&&e.render===Oi&&(e.render=T),x!=null&&(e.inheritAttrs=x),D&&(e.components=D),B&&(e.directives=B)}function Vj(e,t,r=Oi,n=!1){$t(e)&&(e=iS(e));for(const i in e){const o=e[i];let a;er(o)?"default"in o?a=xn(o.from||i,o.default,!0):a=xn(o.from||i):a=xn(o),He(a)&&n?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>a.value,set:s=>a.value=s}):t[i]=a}}function JC(e,t,r){Ri($t(e)?e.map(n=>n.bind(t.proxy)):e.bind(t.proxy),t,r)}function ZD(e,t,r,n){const i=n.includes(".")?GD(r,n):()=>r[n];if(mr(e)){const o=t[e];Gt(o)&&So(i,o)}else if(Gt(e))So(i,e.bind(r));else if(er(e))if($t(e))e.forEach(o=>ZD(o,t,r,n));else{const o=Gt(e.handler)?e.handler.bind(r):t[e.handler];Gt(o)&&So(i,o,e)}}function KD(e){const t=e.type,{mixins:r,extends:n}=t,{mixins:i,optionsCache:o,config:{optionMergeStrategies:a}}=e.appContext,s=o.get(t);let l;return s?l=s:!i.length&&!r&&!n?l=t:(l={},i.length&&i.forEach(u=>ym(l,u,a,!0)),ym(l,t,a)),o.set(t,l),l}function ym(e,t,r,n=!1){const{mixins:i,extends:o}=t;o&&ym(e,o,r,!0),i&&i.forEach(a=>ym(e,a,r,!0));for(const a in t)if(!(n&&a==="expose")){const s=Uj[a]||r&&r[a];e[a]=s?s(e[a],t[a]):t[a]}return e}const Uj={data:QC,props:wl,emits:wl,methods:wl,computed:wl,beforeCreate:Jr,created:Jr,beforeMount:Jr,mounted:Jr,beforeUpdate:Jr,updated:Jr,beforeDestroy:Jr,beforeUnmount:Jr,destroyed:Jr,unmounted:Jr,activated:Jr,deactivated:Jr,errorCaptured:Jr,serverPrefetch:Jr,components:wl,directives:wl,watch:Gj,provide:QC,inject:Wj};function QC(e,t){return t?e?function(){return on(Gt(e)?e.call(this,this):e,Gt(t)?t.call(this,this):t)}:t:e}function Wj(e,t){return wl(iS(e),iS(t))}function iS(e){if($t(e)){const t={};for(let r=0;r<e.length;r++)t[e[r]]=e[r];return t}return e}function Jr(e,t){return e?[...new Set([].concat(e,t))]:t}function wl(e,t){return e?on(on(Object.create(null),e),t):t}function Gj(e,t){if(!e)return t;if(!t)return e;const r=on(Object.create(null),e);for(const n in t)r[n]=Jr(e[n],t[n]);return r}function jj(e,t,r,n=!1){const i={},o={};pm(o,F1,1),e.propsDefaults=Object.create(null),JD(e,t,i,o);for(const a in e.propsOptions[0])a in i||(i[a]=void 0);r?e.props=n?i:aj(i):e.type.props?e.props=i:e.props=o,e.attrs=o}function Hj(e,t,r,n){const{props:i,attrs:o,vnode:{patchFlag:a}}=e,s=he(i),[l]=e.propsOptions;let u=!1;if((n||a>0)&&!(a&16)){if(a&8){const c=e.vnode.dynamicProps;for(let f=0;f<c.length;f++){let h=c[f];if(O1(e.emitsOptions,h))continue;const d=t[h];if(l)if(ue(o,h))d!==o[h]&&(o[h]=d,u=!0);else{const p=Mo(h);i[p]=oS(l,s,p,d,e,!1)}else d!==o[h]&&(o[h]=d,u=!0)}}}else{JD(e,t,i,o)&&(u=!0);let c;for(const f in s)(!t||!ue(t,f)&&((c=lf(f))===f||!ue(t,c)))&&(l?r&&(r[f]!==void 0||r[c]!==void 0)&&(i[f]=oS(l,s,f,void 0,e,!0)):delete i[f]);if(o!==s)for(const f in o)(!t||!ue(t,f)&&!0)&&(delete o[f],u=!0)}u&&va(e,"set","$attrs")}function JD(e,t,r,n){const[i,o]=e.propsOptions;let a=!1,s;if(t)for(let l in t){if(Eg(l))continue;const u=t[l];let c;i&&ue(i,c=Mo(l))?!o||!o.includes(c)?r[c]=u:(s||(s={}))[c]=u:O1(e.emitsOptions,l)||(!(l in n)||u!==n[l])&&(n[l]=u,a=!0)}if(o){const l=he(r),u=s||Ie;for(let c=0;c<o.length;c++){const f=o[c];r[f]=oS(i,l,f,u[f],e,!ue(u,f))}}return a}function oS(e,t,r,n,i,o){const a=e[r];if(a!=null){const s=ue(a,"default");if(s&&n===void 0){const l=a.default;if(a.type!==Function&&Gt(l)){const{propsDefaults:u}=i;r in u?n=u[r]:(Gc(i),n=u[r]=l.call(null,t),$l())}else n=l}a[0]&&(o&&!s?n=!1:a[1]&&(n===""||n===lf(r))&&(n=!0))}return n}function QD(e,t,r=!1){const n=t.propsCache,i=n.get(e);if(i)return i;const o=e.props,a={},s=[];let l=!1;if(!Gt(e)){const c=f=>{l=!0;const[h,d]=QD(f,t,!0);on(a,h),d&&s.push(...d)};!r&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}if(!o&&!l)return n.set(e,Mc),Mc;if($t(o))for(let c=0;c<o.length;c++){const f=Mo(o[c]);tA(f)&&(a[f]=Ie)}else if(o)for(const c in o){const f=Mo(c);if(tA(f)){const h=o[c],d=a[f]=$t(h)||Gt(h)?{type:h}:h;if(d){const p=nA(Boolean,d.type),v=nA(String,d.type);d[0]=p>-1,d[1]=v<0||p<v,(p>-1||ue(d,"default"))&&s.push(f)}}}const u=[a,s];return n.set(e,u),u}function tA(e){return e[0]!=="$"}function eA(e){const t=e&&e.toString().match(/^\s*function (\w+)/);return t?t[1]:e===null?"null":""}function rA(e,t){return eA(e)===eA(t)}function nA(e,t){return $t(t)?t.findIndex(r=>rA(r,e)):Gt(t)&&rA(t,e)?0:-1}const t7=e=>e[0]==="_"||e==="$stable",hk=e=>$t(e)?e.map(_o):[_o(e)],Xj=(e,t,r)=>{if(t._n)return t;const n=we((...i)=>hk(t(...i)),r);return n._c=!1,n},e7=(e,t,r)=>{const n=e._ctx;for(const i in e){if(t7(i))continue;const o=e[i];if(Gt(o))t[i]=Xj(i,o,n);else if(o!=null){const a=hk(o);t[i]=()=>a}}},r7=(e,t)=>{const r=hk(t);e.slots.default=()=>r},Yj=(e,t)=>{if(e.vnode.shapeFlag&32){const r=t._;r?(e.slots=he(t),pm(t,"_",r)):e7(t,e.slots={})}else e.slots={},t&&r7(e,t);pm(e.slots,F1,1)},qj=(e,t,r)=>{const{vnode:n,slots:i}=e;let o=!0,a=Ie;if(n.shapeFlag&32){const s=t._;s?r&&s===1?o=!1:(on(i,t),!r&&s===1&&delete i._):(o=!t.$stable,e7(t,i)),a=t}else t&&(r7(e,t),a={default:1});if(o)for(const s in i)!t7(s)&&!(s in a)&&delete i[s]};function n7(){return{app:null,config:{isNativeTag:CG,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Zj=0;function Kj(e,t){return function(n,i=null){Gt(n)||(n=Object.assign({},n)),i!=null&&!er(i)&&(i=null);const o=n7(),a=new Set;let s=!1;const l=o.app={_uid:Zj++,_component:n,_props:i,_container:null,_context:o,_instance:null,version:vH,get config(){return o.config},set config(u){},use(u,...c){return a.has(u)||(u&&Gt(u.install)?(a.add(u),u.install(l,...c)):Gt(u)&&(a.add(u),u(l,...c))),l},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),l},component(u,c){return c?(o.components[u]=c,l):o.components[u]},directive(u,c){return c?(o.directives[u]=c,l):o.directives[u]},mount(u,c,f){if(!s){const h=Et(n,i);return h.appContext=o,c&&t?t(h,u):e(h,u,f),s=!0,l._container=u,u.__vue_app__=l,B1(h.component)||h.component.proxy}},unmount(){s&&(e(null,l._container),delete l._container.__vue_app__)},provide(u,c){return o.provides[u]=c,l}};return l}}function aS(e,t,r,n,i=!1){if($t(e)){e.forEach((h,d)=>aS(h,t&&($t(t)?t[d]:t),r,n,i));return}if(ud(n)&&!i)return;const o=n.shapeFlag&4?B1(n.component)||n.component.proxy:n.el,a=i?null:o,{i:s,r:l}=e,u=t&&t.r,c=s.refs===Ie?s.refs={}:s.refs,f=s.setupState;if(u!=null&&u!==l&&(mr(u)?(c[u]=null,ue(f,u)&&(f[u]=null)):He(u)&&(u.value=null)),Gt(l))bs(l,s,12,[a,c]);else{const h=mr(l),d=He(l);if(h||d){const p=()=>{if(e.f){const v=h?c[l]:l.value;i?$t(v)&&QT(v,o):$t(v)?v.includes(o)||v.push(o):h?(c[l]=[o],ue(f,l)&&(f[l]=c[l])):(l.value=[o],e.k&&(c[e.k]=l.value))}else h?(c[l]=a,ue(f,l)&&(f[l]=a)):d&&(l.value=a,e.k&&(c[e.k]=a))};a?(p.id=-1,hn(p,r)):p()}}}const hn=Tj;function Jj(e){return Qj(e)}function Qj(e,t){const r=OG();r.__VUE__=!0;const{insert:n,remove:i,patchProp:o,createElement:a,createText:s,createComment:l,setText:u,setElementText:c,parentNode:f,nextSibling:h,setScopeId:d=Oi,cloneNode:p,insertStaticContent:v}=e,m=(z,W,X,J=null,Q=null,ut=null,gt=!1,st=null,ot=!!W.dynamicChildren)=>{if(z===W)return;z&&!Xf(z,W)&&(J=vt(z),kt(z,Q,ut,!0),z=null),W.patchFlag===-2&&(ot=!1,W.dynamicChildren=null);const{type:nt,ref:Nt,shapeFlag:It}=W;switch(nt){case dk:g(z,W,X,J);break;case Cs:_(z,W,X,J);break;case Lg:z==null&&b(W,X,J,gt);break;case j:B(z,W,X,J,Q,ut,gt,st,ot);break;default:It&1?S(z,W,X,J,Q,ut,gt,st,ot):It&6?V(z,W,X,J,Q,ut,gt,st,ot):(It&64||It&128)&&nt.process(z,W,X,J,Q,ut,gt,st,ot,xt)}Nt!=null&&Q&&aS(Nt,z&&z.ref,ut,W||z,!W)},g=(z,W,X,J)=>{if(z==null)n(W.el=s(W.children),X,J);else{const Q=W.el=z.el;W.children!==z.children&&u(Q,W.children)}},_=(z,W,X,J)=>{z==null?n(W.el=l(W.children||""),X,J):W.el=z.el},b=(z,W,X,J)=>{[z.el,z.anchor]=v(z.children,W,X,J,z.el,z.anchor)},w=({el:z,anchor:W},X,J)=>{let Q;for(;z&&z!==W;)Q=h(z),n(z,X,J),z=Q;n(W,X,J)},T=({el:z,anchor:W})=>{let X;for(;z&&z!==W;)X=h(z),i(z),z=X;i(W)},S=(z,W,X,J,Q,ut,gt,st,ot)=>{gt=gt||W.type==="svg",z==null?k(W,X,J,Q,ut,gt,st,ot):M(z,W,Q,ut,gt,st,ot)},k=(z,W,X,J,Q,ut,gt,st)=>{let ot,nt;const{type:Nt,props:It,shapeFlag:Ft,transition:Bt,patchFlag:Jt,dirs:ge}=z;if(z.el&&p!==void 0&&Jt===-1)ot=z.el=p(z.el);else{if(ot=z.el=a(z.type,ut,It&&It.is,It),Ft&8?c(ot,z.children):Ft&16&&E(z.children,ot,null,J,Q,ut&&Nt!=="foreignObject",gt,st),ge&&js(z,null,J,"created"),It){for(const Pe in It)Pe!=="value"&&!Eg(Pe)&&o(ot,Pe,null,It[Pe],ut,z.children,J,Q,K);"value"in It&&o(ot,"value",null,It.value),(nt=It.onVnodeBeforeMount)&&Qi(nt,J,z)}C(ot,z,z.scopeId,gt,J)}ge&&js(z,null,J,"beforeMount");const me=(!Q||Q&&!Q.pendingBranch)&&Bt&&!Bt.persisted;me&&Bt.beforeEnter(ot),n(ot,W,X),((nt=It&&It.onVnodeMounted)||me||ge)&&hn(()=>{nt&&Qi(nt,J,z),me&&Bt.enter(ot),ge&&js(z,null,J,"mounted")},Q)},C=(z,W,X,J,Q)=>{if(X&&d(z,X),J)for(let ut=0;ut<J.length;ut++)d(z,J[ut]);if(Q){let ut=Q.subTree;if(W===ut){const gt=Q.vnode;C(z,gt,gt.scopeId,gt.slotScopeIds,Q.parent)}}},E=(z,W,X,J,Q,ut,gt,st,ot=0)=>{for(let nt=ot;nt<z.length;nt++){const Nt=z[nt]=st?us(z[nt]):_o(z[nt]);m(null,Nt,W,X,J,Q,ut,gt,st)}},M=(z,W,X,J,Q,ut,gt)=>{const st=W.el=z.el;let{patchFlag:ot,dynamicChildren:nt,dirs:Nt}=W;ot|=z.patchFlag&16;const It=z.props||Ie,Ft=W.props||Ie;let Bt;X&&Hs(X,!1),(Bt=Ft.onVnodeBeforeUpdate)&&Qi(Bt,X,W,z),Nt&&js(W,z,X,"beforeUpdate"),X&&Hs(X,!0);const Jt=Q&&W.type!=="foreignObject";if(nt?x(z.dynamicChildren,nt,st,X,J,Jt,ut):gt||et(z,W,st,null,X,J,Jt,ut,!1),ot>0){if(ot&16)D(st,W,It,Ft,X,J,Q);else if(ot&2&&It.class!==Ft.class&&o(st,"class",null,Ft.class,Q),ot&4&&o(st,"style",It.style,Ft.style,Q),ot&8){const ge=W.dynamicProps;for(let me=0;me<ge.length;me++){const Pe=ge[me],Rr=It[Pe],Zi=Ft[Pe];(Zi!==Rr||Pe==="value")&&o(st,Pe,Rr,Zi,Q,z.children,X,J,K)}}ot&1&&z.children!==W.children&&c(st,W.children)}else!gt&&nt==null&&D(st,W,It,Ft,X,J,Q);((Bt=Ft.onVnodeUpdated)||Nt)&&hn(()=>{Bt&&Qi(Bt,X,W,z),Nt&&js(W,z,X,"updated")},J)},x=(z,W,X,J,Q,ut,gt)=>{for(let st=0;st<W.length;st++){const ot=z[st],nt=W[st],Nt=ot.el&&(ot.type===j||!Xf(ot,nt)||ot.shapeFlag&70)?f(ot.el):X;m(ot,nt,Nt,null,J,Q,ut,gt,!0)}},D=(z,W,X,J,Q,ut,gt)=>{if(X!==J){for(const st in J){if(Eg(st))continue;const ot=J[st],nt=X[st];ot!==nt&&st!=="value"&&o(z,st,nt,ot,gt,W.children,Q,ut,K)}if(X!==Ie)for(const st in X)!Eg(st)&&!(st in J)&&o(z,st,X[st],null,gt,W.children,Q,ut,K);"value"in J&&o(z,"value",X.value,J.value)}},B=(z,W,X,J,Q,ut,gt,st,ot)=>{const nt=W.el=z?z.el:s(""),Nt=W.anchor=z?z.anchor:s("");let{patchFlag:It,dynamicChildren:Ft,slotScopeIds:Bt}=W;Bt&&(st=st?st.concat(Bt):Bt),z==null?(n(nt,X,J),n(Nt,X,J),E(W.children,X,Nt,Q,ut,gt,st,ot)):It>0&&It&64&&Ft&&z.dynamicChildren?(x(z.dynamicChildren,Ft,X,Q,ut,gt,st),(W.key!=null||Q&&W===Q.subTree)&&i7(z,W,!0)):et(z,W,X,Nt,Q,ut,gt,st,ot)},V=(z,W,X,J,Q,ut,gt,st,ot)=>{W.slotScopeIds=st,z==null?W.shapeFlag&512?Q.ctx.activate(W,X,J,gt,ot):F(W,X,J,Q,ut,gt,ot):G(z,W,ot)},F=(z,W,X,J,Q,ut,gt)=>{const st=z.component=lH(z,J,Q);if(jD(z)&&(st.ctx.renderer=xt),uH(st),st.asyncDep){if(Q&&Q.registerDep(st,Z),!z.el){const ot=st.subTree=Et(Cs);_(null,ot,W,X)}return}Z(st,z,W,X,Q,ut,gt)},G=(z,W,X)=>{const J=W.component=z.component;if(bj(z,W,X))if(J.asyncDep&&!J.asyncResolved){q(J,W,X);return}else J.next=W,pj(J.update),J.update();else W.el=z.el,J.vnode=W},Z=(z,W,X,J,Q,ut,gt)=>{const st=()=>{if(z.isMounted){let{next:Nt,bu:It,u:Ft,parent:Bt,vnode:Jt}=z,ge=Nt,me;Hs(z,!1),Nt?(Nt.el=Jt.el,q(z,Nt,gt)):Nt=Jt,It&&Cg(It),(me=Nt.props&&Nt.props.onVnodeBeforeUpdate)&&Qi(me,Bt,Nt,Jt),Hs(z,!0);const Pe=hy(z),Rr=z.subTree;z.subTree=Pe,m(Rr,Pe,f(Rr.el),vt(Rr),z,Q,ut),Nt.el=Pe.el,ge===null&&wj(z,Pe.el),Ft&&hn(Ft,Q),(me=Nt.props&&Nt.props.onVnodeUpdated)&&hn(()=>Qi(me,Bt,Nt,Jt),Q)}else{let Nt;const{el:It,props:Ft}=W,{bm:Bt,m:Jt,parent:ge}=z,me=ud(W);if(Hs(z,!1),Bt&&Cg(Bt),!me&&(Nt=Ft&&Ft.onVnodeBeforeMount)&&Qi(Nt,ge,W),Hs(z,!0),It&&ft){const Pe=()=>{z.subTree=hy(z),ft(It,z.subTree,z,Q,null)};me?W.type.__asyncLoader().then(()=>!z.isUnmounted&&Pe()):Pe()}else{const Pe=z.subTree=hy(z);m(null,Pe,X,J,z,Q,ut),W.el=Pe.el}if(Jt&&hn(Jt,Q),!me&&(Nt=Ft&&Ft.onVnodeMounted)){const Pe=W;hn(()=>Qi(Nt,ge,Pe),Q)}(W.shapeFlag&256||ge&&ud(ge.vnode)&&ge.vnode.shapeFlag&256)&&z.a&&hn(z.a,Q),z.isMounted=!0,W=X=J=null}},ot=z.effect=new nk(st,()=>$D(nt),z.scope),nt=z.update=()=>ot.run();nt.id=z.uid,Hs(z,!0),nt()},q=(z,W,X)=>{W.component=z;const J=z.vnode.props;z.vnode=W,z.next=null,Hj(z,W.props,J,X),qj(z,W.children,X),uf(),I1(void 0,z.update),cf()},et=(z,W,X,J,Q,ut,gt,st,ot=!1)=>{const nt=z&&z.children,Nt=z?z.shapeFlag:0,It=W.children,{patchFlag:Ft,shapeFlag:Bt}=W;if(Ft>0){if(Ft&128){Dt(nt,It,X,J,Q,ut,gt,st,ot);return}else if(Ft&256){At(nt,It,X,J,Q,ut,gt,st,ot);return}}Bt&8?(Nt&16&&K(nt,Q,ut),It!==nt&&c(X,It)):Nt&16?Bt&16?Dt(nt,It,X,J,Q,ut,gt,st,ot):K(nt,Q,ut,!0):(Nt&8&&c(X,""),Bt&16&&E(It,X,J,Q,ut,gt,st,ot))},At=(z,W,X,J,Q,ut,gt,st,ot)=>{z=z||Mc,W=W||Mc;const nt=z.length,Nt=W.length,It=Math.min(nt,Nt);let Ft;for(Ft=0;Ft<It;Ft++){const Bt=W[Ft]=ot?us(W[Ft]):_o(W[Ft]);m(z[Ft],Bt,X,null,Q,ut,gt,st,ot)}nt>Nt?K(z,Q,ut,!0,!1,It):E(W,X,J,Q,ut,gt,st,ot,It)},Dt=(z,W,X,J,Q,ut,gt,st,ot)=>{let nt=0;const Nt=W.length;let It=z.length-1,Ft=Nt-1;for(;nt<=It&&nt<=Ft;){const Bt=z[nt],Jt=W[nt]=ot?us(W[nt]):_o(W[nt]);if(Xf(Bt,Jt))m(Bt,Jt,X,null,Q,ut,gt,st,ot);else break;nt++}for(;nt<=It&&nt<=Ft;){const Bt=z[It],Jt=W[Ft]=ot?us(W[Ft]):_o(W[Ft]);if(Xf(Bt,Jt))m(Bt,Jt,X,null,Q,ut,gt,st,ot);else break;It--,Ft--}if(nt>It){if(nt<=Ft){const Bt=Ft+1,Jt=Bt<Nt?W[Bt].el:J;for(;nt<=Ft;)m(null,W[nt]=ot?us(W[nt]):_o(W[nt]),X,Jt,Q,ut,gt,st,ot),nt++}}else if(nt>Ft)for(;nt<=It;)kt(z[nt],Q,ut,!0),nt++;else{const Bt=nt,Jt=nt,ge=new Map;for(nt=Jt;nt<=Ft;nt++){const Zr=W[nt]=ot?us(W[nt]):_o(W[nt]);Zr.key!=null&&ge.set(Zr.key,nt)}let me,Pe=0;const Rr=Ft-Jt+1;let Zi=!1,l0=0;const Us=new Array(Rr);for(nt=0;nt<Rr;nt++)Us[nt]=0;for(nt=Bt;nt<=It;nt++){const Zr=z[nt];if(Pe>=Rr){kt(Zr,Q,ut,!0);continue}let $n;if(Zr.key!=null)$n=ge.get(Zr.key);else for(me=Jt;me<=Ft;me++)if(Us[me-Jt]===0&&Xf(Zr,W[me])){$n=me;break}$n===void 0?kt(Zr,Q,ut,!0):(Us[$n-Jt]=nt+1,$n>=l0?l0=$n:Zi=!0,m(Zr,W[$n],X,null,Q,ut,gt,st,ot),Pe++)}const u0=Zi?tH(Us):Mc;for(me=u0.length-1,nt=Rr-1;nt>=0;nt--){const Zr=Jt+nt,$n=W[Zr],Ws=Zr+1<Nt?W[Zr+1].el:J;Us[nt]===0?m(null,$n,X,Ws,Q,ut,gt,st,ot):Zi&&(me<0||nt!==u0[me]?Tt($n,X,Ws,2):me--)}}},Tt=(z,W,X,J,Q=null)=>{const{el:ut,type:gt,transition:st,children:ot,shapeFlag:nt}=z;if(nt&6){Tt(z.component.subTree,W,X,J);return}if(nt&128){z.suspense.move(W,X,J);return}if(nt&64){gt.move(z,W,X,xt);return}if(gt===j){n(ut,W,X);for(let It=0;It<ot.length;It++)Tt(ot[It],W,X,J);n(z.anchor,W,X);return}if(gt===Lg){w(z,W,X);return}if(J!==2&&nt&1&&st)if(J===0)st.beforeEnter(ut),n(ut,W,X),hn(()=>st.enter(ut),Q);else{const{leave:It,delayLeave:Ft,afterLeave:Bt}=st,Jt=()=>n(ut,W,X),ge=()=>{It(ut,()=>{Jt(),Bt&&Bt()})};Ft?Ft(ut,Jt,ge):ge()}else n(ut,W,X)},kt=(z,W,X,J=!1,Q=!1)=>{const{type:ut,props:gt,ref:st,children:ot,dynamicChildren:nt,shapeFlag:Nt,patchFlag:It,dirs:Ft}=z;if(st!=null&&aS(st,null,X,z,!0),Nt&256){W.ctx.deactivate(z);return}const Bt=Nt&1&&Ft,Jt=!ud(z);let ge;if(Jt&&(ge=gt&&gt.onVnodeBeforeUnmount)&&Qi(ge,W,z),Nt&6)it(z.component,X,J);else{if(Nt&128){z.suspense.unmount(X,J);return}Bt&&js(z,null,W,"beforeUnmount"),Nt&64?z.type.remove(z,W,X,Q,xt,J):nt&&(ut!==j||It>0&&It&64)?K(nt,W,X,!1,!0):(ut===j&&It&384||!Q&&Nt&16)&&K(ot,W,X),J&&Xt(z)}(Jt&&(ge=gt&&gt.onVnodeUnmounted)||Bt)&&hn(()=>{ge&&Qi(ge,W,z),Bt&&js(z,null,W,"unmounted")},X)},Xt=z=>{const{type:W,el:X,anchor:J,transition:Q}=z;if(W===j){Y(X,J);return}if(W===Lg){T(z);return}const ut=()=>{i(X),Q&&!Q.persisted&&Q.afterLeave&&Q.afterLeave()};if(z.shapeFlag&1&&Q&&!Q.persisted){const{leave:gt,delayLeave:st}=Q,ot=()=>gt(X,ut);st?st(z.el,ut,ot):ot()}else ut()},Y=(z,W)=>{let X;for(;z!==W;)X=h(z),i(z),z=X;i(W)},it=(z,W,X)=>{const{bum:J,scope:Q,update:ut,subTree:gt,um:st}=z;J&&Cg(J),Q.stop(),ut&&(ut.active=!1,kt(gt,z,W,X)),st&&hn(st,W),hn(()=>{z.isUnmounted=!0},W),W&&W.pendingBranch&&!W.isUnmounted&&z.asyncDep&&!z.asyncResolved&&z.suspenseId===W.pendingId&&(W.deps--,W.deps===0&&W.resolve())},K=(z,W,X,J=!1,Q=!1,ut=0)=>{for(let gt=ut;gt<z.length;gt++)kt(z[gt],W,X,J,Q)},vt=z=>z.shapeFlag&6?vt(z.component.subTree):z.shapeFlag&128?z.suspense.next():h(z.anchor||z.el),Pt=(z,W,X)=>{z==null?W._vnode&&kt(W._vnode,null,null,!0):m(W._vnode||null,z,W,null,null,null,X),VD(),W._vnode=z},xt={p:m,um:kt,m:Tt,r:Xt,mt:F,mc:E,pc:et,pbc:x,n:vt,o:e};let lt,ft;return t&&([lt,ft]=t(xt)),{render:Pt,hydrate:lt,createApp:Kj(Pt,lt)}}function Hs({effect:e,update:t},r){e.allowRecurse=t.allowRecurse=r}function i7(e,t,r=!1){const n=e.children,i=t.children;if($t(n)&&$t(i))for(let o=0;o<n.length;o++){const a=n[o];let s=i[o];s.shapeFlag&1&&!s.dynamicChildren&&((s.patchFlag<=0||s.patchFlag===32)&&(s=i[o]=us(i[o]),s.el=a.el),r||i7(a,s))}}function tH(e){const t=e.slice(),r=[0];let n,i,o,a,s;const l=e.length;for(n=0;n<l;n++){const u=e[n];if(u!==0){if(i=r[r.length-1],e[i]<u){t[n]=i,r.push(n);continue}for(o=0,a=r.length-1;o<a;)s=o+a>>1,e[r[s]]<u?o=s+1:a=s;u<e[r[o]]&&(o>0&&(t[n]=r[o-1]),r[o]=n)}}for(o=r.length,a=r[o-1];o-- >0;)r[o]=a,a=t[a];return r}const eH=e=>e.__isTeleport,j=Symbol(void 0),dk=Symbol(void 0),Cs=Symbol(void 0),Lg=Symbol(void 0),cd=[];let Ci=null;function I(e=!1){cd.push(Ci=e?null:[])}function rH(){cd.pop(),Ci=cd[cd.length-1]||null}let Ud=1;function iA(e){Ud+=e}function o7(e){return e.dynamicChildren=Ud>0?Ci||Mc:null,rH(),Ud>0&&Ci&&Ci.push(e),e}function O(e,t,r,n,i,o){return o7(y(e,t,r,n,i,o,!0))}function xo(e,t,r,n,i){return o7(Et(e,t,r,n,i,!0))}function bm(e){return e?e.__v_isVNode===!0:!1}function Xf(e,t){return e.type===t.type&&e.key===t.key}const F1="__vInternal",a7=({key:e})=>e!=null?e:null,Ig=({ref:e,ref_key:t,ref_for:r})=>e!=null?mr(e)||He(e)||Gt(e)?{i:Gr,r:e,k:t,f:!!r}:e:null;function y(e,t=null,r=null,n=0,i=null,o=e===j?0:1,a=!1,s=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&a7(t),ref:t&&Ig(t),scopeId:R1,slotScopeIds:null,children:r,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:n,dynamicProps:i,dynamicChildren:null,appContext:null};return s?(pk(l,r),o&128&&e.normalize(l)):r&&(l.shapeFlag|=mr(r)?8:16),Ud>0&&!a&&Ci&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Ci.push(l),l}const Et=nH;function nH(e,t=null,r=null,n=0,i=null,o=!1){if((!e||e===Nj)&&(e=Cs),bm(e)){const s=Wc(e,t,!0);return r&&pk(s,r),Ud>0&&!o&&Ci&&(s.shapeFlag&6?Ci[Ci.indexOf(e)]=s:Ci.push(s)),s.patchFlag|=-2,s}if(pH(e)&&(e=e.__vccOpts),t){t=iH(t);let{class:s,style:l}=t;s&&!mr(s)&&(t.class=xr(s)),er(l)&&(ID(l)&&!$t(l)&&(l=on({},l)),t.style=Nl(l))}const a=mr(e)?1:Sj(e)?128:eH(e)?64:er(e)?4:Gt(e)?2:0;return y(e,t,r,n,i,a,o,!0)}function iH(e){return e?ID(e)||F1 in e?on({},e):e:null}function Wc(e,t,r=!1){const{props:n,ref:i,patchFlag:o,children:a}=e,s=t?oH(n||{},t):n;return{__v_isVNode:!0,__v_skip:!0,type:e.type,props:s,key:s&&a7(s),ref:t&&t.ref?r&&i?$t(i)?i.concat(Ig(t)):[i,Ig(t)]:Ig(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==j?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:e.transition,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&Wc(e.ssContent),ssFallback:e.ssFallback&&Wc(e.ssFallback),el:e.el,anchor:e.anchor}}function N(e=" ",t=0){return Et(dk,null,e,t)}function $1(e,t){const r=Et(Lg,null,e);return r.staticCount=t,r}function tt(e="",t=!1){return t?(I(),xo(Cs,null,e)):Et(Cs,null,e)}function _o(e){return e==null||typeof e=="boolean"?Et(Cs):$t(e)?Et(j,null,e.slice()):typeof e=="object"?us(e):Et(dk,null,String(e))}function us(e){return e.el===null||e.memo?e:Wc(e)}function pk(e,t){let r=0;const{shapeFlag:n}=e;if(t==null)t=null;else if($t(t))r=16;else if(typeof t=="object")if(n&65){const i=t.default;i&&(i._c&&(i._d=!1),pk(e,i()),i._c&&(i._d=!0));return}else{r=32;const i=t._;!i&&!(F1 in t)?t._ctx=Gr:i===3&&Gr&&(Gr.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else Gt(t)?(t={default:t,_ctx:Gr},r=32):(t=String(t),n&64?(r=16,t=[N(t)]):r=8);e.children=t,e.shapeFlag|=r}function oH(...e){const t={};for(let r=0;r<e.length;r++){const n=e[r];for(const i in n)if(i==="class")t.class!==n.class&&(t.class=xr([t.class,n.class]));else if(i==="style")t.style=Nl([t.style,n.style]);else if(E1(i)){const o=t[i],a=n[i];a&&o!==a&&!($t(o)&&o.includes(a))&&(t[i]=o?[].concat(o,a):a)}else i!==""&&(t[i]=n[i])}return t}function Qi(e,t,r,n=null){Ri(e,t,7,[r,n])}const aH=n7();let sH=0;function lH(e,t,r){const n=e.type,i=(t?t.appContext:e.appContext)||aH,o={uid:sH++,vnode:e,type:n,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,scope:new yD(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:QD(n,i),emitsOptions:WD(n,i),emit:null,emitted:null,propsDefaults:Ie,inheritAttrs:n.inheritAttrs,ctx:Ie,data:Ie,props:Ie,attrs:Ie,slots:Ie,refs:Ie,setupState:Ie,setupContext:null,suspense:r,suspenseId:r?r.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=mj.bind(null,o),e.ce&&e.ce(o),o}let gr=null;const vk=()=>gr||Gr,Gc=e=>{gr=e,e.scope.on()},$l=()=>{gr&&gr.scope.off(),gr=null};function s7(e){return e.vnode.shapeFlag&4}let Wd=!1;function uH(e,t=!1){Wd=t;const{props:r,children:n}=e.vnode,i=s7(e);jj(e,r,i,t),Yj(e,n);const o=i?cH(e,t):void 0;return Wd=!1,o}function cH(e,t){const r=e.type;e.accessCache=Object.create(null),e.proxy=Ti(new Proxy(e.ctx,Bj));const{setup:n}=r;if(n){const i=e.setupContext=n.length>1?hH(e):null;Gc(e),uf();const o=bs(n,e,0,[e.props,i]);if(cf(),$l(),gD(o)){if(o.then($l,$l),t)return o.then(a=>{oA(e,a,t)}).catch(a=>{L1(a,e,0)});e.asyncDep=o}else oA(e,o,t)}else l7(e,t)}function oA(e,t,r){Gt(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:er(t)&&(e.setupState=ND(t)),l7(e,r)}let aA;function l7(e,t,r){const n=e.type;if(!e.render){if(!t&&aA&&!n.render){const i=n.template;if(i){const{isCustomElement:o,compilerOptions:a}=e.appContext.config,{delimiters:s,compilerOptions:l}=n,u=on(on({isCustomElement:o,delimiters:s},a),l);n.render=aA(i,u)}}e.render=n.render||Oi}Gc(e),uf(),zj(e),cf(),$l()}function fH(e){return new Proxy(e.attrs,{get(t,r){return On(e,"get","$attrs"),t[r]}})}function hH(e){const t=n=>{e.exposed=n||{}};let r;return{get attrs(){return r||(r=fH(e))},slots:e.slots,emit:e.emit,expose:t}}function B1(e){if(e.exposed)return e.exposeProxy||(e.exposeProxy=new Proxy(ND(Ti(e.exposed)),{get(t,r){if(r in t)return t[r];if(r in _m)return _m[r](e)}}))}function dH(e,t=!0){return Gt(e)?e.displayName||e.name:e.name||t&&e.__name}function pH(e){return Gt(e)&&"__vccOpts"in e}const Ze=(e,t)=>fj(e,t,Wd);function gk(e,t,r){const n=arguments.length;return n===2?er(t)&&!$t(t)?bm(t)?Et(e,null,[t]):Et(e,t):Et(e,null,t):(n>3?r=Array.prototype.slice.call(arguments,2):n===3&&bm(r)&&(r=[r]),Et(e,t,r))}const vH="3.2.37",gH="http://www.w3.org/2000/svg",El=typeof document<"u"?document:null,sA=El&&El.createElement("template"),mH={insert:(e,t,r)=>{t.insertBefore(e,r||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,r,n)=>{const i=t?El.createElementNS(gH,e):El.createElement(e,r?{is:r}:void 0);return e==="select"&&n&&n.multiple!=null&&i.setAttribute("multiple",n.multiple),i},createText:e=>El.createTextNode(e),createComment:e=>El.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>El.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},cloneNode(e){const t=e.cloneNode(!0);return"_value"in e&&(t._value=e._value),t},insertStaticContent(e,t,r,n,i,o){const a=r?r.previousSibling:t.lastChild;if(i&&(i===o||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),r),!(i===o||!(i=i.nextSibling)););else{sA.innerHTML=n?`<svg>${e}</svg>`:e;const s=sA.content;if(n){const l=s.firstChild;for(;l.firstChild;)s.appendChild(l.firstChild);s.removeChild(l)}t.insertBefore(s,r)}return[a?a.nextSibling:t.firstChild,r?r.previousSibling:t.lastChild]}};function _H(e,t,r){const n=e._vtc;n&&(t=(t?[t,...n]:[...n]).join(" ")),t==null?e.removeAttribute("class"):r?e.setAttribute("class",t):e.className=t}function yH(e,t,r){const n=e.style,i=mr(r);if(r&&!i){for(const o in r)sS(n,o,r[o]);if(t&&!mr(t))for(const o in t)r[o]==null&&sS(n,o,"")}else{const o=n.display;i?t!==r&&(n.cssText=r):t&&e.removeAttribute("style"),"_vod"in e&&(n.display=o)}}const lA=/\s*!important$/;function sS(e,t,r){if($t(r))r.forEach(n=>sS(e,t,n));else if(r==null&&(r=""),t.startsWith("--"))e.setProperty(t,r);else{const n=bH(e,t);lA.test(r)?e.setProperty(lf(n),r.replace(lA,""),"important"):e[n]=r}}const uA=["Webkit","Moz","ms"],dy={};function bH(e,t){const r=dy[t];if(r)return r;let n=Mo(t);if(n!=="filter"&&n in e)return dy[t]=n;n=A1(n);for(let i=0;i<uA.length;i++){const o=uA[i]+n;if(o in e)return dy[t]=o}return t}const cA="http://www.w3.org/1999/xlink";function wH(e,t,r,n,i){if(n&&t.startsWith("xlink:"))r==null?e.removeAttributeNS(cA,t.slice(6,t.length)):e.setAttributeNS(cA,t,r);else{const o=SG(t);r==null||o&&!pD(r)?e.removeAttribute(t):e.setAttribute(t,o?"":r)}}function SH(e,t,r,n,i,o,a){if(t==="innerHTML"||t==="textContent"){n&&a(n,i,o),e[t]=r==null?"":r;return}if(t==="value"&&e.tagName!=="PROGRESS"&&!e.tagName.includes("-")){e._value=r;const l=r==null?"":r;(e.value!==l||e.tagName==="OPTION")&&(e.value=l),r==null&&e.removeAttribute(t);return}let s=!1;if(r===""||r==null){const l=typeof e[t];l==="boolean"?r=pD(r):r==null&&l==="string"?(r="",s=!0):l==="number"&&(r=0,s=!0)}try{e[t]=r}catch{}s&&e.removeAttribute(t)}const[u7,TH]=(()=>{let e=Date.now,t=!1;if(typeof window<"u"){Date.now()>document.createEvent("Event").timeStamp&&(e=performance.now.bind(performance));const r=navigator.userAgent.match(/firefox\/(\d+)/i);t=!!(r&&Number(r[1])<=53)}return[e,t]})();let lS=0;const kH=Promise.resolve(),PH=()=>{lS=0},EH=()=>lS||(kH.then(PH),lS=u7());function aa(e,t,r,n){e.addEventListener(t,r,n)}function CH(e,t,r,n){e.removeEventListener(t,r,n)}function AH(e,t,r,n,i=null){const o=e._vei||(e._vei={}),a=o[t];if(n&&a)a.value=n;else{const[s,l]=MH(t);if(n){const u=o[t]=xH(n,i);aa(e,s,u,l)}else a&&(CH(e,s,a,l),o[t]=void 0)}}const fA=/(?:Once|Passive|Capture)$/;function MH(e){let t;if(fA.test(e)){t={};let r;for(;r=e.match(fA);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[lf(e.slice(2)),t]}function xH(e,t){const r=n=>{const i=n.timeStamp||u7();(TH||i>=r.attached-1)&&Ri(LH(n,r.value),t,5,[n])};return r.value=e,r.attached=EH(),r}function LH(e,t){if($t(t)){const r=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{r.call(e),e._stopped=!0},t.map(n=>i=>!i._stopped&&n&&n(i))}else return t}const hA=/^on[a-z]/,IH=(e,t,r,n,i=!1,o,a,s,l)=>{t==="class"?_H(e,n,i):t==="style"?yH(e,r,n):E1(t)?JT(t)||AH(e,t,r,n,a):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):OH(e,t,n,i))?SH(e,t,n,o,a,s,l):(t==="true-value"?e._trueValue=n:t==="false-value"&&(e._falseValue=n),wH(e,t,n,i))};function OH(e,t,r,n){return n?!!(t==="innerHTML"||t==="textContent"||t in e&&hA.test(t)&&Gt(r)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA"||hA.test(t)&&mr(r)?!1:t in e}const As=e=>{const t=e.props["onUpdate:modelValue"]||!1;return $t(t)?r=>Cg(t,r):t};function RH(e){e.target.composing=!0}function dA(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ie={created(e,{modifiers:{lazy:t,trim:r,number:n}},i){e._assign=As(i);const o=n||i.props&&i.props.type==="number";aa(e,t?"change":"input",a=>{if(a.target.composing)return;let s=e.value;r&&(s=s.trim()),o&&(s=vm(s)),e._assign(s)}),r&&aa(e,"change",()=>{e.value=e.value.trim()}),t||(aa(e,"compositionstart",RH),aa(e,"compositionend",dA),aa(e,"change",dA))},mounted(e,{value:t}){e.value=t==null?"":t},beforeUpdate(e,{value:t,modifiers:{lazy:r,trim:n,number:i}},o){if(e._assign=As(o),e.composing||document.activeElement===e&&e.type!=="range"&&(r||n&&e.value.trim()===t||(i||e.type==="number")&&vm(e.value)===t))return;const a=t==null?"":t;e.value!==a&&(e.value=a)}},sr={deep:!0,created(e,t,r){e._assign=As(r),aa(e,"change",()=>{const n=e._modelValue,i=jc(e),o=e.checked,a=e._assign;if($t(n)){const s=KT(n,i),l=s!==-1;if(o&&!l)a(n.concat(i));else if(!o&&l){const u=[...n];u.splice(s,1),a(u)}}else if(sf(n)){const s=new Set(n);o?s.add(i):s.delete(i),a(s)}else a(c7(e,o))})},mounted:pA,beforeUpdate(e,t,r){e._assign=As(r),pA(e,t,r)}};function pA(e,{value:t,oldValue:r},n){e._modelValue=t,$t(t)?e.checked=KT(t,n.props.value)>-1:sf(t)?e.checked=t.has(n.props.value):t!==r&&(e.checked=Yl(t,c7(e,!0)))}const fd={created(e,{value:t},r){e.checked=Yl(t,r.props.value),e._assign=As(r),aa(e,"change",()=>{e._assign(jc(e))})},beforeUpdate(e,{value:t,oldValue:r},n){e._assign=As(n),t!==r&&(e.checked=Yl(t,n.props.value))}},ar={deep:!0,created(e,{value:t,modifiers:{number:r}},n){const i=sf(t);aa(e,"change",()=>{const o=Array.prototype.filter.call(e.options,a=>a.selected).map(a=>r?vm(jc(a)):jc(a));e._assign(e.multiple?i?new Set(o):o:o[0])}),e._assign=As(n)},mounted(e,{value:t}){vA(e,t)},beforeUpdate(e,t,r){e._assign=As(r)},updated(e,{value:t}){vA(e,t)}};function vA(e,t){const r=e.multiple;if(!(r&&!$t(t)&&!sf(t))){for(let n=0,i=e.options.length;n<i;n++){const o=e.options[n],a=jc(o);if(r)$t(t)?o.selected=KT(t,a)>-1:o.selected=t.has(a);else if(Yl(jc(o),t)){e.selectedIndex!==n&&(e.selectedIndex=n);return}}!r&&e.selectedIndex!==-1&&(e.selectedIndex=-1)}}function jc(e){return"_value"in e?e._value:e.value}function c7(e,t){const r=t?"_trueValue":"_falseValue";return r in e?e[r]:t}const DH=["ctrl","shift","alt","meta"],NH={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>DH.some(r=>e[`${r}Key`]&&!t.includes(r))},Gd=(e,t)=>(r,...n)=>{for(let i=0;i<t.length;i++){const o=NH[t[i]];if(o&&o(r,t))return}return e(r,...n)},FH={beforeMount(e,{value:t},{transition:r}){e._vod=e.style.display==="none"?"":e.style.display,r&&t?r.beforeEnter(e):Yf(e,t)},mounted(e,{value:t},{transition:r}){r&&t&&r.enter(e)},updated(e,{value:t,oldValue:r},{transition:n}){!t!=!r&&(n?t?(n.beforeEnter(e),Yf(e,!0),n.enter(e)):n.leave(e,()=>{Yf(e,!1)}):Yf(e,t))},beforeUnmount(e,{value:t}){Yf(e,t)}};function Yf(e,t){e.style.display=t?e._vod:"none"}const $H=on({patchProp:IH},mH);let gA;function BH(){return gA||(gA=Jj($H))}const zH=(...e)=>{const t=BH().createApp(...e),{mount:r}=t;return t.mount=n=>{const i=VH(n);if(!i)return;const o=t._component;!Gt(o)&&!o.render&&!o.template&&(o.template=i.innerHTML),i.innerHTML="";const a=r(i,!1,i instanceof SVGElement);return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),a},t};function VH(e){return mr(e)?document.querySelector(e):e}var UH=!1;function w0(e,t,r){return Array.isArray(e)?(e.length=Math.max(e.length,t),e.splice(t,1,r),r):(e[t]=r,r)}function py(e,t){if(Array.isArray(e)){e.splice(t,1);return}delete e[t]}function WH(){return f7().__VUE_DEVTOOLS_GLOBAL_HOOK__}function f7(){return typeof navigator<"u"&&typeof window<"u"?window:typeof global<"u"?global:{}}const GH=typeof Proxy=="function",jH="devtools-plugin:setup",HH="plugin:settings:set";let xu,uS;function XH(){var e;return xu!==void 0||(typeof window<"u"&&window.performance?(xu=!0,uS=window.performance):typeof global<"u"&&((e=global.perf_hooks)===null||e===void 0?void 0:e.performance)?(xu=!0,uS=global.perf_hooks.performance):xu=!1),xu}function YH(){return XH()?uS.now():Date.now()}class qH{constructor(t,r){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=r;const n={};if(t.settings)for(const a in t.settings){const s=t.settings[a];n[a]=s.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let o=Object.assign({},n);try{const a=localStorage.getItem(i),s=JSON.parse(a);Object.assign(o,s)}catch{}this.fallbacks={getSettings(){return o},setSettings(a){try{localStorage.setItem(i,JSON.stringify(a))}catch{}o=a},now(){return YH()}},r&&r.on(HH,(a,s)=>{a===this.plugin.id&&this.fallbacks.setSettings(s)}),this.proxiedOn=new Proxy({},{get:(a,s)=>this.target?this.target.on[s]:(...l)=>{this.onQueue.push({method:s,args:l})}}),this.proxiedTarget=new Proxy({},{get:(a,s)=>this.target?this.target[s]:s==="on"?this.proxiedOn:Object.keys(this.fallbacks).includes(s)?(...l)=>(this.targetQueue.push({method:s,args:l,resolve:()=>{}}),this.fallbacks[s](...l)):(...l)=>new Promise(u=>{this.targetQueue.push({method:s,args:l,resolve:u})})})}async setRealTarget(t){this.target=t;for(const r of this.onQueue)this.target.on[r.method](...r.args);for(const r of this.targetQueue)r.resolve(await this.target[r.method](...r.args))}}function h7(e,t){const r=e,n=f7(),i=WH(),o=GH&&r.enableEarlyProxy;if(i&&(n.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__||!o))i.emit(jH,e,t);else{const a=o?new qH(r,i):null;(n.__VUE_DEVTOOLS_PLUGINS__=n.__VUE_DEVTOOLS_PLUGINS__||[]).push({pluginDescriptor:r,setupFn:t,proxy:a}),a&&t(a.proxiedTarget)}}/*!
  * pinia v2.0.18
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */let cS;const jd=e=>cS=e,d7=Symbol("pinia");function ql(e){return e&&typeof e=="object"&&Object.prototype.toString.call(e)==="[object Object]"&&typeof e.toJSON!="function"}var Eo;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Eo||(Eo={}));const fs=typeof window<"u",mA=(()=>typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:typeof globalThis=="object"?globalThis:{HTMLElement:null})();function ZH(e,{autoBom:t=!1}={}){return t&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e}function mk(e,t,r){const n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){g7(n.response,t,r)},n.onerror=function(){console.error("could not download file")},n.send()}function p7(e){const t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Og(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{const r=document.createEvent("MouseEvents");r.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(r)}}const Rg=typeof navigator=="object"?navigator:{userAgent:""},v7=(()=>/Macintosh/.test(Rg.userAgent)&&/AppleWebKit/.test(Rg.userAgent)&&!/Safari/.test(Rg.userAgent))(),g7=fs?typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype&&!v7?KH:"msSaveOrOpenBlob"in Rg?JH:QH:()=>{};function KH(e,t="download",r){const n=document.createElement("a");n.download=t,n.rel="noopener",typeof e=="string"?(n.href=e,n.origin!==location.origin?p7(n.href)?mk(e,t,r):(n.target="_blank",Og(n)):Og(n)):(n.href=URL.createObjectURL(e),setTimeout(function(){URL.revokeObjectURL(n.href)},4e4),setTimeout(function(){Og(n)},0))}function JH(e,t="download",r){if(typeof e=="string")if(p7(e))mk(e,t,r);else{const n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Og(n)})}else navigator.msSaveOrOpenBlob(ZH(e,r),t)}function QH(e,t,r,n){if(n=n||open("","_blank"),n&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return mk(e,t,r);const i=e.type==="application/octet-stream",o=/constructor/i.test(String(mA.HTMLElement))||"safari"in mA,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||i&&o||v7)&&typeof FileReader<"u"){const s=new FileReader;s.onloadend=function(){let l=s.result;if(typeof l!="string")throw n=null,new Error("Wrong reader.result type");l=a?l:l.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=l:location.assign(l),n=null},s.readAsDataURL(e)}else{const s=URL.createObjectURL(e);n?n.location.assign(s):location.href=s,n=null,setTimeout(function(){URL.revokeObjectURL(s)},4e4)}}function pr(e,t){const r="\u{1F34D} "+e;typeof __VUE_DEVTOOLS_TOAST__=="function"?__VUE_DEVTOOLS_TOAST__(r,t):t==="error"?console.error(r):t==="warn"?console.warn(r):console.log(r)}function _k(e){return"_a"in e&&"install"in e}function m7(){if(!("clipboard"in navigator))return pr("Your browser doesn't support the Clipboard API","error"),!0}function _7(e){return e instanceof Error&&e.message.toLowerCase().includes("document is not focused")?(pr('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0):!1}async function tX(e){if(!m7())try{await navigator.clipboard.writeText(JSON.stringify(e.state.value)),pr("Global state copied to clipboard.")}catch(t){if(_7(t))return;pr("Failed to serialize the state. Check the console for more details.","error"),console.error(t)}}async function eX(e){if(!m7())try{e.state.value=JSON.parse(await navigator.clipboard.readText()),pr("Global state pasted from clipboard.")}catch(t){if(_7(t))return;pr("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(t)}}async function rX(e){try{g7(new Blob([JSON.stringify(e.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(t){pr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}let Go;function nX(){Go||(Go=document.createElement("input"),Go.type="file",Go.accept=".json");function e(){return new Promise((t,r)=>{Go.onchange=async()=>{const n=Go.files;if(!n)return t(null);const i=n.item(0);return t(i?{text:await i.text(),file:i}:null)},Go.oncancel=()=>t(null),Go.onerror=r,Go.click()})}return e}async function iX(e){try{const r=await(await nX())();if(!r)return;const{text:n,file:i}=r;e.state.value=JSON.parse(n),pr(`Global state imported from "${i.name}".`)}catch(t){pr("Failed to export the state as JSON. Check the console for more details.","error"),console.error(t)}}function yi(e){return{_custom:{display:e}}}const y7="\u{1F34D} Pinia (root)",fS="_root";function oX(e){return _k(e)?{id:fS,label:y7}:{id:e.$id,label:e.$id}}function aX(e){if(_k(e)){const r=Array.from(e._s.keys()),n=e._s;return{state:r.map(o=>({editable:!0,key:o,value:e.state.value[o]})),getters:r.filter(o=>n.get(o)._getters).map(o=>{const a=n.get(o);return{editable:!1,key:o,value:a._getters.reduce((s,l)=>(s[l]=a[l],s),{})}})}}const t={state:Object.keys(e.$state).map(r=>({editable:!0,key:r,value:e.$state[r]}))};return e._getters&&e._getters.length&&(t.getters=e._getters.map(r=>({editable:!1,key:r,value:e[r]}))),e._customProperties.size&&(t.customProperties=Array.from(e._customProperties).map(r=>({editable:!0,key:r,value:e[r]}))),t}function sX(e){return e?Array.isArray(e)?e.reduce((t,r)=>(t.keys.push(r.key),t.operations.push(r.type),t.oldValue[r.key]=r.oldValue,t.newValue[r.key]=r.newValue,t),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:yi(e.type),key:yi(e.key),oldValue:e.oldValue,newValue:e.newValue}:{}}function lX(e){switch(e){case Eo.direct:return"mutation";case Eo.patchFunction:return"$patch";case Eo.patchObject:return"$patch";default:return"unknown"}}let mc=!0;const Dg=[],Sl="pinia:mutations",$r="pinia",wm=e=>"\u{1F34D} "+e;function uX(e,t){h7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Dg,app:e},r=>{typeof r.now!="function"&&pr("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),r.addTimelineLayer({id:Sl,label:"Pinia \u{1F34D}",color:15064968}),r.addInspector({id:$r,label:"Pinia \u{1F34D}",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{tX(t)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await eX(t),r.sendInspectorTree($r),r.sendInspectorState($r)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{rX(t)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await iX(t),r.sendInspectorTree($r),r.sendInspectorState($r)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:"Reset the state (option store only)",action:n=>{const i=t._s.get(n);i?i._isOptionsAPI?(i.$reset(),pr(`Store "${n}" reset.`)):pr(`Cannot reset "${n}" store because it's a setup store.`,"warn"):pr(`Cannot reset "${n}" store because it wasn't found.`,"warn")}}]}),r.on.inspectComponent((n,i)=>{const o=n.componentInstance&&n.componentInstance.proxy;if(o&&o._pStores){const a=n.componentInstance.proxy._pStores;Object.values(a).forEach(s=>{n.instanceData.state.push({type:wm(s.$id),key:"state",editable:!0,value:s._isOptionsAPI?{_custom:{value:he(s.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>s.$reset()}]}}:Object.keys(s.$state).reduce((l,u)=>(l[u]=s.$state[u],l),{})}),s._getters&&s._getters.length&&n.instanceData.state.push({type:wm(s.$id),key:"getters",editable:!1,value:s._getters.reduce((l,u)=>{try{l[u]=s[u]}catch(c){l[u]=c}return l},{})})})}}),r.on.getInspectorTree(n=>{if(n.app===e&&n.inspectorId===$r){let i=[t];i=i.concat(Array.from(t._s.values())),n.rootNodes=(n.filter?i.filter(o=>"$id"in o?o.$id.toLowerCase().includes(n.filter.toLowerCase()):y7.toLowerCase().includes(n.filter.toLowerCase())):i).map(oX)}}),r.on.getInspectorState(n=>{if(n.app===e&&n.inspectorId===$r){const i=n.nodeId===fS?t:t._s.get(n.nodeId);if(!i)return;i&&(n.state=aX(i))}}),r.on.editInspectorState((n,i)=>{if(n.app===e&&n.inspectorId===$r){const o=n.nodeId===fS?t:t._s.get(n.nodeId);if(!o)return pr(`store "${n.nodeId}" not found`,"error");const{path:a}=n;_k(o)?a.unshift("state"):(a.length!==1||!o._customProperties.has(a[0])||a[0]in o.$state)&&a.unshift("$state"),mc=!1,n.set(o,a,n.state.value),mc=!0}}),r.on.editComponentState(n=>{if(n.type.startsWith("\u{1F34D}")){const i=n.type.replace(/^🍍\s*/,""),o=t._s.get(i);if(!o)return pr(`store "${i}" not found`,"error");const{path:a}=n;if(a[0]!=="state")return pr(`Invalid path for store "${i}":
${a}
Only state can be modified.`);a[0]="$state",mc=!1,n.set(o,a,n.state.value),mc=!0}})})}function cX(e,t){Dg.includes(wm(t.$id))||Dg.push(wm(t.$id)),h7({id:"dev.esm.pinia",label:"Pinia \u{1F34D}",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:Dg,app:e,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},r=>{const n=typeof r.now=="function"?r.now.bind(r):Date.now;t.$onAction(({after:a,onError:s,name:l,args:u})=>{const c=b7++;r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"\u{1F6EB} "+l,subtitle:"start",data:{store:yi(t.$id),action:yi(l),args:u},groupId:c}}),a(f=>{Cl=void 0,r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"\u{1F6EC} "+l,subtitle:"end",data:{store:yi(t.$id),action:yi(l),args:u,result:f},groupId:c}})}),s(f=>{Cl=void 0,r.addTimelineEvent({layerId:Sl,event:{time:n(),logType:"error",title:"\u{1F4A5} "+l,subtitle:"end",data:{store:yi(t.$id),action:yi(l),args:u,error:f},groupId:c}})})},!0),t._customProperties.forEach(a=>{So(()=>Pr(t[a]),(s,l)=>{r.notifyComponentUpdate(),r.sendInspectorState($r),mc&&r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"Change",subtitle:a,data:{newValue:s,oldValue:l},groupId:Cl}})},{deep:!0})}),t.$subscribe(({events:a,type:s},l)=>{if(r.notifyComponentUpdate(),r.sendInspectorState($r),!mc)return;const u={time:n(),title:lX(s),data:{store:yi(t.$id),...sX(a)},groupId:Cl};Cl=void 0,s===Eo.patchFunction?u.subtitle="\u2935\uFE0F":s===Eo.patchObject?u.subtitle="\u{1F9E9}":a&&!Array.isArray(a)&&(u.subtitle=a.type),a&&(u.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:a}}),r.addTimelineEvent({layerId:Sl,event:u})},{detached:!0,flush:"sync"});const i=t._hotUpdate;t._hotUpdate=Ti(a=>{i(a),r.addTimelineEvent({layerId:Sl,event:{time:n(),title:"\u{1F525} "+t.$id,subtitle:"HMR update",data:{store:yi(t.$id),info:yi("HMR update")}}}),r.notifyComponentUpdate(),r.sendInspectorTree($r),r.sendInspectorState($r)});const{$dispose:o}=t;t.$dispose=()=>{o(),r.notifyComponentUpdate(),r.sendInspectorTree($r),r.sendInspectorState($r),r.getSettings().logStoreChanges&&pr(`Disposed "${t.$id}" store \u{1F5D1}`)},r.notifyComponentUpdate(),r.sendInspectorTree($r),r.sendInspectorState($r),r.getSettings().logStoreChanges&&pr(`"${t.$id}" store installed \u{1F195}`)})}let b7=0,Cl;function _A(e,t){const r=t.reduce((n,i)=>(n[i]=he(e)[i],n),{});for(const n in r)e[n]=function(){const i=b7,o=new Proxy(e,{get(...a){return Cl=i,Reflect.get(...a)},set(...a){return Cl=i,Reflect.set(...a)}});return r[n].apply(o,arguments)}}function fX({app:e,store:t,options:r}){if(!t.$id.startsWith("__hot:")){if(r.state&&(t._isOptionsAPI=!0),typeof r.state=="function"){_A(t,Object.keys(r.actions));const n=t._hotUpdate;he(t)._hotUpdate=function(i){n.apply(this,arguments),_A(t,Object.keys(i._hmrPayload.actions))}}cX(e,t)}}function hX(){const e=bD(!0),t=e.run(()=>x1({}));let r=[],n=[];const i=Ti({install(o){jd(i),i._a=o,o.provide(d7,i),o.config.globalProperties.$pinia=i,fs&&uX(o,i),n.forEach(a=>r.push(a)),n=[]},use(o){return!this._a&&!UH?n.push(o):r.push(o),this},_p:r,_a:null,_e:e,_s:new Map,state:t});return fs&&!0&&typeof Proxy<"u"&&i.use(fX),i}function w7(e,t){for(const r in t){const n=t[r];if(!(r in e))continue;const i=e[r];ql(i)&&ql(n)&&!He(n)&&!fa(n)?e[r]=w7(i,n):e[r]=n}return e}const dX=()=>{};function yA(e,t,r,n=dX){e.push(t);const i=()=>{const o=e.indexOf(t);o>-1&&(e.splice(o,1),n())};return!r&&vk()&&N1(i),i}function Lu(e,...t){e.slice().forEach(r=>{r(...t)})}function hS(e,t){for(const r in t){if(!t.hasOwnProperty(r))continue;const n=t[r],i=e[r];ql(i)&&ql(n)&&e.hasOwnProperty(r)&&!He(n)&&!fa(n)?e[r]=hS(i,n):e[r]=n}return e}const pX=Symbol("pinia:skipHydration");function vX(e){return!ql(e)||!e.hasOwnProperty(pX)}const{assign:Si}=Object;function bA(e){return!!(He(e)&&e.effect)}function wA(e,t,r,n){const{state:i,actions:o,getters:a}=t,s=r.state.value[e];let l;function u(){!s&&!n&&(r.state.value[e]=i?i():{});const c=Qw(n?x1(i?i():{}).value:r.state.value[e]);return Si(c,o,Object.keys(a||{}).reduce((f,h)=>(h in c&&console.warn(`[\u{1F34D}]: A getter cannot have the same name as another state property. Rename one of them. Found with "${h}" in store "${e}".`),f[h]=Ti(Ze(()=>{jd(r);const d=r._s.get(e);return a[h].call(d,d)})),f),{}))}return l=dS(e,u,t,r,n,!0),l.$reset=function(){const f=i?i():{};this.$patch(h=>{Si(h,f)})},l}function dS(e,t,r={},n,i,o){let a;const s=Si({actions:{}},r);if(!n._e.active)throw new Error("Pinia destroyed");const l={deep:!0};l.onTrigger=E=>{u?d=E:u==!1&&!k._hotUpdating&&(Array.isArray(d)?d.push(E):console.error("\u{1F34D} debuggerEvents should be an array. This is most likely an internal Pinia bug."))};let u,c,f=Ti([]),h=Ti([]),d;const p=n.state.value[e];!o&&!p&&!i&&(n.state.value[e]={});const v=x1({});let m;function g(E){let M;u=c=!1,d=[],typeof E=="function"?(E(n.state.value[e]),M={type:Eo.patchFunction,storeId:e,events:d}):(hS(n.state.value[e],E),M={type:Eo.patchObject,payload:E,storeId:e,events:d});const x=m=Symbol();zd().then(()=>{m===x&&(u=!0)}),c=!0,Lu(f,M,n.state.value[e])}const _=()=>{throw new Error(`\u{1F34D}: Store "${e}" is built using the setup syntax and does not implement $reset().`)};function b(){a.stop(),f=[],h=[],n._s.delete(e)}function w(E,M){return function(){jd(n);const x=Array.from(arguments),D=[],B=[];function V(Z){D.push(Z)}function F(Z){B.push(Z)}Lu(h,{args:x,name:E,store:k,after:V,onError:F});let G;try{G=M.apply(this&&this.$id===e?this:k,x)}catch(Z){throw Lu(B,Z),Z}return G instanceof Promise?G.then(Z=>(Lu(D,Z),Z)).catch(Z=>(Lu(B,Z),Promise.reject(Z))):(Lu(D,G),G)}}const T=Ti({actions:{},getters:{},state:[],hotState:v}),S={_p:n,$id:e,$onAction:yA.bind(null,h),$patch:g,$reset:_,$subscribe(E,M={}){const x=yA(f,E,M.detached,()=>D()),D=a.run(()=>So(()=>n.state.value[e],B=>{(M.flush==="sync"?c:u)&&E({storeId:e,type:Eo.direct,events:d},B)},Si({},l,M)));return x},$dispose:b},k=ff(Si(fs?{_customProperties:Ti(new Set),_hmrPayload:T}:{},S));n._s.set(e,k);const C=n._e.run(()=>(a=bD(),a.run(()=>t())));for(const E in C){const M=C[E];if(He(M)&&!bA(M)||fa(M))i?w0(v.value,E,Mg(C,E)):o||(p&&vX(M)&&(He(M)?M.value=p[E]:hS(M,p[E])),n.state.value[e][E]=M),T.state.push(E);else if(typeof M=="function"){const x=i?M:w(E,M);C[E]=x,T.actions[E]=M,s.actions[E]=M}else bA(M)&&(T.getters[E]=o?r.getters[E]:M,fs&&(C._getters||(C._getters=Ti([]))).push(E))}Si(k,C),Si(he(k),C),Object.defineProperty(k,"$state",{get:()=>i?v.value:n.state.value[e],set:E=>{if(i)throw new Error("cannot set hotState");g(M=>{Si(M,E)})}});{k._hotUpdate=Ti(M=>{k._hotUpdating=!0,M._hmrPayload.state.forEach(x=>{if(x in k.$state){const D=M.$state[x],B=k.$state[x];typeof D=="object"&&ql(D)&&ql(B)?w7(D,B):M.$state[x]=B}w0(k,x,Mg(M.$state,x))}),Object.keys(k.$state).forEach(x=>{x in M.$state||py(k,x)}),u=!1,c=!1,n.state.value[e]=Mg(M._hmrPayload,"hotState"),c=!0,zd().then(()=>{u=!0});for(const x in M._hmrPayload.actions){const D=M[x];w0(k,x,w(x,D))}for(const x in M._hmrPayload.getters){const D=M._hmrPayload.getters[x],B=o?Ze(()=>(jd(n),D.call(k,k))):D;w0(k,x,B)}Object.keys(k._hmrPayload.getters).forEach(x=>{x in M._hmrPayload.getters||py(k,x)}),Object.keys(k._hmrPayload.actions).forEach(x=>{x in M._hmrPayload.actions||py(k,x)}),k._hmrPayload=M._hmrPayload,k._getters=M._getters,k._hotUpdating=!1});const E={writable:!0,configurable:!0,enumerable:!1};fs&&["_p","_hmrPayload","_getters","_customProperties"].forEach(M=>{Object.defineProperty(k,M,{value:k[M],...E})})}return n._p.forEach(E=>{if(fs){const M=a.run(()=>E({store:k,app:n._a,pinia:n,options:s}));Object.keys(M||{}).forEach(x=>k._customProperties.add(x)),Si(k,M)}else Si(k,a.run(()=>E({store:k,app:n._a,pinia:n,options:s})))}),k.$state&&typeof k.$state=="object"&&typeof k.$state.constructor=="function"&&!k.$state.constructor.toString().includes("[native code]")&&console.warn(`[\u{1F34D}]: The "state" must be a plain object. It cannot be
	state: () => new MyClass()
Found in store "${k.$id}".`),p&&o&&r.hydrate&&r.hydrate(k.$state,p),u=!0,c=!0,k}function Ap(e,t,r){let n,i;const o=typeof t=="function";typeof e=="string"?(n=e,i=o?r:t):(i=e,n=e.id);function a(s,l){const u=vk();if(s=s||u&&xn(d7),s&&jd(s),!cS)throw new Error(`[\u{1F34D}]: getActivePinia was called with no active Pinia. Did you forget to install pinia?
	const pinia = createPinia()
	app.use(pinia)
This will fail in production.`);s=cS,s._s.has(n)||(o?dS(n,t,i,s):wA(n,i,s),a._pinia=s);const c=s._s.get(n);if(l){const f="__hot:"+n,h=o?dS(f,t,i,s,!0):wA(f,Si({},i),s,!0);l._hotUpdate(h),delete s.state.value[f],s._s.delete(f)}if(fs&&u&&u.proxy&&!l){const f=u.proxy,h="_pStores"in f?f._pStores:f._pStores={};h[n]=c}return c}return a.$id=n,a}/*!
  * vue-router v4.1.3
  * (c) 2022 Eduardo San Martin Morote
  * @license MIT
  */const hc=typeof window<"u";function gX(e){return e.__esModule||e[Symbol.toStringTag]==="Module"}const Ae=Object.assign;function vy(e,t){const r={};for(const n in t){const i=t[n];r[n]=$i(i)?i.map(e):e(i)}return r}const hd=()=>{},$i=Array.isArray,mX=/\/$/,_X=e=>e.replace(mX,"");function gy(e,t,r="/"){let n,i={},o="",a="";const s=t.indexOf("#");let l=t.indexOf("?");return s<l&&s>=0&&(l=-1),l>-1&&(n=t.slice(0,l),o=t.slice(l+1,s>-1?s:t.length),i=e(o)),s>-1&&(n=n||t.slice(0,s),a=t.slice(s,t.length)),n=SX(n!=null?n:t,r),{fullPath:n+(o&&"?")+o+a,path:n,query:i,hash:a}}function yX(e,t){const r=t.query?e(t.query):"";return t.path+(r&&"?")+r+(t.hash||"")}function SA(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function bX(e,t,r){const n=t.matched.length-1,i=r.matched.length-1;return n>-1&&n===i&&Hc(t.matched[n],r.matched[i])&&S7(t.params,r.params)&&e(t.query)===e(r.query)&&t.hash===r.hash}function Hc(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function S7(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(!wX(e[r],t[r]))return!1;return!0}function wX(e,t){return $i(e)?TA(e,t):$i(t)?TA(t,e):e===t}function TA(e,t){return $i(t)?e.length===t.length&&e.every((r,n)=>r===t[n]):e.length===1&&e[0]===t}function SX(e,t){if(e.startsWith("/"))return e;if(!e)return t;const r=t.split("/"),n=e.split("/");let i=r.length-1,o,a;for(o=0;o<n.length;o++)if(a=n[o],a!==".")if(a==="..")i>1&&i--;else break;return r.slice(0,i).join("/")+"/"+n.slice(o-(o===n.length?1:0)).join("/")}var Hd;(function(e){e.pop="pop",e.push="push"})(Hd||(Hd={}));var dd;(function(e){e.back="back",e.forward="forward",e.unknown=""})(dd||(dd={}));function TX(e){if(!e)if(hc){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),_X(e)}const kX=/^[^#]+#/;function PX(e,t){return e.replace(kX,"#")+t}function EX(e,t){const r=document.documentElement.getBoundingClientRect(),n=e.getBoundingClientRect();return{behavior:t.behavior,left:n.left-r.left-(t.left||0),top:n.top-r.top-(t.top||0)}}const z1=()=>({left:window.pageXOffset,top:window.pageYOffset});function CX(e){let t;if("el"in e){const r=e.el,n=typeof r=="string"&&r.startsWith("#"),i=typeof r=="string"?n?document.getElementById(r.slice(1)):document.querySelector(r):r;if(!i)return;t=EX(i,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.pageXOffset,t.top!=null?t.top:window.pageYOffset)}function kA(e,t){return(history.state?history.state.position-t:-1)+e}const pS=new Map;function AX(e,t){pS.set(e,t)}function MX(e){const t=pS.get(e);return pS.delete(e),t}let xX=()=>location.protocol+"//"+location.host;function T7(e,t){const{pathname:r,search:n,hash:i}=t,o=e.indexOf("#");if(o>-1){let s=i.includes(e.slice(o))?e.slice(o).length:1,l=i.slice(s);return l[0]!=="/"&&(l="/"+l),SA(l,"")}return SA(r,e)+n+i}function LX(e,t,r,n){let i=[],o=[],a=null;const s=({state:h})=>{const d=T7(e,location),p=r.value,v=t.value;let m=0;if(h){if(r.value=d,t.value=h,a&&a===p){a=null;return}m=v?h.position-v.position:0}else n(d);i.forEach(g=>{g(r.value,p,{delta:m,type:Hd.pop,direction:m?m>0?dd.forward:dd.back:dd.unknown})})};function l(){a=r.value}function u(h){i.push(h);const d=()=>{const p=i.indexOf(h);p>-1&&i.splice(p,1)};return o.push(d),d}function c(){const{history:h}=window;!h.state||h.replaceState(Ae({},h.state,{scroll:z1()}),"")}function f(){for(const h of o)h();o=[],window.removeEventListener("popstate",s),window.removeEventListener("beforeunload",c)}return window.addEventListener("popstate",s),window.addEventListener("beforeunload",c),{pauseListeners:l,listen:u,destroy:f}}function PA(e,t,r,n=!1,i=!1){return{back:e,current:t,forward:r,replaced:n,position:window.history.length,scroll:i?z1():null}}function IX(e){const{history:t,location:r}=window,n={value:T7(e,r)},i={value:t.state};i.value||o(n.value,{back:null,current:n.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function o(l,u,c){const f=e.indexOf("#"),h=f>-1?(r.host&&document.querySelector("base")?e:e.slice(f))+l:xX()+e+l;try{t[c?"replaceState":"pushState"](u,"",h),i.value=u}catch(d){console.error(d),r[c?"replace":"assign"](h)}}function a(l,u){const c=Ae({},t.state,PA(i.value.back,l,i.value.forward,!0),u,{position:i.value.position});o(l,c,!0),n.value=l}function s(l,u){const c=Ae({},i.value,t.state,{forward:l,scroll:z1()});o(c.current,c,!0);const f=Ae({},PA(n.value,l,null),{position:c.position+1},u);o(l,f,!1),n.value=l}return{location:n,state:i,push:s,replace:a}}function OX(e){e=TX(e);const t=IX(e),r=LX(e,t.state,t.location,t.replace);function n(o,a=!0){a||r.pauseListeners(),history.go(o)}const i=Ae({location:"",base:e,go:n,createHref:PX.bind(null,e)},t,r);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function RX(e){return typeof e=="string"||e&&typeof e=="object"}function k7(e){return typeof e=="string"||typeof e=="symbol"}const Da={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},P7=Symbol("");var EA;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(EA||(EA={}));function Xc(e,t){return Ae(new Error,{type:e,[P7]:!0},t)}function jo(e,t){return e instanceof Error&&P7 in e&&(t==null||!!(e.type&t))}const CA="[^/]+?",DX={sensitive:!1,strict:!1,start:!0,end:!0},NX=/[.+*?^${}()[\]/\\]/g;function FX(e,t){const r=Ae({},DX,t),n=[];let i=r.start?"^":"";const o=[];for(const u of e){const c=u.length?[]:[90];r.strict&&!u.length&&(i+="/");for(let f=0;f<u.length;f++){const h=u[f];let d=40+(r.sensitive?.25:0);if(h.type===0)f||(i+="/"),i+=h.value.replace(NX,"\\$&"),d+=40;else if(h.type===1){const{value:p,repeatable:v,optional:m,regexp:g}=h;o.push({name:p,repeatable:v,optional:m});const _=g||CA;if(_!==CA){d+=10;try{new RegExp(`(${_})`)}catch(w){throw new Error(`Invalid custom RegExp for param "${p}" (${_}): `+w.message)}}let b=v?`((?:${_})(?:/(?:${_}))*)`:`(${_})`;f||(b=m&&u.length<2?`(?:/${b})`:"/"+b),m&&(b+="?"),i+=b,d+=20,m&&(d+=-8),v&&(d+=-20),_===".*"&&(d+=-50)}c.push(d)}n.push(c)}if(r.strict&&r.end){const u=n.length-1;n[u][n[u].length-1]+=.7000000000000001}r.strict||(i+="/?"),r.end?i+="$":r.strict&&(i+="(?:/|$)");const a=new RegExp(i,r.sensitive?"":"i");function s(u){const c=u.match(a),f={};if(!c)return null;for(let h=1;h<c.length;h++){const d=c[h]||"",p=o[h-1];f[p.name]=d&&p.repeatable?d.split("/"):d}return f}function l(u){let c="",f=!1;for(const h of e){(!f||!c.endsWith("/"))&&(c+="/"),f=!1;for(const d of h)if(d.type===0)c+=d.value;else if(d.type===1){const{value:p,repeatable:v,optional:m}=d,g=p in u?u[p]:"";if($i(g)&&!v)throw new Error(`Provided param "${p}" is an array but it is not repeatable (* or + modifiers)`);const _=$i(g)?g.join("/"):g;if(!_)if(m)h.length<2&&(c.endsWith("/")?c=c.slice(0,-1):f=!0);else throw new Error(`Missing required param "${p}"`);c+=_}}return c||"/"}return{re:a,score:n,keys:o,parse:s,stringify:l}}function $X(e,t){let r=0;for(;r<e.length&&r<t.length;){const n=t[r]-e[r];if(n)return n;r++}return e.length<t.length?e.length===1&&e[0]===40+40?-1:1:e.length>t.length?t.length===1&&t[0]===40+40?1:-1:0}function BX(e,t){let r=0;const n=e.score,i=t.score;for(;r<n.length&&r<i.length;){const o=$X(n[r],i[r]);if(o)return o;r++}if(Math.abs(i.length-n.length)===1){if(AA(n))return 1;if(AA(i))return-1}return i.length-n.length}function AA(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const zX={type:0,value:""},VX=/[a-zA-Z0-9_]/;function UX(e){if(!e)return[[]];if(e==="/")return[[zX]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(d){throw new Error(`ERR (${r})/"${u}": ${d}`)}let r=0,n=r;const i=[];let o;function a(){o&&i.push(o),o=[]}let s=0,l,u="",c="";function f(){!u||(r===0?o.push({type:0,value:u}):r===1||r===2||r===3?(o.length>1&&(l==="*"||l==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:1,value:u,regexp:c,repeatable:l==="*"||l==="+",optional:l==="*"||l==="?"})):t("Invalid state to consume buffer"),u="")}function h(){u+=l}for(;s<e.length;){if(l=e[s++],l==="\\"&&r!==2){n=r,r=4;continue}switch(r){case 0:l==="/"?(u&&f(),a()):l===":"?(f(),r=1):h();break;case 4:h(),r=n;break;case 1:l==="("?r=2:VX.test(l)?h():(f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--);break;case 2:l===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+l:r=3:c+=l;break;case 3:f(),r=0,l!=="*"&&l!=="?"&&l!=="+"&&s--,c="";break;default:t("Unknown state");break}}return r===2&&t(`Unfinished custom RegExp for param "${u}"`),f(),a(),i}function WX(e,t,r){const n=FX(UX(e.path),r),i=Ae(n,{record:e,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function GX(e,t){const r=[],n=new Map;t=xA({strict:!1,end:!0,sensitive:!1},t);function i(c){return n.get(c)}function o(c,f,h){const d=!h,p=HX(c);p.aliasOf=h&&h.record;const v=xA(t,c),m=[p];if("alias"in c){const b=typeof c.alias=="string"?[c.alias]:c.alias;for(const w of b)m.push(Ae({},p,{components:h?h.record.components:p.components,path:w,aliasOf:h?h.record:p}))}let g,_;for(const b of m){const{path:w}=b;if(f&&w[0]!=="/"){const T=f.record.path,S=T[T.length-1]==="/"?"":"/";b.path=f.record.path+(w&&S+w)}if(g=WX(b,f,v),h?h.alias.push(g):(_=_||g,_!==g&&_.alias.push(g),d&&c.name&&!MA(g)&&a(c.name)),p.children){const T=p.children;for(let S=0;S<T.length;S++)o(T[S],g,h&&h.children[S])}h=h||g,l(g)}return _?()=>{a(_)}:hd}function a(c){if(k7(c)){const f=n.get(c);f&&(n.delete(c),r.splice(r.indexOf(f),1),f.children.forEach(a),f.alias.forEach(a))}else{const f=r.indexOf(c);f>-1&&(r.splice(f,1),c.record.name&&n.delete(c.record.name),c.children.forEach(a),c.alias.forEach(a))}}function s(){return r}function l(c){let f=0;for(;f<r.length&&BX(c,r[f])>=0&&(c.record.path!==r[f].record.path||!E7(c,r[f]));)f++;r.splice(f,0,c),c.record.name&&!MA(c)&&n.set(c.record.name,c)}function u(c,f){let h,d={},p,v;if("name"in c&&c.name){if(h=n.get(c.name),!h)throw Xc(1,{location:c});v=h.record.name,d=Ae(jX(f.params,h.keys.filter(_=>!_.optional).map(_=>_.name)),c.params),p=h.stringify(d)}else if("path"in c)p=c.path,h=r.find(_=>_.re.test(p)),h&&(d=h.parse(p),v=h.record.name);else{if(h=f.name?n.get(f.name):r.find(_=>_.re.test(f.path)),!h)throw Xc(1,{location:c,currentLocation:f});v=h.record.name,d=Ae({},f.params,c.params),p=h.stringify(d)}const m=[];let g=h;for(;g;)m.unshift(g.record),g=g.parent;return{name:v,path:p,params:d,matched:m,meta:YX(m)}}return e.forEach(c=>o(c)),{addRoute:o,resolve:u,removeRoute:a,getRoutes:s,getRecordMatcher:i}}function jX(e,t){const r={};for(const n of t)n in e&&(r[n]=e[n]);return r}function HX(e){return{path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:void 0,beforeEnter:e.beforeEnter,props:XX(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}}}function XX(e){const t={},r=e.props||!1;if("component"in e)t.default=r;else for(const n in e.components)t[n]=typeof r=="boolean"?r:r[n];return t}function MA(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function YX(e){return e.reduce((t,r)=>Ae(t,r.meta),{})}function xA(e,t){const r={};for(const n in e)r[n]=n in t?t[n]:e[n];return r}function E7(e,t){return t.children.some(r=>r===e||E7(e,r))}const C7=/#/g,qX=/&/g,ZX=/\//g,KX=/=/g,JX=/\?/g,A7=/\+/g,QX=/%5B/g,tY=/%5D/g,M7=/%5E/g,eY=/%60/g,x7=/%7B/g,rY=/%7C/g,L7=/%7D/g,nY=/%20/g;function yk(e){return encodeURI(""+e).replace(rY,"|").replace(QX,"[").replace(tY,"]")}function iY(e){return yk(e).replace(x7,"{").replace(L7,"}").replace(M7,"^")}function vS(e){return yk(e).replace(A7,"%2B").replace(nY,"+").replace(C7,"%23").replace(qX,"%26").replace(eY,"`").replace(x7,"{").replace(L7,"}").replace(M7,"^")}function oY(e){return vS(e).replace(KX,"%3D")}function aY(e){return yk(e).replace(C7,"%23").replace(JX,"%3F")}function sY(e){return e==null?"":aY(e).replace(ZX,"%2F")}function Sm(e){try{return decodeURIComponent(""+e)}catch{}return""+e}function lY(e){const t={};if(e===""||e==="?")return t;const n=(e[0]==="?"?e.slice(1):e).split("&");for(let i=0;i<n.length;++i){const o=n[i].replace(A7," "),a=o.indexOf("="),s=Sm(a<0?o:o.slice(0,a)),l=a<0?null:Sm(o.slice(a+1));if(s in t){let u=t[s];$i(u)||(u=t[s]=[u]),u.push(l)}else t[s]=l}return t}function LA(e){let t="";for(let r in e){const n=e[r];if(r=oY(r),n==null){n!==void 0&&(t+=(t.length?"&":"")+r);continue}($i(n)?n.map(o=>o&&vS(o)):[n&&vS(n)]).forEach(o=>{o!==void 0&&(t+=(t.length?"&":"")+r,o!=null&&(t+="="+o))})}return t}function uY(e){const t={};for(const r in e){const n=e[r];n!==void 0&&(t[r]=$i(n)?n.map(i=>i==null?null:""+i):n==null?n:""+n)}return t}const cY=Symbol(""),IA=Symbol(""),bk=Symbol(""),I7=Symbol(""),gS=Symbol("");function qf(){let e=[];function t(n){return e.push(n),()=>{const i=e.indexOf(n);i>-1&&e.splice(i,1)}}function r(){e=[]}return{add:t,list:()=>e,reset:r}}function cs(e,t,r,n,i){const o=n&&(n.enterCallbacks[i]=n.enterCallbacks[i]||[]);return()=>new Promise((a,s)=>{const l=f=>{f===!1?s(Xc(4,{from:r,to:t})):f instanceof Error?s(f):RX(f)?s(Xc(2,{from:t,to:f})):(o&&n.enterCallbacks[i]===o&&typeof f=="function"&&o.push(f),a())},u=e.call(n&&n.instances[i],t,r,l);let c=Promise.resolve(u);e.length<3&&(c=c.then(l)),c.catch(f=>s(f))})}function my(e,t,r,n){const i=[];for(const o of e)for(const a in o.components){let s=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(fY(s)){const u=(s.__vccOpts||s)[t];u&&i.push(cs(u,r,n,o,a))}else{let l=s();i.push(()=>l.then(u=>{if(!u)return Promise.reject(new Error(`Couldn't resolve component "${a}" at "${o.path}"`));const c=gX(u)?u.default:u;o.components[a]=c;const h=(c.__vccOpts||c)[t];return h&&cs(h,r,n,o,a)()}))}}return i}function fY(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function OA(e){const t=xn(bk),r=xn(I7),n=Ze(()=>t.resolve(Pr(e.to))),i=Ze(()=>{const{matched:l}=n.value,{length:u}=l,c=l[u-1],f=r.matched;if(!c||!f.length)return-1;const h=f.findIndex(Hc.bind(null,c));if(h>-1)return h;const d=RA(l[u-2]);return u>1&&RA(c)===d&&f[f.length-1].path!==d?f.findIndex(Hc.bind(null,l[u-2])):h}),o=Ze(()=>i.value>-1&&pY(r.params,n.value.params)),a=Ze(()=>i.value>-1&&i.value===r.matched.length-1&&S7(r.params,n.value.params));function s(l={}){return dY(l)?t[Pr(e.replace)?"replace":"push"](Pr(e.to)).catch(hd):Promise.resolve()}return{route:n,href:Ze(()=>n.value.href),isActive:o,isExactActive:a,navigate:s}}const hY=fk({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:OA,setup(e,{slots:t}){const r=ff(OA(e)),{options:n}=xn(bk),i=Ze(()=>({[DA(e.activeClass,n.linkActiveClass,"router-link-active")]:r.isActive,[DA(e.exactActiveClass,n.linkExactActiveClass,"router-link-exact-active")]:r.isExactActive}));return()=>{const o=t.default&&t.default(r);return e.custom?o:gk("a",{"aria-current":r.isExactActive?e.ariaCurrentValue:null,href:r.href,onClick:r.navigate,class:i.value},o)}}}),dc=hY;function dY(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function pY(e,t){for(const r in t){const n=t[r],i=e[r];if(typeof n=="string"){if(n!==i)return!1}else if(!$i(i)||i.length!==n.length||n.some((o,a)=>o!==i[a]))return!1}return!0}function RA(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const DA=(e,t,r)=>e!=null?e:t!=null?t:r,vY=fk({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:r}){const n=xn(gS),i=Ze(()=>e.route||n.value),o=xn(IA,0),a=Ze(()=>{let u=Pr(o);const{matched:c}=i.value;let f;for(;(f=c[u])&&!f.components;)u++;return u}),s=Ze(()=>i.value.matched[a.value]);xg(IA,Ze(()=>a.value+1)),xg(cY,s),xg(gS,i);const l=x1();return So(()=>[l.value,s.value,e.name],([u,c,f],[h,d,p])=>{c&&(c.instances[f]=u,d&&d!==c&&u&&u===h&&(c.leaveGuards.size||(c.leaveGuards=d.leaveGuards),c.updateGuards.size||(c.updateGuards=d.updateGuards))),u&&c&&(!d||!Hc(c,d)||!h)&&(c.enterCallbacks[f]||[]).forEach(v=>v(u))},{flush:"post"}),()=>{const u=i.value,c=e.name,f=s.value,h=f&&f.components[c];if(!h)return NA(r.default,{Component:h,route:u});const d=f.props[c],p=d?d===!0?u.params:typeof d=="function"?d(u):d:null,m=gk(h,Ae({},p,t,{onVnodeUnmounted:g=>{g.component.isUnmounted&&(f.instances[c]=null)},ref:l}));return NA(r.default,{Component:m,route:u})||m}}});function NA(e,t){if(!e)return null;const r=e(t);return r.length===1?r[0]:r}const O7=vY;function gY(e){const t=GX(e.routes,e),r=e.parseQuery||lY,n=e.stringifyQuery||LA,i=e.history,o=qf(),a=qf(),s=qf(),l=Ag(Da);let u=Da;hc&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=vy.bind(null,Y=>""+Y),f=vy.bind(null,sY),h=vy.bind(null,Sm);function d(Y,it){let K,vt;return k7(Y)?(K=t.getRecordMatcher(Y),vt=it):vt=Y,t.addRoute(vt,K)}function p(Y){const it=t.getRecordMatcher(Y);it&&t.removeRoute(it)}function v(){return t.getRoutes().map(Y=>Y.record)}function m(Y){return!!t.getRecordMatcher(Y)}function g(Y,it){if(it=Ae({},it||l.value),typeof Y=="string"){const ft=gy(r,Y,it.path),z=t.resolve({path:ft.path},it),W=i.createHref(ft.fullPath);return Ae(ft,z,{params:h(z.params),hash:Sm(ft.hash),redirectedFrom:void 0,href:W})}let K;if("path"in Y)K=Ae({},Y,{path:gy(r,Y.path,it.path).path});else{const ft=Ae({},Y.params);for(const z in ft)ft[z]==null&&delete ft[z];K=Ae({},Y,{params:f(Y.params)}),it.params=f(it.params)}const vt=t.resolve(K,it),Pt=Y.hash||"";vt.params=c(h(vt.params));const xt=yX(n,Ae({},Y,{hash:iY(Pt),path:vt.path})),lt=i.createHref(xt);return Ae({fullPath:xt,hash:Pt,query:n===LA?uY(Y.query):Y.query||{}},vt,{redirectedFrom:void 0,href:lt})}function _(Y){return typeof Y=="string"?gy(r,Y,l.value.path):Ae({},Y)}function b(Y,it){if(u!==Y)return Xc(8,{from:it,to:Y})}function w(Y){return k(Y)}function T(Y){return w(Ae(_(Y),{replace:!0}))}function S(Y){const it=Y.matched[Y.matched.length-1];if(it&&it.redirect){const{redirect:K}=it;let vt=typeof K=="function"?K(Y):K;return typeof vt=="string"&&(vt=vt.includes("?")||vt.includes("#")?vt=_(vt):{path:vt},vt.params={}),Ae({query:Y.query,hash:Y.hash,params:"path"in vt?{}:Y.params},vt)}}function k(Y,it){const K=u=g(Y),vt=l.value,Pt=Y.state,xt=Y.force,lt=Y.replace===!0,ft=S(K);if(ft)return k(Ae(_(ft),{state:Pt,force:xt,replace:lt}),it||K);const z=K;z.redirectedFrom=it;let W;return!xt&&bX(n,vt,K)&&(W=Xc(16,{to:z,from:vt}),At(vt,vt,!0,!1)),(W?Promise.resolve(W):E(z,vt)).catch(X=>jo(X)?jo(X,2)?X:et(X):Z(X,z,vt)).then(X=>{if(X){if(jo(X,2))return k(Ae({replace:lt},_(X.to),{state:Pt,force:xt}),it||z)}else X=x(z,vt,!0,lt,Pt);return M(z,vt,X),X})}function C(Y,it){const K=b(Y,it);return K?Promise.reject(K):Promise.resolve()}function E(Y,it){let K;const[vt,Pt,xt]=mY(Y,it);K=my(vt.reverse(),"beforeRouteLeave",Y,it);for(const ft of vt)ft.leaveGuards.forEach(z=>{K.push(cs(z,Y,it))});const lt=C.bind(null,Y,it);return K.push(lt),Iu(K).then(()=>{K=[];for(const ft of o.list())K.push(cs(ft,Y,it));return K.push(lt),Iu(K)}).then(()=>{K=my(Pt,"beforeRouteUpdate",Y,it);for(const ft of Pt)ft.updateGuards.forEach(z=>{K.push(cs(z,Y,it))});return K.push(lt),Iu(K)}).then(()=>{K=[];for(const ft of Y.matched)if(ft.beforeEnter&&!it.matched.includes(ft))if($i(ft.beforeEnter))for(const z of ft.beforeEnter)K.push(cs(z,Y,it));else K.push(cs(ft.beforeEnter,Y,it));return K.push(lt),Iu(K)}).then(()=>(Y.matched.forEach(ft=>ft.enterCallbacks={}),K=my(xt,"beforeRouteEnter",Y,it),K.push(lt),Iu(K))).then(()=>{K=[];for(const ft of a.list())K.push(cs(ft,Y,it));return K.push(lt),Iu(K)}).catch(ft=>jo(ft,8)?ft:Promise.reject(ft))}function M(Y,it,K){for(const vt of s.list())vt(Y,it,K)}function x(Y,it,K,vt,Pt){const xt=b(Y,it);if(xt)return xt;const lt=it===Da,ft=hc?history.state:{};K&&(vt||lt?i.replace(Y.fullPath,Ae({scroll:lt&&ft&&ft.scroll},Pt)):i.push(Y.fullPath,Pt)),l.value=Y,At(Y,it,K,lt),et()}let D;function B(){D||(D=i.listen((Y,it,K)=>{if(!Xt.listening)return;const vt=g(Y),Pt=S(vt);if(Pt){k(Ae(Pt,{replace:!0}),vt).catch(hd);return}u=vt;const xt=l.value;hc&&AX(kA(xt.fullPath,K.delta),z1()),E(vt,xt).catch(lt=>jo(lt,12)?lt:jo(lt,2)?(k(lt.to,vt).then(ft=>{jo(ft,20)&&!K.delta&&K.type===Hd.pop&&i.go(-1,!1)}).catch(hd),Promise.reject()):(K.delta&&i.go(-K.delta,!1),Z(lt,vt,xt))).then(lt=>{lt=lt||x(vt,xt,!1),lt&&(K.delta&&!jo(lt,8)?i.go(-K.delta,!1):K.type===Hd.pop&&jo(lt,20)&&i.go(-1,!1)),M(vt,xt,lt)}).catch(hd)}))}let V=qf(),F=qf(),G;function Z(Y,it,K){et(Y);const vt=F.list();return vt.length?vt.forEach(Pt=>Pt(Y,it,K)):console.error(Y),Promise.reject(Y)}function q(){return G&&l.value!==Da?Promise.resolve():new Promise((Y,it)=>{V.add([Y,it])})}function et(Y){return G||(G=!Y,B(),V.list().forEach(([it,K])=>Y?K(Y):it()),V.reset()),Y}function At(Y,it,K,vt){const{scrollBehavior:Pt}=e;if(!hc||!Pt)return Promise.resolve();const xt=!K&&MX(kA(Y.fullPath,0))||(vt||!K)&&history.state&&history.state.scroll||null;return zd().then(()=>Pt(Y,it,xt)).then(lt=>lt&&CX(lt)).catch(lt=>Z(lt,Y,it))}const Dt=Y=>i.go(Y);let Tt;const kt=new Set,Xt={currentRoute:l,listening:!0,addRoute:d,removeRoute:p,hasRoute:m,getRoutes:v,resolve:g,options:e,push:w,replace:T,go:Dt,back:()=>Dt(-1),forward:()=>Dt(1),beforeEach:o.add,beforeResolve:a.add,afterEach:s.add,onError:F.add,isReady:q,install(Y){const it=this;Y.component("RouterLink",dc),Y.component("RouterView",O7),Y.config.globalProperties.$router=it,Object.defineProperty(Y.config.globalProperties,"$route",{enumerable:!0,get:()=>Pr(l)}),hc&&!Tt&&l.value===Da&&(Tt=!0,w(i.location).catch(Pt=>{}));const K={};for(const Pt in Da)K[Pt]=Ze(()=>l.value[Pt]);Y.provide(bk,it),Y.provide(I7,ff(K)),Y.provide(gS,l);const vt=Y.unmount;kt.add(Y),Y.unmount=function(){kt.delete(Y),kt.size<1&&(u=Da,D&&D(),D=null,l.value=Da,Tt=!1,G=!1),vt()}}};return Xt}function Iu(e){return e.reduce((t,r)=>t.then(()=>r()),Promise.resolve())}function mY(e,t){const r=[],n=[],i=[],o=Math.max(t.matched.length,e.matched.length);for(let a=0;a<o;a++){const s=t.matched[a];s&&(e.matched.find(u=>Hc(u,s))?n.push(s):r.push(s));const l=e.matched[a];l&&(t.matched.find(u=>Hc(u,l))||i.push(l))}return[r,n,i]}function Dn(e){return`data/icons/item/${e}.webp`}function _Y(e){return`<img src="${Dn(e)}" class="iconitem" />`}function wt(e,t,r){if(!e&&e!==0)return"?";const n=parseFloat(e),i=n.toFixed(t);return r?n>=0?"+"+i:i:i=="Infinity"?"\u221E":i}function hs(e,t){return e+(t-e)*Math.random()}function Ei(e){return!isNaN(e)&&isFinite(e)}function yY(e,t){let r=0;if(t<e[r])return-1;let n=e.length-1;if(e[n]<t)return n+1;for(;r<=n;){let i=Math.floor((r+n)/2);if(e[i]<=t&&t<=e[i+1])return i;t<e[i]?n=i-1:r=i+1}return-1}function bY(e,t){let r=0,n=e.length-1,i=null;for(;r<=n;){let o=Math.floor((r+n)/2);t(e[o])?(i=e[o],n=o-1):r=o+1}return i}function wY(e,t,r,n=.5,i=120,o=0){var a=1,s=r-t;return s!=0&&(a=(e-t)/s),`hsla(${a*(i-o)+o}, 100%, 50%, ${n})`}function SY(e,t){return e.length<=t?e:e.slice(0,t-1)+"\u2026"}function TY(e){const t=/\d+/g;return e.match(t).join("-")}function wk(e){if(e>=10**12)return e;if(e>=10**9)return e/10**9+"G";if(e>=10**6)return e/10**6+"M";if(e>=10**3)return e/10**3+"K";if(e>0){if(e<10**-1)return e/10**-3+"m";if(e<10**-4)return e/10**-6+"u";if(e<10**-7)return e/10**-9+"n";if(e<10**-10)return e}return e}function pd(e,t,r){if(r==t.level)return;const n=Math.min(r,40),i=e.workerStatic[t.charkey];let o=t.mspdSheet/(i.mspd/100)-1;for(let a=t.level+1;a<=n;a++)t.level=a,t.wspdSheet+=hs(i.wspd_lo,i.wspd_hi)/1e6,o+=hs(i.mspd_lo,i.mspd_hi)/1e6,t.luckSheet+=hs(i.luck_lo,i.luck_hi)/1e4,a%5==0&&t.skills.push(e.randomSkill(t.skills));t.mspdSheet=i.mspd/100*(1+o)}const Wt=Ap({id:"user",state:()=>({selectedLang:"en",selectedRegion:"RU",selectedTax:.65,customPrices:{},keepItems:{},regionModifiers:{},allowFloating:!1,useFloatingModifiers:{},regionModifiers2:{},lodgingP2W:{},storageP2W:{},storageVP:!1,storagePersonal:{},lodgingTaken:{},activateAncado:!1,houseTaken:{},userWorkers:[],useDefaultWorker:!1,defaultWorker:{tnk:0,charkey:7572,label:"default",level:30,wspdSheet:140,mspdSheet:7.5,luckSheet:6,skills:["1012","1301","1302","1303","1601","1602","1603"],job:null},farmingEnable:!1,farmingBareProfit:0,farmingProfit:0,farmingP2WShare:0,displayWorkerNames:!0,displayWorkerStatsRank:!1,displayWorkerStatsForPz:!0,displayProfitPerCp:!1,grindTakenList:[],userWorkshops:{},defaultUserWorkshop:{industry:"unknown",label:"",manualCycleIncome:0,manualWorkload:300,manualCp:0},mapHideInactive:0}),actions:{migrate(e){if(!e)return;const t=JSON.parse(e);let r=!1;if("counter"in t&&(delete t.counter,r=!0),"connectionOrder"in t&&(delete t.connectionOrder,r=!0),"townSlotsP2W"in t&&(t.lodgingP2W=t.townSlotsP2W,delete t.townSlotsP2W,r=!0),"grindTaken"in t&&(t.grindTakenList=Object.entries(t.grindTaken).filter(([n,i])=>i===!0).map(([n,i])=>Number(n)),delete t.grindTaken,r=!0),"userWorkers"in t&&t.userWorkers.forEach(n=>{n.job==1049&&(n.job=null,r=!0)}),"grindTakenList"in t){const n=new Set([133,134,612,805,806,807,801,961,962,963,1643,1644]),i=t.grindTakenList.filter(o=>!n.has(o));t.grindTakenList.length>i.length&&(t.grindTakenList=i,r=!0)}"userWorkers"in t&&t.userWorkers.forEach(n=>{if(typeof n.job=="number"){const i=n.job;n.job={kind:"plantzone",pzk:i,storage:n.tnk},r=!0}}),"farmingP2W"in t&&(t.farmingP2WShare=t.farmingP2W?80:0,delete t.farmingP2W,r=!0),r&&(localStorage.setItem("user",JSON.stringify(t)),console.log("userStore updated to new version")),this.$patch(t)},removeNodeTaken(e){const t=_t(),r=new Set;return this.workingWorkers.forEach(n=>{t.dijTakenOnlyPath(tnk,n.job).forEach(o=>r.add(o))}),r.has(e)?(console.log("can't remove required node"),!1):(this.nodesTaken[e]=!1,console.log("removed"),!0)},assignWorker(e,t){var r=this.userWorkers.indexOf(e);console.log("fromIndex",r),this.userWorkers.splice(r,1),this.userWorkers.push(e),e.job=t,console.log("assigned",e.label,"to",e.job)},chanceAtModifier(e,t){if(t==0)return 100;if(!_t().ready)return 0;if(this.modTimes[e].hasOwnProperty(t))return this.modTimes[e][t];this.modSorteds[e]===void 0&&console.log("undefined modifiers at rgk",e);const n=yY(this.modSorteds[e],t),i=n+1;if(n===-1)return 100;const o=this.modSorteds[e].length;if(n===o)return 0;const a=this.modSorteds[e][n],s=this.modTimes[e][a];if(n==i)return s;const l=this.modSorteds[e][i],u=this.modTimes[e][l],c=(t-a)/(l-a);return s+c*(u-s)},tierModifiers(e,t,r){const n=[];let i=0;const o=t,a=2*o,s=Math.ceil(o/r),l=Math.ceil(a/r);for(let u=s;u<=l;u++){const c=Math.max(2-r*u/o,0),f=Math.floor(o*(2-c)/100)*100,h=this.chanceAtModifier(e,c*100);h!=0&&(n.push({wld:f,mod:c,tier:u,time:h-i}),i=h)}return n},calcWalkMinutes(e,t){return 2*e/t/60},calcCyclesDaily(e,t,r,n,i){let o=0;const a=this.calcWalkMinutes(n,i);if(this.allowFloating&&this.useFloatingModifiers[t])for(const s of this.tierModifiers(t,e,r)){const l=Math.ceil(s.wld/r),u=10*l+a;o+=24*60*s.time/100/u}else{const s=e*(2-this.productivity(t)),l=Math.ceil(s/r),u=10*l+a;o=24*60/u}return o},modifyGrindTakens(e,t){e.target.checked?this.grindTakenSet.add(t):this.grindTakenSet.delete(t),this.grindTakenList=[...this.grindTakenSet]},workerLabel(e){let t=this.displayWorkerNames?e.label:"";const r=_t();return r&&r.ready&&(t+=r.speciesIcons[r.workerStatic[e.charkey].species]),t+=e.level,t}},getters:{grindTakenSet(e){const t=new Set(e.grindTakenList);return console.log("grindTakenSet getter",t),t},marketUrl:e=>`https://apiv2.bdolytics.com/${e.selectedLang}/${e.selectedRegion}/market/central-market-data`,codexNodeUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/node/`,itemUrl:e=>`https://bdolytics.com/${e.selectedLang}/${e.selectedRegion}/db/item/`,floatingRegionGroups(){const e=_t();return Object.keys(e.regionGroups).filter(r=>this.useFloatingModifiers.hasOwnProperty(r)&&this.useFloatingModifiers[r])},modHists(){const e={},t=_t();for(const r of Object.keys(t.regionGroups))this.regionModifiers.hasOwnProperty(r)?e[r]=[this.regionModifiers[r]]:e[r]=[0];for(const r of this.floatingRegionGroups){this.regionModifiers2.hasOwnProperty(r)||(this.regionModifiers2[r]=[0]);const n=this.regionModifiers2[r].map(Number).filter(i=>!isNaN(i)).sort((i,o)=>o-i);e[r]=n}return e},medianModifiers(){const e={};for(const[t,r]of Object.entries(this.modHists)){let n=0;const i=r.length;if(i%2)n=r[(i-1)/2];else{const o=r[(i-1-1)/2],a=r[(i-1+1)/2];n=(o+a)/2}e[t]=n}return e},medianWorkloads(){const e={},t=_t();for(const[r,n]of Object.entries(t.plantzones)){const i=n.regiongroup;e[r]=n.workload*(2-this.medianModifiers[i]/100)}return e},modTimes(){const e=n=>n.reduce((i,o)=>i+o,0)/n.length,t={},r=_t();for(const n of Object.keys(r.regionGroups)){const i=this.modHists[n].length,o={},a=this.modHists[n][0],s=this.modHists[n][i-1];if(a==s)o[a]=(i-1)/2;else{const u={};for(let c=0;c<i;c++){const f=this.modHists[n][c];if(f==a){o[f]=100*c/(i-1);continue}if(f==s){o[f]=100*c/(i-1);break}f in u?u[f].push(c):u[f]=[c]}for(const[c,f]of Object.entries(u)){const h=e(f);o[c]=100*h/(i-1)}}t[n]=o}return t},modSorteds(){const e={},t=_t();for(const r of Object.keys(t.regionGroups)){const n=Object.keys(this.modTimes[r]).map(Number).sort((i,o)=>i-o);e[r]=n}return e},productivity:e=>t=>(t in e.regionModifiers?e.regionModifiers[t]:0)/100,nodeCostInfinityUntaken:e=>t=>e.autotakenNodes.has(t)?0:1/0,haveLodging(e){const t=_t();let r={slots:{perTown:{},total:0},cp:{perTown:{},total:0}};for(const[n,i]of Object.entries(t.lodgingPerTown)){if(r.slots.perTown[n]=1,r.cp.perTown[n]=0,n==619&&!e.activateAncado){r.slots.perTown[n]=0;continue}i.houses.forEach(o=>{e.lodgingTaken[o.key]&&(r.slots.perTown[n]+=o.lodgingSpaces,r.cp.perTown[n]+=o.CP)}),e.lodgingP2W[n]&&(r.slots.perTown[n]+=e.lodgingP2W[n]),r.slots.total+=r.slots.perTown[n],r.cp.total+=r.cp.perTown[n]}return console.log("haveLodging getter"),r},townFreeLodgingCount:e=>t=>{const r=_t(),n=e.haveLodging.slots.perTown[t],i=e.userWorkers.filter(o=>r.tnk2tk(o.tnk)==t).length;return n-i},countWorkers(e){return e.userWorkers.length},workingWorkers(e){return e.userWorkers.filter(t=>t.job&&t.job!=null)},townWorkers:e=>t=>{const r=_t();return e.userWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},townWorkingWorkers:e=>t=>{const r=_t();return e.workingWorkers.filter(i=>r.tnk2tk(i.tnk)==t)},getFreeWorkers:e=>t=>{const r=_t();return e.userWorkers.filter(n=>r.tnk2tk(n.tnk)==t&&!n.job)},workerStatsForDisplay:e=>t=>{if(e.displayWorkerStatsRank){const n=_t().workerStatRank(t);return{wspd:n.wspd_rank*100,mspd:n.mspd_rank*100,luck:n.luck_rank*100}}else return e.displayWorkerStatsForPz?_t().workerStatsOnCurrentJob(t):{wspd:t.wspdSheet,mspd:t.mspdSheet,luck:t.luckSheet}},workersMinMaxStats(e){console.log("workersMinMaxStats");const t={wspd:{lo:142,hi:143},mspd:{lo:7.4,hi:7.6},luck:{lo:10,hi:11}};return e.userWorkers.forEach(r=>{if(r.charkey==7572){const n=e.workerStatsForDisplay(r);t.wspd.lo=Math.min(n.wspd,t.wspd.lo),t.mspd.lo=Math.min(n.mspd,t.mspd.lo),t.luck.lo=Math.min(n.luck,t.luck.lo),t.wspd.hi=Math.max(n.wspd,t.wspd.hi),t.mspd.hi=Math.max(n.mspd,t.mspd.hi),t.luck.hi=Math.max(n.luck,t.luck.hi)}}),t},grindTakenDesc(e){let t="";const r=_t();return r.ready&&e.grindTakenList.forEach(n=>{t+=r.uloc.node[n]+`
`}),t},autotakenGrindNodes(e){const t=new Set,r=_t();return r.ready&&e.grindTakenList.forEach(n=>{const o=r.dijkstraNearestTowns(Number(n),4,t,!0).sort((u,c)=>u[1]-c[1]),[a,s,l]=o[0];l.forEach(u=>t.add(u))}),t},pzWsJobs(e){const t={pz:{},ws:[],map:[],nodeUsedbyJob:{}},r=_t();if(!r.ready)return t;const n=[];this.workingWorkers.forEach(o=>{const a={source:o.tnk};if(r.jobIsPz(o.job)){const s=o.job.pzk;a.target=s}else if(r.jobIsWorkshop(o.job)){const s=o.job.hk,l=r.houseInfo[s].affTown,u=r.tk2tnk(l);a.target=u}else return;n.push(a)});const i=r.route(e.autotakenGrindNodes,n).routeInfos;return this.workingWorkers.forEach(o=>{if(r.jobIsPz(o.job)){const a=o.job.pzk;if(!a)return;const s=r.workerStatsOnPlantzone(o),l=r.profitPzTownStats(a,o.tnk,s.wspd,s.mspd,s.luck,r.isGiant(o.charkey)),u=i[o.tnk][a],c={pzk:a,worker:o,profit:l,...u};t.pz[a]=c,t.map.push(c)}else if(r.jobIsWorkshop(o.job)){const a=o.job.hk,s=this.userWorkshops[a],l=r.houseInfo[a].affTown,u=r.tk2tnk(l),c=r.profitWorkshopWorker(a,s,o),f=i[o.tnk][u],h={hk:a,worker:o,profit:c,...f};t.ws.push(h),t.map.push(h)}}),t},pzJobs(e){return e.pzWsJobs.pz},wsJobs(e){return e.pzWsJobs.ws},mapJobs(e){return e.pzWsJobs.map},currentNodesJobs(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n].push(r):t[n]=[r]);return t},currentNodesCashflow(e){const t={};for(const r of e.mapJobs)r.usedPath&&r.usedPath.forEach(n=>n in t?t[n]+=r.profit.priceDaily:t[n]=r.profit.priceDaily);return t},pzjobsSharedConnectionCP(e){const t={},r=_t();for(const[n,i]of Object.entries(e.pzJobs))t[n]={value:0,tooltip:""},i.usedPath&&i.usedPath.forEach(function(o){if(e.autotakenGrindNodes.has(o))return t;const a=i.profit.priceDaily/e.currentNodesCashflow[o],s=r.nodes[o].CP*a;t[n].value+=s,t[n].tooltip+=`${wt(s,3)} ${r.nodeName(o)}
`});return t},pzjobsSharedEfficiency(e){const t={};for(const[r,n]of Object.entries(e.pzJobs))n.usedPath&&(t[r]=n.profit.priceDaily/e.pzjobsSharedConnectionCP[r]);return t},pzjobsSortedSharedEfficiency(e){return Object.entries(e.pzjobsSharedEfficiency).sort(([,t],[,r])=>r-t)},farmingProfitPerWorker(e){return(e.farmingProfit-e.farmingBareProfit)/10},newWorkerName:e=>t=>{const n=_t().uloc.town[t].replace("\u0413\u043E\u0440\u043E\u0434 ","").replace("\u0414\u0435\u0440\u0435\u0432\u043D\u044F ","").substring(0,3),i=e.townWorkers(t).length+1;return n+i},workerBringsItemkeys:e=>t=>{const r=_t();if(r.jobIsIdle(t.job))return[];if(r.jobIsPz(t.job))return r.plantzones[t.job].itemkeys;if(r.jobIsFarming(t.job))return[];if(r.jobIsCustom(t.job))return[];if(r.jobIsWorkshop(t.job))return[]},townsStoreItemkeys(e){const t={},r=_t();if(!r.ready)return t;r.townsWithRedirectableStorage.forEach(n=>t[r.tnk2tk(n)]=new Set([]));for(const[n,i]of Object.entries(e.workingWorkers))if(r.jobIsPz(i.job)){const o=r.tnk2tk(i.job.storage);t[o]=new Set([...t[o],...r.plantzones[i.job.pzk].itemkeys])}return t},baseStorage(e){let t=16;return e.selectedRegion=="RU"&&(t=8),e.selectedRegion=="SEA"&&(t=8),e.selectedRegion=="MENA"&&(t=8),t+(e.storageVP?16:0)},townInfra:e=>(t,r,n)=>{const i=_t();t in e.lodgingP2W||(e.lodgingP2W[t]=0),t in e.storageP2W||(e.storageP2W[t]=0),t in e.storagePersonal||(e.storagePersonal[t]=0);const o=r-e.lodgingP2W[t]-1,a=n+(n>0?1:0)+e.storagePersonal[t]-e.storageP2W[t]-e.baseStorage;return i.lsLookup(t,o,a)},townInfraAddCost:e=>(t,r,n,i)=>{if(i&&t!=i){const o=e.townsInfra[i],a=new Set([...e.townsStoreItemkeys[i],...n]).size,s=e.townInfra(i,e.townWorkingWorkers(i).length,a),l=e.townsInfra[t],u=e.townsStoreItemkeys[t].size,c=e.townInfra(t,e.townWorkingWorkers(t).length+r,u),f=_t(),h=f.uloc.town[t]+` housing:
old: ${Math.max(0,l.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,l.wantStorage)}\u{1F4E6} = ${wt(l.cost)} CP
new: ${Math.max(0,c.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,c.wantStorage)}\u{1F4E6} = ${wt(c.cost)} CP
`+f.uloc.town[i]+` housing:
old: ${Math.max(0,o.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,o.wantStorage)}\u{1F4E6} = ${wt(o.cost)} CP
new: ${Math.max(0,s.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,s.wantStorage)}\u{1F4E6} = ${wt(s.cost)} CP`;return{cost:s.cost-o.cost+c.cost-l.cost,tooltip:h}}else{const o=t,a=e.townsInfra[o],s=new Set([...e.townsStoreItemkeys[o],...n]).size,l=e.townInfra(o,e.townWorkingWorkers(o).length+r,s),c=_t().uloc.town[o]+` housing:
old: ${Math.max(0,a.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,a.wantStorage)}\u{1F4E6} = ${wt(a.cost)} CP
new: ${Math.max(0,l.wantLodging)}\u{1F6CF}\uFE0F + ${Math.max(0,l.wantStorage)}\u{1F4E6} = ${wt(l.cost)} CP`;return{cost:l.cost-a.cost,tooltip:c}}},townsInfra(e){const t={},r=_t();return r.ready&&r.townsWithRedirectableStorage.forEach(n=>{const i=r.tnk2tk(n);t[i]=this.townInfra(i,e.townWorkingWorkers(i).length,e.townsStoreItemkeys[i]?e.townsStoreItemkeys[i].size:0)}),t},lodgage(e){return Object.values(this.townsInfra).reduce((t,r)=>t+r.cost,0)},townsTopIncomeWorkers(e){const t={},r=_t();if(!r.ready)return t;r.townsWithLodging.forEach(n=>t[r.tnk2tk(n)]=[]);for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk);t[o].push(i)}for(const[n,i]of Object.entries(t))i.sort((o,a)=>e.workerIncome(a)-e.workerIncome(o));return console.log("townsTopIncomeWorkers",t),t},townsSteppedInfra(e){const t=Date.now(),r={},n=_t();if(!n.ready)return r;const i=[];n.townsWithRedirectableStorage.forEach(l=>{const u=n.tnk2tk(l);i[u]=[],r[u]=[]});for(const[l,u]of Object.entries(e.workingWorkers))i[n.tnk2tk(u.tnk)].push(u);for(const[l,u]of Object.entries(i)){let c=0,f=new Set([]),h=0;const d=e.townInfra(l,c,f.size),p=d.success?d.cost:NaN;for(;u.length>0;){let v=-1/0,m=null;var o,a,s;for(const g of u){const _=e.workerIncome(g),b=e.workerBringsItemkeys(g),w=new Set([...f,...b]),T=e.townInfra(l,c+1,w.size);if(!T.success)throw Error(`townsSteppedInfra: failed to provide infrastructure for ${l}, ${c+1}, ${w.size}`);const S=(h+_)/(T.cost-p);(S>v||!(S<v)&&_>a)&&(v=S,m=g,o=w,a=_,s=T.cost)}if(!m)throw Error("townsSteppedInfra: efficiency -Inf");c+=1,f=o,h+=a,r[l].push({w:m,curL:c,curS:f.size,addI:a,curI:h,cost:s,eff:v}),u.splice(u.indexOf(m),1)}for(let v=0;v<r[l].length;v++){const m=r[l][v];let g=v-1;for(;g>=0&&r[l][g].cost==m.cost;)g--;const _=g>=0?r[l][g]:{curI:0,cost:p};m.delta_eff=(m.curI-_.curI)/(m.cost-_.cost)}}return console.log("townsSteppedInfra took",Date.now()-t,"ms"),r},workerIncome:e=>t=>{const r=_t();if(r.jobIsIdle(t.job))return 0;if(r.jobIsPz(t.job)){if(e.pzJobs[t.job.pzk]==null)throw Error(`pzjob ${t.job.pzk} is undefined`);return e.pzJobs[t.job.pzk].profit.priceDaily}if(r.jobIsFarming(t.job))return e.farmingProfitPerWorker;if(r.jobIsCustom(t.job))return t.job[1];if(r.jobIsWorkshop(t.job)){const n=t.job.hk;n in e.userWorkshops||(e.userWorkshops[n]={...e.defaultUserWorkshop});const i=e.userWorkshops[n];return r.profitWorkshopWorker(n,i,t).priceDaily}},workerSharedConnectionCP:e=>t=>{let r;const n=_t();if(n.jobIsPz(t.job)&&(r=e.pzjobsSharedConnectionCP[t.job.pzk].value),n.jobIsFarming(t.job)&&(r=0),n.jobIsCustom(t.job)&&(r=t.job[2]),n.jobIsWorkshop(t.job)){const i=e.workersWorkshop.filter(o=>o.job.hk==t.job.hk).length;r=e.userWorkshops[t.job.hk].manualCp/i}return r},workerSharedLodgageCP:e=>t=>{const r={value:void 0,tooltip:"?"},n=_t();if(!n.ready)return r;const i=e.workerIncome(t),o=n.tnk2tk(t.tnk),a=e.townsInfra[o].cost,s=e.userWorkers.filter(u=>n.tnk2tk(u.tnk)==o).length,l=e.townsTotalIncome[o].income;return e.townsTotalIncome[o].hasNegativeJob||l==0?(r.value=a/s,r.tooltip=`= total lodgage costs of hometown shared equally between all active jobs from that town:
${a}CP / ${s}`):s==1?(r.value=a,r.tooltip=`= all costs of ${n.nodeName(t.tnk)} lodgage`):(r.value=a*(i/l),r.tooltip=`= total lodgage costs of hometown shared proportionally between all active jobs from that town:
${a}CP * (${wt(i,3)} / ${wt(l,3)})`),r},workerIncomePerCp:e=>t=>{const r=e.workerIncome(t),n=e.workerSharedConnectionCP(t),i=e.workerSharedLodgageCP(t).value,o=r/(n+i);return isNaN(o)&&console.log(`workerIncomePerCp: ${wt(r,2)} / (${wt(n,2)} + ${wt(i,2)}) = ${wt(o,2)} for worker ${t.label}`),o},workersSortedByIncomePerCp(e){const t=[];return e.workingWorkers.forEach(r=>{t.push({w:r,i:e.workerIncome(r),ipc:e.workerIncomePerCp(r)})}),t.sort((r,n)=>isNaN(r.ipc)?-1:isNaN(n.ipc)||!isFinite(r.ipc)?1:isFinite(n.ipc)?r.ipc-n.ipc:-1),t},townsTotalIncome(e){const t={},r=_t();if(!r.ready)return t;r.townsWithLodging.forEach(n=>{const i=r.tnk2tk(n);t[i]={income:0,mapCp:0,hasNegativeJob:!1}});for(const[n,i]of Object.entries(e.workingWorkers)){const o=r.tnk2tk(i.tnk),a=e.workerIncome(i);t[o].income+=a,t[o].mapCp+=e.workerSharedConnectionCP(i),a<0&&(t[o].hasNegativeJob=!0)}for(const[n,i]of Object.entries(t)){const o=e.townsInfra[n].cost;i.eff=i.income/(i.mapCp+o),i.income==0&&i.mapCp+o==0&&(i.eff=0)}return t},workedPlantzones(e){const t=Object.keys(e.pzJobs);return new Set(t)},autotakenGrindNodesCP(e){const t=_t(),r=[...e.autotakenGrindNodes].reduce((n,i)=>n+t.nodes[i].CP,0);return console.log("autotakenGrindNodesCP",r),r},autotakenNodes(e){const t=new Set([...e.autotakenGrindNodes]);for(const n of e.mapJobs)n.usedPath&&n.usedPath.forEach(i=>t.add(i));const r=_t();if(r.ready&&e.activateAncado){const i=r.dijkstraNearestTowns(1343,4,t,!0).sort((l,u)=>l[1]-u[1]),[o,a,s]=i[0];s.forEach(l=>t.add(l))}return console.log("autotakenNodes getter",t),t},autotakenNodesCP(e){const t=_t();return[...e.autotakenNodes].reduce((n,i)=>n+t.nodes[i].CP,0)-e.autotakenGrindNodesCP},pzJobsTotalDailyProfit(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=n.profit.priceDaily;return t},pzJobsTotalLodgingCost(e){let t=0;for(const[r,n]of Object.entries(e.pzJobs))t+=e.workerSharedLodgageCP(n.worker).value;return t},pzJobsDailyProfitPerCp(e){return this.pzJobsTotalDailyProfit/(e.autotakenNodesCP+e.pzJobsTotalLodgingCost)},workersFarming(e){return e.userWorkers.filter(t=>t.job=="farming")},workersFarmingCount(e){return e.workersFarming.length},farmingCP(e){return e.farmingEnable?80-e.farmingP2WShare:0},farmingTotalProfit(e){return e.farmingEnable?e.farmingBareProfit+(e.farmingProfit-e.farmingBareProfit)/10*e.workersFarmingCount:0},farmingJobsTotalLodgingCost(e){let t=0;return e.workersFarming.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},farmingJobsDailyProfitPerCp(e){return e.farmingTotalProfit/(80+e.farmingJobsTotalLodgingCost)},workersWorkshop(e){const t=_t();return e.userWorkers.filter(r=>r.job&&t.jobIsWorkshop(r.job))},workersWorkshopCount(e){return e.workersWorkshop.length},workshopTotalProfit(e){let t=0;return e.workersWorkshop.forEach(r=>t+=e.workerIncome(r)),t},occupiedWorkshops(e){let t=new Set;return e.workersWorkshop.forEach(r=>t.add(r.job.hk)),console.log("occupiedWorkshops",t),t},workshopTotalCP(e){let t=0;return e.occupiedWorkshops.forEach(r=>t+=e.userWorkshops[r].manualCp),t},workshopJobsTotalLodgingCost(e){let t=0;return e.workersWorkshop.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},workshopJobsDailyProfitPerCp(e){return e.workshopTotalProfit/(e.workshopTotalCP+e.workshopJobsTotalLodgingCost)},workersCustom(e){const t=_t();return e.userWorkers.filter(r=>r.job&&t.jobIsCustom(r.job))},workersCustomCount(e){return e.workersCustom.length},customTotalProfit(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[1]),t},customTotalCP(e){let t=0;return e.workersCustom.forEach(r=>t+=r.job[2]),t},customJobsTotalLodgingCost(e){let t=0;return e.workersCustom.forEach(r=>{t+=e.workerSharedLodgageCP(r).value}),t},customJobsDailyProfitPerCp(e){return e.customTotalProfit/(e.customTotalCP+e.customJobsTotalLodgingCost)},totalCP(e){return e.autotakenNodesCP+e.farmingCP+e.lodgage+e.workshopTotalCP+e.customTotalCP},workersIdleCount(e){return e.countWorkers-e.workedPlantzones.size-e.workersFarmingCount-e.workersWorkshopCount-e.workersCustomCount},allJobsTotalDailyProfit(e){return e.pzJobsTotalDailyProfit+e.farmingTotalProfit+e.workshopTotalProfit+e.customTotalProfit},allJobsDailyProfitPerCp(e){return this.allJobsTotalDailyProfit/e.totalCP},workerPzStats(e){const t=_t(),r=[];return e.userWorkers.forEach(n=>{r.push(t.workerStatsOnPlantzone(n))}),console.log("workerPzStats"),r},allJobsProfitsBefore(e){const t=e.allJobsTotalDailyProfit,r=e.totalCP,n=e.allJobsDailyProfitPerCp;return{daily:t,cp:r,dailyPerCp:n}},jobEfficiencyDelta:e=>(t,r)=>{const n=e.allJobsProfitsBefore;return(n.daily+t)/(n.cp+r)-n.dailyPerCp},jobsTally(e){const t={},r=_t();if(!r.ready)return t;for(const[n,i]of Object.entries(e.pzJobs)){const o=r.plantzones[n],a=r.workerStatsOnPlantzone(i.worker).luck;if(o.lucky)for(const[l,u]of Object.entries(o.lucky))l in t||(t[l]=0),t[l]+=a/100*u*i.profit.cyclesDaily;if(r.isGiant(i.worker.charkey))for(const[l,u]of Object.entries(o.unlucky_gi))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily;else for(const[l,u]of Object.entries(o.unlucky))l in t||(t[l]=0),t[l]+=u*i.profit.cyclesDaily}return t},cyclesTally(e){let t={pz:0,workshop:0,chicken:0};const r=_t();return r.ready&&(this.workingWorkers.forEach(n=>{if(!!n){if(r.jobIsPz(n.job)){const i=e.pzJobs[n.job.pzk];t.pz+=i.profit.cyclesDaily}if(r.jobIsWorkshop(n.job)){const i=n.job.hk;i in e.userWorkshops||(e.userWorkshops[i]={...e.defaultUserWorkshop});const o=e.userWorkshops[i];t.workshop+=r.cyclesWorkshopWorker(i,o,n).cyclesDaily}}}),t.chicken=(t.pz+t.workshop)/3),t},lodgingCostsPerTownPerJobtype(e){const t={};e.userWorkers.filter(r=>gameStore.tnk2tk(r.tnk)==tk);for(const[r,n]of Object.entries(e.haveLodging.slots.perTown))e.haveLodging.cp.perTown[r],e.townWorkers(r);return t}}}),ai=Ap({id:"market",state:()=>({ready:!1,apiPrices:[],apiAlive:!1,calculatedPrices:{},apiDatetime:0}),actions:{async fetchData(){const e=Date.now(),t=Wt(),n=`https://apiv2.bdolytics.com/${t.selectedLang=="jp"?"ja":t.selectedLang}/${t.selectedRegion}/market/central-market-data`,i=await(await fetch(n)).json(),o=_t(),a=new Set(o.itemKeys);console.log("uset",a);const s={};i.data.forEach(l=>{a.has(l.item_id)&&(s[l.item_id]=l.price)});for(const l of Object.keys(o.vendorPrices))t.keepItems[l]=!0;this.calculatedPrices=await(await fetch("data/manual/calculated_prices.json")).json(),4001 in s&&(this.apiPrices=s,this.apiDatetime=Date.now(),this.apiAlive=!0,this.ready=!0,localStorage.setItem("market",JSON.stringify(this.$state))),console.log("fetchMarket took",Date.now()-e,"ms")},itemPriceUrl(e){return e in this.apiPrices?`https://bdolytics.com/market/central-market/item/${e}`:Wt().itemUrl+e},priceBunch(e){if(e===null||typeof e>"u")return null;let t=0;for(const[r,n]of Object.entries(e))t+=this.prices[r]*n;return t},pricePzd(e,t){const r=this.priceBunch(e.unlucky);if(e.lucky){const n=this.priceBunch(e.lucky);return t/100*n+(1-t/100)*r}return r},priceLerp(e,t,r){return e===null?t:r/100*e+(1-r/100)*t}},getters:{prices(){const e=Date.now(),t=Wt(),r=_t();let n={};for(const[i,o]of Object.entries(this.apiPrices))n[i]=o;for(const[i,o]of Object.entries(r.vendorPrices))n[i]=o;for(const i of Object.keys(n))i in t.customPrices&&t.customPrices[i]!==""&&(n[i]=t.customPrices[i]),!(i in t.keepItems&&t.keepItems[i])&&(i in r.vendorPrices||(n[i]*=t.selectedTax));for(const[i,o]of Object.entries(this.calculatedPrices))if(!(i in t.customPrices&&t.customPrices[i]!=="")){n[i]=0;for(const[a,s]of Object.entries(o))n[i]+=n[a]*s}return console.log("prices getter took",Date.now()-e,"ms"),n}}});var mS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function kY(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var R7={exports:{}},D7={exports:{}};(function(e,t){(function(){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,m;i=Math.floor,f=Math.min,n=function(g,_){return g<_?-1:g>_?1:0},c=function(g,_,b,w,T){var S;if(b==null&&(b=0),T==null&&(T=n),b<0)throw new Error("lo must be non-negative");for(w==null&&(w=g.length);b<w;)S=i((b+w)/2),T(_,g[S])<0?w=S:b=S+1;return[].splice.apply(g,[b,b-b].concat(_)),_},s=function(g,_,b){return b==null&&(b=n),g.push(_),v(g,0,g.length-1,b)},a=function(g,_){var b,w;return _==null&&(_=n),b=g.pop(),g.length?(w=g[0],g[0]=b,m(g,0,_)):w=b,w},u=function(g,_,b){var w;return b==null&&(b=n),w=g[0],g[0]=_,m(g,0,b),w},l=function(g,_,b){var w;return b==null&&(b=n),g.length&&b(g[0],_)<0&&(w=[g[0],_],_=w[0],g[0]=w[1],m(g,0,b)),_},o=function(g,_){var b,w,T,S,k,C;for(_==null&&(_=n),S=function(){C=[];for(var E=0,M=i(g.length/2);0<=M?E<M:E>M;0<=M?E++:E--)C.push(E);return C}.apply(this).reverse(),k=[],w=0,T=S.length;w<T;w++)b=S[w],k.push(m(g,b,_));return k},p=function(g,_,b){var w;if(b==null&&(b=n),w=g.indexOf(_),w!==-1)return v(g,0,w,b),m(g,w,b)},h=function(g,_,b){var w,T,S,k,C;if(b==null&&(b=n),T=g.slice(0,_),!T.length)return T;for(o(T,b),C=g.slice(_),S=0,k=C.length;S<k;S++)w=C[S],l(T,w,b);return T.sort(b).reverse()},d=function(g,_,b){var w,T,S,k,C,E,M,x,D;if(b==null&&(b=n),_*10<=g.length){if(S=g.slice(0,_).sort(b),!S.length)return S;for(T=S[S.length-1],M=g.slice(_),k=0,E=M.length;k<E;k++)w=M[k],b(w,T)<0&&(c(S,w,0,null,b),S.pop(),T=S[S.length-1]);return S}for(o(g,b),D=[],C=0,x=f(_,g.length);0<=x?C<x:C>x;0<=x?++C:--C)D.push(a(g,b));return D},v=function(g,_,b,w){var T,S,k;for(w==null&&(w=n),T=g[b];b>_;){if(k=b-1>>1,S=g[k],w(T,S)<0){g[b]=S,b=k;continue}break}return g[b]=T},m=function(g,_,b){var w,T,S,k,C;for(b==null&&(b=n),T=g.length,C=_,S=g[_],w=2*_+1;w<T;)k=w+1,k<T&&!(b(g[w],g[k])<0)&&(w=k),g[_]=g[w],_=w,w=2*_+1;return g[_]=S,v(g,C,_,b)},r=function(){g.push=s,g.pop=a,g.replace=u,g.pushpop=l,g.heapify=o,g.updateItem=p,g.nlargest=h,g.nsmallest=d;function g(_){this.cmp=_!=null?_:n,this.nodes=[]}return g.prototype.push=function(_){return s(this.nodes,_,this.cmp)},g.prototype.pop=function(){return a(this.nodes,this.cmp)},g.prototype.peek=function(){return this.nodes[0]},g.prototype.contains=function(_){return this.nodes.indexOf(_)!==-1},g.prototype.replace=function(_){return u(this.nodes,_,this.cmp)},g.prototype.pushpop=function(_){return l(this.nodes,_,this.cmp)},g.prototype.heapify=function(){return o(this.nodes,this.cmp)},g.prototype.updateItem=function(_){return p(this.nodes,_,this.cmp)},g.prototype.clear=function(){return this.nodes=[]},g.prototype.empty=function(){return this.nodes.length===0},g.prototype.size=function(){return this.nodes.length},g.prototype.clone=function(){var _;return _=new g,_.nodes=this.nodes.slice(0),_},g.prototype.toArray=function(){return this.nodes.slice(0)},g.prototype.insert=g.prototype.push,g.prototype.top=g.prototype.peek,g.prototype.front=g.prototype.peek,g.prototype.has=g.prototype.contains,g.prototype.copy=g.prototype.clone,g}(),function(g,_){return e.exports=_()}(this,function(){return r})}).call(mS)})(D7);(function(e){e.exports=D7.exports})(R7);const Ng=kY(R7.exports),_t=Ap({id:"game",state:()=>({ready:!1,plantzoneDrops:{},pzdSet:null,plantzoneStatic:{},itemKeys:[],nodes:{},distPerTown:{},distToTown:{},lodgingPerTown:{},houseInfo:{},townsWithLodging:[],townsWithRentableStorage:[],townsWithRedirectableStorage:[],townNames:{},regionGroups:{},loc:{},links:{},icons:{},workerStatic:{},skillData:{},vendorPrices:{}}),actions:{availableSkillPool(e,t){const r=new Set(e);return t&&r.delete(t),this.skillKeys.filter(i=>!r.has(i))},randomSkill(e){const t=this.availableSkillPool(e);return t[Math.floor(Math.random()*t.length)]},wspdBonusOnPlantzone(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&("wspd"in n&&(t+=n.wspd),"wspd_farm"in n&&(t+=n.wspd_farm))}),t},wspdBonus(e,t){let r=0;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&("wspd"in i&&(r+=i.wspd),"wspd_"+t in i&&(r+=i["wspd_"+t]),"wspd_refine"in i&&t.startsWith("pack_")&&(r+=i.wspd_refine))}),r},mspdBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"mspd"in n&&(t+=n.mspd)}),t},luckBonus(e){let t=0;return this.ready&&e.skills.forEach(r=>{const n=this.skillData[r];n!==void 0&&"luck"in n&&(t+=n.luck)}),t},workerStatsOnPlantzone(e){return this.ready?{wspd:e.wspdSheet+this.wspdBonusOnPlantzone(e),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnIndustry(e,t){return this.ready?{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}:{wspd:0,mspd:0,luck:0}},workerStatsOnCurrentJob(e){var t="farm";if(this.jobIsWorkshop(e.job)){const r=Wt(),n=e.job.hk;n in r.userWorkshops||(r.userWorkshops[n]={...r.defaultUserWorkshop}),t=r.userWorkshops[n].industry}return{wspd:e.wspdSheet+this.wspdBonus(e,t),mspd:this.workerStatic[e.charkey].mspd/100*(e.mspdSheet/(this.workerStatic[e.charkey].mspd/100)+this.mspdBonus(e)/100),luck:e.luckSheet+this.luckBonus(e)}},workerStatRank(e){const t=e.level-1,r=this.workerStatic[e.charkey],n=r.wspd_lo*t,o=r.wspd_hi*t-n,s=(e.wspdSheet*1e6-r.wspd-n)/o||0,l=r.mspd_lo*t,u=r.mspd_hi*t,f=((e.mspdSheet/(r.mspd/100)-1)*1e6-l)/(u-l)||0,h=r.luck_lo*t,d=r.luck_hi*t,v=(e.luckSheet*1e4-r.luck-h)/(d-h)||0;return{wspd_rank:s,mspd_rank:f,luck_rank:v}},houseLodging(e){var n;const t=(n=this.houseInfo[e].CraftList[1])!=null?n:0;return{0:0,1:1,2:2,3:4,4:6,5:8}[t]},houseStorage(e){var n;const t=(n=this.houseInfo[e].CraftList[2])!=null?n:0;return{0:0,1:3,2:5,3:8,4:12,5:16}[t]},houseCost(e){var r;return(r=this.houseInfo[e]&&this.houseInfo[e].CP)!=null?r:NaN},async fetchData(){const e=Date.now();this.plantzoneDrops=await(await fetch("data/manual/plantzone_drops.json")).json(),this.pzdSet=new Set(Object.keys(this.plantzoneDrops).map(n=>+n)),this.plantzoneStatic=await(await fetch("data/plantzone.json")).json(),this.itemInfo=await(await fetch("data/manual/item_info.json")).json(),this.itemKeys=await(await fetch("data/manual/plantzone_uniques.json")).json(),this.nodes=await(await fetch("data/exploration.json")).json(),this.tk2pzk=await(await fetch("data/distances_tk2pzk.json")).json(),this.pzk2tk=await(await fetch("data/distances_pzk2tk.json")).json(),this.tk2hk=await(await fetch("data/distances_tk2hk.json")).json(),this._tk2tnk={5:1,32:301,52:302,77:601,88:61,107:602,120:604,126:608,182:1002,202:1101,221:1141,229:1301,601:1314,605:1319,619:1343,693:1380,706:1604,735:1623,873:1649,955:1691,1124:1750,1210:1781,1219:1785,1246:1795,1e3:1727,181:1001,218:1834,1375:1843,1382:1850,1424:1857,1444:1858,1420:1853};const t={};for(const[n,i]of Object.entries(this._tk2tnk))t[i]=Number(n);this._tnk2tk=t,this.townsWithLodging=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1750,1781,1785,1795,1853,1857,1858],this.lodgingPerTown=await(await fetch("data/lodging_per_town.json")).json(),this.townsWithRentableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1843,1853,1857],this.townsWithRedirectableStorage=[1,61,301,302,601,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1604,1623,1649,1691,1727,1750,1781,1785,1795,1834,1843,1850,1853,1857,1858],this.houseInfo=await(await fetch("data/houseinfo.json")).json(),this.vendorPrices=await(await fetch("data/manual/vendor_prices.json")).json(),this.industries={unk:"unknown",jewelry:"jewelry",mass:"mass production",weap:"weapon",tool:"tool",furn:"furniture",costume:"costume",refine:"refine",siege:"siege",mount:"mount",exclus:"exclusive",pack_produce:"pack_produce",pack_herb:"pack_herb",pack_mushr:"pack_mushr",pack_fish:"pack_fish",pack_timber:"pack_timber",pack_ore:"pack_ore"};const r={};for(const[n,i]of Object.entries(this.plantzoneStatic))if(n in this.plantzoneDrops){const o=i.regiongroup;o in r?r[o].push(n):r[o]=[n]}this.regionGroups=r,this.skillData=await(await fetch("data/manual/skills.json")).json(),this.workerStatic=await(await fetch("data/worker_static.json")).json(),this.loc=await(await fetch("data/loc.json")).json(),this.links=await(await fetch("data/links.json")).json(),this.ls_lookup=await(await fetch("data/all_lodging_storage.json")).json(),this.ls_lodgings_sorted={};for(const[n,i]of Object.entries(this.ls_lookup))this.ls_lodgings_sorted[n]=Object.keys(i).sort((o,a)=>o-a);this.giantSpecies=new Set([2,4,8]),this.speciesIcons={0:"\u{1F47A}",1:"\u{1F468}",2:"\u{1F422}",3:"\u{1F47A}",4:"\u{1F422}",5:"\u{1F47A}",6:"\u{1F47A}",7:"\u{1F468}",8:"\u{1F422}"},this.ready=!0,console.log("fetchGame took",Date.now()-e,"ms")},isGiant(e){if(this.ready)return this.giantSpecies.has(this.workerStatic[e].species)},tk2tnk(e){if(this.ready){if(e in this._tk2tnk)return this._tk2tnk[e];console.log("unknown tk",e)}},tnk2tk(e){if(this.ready)return this._tnk2tk[e]},dijDiscountedNearestPlantzones(e,t){if(!this.ready)return;const r=Wt();let n=new Set;const i={[e]:r.autotakenNodes.has(e)?0:this.nodes[e].CP},o={[e]:null},a=new Ng((u,c)=>i[u]-i[c]);a.push(e);for(var s;a.size()&&(s=a.pop(),!(this.pzdSet.has(s)&&!r.autotakenNodes.has(s)&&(n.add(s),n.size==t)));)this.links[s].forEach(u=>{const c=r.autotakenNodes.has(u)?0:this.nodes[u].CP,f=i[s]+c;u in i?f<i[u]&&(i[u]=f,o[u]=s):(i[u]=f,o[u]=s,a.push(u))});const l=[];return n.forEach(u=>{const c=[u];let f=u;for(;o[f]!==null;)c.push(o[f]),f=o[f];l.push([u,i[u],c.reverse()])}),l},dijkstraPath(e,t,r){if(!this.ready)return[null,0];const n={[e]:null},i={[e]:r&&r.has(e)?0:this.nodes[e].CP},o=new Ng((u,c)=>i[u]-i[c]);o.push(e);for(var a;o.size()&&(a=o.pop(),a!=t);)this.links[a].forEach(u=>{this.nodes[u]==null&&console.log("dijkstraPath: no exploration node",u);const c=r&&r.has(u)?0:this.nodes[u].CP,f=i[a]+c;u in i?f<i[u]&&(i[u]=f,n[u]=a):(i[u]=f,n[u]=a,o.push(u))});const s=[t];let l=t;for(;n[l]!==null;)s.push(n[l]),l=n[l];return[s.reverse(),i[t]]},dijkstraNearestTowns(e,t,r,n,i){if(!this.ready)return;let o=new Set;const a={[e]:null},s={[e]:r&&r.has(e)?0:this.nodes[e].CP},l=new Ng((f,h)=>s[f]-s[h]);l.push(e);for(var u;l.size()&&(u=l.pop(),!(this.townsWithLodgingSet.has(u)&&(u!=1343||!n)&&(o.add(u),o.size==t)));)this.links[u].forEach(f=>{if(this.nodes[f]==null)throw Error(`dijkstraNearestTowns: unknown exploration node ${f}`);if(i&&(u==1727&&f==1800||u==1800&&f==1727))return;const h=r&&r.has(f)?0:this.nodes[f].CP,d=s[u]+h;f in s?d<s[f]&&(s[f]=d,a[f]=u):(s[f]=d,a[f]=u,l.push(f))});const c=[];return o.forEach(f=>{const h=[f];let d=f;for(;a[d]!==null;)h.push(a[d]),d=a[d];c.push([f,s[f],h])}),c},pzSelectionEntry(e,t,r,n,i,o,a,s){const l=Wt(),u=this.profitPzTownStats(e,r,a.wspd,a.mspd,a.luck,this.isGiant(o.charkey)),c=l.townInfraAddCost(t,1,this.plantzones[e].itemkeys,s),f={pz:this.plantzones[e],tnk:r,mapCp:n,path:i,townCp:c.cost,infraTooltip:c.tooltip,cp:n+c.cost,profit:u,w:o,statsOnPz:a};return f.dailyPerCp=f.profit.priceDaily/(n+c.cost),f.effDelta=l.jobEfficiencyDelta(f.profit.priceDaily,n+c.cost),f},workshopSelectionEntry(e,t,r,n,i,o,a){const s=Wt(),l=s.userWorkshops[e],u=this.profitWorkshopWorker(e,l,i),c=s.townInfraAddCost(t,1,[]),f=o+a+c.cost,h={hk:e,tnk:r,mapCp:o,houseCp:a,path:n,townCp:c.cost,infraTooltip:c.tooltip,cp:f,profit:u,w:i,workshop:l};return h.dailyPerCp=h.profit.priceDaily/f,h.effDelta=s.jobEfficiencyDelta(h.profit.priceDaily,f),h},addBedInfo(e){return Wt().townInfraAddCost(e,1,[])},farmSelectionEntry(e){const t=Wt(),r=this.addBedInfo(e),n=t.farmingProfitPerWorker;return{income:n,infraCp:r.cost,infraTooltip:r.tooltip,dailyPerCp:n/r.cost,effDelta:t.jobEfficiencyDelta(n,r.cost)}},profitPzTownStats(e,t,r,n,i,o){if(!(e in this.plantzones))return{cycleValue:0,cycleMinutes:NaN,cyclesDaily:NaN,priceDaily:0};const a=Wt(),s=ai(),l=this.plantzones[e];let u={dist:this.pzDistance(t,e),cycleValue:s.priceLerp(o?l.luckyValue_gi:l.luckyValue,o?l.unluckyValue_gi:l.unluckyValue,i)};return u.cyclesDaily=a.calcCyclesDaily(l.workload,l.regiongroup,r,u.dist,n),u.priceDaily=u.cyclesDaily*u.cycleValue/1e6,u},profitPzTownArtisans(e,t,r){const n=this.plantzones[e];let i=this.medianGoblin(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!1);if(o.dist>1e6)return{connected:!1};o.charkey=i.charkey,o.wspd=i.wspd;const a={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!1,kind:"goblin"};i=this.medianGiant(t),o=this.profitPzTownStats(e,t,i.wspd+5,i.mspd,i.luck,!0),o.charkey=i.charkey,o.wspd=i.wspd;const s={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"giant"},l=s&&s.dailyPerCp>a.dailyPerCp?s:a,u=this.medianHuman(t);o=this.profitPzTownStats(e,t,u.wspd+5,u.mspd,u.luck,!1),o.charkey=u.charkey,o.wspd=u.wspd;const c={...n,tnk:t,...o,cp:r,dailyPerCp:o.priceDaily/r,isGiant:!0,kind:"human"},f=c&&c.dailyPerCp>l.dailyPerCp?c:l,h={[s.charkey]:s.priceDaily,[c.charkey]:c.priceDaily,[a.charkey]:a.priceDaily},d=Object.entries(h).map(([p,v])=>({charkey:p,priceDaily:v}));return d.sort((p,v)=>p&&v&&v.priceDaily-p.priceDaily),f.alt_workers_dict=h,f.alt_workers=d,f.connected=!0,f},makeMedianChar(e){const t={level:40},r=this.workerStatic[e];let n=r.wspd,i=0,o=r.luck;for(let s=2;s<=40;s++)n+=(r.wspd_lo+r.wspd_hi)/2,i+=(r.mspd_lo+r.mspd_hi)/2,o+=(r.luck_lo+r.luck_hi)/2;let a=r.mspd*(1+i/1e6);return t.wspd=Math.round(n/1e6*100)/100,t.mspd=Math.round(a)/100,t.luck=Math.round(o/1e4*100)/100,t.charkey=e,t.isGiant=this.isGiant(e),t},medianGoblin(e){return e==1623?this.makeMedianChar(8003):e==1604?this.makeMedianChar(8003):e==1691?this.makeMedianChar(8023):e==1750?this.makeMedianChar(8035):e==1781?this.makeMedianChar(8050):e==1785?this.makeMedianChar(8050):e==1795?this.makeMedianChar(8050):e==1857?this.makeMedianChar(8050):e==1858?this.makeMedianChar(8050):e==1853?this.makeMedianChar(8050):this.makeMedianChar(7572)},medianGiant(e){return e==1623?this.makeMedianChar(8006):e==1604?this.makeMedianChar(8006):e==1691?this.makeMedianChar(8027):e==1750?this.makeMedianChar(8039):e==1781?this.makeMedianChar(8058):e==1785?this.makeMedianChar(8058):e==1795?this.makeMedianChar(8058):e==1857?this.makeMedianChar(8058):e==1858?this.makeMedianChar(8058):e==1853?this.makeMedianChar(8058):this.makeMedianChar(7571)},medianHuman(e){return e==1623?this.makeMedianChar(8009):e==1604?this.makeMedianChar(8009):e==1691?this.makeMedianChar(8031):e==1750?this.makeMedianChar(8043):e==1781?this.makeMedianChar(8054):e==1785?this.makeMedianChar(8054):e==1795?this.makeMedianChar(8054):e==1857?this.makeMedianChar(8054):e==1858?this.makeMedianChar(8054):e==1853?this.makeMedianChar(8054):this.makeMedianChar(7573)},cyclesWorkshopWorker(e,t,r){const n=Wt(),i=this.workerStatsOnIndustry(r,t.industry),o=this.houseDistance(r.tnk,e),a=n.calcWalkMinutes(o,i.mspd),s=Math.ceil(t.manualWorkload/i.wspd),l=5*s+a,u=24*60/l;return{statsOnWs:i,distance:o,cyclesDaily:u}},repeatsWorkshopWorker(e,t){let r=1;return this.ready&&e.skills.forEach(n=>{const i=this.skillData[n];i!==void 0&&t in i&&(r+=i[t])}),r},profitWorkshopWorker(e,t,r){const{statsOnWs:n,distance:i,cyclesDaily:o}=this.cyclesWorkshopWorker(e,t,r),s=this.repeatsWorkshopWorker(r,t.industry)*o*t.manualCycleIncome/1e6;return{statsOnWs:n,distance:i,cyclesDaily:o,priceDaily:s}},isLodgingTown(e){return typeof e=="string"&&(e=Number(e)),this.tnk2tk(e)in this.lodgingPerTown},isPlantzone(e){return e in this.plantzoneDrops},isConnectionNode(e){return!this.isLodgingTown(e)&&!this.isPlantzone(e)},itemName(e){if(!this.ready)return e;const t=Wt();return e in this.loc[t.selectedLang].item?this.loc[t.selectedLang].item[e]:e},nodeName(e){if(!this.ready)return e;const t=Wt();return this.loc[t.selectedLang].node[e]},parentNodeName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].parent;return this.nodeName(t)}else return e},plantzoneName(e){if(this.ready&&e in this.plantzoneStatic){const t=this.plantzoneStatic[e].node.key;return this.parentNodeName(e)+" "+this.nodeName(t)}else return""},pzDistance(e,t){if(t in this.pzk2tk){const r=this.pzk2tk[t],n=this._tnk2tk[e];for(let i=0;i<r.length;i++)if(r[i][0]==n)return r[i][1]}else throw new Error(`no distances for pzk ${t}`);return NaN},houseDistance(e,t){if(!this.ready)return 0;const r=this._tnk2tk[e];return this.tk2hk[r][t]},isWorkable(e){return[4,6,7,8,9,14,15].some(r=>r==this.nodes[e].kind)},jobIsIdle(e){return e===null},jobIsPz(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="plantzone"||typeof e=="number"},jobIsFarming(e){return e=="farming"},jobIsCustom(e){return Array.isArray(e)},jobIsWorkshop(e){return e&&typeof e=="object"&&"kind"in e&&e.kind=="workshop"},jobIcon(e){return this.jobIsFarming(e)?"\u{1F33B}":this.jobIsCustom(e)?"\u270D\uFE0F":this.jobIsWorkshop(e)?"\u{1F3ED}":""},workerJobDescription(e,t){const r=e.job;if(this.jobIsIdle(r))return"idle";if(this.jobIsPz(r))return this.uloc.node[r.pzk];if(this.jobIsFarming(r))return"["+this.jobIcon(r)+"]";if(this.jobIsCustom(r))return"["+this.jobIcon(r)+"] "+r[3];if(this.jobIsWorkshop(r)){const n=Wt(),i=this.uloc.char[r.hk];let o=TY(i);if(t){const a=this.houseInfo[r.hk].affTown,s=this.tk2tnk(a);t!=s&&(o=this.nodeName(s)+" "+o)}return"["+this.jobIcon(r)+"] "+o+" "+n.userWorkshops[r.hk].label}return"UNKNOWN_JOBTYPE"},lsLookup(e,t,r){if(!this.ready)return null;const n=this.ls_lookup[e];let i={wantLodging:t,wantStorage:r,storage:NaN,cost:NaN,lodging:NaN,success:!1};for(let u in n){const c=Number(u);if(c>=t){const f=n[c],h=bY(f,d=>d.storage>=r);if(h){if(!i.success){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};continue}if(i.success&&h.cost<i.cost){i={wantLodging:t,wantStorage:r,...h,lodging:c,success:!0};break}}}}const o=t==this.townUpperLimits[e].lodging,a=t>this.townUpperLimits[e].lodging,s=r==this.townUpperLimits[e].storage,l=r>this.townUpperLimits[e].storage;return i={...i,warnL:o,errL:a,warnS:s,errS:l},i},route(e,t){const r={routeInfos:{},totalCost:0},n=new Set([...e]);t.forEach(i=>{const[o,a]=this.dijkstraPath(i.target,i.source,n);if(!o)return;o.forEach(l=>n.add(l));const s={usedPath:o,usedPathCost:a};i.source in r.routeInfos||(r.routeInfos[i.source]={}),r.routeInfos[i.source][i.target]=s});for(const i of n)r.totalCost+=this.nodes[i].CP;return r}},getters:{uloc(){const e=Wt();return this.ready?this.loc[e.selectedLang]:{town:{},housetype:{},char:{},item:{},node:{},skill:{},skilldesc:{}}},townsWithLodgingSet(){return new Set(this.townsWithLodging)},townsWithRentableStorageSet(){return new Set(this.townsWithRentableStorage)},townsWithRedirectableStorageSet(){return new Set(this.townsWithRedirectableStorage)},nearestTown:e=>t=>{const r=e.pzk2tk[t];return r&&r[0]?{tk:r[0][0],dist:r[0][1]}:{tk:0,dist:NaN}},skillKeys(){return Object.keys(this.skillData).map(Number)},housesPerTown(){const e={};this.townsWithRedirectableStorage.forEach(t=>e[this.tnk2tk(t)]=[]);for(const[t,r]of Object.entries(this.houseInfo)){const n=r.affTown;n in e||(e[n]=[]),e[n].push(Number(t))}return e},townUpperLimits(){const e={};for(const[t,r]of Object.entries(this.housesPerTown)){const n={cp:0,storage:0,lodging:0};for(const i of r)n.cp+=this.houseCost(i),n.storage+=this.houseStorage(i),n.lodging+=this.houseLodging(i);e[t]=n}return e},plantzones(){if(!this.ready)return{};const e=Date.now(),t=ai(),r=Wt();let n={};for(const[i,o]of Object.entries(this.plantzoneDrops)){const a={...o,...this.plantzoneStatic[i]};a.name=this.plantzoneName(i);const s=t.priceBunch(a.lucky);a.unluckyValue=t.priceBunch(a.unlucky),a.luckyValue=a.unluckyValue+s,a.unluckyValue_gi=t.priceBunch(a.unlucky_gi),a.luckyValue_gi=a.unluckyValue_gi+s,a.activeWorkload=a.workload*(2-r.productivity(a.regiongroup)),a.itemkeys=new Set([...Object.keys(a.unlucky),...Object.keys(a.lucky)]),n[i]=a}return console.log("plantzones getter took",Date.now()-e,"ms"),n}}}),Mp=Ap({id:"map",state:()=>({target:[0,0],zoom:-8})}),PY=Ap({id:"droprates",state:()=>({selected_pzk:"",selected_ik:"",selected_specie:"",selected_model:"a",usePooling:!1,plotChiSquared:!1})});const be=(e,t)=>{const r=e.__vccOpts||e;for(const[n,i]of t)r[n]=i;return r},EY={class:"wrapper"},CY=N("Home"),AY=N("Plantzones"),MY=N("Modifiers"),xY=N("Settings"),LY=N("About"),IY={async beforeCreate(){_t().fetchData();const t=Wt(),r=localStorage.getItem("user");t.migrate(r);const n=ai(),i=localStorage.getItem("market");i&&n.$patch(JSON.parse(i));const o=3600*1e3;n.apiDatetime+o<Date.now()&&n.fetchData();const a=Mp(),s=localStorage.getItem("map");a.$patch(JSON.parse(s))}},OY=Object.assign(IY,{__name:"App",setup(e){return(t,r)=>(I(),O(j,null,[y("header",null,[y("div",EY,[y("nav",null,[Et(Pr(dc),{to:"/"},{default:we(()=>[CY]),_:1}),Et(Pr(dc),{to:"/plantzones"},{default:we(()=>[AY]),_:1}),Et(Pr(dc),{to:"/modifiers"},{default:we(()=>[MY]),_:1}),Et(Pr(dc),{to:"/settings"},{default:we(()=>[xY]),_:1}),Et(Pr(dc),{to:"/about"},{default:we(()=>[LY]),_:1})])])]),Et(Pr(O7))],64))}}),RY=be(OY,[["__scopeId","data-v-14b67078"]]),DY="modulepreload",NY=function(e){return"/workerman/"+e},FA={},FY=function(t,r,n){return!r||r.length===0?t():Promise.all(r.map(i=>{if(i=NY(i),i in FA)return;FA[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${i}"]${a}`))return;const s=document.createElement("link");if(s.rel=o?"stylesheet":DY,o||(s.as="script",s.crossOrigin=""),s.href=i,document.head.appendChild(s),o)return new Promise((l,u)=>{s.addEventListener("load",l),s.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>t())};const $Y={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{w:Object,homeless:Boolean,unsendable:Boolean},emits:["panToPaPos","send","edit"],data:()=>({}),methods:{formatFixed:wt,percentageToColor:wY}},BY=e=>(Xe("data-v-3bc41719"),e=e(),Ye(),e),zY={key:0,class:"fss"},VY={key:1},UY={key:0,class:"fss"},WY={key:1},GY={key:0,class:"fss"},jY={key:1},HY={class:"center"},XY=N(" @ "),YY=N(" idle "),qY={class:"center"},ZY={key:0},KY=BY(()=>y("button",{title:"Ancado is not activated, can't house workers",disabled:"true"},"send",-1)),JY=[KY];function QY(e,t,r,n,i,o){return I(),O("tr",null,[y("td",null,[y("button",{onClick:t[0]||(t[0]=a=>e.$emit("fire"))},"fire")]),y("td",null,A(n.userStore.workerLabel(r.w)),1),y("td",{style:Nl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).wspd,this.userStore.workersMinMaxStats.wspd.lo,this.userStore.workersMinMaxStats.wspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),O("span",zY,A(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,1))+"% ",1)):(I(),O("span",VY,A(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).wspd,2)),1))],4),y("td",{style:Nl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).mspd,this.userStore.workersMinMaxStats.mspd.lo,this.userStore.workersMinMaxStats.mspd.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),O("span",UY,A(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,1))+"% ",1)):(I(),O("span",WY,A(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).mspd,2)),1))],4),y("td",{style:Nl(this.userStore.prerelease_colorGoblins&&r.w.charkey==7572&&{backgroundColor:o.percentageToColor(this.userStore.workerStatsForDisplay(r.w).luck,this.userStore.workersMinMaxStats.luck.lo,this.userStore.workersMinMaxStats.luck.hi,.2)})},[this.userStore.displayWorkerStatsRank?(I(),O("span",GY,A(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,1))+"% ",1)):(I(),O("span",jY,A(o.formatFixed(this.userStore.workerStatsForDisplay(r.w).luck,2)),1))],4),y("td",HY,[y("button",{onClick:t[1]||(t[1]=a=>e.$emit("edit"))},"edit")]),y("td",null,[r.w.job?(I(),O(j,{key:0},[n.gameStore.jobIsPz(r.w.job)?(I(),O("span",{key:0,onClick:t[2]||(t[2]=a=>e.$emit("panToPaPos",this.gameStore.nodes[r.w.job.pzk].pos)),class:"clickable"},A(n.gameStore.workerJobDescription(r.w)),1)):(I(),O(j,{key:1},[N(A(n.gameStore.workerJobDescription(r.w,r.w.tnk)),1)],64)),XY,n.userStore.displayProfitPerCp?(I(),O(j,{key:2},[N(A(o.formatFixed(n.userStore.workerIncomePerCp(r.w),2))+" M$/day/CP ",1)],64)):(I(),O(j,{key:3},[N(A(o.formatFixed(n.userStore.workerIncome(r.w),2))+" M$/day ",1)],64))],64)):(I(),O(j,{key:1},[YY],64))]),y("td",qY,[r.w.job?(I(),O("button",{key:0,onClick:t[3]||(t[3]=a=>r.w.job=null)},"stop")):(I(),O(j,{key:1},[r.unsendable?(I(),O("div",ZY,JY)):(I(),O("button",{key:1,onClick:t[4]||(t[4]=a=>e.$emit("send"))},"send"))],64))])])}const Sk=be($Y,[["render",QY],["__scopeId","data-v-3bc41719"]]);const tq={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{o:Object,tk:Number},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos"],components:{Worker:Sk},data:()=>({}),computed:{infra(){if(this.tk in this.userStore.townsInfra)return this.userStore.townsInfra[this.tk];throw console.log(this.userStore.townsInfra),new Error(`no infra for town: ${this.tk}`)}},methods:{formatFixed:wt,fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)}}},Tk=e=>(Xe("data-v-77f30fa9"),e=e(),Ye(),e),eq={colspan:"2"},rq=N(" worker "),nq=N(" workers not hireable "),iq=Tk(()=>y("td",{class:"center"},"\u{1F528}",-1)),oq=Tk(()=>y("td",{class:"center"},"\u{1F9B6}",-1)),aq=Tk(()=>y("td",{class:"center"},"\u{1F340}",-1)),sq=N(" \xA0 ");function lq(e,t,r,n,i,o){const a=Qt("Worker");return I(),O(j,null,[y("tr",null,[y("td",eq,[r.o?(I(),O(j,{key:0},[rq,y("button",{onClick:t[0]||(t[0]=s=>this.$emit("hireWorker",r.tk))}," hire ")],64)):(I(),O(j,{key:1},[nq],64))]),iq,oq,aq,y("td",{colspan:"3",class:xr({unresolved:n.gameStore.ready&&o.infra.success==!1})},[y("span",{onClick:t[1]||(t[1]=s=>e.$emit("panToPaPos",this.gameStore.nodes[this.gameStore.tk2tnk(r.tk)].pos)),class:"bold clickable"},A(n.gameStore.nodeName(n.gameStore.tk2tnk(r.tk))),1),N(" "+A()+" ",1),n.userStore.displayProfitPerCp?(I(),O(j,{key:0},[N(A(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].eff,2))+" M$/day/CP ",1)],64)):(I(),O(j,{key:1},[N(A(o.formatFixed(n.userStore.townsTotalIncome[r.tk]&&n.userStore.townsTotalIncome[r.tk].income,1))+" M$/day ",1)],64)),sq,y("span",null,[N(A(n.userStore.townWorkingWorkers(r.tk).length)+" \u{1F6CF}\uFE0F ",1),y("span",null,A(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size),1),N(" \u{1F4E6} "+A(n.gameStore.ready&&n.userStore.townsInfra[r.tk].cost)+" CP ",1),y("button",{onClick:t[2]||(t[2]=s=>this.$emit("selectHouses",r.tk)),class:xr({unresolved:n.gameStore.ready&&n.userStore.townsInfra[r.tk].success==!1})}," config ",2)])],2)]),(I(!0),O(j,null,Ct(n.userStore.userWorkers.filter(s=>n.gameStore.tnk2tk(s.tnk)==r.tk),(s,l)=>(I(),xo(a,{w:s,homeless:!0,class:xr({homeless:0}),unsendable:r.tk==619&&!n.userStore.activateAncado,onFire:u=>o.fireWorker(s),onEdit:u=>this.$emit("editWorker",s),onSend:u=>this.$emit("sendWorker",s),onPanToPaPos:t[3]||(t[3]=u=>this.$emit("panToPaPos",u))},null,8,["w","class","unsendable","onFire","onEdit","onSend"]))),256))],64)}const N7=be(tq,[["render",lq],["__scopeId","data-v-77f30fa9"]]);const uq={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{pzk:Number,redirect:Number},emits:[],data:()=>({homeTnk:1,workerKind:"gob",selectedWorkerIndices:{},selectedWorkerPZSEs:{}}),methods:{formatFixed:wt,workerStats(e,t){return e=="gia"?this.gameStore.medianGiant(t):e=="hum"?this.gameStore.medianHuman(t):this.gameStore.medianGoblin(t)},profitTownStats(e,t){const r=this.gameStore._tnk2tk[e];return this.redirect>0&&this.gameStore._tnk2tk[this.redirect],this.gameStore.profitPzTownStats(this.pzk,e,t.wspd+5,t.mspd,t.luck,t.isGiant)},assignWorker(e){const t=JSON.parse(JSON.stringify(e.w));this.userStore.userWorkers.push(t),this.userStore.assignWorker(t,{kind:"plantzone",pzk:e.pz.key,storage:e.tnk})}},computed:{workerKinds(){const e=[];for(const t of["gia","hum","gob"]){const r={kind:t,stats:this.workerStats(t,this.homeTnk)};r.profit=this.profitTownStats(this.homeTnk,r.stats),e.push(r)}return e.sort((t,r)=>r.profit.priceDaily-t.profit.priceDaily),e},selectedWorkerStats(){return this.workerStats(this.workerKind,this.homeTnk)},nearestTowns(){const t=[];return this.gameStore.dijkstraNearestTowns(this.pzk,5,this.userStore.autotakenNodes).forEach(([n,i,o])=>{const a=[];for(const s of["gia","hum","gob"]){const l=this.workerStats(s,n),u=this.gameStore._tnk2tk[n],c={tk:u,tnk:this.gameStore.tk2tnk(u),charkey:l.charkey,label:this.userStore.newWorkerName(u),level:l.level,wspdSheet:l.wspd,mspdSheet:l.mspd,luckSheet:l.luck,skills:[],job:null};c.skills.push(1011);const f=this.redirect>0?this.gameStore._tnk2tk[this.redirect]:u,h=this.gameStore.workerStatsOnPlantzone(c),d=this.gameStore.pzSelectionEntry(this.pzk,u,n,i,o,c,h,f);if(d.profit.dist>1e6)return;const p={kind:s,stats:l,PZSE:d};a.push(p)}a.length!=0&&(a.sort((s,l)=>l.PZSE.profit.priceDaily-s.PZSE.profit.priceDaily),this.selectedWorkerIndices[n]=0,t.push({tnk:n,workerKinds:a}))}),t.sort((n,i)=>i.workerKinds[0].PZSE.dailyPerCp-n.workerKinds[0].PZSE.dailyPerCp),t}}},F7=e=>(Xe("data-v-5fb3d5a6"),e=e(),Ye(),e),cq=F7(()=>y("h4",null,"Nearest towns with hireable workers:",-1)),fq={key:0},hq=F7(()=>y("tr",null,[y("th",null,"town"),y("th",null,"walk"),y("th",null,[N("make new level 40 artisan "),y("abbr",{class:"tooltip",title:"with median stats and a single +5\u{1F528} skill"},"\u2139\uFE0F")]),y("th",null,[N("+CP "),y("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139\uFE0F")]),y("th",null,"M$/day/CP"),y("th",null,"action")],-1)),dq={class:"center"},pq=["onUpdate:modelValue"],vq=["value"],gq={class:"center"},mq=["title"],_q=N("+"),yq=["title"],bq={class:"center"},wq={key:0,title:"plantzone already occupied",disabled:"true"},Sq={key:1,title:"Can't find housing, try P2W",disabled:"true"},Tq={key:2,title:"No walk path",disabled:"true"},kq={key:3,title:"Ancado is not activated, can't house workers",disabled:"true"},Pq=["onClick"],Eq={key:1};function Cq(e,t,r,n,i,o){return I(),O("div",null,[cq,N(" "+A("")+" "+A("")+" ",1),this.nearestTowns?(I(),O("table",fq,[hq,(I(!0),O(j,null,Ct(this.nearestTowns,a=>(I(),O("tr",null,[y("td",null,A(n.gameStore.uloc.node[a.tnk]),1),y("td",dq,A(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.profit.dist)),1),y("td",null,[ht(y("select",{"onUpdate:modelValue":s=>e.selectedWorkerIndices[a.tnk]=s},[(I(!0),O(j,null,Ct(a.workerKinds,(s,l)=>(I(),O("option",{value:l},A(n.gameStore.uloc.char[s.stats.charkey])+" ("+A(o.formatFixed(s.PZSE.profit.priceDaily,2))+" M$/day) ",9,vq))),256))],8,pq),[[ar,e.selectedWorkerIndices[a.tnk]]])]),y("td",gq,[y("abbr",{class:"tooltip",title:Array.from(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.path,s=>`${n.userStore.autotakenNodes.has(s)?0:n.gameStore.nodes[s].CP} ${n.gameStore.uloc.node[s]}`).join(`
`)},A(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.mapCp),9,mq),_q,y("abbr",{class:"tooltip",title:a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.infraTooltip},A(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.townCp)),9,yq),N("="+A(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.cp)),1)]),y("td",bq,A(o.formatFixed(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.dailyPerCp,3)),1),y("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O("button",wq,"hire+assign")):isNaN(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.townCp)?(I(),O("button",Sq,"hire+assign")):isNaN(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE.profit.dist)?(I(),O("button",Tq,"hire+assign")):n.gameStore.tnk2tk(a.tnk)&&n.gameStore.tnk2tk(a.tnk)==619&&!n.userStore.activateAncado?(I(),O("button",kq,"hire+assign")):(I(),O("button",{key:4,onClick:s=>o.assignWorker(a.workerKinds[e.selectedWorkerIndices[a.tnk]].PZSE)}," hire+assign ",8,Pq))])]))),256))])):(I(),O("span",Eq," None "))])}const Aq=be(uq,[["render",Cq],["__scopeId","data-v-5fb3d5a6"]]);const Mq={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{pzk:Number},emits:["showModifierDialog","editWorker"],components:{MakeAWorker:Aq},data:()=>({selectedRedirect:0}),methods:{formatFixed:wt,makeIconSrc:Dn,plantzoneNearestTownsFreeWorkersProfits(e,t){const r=[];return this.gameStore.dijkstraNearestTowns(e,t,this.userStore.autotakenNodes).forEach(([i,o,a])=>{const s=this.gameStore._tnk2tk[i],l=this.userStore.getFreeWorkers(s),u=this.selectedRedirect>0?this.gameStore._tnk2tk[this.selectedRedirect]:s;l.forEach(c=>{const f=this.gameStore.workerStatsOnPlantzone(c);r.push(this.gameStore.pzSelectionEntry(e,s,i,o,a,c,f,u))})}),r.sort((i,o)=>o.dailyPerCp-i.dailyPerCp),r}},computed:{freeWorkers(){return this.plantzoneNearestTownsFreeWorkersProfits(this.pzk,99).filter(n=>n.profit.dist<1e6).filter((n,i,o)=>i===o.findIndex(a=>a.tnk===n.tnk&&JSON.stringify(a.statsOnPz)===JSON.stringify(n.statsOnPz)))}}},cu=e=>(Xe("data-v-4bd320cb"),e=e(),Ye(),e),xq={key:0},Lq=["src"],Iq=cu(()=>y("abbr",{class:"tooltip",title:"how much more $ a lucky cycle brings vs unlucky"},"x",-1)),Oq=N("] "),Rq=N(" workload: "),Dq={id:"plantzoneWorkerInfo"},Nq=cu(()=>y("br",null,null,-1)),Fq=["title"],$q=cu(()=>y("br",null,null,-1)),Bq=["title"],zq=cu(()=>y("br",null,null,-1)),Vq=cu(()=>y("abbr",{class:"tooltip",title:"income / (connectionCost + lodgageCost)"},"\u2139\uFE0F",-1)),Uq=N(" worker: none "),Wq={class:"spaced-columns"},Gq=N("Nearest towns with idle workers: "),jq=N("None"),Hq={style:{"margin-right":"6px"}},Xq=N("stash: "),Yq=cu(()=>y("option",{value:"0"},"worker hometown",-1)),qq=["value"],Zq={key:0},Kq=cu(()=>y("tr",null,[y("th",null,"town"),y("th",null,"walk"),y("th",null,[N("worker "),y("abbr",{class:"tooltip",title:"same town&stat workers are hidden in this view"},"\u2139\uFE0F")]),y("th",null,"+M$/day"),y("th",null,[N("+CP "),y("abbr",{class:"tooltip",title:"node connection + town housing = total"},"\u2139\uFE0F")]),y("th",null,"M$/day/CP"),y("th",null,"action")],-1)),Jq={class:"fsxs"},Qq={class:"center"},tZ=["title"],eZ=N("+"),rZ=["title"],nZ={class:"center"},iZ={key:0,title:"plantzone already occupied",disabled:"true"},oZ={key:1,title:"Can't resolve housing",disabled:"true"},aZ={key:2,title:"Ancado is not activated, can't house workers",disabled:"true"},sZ=["onClick"];function lZ(e,t,r,n,i,o){const a=Qt("RouterLink"),s=Qt("MakeAWorker");return I(),O(j,null,[y("div",null,[Et(a,{tag:"a",to:{path:"./plantzones",hash:"#drops"+r.pzk}},{default:we(()=>[N(A(n.gameStore.plantzoneName(r.pzk)),1)]),_:1},8,["to"]),N(" "+A(this.gameStore.nodes[r.pzk].CP)+"CP ",1),r.pzk in this.gameStore.plantzones?(I(),O("span",xq,[(I(!0),O(j,null,Ct(this.gameStore.plantzones[r.pzk].itemkeys,l=>(I(),xo(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:we(()=>[y("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,Lq)]),_:2},1032,["to"]))),256)),N(" [\u{1F340}"+A(o.formatFixed(this.gameStore.plantzones[r.pzk].lucky?this.gameStore.plantzones[r.pzk].luckyValue/this.gameStore.plantzones[r.pzk].unluckyValue:1,2)),1),Iq,Oq])):tt("",!0)]),y("div",null,[Rq,n.gameStore.ready&&n.gameStore.plantzones[r.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.pzk].regiongroup]?(I(),O(j,{key:0},[N(" ~"+A(o.formatFixed(n.userStore.medianWorkloads[r.pzk],2))+" ",1),y("button",{onClick:t[0]||(t[0]=l=>e.$emit("showModifierDialog",r.pzk))},"review")],64)):(I(),O(j,{key:1},[N(A(o.formatFixed(n.gameStore.plantzones[r.pzk].activeWorkload,2))+" \u2190 modifier ",1),ht(y("input",{type:"number","onUpdate:modelValue":t[1]||(t[1]=l=>n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup]=l),min:"0",max:"100",step:"0.1",class:"w42em"},null,512),[[ie,n.userStore.regionModifiers[n.gameStore.plantzones[r.pzk].regiongroup],void 0,{number:!0}]])],64))]),y("div",Dq,[n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O(j,{key:0},[N(" worker: "+A(n.userStore.pzJobs[r.pzk].worker.label)+" @ "+A(o.formatFixed(n.userStore.pzJobs[r.pzk].profit.priceDaily,3))+" M$/day ",1),n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O(j,{key:0},[y("button",{onClick:t[2]||(t[2]=l=>e.$emit("editWorker",n.userStore.pzJobs[r.pzk].worker))}," edit "),y("button",{onClick:t[3]||(t[3]=l=>n.userStore.pzJobs[r.pzk].worker.job=null)}," stop ")],64)):tt("",!0),Nq,N(" connection cost: "+A(o.formatFixed(n.userStore.pzjobsSharedConnectionCP[r.pzk].value,3))+" CP ",1),y("abbr",{class:"tooltip",title:`full cost of this node + \u03A3 of connection nodes costs shared proportionally between all active jobs using them
`+n.userStore.pzjobsSharedConnectionCP[r.pzk].tooltip},"\u2139\uFE0F",8,Fq),$q,N(" lodgage cost: "+A(o.formatFixed(n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).value,3))+" CP ",1),y("abbr",{class:"tooltip",title:n.userStore.workerSharedLodgageCP(n.userStore.pzJobs[r.pzk].worker).tooltip},"\u2139\uFE0F",8,Bq),zq,N(" efficiency: "+A(o.formatFixed(n.userStore.workerIncomePerCp(n.userStore.pzJobs[r.pzk].worker),3))+" M$/day/CP ",1),Vq],64)):(I(),O(j,{key:1},[Uq],64))]),y("div",null,[y("div",Wq,[y("div",null,[y("h4",null,[Gq,o.freeWorkers.length==0?(I(),O(j,{key:0},[jq],64)):tt("",!0)])]),y("div",Hq,[Xq,ht(y("select",{"onUpdate:modelValue":t[4]||(t[4]=l=>e.selectedRedirect=l)},[Yq,(I(!0),O(j,null,Ct(n.gameStore.townsWithLodging,l=>(I(),O("option",{value:l},A(n.gameStore.uloc.node[l]),9,qq))),256))],512),[[ar,e.selectedRedirect]])])]),o.freeWorkers.length>0?(I(),O("table",Zq,[Kq,(I(!0),O(j,null,Ct(o.freeWorkers,l=>(I(),O("tr",null,[y("td",null,A(n.gameStore.nodeName(l.tnk)),1),y("td",null,A(o.formatFixed(l.profit.dist)),1),y("td",null,[N(A(l.w.label)+" ",1),y("span",Jq,A(o.formatFixed(l.statsOnPz.wspd,2))+"\u{1F528} "+A(o.formatFixed(l.statsOnPz.mspd,2))+"\u{1F9B6} "+A(o.formatFixed(l.statsOnPz.luck,2))+"\u{1F340} ",1)]),y("td",Qq,A(o.formatFixed(l.profit.priceDaily,2)),1),y("td",null,[y("abbr",{class:"tooltip",title:Array.from(l.path,u=>`${n.userStore.autotakenNodes.has(u)?0:n.gameStore.nodes[u].CP} ${n.gameStore.uloc.node[u]}`).join(`
`)},A(l.mapCp),9,tZ),eZ,y("abbr",{class:"tooltip",title:l.infraTooltip},A(o.formatFixed(l.townCp)),9,rZ),N("="+A(o.formatFixed(l.cp)),1)]),y("td",nZ,A(o.formatFixed(l.dailyPerCp,3)),1),y("td",null,[n.userStore.workedPlantzones.has(r.pzk.toString())?(I(),O("button",iZ,"assign")):isNaN(l.townCp)?(I(),O("button",oZ,"assign")):n.gameStore.tnk2tk(l.w.tnk)&&n.gameStore.tnk2tk(l.w.tnk)==619&&!n.userStore.activateAncado?(I(),O("button",aZ,"assign")):(I(),O("button",{key:3,onClick:u=>n.userStore.assignWorker(l.w,{kind:"plantzone",pzk:l.pz.key,storage:l.tnk})}," assign ",8,sZ))])]))),256))])):tt("",!0),Et(s,{pzk:r.pzk,redirect:Number(e.selectedRedirect)},null,8,["pzk","redirect"])])],64)}const $7=be(Mq,[["render",lZ],["__scopeId","data-v-4bd320cb"]]);const uZ={name:"modalDialog",props:{show:{type:Boolean,default:!1}},methods:{}};function cZ(e,t,r,n,i,o){return ht((I(),O("div",{onClick:t[1]||(t[1]=Gd(a=>this.$emit("update:show",!1),["stop"])),class:"dialog"},[y("div",{onClick:t[0]||(t[0]=Gd(()=>{},["stop"])),class:"dialog_content"},[$j(e.$slots,"default",{},void 0,!0)])],512)),[[FH,r.show]])}const kk=be(uZ,[["render",cZ],["__scopeId","data-v-dea74574"]]);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var _S=function(e,t){return _S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},_S(e,t)};function yt(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");_S(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var fZ=function(){function e(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1}return e}(),hZ=function(){function e(){this.browser=new fZ,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow=typeof window<"u"}return e}(),Tl=new hZ;typeof wx=="object"&&typeof wx.getSystemInfoSync=="function"?(Tl.wxa=!0,Tl.touchEventsSupported=!0):typeof document>"u"&&typeof self<"u"?Tl.worker=!0:typeof navigator>"u"?(Tl.node=!0,Tl.svgSupported=!0):dZ(navigator.userAgent,Tl);function dZ(e,t){var r=t.browser,n=e.match(/Firefox\/([\d.]+)/),i=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(e);n&&(r.firefox=!0,r.version=n[1]),i&&(r.ie=!0,r.version=i[1]),o&&(r.edge=!0,r.version=o[1],r.newEdge=+o[1].split(".")[0]>18),a&&(r.weChat=!0),t.svgSupported=typeof SVGRect<"u",t.touchEventsSupported="ontouchstart"in window&&!r.ie&&!r.edge,t.pointerEventsSupported="onpointerdown"in window&&(r.edge||r.ie&&+r.version>=11),t.domSupported=typeof document<"u";var s=document.documentElement.style;t.transform3dSupported=(r.ie&&"transition"in s||r.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),t.transformSupported=t.transform3dSupported||r.ie&&+r.version>=9}const Yt=Tl;var Pk=12,pZ="sans-serif",Zl=Pk+"px "+pZ,vZ=20,gZ=100,mZ="007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N";function _Z(e){var t={};if(typeof JSON>"u")return t;for(var r=0;r<e.length;r++){var n=String.fromCharCode(r+32),i=(e.charCodeAt(r)-vZ)/gZ;t[n]=i}return t}var yZ=_Z(mZ),fu={createCanvas:function(){return typeof document<"u"&&document.createElement("canvas")},measureText:function(){var e,t;return function(r,n){if(!e){var i=fu.createCanvas();e=i&&i.getContext("2d")}if(e)return t!==n&&(t=e.font=n||Zl),e.measureText(r);r=r||"",n=n||Zl;var o=/^([0-9]*?)px$/.exec(n),a=+(o&&o[1])||Pk,s=0;if(n.indexOf("mono")>=0)s=a*r.length;else for(var l=0;l<r.length;l++){var u=yZ[r[l]];s+=u==null?a:u*a}return{width:s}}}(),loadImage:function(e,t,r){var n=new Image;return n.onload=t,n.onerror=r,n.src=e,n}},B7=hu(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(e,t){return e["[object "+t+"]"]=!0,e},{}),z7=hu(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(e,t){return e["[object "+t+"Array]"]=!0,e},{}),hf=Object.prototype.toString,V1=Array.prototype,bZ=V1.forEach,wZ=V1.filter,Ek=V1.slice,SZ=V1.map,$A=function(){}.constructor,S0=$A?$A.prototype:null,Ck="__proto__",TZ=2311;function V7(){return TZ++}function Ak(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];typeof console<"u"&&console.error.apply(console,e)}function zt(e){if(e==null||typeof e!="object")return e;var t=e,r=hf.call(e);if(r==="[object Array]"){if(!gd(e)){t=[];for(var n=0,i=e.length;n<i;n++)t[n]=zt(e[n])}}else if(z7[r]){if(!gd(e)){var o=e.constructor;if(o.from)t=o.from(e);else{t=new o(e.length);for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}}}else if(!B7[r]&&!gd(e)&&!Tm(e)){t={};for(var a in e)e.hasOwnProperty(a)&&a!==Ck&&(t[a]=zt(e[a]))}return t}function se(e,t,r){if(!Rt(t)||!Rt(e))return r?zt(t):e;for(var n in t)if(t.hasOwnProperty(n)&&n!==Ck){var i=e[n],o=t[n];Rt(o)&&Rt(i)&&!ct(o)&&!ct(i)&&!Tm(o)&&!Tm(i)&&!BA(o)&&!BA(i)&&!gd(o)&&!gd(i)?se(i,o,r):(r||!(n in e))&&(e[n]=zt(t[n]))}return e}function kZ(e,t){for(var r=e[0],n=1,i=e.length;n<i;n++)r=se(r,e[n],t);return r}function at(e,t){if(Object.assign)Object.assign(e,t);else for(var r in t)t.hasOwnProperty(r)&&r!==Ck&&(e[r]=t[r]);return e}function re(e,t,r){for(var n=ve(t),i=0;i<n.length;i++){var o=n[i];(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}return e}fu.createCanvas;function fe(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r}return-1}function PZ(e,t){var r=e.prototype;function n(){}n.prototype=t.prototype,e.prototype=new n;for(var i in r)r.hasOwnProperty(i)&&(e.prototype[i]=r[i]);e.prototype.constructor=e,e.superClass=t}function Wi(e,t,r){if(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var o=n[i];o!=="constructor"&&(r?t[o]!=null:e[o]==null)&&(e[o]=t[o])}else re(e,t,r)}function Xr(e){return!e||typeof e=="string"?!1:typeof e.length=="number"}function $(e,t,r){if(!!(e&&t))if(e.forEach&&e.forEach===bZ)e.forEach(t,r);else if(e.length===+e.length)for(var n=0,i=e.length;n<i;n++)t.call(r,e[n],n,e);else for(var o in e)e.hasOwnProperty(o)&&t.call(r,e[o],o,e)}function Lt(e,t,r){if(!e)return[];if(!t)return Mk(e);if(e.map&&e.map===SZ)return e.map(t,r);for(var n=[],i=0,o=e.length;i<o;i++)n.push(t.call(r,e[i],i,e));return n}function hu(e,t,r,n){if(!!(e&&t)){for(var i=0,o=e.length;i<o;i++)r=t.call(n,r,e[i],i,e);return r}}function Er(e,t,r){if(!e)return[];if(!t)return Mk(e);if(e.filter&&e.filter===wZ)return e.filter(t,r);for(var n=[],i=0,o=e.length;i<o;i++)t.call(r,e[i],i,e)&&n.push(e[i]);return n}function ve(e){if(!e)return[];if(Object.keys)return Object.keys(e);var t=[];for(var r in e)e.hasOwnProperty(r)&&t.push(r);return t}function EZ(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return function(){return e.apply(t,r.concat(Ek.call(arguments)))}}var Vt=S0&&Ut(S0.bind)?S0.call.bind(S0.bind):EZ;function ye(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(){return e.apply(this,t.concat(Ek.call(arguments)))}}function ct(e){return Array.isArray?Array.isArray(e):hf.call(e)==="[object Array]"}function Ut(e){return typeof e=="function"}function Mt(e){return typeof e=="string"}function yS(e){return hf.call(e)==="[object String]"}function Se(e){return typeof e=="number"}function Rt(e){var t=typeof e;return t==="function"||!!e&&t==="object"}function BA(e){return!!B7[hf.call(e)]}function Rn(e){return!!z7[hf.call(e)]}function Tm(e){return typeof e=="object"&&typeof e.nodeType=="number"&&typeof e.ownerDocument=="object"}function U1(e){return e.colorStops!=null}function CZ(e){return e.image!=null}function AZ(e){return hf.call(e)==="[object RegExp]"}function km(e){return e!==e}function Ai(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var r=0,n=e.length;r<n;r++)if(e[r]!=null)return e[r]}function Zt(e,t){return e!=null?e:t}function vd(e,t,r){return e!=null?e:t!=null?t:r}function Mk(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return Ek.apply(e,t)}function U7(e){if(typeof e=="number")return[e,e,e,e];var t=e.length;return t===2?[e[0],e[1],e[0],e[1]]:t===3?[e[0],e[1],e[2],e[1]]:e}function Bi(e,t){if(!e)throw new Error(t)}function To(e){return e==null?null:typeof e.trim=="function"?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var W7="__ec_primitive__";function Pm(e){e[W7]=!0}function gd(e){return e[W7]}var MZ=function(){function e(t){this.data={};var r=ct(t);this.data={};var n=this;t instanceof e?t.each(i):t&&$(t,i);function i(o,a){r?n.set(o,a):n.set(a,o)}}return e.prototype.get=function(t){return this.data.hasOwnProperty(t)?this.data[t]:null},e.prototype.set=function(t,r){return this.data[t]=r},e.prototype.each=function(t,r){for(var n in this.data)this.data.hasOwnProperty(n)&&t.call(r,this.data[n],n)},e.prototype.keys=function(){return ve(this.data)},e.prototype.removeKey=function(t){delete this.data[t]},e}();function jt(e){return new MZ(e)}function G7(e,t){for(var r=new e.constructor(e.length+t.length),n=0;n<e.length;n++)r[n]=e[n];for(var i=e.length,n=0;n<t.length;n++)r[n+i]=t[n];return r}function W1(e,t){var r;if(Object.create)r=Object.create(e);else{var n=function(){};n.prototype=e,r=new n}return t&&at(r,t),r}function j7(e){var t=e.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function pt(e,t){return e.hasOwnProperty(t)}function jr(){}var xZ=180/Math.PI;/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bS=function(e,t){return bS=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},bS(e,t)};function Ce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");bS(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function df(e,t){return e==null&&(e=0),t==null&&(t=0),[e,t]}function LZ(e,t){return e[0]=t[0],e[1]=t[1],e}function IZ(e){return[e[0],e[1]]}function zA(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function H7(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e}function OZ(e){return Math.sqrt(RZ(e))}function RZ(e){return e[0]*e[0]+e[1]*e[1]}function _y(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e}function xk(e,t){var r=OZ(t);return r===0?(e[0]=0,e[1]=0):(e[0]=t[0]/r,e[1]=t[1]/r),e}function wS(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var DZ=wS;function NZ(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var Lc=NZ;function nn(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i+r[4],e[1]=r[1]*n+r[3]*i+r[5],e}function _c(e,t,r){return e[0]=Math.min(t[0],r[0]),e[1]=Math.min(t[1],r[1]),e}function yc(e,t,r){return e[0]=Math.max(t[0],r[0]),e[1]=Math.max(t[1],r[1]),e}var Ou=function(){function e(t,r){this.target=t,this.topTarget=r&&r.topTarget}return e}(),FZ=function(){function e(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return e.prototype._dragStart=function(t){for(var r=t.target;r&&!r.draggable;)r=r.parent||r.__hostTarget;r&&(this._draggingTarget=r,r.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Ou(r,t),"dragstart",t.event))},e.prototype._drag=function(t){var r=this._draggingTarget;if(r){var n=t.offsetX,i=t.offsetY,o=n-this._x,a=i-this._y;this._x=n,this._y=i,r.drift(o,a,t),this.handler.dispatchToElement(new Ou(r,t),"drag",t.event);var s=this.handler.findHover(n,i,r).target,l=this._dropTarget;this._dropTarget=s,r!==s&&(l&&s!==l&&this.handler.dispatchToElement(new Ou(l,t),"dragleave",t.event),s&&s!==l&&this.handler.dispatchToElement(new Ou(s,t),"dragenter",t.event))}},e.prototype._dragEnd=function(t){var r=this._draggingTarget;r&&(r.dragging=!1),this.handler.dispatchToElement(new Ou(r,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Ou(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},e}();const $Z=FZ;var BZ=function(){function e(t){t&&(this._$eventProcessor=t)}return e.prototype.on=function(t,r,n,i){this._$handlers||(this._$handlers={});var o=this._$handlers;if(typeof r=="function"&&(i=n,n=r,r=null),!n||!t)return this;var a=this._$eventProcessor;r!=null&&a&&a.normalizeQuery&&(r=a.normalizeQuery(r)),o[t]||(o[t]=[]);for(var s=0;s<o[t].length;s++)if(o[t][s].h===n)return this;var l={h:n,query:r,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},u=o[t].length-1,c=o[t][u];return c&&c.callAtLast?o[t].splice(u,0,l):o[t].push(l),this},e.prototype.isSilent=function(t){var r=this._$handlers;return!r||!r[t]||!r[t].length},e.prototype.off=function(t,r){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(r){if(n[t]){for(var i=[],o=0,a=n[t].length;o<a;o++)n[t][o].h!==r&&i.push(n[t][o]);n[t]=i}n[t]&&n[t].length===0&&delete n[t]}else delete n[t];return this},e.prototype.trigger=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=i.length,l=0;l<s;l++){var u=i[l];if(!(o&&o.filter&&u.query!=null&&!o.filter(t,u.query)))switch(a){case 0:u.h.call(u.ctx);break;case 1:u.h.call(u.ctx,r[0]);break;case 2:u.h.call(u.ctx,r[0],r[1]);break;default:u.h.apply(u.ctx,r);break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e.prototype.triggerWithContext=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],o=this._$eventProcessor;if(i)for(var a=r.length,s=r[a-1],l=i.length,u=0;u<l;u++){var c=i[u];if(!(o&&o.filter&&c.query!=null&&!o.filter(t,c.query)))switch(a){case 0:c.h.call(s);break;case 1:c.h.call(s,r[0]);break;case 2:c.h.call(s,r[0],r[1]);break;default:c.h.apply(s,r.slice(1,a-1));break}}return o&&o.afterTrigger&&o.afterTrigger(t),this},e}();const Gi=BZ;var zZ=Math.log(2);function SS(e,t,r,n,i,o){var a=n+"-"+i,s=e.length;if(o.hasOwnProperty(a))return o[a];if(t===1){var l=Math.round(Math.log((1<<s)-1&~i)/zZ);return e[r][l]}for(var u=n|1<<r,c=r+1;n&1<<c;)c++;for(var f=0,h=0,d=0;h<s;h++){var p=1<<h;p&i||(f+=(d%2?-1:1)*e[r][h]*SS(e,t-1,c,u,i|p,o),d++)}return o[a]=f,f}function VA(e,t){var r=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],n={},i=SS(r,8,0,0,0,n);if(i!==0){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)o[s]==null&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*SS(r,7,a===0?1:0,1<<a,1<<s,n)/i*t[a];return function(l,u,c){var f=u*o[6]+c*o[7]+1;l[0]=(u*o[0]+c*o[1]+o[2])/f,l[1]=(u*o[3]+c*o[4]+o[5])/f}}}var UA="___zrEVENTSAVED",yy=[];function VZ(e,t,r,n,i){return TS(yy,t,n,i,!0)&&TS(e,r,yy[0],yy[1])}function TS(e,t,r,n,i){if(t.getBoundingClientRect&&Yt.domSupported&&!X7(t)){var o=t[UA]||(t[UA]={}),a=UZ(t,o),s=WZ(a,o,i);if(s)return s(e,r,n),!0}return!1}function UZ(e,t){var r=t.markers;if(r)return r;r=t.markers=[];for(var n=["left","right"],i=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=a.style,l=o%2,u=(o>>1)%2;s.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",n[l]+":0",i[u]+":0",n[1-l]+":auto",i[1-u]+":auto",""].join("!important;"),e.appendChild(a),r.push(a)}return r}function WZ(e,t,r){for(var n=r?"invTrans":"trans",i=t[n],o=t.srcCoords,a=[],s=[],l=!0,u=0;u<4;u++){var c=e[u].getBoundingClientRect(),f=2*u,h=c.left,d=c.top;a.push(h,d),l=l&&o&&h===o[f]&&d===o[f+1],s.push(e[u].offsetLeft,e[u].offsetTop)}return l&&i?i:(t.srcCoords=a,t[n]=r?VA(s,a):VA(a,s))}function X7(e){return e.nodeName.toUpperCase()==="CANVAS"}var GZ=/([&<>"'])/g,jZ={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Jn(e){return e==null?"":(e+"").replace(GZ,function(t,r){return jZ[r]})}var HZ=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,by=[],XZ=Yt.browser.firefox&&+Yt.browser.version.split(".")[0]<39;function kS(e,t,r,n){return r=r||{},n?WA(e,t,r):XZ&&t.layerX!=null&&t.layerX!==t.offsetX?(r.zrX=t.layerX,r.zrY=t.layerY):t.offsetX!=null?(r.zrX=t.offsetX,r.zrY=t.offsetY):WA(e,t,r),r}function WA(e,t,r){if(Yt.domSupported&&e.getBoundingClientRect){var n=t.clientX,i=t.clientY;if(X7(e)){var o=e.getBoundingClientRect();r.zrX=n-o.left,r.zrY=i-o.top;return}else if(TS(by,e,n,i)){r.zrX=by[0],r.zrY=by[1];return}}r.zrX=r.zrY=0}function Lk(e){return e||window.event}function Yn(e,t,r){if(t=Lk(t),t.zrX!=null)return t;var n=t.type,i=n&&n.indexOf("touch")>=0;if(i){var a=n!=="touchend"?t.targetTouches[0]:t.changedTouches[0];a&&kS(e,a,t,r)}else{kS(e,t,t,r);var o=YZ(t);t.zrDelta=o?o/120:-(t.detail||0)/3}var s=t.button;return t.which==null&&s!==void 0&&HZ.test(t.type)&&(t.which=s&1?1:s&2?3:s&4?2:0),t}function YZ(e){var t=e.wheelDelta;if(t)return t;var r=e.deltaX,n=e.deltaY;if(r==null||n==null)return t;var i=Math.abs(n!==0?n:r),o=n>0?-1:n<0?1:r>0?-1:1;return 3*i*o}function qZ(e,t,r,n){e.addEventListener(t,r,n)}function ZZ(e,t,r,n){e.removeEventListener(t,r,n)}var Kl=function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0};function GA(e){return e.which===2||e.which===3}var KZ=function(){function e(){this._track=[]}return e.prototype.recognize=function(t,r,n){return this._doTrack(t,r,n),this._recognize(t)},e.prototype.clear=function(){return this._track.length=0,this},e.prototype._doTrack=function(t,r,n){var i=t.touches;if(!!i){for(var o={points:[],touches:[],target:r,event:t},a=0,s=i.length;a<s;a++){var l=i[a],u=kS(n,l,{});o.points.push([u.zrX,u.zrY]),o.touches.push(l)}this._track.push(o)}},e.prototype._recognize=function(t){for(var r in wy)if(wy.hasOwnProperty(r)){var n=wy[r](this._track,t);if(n)return n}},e}();function jA(e){var t=e[1][0]-e[0][0],r=e[1][1]-e[0][1];return Math.sqrt(t*t+r*r)}function JZ(e){return[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]}var wy={pinch:function(e,t){var r=e.length;if(!!r){var n=(e[r-1]||{}).points,i=(e[r-2]||{}).points||n;if(i&&i.length>1&&n&&n.length>1){var o=jA(n)/jA(i);!isFinite(o)&&(o=1),t.pinchScale=o;var a=JZ(n);return t.pinchX=a[0],t.pinchY=a[1],{type:"pinch",target:e[0].target,event:t}}}}};function Yc(){return[1,0,0,1,0,0]}function Ik(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function Y7(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Ic(e,t,r){var n=t[0]*r[0]+t[2]*r[1],i=t[1]*r[0]+t[3]*r[1],o=t[0]*r[2]+t[2]*r[3],a=t[1]*r[2]+t[3]*r[3],s=t[0]*r[4]+t[2]*r[5]+t[4],l=t[1]*r[4]+t[3]*r[5]+t[5];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e}function PS(e,t,r){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+r[0],e[5]=t[5]+r[1],e}function Ok(e,t,r){var n=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(r),c=Math.cos(r);return e[0]=n*c+a*u,e[1]=-n*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}function QZ(e,t,r){var n=r[0],i=r[1];return e[0]=t[0]*n,e[1]=t[1]*i,e[2]=t[2]*n,e[3]=t[3]*i,e[4]=t[4]*n,e[5]=t[5]*i,e}function G1(e,t){var r=t[0],n=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=r*a-o*n;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-n*l,e[3]=r*l,e[4]=(n*s-a*i)*l,e[5]=(o*i-r*s)*l,e):null}var tK=function(){function e(t,r){this.x=t||0,this.y=r||0}return e.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},e.prototype.clone=function(){return new e(this.x,this.y)},e.prototype.set=function(t,r){return this.x=t,this.y=r,this},e.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},e.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},e.prototype.scale=function(t){this.x*=t,this.y*=t},e.prototype.scaleAndAdd=function(t,r){this.x+=t.x*r,this.y+=t.y*r},e.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},e.prototype.dot=function(t){return this.x*t.x+this.y*t.y},e.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},e.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},e.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},e.prototype.distance=function(t){var r=this.x-t.x,n=this.y-t.y;return Math.sqrt(r*r+n*n)},e.prototype.distanceSquare=function(t){var r=this.x-t.x,n=this.y-t.y;return r*r+n*n},e.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},e.prototype.transform=function(t){if(!!t){var r=this.x,n=this.y;return this.x=t[0]*r+t[2]*n+t[4],this.y=t[1]*r+t[3]*n+t[5],this}},e.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},e.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},e.set=function(t,r,n){t.x=r,t.y=n},e.copy=function(t,r){t.x=r.x,t.y=r.y},e.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},e.lenSquare=function(t){return t.x*t.x+t.y*t.y},e.dot=function(t,r){return t.x*r.x+t.y*r.y},e.add=function(t,r,n){t.x=r.x+n.x,t.y=r.y+n.y},e.sub=function(t,r,n){t.x=r.x-n.x,t.y=r.y-n.y},e.scale=function(t,r,n){t.x=r.x*n,t.y=r.y*n},e.scaleAndAdd=function(t,r,n,i){t.x=r.x+n.x*i,t.y=r.y+n.y*i},e.lerp=function(t,r,n,i){var o=1-i;t.x=o*r.x+i*n.x,t.y=o*r.y+i*n.y},e}();const Le=tK;var T0=Math.min,k0=Math.max,Xs=new Le,Ys=new Le,qs=new Le,Zs=new Le,Zf=new Le,Kf=new Le,eK=function(){function e(t,r,n,i){n<0&&(t=t+n,n=-n),i<0&&(r=r+i,i=-i),this.x=t,this.y=r,this.width=n,this.height=i}return e.prototype.union=function(t){var r=T0(t.x,this.x),n=T0(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=k0(t.x+t.width,this.x+this.width)-r:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=k0(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=r,this.y=n},e.prototype.applyTransform=function(t){e.applyTransform(this,this,t)},e.prototype.calculateTransform=function(t){var r=this,n=t.width/r.width,i=t.height/r.height,o=Yc();return PS(o,o,[-r.x,-r.y]),QZ(o,o,[n,i]),PS(o,o,[t.x,t.y]),o},e.prototype.intersect=function(t,r){if(!t)return!1;t instanceof e||(t=e.create(t));var n=this,i=n.x,o=n.x+n.width,a=n.y,s=n.y+n.height,l=t.x,u=t.x+t.width,c=t.y,f=t.y+t.height,h=!(o<l||u<i||s<c||f<a);if(r){var d=1/0,p=0,v=Math.abs(o-l),m=Math.abs(u-i),g=Math.abs(s-c),_=Math.abs(f-a),b=Math.min(v,m),w=Math.min(g,_);o<l||u<i?b>p&&(p=b,v<m?Le.set(Kf,-v,0):Le.set(Kf,m,0)):b<d&&(d=b,v<m?Le.set(Zf,v,0):Le.set(Zf,-m,0)),s<c||f<a?w>p&&(p=w,g<_?Le.set(Kf,0,-g):Le.set(Kf,0,_)):b<d&&(d=b,g<_?Le.set(Zf,0,g):Le.set(Zf,0,-_))}return r&&Le.copy(r,h?Zf:Kf),h},e.prototype.contain=function(t,r){var n=this;return t>=n.x&&t<=n.x+n.width&&r>=n.y&&r<=n.y+n.height},e.prototype.clone=function(){return new e(this.x,this.y,this.width,this.height)},e.prototype.copy=function(t){e.copy(this,t)},e.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},e.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},e.prototype.isZero=function(){return this.width===0||this.height===0},e.create=function(t){return new e(t.x,t.y,t.width,t.height)},e.copy=function(t,r){t.x=r.x,t.y=r.y,t.width=r.width,t.height=r.height},e.applyTransform=function(t,r,n){if(!n){t!==r&&e.copy(t,r);return}if(n[1]<1e-5&&n[1]>-1e-5&&n[2]<1e-5&&n[2]>-1e-5){var i=n[0],o=n[3],a=n[4],s=n[5];t.x=r.x*i+a,t.y=r.y*o+s,t.width=r.width*i,t.height=r.height*o,t.width<0&&(t.x+=t.width,t.width=-t.width),t.height<0&&(t.y+=t.height,t.height=-t.height);return}Xs.x=qs.x=r.x,Xs.y=Zs.y=r.y,Ys.x=Zs.x=r.x+r.width,Ys.y=qs.y=r.y+r.height,Xs.transform(n),Zs.transform(n),Ys.transform(n),qs.transform(n),t.x=T0(Xs.x,Ys.x,qs.x,Zs.x),t.y=T0(Xs.y,Ys.y,qs.y,Zs.y);var l=k0(Xs.x,Ys.x,qs.x,Zs.x),u=k0(Xs.y,Ys.y,qs.y,Zs.y);t.width=l-t.x,t.height=u-t.y},e}();const le=eK;var q7="silent";function rK(e,t,r){return{type:e,event:r,target:t.target,topTarget:t.topTarget,cancelBubble:!1,offsetX:r.zrX,offsetY:r.zrY,gestureEvent:r.gestureEvent,pinchX:r.pinchX,pinchY:r.pinchY,pinchScale:r.pinchScale,wheelDelta:r.zrDelta,zrByTouch:r.zrByTouch,which:r.which,stop:nK}}function nK(){Kl(this.event)}var iK=function(e){Ce(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.handler=null,r}return t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(Gi),Jf=function(){function e(t,r){this.x=t,this.y=r}return e}(),oK=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Sy=new le(0,0,0,0),Z7=function(e){Ce(t,e);function t(r,n,i,o,a){var s=e.call(this)||this;return s._hovered=new Jf(0,0),s.storage=r,s.painter=n,s.painterRoot=o,s._pointerSize=a,i=i||new iK,s.proxy=null,s.setHandlerProxy(i),s._draggingMgr=new $Z(s),s}return t.prototype.setHandlerProxy=function(r){this.proxy&&this.proxy.dispose(),r&&($(oK,function(n){r.on&&r.on(n,this[n],this)},this),r.handler=this),this.proxy=r},t.prototype.mousemove=function(r){var n=r.zrX,i=r.zrY,o=K7(this,n,i),a=this._hovered,s=a.target;s&&!s.__zr&&(a=this.findHover(a.x,a.y),s=a.target);var l=this._hovered=o?new Jf(n,i):this.findHover(n,i),u=l.target,c=this.proxy;c.setCursor&&c.setCursor(u?u.cursor:"default"),s&&u!==s&&this.dispatchToElement(a,"mouseout",r),this.dispatchToElement(l,"mousemove",r),u&&u!==s&&this.dispatchToElement(l,"mouseover",r)},t.prototype.mouseout=function(r){var n=r.zrEventControl;n!=="only_globalout"&&this.dispatchToElement(this._hovered,"mouseout",r),n!=="no_globalout"&&this.trigger("globalout",{type:"globalout",event:r})},t.prototype.resize=function(){this._hovered=new Jf(0,0)},t.prototype.dispatch=function(r,n){var i=this[r];i&&i.call(this,n)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(r){var n=this.proxy;n.setCursor&&n.setCursor(r)},t.prototype.dispatchToElement=function(r,n,i){r=r||{};var o=r.target;if(!(o&&o.silent)){for(var a="on"+n,s=rK(n,r,i);o&&(o[a]&&(s.cancelBubble=!!o[a].call(o,s)),o.trigger(n,s),o=o.__hostTarget?o.__hostTarget:o.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(n,s),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(l){typeof l[a]=="function"&&l[a].call(l,s),l.trigger&&l.trigger(n,s)}))}},t.prototype.findHover=function(r,n,i){var o=this.storage.getDisplayList(),a=new Jf(r,n);if(HA(o,a,r,n,i),this._pointerSize&&!a.target){for(var s=[],l=this._pointerSize,u=l/2,c=new le(r-u,n-u,l,l),f=o.length-1;f>=0;f--){var h=o[f];h!==i&&!h.ignore&&!h.ignoreCoarsePointer&&(!h.parent||!h.parent.ignoreCoarsePointer)&&(Sy.copy(h.getBoundingRect()),h.transform&&Sy.applyTransform(h.transform),Sy.intersect(c)&&s.push(h))}if(s.length)for(var d=4,p=Math.PI/12,v=Math.PI*2,m=0;m<u;m+=d)for(var g=0;g<v;g+=p){var _=r+m*Math.cos(g),b=n+m*Math.sin(g);if(HA(s,a,_,b,i),a.target)return a}}return a},t.prototype.processGesture=function(r,n){this._gestureMgr||(this._gestureMgr=new KZ);var i=this._gestureMgr;n==="start"&&i.clear();var o=i.recognize(r,this.findHover(r.zrX,r.zrY,null).target,this.proxy.dom);if(n==="end"&&i.clear(),o){var a=o.type;r.gestureEvent=a;var s=new Jf;s.target=o.target,this.dispatchToElement(s,a,o.event)}},t}(Gi);$(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Z7.prototype[e]=function(t){var r=t.zrX,n=t.zrY,i=K7(this,r,n),o,a;if((e!=="mouseup"||!i)&&(o=this.findHover(r,n),a=o.target),e==="mousedown")this._downEl=a,this._downPoint=[t.zrX,t.zrY],this._upEl=a;else if(e==="mouseup")this._upEl=a;else if(e==="click"){if(this._downEl!==this._upEl||!this._downPoint||DZ(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(o,e,t)}});function aK(e,t,r){if(e[e.rectHover?"rectContain":"contain"](t,r)){for(var n=e,i=void 0,o=!1;n;){if(n.ignoreClip&&(o=!0),!o){var a=n.getClipPath();if(a&&!a.contain(t,r))return!1;n.silent&&(i=!0)}var s=n.__hostTarget;n=s||n.parent}return i?q7:!0}return!1}function HA(e,t,r,n,i){for(var o=e.length-1;o>=0;o--){var a=e[o],s=void 0;if(a!==i&&!a.ignore&&(s=aK(a,r,n))&&(!t.topTarget&&(t.topTarget=a),s!==q7)){t.target=a;break}}}function K7(e,t,r){var n=e.painter;return t<0||t>n.getWidth()||r<0||r>n.getHeight()}const sK=Z7;var J7=32,Qf=7;function lK(e){for(var t=0;e>=J7;)t|=e&1,e>>=1;return e+t}function XA(e,t,r,n){var i=t+1;if(i===r)return 1;if(n(e[i++],e[t])<0){for(;i<r&&n(e[i],e[i-1])<0;)i++;uK(e,t,i)}else for(;i<r&&n(e[i],e[i-1])>=0;)i++;return i-t}function uK(e,t,r){for(r--;t<r;){var n=e[t];e[t++]=e[r],e[r--]=n}}function YA(e,t,r,n,i){for(n===t&&n++;n<r;n++){for(var o=e[n],a=t,s=n,l;a<s;)l=a+s>>>1,i(o,e[l])<0?s=l:a=l+1;var u=n-a;switch(u){case 3:e[a+3]=e[a+2];case 2:e[a+2]=e[a+1];case 1:e[a+1]=e[a];break;default:for(;u>0;)e[a+u]=e[a+u-1],u--}e[a]=o}}function Ty(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])>0){for(s=n-i;l<s&&o(e,t[r+i+l])>0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}else{for(s=i+1;l<s&&o(e,t[r+i-l])<=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])>0?a=c+1:l=c}return l}function ky(e,t,r,n,i,o){var a=0,s=0,l=1;if(o(e,t[r+i])<0){for(s=i+1;l<s&&o(e,t[r+i-l])<0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s);var u=a;a=i-l,l=i-u}else{for(s=n-i;l<s&&o(e,t[r+i+l])>=0;)a=l,l=(l<<1)+1,l<=0&&(l=s);l>s&&(l=s),a+=i,l+=i}for(a++;a<l;){var c=a+(l-a>>>1);o(e,t[r+c])<0?l=c:a=c+1}return l}function cK(e,t){var r=Qf,n,i,o=0;e.length;var a=[];n=[],i=[];function s(d,p){n[o]=d,i[o]=p,o+=1}function l(){for(;o>1;){var d=o-2;if(d>=1&&i[d-1]<=i[d]+i[d+1]||d>=2&&i[d-2]<=i[d]+i[d-1])i[d-1]<i[d+1]&&d--;else if(i[d]>i[d+1])break;c(d)}}function u(){for(;o>1;){var d=o-2;d>0&&i[d-1]<i[d+1]&&d--,c(d)}}function c(d){var p=n[d],v=i[d],m=n[d+1],g=i[d+1];i[d]=v+g,d===o-3&&(n[d+1]=n[d+2],i[d+1]=i[d+2]),o--;var _=ky(e[m],e,p,v,0,t);p+=_,v-=_,v!==0&&(g=Ty(e[p+v-1],e,m,g,g-1,t),g!==0&&(v<=g?f(p,v,m,g):h(p,v,m,g)))}function f(d,p,v,m){var g=0;for(g=0;g<p;g++)a[g]=e[d+g];var _=0,b=v,w=d;if(e[w++]=e[b++],--m===0){for(g=0;g<p;g++)e[w+g]=a[_+g];return}if(p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=a[_];return}for(var T=r,S,k,C;;){S=0,k=0,C=!1;do if(t(e[b],a[_])<0){if(e[w++]=e[b++],k++,S=0,--m===0){C=!0;break}}else if(e[w++]=a[_++],S++,k=0,--p===1){C=!0;break}while((S|k)<T);if(C)break;do{if(S=ky(e[b],a,_,p,0,t),S!==0){for(g=0;g<S;g++)e[w+g]=a[_+g];if(w+=S,_+=S,p-=S,p<=1){C=!0;break}}if(e[w++]=e[b++],--m===0){C=!0;break}if(k=Ty(a[_],e,b,m,0,t),k!==0){for(g=0;g<k;g++)e[w+g]=e[b+g];if(w+=k,b+=k,m-=k,m===0){C=!0;break}}if(e[w++]=a[_++],--p===1){C=!0;break}T--}while(S>=Qf||k>=Qf);if(C)break;T<0&&(T=0),T+=2}if(r=T,r<1&&(r=1),p===1){for(g=0;g<m;g++)e[w+g]=e[b+g];e[w+m]=a[_]}else{if(p===0)throw new Error;for(g=0;g<p;g++)e[w+g]=a[_+g]}}function h(d,p,v,m){var g=0;for(g=0;g<m;g++)a[g]=e[v+g];var _=d+p-1,b=m-1,w=v+m-1,T=0,S=0;if(e[w--]=e[_--],--p===0){for(T=w-(m-1),g=0;g<m;g++)e[T+g]=a[g];return}if(m===1){for(w-=p,_-=p,S=w+1,T=_+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=a[b];return}for(var k=r;;){var C=0,E=0,M=!1;do if(t(a[b],e[_])<0){if(e[w--]=e[_--],C++,E=0,--p===0){M=!0;break}}else if(e[w--]=a[b--],E++,C=0,--m===1){M=!0;break}while((C|E)<k);if(M)break;do{if(C=p-ky(a[b],e,d,p,p-1,t),C!==0){for(w-=C,_-=C,p-=C,S=w+1,T=_+1,g=C-1;g>=0;g--)e[S+g]=e[T+g];if(p===0){M=!0;break}}if(e[w--]=a[b--],--m===1){M=!0;break}if(E=m-Ty(e[_],a,0,m,m-1,t),E!==0){for(w-=E,b-=E,m-=E,S=w+1,T=b+1,g=0;g<E;g++)e[S+g]=a[T+g];if(m<=1){M=!0;break}}if(e[w--]=e[_--],--p===0){M=!0;break}k--}while(C>=Qf||E>=Qf);if(M)break;k<0&&(k=0),k+=2}if(r=k,r<1&&(r=1),m===1){for(w-=p,_-=p,S=w+1,T=_+1,g=p-1;g>=0;g--)e[S+g]=e[T+g];e[w]=a[b]}else{if(m===0)throw new Error;for(T=w-(m-1),g=0;g<m;g++)e[T+g]=a[g]}}return{mergeRuns:l,forceMergeRuns:u,pushRun:s}}function Fg(e,t,r,n){r||(r=0),n||(n=e.length);var i=n-r;if(!(i<2)){var o=0;if(i<J7){o=XA(e,r,n,t),YA(e,r,n,r+o,t);return}var a=cK(e,t),s=lK(i);do{if(o=XA(e,r,n,t),o<s){var l=i;l>s&&(l=s),YA(e,r,r+l,r+o,t),o=l}a.pushRun(r,o),a.mergeRuns(),i-=o,r+=o}while(i!==0);a.forceMergeRuns()}}var Mn=1,Xh=2,pc=4,qA=!1;function Py(){qA||(qA=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function ZA(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var fK=function(){function e(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=ZA}return e.prototype.traverse=function(t,r){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,r)},e.prototype.getDisplayList=function(t,r){r=r||!1;var n=this._displayList;return(t||!n.length)&&this.updateDisplayList(r),n},e.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var r=this._roots,n=this._displayList,i=0,o=r.length;i<o;i++)this._updateAndAddDisplayable(r[i],null,t);n.length=this._displayListLen,Fg(n,ZA)},e.prototype._updateAndAddDisplayable=function(t,r,n){if(!(t.ignore&&!n)){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)r=null;else if(i){r?r=r.slice():r=[];for(var o=i,a=t;o;)o.parent=a,o.updateTransform(),r.push(o),a=o,o=o.getClipPath()}if(t.childrenRef){for(var s=t.childrenRef(),l=0;l<s.length;l++){var u=s[l];t.__dirty&&(u.__dirty|=Mn),this._updateAndAddDisplayable(u,r,n)}t.__dirty=0}else{var c=t;r&&r.length?c.__clipPaths=r:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Py(),c.z=0),isNaN(c.z2)&&(Py(),c.z2=0),isNaN(c.zlevel)&&(Py(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var f=t.getDecalElement&&t.getDecalElement();f&&this._updateAndAddDisplayable(f,r,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,r,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,r,n)}},e.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},e.prototype.delRoot=function(t){if(t instanceof Array){for(var r=0,n=t.length;r<n;r++)this.delRoot(t[r]);return}var i=fe(this._roots,t);i>=0&&this._roots.splice(i,1)},e.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},e.prototype.getRoots=function(){return this._roots},e.prototype.dispose=function(){this._displayList=null,this._roots=null},e}();const hK=fK;var Q7;Q7=Yt.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){return setTimeout(e,16)};const ES=Q7;var $g={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return .5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return e===0?0:Math.pow(1024,e-1)},exponentialOut:function(e){return e===1?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return e===0?0:e===1?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(-Math.pow(2,-10*(e-1))+2)},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),-(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)))},elasticOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},elasticInOut:function(e){var t,r=.1,n=.4;return e===0?0:e===1?1:(!r||r<1?(r=1,t=n/4):t=n*Math.asin(1/r)/(2*Math.PI),(e*=2)<1?-.5*(r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)):r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},backIn:function(e){var t=1.70158;return e*e*((t+1)*e-t)},backOut:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?.5*(e*e*((t+1)*e-t)):.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-$g.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?$g.bounceIn(e*2)*.5:$g.bounceOut(e*2-1)*.5+.5}};const t9=$g;var P0=Math.pow,ws=Math.sqrt,Em=1e-8,e9=1e-4,KA=ws(3),E0=1/3,yo=df(),Qn=df(),Oc=df();function ds(e){return e>-Em&&e<Em}function r9(e){return e>Em||e<-Em}function cr(e,t,r,n,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*n+3*o*r)}function JA(e,t,r,n,i){var o=1-i;return 3*(((t-e)*o+2*(r-t)*i)*o+(n-r)*i*i)}function Cm(e,t,r,n,i,o){var a=n+3*(t-r)-e,s=3*(r-t*2+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,d=0;if(ds(c)&&ds(f))if(ds(s))o[0]=0;else{var p=-l/s;p>=0&&p<=1&&(o[d++]=p)}else{var v=f*f-4*c*h;if(ds(v)){var m=f/c,p=-s/a+m,g=-m/2;p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g)}else if(v>0){var _=ws(v),b=c*s+1.5*a*(-f+_),w=c*s+1.5*a*(-f-_);b<0?b=-P0(-b,E0):b=P0(b,E0),w<0?w=-P0(-w,E0):w=P0(w,E0);var p=(-s-(b+w))/(3*a);p>=0&&p<=1&&(o[d++]=p)}else{var T=(2*c*s-3*a*f)/(2*ws(c*c*c)),S=Math.acos(T)/3,k=ws(c),C=Math.cos(S),p=(-s-2*k*C)/(3*a),g=(-s+k*(C+KA*Math.sin(S)))/(3*a),E=(-s+k*(C-KA*Math.sin(S)))/(3*a);p>=0&&p<=1&&(o[d++]=p),g>=0&&g<=1&&(o[d++]=g),E>=0&&E<=1&&(o[d++]=E)}}return d}function n9(e,t,r,n,i){var o=6*r-12*t+6*e,a=9*t+3*n-3*e-9*r,s=3*t-3*e,l=0;if(ds(a)){if(r9(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(ds(c))i[0]=-o/(2*a);else if(c>0){var f=ws(c),u=(-o+f)/(2*a),h=(-o-f)/(2*a);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function Am(e,t,r,n,i,o){var a=(t-e)*i+e,s=(r-t)*i+t,l=(n-r)*i+r,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=n}function dK(e,t,r,n,i,o,a,s,l,u,c){var f,h=.005,d=1/0,p,v,m,g;yo[0]=l,yo[1]=u;for(var _=0;_<1;_+=.05)Qn[0]=cr(e,r,i,a,_),Qn[1]=cr(t,n,o,s,_),m=Lc(yo,Qn),m<d&&(f=_,d=m);d=1/0;for(var b=0;b<32&&!(h<e9);b++)p=f-h,v=f+h,Qn[0]=cr(e,r,i,a,p),Qn[1]=cr(t,n,o,s,p),m=Lc(Qn,yo),p>=0&&m<d?(f=p,d=m):(Oc[0]=cr(e,r,i,a,v),Oc[1]=cr(t,n,o,s,v),g=Lc(Oc,yo),v<=1&&g<d?(f=v,d=g):h*=.5);return c&&(c[0]=cr(e,r,i,a,f),c[1]=cr(t,n,o,s,f)),ws(d)}function pK(e,t,r,n,i,o,a,s,l){for(var u=e,c=t,f=0,h=1/l,d=1;d<=l;d++){var p=d*h,v=cr(e,r,i,a,p),m=cr(t,n,o,s,p),g=v-u,_=m-c;f+=Math.sqrt(g*g+_*_),u=v,c=m}return f}function Br(e,t,r,n){var i=1-n;return i*(i*e+2*n*t)+n*n*r}function QA(e,t,r,n){return 2*((1-n)*(t-e)+n*(r-t))}function vK(e,t,r,n,i){var o=e-2*t+r,a=2*(t-e),s=e-n,l=0;if(ds(o)){if(r9(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(ds(c)){var u=-a/(2*o);u>=0&&u<=1&&(i[l++]=u)}else if(c>0){var f=ws(c),u=(-a+f)/(2*o),h=(-a-f)/(2*o);u>=0&&u<=1&&(i[l++]=u),h>=0&&h<=1&&(i[l++]=h)}}return l}function i9(e,t,r){var n=e+r-2*t;return n===0?.5:(e-t)/n}function Mm(e,t,r,n,i){var o=(t-e)*n+e,a=(r-t)*n+t,s=(a-o)*n+o;i[0]=e,i[1]=o,i[2]=s,i[3]=s,i[4]=a,i[5]=r}function gK(e,t,r,n,i,o,a,s,l){var u,c=.005,f=1/0;yo[0]=a,yo[1]=s;for(var h=0;h<1;h+=.05){Qn[0]=Br(e,r,i,h),Qn[1]=Br(t,n,o,h);var d=Lc(yo,Qn);d<f&&(u=h,f=d)}f=1/0;for(var p=0;p<32&&!(c<e9);p++){var v=u-c,m=u+c;Qn[0]=Br(e,r,i,v),Qn[1]=Br(t,n,o,v);var d=Lc(Qn,yo);if(v>=0&&d<f)u=v,f=d;else{Oc[0]=Br(e,r,i,m),Oc[1]=Br(t,n,o,m);var g=Lc(Oc,yo);m<=1&&g<f?(u=m,f=g):c*=.5}}return l&&(l[0]=Br(e,r,i,u),l[1]=Br(t,n,o,u)),ws(f)}function mK(e,t,r,n,i,o,a){for(var s=e,l=t,u=0,c=1/a,f=1;f<=a;f++){var h=f*c,d=Br(e,r,i,h),p=Br(t,n,o,h),v=d-s,m=p-l;u+=Math.sqrt(v*v+m*m),s=d,l=p}return u}var _K=/cubic-bezier\(([0-9,\.e ]+)\)/;function o9(e){var t=e&&_K.exec(e);if(t){var r=t[1].split(","),n=+To(r[0]),i=+To(r[1]),o=+To(r[2]),a=+To(r[3]);if(isNaN(n+i+o+a))return;var s=[];return function(l){return l<=0?0:l>=1?1:Cm(0,n,o,1,l,s)&&cr(0,i,a,1,s[0])}}}var yK=function(){function e(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||jr,this.ondestroy=t.ondestroy||jr,this.onrestart=t.onrestart||jr,t.easing&&this.setEasing(t.easing)}return e.prototype.step=function(t,r){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),this._paused){this._pausedTime+=r;return}var n=this._life,i=t-this._startTime-this._pausedTime,o=i/n;o<0&&(o=0),o=Math.min(o,1);var a=this.easingFunc,s=a?a(o):o;if(this.onframe(s),o===1)if(this.loop){var l=i%n;this._startTime=t-l,this._pausedTime=0,this.onrestart()}else return!0;return!1},e.prototype.pause=function(){this._paused=!0},e.prototype.resume=function(){this._paused=!1},e.prototype.setEasing=function(t){this.easing=t,this.easingFunc=Ut(t)?t:t9[t]||o9(t)},e}();const bK=yK;var a9=function(){function e(t){this.value=t}return e}(),wK=function(){function e(){this._len=0}return e.prototype.insert=function(t){var r=new a9(t);return this.insertEntry(r),r},e.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},e.prototype.remove=function(t){var r=t.prev,n=t.next;r?r.next=n:this.head=n,n?n.prev=r:this.tail=r,t.next=t.prev=null,this._len--},e.prototype.len=function(){return this._len},e.prototype.clear=function(){this.head=this.tail=null,this._len=0},e}(),SK=function(){function e(t){this._list=new wK,this._maxSize=10,this._map={},this._maxSize=t}return e.prototype.put=function(t,r){var n=this._list,i=this._map,o=null;if(i[t]==null){var a=n.len(),s=this._lastRemovedEntry;if(a>=this._maxSize&&a>0){var l=n.head;n.remove(l),delete i[l.key],o=l.value,this._lastRemovedEntry=l}s?s.value=r:s=new a9(r),s.key=t,n.insertEntry(s),i[t]=s}return o},e.prototype.get=function(t){var r=this._map[t],n=this._list;if(r!=null)return r!==n.tail&&(n.remove(r),n.insertEntry(r)),r.value},e.prototype.clear=function(){this._list.clear(),this._map={}},e.prototype.len=function(){return this._list.len()},e}();const xp=SK;var tM={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Di(e){return e=Math.round(e),e<0?0:e>255?255:e}function TK(e){return e=Math.round(e),e<0?0:e>360?360:e}function Xd(e){return e<0?0:e>1?1:e}function Ey(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Di(parseFloat(t)/100*255):Di(parseInt(t,10))}function Bl(e){var t=e;return t.length&&t.charAt(t.length-1)==="%"?Xd(parseFloat(t)/100):Xd(parseFloat(t))}function Cy(e,t,r){return r<0?r+=1:r>1&&(r-=1),r*6<1?e+(t-e)*r*6:r*2<1?t:r*3<2?e+(t-e)*(2/3-r)*6:e}function ps(e,t,r){return e+(t-e)*r}function Xn(e,t,r,n,i){return e[0]=t,e[1]=r,e[2]=n,e[3]=i,e}function CS(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var s9=new xp(20),C0=null;function Ru(e,t){C0&&CS(C0,t),C0=s9.put(e,C0||t.slice())}function ei(e,t){if(!!e){t=t||[];var r=s9.get(e);if(r)return CS(t,r);e=e+"";var n=e.replace(/ /g,"").toLowerCase();if(n in tM)return CS(t,tM[n]),Ru(e,t),t;var i=n.length;if(n.charAt(0)==="#"){if(i===4||i===5){var o=parseInt(n.slice(1,4),16);if(!(o>=0&&o<=4095)){Xn(t,0,0,0,1);return}return Xn(t,(o&3840)>>4|(o&3840)>>8,o&240|(o&240)>>4,o&15|(o&15)<<4,i===5?parseInt(n.slice(4),16)/15:1),Ru(e,t),t}else if(i===7||i===9){var o=parseInt(n.slice(1,7),16);if(!(o>=0&&o<=16777215)){Xn(t,0,0,0,1);return}return Xn(t,(o&16711680)>>16,(o&65280)>>8,o&255,i===9?parseInt(n.slice(7),16)/255:1),Ru(e,t),t}return}var a=n.indexOf("("),s=n.indexOf(")");if(a!==-1&&s+1===i){var l=n.substr(0,a),u=n.substr(a+1,s-(a+1)).split(","),c=1;switch(l){case"rgba":if(u.length!==4)return u.length===3?Xn(t,+u[0],+u[1],+u[2],1):Xn(t,0,0,0,1);c=Bl(u.pop());case"rgb":if(u.length>=3)return Xn(t,Ey(u[0]),Ey(u[1]),Ey(u[2]),u.length===3?c:Bl(u[3])),Ru(e,t),t;Xn(t,0,0,0,1);return;case"hsla":if(u.length!==4){Xn(t,0,0,0,1);return}return u[3]=Bl(u[3]),AS(u,t),Ru(e,t),t;case"hsl":if(u.length!==3){Xn(t,0,0,0,1);return}return AS(u,t),Ru(e,t),t;default:return}}Xn(t,0,0,0,1)}}function AS(e,t){var r=(parseFloat(e[0])%360+360)%360/360,n=Bl(e[1]),i=Bl(e[2]),o=i<=.5?i*(n+1):i+n-i*n,a=i*2-o;return t=t||[],Xn(t,Di(Cy(a,o,r+1/3)*255),Di(Cy(a,o,r)*255),Di(Cy(a,o,r-1/3)*255),1),e.length===4&&(t[3]=e[3]),t}function kK(e){if(!!e){var t=e[0]/255,r=e[1]/255,n=e[2]/255,i=Math.min(t,r,n),o=Math.max(t,r,n),a=o-i,s=(o+i)/2,l,u;if(a===0)l=0,u=0;else{s<.5?u=a/(o+i):u=a/(2-o-i);var c=((o-t)/6+a/2)/a,f=((o-r)/6+a/2)/a,h=((o-n)/6+a/2)/a;t===o?l=h-f:r===o?l=1/3+c-h:n===o&&(l=2/3+f-c),l<0&&(l+=1),l>1&&(l-=1)}var d=[l*360,u,s];return e[3]!=null&&d.push(e[3]),d}}function eM(e,t){var r=ei(e);if(r){for(var n=0;n<3;n++)t<0?r[n]=r[n]*(1-t)|0:r[n]=(255-r[n])*t+r[n]|0,r[n]>255?r[n]=255:r[n]<0&&(r[n]=0);return ha(r,r.length===4?"rgba":"rgb")}}function Ay(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){r=r||[];var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=t[i],s=t[o],l=n-i;return r[0]=Di(ps(a[0],s[0],l)),r[1]=Di(ps(a[1],s[1],l)),r[2]=Di(ps(a[2],s[2],l)),r[3]=Xd(ps(a[3],s[3],l)),r}}function PK(e,t,r){if(!(!(t&&t.length)||!(e>=0&&e<=1))){var n=e*(t.length-1),i=Math.floor(n),o=Math.ceil(n),a=ei(t[i]),s=ei(t[o]),l=n-i,u=ha([Di(ps(a[0],s[0],l)),Di(ps(a[1],s[1],l)),Di(ps(a[2],s[2],l)),Xd(ps(a[3],s[3],l))],"rgba");return r?{color:u,leftIndex:i,rightIndex:o,value:n}:u}}function My(e,t,r,n){var i=ei(e);if(e)return i=kK(i),t!=null&&(i[0]=TK(t)),r!=null&&(i[1]=Bl(r)),n!=null&&(i[2]=Bl(n)),ha(AS(i),"rgba")}function MS(e,t){var r=ei(e);if(r&&t!=null)return r[3]=Xd(t),ha(r,"rgba")}function ha(e,t){if(!(!e||!e.length)){var r=e[0]+","+e[1]+","+e[2];return(t==="rgba"||t==="hsva"||t==="hsla")&&(r+=","+e[3]),t+"("+r+")"}}function xm(e,t){var r=ei(e);return r?(.299*r[0]+.587*r[1]+.114*r[2])*r[3]/255+(1-r[3])*t:0}function EK(e){return e.type==="linear"}function CK(e){return e.type==="radial"}(function(){return Yt.hasGlobalWindow&&Ut(window.btoa)?function(e){return window.btoa(unescape(e))}:typeof Buffer<"u"?function(e){return Buffer.from(e).toString("base64")}:function(e){return null}})();var xS=Array.prototype.slice;function ea(e,t,r){return(t-e)*r+e}function xy(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=ea(t[o],r[o],n);return e}function AK(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=ea(t[a][s],r[a][s],n)}return e}function A0(e,t,r,n){for(var i=t.length,o=0;o<i;o++)e[o]=t[o]+r[o]*n;return e}function rM(e,t,r,n){for(var i=t.length,o=i&&t[0].length,a=0;a<i;a++){e[a]||(e[a]=[]);for(var s=0;s<o;s++)e[a][s]=t[a][s]+r[a][s]*n}return e}function MK(e,t){for(var r=e.length,n=t.length,i=r>n?t:e,o=Math.min(r,n),a=i[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(r,n);s++)i.push({offset:a.offset,color:a.color.slice()})}function xK(e,t,r){var n=e,i=t;if(!(!n.push||!i.push)){var o=n.length,a=i.length;if(o!==a){var s=o>a;if(s)n.length=a;else for(var l=o;l<a;l++)n.push(r===1?i[l]:xS.call(i[l]))}for(var u=n[0]&&n[0].length,l=0;l<n.length;l++)if(r===1)isNaN(n[l])&&(n[l]=i[l]);else for(var c=0;c<u;c++)isNaN(n[l][c])&&(n[l][c]=i[l][c])}}function md(e){if(Xr(e)){var t=e.length;if(Xr(e[0])){for(var r=[],n=0;n<t;n++)r.push(xS.call(e[n]));return r}return xS.call(e)}return e}function Bg(e){return e[0]=Math.floor(e[0])||0,e[1]=Math.floor(e[1])||0,e[2]=Math.floor(e[2])||0,e[3]=e[3]==null?1:e[3],"rgba("+e.join(",")+")"}function LK(e){return Xr(e&&e[0])?2:1}var M0=0,zg=1,l9=2,Yh=3,LS=4,IS=5,nM=6;function iM(e){return e===LS||e===IS}function x0(e){return e===zg||e===l9}var th=[0,0,0,0],IK=function(){function e(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return e.prototype.isFinished=function(){return this._finished},e.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},e.prototype.needsAnimate=function(){return this.keyframes.length>=1},e.prototype.getAdditiveTrack=function(){return this._additiveTrack},e.prototype.addKeyframe=function(t,r,n){this._needsSort=!0;var i=this.keyframes,o=i.length,a=!1,s=nM,l=r;if(Xr(r)){var u=LK(r);s=u,(u===1&&!Se(r[0])||u===2&&!Se(r[0][0]))&&(a=!0)}else if(Se(r)&&!km(r))s=M0;else if(Mt(r))if(!isNaN(+r))s=M0;else{var c=ei(r);c&&(l=c,s=Yh)}else if(U1(r)){var f=at({},l);f.colorStops=Lt(r.colorStops,function(d){return{offset:d.offset,color:ei(d.color)}}),EK(r)?s=LS:CK(r)&&(s=IS),l=f}o===0?this.valType=s:(s!==this.valType||s===nM)&&(a=!0),this.discrete=this.discrete||a;var h={time:t,value:l,rawValue:r,percent:0};return n&&(h.easing=n,h.easingFunc=Ut(n)?n:t9[n]||o9(n)),i.push(h),h},e.prototype.prepare=function(t,r){var n=this.keyframes;this._needsSort&&n.sort(function(v,m){return v.time-m.time});for(var i=this.valType,o=n.length,a=n[o-1],s=this.discrete,l=x0(i),u=iM(i),c=0;c<o;c++){var f=n[c],h=f.value,d=a.value;f.percent=f.time/t,s||(l&&c!==o-1?xK(h,d,i):u&&MK(h.colorStops,d.colorStops))}if(!s&&i!==IS&&r&&this.needsAnimate()&&r.needsAnimate()&&i===r.valType&&!r._finished){this._additiveTrack=r;for(var p=n[0].value,c=0;c<o;c++)i===M0?n[c].additiveValue=n[c].value-p:i===Yh?n[c].additiveValue=A0([],n[c].value,p,-1):x0(i)&&(n[c].additiveValue=i===zg?A0([],n[c].value,p,-1):rM([],n[c].value,p,-1))}},e.prototype.step=function(t,r){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n=this._additiveTrack!=null,i=n?"additiveValue":"value",o=this.valType,a=this.keyframes,s=a.length,l=this.propName,u=o===Yh,c,f=this._lastFr,h=Math.min,d,p;if(s===1)d=p=a[0];else{if(r<0)c=0;else if(r<this._lastFrP){var v=h(f+1,s-1);for(c=v;c>=0&&!(a[c].percent<=r);c--);c=h(c,s-2)}else{for(c=f;c<s&&!(a[c].percent>r);c++);c=h(c-1,s-2)}p=a[c+1],d=a[c]}if(!!(d&&p)){this._lastFr=c,this._lastFrP=r;var m=p.percent-d.percent,g=m===0?1:h((r-d.percent)/m,1);p.easingFunc&&(g=p.easingFunc(g));var _=n?this._additiveValue:u?th:t[l];if((x0(o)||u)&&!_&&(_=this._additiveValue=[]),this.discrete)t[l]=g<1?d.rawValue:p.rawValue;else if(x0(o))o===zg?xy(_,d[i],p[i],g):AK(_,d[i],p[i],g);else if(iM(o)){var b=d[i],w=p[i],T=o===LS;t[l]={type:T?"linear":"radial",x:ea(b.x,w.x,g),y:ea(b.y,w.y,g),colorStops:Lt(b.colorStops,function(k,C){var E=w.colorStops[C];return{offset:ea(k.offset,E.offset,g),color:Bg(xy([],k.color,E.color,g))}}),global:w.global},T?(t[l].x2=ea(b.x2,w.x2,g),t[l].y2=ea(b.y2,w.y2,g)):t[l].r=ea(b.r,w.r,g)}else if(u)xy(_,d[i],p[i],g),n||(t[l]=Bg(_));else{var S=ea(d[i],p[i],g);n?this._additiveValue=S:t[l]=S}n&&this._addToTarget(t)}}},e.prototype._addToTarget=function(t){var r=this.valType,n=this.propName,i=this._additiveValue;r===M0?t[n]=t[n]+i:r===Yh?(ei(t[n],th),A0(th,th,i,1),t[n]=Bg(th)):r===zg?A0(t[n],t[n],i,1):r===l9&&rM(t[n],t[n],i,1)},e}(),OK=function(){function e(t,r,n,i){if(this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=r,r&&i){Ak("Can' use additive animation on looped animation.");return}this._additiveAnimators=i,this._allowDiscrete=n}return e.prototype.getMaxTime=function(){return this._maxTime},e.prototype.getDelay=function(){return this._delay},e.prototype.getLoop=function(){return this._loop},e.prototype.getTarget=function(){return this._target},e.prototype.changeTarget=function(t){this._target=t},e.prototype.when=function(t,r,n){return this.whenWithKeys(t,r,ve(r),n)},e.prototype.whenWithKeys=function(t,r,n,i){for(var o=this._tracks,a=0;a<n.length;a++){var s=n[a],l=o[s];if(!l){l=o[s]=new IK(s);var u=void 0,c=this._getAdditiveTrack(s);if(c){var f=c.keyframes,h=f[f.length-1];u=h&&h.value,c.valType===Yh&&u&&(u=Bg(u))}else u=this._target[s];if(u==null)continue;t>0&&l.addKeyframe(0,md(u),i),this._trackKeys.push(s)}l.addKeyframe(t,md(r[s]),i)}return this._maxTime=Math.max(this._maxTime,t),this},e.prototype.pause=function(){this._clip.pause(),this._paused=!0},e.prototype.resume=function(){this._clip.resume(),this._paused=!1},e.prototype.isPaused=function(){return!!this._paused},e.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},e.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var r=t.length,n=0;n<r;n++)t[n].call(this)},e.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,r=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,r)for(var n=0;n<r.length;n++)r[n].call(this)},e.prototype._setTracksFinished=function(){for(var t=this._tracks,r=this._trackKeys,n=0;n<r.length;n++)t[r[n]].setFinished()},e.prototype._getAdditiveTrack=function(t){var r,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var o=n[i].getTrack(t);o&&(r=o)}return r},e.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var r=this,n=[],i=this._maxTime||0,o=0;o<this._trackKeys.length;o++){var a=this._trackKeys[o],s=this._tracks[a],l=this._getAdditiveTrack(a),u=s.keyframes,c=u.length;if(s.prepare(i,l),s.needsAnimate())if(!this._allowDiscrete&&s.discrete){var f=u[c-1];f&&(r._target[s.propName]=f.rawValue),s.setFinished()}else n.push(s)}if(n.length||this._force){var h=new bK({life:i,loop:this._loop,delay:this._delay||0,onframe:function(d){r._started=2;var p=r._additiveAnimators;if(p){for(var v=!1,m=0;m<p.length;m++)if(p[m]._clip){v=!0;break}v||(r._additiveAnimators=null)}for(var m=0;m<n.length;m++)n[m].step(r._target,d);var g=r._onframeCbs;if(g)for(var m=0;m<g.length;m++)g[m](r._target,d)},ondestroy:function(){r._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},e.prototype.stop=function(t){if(!!this._clip){var r=this._clip;t&&r.onframe(1),this._abortedCallback()}},e.prototype.delay=function(t){return this._delay=t,this},e.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},e.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},e.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},e.prototype.getClip=function(){return this._clip},e.prototype.getTrack=function(t){return this._tracks[t]},e.prototype.getTracks=function(){var t=this;return Lt(this._trackKeys,function(r){return t._tracks[r]})},e.prototype.stopTracks=function(t,r){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,o=0;o<t.length;o++){var a=n[t[o]];a&&!a.isFinished()&&(r?a.step(this._target,1):this._started===1&&a.step(this._target,0),a.setFinished())}for(var s=!0,o=0;o<i.length;o++)if(!n[i[o]].isFinished()){s=!1;break}return s&&this._abortedCallback(),s},e.prototype.saveTo=function(t,r,n){if(!!t){r=r||this._trackKeys;for(var i=0;i<r.length;i++){var o=r[i],a=this._tracks[o];if(!(!a||a.isFinished())){var s=a.keyframes,l=s[n?0:s.length-1];l&&(t[o]=md(l.rawValue))}}}},e.prototype.__changeFinalValue=function(t,r){r=r||ve(t);for(var n=0;n<r.length;n++){var i=r[n],o=this._tracks[i];if(!!o){var a=o.keyframes;if(a.length>1){var s=a.pop();o.addKeyframe(s.time,t[i]),o.prepare(this._maxTime,o.getAdditiveTrack())}}}},e}();const Rk=OK;function bc(){return new Date().getTime()}var RK=function(e){Ce(t,e);function t(r){var n=e.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,r=r||{},n.stage=r.stage||{},n}return t.prototype.addClip=function(r){r.animation&&this.removeClip(r),this._head?(this._tail.next=r,r.prev=this._tail,r.next=null,this._tail=r):this._head=this._tail=r,r.animation=this},t.prototype.addAnimator=function(r){r.animation=this;var n=r.getClip();n&&this.addClip(n)},t.prototype.removeClip=function(r){if(!!r.animation){var n=r.prev,i=r.next;n?n.next=i:this._head=i,i?i.prev=n:this._tail=n,r.next=r.prev=r.animation=null}},t.prototype.removeAnimator=function(r){var n=r.getClip();n&&this.removeClip(n),r.animation=null},t.prototype.update=function(r){for(var n=bc()-this._pausedTime,i=n-this._time,o=this._head;o;){var a=o.next,s=o.step(n,i);s&&(o.ondestroy(),this.removeClip(o)),o=a}this._time=n,r||(this.trigger("frame",i),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var r=this;this._running=!0;function n(){r._running&&(ES(n),!r._paused&&r.update())}ES(n)},t.prototype.start=function(){this._running||(this._time=bc(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=bc(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=bc()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var r=this._head;r;){var n=r.next;r.prev=r.next=r.animation=null,r=n}this._head=this._tail=null},t.prototype.isFinished=function(){return this._head==null},t.prototype.animate=function(r,n){n=n||{},this.start();var i=new Rk(r,n.loop);return this.addAnimator(i),i},t}(Gi);const DK=RK;var NK=300,Ly=Yt.domSupported,Iy=function(){var e=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],t=["touchstart","touchend","touchmove"],r={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},n=Lt(e,function(i){var o=i.replace("mouse","pointer");return r.hasOwnProperty(o)?o:i});return{mouse:e,touch:t,pointer:n}}(),oM={mouse:["mousemove","mouseup"],pointer:["pointermove","pointerup"]},aM=!1;function OS(e){var t=e.pointerType;return t==="pen"||t==="touch"}function FK(e){e.touching=!0,e.touchTimer!=null&&(clearTimeout(e.touchTimer),e.touchTimer=null),e.touchTimer=setTimeout(function(){e.touching=!1,e.touchTimer=null},700)}function Oy(e){e&&(e.zrByTouch=!0)}function $K(e,t){return Yn(e.dom,new BK(e,t),!0)}function u9(e,t){for(var r=t,n=!1;r&&r.nodeType!==9&&!(n=r.domBelongToZr||r!==t&&r===e.painterRoot);)r=r.parentNode;return n}var BK=function(){function e(t,r){this.stopPropagation=jr,this.stopImmediatePropagation=jr,this.preventDefault=jr,this.type=r.type,this.target=this.currentTarget=t.dom,this.pointerType=r.pointerType,this.clientX=r.clientX,this.clientY=r.clientY}return e}(),bi={mousedown:function(e){e=Yn(this.dom,e),this.__mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Yn(this.dom,e);var t=this.__mayPointerCapture;t&&(e.zrX!==t[0]||e.zrY!==t[1])&&this.__togglePointerCapture(!0),this.trigger("mousemove",e)},mouseup:function(e){e=Yn(this.dom,e),this.__togglePointerCapture(!1),this.trigger("mouseup",e)},mouseout:function(e){e=Yn(this.dom,e);var t=e.toElement||e.relatedTarget;u9(this,t)||(this.__pointerCapturing&&(e.zrEventControl="no_globalout"),this.trigger("mouseout",e))},wheel:function(e){aM=!0,e=Yn(this.dom,e),this.trigger("mousewheel",e)},mousewheel:function(e){aM||(e=Yn(this.dom,e),this.trigger("mousewheel",e))},touchstart:function(e){e=Yn(this.dom,e),Oy(e),this.__lastTouchMoment=new Date,this.handler.processGesture(e,"start"),bi.mousemove.call(this,e),bi.mousedown.call(this,e)},touchmove:function(e){e=Yn(this.dom,e),Oy(e),this.handler.processGesture(e,"change"),bi.mousemove.call(this,e)},touchend:function(e){e=Yn(this.dom,e),Oy(e),this.handler.processGesture(e,"end"),bi.mouseup.call(this,e),+new Date-+this.__lastTouchMoment<NK&&bi.click.call(this,e)},pointerdown:function(e){bi.mousedown.call(this,e)},pointermove:function(e){OS(e)||bi.mousemove.call(this,e)},pointerup:function(e){bi.mouseup.call(this,e)},pointerout:function(e){OS(e)||bi.mouseout.call(this,e)}};$(["click","dblclick","contextmenu"],function(e){bi[e]=function(t){t=Yn(this.dom,t),this.trigger(e,t)}});var RS={pointermove:function(e){OS(e)||RS.mousemove.call(this,e)},pointerup:function(e){RS.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function zK(e,t){var r=t.domHandlers;Yt.pointerEventsSupported?$(Iy.pointer,function(n){Vg(t,n,function(i){r[n].call(e,i)})}):(Yt.touchEventsSupported&&$(Iy.touch,function(n){Vg(t,n,function(i){r[n].call(e,i),FK(t)})}),$(Iy.mouse,function(n){Vg(t,n,function(i){i=Lk(i),t.touching||r[n].call(e,i)})}))}function VK(e,t){Yt.pointerEventsSupported?$(oM.pointer,r):Yt.touchEventsSupported||$(oM.mouse,r);function r(n){function i(o){o=Lk(o),u9(e,o.target)||(o=$K(e,o),t.domHandlers[n].call(e,o))}Vg(t,n,i,{capture:!0})}}function Vg(e,t,r,n){e.mounted[t]=r,e.listenerOpts[t]=n,qZ(e.domTarget,t,r,n)}function Ry(e){var t=e.mounted;for(var r in t)t.hasOwnProperty(r)&&ZZ(e.domTarget,r,t[r],e.listenerOpts[r]);e.mounted={}}var sM=function(){function e(t,r){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=r}return e}(),UK=function(e){Ce(t,e);function t(r,n){var i=e.call(this)||this;return i.__pointerCapturing=!1,i.dom=r,i.painterRoot=n,i._localHandlerScope=new sM(r,bi),Ly&&(i._globalHandlerScope=new sM(document,RS)),zK(i,i._localHandlerScope),i}return t.prototype.dispose=function(){Ry(this._localHandlerScope),Ly&&Ry(this._globalHandlerScope)},t.prototype.setCursor=function(r){this.dom.style&&(this.dom.style.cursor=r||"default")},t.prototype.__togglePointerCapture=function(r){if(this.__mayPointerCapture=null,Ly&&+this.__pointerCapturing^+r){this.__pointerCapturing=r;var n=this._globalHandlerScope;r?VK(this,n):Ry(n)}},t}(Gi);const WK=UK;var c9=1;Yt.hasGlobalWindow&&(c9=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Lm=c9,DS=.4,NS="#333",FS="#ccc",GK="#eee",lM=Ik,uM=5e-5;function Ks(e){return e>uM||e<-uM}var Js=[],Du=[],Dy=Yc(),Ny=Math.abs,xl=function(){function e(){}return e.prototype.getLocalTransform=function(t){return e.getLocalTransform(this,t)},e.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},e.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},e.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},e.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},e.prototype.needLocalTransform=function(){return Ks(this.rotation)||Ks(this.x)||Ks(this.y)||Ks(this.scaleX-1)||Ks(this.scaleY-1)||Ks(this.skewX)||Ks(this.skewY)},e.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,r=this.needLocalTransform(),n=this.transform;if(!(r||t)){n&&lM(n);return}n=n||Yc(),r?this.getLocalTransform(n):lM(n),t&&(r?Ic(n,t,n):Y7(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)},e.prototype._resolveGlobalScaleRatio=function(t){var r=this.globalScaleRatio;if(r!=null&&r!==1){this.getGlobalScale(Js);var n=Js[0]<0?-1:1,i=Js[1]<0?-1:1,o=((Js[0]-n)*r+n)/Js[0]||0,a=((Js[1]-i)*r+i)/Js[1]||0;t[0]*=o,t[1]*=o,t[2]*=a,t[3]*=a}this.invTransform=this.invTransform||Yc(),G1(this.invTransform,t)},e.prototype.getComputedTransform=function(){for(var t=this,r=[];t;)r.push(t),t=t.parent;for(;t=r.pop();)t.updateTransform();return this.transform},e.prototype.setLocalTransform=function(t){if(!!t){var r=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),o=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(o),r=Math.sqrt(r),this.skewX=o,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=r,this.scaleY=n,this.originX=0,this.originY=0}},e.prototype.decomposeTransform=function(){if(!!this.transform){var t=this.parent,r=this.transform;t&&t.transform&&(Ic(Du,t.invTransform,r),r=Du);var n=this.originX,i=this.originY;(n||i)&&(Dy[4]=n,Dy[5]=i,Ic(Du,r,Dy),Du[4]-=n,Du[5]-=i,r=Du),this.setLocalTransform(r)}},e.prototype.getGlobalScale=function(t){var r=this.transform;return t=t||[],r?(t[0]=Math.sqrt(r[0]*r[0]+r[1]*r[1]),t[1]=Math.sqrt(r[2]*r[2]+r[3]*r[3]),r[0]<0&&(t[0]=-t[0]),r[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},e.prototype.transformCoordToLocal=function(t,r){var n=[t,r],i=this.invTransform;return i&&nn(n,n,i),n},e.prototype.transformCoordToGlobal=function(t,r){var n=[t,r],i=this.transform;return i&&nn(n,n,i),n},e.prototype.getLineScale=function(){var t=this.transform;return t&&Ny(t[0]-1)>1e-10&&Ny(t[3]-1)>1e-10?Math.sqrt(Ny(t[0]*t[3]-t[2]*t[1])):1},e.prototype.copyTransform=function(t){jK(this,t)},e.getLocalTransform=function(t,r){r=r||[];var n=t.originX||0,i=t.originY||0,o=t.scaleX,a=t.scaleY,s=t.anchorX,l=t.anchorY,u=t.rotation||0,c=t.x,f=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||s||l){var p=n+s,v=i+l;r[4]=-p*o-h*v*a,r[5]=-v*a-d*p*o}else r[4]=r[5]=0;return r[0]=o,r[3]=a,r[1]=d*o,r[2]=h*a,u&&Ok(r,r,u),r[4]+=n+c,r[5]+=i+f,r},e.initDefaultProps=function(){var t=e.prototype;t.scaleX=t.scaleY=t.globalScaleRatio=1,t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0}(),e}(),Lo=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function jK(e,t){for(var r=0;r<Lo.length;r++){var n=Lo[r];e[n]=t[n]}}var cM={};function Ln(e,t){t=t||Zl;var r=cM[t];r||(r=cM[t]=new xp(500));var n=r.get(e);return n==null&&(n=fu.measureText(e,t).width,r.put(e,n)),n}function fM(e,t,r,n){var i=Ln(e,t),o=Nk(t),a=qh(0,i,r),s=vc(0,o,n),l=new le(a,s,i,o);return l}function Dk(e,t,r,n){var i=((e||"")+"").split(`
`),o=i.length;if(o===1)return fM(i[0],t,r,n);for(var a=new le(0,0,0,0),s=0;s<i.length;s++){var l=fM(i[s],t,r,n);s===0?a.copy(l):a.union(l)}return a}function qh(e,t,r){return r==="right"?e-=t:r==="center"&&(e-=t/2),e}function vc(e,t,r){return r==="middle"?e-=t/2:r==="bottom"&&(e-=t),e}function Nk(e){return Ln("\u56FD",e)}function ga(e,t){return typeof e=="string"?e.lastIndexOf("%")>=0?parseFloat(e)/100*t:parseFloat(e):e}function Im(e,t,r){var n=t.position||"inside",i=t.distance!=null?t.distance:5,o=r.height,a=r.width,s=o/2,l=r.x,u=r.y,c="left",f="top";if(n instanceof Array)l+=ga(n[0],r.width),u+=ga(n[1],r.height),c=null,f=null;else switch(n){case"left":l-=i,u+=s,c="right",f="middle";break;case"right":l+=i+a,u+=s,f="middle";break;case"top":l+=a/2,u-=i,c="center",f="bottom";break;case"bottom":l+=a/2,u+=o+i,c="center";break;case"inside":l+=a/2,u+=s,c="center",f="middle";break;case"insideLeft":l+=i,u+=s,f="middle";break;case"insideRight":l+=a-i,u+=s,c="right",f="middle";break;case"insideTop":l+=a/2,u+=i,c="center";break;case"insideBottom":l+=a/2,u+=o-i,c="center",f="bottom";break;case"insideTopLeft":l+=i,u+=i;break;case"insideTopRight":l+=a-i,u+=i,c="right";break;case"insideBottomLeft":l+=i,u+=o-i,f="bottom";break;case"insideBottomRight":l+=a-i,u+=o-i,c="right",f="bottom";break}return e=e||{},e.x=l,e.y=u,e.align=c,e.verticalAlign=f,e}var Fy="__zr_normal__",$y=Lo.concat(["ignore"]),HK=hu(Lo,function(e,t){return e[t]=!0,e},{ignore:!1}),Nu={},XK=new le(0,0,0,0),Fk=function(){function e(t){this.id=V7(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return e.prototype._init=function(t){this.attr(t)},e.prototype.drift=function(t,r,n){switch(this.draggable){case"horizontal":r=0;break;case"vertical":t=0;break}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=r,this.decomposeTransform(),this.markRedraw()},e.prototype.beforeUpdate=function(){},e.prototype.afterUpdate=function(){},e.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},e.prototype.updateInnerText=function(t){var r=this._textContent;if(r&&(!r.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,o=r.innerTransformable,a=void 0,s=void 0,l=!1;o.parent=i?this:null;var u=!1;if(o.copyTransform(r),n.position!=null){var c=XK;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Nu,n,c):Im(Nu,n,c),o.x=Nu.x,o.y=Nu.y,a=Nu.align,s=Nu.verticalAlign;var f=n.origin;if(f&&n.rotation!=null){var h=void 0,d=void 0;f==="center"?(h=c.width*.5,d=c.height*.5):(h=ga(f[0],c.width),d=ga(f[1],c.height)),u=!0,o.originX=-o.x+h+(i?0:c.x),o.originY=-o.y+d+(i?0:c.y)}}n.rotation!=null&&(o.rotation=n.rotation);var p=n.offset;p&&(o.x+=p[0],o.y+=p[1],u||(o.originX=-p[0],o.originY=-p[1]));var v=n.inside==null?typeof n.position=="string"&&n.position.indexOf("inside")>=0:n.inside,m=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),g=void 0,_=void 0,b=void 0;v&&this.canBeInsideText()?(g=n.insideFill,_=n.insideStroke,(g==null||g==="auto")&&(g=this.getInsideTextFill()),(_==null||_==="auto")&&(_=this.getInsideTextStroke(g),b=!0)):(g=n.outsideFill,_=n.outsideStroke,(g==null||g==="auto")&&(g=this.getOutsideFill()),(_==null||_==="auto")&&(_=this.getOutsideStroke(g),b=!0)),g=g||"#000",(g!==m.fill||_!==m.stroke||b!==m.autoStroke||a!==m.align||s!==m.verticalAlign)&&(l=!0,m.fill=g,m.stroke=_,m.autoStroke=b,m.align=a,m.verticalAlign=s,r.setDefaultTextStyle(m)),r.__dirty|=Mn,l&&r.dirtyStyle(!0)}},e.prototype.canBeInsideText=function(){return!0},e.prototype.getInsideTextFill=function(){return"#fff"},e.prototype.getInsideTextStroke=function(t){return"#000"},e.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?FS:NS},e.prototype.getOutsideStroke=function(t){var r=this.__zr&&this.__zr.getBackgroundColor(),n=typeof r=="string"&&ei(r);n||(n=[255,255,255,1]);for(var i=n[3],o=this.__zr.isDarkMode(),a=0;a<3;a++)n[a]=n[a]*i+(o?0:255)*(1-i);return n[3]=1,ha(n,"rgba")},e.prototype.traverse=function(t,r){},e.prototype.attrKV=function(t,r){t==="textConfig"?this.setTextConfig(r):t==="textContent"?this.setTextContent(r):t==="clipPath"?this.setClipPath(r):t==="extra"?(this.extra=this.extra||{},at(this.extra,r)):this[t]=r},e.prototype.hide=function(){this.ignore=!0,this.markRedraw()},e.prototype.show=function(){this.ignore=!1,this.markRedraw()},e.prototype.attr=function(t,r){if(typeof t=="string")this.attrKV(t,r);else if(Rt(t))for(var n=t,i=ve(n),o=0;o<i.length;o++){var a=i[o];this.attrKV(a,t[a])}return this.markRedraw(),this},e.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var r=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],o=i.__fromStateTransition;if(!(i.getLoop()||o&&o!==Fy)){var a=i.targetName,s=a?r[a]:r;i.saveTo(s)}}},e.prototype._innerSaveToNormal=function(t){var r=this._normalState;r||(r=this._normalState={}),t.textConfig&&!r.textConfig&&(r.textConfig=this.textConfig),this._savePrimaryToNormal(t,r,$y)},e.prototype._savePrimaryToNormal=function(t,r,n){for(var i=0;i<n.length;i++){var o=n[i];t[o]!=null&&!(o in r)&&(r[o]=this[o])}},e.prototype.hasState=function(){return this.currentStates.length>0},e.prototype.getState=function(t){return this.states[t]},e.prototype.ensureState=function(t){var r=this.states;return r[t]||(r[t]={}),r[t]},e.prototype.clearStates=function(t){this.useState(Fy,!1,t)},e.prototype.useState=function(t,r,n,i){var o=t===Fy,a=this.hasState();if(!(!a&&o)){var s=this.currentStates,l=this.stateTransition;if(!(fe(s,t)>=0&&(r||s.length===1))){var u;if(this.stateProxy&&!o&&(u=this.stateProxy(t)),u||(u=this.states&&this.states[t]),!u&&!o){Ak("State "+t+" not exists.");return}o||this.saveCurrentToNormalState(u);var c=!!(u&&u.hoverLayer||i);c&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,u,this._normalState,r,!n&&!this.__inHover&&l&&l.duration>0,l);var f=this._textContent,h=this._textGuide;return f&&f.useState(t,r,n,c),h&&h.useState(t,r,n,c),o?(this.currentStates=[],this._normalState={}):r?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!c&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Mn),u}}},e.prototype.useStates=function(t,r,n){if(!t.length)this.clearStates();else{var i=[],o=this.currentStates,a=t.length,s=a===o.length;if(s){for(var l=0;l<a;l++)if(t[l]!==o[l]){s=!1;break}}if(s)return;for(var l=0;l<a;l++){var u=t[l],c=void 0;this.stateProxy&&(c=this.stateProxy(u,t)),c||(c=this.states[u]),c&&i.push(c)}var f=i[a-1],h=!!(f&&f.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!r&&!this.__inHover&&p&&p.duration>0,p);var v=this._textContent,m=this._textGuide;v&&v.useStates(t,r,h),m&&m.useStates(t,r,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=~Mn)}},e.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var r=this.animators[t];r.targetName&&r.changeTarget(this[r.targetName])}},e.prototype.removeState=function(t){var r=fe(this.currentStates,t);if(r>=0){var n=this.currentStates.slice();n.splice(r,1),this.useStates(n)}},e.prototype.replaceState=function(t,r,n){var i=this.currentStates.slice(),o=fe(i,t),a=fe(i,r)>=0;o>=0?a?i.splice(o,1):i[o]=r:n&&!a&&i.push(r),this.useStates(i)},e.prototype.toggleState=function(t,r){r?this.useState(t,!0):this.removeState(t)},e.prototype._mergeStates=function(t){for(var r={},n,i=0;i<t.length;i++){var o=t[i];at(r,o),o.textConfig&&(n=n||{},at(n,o.textConfig))}return n&&(r.textConfig=n),r},e.prototype._applyStateObj=function(t,r,n,i,o,a){var s=!(r&&i);r&&r.textConfig?(this.textConfig=at({},i?this.textConfig:n.textConfig),at(this.textConfig,r.textConfig)):s&&n.textConfig&&(this.textConfig=n.textConfig);for(var l={},u=!1,c=0;c<$y.length;c++){var f=$y[c],h=o&&HK[f];r&&r[f]!=null?h?(u=!0,l[f]=r[f]):this[f]=r[f]:s&&n[f]!=null&&(h?(u=!0,l[f]=n[f]):this[f]=n[f])}if(!o)for(var c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(r||n)[p]:r||n)}u&&this._transitionState(t,l,a)},e.prototype._attachComponent=function(t){if(!(t.__zr&&!t.__hostTarget)&&t!==this){var r=this.__zr;r&&t.addSelfToZr(r),t.__zr=r,t.__hostTarget=this}},e.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},e.prototype.getClipPath=function(){return this._clipPath},e.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},e.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},e.prototype.getTextContent=function(){return this._textContent},e.prototype.setTextContent=function(t){var r=this._textContent;r!==t&&(r&&r!==t&&this.removeTextContent(),t.innerTransformable=new xl,this._attachComponent(t),this._textContent=t,this.markRedraw())},e.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),at(this.textConfig,t),this.markRedraw()},e.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},e.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},e.prototype.getTextGuideLine=function(){return this._textGuide},e.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},e.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},e.prototype.markRedraw=function(){this.__dirty|=Mn;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},e.prototype.dirty=function(){this.markRedraw()},e.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var r=this._textContent,n=this._textGuide;r&&(r.__inHover=t),n&&(n.__inHover=t)},e.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.addAnimator(r[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},e.prototype.removeSelfFromZr=function(t){if(!!this.__zr){this.__zr=null;var r=this.animators;if(r)for(var n=0;n<r.length;n++)t.animation.removeAnimator(r[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},e.prototype.animate=function(t,r,n){var i=t?this[t]:this,o=new Rk(i,r,n);return t&&(o.targetName=t),this.addAnimator(o,t),o},e.prototype.addAnimator=function(t,r){var n=this.__zr,i=this;t.during(function(){i.updateDuringAnimation(r)}).done(function(){var o=i.animators,a=fe(o,t);a>=0&&o.splice(a,1)}),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},e.prototype.updateDuringAnimation=function(t){this.markRedraw()},e.prototype.stopAnimation=function(t,r){for(var n=this.animators,i=n.length,o=[],a=0;a<i;a++){var s=n[a];!t||t===s.scope?s.stop(r):o.push(s)}return this.animators=o,this},e.prototype.animateTo=function(t,r,n){By(this,t,r,n)},e.prototype.animateFrom=function(t,r,n){By(this,t,r,n,!0)},e.prototype._transitionState=function(t,r,n,i){for(var o=By(this,r,n,i),a=0;a<o.length;a++)o[a].__fromStateTransition=t},e.prototype.getBoundingRect=function(){return null},e.prototype.getPaintRect=function(){return null},e.initDefaultProps=function(){var t=e.prototype;t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=Mn;function r(n,i,o,a){Object.defineProperty(t,n,{get:function(){if(!this[i]){var l=this[i]=[];s(this,l)}return this[i]},set:function(l){this[o]=l[0],this[a]=l[1],this[i]=l,s(this,l)}});function s(l,u){Object.defineProperty(u,0,{get:function(){return l[o]},set:function(c){l[o]=c}}),Object.defineProperty(u,1,{get:function(){return l[a]},set:function(c){l[a]=c}})}}Object.defineProperty&&(r("position","_legacyPos","x","y"),r("scale","_legacyScale","scaleX","scaleY"),r("origin","_legacyOrigin","originX","originY"))}(),e}();Wi(Fk,Gi);Wi(Fk,xl);function By(e,t,r,n,i){r=r||{};var o=[];f9(e,"",e,t,r,n,o,i);var a=o.length,s=!1,l=r.done,u=r.aborted,c=function(){s=!0,a--,a<=0&&(s?l&&l():u&&u())},f=function(){a--,a<=0&&(s?l&&l():u&&u())};a||l&&l(),o.length>0&&r.during&&o[0].during(function(p,v){r.during(v)});for(var h=0;h<o.length;h++){var d=o[h];c&&d.done(c),f&&d.aborted(f),r.force&&d.duration(r.duration),d.start(r.easing)}return o}function zy(e,t,r){for(var n=0;n<r;n++)e[n]=t[n]}function YK(e){return Xr(e[0])}function qK(e,t,r){if(Xr(t[r]))if(Xr(e[r])||(e[r]=[]),Rn(t[r])){var n=t[r].length;e[r].length!==n&&(e[r]=new t[r].constructor(n),zy(e[r],t[r],n))}else{var i=t[r],o=e[r],a=i.length;if(YK(i))for(var s=i[0].length,l=0;l<a;l++)o[l]?zy(o[l],i[l],s):o[l]=Array.prototype.slice.call(i[l]);else zy(o,i,a);o.length=i.length}else e[r]=t[r]}function ZK(e,t){return e===t||Xr(e)&&Xr(t)&&KK(e,t)}function KK(e,t){var r=e.length;if(r!==t.length)return!1;for(var n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function f9(e,t,r,n,i,o,a,s){for(var l=ve(n),u=i.duration,c=i.delay,f=i.additive,h=i.setToFinal,d=!Rt(o),p=e.animators,v=[],m=0;m<l.length;m++){var g=l[m],_=n[g];if(_!=null&&r[g]!=null&&(d||o[g]))if(Rt(_)&&!Xr(_)&&!U1(_)){if(t){s||(r[g]=_,e.updateDuringAnimation(t));continue}f9(e,g,r[g],_,i,o&&o[g],a,s)}else v.push(g);else s||(r[g]=_,e.updateDuringAnimation(t),v.push(g))}var b=v.length;if(!f&&b)for(var w=0;w<p.length;w++){var T=p[w];if(T.targetName===t){var S=T.stopTracks(v);if(S){var k=fe(p,T);p.splice(k,1)}}}if(i.force||(v=Er(v,function(x){return!ZK(n[x],r[x])}),b=v.length),b>0||i.force&&!a.length){var C=void 0,E=void 0,M=void 0;if(s){E={},h&&(C={});for(var w=0;w<b;w++){var g=v[w];E[g]=r[g],h?C[g]=n[g]:r[g]=n[g]}}else if(h){M={};for(var w=0;w<b;w++){var g=v[w];M[g]=md(r[g]),qK(r,n,g)}}var T=new Rk(r,!1,!1,f?Er(p,function(D){return D.targetName===t}):null);T.targetName=t,i.scope&&(T.scope=i.scope),h&&C&&T.whenWithKeys(0,C,v),M&&T.whenWithKeys(0,M,v),T.whenWithKeys(u==null?500:u,s?E:n,v).delay(c||0),e.addAnimator(T,t),a.push(T)}}const h9=Fk;var d9=function(e){Ce(t,e);function t(r){var n=e.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(r){return this._children[r]},t.prototype.childOfName=function(r){for(var n=this._children,i=0;i<n.length;i++)if(n[i].name===r)return n[i]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(r){return r&&r!==this&&r.parent!==this&&(this._children.push(r),this._doAdd(r)),this},t.prototype.addBefore=function(r,n){if(r&&r!==this&&r.parent!==this&&n&&n.parent===this){var i=this._children,o=i.indexOf(n);o>=0&&(i.splice(o,0,r),this._doAdd(r))}return this},t.prototype.replace=function(r,n){var i=fe(this._children,r);return i>=0&&this.replaceAt(n,i),this},t.prototype.replaceAt=function(r,n){var i=this._children,o=i[n];if(r&&r!==this&&r.parent!==this&&r!==o){i[n]=r,o.parent=null;var a=this.__zr;a&&o.removeSelfFromZr(a),this._doAdd(r)}return this},t.prototype._doAdd=function(r){r.parent&&r.parent.remove(r),r.parent=this;var n=this.__zr;n&&n!==r.__zr&&r.addSelfToZr(n),n&&n.refresh()},t.prototype.remove=function(r){var n=this.__zr,i=this._children,o=fe(i,r);return o<0?this:(i.splice(o,1),r.parent=null,n&&r.removeSelfFromZr(n),n&&n.refresh(),this)},t.prototype.removeAll=function(){for(var r=this._children,n=this.__zr,i=0;i<r.length;i++){var o=r[i];n&&o.removeSelfFromZr(n),o.parent=null}return r.length=0,this},t.prototype.eachChild=function(r,n){for(var i=this._children,o=0;o<i.length;o++){var a=i[o];r.call(n,a,o)}return this},t.prototype.traverse=function(r,n){for(var i=0;i<this._children.length;i++){var o=this._children[i],a=r.call(n,o);o.isGroup&&!a&&o.traverse(r,n)}return this},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.addSelfToZr(r)}},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++){var i=this._children[n];i.removeSelfFromZr(r)}},t.prototype.getBoundingRect=function(r){for(var n=new le(0,0,0,0),i=r||this._children,o=[],a=null,s=0;s<i.length;s++){var l=i[s];if(!(l.ignore||l.invisible)){var u=l.getBoundingRect(),c=l.getLocalTransform(o);c?(le.applyTransform(n,u,c),a=a||n.clone(),a.union(n)):(a=a||u.clone(),a.union(u))}}return a||n},t}(h9);d9.prototype.type="group";const Ne=d9;/*!
* ZRender, a high performance 2d drawing library.
*
* Copyright (c) 2013, Baidu Inc.
* All rights reserved.
*
* LICENSE
* https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
*/var Ug={},p9={};function JK(e){delete p9[e]}function QK(e){if(!e)return!1;if(typeof e=="string")return xm(e,1)<DS;if(e.colorStops){for(var t=e.colorStops,r=0,n=t.length,i=0;i<n;i++)r+=xm(t[i].color,1);return r/=n,r<DS}return!1}var tJ=function(){function e(t,r,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=r,this.id=t;var o=new hK,a=n.renderer||"canvas";Ug[a]||(a=ve(Ug)[0]),n.useDirtyRect=n.useDirtyRect==null?!1:n.useDirtyRect;var s=new Ug[a](r,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var u=!Yt.node&&!Yt.worker&&!l?new WK(s.getViewportRoot(),s.root):null,c=n.useCoarsePointer,f=c==null||c==="auto"?Yt.touchEventsSupported:!!c,h=44,d;f&&(d=Zt(n.pointerSize,h)),this.handler=new sK(o,s,u,s.root,d),this.animation=new DK({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return e.prototype.add=function(t){!t||(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},e.prototype.remove=function(t){!t||(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},e.prototype.configLayer=function(t,r){this.painter.configLayer&&this.painter.configLayer(t,r),this.refresh()},e.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=QK(t)},e.prototype.getBackgroundColor=function(){return this._backgroundColor},e.prototype.setDarkMode=function(t){this._darkMode=t},e.prototype.isDarkMode=function(){return this._darkMode},e.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},e.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},e.prototype.flush=function(){this._flush(!1)},e.prototype._flush=function(t){var r,n=bc();this._needsRefresh&&(r=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(r=!0,this.refreshHoverImmediately());var i=bc();r?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},e.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},e.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},e.prototype.refreshHover=function(){this._needsRefreshHover=!0},e.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.getType()==="canvas"&&this.painter.refreshHover()},e.prototype.resize=function(t){t=t||{},this.painter.resize(t.width,t.height),this.handler.resize()},e.prototype.clearAnimation=function(){this.animation.clear()},e.prototype.getWidth=function(){return this.painter.getWidth()},e.prototype.getHeight=function(){return this.painter.getHeight()},e.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},e.prototype.findHover=function(t,r){return this.handler.findHover(t,r)},e.prototype.on=function(t,r,n){return this.handler.on(t,r,n),this},e.prototype.off=function(t,r){this.handler.off(t,r)},e.prototype.trigger=function(t,r){this.handler.trigger(t,r)},e.prototype.clear=function(){for(var t=this.storage.getRoots(),r=0;r<t.length;r++)t[r]instanceof Ne&&t[r].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},e.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,JK(this.id)},e}();function hM(e,t){var r=new tJ(V7(),e,t);return p9[r.id]=r,r}function eJ(e,t){Ug[e]=t}var dM=1e-4,v9=20;function rJ(e){return e.replace(/^\s+|\s+$/g,"")}function ma(e,t,r,n){var i=t[0],o=t[1],a=r[0],s=r[1],l=o-i,u=s-a;if(l===0)return u===0?a:(a+s)/2;if(n)if(l>0){if(e<=i)return a;if(e>=o)return s}else{if(e>=i)return a;if(e<=o)return s}else{if(e===i)return a;if(e===o)return s}return(e-i)/l*u+a}function je(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%";break}return Mt(e)?rJ(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):e==null?NaN:+e}function Ke(e,t,r){return t==null&&(t=10),t=Math.min(Math.max(0,t),v9),e=(+e).toFixed(t),r?e:+e}function Om(e){return e.sort(function(t,r){return t-r}),e}function ko(e){if(e=+e,isNaN(e))return 0;if(e>1e-14){for(var t=1,r=0;r<15;r++,t*=10)if(Math.round(e*t)/t===e)return r}return nJ(e)}function nJ(e){var t=e.toString().toLowerCase(),r=t.indexOf("e"),n=r>0?+t.slice(r+1):0,i=r>0?r:t.length,o=t.indexOf("."),a=o<0?0:i-1-o;return Math.max(0,a-n)}function iJ(e,t){var r=Math.log,n=Math.LN10,i=Math.floor(r(e[1]-e[0])/n),o=Math.round(r(Math.abs(t[1]-t[0]))/n),a=Math.min(Math.max(-i+o,0),20);return isFinite(a)?a:20}function oJ(e,t){var r=Math.max(ko(e),ko(t)),n=e+t;return r>v9?n:Ke(n,r)}function g9(e){var t=Math.PI*2;return(e%t+t)%t}function Rm(e){return e>-dM&&e<dM}var aJ=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function _a(e){if(e instanceof Date)return e;if(Mt(e)){var t=aJ.exec(e);if(!t)return new Date(NaN);if(t[8]){var r=+t[4]||0;return t[8].toUpperCase()!=="Z"&&(r-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,r,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}else return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}else if(e==null)return new Date(NaN);return new Date(Math.round(e))}function sJ(e){return Math.pow(10,$k(e))}function $k(e){if(e===0)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return e/Math.pow(10,t)>=10&&t++,t}function m9(e,t){var r=$k(e),n=Math.pow(10,r),i=e/n,o;return t?i<1.5?o=1:i<2.5?o=2:i<4?o=3:i<7?o=5:o=10:i<1?o=1:i<2?o=2:i<3?o=3:i<5?o=5:o=10,e=o*n,r>=-20?+e.toFixed(r<0?-r:0):e}function pM(e){e.sort(function(l,u){return s(l,u,0)?-1:1});for(var t=-1/0,r=1,n=0;n<e.length;){for(var i=e[n].interval,o=e[n].close,a=0;a<2;a++)i[a]<=t&&(i[a]=t,o[a]=a?1:1-r),t=i[a],r=o[a];i[0]===i[1]&&o[0]*o[1]!==1?e.splice(n,1):n++}return e;function s(l,u,c){return l.interval[c]<u.interval[c]||l.interval[c]===u.interval[c]&&(l.close[c]-u.close[c]===(c?-1:1)||!c&&s(l,u,1))}}function Ms(e){var t=parseFloat(e);return t==e&&(t!==0||!Mt(e)||e.indexOf("x")<=0)?t:NaN}function lJ(e){return!isNaN(Ms(e))}function _9(){return Math.round(Math.random()*9)}function y9(e,t){return t===0?e:y9(t,e%t)}function vM(e,t){return e==null?t:t==null?e:e*t/y9(e,t)}function oe(e){throw new Error(e)}function gM(e,t,r){return(t-e)*r+e}var b9="series\0",uJ="\0_ec_\0";function Je(e){return e instanceof Array?e:e==null?[]:[e]}function $S(e,t,r){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,i=r.length;n<i;n++){var o=r[n];!e.emphasis[t].hasOwnProperty(o)&&e[t].hasOwnProperty(o)&&(e.emphasis[t][o]=e[t][o])}}}var mM=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Lp(e){return Rt(e)&&!ct(e)&&!(e instanceof Date)?e.value:e}function cJ(e){return Rt(e)&&!(e instanceof Array)}function fJ(e,t,r){var n=r==="normalMerge",i=r==="replaceMerge",o=r==="replaceAll";e=e||[],t=(t||[]).slice();var a=jt();$(t,function(l,u){if(!Rt(l)){t[u]=null;return}});var s=hJ(e,a,r);return(n||i)&&dJ(s,e,a,t),n&&pJ(s,t),n||i?vJ(s,t,i):o&&gJ(s,t),mJ(s),s}function hJ(e,t,r){var n=[];if(r==="replaceAll")return n;for(var i=0;i<e.length;i++){var o=e[i];o&&o.id!=null&&t.set(o.id,i),n.push({existing:r==="replaceMerge"||Yd(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return n}function dJ(e,t,r,n){$(n,function(i,o){if(!(!i||i.id==null)){var a=_d(i.id),s=r.get(a);if(s!=null){var l=e[s];Bi(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=i,l.existing=t[s],n[o]=null}}})}function pJ(e,t){$(t,function(r,n){if(!(!r||r.name==null))for(var i=0;i<e.length;i++){var o=e[i].existing;if(!e[i].newOption&&o&&(o.id==null||r.id==null)&&!Yd(r)&&!Yd(o)&&w9("name",o,r)){e[i].newOption=r,t[n]=null;return}}})}function vJ(e,t,r){$(t,function(n){if(!!n){for(var i,o=0;(i=e[o])&&(i.newOption||Yd(i.existing)||i.existing&&n.id!=null&&!w9("id",n,i.existing));)o++;i?(i.newOption=n,i.brandNew=r):e.push({newOption:n,brandNew:r,existing:null,keyInfo:null}),o++}})}function gJ(e,t){$(t,function(r){e.push({newOption:r,brandNew:!0,existing:null,keyInfo:null})})}function mJ(e){var t=jt();$(e,function(r){var n=r.existing;n&&t.set(n.id,r)}),$(e,function(r){var n=r.newOption;Bi(!n||n.id==null||!t.get(n.id)||t.get(n.id)===r,"id duplicates: "+(n&&n.id)),n&&n.id!=null&&t.set(n.id,r),!r.keyInfo&&(r.keyInfo={})}),$(e,function(r,n){var i=r.existing,o=r.newOption,a=r.keyInfo;if(!!Rt(o)){if(a.name=o.name!=null?_d(o.name):i?i.name:b9+n,i)a.id=_d(i.id);else if(o.id!=null)a.id=_d(o.id);else{var s=0;do a.id="\0"+a.name+"\0"+s++;while(t.get(a.id))}t.set(a.id,r)}})}function w9(e,t,r){var n=ri(t[e],null),i=ri(r[e],null);return n!=null&&i!=null&&n===i}function _d(e){return ri(e,"")}function ri(e,t){return e==null?t:Mt(e)?e:Se(e)||yS(e)?e+"":t}function Bk(e){var t=e.name;return!!(t&&t.indexOf(b9))}function Yd(e){return e&&e.id!=null&&_d(e.id).indexOf(uJ)===0}function _J(e,t,r){$(e,function(n){var i=n.newOption;Rt(i)&&(n.keyInfo.mainType=t,n.keyInfo.subType=yJ(t,i,n.existing,r))})}function yJ(e,t,r,n){var i=t.type?t.type:r?r.subType:n.determineSubType(e,t);return i}function bJ(e,t){var r={},n={};return i(e||[],r),i(t||[],n,r),[o(r),o(n)];function i(a,s,l){for(var u=0,c=a.length;u<c;u++){var f=ri(a[u].seriesId,null);if(f==null)return;for(var h=Je(a[u].dataIndex),d=l&&l[f],p=0,v=h.length;p<v;p++){var m=h[p];d&&d[m]?d[m]=null:(s[f]||(s[f]={}))[m]=1}}}function o(a,s){var l=[];for(var u in a)if(a.hasOwnProperty(u)&&a[u]!=null)if(s)l.push(+u);else{var c=o(a[u],!0);c.length&&l.push({seriesId:u,dataIndex:c})}return l}}function Jl(e,t){if(t.dataIndexInside!=null)return t.dataIndexInside;if(t.dataIndex!=null)return ct(t.dataIndex)?Lt(t.dataIndex,function(r){return e.indexOfRawIndex(r)}):e.indexOfRawIndex(t.dataIndex);if(t.name!=null)return ct(t.name)?Lt(t.name,function(r){return e.indexOfName(r)}):e.indexOfName(t.name)}function Re(){var e="__ec_inner_"+wJ++;return function(t){return t[e]||(t[e]={})}}var wJ=_9();function Vy(e,t,r){var n=zk(t,r),i=n.mainTypeSpecified,o=n.queryOptionMap,a=n.others,s=a,l=r?r.defaultMainType:null;return!i&&l&&o.set(l,{}),o.each(function(u,c){var f=Ip(e,c,u,{useDefault:l===c,enableAll:r&&r.enableAll!=null?r.enableAll:!0,enableNone:r&&r.enableNone!=null?r.enableNone:!0});s[c+"Models"]=f.models,s[c+"Model"]=f.models[0]}),s}function zk(e,t){var r;if(Mt(e)){var n={};n[e+"Index"]=0,r=n}else r=e;var i=jt(),o={},a=!1;return $(r,function(s,l){if(l==="dataIndex"||l==="dataIndexInside"){o[l]=s;return}var u=l.match(/^(\w+)(Index|Id|Name)$/)||[],c=u[1],f=(u[2]||"").toLowerCase();if(!(!c||!f||t&&t.includeMainTypes&&fe(t.includeMainTypes,c)<0)){a=a||!!c;var h=i.get(c)||i.set(c,{});h[f]=s}}),{mainTypeSpecified:a,queryOptionMap:i,others:o}}var Mi={useDefault:!0,enableAll:!1,enableNone:!1};function Ip(e,t,r,n){n=n||Mi;var i=r.index,o=r.id,a=r.name,s={models:null,specified:i!=null||o!=null||a!=null};if(!s.specified){var l=void 0;return s.models=n.useDefault&&(l=e.getComponent(t))?[l]:[],s}return i==="none"||i===!1?(Bi(n.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):(i==="all"&&(Bi(n.enableAll,'`"all"` is not a valid value on index option.'),i=o=a=null),s.models=e.queryComponents({mainType:t,index:i,id:o,name:a}),s)}function S9(e,t,r){e.setAttribute?e.setAttribute(t,r):e[t]=r}function SJ(e,t){return e.getAttribute?e.getAttribute(t):e[t]}function TJ(e){return e==="auto"?Yt.domSupported?"html":"richText":e||"html"}function kJ(e,t,r,n,i){var o=t==null||t==="auto";if(n==null)return n;if(Se(n)){var a=gM(r||0,n,i);return Ke(a,o?Math.max(ko(r||0),ko(n)):t)}else{if(Mt(n))return i<1?r:n;for(var s=[],l=r,u=n,c=Math.max(l?l.length:0,u.length),f=0;f<c;++f){var h=e.getDimensionInfo(f);if(h&&h.type==="ordinal")s[f]=(i<1&&l?l:u)[f];else{var d=l&&l[f]?l[f]:0,p=u[f],a=gM(d,p,i);s[f]=Ke(a,o?Math.max(ko(d),ko(p)):t)}}return s}}var PJ=".",Qs="___EC__COMPONENT__CONTAINER___",T9="___EC__EXTENDED_CLASS___";function Po(e){var t={main:"",sub:""};if(e){var r=e.split(PJ);t.main=r[0]||"",t.sub=r[1]||""}return t}function EJ(e){Bi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(e),'componentType "'+e+'" illegal')}function CJ(e){return!!(e&&e[T9])}function Vk(e,t){e.$constructor=e,e.extend=function(r){var n=this,i;return AJ(n)?i=function(o){yt(a,o);function a(){return o.apply(this,arguments)||this}return a}(n):(i=function(){(r.$constructor||n).apply(this,arguments)},PZ(i,this)),at(i.prototype,r),i[T9]=!0,i.extend=this.extend,i.superCall=LJ,i.superApply=IJ,i.superClass=n,i}}function AJ(e){return Ut(e)&&/^class\s/.test(Function.prototype.toString.call(e))}function k9(e,t){e.extend=t.extend}var MJ=Math.round(Math.random()*10);function xJ(e){var t=["__\0is_clz",MJ++].join("_");e.prototype[t]=!0,e.isInstance=function(r){return!!(r&&r[t])}}function LJ(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];return this.superClass.prototype[t].apply(e,r)}function IJ(e,t,r){return this.superClass.prototype[t].apply(e,r)}function j1(e){var t={};e.registerClass=function(n){var i=n.type||n.prototype.type;if(i){EJ(i),n.prototype.type=i;var o=Po(i);if(!o.sub)t[o.main]=n;else if(o.sub!==Qs){var a=r(o);a[o.sub]=n}}return n},e.getClass=function(n,i,o){var a=t[n];if(a&&a[Qs]&&(a=i?a[i]:null),o&&!a)throw new Error(i?"Component "+n+"."+(i||"")+" is used but not imported.":n+".type should be specified.");return a},e.getClassesByMainType=function(n){var i=Po(n),o=[],a=t[i.main];return a&&a[Qs]?$(a,function(s,l){l!==Qs&&o.push(s)}):o.push(a),o},e.hasClass=function(n){var i=Po(n);return!!t[i.main]},e.getAllClassMainTypes=function(){var n=[];return $(t,function(i,o){n.push(o)}),n},e.hasSubTypes=function(n){var i=Po(n),o=t[i.main];return o&&o[Qs]};function r(n){var i=t[n.main];return(!i||!i[Qs])&&(i=t[n.main]={},i[Qs]=!0),i}}function qd(e,t){for(var r=0;r<e.length;r++)e[r][1]||(e[r][1]=e[r][0]);return t=t||!1,function(n,i,o){for(var a={},s=0;s<e.length;s++){var l=e[s][1];if(!(i&&fe(i,l)>=0||o&&fe(o,l)<0)){var u=n.getShallow(l,t);u!=null&&(a[e[s][0]]=u)}}return a}}var OJ=[["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]],RJ=qd(OJ),DJ=function(){function e(){}return e.prototype.getAreaStyle=function(t,r){return RJ(this,t,r)},e}(),BS=new xp(50);function NJ(e){if(typeof e=="string"){var t=BS.get(e);return t&&t.image}else return e}function P9(e,t,r,n,i){if(e)if(typeof e=="string"){if(t&&t.__zrImageSrc===e||!r)return t;var o=BS.get(e),a={hostEl:r,cb:n,cbPayload:i};return o?(t=o.image,!H1(t)&&o.pending.push(a)):(t=fu.loadImage(e,_M,_M),t.__zrImageSrc=e,BS.put(e,t.__cachedImgObj={image:t,pending:[a]})),t}else return e;else return t}function _M(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var r=e.pending[t],n=r.cb;n&&n(this,r.cbPayload),r.hostEl.dirty()}e.pending.length=0}function H1(e){return e&&e.width&&e.height}var Uy=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function FJ(e,t,r,n,i){if(!t)return"";var o=(e+"").split(`
`);i=E9(t,r,n,i);for(var a=0,s=o.length;a<s;a++)o[a]=C9(o[a],i);return o.join(`
`)}function E9(e,t,r,n){n=n||{};var i=at({},n);i.font=t,r=Zt(r,"..."),i.maxIterations=Zt(n.maxIterations,2);var o=i.minChar=Zt(n.minChar,0);i.cnCharWidth=Ln("\u56FD",t);var a=i.ascCharWidth=Ln("a",t);i.placeholder=Zt(n.placeholder,"");for(var s=e=Math.max(0,e-1),l=0;l<o&&s>=a;l++)s-=a;var u=Ln(r,t);return u>s&&(r="",u=0),s=e-u,i.ellipsis=r,i.ellipsisWidth=u,i.contentWidth=s,i.containerWidth=e,i}function C9(e,t){var r=t.containerWidth,n=t.font,i=t.contentWidth;if(!r)return"";var o=Ln(e,n);if(o<=r)return e;for(var a=0;;a++){if(o<=i||a>=t.maxIterations){e+=t.ellipsis;break}var s=a===0?$J(e,i,t.ascCharWidth,t.cnCharWidth):o>0?Math.floor(e.length*i/o):0;e=e.substr(0,s),o=Ln(e,n)}return e===""&&(e=t.placeholder),e}function $J(e,t,r,n){for(var i=0,o=0,a=e.length;o<a&&i<t;o++){var s=e.charCodeAt(o);i+=0<=s&&s<=127?r:n}return o}function BJ(e,t){e!=null&&(e+="");var r=t.overflow,n=t.padding,i=t.font,o=r==="truncate",a=Nk(i),s=Zt(t.lineHeight,a),l=!!t.backgroundColor,u=t.lineOverflow==="truncate",c=t.width,f;c!=null&&(r==="break"||r==="breakAll")?f=e?A9(e,t.font,c,r==="breakAll",0).lines:[]:f=e?e.split(`
`):[];var h=f.length*s,d=Zt(t.height,h);if(h>d&&u){var p=Math.floor(d/s);f=f.slice(0,p)}if(e&&o&&c!=null)for(var v=E9(c,i,t.ellipsis,{minChar:t.truncateMinChar,placeholder:t.placeholder}),m=0;m<f.length;m++)f[m]=C9(f[m],v);for(var g=d,_=0,m=0;m<f.length;m++)_=Math.max(Ln(f[m],i),_);c==null&&(c=_);var b=_;return n&&(g+=n[0]+n[2],b+=n[1]+n[3],c+=n[1]+n[3]),l&&(b=c),{lines:f,height:d,outerWidth:b,outerHeight:g,lineHeight:s,calculatedLineHeight:a,contentWidth:_,contentHeight:h,width:c}}var zJ=function(){function e(){}return e}(),yM=function(){function e(t){this.tokens=[],t&&(this.tokens=t)}return e}(),VJ=function(){function e(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]}return e}();function UJ(e,t){var r=new VJ;if(e!=null&&(e+=""),!e)return r;for(var n=t.width,i=t.height,o=t.overflow,a=(o==="break"||o==="breakAll")&&n!=null?{width:n,accumWidth:0,breakAll:o==="breakAll"}:null,s=Uy.lastIndex=0,l;(l=Uy.exec(e))!=null;){var u=l.index;u>s&&Wy(r,e.substring(s,u),t,a),Wy(r,l[2],t,a,l[1]),s=Uy.lastIndex}s<e.length&&Wy(r,e.substring(s,e.length),t,a);var c=[],f=0,h=0,d=t.padding,p=o==="truncate",v=t.lineOverflow==="truncate";function m(q,et,At){q.width=et,q.lineHeight=At,f+=At,h=Math.max(h,et)}t:for(var g=0;g<r.lines.length;g++){for(var _=r.lines[g],b=0,w=0,T=0;T<_.tokens.length;T++){var S=_.tokens[T],k=S.styleName&&t.rich[S.styleName]||{},C=S.textPadding=k.padding,E=C?C[1]+C[3]:0,M=S.font=k.font||t.font;S.contentHeight=Nk(M);var x=Zt(k.height,S.contentHeight);if(S.innerHeight=x,C&&(x+=C[0]+C[2]),S.height=x,S.lineHeight=vd(k.lineHeight,t.lineHeight,x),S.align=k&&k.align||t.align,S.verticalAlign=k&&k.verticalAlign||"middle",v&&i!=null&&f+S.lineHeight>i){T>0?(_.tokens=_.tokens.slice(0,T),m(_,w,b),r.lines=r.lines.slice(0,g+1)):r.lines=r.lines.slice(0,g);break t}var D=k.width,B=D==null||D==="auto";if(typeof D=="string"&&D.charAt(D.length-1)==="%")S.percentWidth=D,c.push(S),S.contentWidth=Ln(S.text,M);else{if(B){var V=k.backgroundColor,F=V&&V.image;F&&(F=NJ(F),H1(F)&&(S.width=Math.max(S.width,F.width*x/F.height)))}var G=p&&n!=null?n-w:null;G!=null&&G<S.width?!B||G<E?(S.text="",S.width=S.contentWidth=0):(S.text=FJ(S.text,G-E,M,t.ellipsis,{minChar:t.truncateMinChar}),S.width=S.contentWidth=Ln(S.text,M)):S.contentWidth=Ln(S.text,M)}S.width+=E,w+=S.width,k&&(b=Math.max(b,S.lineHeight))}m(_,w,b)}r.outerWidth=r.width=Zt(n,h),r.outerHeight=r.height=Zt(i,f),r.contentHeight=f,r.contentWidth=h,d&&(r.outerWidth+=d[1]+d[3],r.outerHeight+=d[0]+d[2]);for(var g=0;g<c.length;g++){var S=c[g],Z=S.percentWidth;S.width=parseInt(Z,10)/100*r.width}return r}function Wy(e,t,r,n,i){var o=t==="",a=i&&r.rich[i]||{},s=e.lines,l=a.font||r.font,u=!1,c,f;if(n){var h=a.padding,d=h?h[1]+h[3]:0;if(a.width!=null&&a.width!=="auto"){var p=ga(a.width,n.width)+d;s.length>0&&p+n.accumWidth>n.width&&(c=t.split(`
`),u=!0),n.accumWidth=p}else{var v=A9(t,l,n.width,n.breakAll,n.accumWidth);n.accumWidth=v.accumWidth+d,f=v.linesWidths,c=v.lines}}else c=t.split(`
`);for(var m=0;m<c.length;m++){var g=c[m],_=new zJ;if(_.styleName=i,_.text=g,_.isLineHolder=!g&&!o,typeof a.width=="number"?_.width=a.width:_.width=f?f[m]:Ln(g,l),!m&&!u){var b=(s[s.length-1]||(s[0]=new yM)).tokens,w=b.length;w===1&&b[0].isLineHolder?b[0]=_:(g||!w||o)&&b.push(_)}else s.push(new yM([_]))}}function WJ(e){var t=e.charCodeAt(0);return t>=33&&t<=383}var GJ=hu(",&?/;] ".split(""),function(e,t){return e[t]=!0,e},{});function jJ(e){return WJ(e)?!!GJ[e]:!0}function A9(e,t,r,n,i){for(var o=[],a=[],s="",l="",u=0,c=0,f=0;f<e.length;f++){var h=e.charAt(f);if(h===`
`){l&&(s+=l,c+=u),o.push(s),a.push(c),s="",l="",u=0,c=0;continue}var d=Ln(h,t),p=n?!1:!jJ(h);if(o.length?c+d>r:i+c+d>r){c?(s||l)&&(p?(s||(s=l,l="",u=0,c=u),o.push(s),a.push(c-u),l+=h,u+=d,s="",c=u):(l&&(s+=l,l="",u=0),o.push(s),a.push(c),s=h,c=d)):p?(o.push(l),a.push(u),l=h,u=d):(o.push(h),a.push(d));continue}c+=d,p?(l+=h,u+=d):(l&&(s+=l,l="",u=0),s+=h)}return!o.length&&!s&&(s=e,l="",u=0),l&&(s+=l),s&&(o.push(s),a.push(c)),o.length===1&&(c+=i),{accumWidth:c,lines:o,linesWidths:a}}var zS="__zr_style_"+Math.round(Math.random()*10),zl={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},X1={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};zl[zS]=!0;var bM=["z","z2","invisible"],HJ=["invisible"],XJ=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype._init=function(r){for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];o==="style"?this.useStyle(r[o]):e.prototype.attrKV.call(this,o,r[o])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,n,i,o){var a=this.transform;if(this.ignore||this.invisible||this.style.opacity===0||this.culling&&YJ(this,r,n)||a&&!a[0]&&!a[3])return!1;if(i&&this.__clipPaths){for(var s=0;s<this.__clipPaths.length;++s)if(this.__clipPaths[s].isZeroArea())return!1}if(o&&this.parent)for(var l=this.parent;l;){if(l.ignore)return!1;l=l.parent}return!0},t.prototype.contain=function(r,n){return this.rectContain(r,n)},t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.rectContain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();return o.contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var n=this.transform,i=this.getBoundingRect(),o=this.style,a=o.shadowBlur||0,s=o.shadowOffsetX||0,l=o.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new le(0,0,0,0)),n?le.applyTransform(r,i,n):r.copy(i),(a||s||l)&&(r.width+=a*2+Math.abs(s),r.height+=a*2+Math.abs(l),r.x=Math.min(r.x,r.x+s-a),r.y=Math.min(r.y,r.y+l-a));var u=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-u),r.y=Math.floor(r.y-u),r.width=Math.ceil(r.width+1+u*2),r.height=Math.ceil(r.height+1+u*2))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new le(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,n){r!=="style"?e.prototype.attrKV.call(this,r,n):this.style?this.setStyle(n):this.useStyle(n)},t.prototype.setStyle=function(r,n){return typeof r=="string"?this.style[r]=n:at(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=Xh,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(this.__dirty&Xh)},t.prototype.styleUpdated=function(){this.__dirty&=~Xh},t.prototype.createStyle=function(r){return W1(zl,r)},t.prototype.useStyle=function(r){r[zS]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[zS]},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,n,bM)},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.style?a?o?u=n.style:(u=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(u,n.style)):(u=this._mergeStyle(this.createStyle(),o?this.style:i.style),this._mergeStyle(u,n.style)):l&&(u=i.style),u)if(a){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var f=ve(c),h=0;h<f.length;h++){var d=f[h];d in u&&(u[d]=u[d],this.style[d]=c[d])}for(var p=ve(u),h=0;h<p.length;h++){var d=p[h];this.style[d]=this.style[d]}this._transitionState(r,{style:u},s,this.getAnimationStyleProps())}else this.useStyle(u);for(var v=this.__inHover?HJ:bM,h=0;h<v.length;h++){var d=v[h];n&&n[d]!=null?this[d]=n[d]:l&&i[d]!=null&&(this[d]=i[d])}},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.style&&(i=i||{},this._mergeStyle(i,a.style))}return i&&(n.style=i),n},t.prototype._mergeStyle=function(r,n){return at(r,n),r},t.prototype.getAnimationStyleProps=function(){return X1},t.initDefaultProps=function(){var r=t.prototype;r.type="displayable",r.invisible=!1,r.z=0,r.z2=0,r.zlevel=0,r.culling=!1,r.cursor="pointer",r.rectHover=!1,r.incremental=!1,r._rect=null,r.dirtyRectTolerance=0,r.__dirty=Mn|Xh}(),t}(h9),Gy=new le(0,0,0,0),jy=new le(0,0,0,0);function YJ(e,t,r){return Gy.copy(e.getBoundingRect()),e.transform&&Gy.applyTransform(e.transform),jy.width=t,jy.height=r,!Gy.intersect(jy)}const du=XJ;var dn=Math.min,pn=Math.max,Hy=Math.sin,Xy=Math.cos,tl=Math.PI*2,L0=df(),I0=df(),O0=df();function qJ(e,t,r){if(e.length!==0){for(var n=e[0],i=n[0],o=n[0],a=n[1],s=n[1],l=1;l<e.length;l++)n=e[l],i=dn(i,n[0]),o=pn(o,n[0]),a=dn(a,n[1]),s=pn(s,n[1]);t[0]=i,t[1]=a,r[0]=o,r[1]=s}}function wM(e,t,r,n,i,o){i[0]=dn(e,r),i[1]=dn(t,n),o[0]=pn(e,r),o[1]=pn(t,n)}var SM=[],TM=[];function ZJ(e,t,r,n,i,o,a,s,l,u){var c=n9,f=cr,h=c(e,r,i,a,SM);l[0]=1/0,l[1]=1/0,u[0]=-1/0,u[1]=-1/0;for(var d=0;d<h;d++){var p=f(e,r,i,a,SM[d]);l[0]=dn(p,l[0]),u[0]=pn(p,u[0])}h=c(t,n,o,s,TM);for(var d=0;d<h;d++){var v=f(t,n,o,s,TM[d]);l[1]=dn(v,l[1]),u[1]=pn(v,u[1])}l[0]=dn(e,l[0]),u[0]=pn(e,u[0]),l[0]=dn(a,l[0]),u[0]=pn(a,u[0]),l[1]=dn(t,l[1]),u[1]=pn(t,u[1]),l[1]=dn(s,l[1]),u[1]=pn(s,u[1])}function KJ(e,t,r,n,i,o,a,s){var l=i9,u=Br,c=pn(dn(l(e,r,i),1),0),f=pn(dn(l(t,n,o),1),0),h=u(e,r,i,c),d=u(t,n,o,f);a[0]=dn(e,i,h),a[1]=dn(t,o,d),s[0]=pn(e,i,h),s[1]=pn(t,o,d)}function JJ(e,t,r,n,i,o,a,s,l){var u=_c,c=yc,f=Math.abs(i-o);if(f%tl<1e-4&&f>1e-4){s[0]=e-r,s[1]=t-n,l[0]=e+r,l[1]=t+n;return}if(L0[0]=Xy(i)*r+e,L0[1]=Hy(i)*n+t,I0[0]=Xy(o)*r+e,I0[1]=Hy(o)*n+t,u(s,L0,I0),c(l,L0,I0),i=i%tl,i<0&&(i=i+tl),o=o%tl,o<0&&(o=o+tl),i>o&&!a?o+=tl:i<o&&a&&(i+=tl),a){var h=o;o=i,i=h}for(var d=0;d<o;d+=Math.PI/2)d>i&&(O0[0]=Xy(d)*r+e,O0[1]=Hy(d)*n+t,u(s,O0,s),c(l,O0,l))}var _e={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},el=[],rl=[],to=[],Na=[],eo=[],ro=[],Yy=Math.min,qy=Math.max,nl=Math.cos,il=Math.sin,Ho=Math.abs,VS=Math.PI,ss=VS*2,Zy=typeof Float32Array<"u",eh=[];function Ky(e){var t=Math.round(e/VS*1e8)/1e8;return t%2*VS}function QJ(e,t){var r=Ky(e[0]);r<0&&(r+=ss);var n=r-e[0],i=e[1];i+=n,!t&&i-r>=ss?i=r+ss:t&&r-i>=ss?i=r-ss:!t&&r>i?i=r+(ss-Ky(r-i)):t&&r<i&&(i=r-(ss-Ky(i-r))),e[0]=r,e[1]=i}var tQ=function(){function e(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return e.prototype.increaseVersion=function(){this._version++},e.prototype.getVersion=function(){return this._version},e.prototype.setScale=function(t,r,n){n=n||0,n>0&&(this._ux=Ho(n/Lm/t)||0,this._uy=Ho(n/Lm/r)||0)},e.prototype.setDPR=function(t){this.dpr=t},e.prototype.setContext=function(t){this._ctx=t},e.prototype.getContext=function(){return this._ctx},e.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},e.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},e.prototype.moveTo=function(t,r){return this._drawPendingPt(),this.addData(_e.M,t,r),this._ctx&&this._ctx.moveTo(t,r),this._x0=t,this._y0=r,this._xi=t,this._yi=r,this},e.prototype.lineTo=function(t,r){var n=Ho(t-this._xi),i=Ho(r-this._yi),o=n>this._ux||i>this._uy;if(this.addData(_e.L,t,r),this._ctx&&o&&this._ctx.lineTo(t,r),o)this._xi=t,this._yi=r,this._pendingPtDist=0;else{var a=n*n+i*i;a>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=r,this._pendingPtDist=a)}return this},e.prototype.bezierCurveTo=function(t,r,n,i,o,a){return this._drawPendingPt(),this.addData(_e.C,t,r,n,i,o,a),this._ctx&&this._ctx.bezierCurveTo(t,r,n,i,o,a),this._xi=o,this._yi=a,this},e.prototype.quadraticCurveTo=function(t,r,n,i){return this._drawPendingPt(),this.addData(_e.Q,t,r,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,r,n,i),this._xi=n,this._yi=i,this},e.prototype.arc=function(t,r,n,i,o,a){this._drawPendingPt(),eh[0]=i,eh[1]=o,QJ(eh,a),i=eh[0],o=eh[1];var s=o-i;return this.addData(_e.A,t,r,n,n,i,s,0,a?0:1),this._ctx&&this._ctx.arc(t,r,n,i,o,a),this._xi=nl(o)*n+t,this._yi=il(o)*n+r,this},e.prototype.arcTo=function(t,r,n,i,o){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,r,n,i,o),this},e.prototype.rect=function(t,r,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,r,n,i),this.addData(_e.R,t,r,n,i),this},e.prototype.closePath=function(){this._drawPendingPt(),this.addData(_e.Z);var t=this._ctx,r=this._x0,n=this._y0;return t&&t.closePath(),this._xi=r,this._yi=n,this},e.prototype.fill=function(t){t&&t.fill(),this.toStatic()},e.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},e.prototype.len=function(){return this._len},e.prototype.setData=function(t){var r=t.length;!(this.data&&this.data.length===r)&&Zy&&(this.data=new Float32Array(r));for(var n=0;n<r;n++)this.data[n]=t[n];this._len=r},e.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var r=t.length,n=0,i=this._len,o=0;o<r;o++)n+=t[o].len();Zy&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n));for(var o=0;o<r;o++)for(var a=t[o].data,s=0;s<a.length;s++)this.data[i++]=a[s];this._len=i},e.prototype.addData=function(t,r,n,i,o,a,s,l,u){if(!!this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var f=0;f<arguments.length;f++)c[this._len++]=arguments[f]}},e.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},e.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],r=0;r<this._len;r++)t[r]=this.data[r];this.data=t}},e.prototype.toStatic=function(){if(!!this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Zy&&this._len>11&&(this.data=new Float32Array(t)))}},e.prototype.getBoundingRect=function(){to[0]=to[1]=eo[0]=eo[1]=Number.MAX_VALUE,Na[0]=Na[1]=ro[0]=ro[1]=-Number.MAX_VALUE;var t=this.data,r=0,n=0,i=0,o=0,a;for(a=0;a<this._len;){var s=t[a++],l=a===1;switch(l&&(r=t[a],n=t[a+1],i=r,o=n),s){case _e.M:r=i=t[a++],n=o=t[a++],eo[0]=i,eo[1]=o,ro[0]=i,ro[1]=o;break;case _e.L:wM(r,n,t[a],t[a+1],eo,ro),r=t[a++],n=t[a++];break;case _e.C:ZJ(r,n,t[a++],t[a++],t[a++],t[a++],t[a],t[a+1],eo,ro),r=t[a++],n=t[a++];break;case _e.Q:KJ(r,n,t[a++],t[a++],t[a],t[a+1],eo,ro),r=t[a++],n=t[a++];break;case _e.A:var u=t[a++],c=t[a++],f=t[a++],h=t[a++],d=t[a++],p=t[a++]+d;a+=1;var v=!t[a++];l&&(i=nl(d)*f+u,o=il(d)*h+c),JJ(u,c,f,h,d,p,v,eo,ro),r=nl(p)*f+u,n=il(p)*h+c;break;case _e.R:i=r=t[a++],o=n=t[a++];var m=t[a++],g=t[a++];wM(i,o,i+m,o+g,eo,ro);break;case _e.Z:r=i,n=o;break}_c(to,to,eo),yc(Na,Na,ro)}return a===0&&(to[0]=to[1]=Na[0]=Na[1]=0),new le(to[0],to[1],Na[0]-to[0],Na[1]-to[1])},e.prototype._calculateLength=function(){var t=this.data,r=this._len,n=this._ux,i=this._uy,o=0,a=0,s=0,l=0;this._pathSegLen||(this._pathSegLen=[]);for(var u=this._pathSegLen,c=0,f=0,h=0;h<r;){var d=t[h++],p=h===1;p&&(o=t[h],a=t[h+1],s=o,l=a);var v=-1;switch(d){case _e.M:o=s=t[h++],a=l=t[h++];break;case _e.L:{var m=t[h++],g=t[h++],_=m-o,b=g-a;(Ho(_)>n||Ho(b)>i||h===r-1)&&(v=Math.sqrt(_*_+b*b),o=m,a=g);break}case _e.C:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++],S=t[h++],k=t[h++];v=pK(o,a,w,T,m,g,S,k,10),o=S,a=k;break}case _e.Q:{var w=t[h++],T=t[h++],m=t[h++],g=t[h++];v=mK(o,a,w,T,m,g,10),o=m,a=g;break}case _e.A:var C=t[h++],E=t[h++],M=t[h++],x=t[h++],D=t[h++],B=t[h++],V=B+D;h+=1,t[h++],p&&(s=nl(D)*M+C,l=il(D)*x+E),v=qy(M,x)*Yy(ss,Math.abs(B)),o=nl(V)*M+C,a=il(V)*x+E;break;case _e.R:{s=o=t[h++],l=a=t[h++];var F=t[h++],G=t[h++];v=F*2+G*2;break}case _e.Z:{var _=s-o,b=l-a;v=Math.sqrt(_*_+b*b),o=s,a=l;break}}v>=0&&(u[f++]=v,c+=v)}return this._pathLen=c,c},e.prototype.rebuildPath=function(t,r){var n=this.data,i=this._ux,o=this._uy,a=this._len,s,l,u,c,f,h,d=r<1,p,v,m=0,g=0,_,b=0,w,T;if(d&&(this._pathSegLen||this._calculateLength(),p=this._pathSegLen,v=this._pathLen,_=r*v,!_))return;t:for(var S=0;S<a;){var k=n[S++],C=S===1;switch(C&&(u=n[S],c=n[S+1],s=u,l=c),k!==_e.L&&b>0&&(t.lineTo(w,T),b=0),k){case _e.M:s=u=n[S++],l=c=n[S++],t.moveTo(u,c);break;case _e.L:{f=n[S++],h=n[S++];var E=Ho(f-u),M=Ho(h-c);if(E>i||M>o){if(d){var x=p[g++];if(m+x>_){var D=(_-m)/x;t.lineTo(u*(1-D)+f*D,c*(1-D)+h*D);break t}m+=x}t.lineTo(f,h),u=f,c=h,b=0}else{var B=E*E+M*M;B>b&&(w=f,T=h,b=B)}break}case _e.C:{var V=n[S++],F=n[S++],G=n[S++],Z=n[S++],q=n[S++],et=n[S++];if(d){var x=p[g++];if(m+x>_){var D=(_-m)/x;Am(u,V,G,q,D,el),Am(c,F,Z,et,D,rl),t.bezierCurveTo(el[1],rl[1],el[2],rl[2],el[3],rl[3]);break t}m+=x}t.bezierCurveTo(V,F,G,Z,q,et),u=q,c=et;break}case _e.Q:{var V=n[S++],F=n[S++],G=n[S++],Z=n[S++];if(d){var x=p[g++];if(m+x>_){var D=(_-m)/x;Mm(u,V,G,D,el),Mm(c,F,Z,D,rl),t.quadraticCurveTo(el[1],rl[1],el[2],rl[2]);break t}m+=x}t.quadraticCurveTo(V,F,G,Z),u=G,c=Z;break}case _e.A:var At=n[S++],Dt=n[S++],Tt=n[S++],kt=n[S++],Xt=n[S++],Y=n[S++],it=n[S++],K=!n[S++],vt=Tt>kt?Tt:kt,Pt=Ho(Tt-kt)>.001,xt=Xt+Y,lt=!1;if(d){var x=p[g++];m+x>_&&(xt=Xt+Y*(_-m)/x,lt=!0),m+=x}if(Pt&&t.ellipse?t.ellipse(At,Dt,Tt,kt,it,Xt,xt,K):t.arc(At,Dt,vt,Xt,xt,K),lt)break t;C&&(s=nl(Xt)*Tt+At,l=il(Xt)*kt+Dt),u=nl(xt)*Tt+At,c=il(xt)*kt+Dt;break;case _e.R:s=u=n[S],l=c=n[S+1],f=n[S++],h=n[S++];var ft=n[S++],z=n[S++];if(d){var x=p[g++];if(m+x>_){var W=_-m;t.moveTo(f,h),t.lineTo(f+Yy(W,ft),h),W-=ft,W>0&&t.lineTo(f+ft,h+Yy(W,z)),W-=z,W>0&&t.lineTo(f+qy(ft-W,0),h+z),W-=ft,W>0&&t.lineTo(f,h+qy(z-W,0));break t}m+=x}t.rect(f,h,ft,z);break;case _e.Z:if(d){var x=p[g++];if(m+x>_){var D=(_-m)/x;t.lineTo(u*(1-D)+s*D,c*(1-D)+l*D);break t}m+=x}t.closePath(),u=s,c=l}}},e.prototype.clone=function(){var t=new e,r=this.data;return t.data=r.slice?r.slice():Array.prototype.slice.call(r),t._len=this._len,t},e.CMD=_e,e.initDefaultProps=function(){var t=e.prototype;t._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,t._version=0}(),e}();const Ql=tQ;function Fu(e,t,r,n,i,o,a){if(i===0)return!1;var s=i,l=0,u=e;if(a>t+s&&a>n+s||a<t-s&&a<n-s||o>e+s&&o>r+s||o<e-s&&o<r-s)return!1;if(e!==r)l=(t-n)/(e-r),u=(e*n-r*t)/(e-r);else return Math.abs(o-e)<=s/2;var c=l*o-a+u,f=c*c/(l*l+1);return f<=s/2*s/2}function eQ(e,t,r,n,i,o,a,s,l,u,c){if(l===0)return!1;var f=l;if(c>t+f&&c>n+f&&c>o+f&&c>s+f||c<t-f&&c<n-f&&c<o-f&&c<s-f||u>e+f&&u>r+f&&u>i+f&&u>a+f||u<e-f&&u<r-f&&u<i-f&&u<a-f)return!1;var h=dK(e,t,r,n,i,o,a,s,u,c,null);return h<=f/2}function rQ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;if(l>t+u&&l>n+u&&l>o+u||l<t-u&&l<n-u&&l<o-u||s>e+u&&s>r+u&&s>i+u||s<e-u&&s<r-u&&s<i-u)return!1;var c=gK(e,t,r,n,i,o,s,l,null);return c<=u/2}var kM=Math.PI*2;function R0(e){return e%=kM,e<0&&(e+=kM),e}var rh=Math.PI*2;function nQ(e,t,r,n,i,o,a,s,l){if(a===0)return!1;var u=a;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(c-u>r||c+u<r)return!1;if(Math.abs(n-i)%rh<1e-4)return!0;if(o){var f=n;n=R0(i),i=R0(f)}else n=R0(n),i=R0(i);n>i&&(i+=rh);var h=Math.atan2(l,s);return h<0&&(h+=rh),h>=n&&h<=i||h+rh>=n&&h+rh<=i}function ol(e,t,r,n,i,o){if(o>t&&o>n||o<t&&o<n||n===t)return 0;var a=(o-t)/(n-t),s=n<t?1:-1;(a===1||a===0)&&(s=n<t?.5:-.5);var l=a*(r-e)+e;return l===i?1/0:l>i?s:0}var Fa=Ql.CMD,al=Math.PI*2,iQ=1e-4;function oQ(e,t){return Math.abs(e-t)<iQ}var tn=[-1,-1,-1],Zn=[-1,-1];function aQ(){var e=Zn[0];Zn[0]=Zn[1],Zn[1]=e}function sQ(e,t,r,n,i,o,a,s,l,u){if(u>t&&u>n&&u>o&&u>s||u<t&&u<n&&u<o&&u<s)return 0;var c=Cm(t,n,o,s,u,tn);if(c===0)return 0;for(var f=0,h=-1,d=void 0,p=void 0,v=0;v<c;v++){var m=tn[v],g=m===0||m===1?.5:1,_=cr(e,r,i,a,m);_<l||(h<0&&(h=n9(t,n,o,s,Zn),Zn[1]<Zn[0]&&h>1&&aQ(),d=cr(t,n,o,s,Zn[0]),h>1&&(p=cr(t,n,o,s,Zn[1]))),h===2?m<Zn[0]?f+=d<t?g:-g:m<Zn[1]?f+=p<d?g:-g:f+=s<p?g:-g:m<Zn[0]?f+=d<t?g:-g:f+=s<d?g:-g)}return f}function lQ(e,t,r,n,i,o,a,s){if(s>t&&s>n&&s>o||s<t&&s<n&&s<o)return 0;var l=vK(t,n,o,s,tn);if(l===0)return 0;var u=i9(t,n,o);if(u>=0&&u<=1){for(var c=0,f=Br(t,n,o,u),h=0;h<l;h++){var d=tn[h]===0||tn[h]===1?.5:1,p=Br(e,r,i,tn[h]);p<a||(tn[h]<u?c+=f<t?d:-d:c+=o<f?d:-d)}return c}else{var d=tn[0]===0||tn[0]===1?.5:1,p=Br(e,r,i,tn[0]);return p<a?0:o<t?d:-d}}function uQ(e,t,r,n,i,o,a,s){if(s-=t,s>r||s<-r)return 0;var l=Math.sqrt(r*r-s*s);tn[0]=-l,tn[1]=l;var u=Math.abs(n-i);if(u<1e-4)return 0;if(u>=al-1e-4){n=0,i=al;var c=o?1:-1;return a>=tn[0]+e&&a<=tn[1]+e?c:0}if(n>i){var f=n;n=i,i=f}n<0&&(n+=al,i+=al);for(var h=0,d=0;d<2;d++){var p=tn[d];if(p+e>a){var v=Math.atan2(s,p),c=o?1:-1;v<0&&(v=al+v),(v>=n&&v<=i||v+al>=n&&v+al<=i)&&(v>Math.PI/2&&v<Math.PI*1.5&&(c=-c),h+=c)}}return h}function M9(e,t,r,n,i){for(var o=e.data,a=e.len(),s=0,l=0,u=0,c=0,f=0,h,d,p=0;p<a;){var v=o[p++],m=p===1;switch(v===Fa.M&&p>1&&(r||(s+=ol(l,u,c,f,n,i))),m&&(l=o[p],u=o[p+1],c=l,f=u),v){case Fa.M:c=o[p++],f=o[p++],l=c,u=f;break;case Fa.L:if(r){if(Fu(l,u,o[p],o[p+1],t,n,i))return!0}else s+=ol(l,u,o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Fa.C:if(r){if(eQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=sQ(l,u,o[p++],o[p++],o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Fa.Q:if(r){if(rQ(l,u,o[p++],o[p++],o[p],o[p+1],t,n,i))return!0}else s+=lQ(l,u,o[p++],o[p++],o[p],o[p+1],n,i)||0;l=o[p++],u=o[p++];break;case Fa.A:var g=o[p++],_=o[p++],b=o[p++],w=o[p++],T=o[p++],S=o[p++];p+=1;var k=!!(1-o[p++]);h=Math.cos(T)*b+g,d=Math.sin(T)*w+_,m?(c=h,f=d):s+=ol(l,u,h,d,n,i);var C=(n-g)*w/b+g;if(r){if(nQ(g,_,w,T,T+S,k,t,C,i))return!0}else s+=uQ(g,_,w,T,T+S,k,C,i);l=Math.cos(T+S)*b+g,u=Math.sin(T+S)*w+_;break;case Fa.R:c=l=o[p++],f=u=o[p++];var E=o[p++],M=o[p++];if(h=c+E,d=f+M,r){if(Fu(c,f,h,f,t,n,i)||Fu(h,f,h,d,t,n,i)||Fu(h,d,c,d,t,n,i)||Fu(c,d,c,f,t,n,i))return!0}else s+=ol(h,f,h,d,n,i),s+=ol(c,d,c,f,n,i);break;case Fa.Z:if(r){if(Fu(l,u,c,f,t,n,i))return!0}else s+=ol(l,u,c,f,n,i);l=c,u=f;break}}return!r&&!oQ(u,f)&&(s+=ol(l,u,c,f,n,i)||0),s!==0}function cQ(e,t,r){return M9(e,0,!1,t,r)}function fQ(e,t,r,n){return M9(e,t,!0,r,n)}var x9=re({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},zl),hQ={style:re({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},X1.style)},Jy=Lo.concat(["invisible","culling","z","z2","zlevel","parent"]),dQ=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.update=function(){var r=this;e.prototype.update.call(this);var n=this.style;if(n.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(l){r.buildPath(l,r.shape)}),i.silent=!0;var o=i.style;for(var a in n)o[a]!==n[a]&&(o[a]=n[a]);o.fill=n.fill?n.decal:null,o.decal=null,o.shadowColor=null,n.strokeFirst&&(o.stroke=null);for(var s=0;s<Jy.length;++s)i[Jy[s]]=this[Jy[s]];i.__dirty|=Mn}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var n=ve(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var o=0;o<n.length;o++){var a=n[o],s=r[a];a==="style"?this.style?at(this.style,s):this.useStyle(s):a==="shape"?at(this.shape,s):e.prototype.attrKV.call(this,a,s)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if(r!=="none"){if(Mt(r)){var n=xm(r,0);return n>.5?NS:n>.2?GK:FS}else if(r)return FS}return NS},t.prototype.getInsideTextStroke=function(r){var n=this.style.fill;if(Mt(n)){var i=this.__zr,o=!!(i&&i.isDarkMode()),a=xm(r,0)<DS;if(o===a)return n}},t.prototype.buildPath=function(r,n,i){},t.prototype.pathUpdated=function(){this.__dirty&=~pc},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Ql(!1)},t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return!(n==null||n==="none"||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.getBoundingRect=function(){var r=this._rect,n=this.style,i=!r;if(i){var o=!1;this.path||(o=!0,this.createPathProxy());var a=this.path;(o||this.__dirty&pc)&&(a.beginPath(),this.buildPath(a,this.shape,!1),this.pathUpdated()),r=a.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var s=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){s.copy(r);var l=n.strokeNoScale?this.getLineScale():1,u=n.lineWidth;if(!this.hasFill()){var c=this.strokeContainThreshold;u=Math.max(u,c==null?4:c)}l>1e-10&&(s.width+=u/l,s.height+=u/l,s.x-=u/l/2,s.y-=u/l/2)}return s}return r},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect(),a=this.style;if(r=i[0],n=i[1],o.contain(r,n)){var s=this.path;if(this.hasStroke()){var l=a.lineWidth,u=a.strokeNoScale?this.getLineScale():1;if(u>1e-10&&(this.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),fQ(s,l/u,r,n)))return!0}if(this.hasFill())return cQ(s,r,n)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=pc,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){r==="style"?this.dirtyStyle():r==="shape"?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,n){r==="shape"?this.setShape(n):e.prototype.attrKV.call(this,r,n)},t.prototype.setShape=function(r,n){var i=this.shape;return i||(i=this.shape={}),typeof r=="string"?i[r]=n:at(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(this.__dirty&pc)},t.prototype.createStyle=function(r){return W1(x9,r)},t.prototype._innerSaveToNormal=function(r){e.prototype._innerSaveToNormal.call(this,r);var n=this._normalState;r.shape&&!n.shape&&(n.shape=at({},this.shape))},t.prototype._applyStateObj=function(r,n,i,o,a,s){e.prototype._applyStateObj.call(this,r,n,i,o,a,s);var l=!(n&&o),u;if(n&&n.shape?a?o?u=n.shape:(u=at({},i.shape),at(u,n.shape)):(u=at({},o?this.shape:i.shape),at(u,n.shape)):l&&(u=i.shape),u)if(a){this.shape=at({},this.shape);for(var c={},f=ve(u),h=0;h<f.length;h++){var d=f[h];typeof u[d]=="object"?this.shape[d]=u[d]:c[d]=u[d]}this._transitionState(r,{shape:c},s)}else this.shape=u,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var n=e.prototype._mergeStates.call(this,r),i,o=0;o<r.length;o++){var a=r[o];a.shape&&(i=i||{},this._mergeStyle(i,a.shape))}return i&&(n.shape=i),n},t.prototype.getAnimationStyleProps=function(){return hQ},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var n=function(o){Ce(a,o);function a(s){var l=o.call(this,s)||this;return r.init&&r.init.call(l,s),l}return a.prototype.getDefaultStyle=function(){return zt(r.style)},a.prototype.getDefaultShape=function(){return zt(r.shape)},a}(t);for(var i in r)typeof r[i]=="function"&&(n.prototype[i]=r[i]);return n},t.initDefaultProps=function(){var r=t.prototype;r.type="path",r.strokeContainThreshold=5,r.segmentIgnoreThreshold=0,r.subPixelOptimize=!1,r.autoBatch=!1,r.__dirty=Mn|Xh|pc}(),t}(du);const de=dQ;var pQ=re({strokeFirst:!0,font:Zl,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},x9),L9=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.hasStroke=function(){var r=this.style,n=r.stroke;return n!=null&&n!=="none"&&r.lineWidth>0},t.prototype.hasFill=function(){var r=this.style,n=r.fill;return n!=null&&n!=="none"},t.prototype.createStyle=function(r){return W1(pQ,r)},t.prototype.setBoundingRect=function(r){this._rect=r},t.prototype.getBoundingRect=function(){var r=this.style;if(!this._rect){var n=r.text;n!=null?n+="":n="";var i=Dk(n,r.font,r.textAlign,r.textBaseline);if(i.x+=r.x||0,i.y+=r.y||0,this.hasStroke()){var o=r.lineWidth;i.x-=o/2,i.y-=o/2,i.width+=o,i.height+=o}this._rect=i}return this._rect},t.initDefaultProps=function(){var r=t.prototype;r.dirtyRectTolerance=10}(),t}(du);L9.prototype.type="tspan";const US=L9;var vQ=re({x:0,y:0},zl),gQ={style:re({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},X1.style)};function mQ(e){return!!(e&&typeof e!="string"&&e.width&&e.height)}var I9=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.createStyle=function(r){return W1(vQ,r)},t.prototype._getSize=function(r){var n=this.style,i=n[r];if(i!=null)return i;var o=mQ(n.image)?n.image:this.__image;if(!o)return 0;var a=r==="width"?"height":"width",s=n[a];return s==null?o[r]:o[r]/o[a]*s},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return gQ},t.prototype.getBoundingRect=function(){var r=this.style;return this._rect||(this._rect=new le(r.x||0,r.y||0,this.getWidth(),this.getHeight())),this._rect},t}(du);I9.prototype.type="image";const Ea=I9;function _Q(e,t){var r=t.x,n=t.y,i=t.width,o=t.height,a=t.r,s,l,u,c;i<0&&(r=r+i,i=-i),o<0&&(n=n+o,o=-o),typeof a=="number"?s=l=u=c=a:a instanceof Array?a.length===1?s=l=u=c=a[0]:a.length===2?(s=u=a[0],l=c=a[1]):a.length===3?(s=a[0],l=c=a[1],u=a[2]):(s=a[0],l=a[1],u=a[2],c=a[3]):s=l=u=c=0;var f;s+l>i&&(f=s+l,s*=i/f,l*=i/f),u+c>i&&(f=u+c,u*=i/f,c*=i/f),l+u>o&&(f=l+u,l*=o/f,u*=o/f),s+c>o&&(f=s+c,s*=o/f,c*=o/f),e.moveTo(r+s,n),e.lineTo(r+i-l,n),l!==0&&e.arc(r+i-l,n+l,l,-Math.PI/2,0),e.lineTo(r+i,n+o-u),u!==0&&e.arc(r+i-u,n+o-u,u,0,Math.PI/2),e.lineTo(r+c,n+o),c!==0&&e.arc(r+c,n+o-c,c,Math.PI/2,Math.PI),e.lineTo(r,n+s),s!==0&&e.arc(r+s,n+s,s,Math.PI,Math.PI*1.5)}var wc=Math.round;function O9(e,t,r){if(!!t){var n=t.x1,i=t.x2,o=t.y1,a=t.y2;e.x1=n,e.x2=i,e.y1=o,e.y2=a;var s=r&&r.lineWidth;return s&&(wc(n*2)===wc(i*2)&&(e.x1=e.x2=Ll(n,s,!0)),wc(o*2)===wc(a*2)&&(e.y1=e.y2=Ll(o,s,!0))),e}}function R9(e,t,r){if(!!t){var n=t.x,i=t.y,o=t.width,a=t.height;e.x=n,e.y=i,e.width=o,e.height=a;var s=r&&r.lineWidth;return s&&(e.x=Ll(n,s,!0),e.y=Ll(i,s,!0),e.width=Math.max(Ll(n+o,s,!1)-e.x,o===0?0:1),e.height=Math.max(Ll(i+a,s,!1)-e.y,a===0?0:1)),e}}function Ll(e,t,r){if(!t)return e;var n=wc(e*2);return(n+wc(t))%2===0?n/2:(n+(r?1:-1))/2}var yQ=function(){function e(){this.x=0,this.y=0,this.width=0,this.height=0}return e}(),bQ={},D9=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new yQ},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=R9(bQ,n,this.style);i=l.x,o=l.y,a=l.width,s=l.height,l.r=n.r,n=l}else i=n.x,o=n.y,a=n.width,s=n.height;n.r?_Q(r,n):r.rect(i,o,a,s)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(de);D9.prototype.type="rect";const Qe=D9;var PM={fill:"#000"},EM=2,wQ={style:re({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},X1.style)},N9=function(e){Ce(t,e);function t(r){var n=e.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=PM,n.attr(r),n}return t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){e.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var r=0;r<this._children.length;r++){var n=this._children[r];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},t.prototype.updateTransform=function(){var r=this.innerTransformable;r?(r.updateTransform(),r.transform&&(this.transform=r.transform)):e.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(r){var n=this.innerTransformable;return n?n.getLocalTransform(r):e.prototype.getLocalTransform.call(this,r)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),e.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){this._childCursor=0,EQ(this.style),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(r){e.prototype.addSelfToZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=r},t.prototype.removeSelfFromZr=function(r){e.prototype.removeSelfFromZr.call(this,r);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var r=new le(0,0,0,0),n=this._children,i=[],o=null,a=0;a<n.length;a++){var s=n[a],l=s.getBoundingRect(),u=s.getLocalTransform(i);u?(r.copy(l),r.applyTransform(u),o=o||r.clone(),o.union(r)):(o=o||l.clone(),o.union(l))}this._rect=o||r}return this._rect},t.prototype.setDefaultTextStyle=function(r){this._defaultStyle=r||PM},t.prototype.setTextContent=function(r){},t.prototype._mergeStyle=function(r,n){if(!n)return r;var i=n.rich,o=r.rich||i&&{};return at(r,n),i&&o?(this._mergeRich(o,i),r.rich=o):o&&(r.rich=o),r},t.prototype._mergeRich=function(r,n){for(var i=ve(n),o=0;o<i.length;o++){var a=i[o];r[a]=r[a]||{},at(r[a],n[a])}},t.prototype.getAnimationStyleProps=function(){return wQ},t.prototype._getOrCreateChild=function(r){var n=this._children[this._childCursor];return(!n||!(n instanceof r))&&(n=new r),this._children[this._childCursor++]=n,n.__zr=this.__zr,n.parent=this,n},t.prototype._updatePlainTexts=function(){var r=this.style,n=r.font||Zl,i=r.padding,o=OM(r),a=BJ(o,r),s=Qy(r),l=!!r.backgroundColor,u=a.outerHeight,c=a.outerWidth,f=a.contentWidth,h=a.lines,d=a.lineHeight,p=this._defaultStyle,v=r.x||0,m=r.y||0,g=r.align||p.align||"left",_=r.verticalAlign||p.verticalAlign||"top",b=v,w=vc(m,a.contentHeight,_);if(s||i){var T=qh(v,c,g),S=vc(m,u,_);s&&this._renderBackground(r,r,T,S,c,u)}w+=d/2,i&&(b=IM(v,g,i),_==="top"?w+=i[0]:_==="bottom"&&(w-=i[2]));for(var k=0,C=!1,E=LM("fill"in r?r.fill:(C=!0,p.fill)),M=xM("stroke"in r?r.stroke:!l&&(!p.autoStroke||C)?(k=EM,p.stroke):null),x=r.textShadowBlur>0,D=r.width!=null&&(r.overflow==="truncate"||r.overflow==="break"||r.overflow==="breakAll"),B=a.calculatedLineHeight,V=0;V<h.length;V++){var F=this._getOrCreateChild(US),G=F.createStyle();F.useStyle(G),G.text=h[V],G.x=b,G.y=w,g&&(G.textAlign=g),G.textBaseline="middle",G.opacity=r.opacity,G.strokeFirst=!0,x&&(G.shadowBlur=r.textShadowBlur||0,G.shadowColor=r.textShadowColor||"transparent",G.shadowOffsetX=r.textShadowOffsetX||0,G.shadowOffsetY=r.textShadowOffsetY||0),G.stroke=M,G.fill=E,M&&(G.lineWidth=r.lineWidth||k,G.lineDash=r.lineDash,G.lineDashOffset=r.lineDashOffset||0),G.font=n,AM(G,r),w+=d,D&&F.setBoundingRect(new le(qh(G.x,r.width,G.textAlign),vc(G.y,B,G.textBaseline),f,B))}},t.prototype._updateRichTexts=function(){var r=this.style,n=OM(r),i=UJ(n,r),o=i.width,a=i.outerWidth,s=i.outerHeight,l=r.padding,u=r.x||0,c=r.y||0,f=this._defaultStyle,h=r.align||f.align,d=r.verticalAlign||f.verticalAlign,p=qh(u,a,h),v=vc(c,s,d),m=p,g=v;l&&(m+=l[3],g+=l[0]);var _=m+o;Qy(r)&&this._renderBackground(r,r,p,v,a,s);for(var b=!!r.backgroundColor,w=0;w<i.lines.length;w++){for(var T=i.lines[w],S=T.tokens,k=S.length,C=T.lineHeight,E=T.width,M=0,x=m,D=_,B=k-1,V=void 0;M<k&&(V=S[M],!V.align||V.align==="left");)this._placeToken(V,r,C,g,x,"left",b),E-=V.width,x+=V.width,M++;for(;B>=0&&(V=S[B],V.align==="right");)this._placeToken(V,r,C,g,D,"right",b),E-=V.width,D-=V.width,B--;for(x+=(o-(x-m)-(_-D)-E)/2;M<=B;)V=S[M],this._placeToken(V,r,C,g,x+V.width/2,"center",b),x+=V.width,M++;g+=C}},t.prototype._placeToken=function(r,n,i,o,a,s,l){var u=n.rich[r.styleName]||{};u.text=r.text;var c=r.verticalAlign,f=o+i/2;c==="top"?f=o+r.height/2:c==="bottom"&&(f=o+i-r.height/2);var h=!r.isLineHolder&&Qy(u);h&&this._renderBackground(u,n,s==="right"?a-r.width:s==="center"?a-r.width/2:a,f-r.height/2,r.width,r.height);var d=!!u.backgroundColor,p=r.textPadding;p&&(a=IM(a,s,p),f-=r.height/2-p[0]-r.innerHeight/2);var v=this._getOrCreateChild(US),m=v.createStyle();v.useStyle(m);var g=this._defaultStyle,_=!1,b=0,w=LM("fill"in u?u.fill:"fill"in n?n.fill:(_=!0,g.fill)),T=xM("stroke"in u?u.stroke:"stroke"in n?n.stroke:!d&&!l&&(!g.autoStroke||_)?(b=EM,g.stroke):null),S=u.textShadowBlur>0||n.textShadowBlur>0;m.text=r.text,m.x=a,m.y=f,S&&(m.shadowBlur=u.textShadowBlur||n.textShadowBlur||0,m.shadowColor=u.textShadowColor||n.textShadowColor||"transparent",m.shadowOffsetX=u.textShadowOffsetX||n.textShadowOffsetX||0,m.shadowOffsetY=u.textShadowOffsetY||n.textShadowOffsetY||0),m.textAlign=s,m.textBaseline="middle",m.font=r.font||Zl,m.opacity=vd(u.opacity,n.opacity,1),AM(m,u),T&&(m.lineWidth=vd(u.lineWidth,n.lineWidth,b),m.lineDash=Zt(u.lineDash,n.lineDash),m.lineDashOffset=n.lineDashOffset||0,m.stroke=T),w&&(m.fill=w);var k=r.contentWidth,C=r.contentHeight;v.setBoundingRect(new le(qh(m.x,k,m.textAlign),vc(m.y,C,m.textBaseline),k,C))},t.prototype._renderBackground=function(r,n,i,o,a,s){var l=r.backgroundColor,u=r.borderWidth,c=r.borderColor,f=l&&l.image,h=l&&!f,d=r.borderRadius,p=this,v,m;if(h||r.lineHeight||u&&c){v=this._getOrCreateChild(Qe),v.useStyle(v.createStyle()),v.style.fill=null;var g=v.shape;g.x=i,g.y=o,g.width=a,g.height=s,g.r=d,v.dirtyShape()}if(h){var _=v.style;_.fill=l||null,_.fillOpacity=Zt(r.fillOpacity,1)}else if(f){m=this._getOrCreateChild(Ea),m.onload=function(){p.dirtyStyle()};var b=m.style;b.image=l.image,b.x=i,b.y=o,b.width=a,b.height=s}if(u&&c){var _=v.style;_.lineWidth=u,_.stroke=c,_.strokeOpacity=Zt(r.strokeOpacity,1),_.lineDash=r.borderDash,_.lineDashOffset=r.borderDashOffset||0,v.strokeContainThreshold=0,v.hasFill()&&v.hasStroke()&&(_.strokeFirst=!0,_.lineWidth*=2)}var w=(v||m).style;w.shadowBlur=r.shadowBlur||0,w.shadowColor=r.shadowColor||"transparent",w.shadowOffsetX=r.shadowOffsetX||0,w.shadowOffsetY=r.shadowOffsetY||0,w.opacity=vd(r.opacity,n.opacity,1)},t.makeFont=function(r){var n="";return PQ(r)&&(n=[r.fontStyle,r.fontWeight,kQ(r.fontSize),r.fontFamily||"sans-serif"].join(" ")),n&&To(n)||r.textFont||r.font},t}(du),SQ={left:!0,right:1,center:1},TQ={top:1,bottom:1,middle:1},CM=["fontStyle","fontWeight","fontSize","fontFamily"];function kQ(e){return typeof e=="string"&&(e.indexOf("px")!==-1||e.indexOf("rem")!==-1||e.indexOf("em")!==-1)?e:isNaN(+e)?Pk+"px":e+"px"}function AM(e,t){for(var r=0;r<CM.length;r++){var n=CM[r],i=t[n];i!=null&&(e[n]=i)}}function PQ(e){return e.fontSize!=null||e.fontFamily||e.fontWeight}function EQ(e){return MM(e),$(e.rich,MM),e}function MM(e){if(e){e.font=N9.makeFont(e);var t=e.align;t==="middle"&&(t="center"),e.align=t==null||SQ[t]?t:"left";var r=e.verticalAlign;r==="center"&&(r="middle"),e.verticalAlign=r==null||TQ[r]?r:"top";var n=e.padding;n&&(e.padding=U7(e.padding))}}function xM(e,t){return e==null||t<=0||e==="transparent"||e==="none"?null:e.image||e.colorStops?"#000":e}function LM(e){return e==null||e==="none"?null:e.image||e.colorStops?"#000":e}function IM(e,t,r){return t==="right"?e-r[1]:t==="center"?e+r[3]/2-r[1]/2:e+r[3]}function OM(e){var t=e.text;return t!=null&&(t+=""),t}function Qy(e){return!!(e.backgroundColor||e.lineHeight||e.borderWidth&&e.borderColor)}const tr=N9;var ae=Re(),CQ=function(e,t,r,n){if(n){var i=ae(n);i.dataIndex=r,i.dataType=t,i.seriesIndex=e,n.type==="group"&&n.traverse(function(o){var a=ae(o);a.seriesIndex=e,a.dataIndex=r,a.dataType=t})}},RM=1,DM={},F9=Re(),Uk=Re(),Wk=0,Op=1,Y1=2,si=["emphasis","blur","select"],NM=["normal","emphasis","blur","select"],AQ=10,MQ=9,Vl="highlight",Wg="downplay",yd="select",Gg="unselect",bd="toggleSelect";function $u(e){return e!=null&&e!=="none"}var FM=new xp(100);function $M(e){if(Mt(e)){var t=FM.get(e);return t||(t=eM(e,-.1),FM.put(e,t)),t}else if(U1(e)){var r=at({},e);return r.colorStops=Lt(e.colorStops,function(n){return{offset:n.offset,color:eM(n.color,-.1)}}),r}return e}function q1(e,t,r){e.onHoverStateChange&&(e.hoverState||0)!==r&&e.onHoverStateChange(t),e.hoverState=r}function $9(e){q1(e,"emphasis",Y1)}function B9(e){e.hoverState===Y1&&q1(e,"normal",Wk)}function Gk(e){q1(e,"blur",Op)}function z9(e){e.hoverState===Op&&q1(e,"normal",Wk)}function xQ(e){e.selected=!0}function LQ(e){e.selected=!1}function BM(e,t,r){t(e,r)}function Ca(e,t,r){BM(e,t,r),e.isGroup&&e.traverse(function(n){BM(n,t,r)})}function WS(e,t){switch(t){case"emphasis":e.hoverState=Y1;break;case"normal":e.hoverState=Wk;break;case"blur":e.hoverState=Op;break;case"select":e.selected=!0}}function IQ(e,t,r,n){for(var i=e.style,o={},a=0;a<t.length;a++){var s=t[a],l=i[s];o[s]=l==null?n&&n[s]:l}for(var a=0;a<e.animators.length;a++){var u=e.animators[a];u.__fromStateTransition&&u.__fromStateTransition.indexOf(r)<0&&u.targetName==="style"&&u.saveTo(o,t)}return o}function OQ(e,t,r,n){var i=r&&fe(r,"select")>=0,o=!1;if(e instanceof de){var a=F9(e),s=i&&a.selectFill||a.normalFill,l=i&&a.selectStroke||a.normalStroke;if($u(s)||$u(l)){n=n||{};var u=n.style||{};u.fill==="inherit"?(o=!0,n=at({},n),u=at({},u),u.fill=s):!$u(u.fill)&&$u(s)?(o=!0,n=at({},n),u=at({},u),u.fill=$M(s)):!$u(u.stroke)&&$u(l)&&(o||(n=at({},n),u=at({},u)),u.stroke=$M(l)),n.style=u}}if(n&&n.z2==null){o||(n=at({},n));var c=e.z2EmphasisLift;n.z2=e.z2+(c!=null?c:AQ)}return n}function RQ(e,t,r){if(r&&r.z2==null){r=at({},r);var n=e.z2SelectLift;r.z2=e.z2+(n!=null?n:MQ)}return r}function DQ(e,t,r){var n=fe(e.currentStates,t)>=0,i=e.style.opacity,o=n?null:IQ(e,["opacity"],t,{opacity:1});r=r||{};var a=r.style||{};return a.opacity==null&&(r=at({},r),a=at({opacity:n?i:o.opacity*.1},a),r.style=a),r}function t2(e,t){var r=this.states[e];if(this.style){if(e==="emphasis")return OQ(this,e,t,r);if(e==="blur")return DQ(this,e,r);if(e==="select")return RQ(this,e,r)}return r}function jk(e){e.stateProxy=t2;var t=e.getTextContent(),r=e.getTextGuideLine();t&&(t.stateProxy=t2),r&&(r.stateProxy=t2)}function zM(e,t){!G9(e,t)&&!e.__highByOuter&&Ca(e,$9)}function VM(e,t){!G9(e,t)&&!e.__highByOuter&&Ca(e,B9)}function Zd(e,t){e.__highByOuter|=1<<(t||0),Ca(e,$9)}function Kd(e,t){!(e.__highByOuter&=~(1<<(t||0)))&&Ca(e,B9)}function V9(e){Ca(e,Gk)}function Hk(e){Ca(e,z9)}function U9(e){Ca(e,xQ)}function W9(e){Ca(e,LQ)}function G9(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function j9(e){var t=e.getModel(),r=[],n=[];t.eachComponent(function(i,o){var a=Uk(o),s=i==="series",l=s?e.getViewOfSeriesModel(o):e.getViewOfComponentModel(o);!s&&n.push(l),a.isBlured&&(l.group.traverse(function(u){z9(u)}),s&&r.push(o)),a.isBlured=!1}),$(n,function(i){i&&i.toggleBlurSeries&&i.toggleBlurSeries(r,!1,t)})}function GS(e,t,r,n){var i=n.getModel();r=r||"coordinateSystem";function o(u,c){for(var f=0;f<c.length;f++){var h=u.getItemGraphicEl(c[f]);h&&Hk(h)}}if(e!=null&&!(!t||t==="none")){var a=i.getSeriesByIndex(e),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];i.eachSeries(function(u){var c=a===u,f=u.coordinateSystem;f&&f.master&&(f=f.master);var h=f&&s?f===s:c;if(!(r==="series"&&!c||r==="coordinateSystem"&&!h||t==="series"&&c)){var d=n.getViewOfSeriesModel(u);if(d.group.traverse(function(m){Gk(m)}),Xr(t))o(u.getData(),t);else if(Rt(t))for(var p=ve(t),v=0;v<p.length;v++)o(u.getData(p[v]),t[p[v]]);l.push(u),Uk(u).isBlured=!0}}),i.eachComponent(function(u,c){if(u!=="series"){var f=n.getViewOfComponentModel(c);f&&f.toggleBlurSeries&&f.toggleBlurSeries(l,!0,i)}})}}function jS(e,t,r){if(!(e==null||t==null)){var n=r.getModel().getComponent(e,t);if(!!n){Uk(n).isBlured=!0;var i=r.getViewOfComponentModel(n);!i||!i.focusBlurEnabled||i.group.traverse(function(o){Gk(o)})}}}function NQ(e,t,r){var n=e.seriesIndex,i=e.getData(t.dataType);if(!!i){var o=Jl(i,t);o=(ct(o)?o[0]:o)||0;var a=i.getItemGraphicEl(o);if(!a)for(var s=i.count(),l=0;!a&&l<s;)a=i.getItemGraphicEl(l++);if(a){var u=ae(a);GS(n,u.focus,u.blurScope,r)}else{var c=e.get(["emphasis","focus"]),f=e.get(["emphasis","blurScope"]);c!=null&&GS(n,c,f,r)}}}function Xk(e,t,r,n){var i={focusSelf:!1,dispatchers:null};if(e==null||e==="series"||t==null||r==null)return i;var o=n.getModel().getComponent(e,t);if(!o)return i;var a=n.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return i;for(var s=a.findHighDownDispatchers(r),l,u=0;u<s.length;u++)if(ae(s[u]).focus==="self"){l=!0;break}return{focusSelf:l,dispatchers:s}}function FQ(e,t,r){var n=ae(e),i=Xk(n.componentMainType,n.componentIndex,n.componentHighDownName,r),o=i.dispatchers,a=i.focusSelf;o?(a&&jS(n.componentMainType,n.componentIndex,r),$(o,function(s){return zM(s,t)})):(GS(n.seriesIndex,n.focus,n.blurScope,r),n.focus==="self"&&jS(n.componentMainType,n.componentIndex,r),zM(e,t))}function $Q(e,t,r){j9(r);var n=ae(e),i=Xk(n.componentMainType,n.componentIndex,n.componentHighDownName,r).dispatchers;i?$(i,function(o){return VM(o,t)}):VM(e,t)}function BQ(e,t,r){if(!!YS(t)){var n=t.dataType,i=e.getData(n),o=Jl(i,t);ct(o)||(o=[o]),e[t.type===bd?"toggleSelect":t.type===yd?"select":"unselect"](o,n)}}function UM(e){var t=e.getAllData();$(t,function(r){var n=r.data,i=r.type;n.eachItemGraphicEl(function(o,a){e.isSelected(a,i)?U9(o):W9(o)})})}function zQ(e){var t=[];return e.eachSeries(function(r){var n=r.getAllData();$(n,function(i){i.data;var o=i.type,a=r.getSelectedDataIndices();if(a.length>0){var s={dataIndex:a,seriesIndex:r.seriesIndex};o!=null&&(s.dataType=o),t.push(s)}})}),t}function HS(e,t,r){Yk(e,!0),Ca(e,jk),UQ(e,t,r)}function VQ(e){Yk(e,!1)}function tu(e,t,r,n){n?VQ(e):HS(e,t,r)}function UQ(e,t,r){var n=ae(e);t!=null?(n.focus=t,n.blurScope=r):n.focus&&(n.focus=null)}var WM=["emphasis","blur","select"],WQ={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Jd(e,t,r,n){r=r||"itemStyle";for(var i=0;i<WM.length;i++){var o=WM[i],a=t.getModel([o,r]),s=e.ensureState(o);s.style=n?n(a):a[WQ[r]]()}}function Yk(e,t){var r=t===!1,n=e;e.highDownSilentOnTouch&&(n.__highDownSilentOnTouch=e.highDownSilentOnTouch),(!r||n.__highDownDispatcher)&&(n.__highByOuter=n.__highByOuter||0,n.__highDownDispatcher=!r)}function XS(e){return!!(e&&e.__highDownDispatcher)}function GQ(e){var t=DM[e];return t==null&&RM<=32&&(t=DM[e]=RM++),t}function YS(e){var t=e.type;return t===yd||t===Gg||t===bd}function GM(e){var t=e.type;return t===Vl||t===Wg}function jQ(e){var t=F9(e);t.normalFill=e.style.fill,t.normalStroke=e.style.stroke;var r=e.states.select||{};t.selectFill=r.style&&r.style.fill||null,t.selectStroke=r.style&&r.style.stroke||null}var Bu=Ql.CMD,HQ=[[],[],[]],jM=Math.sqrt,XQ=Math.atan2;function YQ(e,t){if(!!t){var r=e.data,n=e.len(),i,o,a,s,l,u,c=Bu.M,f=Bu.C,h=Bu.L,d=Bu.R,p=Bu.A,v=Bu.Q;for(a=0,s=0;a<n;){switch(i=r[a++],s=a,o=0,i){case c:o=1;break;case h:o=1;break;case f:o=3;break;case v:o=2;break;case p:var m=t[4],g=t[5],_=jM(t[0]*t[0]+t[1]*t[1]),b=jM(t[2]*t[2]+t[3]*t[3]),w=XQ(-t[1]/b,t[0]/_);r[a]*=_,r[a++]+=m,r[a]*=b,r[a++]+=g,r[a++]*=_,r[a++]*=b,r[a++]+=w,r[a++]+=w,a+=2,s=a;break;case d:u[0]=r[a++],u[1]=r[a++],nn(u,u,t),r[s++]=u[0],r[s++]=u[1],u[0]+=r[a++],u[1]+=r[a++],nn(u,u,t),r[s++]=u[0],r[s++]=u[1]}for(l=0;l<o;l++){var T=HQ[l];T[0]=r[a++],T[1]=r[a++],nn(T,T,t),r[s++]=T[0],r[s++]=T[1]}}e.increaseVersion()}}var e2=Math.sqrt,D0=Math.sin,N0=Math.cos,nh=Math.PI;function HM(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function qS(e,t){return(e[0]*t[0]+e[1]*t[1])/(HM(e)*HM(t))}function XM(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(qS(e,t))}function YM(e,t,r,n,i,o,a,s,l,u,c){var f=l*(nh/180),h=N0(f)*(e-r)/2+D0(f)*(t-n)/2,d=-1*D0(f)*(e-r)/2+N0(f)*(t-n)/2,p=h*h/(a*a)+d*d/(s*s);p>1&&(a*=e2(p),s*=e2(p));var v=(i===o?-1:1)*e2((a*a*(s*s)-a*a*(d*d)-s*s*(h*h))/(a*a*(d*d)+s*s*(h*h)))||0,m=v*a*d/s,g=v*-s*h/a,_=(e+r)/2+N0(f)*m-D0(f)*g,b=(t+n)/2+D0(f)*m+N0(f)*g,w=XM([1,0],[(h-m)/a,(d-g)/s]),T=[(h-m)/a,(d-g)/s],S=[(-1*h-m)/a,(-1*d-g)/s],k=XM(T,S);if(qS(T,S)<=-1&&(k=nh),qS(T,S)>=1&&(k=0),k<0){var C=Math.round(k/nh*1e6)/1e6;k=nh*2+C%2*nh}c.addData(u,_,b,a,s,w,k,f,o)}var qQ=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/ig,ZQ=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function KQ(e){var t=new Ql;if(!e)return t;var r=0,n=0,i=r,o=n,a,s=Ql.CMD,l=e.match(qQ);if(!l)return t;for(var u=0;u<l.length;u++){for(var c=l[u],f=c.charAt(0),h=void 0,d=c.match(ZQ)||[],p=d.length,v=0;v<p;v++)d[v]=parseFloat(d[v]);for(var m=0;m<p;){var g=void 0,_=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,C=r,E=n,M=void 0,x=void 0;switch(f){case"l":r+=d[m++],n+=d[m++],h=s.L,t.addData(h,r,n);break;case"L":r=d[m++],n=d[m++],h=s.L,t.addData(h,r,n);break;case"m":r+=d[m++],n+=d[m++],h=s.M,t.addData(h,r,n),i=r,o=n,f="l";break;case"M":r=d[m++],n=d[m++],h=s.M,t.addData(h,r,n),i=r,o=n,f="L";break;case"h":r+=d[m++],h=s.L,t.addData(h,r,n);break;case"H":r=d[m++],h=s.L,t.addData(h,r,n);break;case"v":n+=d[m++],h=s.L,t.addData(h,r,n);break;case"V":n=d[m++],h=s.L,t.addData(h,r,n);break;case"C":h=s.C,t.addData(h,d[m++],d[m++],d[m++],d[m++],d[m++],d[m++]),r=d[m-2],n=d[m-1];break;case"c":h=s.C,t.addData(h,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n,d[m++]+r,d[m++]+n),r+=d[m-2],n+=d[m-1];break;case"S":g=r,_=n,M=t.len(),x=t.data,a===s.C&&(g+=r-x[M-4],_+=n-x[M-3]),h=s.C,C=d[m++],E=d[m++],r=d[m++],n=d[m++],t.addData(h,g,_,C,E,r,n);break;case"s":g=r,_=n,M=t.len(),x=t.data,a===s.C&&(g+=r-x[M-4],_+=n-x[M-3]),h=s.C,C=r+d[m++],E=n+d[m++],r+=d[m++],n+=d[m++],t.addData(h,g,_,C,E,r,n);break;case"Q":C=d[m++],E=d[m++],r=d[m++],n=d[m++],h=s.Q,t.addData(h,C,E,r,n);break;case"q":C=d[m++]+r,E=d[m++]+n,r+=d[m++],n+=d[m++],h=s.Q,t.addData(h,C,E,r,n);break;case"T":g=r,_=n,M=t.len(),x=t.data,a===s.Q&&(g+=r-x[M-4],_+=n-x[M-3]),r=d[m++],n=d[m++],h=s.Q,t.addData(h,g,_,r,n);break;case"t":g=r,_=n,M=t.len(),x=t.data,a===s.Q&&(g+=r-x[M-4],_+=n-x[M-3]),r+=d[m++],n+=d[m++],h=s.Q,t.addData(h,g,_,r,n);break;case"A":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],C=r,E=n,r=d[m++],n=d[m++],h=s.A,YM(C,E,r,n,S,k,b,w,T,h,t);break;case"a":b=d[m++],w=d[m++],T=d[m++],S=d[m++],k=d[m++],C=r,E=n,r+=d[m++],n+=d[m++],h=s.A,YM(C,E,r,n,S,k,b,w,T,h,t);break}}(f==="z"||f==="Z")&&(h=s.Z,t.addData(h),r=i,n=o),a=h}return t.toStatic(),t}var H9=function(e){Ce(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.applyTransform=function(r){},t}(de);function X9(e){return e.setData!=null}function Y9(e,t){var r=KQ(e),n=at({},t);return n.buildPath=function(i){if(X9(i)){i.setData(r.data);var o=i.getContext();o&&i.rebuildPath(o,1)}else{var o=i;r.rebuildPath(o,1)}},n.applyTransform=function(i){YQ(r,i),this.dirtyShape()},n}function JQ(e,t){return new H9(Y9(e,t))}function QQ(e,t){var r=Y9(e,t),n=function(i){Ce(o,i);function o(a){var s=i.call(this,a)||this;return s.applyTransform=r.applyTransform,s.buildPath=r.buildPath,s}return o}(H9);return n}function ttt(e,t){for(var r=[],n=e.length,i=0;i<n;i++){var o=e[i];r.push(o.getUpdatedPathProxy(!0))}var a=new de(t);return a.createPathProxy(),a.buildPath=function(s){if(X9(s)){s.appendPath(r);var l=s.getContext();l&&s.rebuildPath(l,1)}},a}var ett=function(){function e(){this.cx=0,this.cy=0,this.r=0}return e}(),q9=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new ett},t.prototype.buildPath=function(r,n){r.moveTo(n.cx+n.r,n.cy),r.arc(n.cx,n.cy,n.r,0,Math.PI*2)},t}(de);q9.prototype.type="circle";const qk=q9;var rtt=function(){function e(){this.cx=0,this.cy=0,this.rx=0,this.ry=0}return e}(),Z9=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new rtt},t.prototype.buildPath=function(r,n){var i=.5522848,o=n.cx,a=n.cy,s=n.rx,l=n.ry,u=s*i,c=l*i;r.moveTo(o-s,a),r.bezierCurveTo(o-s,a-c,o-u,a-l,o,a-l),r.bezierCurveTo(o+u,a-l,o+s,a-c,o+s,a),r.bezierCurveTo(o+s,a+c,o+u,a+l,o,a+l),r.bezierCurveTo(o-u,a+l,o-s,a+c,o-s,a),r.closePath()},t}(de);Z9.prototype.type="ellipse";const K9=Z9;var J9=Math.PI,r2=J9*2,sl=Math.sin,zu=Math.cos,ntt=Math.acos,Dr=Math.atan2,qM=Math.abs,wd=Math.sqrt,Zh=Math.max,no=Math.min,_i=1e-4;function itt(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=f*l-c*u;if(!(h*h<_i))return h=(c*(t-o)-f*(e-i))/h,[e+h*l,t+h*u]}function F0(e,t,r,n,i,o,a){var s=e-r,l=t-n,u=(a?o:-o)/wd(s*s+l*l),c=u*l,f=-u*s,h=e+c,d=t+f,p=r+c,v=n+f,m=(h+p)/2,g=(d+v)/2,_=p-h,b=v-d,w=_*_+b*b,T=i-o,S=h*v-p*d,k=(b<0?-1:1)*wd(Zh(0,T*T*w-S*S)),C=(S*b-_*k)/w,E=(-S*_-b*k)/w,M=(S*b+_*k)/w,x=(-S*_+b*k)/w,D=C-m,B=E-g,V=M-m,F=x-g;return D*D+B*B>V*V+F*F&&(C=M,E=x),{cx:C,cy:E,x0:-c,y0:-f,x1:C*(i/T-1),y1:E*(i/T-1)}}function ott(e){var t;if(ct(e)){var r=e.length;if(!r)return e;r===1?t=[e[0],e[0],0,0]:r===2?t=[e[0],e[0],e[1],e[1]]:r===3?t=e.concat(e[2]):t=e}else t=[e,e,e,e];return t}function att(e,t){var r,n=Zh(t.r,0),i=Zh(t.r0||0,0),o=n>0,a=i>0;if(!(!o&&!a)){if(o||(n=i,i=0),i>n){var s=n;n=i,i=s}var l=t.startAngle,u=t.endAngle;if(!(isNaN(l)||isNaN(u))){var c=t.cx,f=t.cy,h=!!t.clockwise,d=qM(u-l),p=d>r2&&d%r2;if(p>_i&&(d=p),!(n>_i))e.moveTo(c,f);else if(d>r2-_i)e.moveTo(c+n*zu(l),f+n*sl(l)),e.arc(c,f,n,l,u,!h),i>_i&&(e.moveTo(c+i*zu(u),f+i*sl(u)),e.arc(c,f,i,u,l,h));else{var v=void 0,m=void 0,g=void 0,_=void 0,b=void 0,w=void 0,T=void 0,S=void 0,k=void 0,C=void 0,E=void 0,M=void 0,x=void 0,D=void 0,B=void 0,V=void 0,F=n*zu(l),G=n*sl(l),Z=i*zu(u),q=i*sl(u),et=d>_i;if(et){var At=t.cornerRadius;At&&(r=ott(At),v=r[0],m=r[1],g=r[2],_=r[3]);var Dt=qM(n-i)/2;if(b=no(Dt,g),w=no(Dt,_),T=no(Dt,v),S=no(Dt,m),E=k=Zh(b,w),M=C=Zh(T,S),(k>_i||C>_i)&&(x=n*zu(u),D=n*sl(u),B=i*zu(l),V=i*sl(l),d<J9)){var Tt=itt(F,G,B,V,x,D,Z,q);if(Tt){var kt=F-Tt[0],Xt=G-Tt[1],Y=x-Tt[0],it=D-Tt[1],K=1/sl(ntt((kt*Y+Xt*it)/(wd(kt*kt+Xt*Xt)*wd(Y*Y+it*it)))/2),vt=wd(Tt[0]*Tt[0]+Tt[1]*Tt[1]);E=no(k,(n-vt)/(K+1)),M=no(C,(i-vt)/(K-1))}}}if(!et)e.moveTo(c+F,f+G);else if(E>_i){var Pt=no(g,E),xt=no(_,E),lt=F0(B,V,F,G,n,Pt,h),ft=F0(x,D,Z,q,n,xt,h);e.moveTo(c+lt.cx+lt.x0,f+lt.cy+lt.y0),E<k&&Pt===xt?e.arc(c+lt.cx,f+lt.cy,E,Dr(lt.y0,lt.x0),Dr(ft.y0,ft.x0),!h):(Pt>0&&e.arc(c+lt.cx,f+lt.cy,Pt,Dr(lt.y0,lt.x0),Dr(lt.y1,lt.x1),!h),e.arc(c,f,n,Dr(lt.cy+lt.y1,lt.cx+lt.x1),Dr(ft.cy+ft.y1,ft.cx+ft.x1),!h),xt>0&&e.arc(c+ft.cx,f+ft.cy,xt,Dr(ft.y1,ft.x1),Dr(ft.y0,ft.x0),!h))}else e.moveTo(c+F,f+G),e.arc(c,f,n,l,u,!h);if(!(i>_i)||!et)e.lineTo(c+Z,f+q);else if(M>_i){var Pt=no(v,M),xt=no(m,M),lt=F0(Z,q,x,D,i,-xt,h),ft=F0(F,G,B,V,i,-Pt,h);e.lineTo(c+lt.cx+lt.x0,f+lt.cy+lt.y0),M<C&&Pt===xt?e.arc(c+lt.cx,f+lt.cy,M,Dr(lt.y0,lt.x0),Dr(ft.y0,ft.x0),!h):(xt>0&&e.arc(c+lt.cx,f+lt.cy,xt,Dr(lt.y0,lt.x0),Dr(lt.y1,lt.x1),!h),e.arc(c,f,i,Dr(lt.cy+lt.y1,lt.cx+lt.x1),Dr(ft.cy+ft.y1,ft.cx+ft.x1),h),Pt>0&&e.arc(c+ft.cx,f+ft.cy,Pt,Dr(ft.y1,ft.x1),Dr(ft.y0,ft.x0),!h))}else e.lineTo(c+Z,f+q),e.arc(c,f,i,u,l,h)}e.closePath()}}}var stt=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0,this.cornerRadius=0}return e}(),Q9=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new stt},t.prototype.buildPath=function(r,n){att(r,n)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(de);Q9.prototype.type="sector";const Rp=Q9;var ltt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.r0=0}return e}(),tN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new ltt},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.PI*2;r.moveTo(i+n.r,o),r.arc(i,o,n.r,0,a,!1),r.moveTo(i+n.r0,o),r.arc(i,o,n.r0,0,a,!0)},t}(de);tN.prototype.type="ring";const eN=tN;function utt(e,t,r,n){var i=[],o=[],a=[],s=[],l,u,c,f;if(n){c=[1/0,1/0],f=[-1/0,-1/0];for(var h=0,d=e.length;h<d;h++)_c(c,c,e[h]),yc(f,f,e[h]);_c(c,c,n[0]),yc(f,f,n[1])}for(var h=0,d=e.length;h<d;h++){var p=e[h];if(r)l=e[h?h-1:d-1],u=e[(h+1)%d];else if(h===0||h===d-1){i.push(IZ(e[h]));continue}else l=e[h-1],u=e[h+1];H7(o,u,l),_y(o,o,t);var v=wS(p,l),m=wS(p,u),g=v+m;g!==0&&(v/=g,m/=g),_y(a,o,-v),_y(s,o,m);var _=zA([],p,a),b=zA([],p,s);n&&(yc(_,_,c),_c(_,_,f),yc(b,b,c),_c(b,b,f)),i.push(_),i.push(b)}return r&&i.push(i.shift()),i}function rN(e,t,r){var n=t.smooth,i=t.points;if(i&&i.length>=2){if(n){var o=utt(i,n,r,t.smoothConstraint);e.moveTo(i[0][0],i[0][1]);for(var a=i.length,s=0;s<(r?a:a-1);s++){var l=o[s*2],u=o[s*2+1],c=i[(s+1)%a];e.bezierCurveTo(l[0],l[1],u[0],u[1],c[0],c[1])}}else{e.moveTo(i[0][0],i[0][1]);for(var s=1,f=i.length;s<f;s++)e.lineTo(i[s][0],i[s][1])}r&&e.closePath()}}var ctt=function(){function e(){this.points=null,this.smooth=0,this.smoothConstraint=null}return e}(),nN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultShape=function(){return new ctt},t.prototype.buildPath=function(r,n){rN(r,n,!0)},t}(de);nN.prototype.type="polygon";const Qd=nN;var ftt=function(){function e(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null}return e}(),iN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ftt},t.prototype.buildPath=function(r,n){rN(r,n,!1)},t}(de);iN.prototype.type="polyline";const oN=iN;var htt={},dtt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}(),aN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new dtt},t.prototype.buildPath=function(r,n){var i,o,a,s;if(this.subPixelOptimize){var l=O9(htt,n,this.style);i=l.x1,o=l.y1,a=l.x2,s=l.y2}else i=n.x1,o=n.y1,a=n.x2,s=n.y2;var u=n.percent;u!==0&&(r.moveTo(i,o),u<1&&(a=i*(1-u)+a*u,s=o*(1-u)+s*u),r.lineTo(a,s))},t.prototype.pointAt=function(r){var n=this.shape;return[n.x1*(1-r)+n.x2*r,n.y1*(1-r)+n.y2*r]},t}(de);aN.prototype.type="line";const xs=aN;var cn=[],ptt=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1}return e}();function ZM(e,t,r){var n=e.cpx2,i=e.cpy2;return n!=null||i!=null?[(r?JA:cr)(e.x1,e.cpx1,e.cpx2,e.x2,t),(r?JA:cr)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(r?QA:Br)(e.x1,e.cpx1,e.x2,t),(r?QA:Br)(e.y1,e.cpy1,e.y2,t)]}var sN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new ptt},t.prototype.buildPath=function(r,n){var i=n.x1,o=n.y1,a=n.x2,s=n.y2,l=n.cpx1,u=n.cpy1,c=n.cpx2,f=n.cpy2,h=n.percent;h!==0&&(r.moveTo(i,o),c==null||f==null?(h<1&&(Mm(i,l,a,h,cn),l=cn[1],a=cn[2],Mm(o,u,s,h,cn),u=cn[1],s=cn[2]),r.quadraticCurveTo(l,u,a,s)):(h<1&&(Am(i,l,c,a,h,cn),l=cn[1],c=cn[2],a=cn[3],Am(o,u,f,s,h,cn),u=cn[1],f=cn[2],s=cn[3]),r.bezierCurveTo(l,u,c,f,a,s)))},t.prototype.pointAt=function(r){return ZM(this.shape,r,!1)},t.prototype.tangentAt=function(r){var n=ZM(this.shape,r,!0);return xk(n,n)},t}(de);sN.prototype.type="bezier-curve";const Z1=sN;var vtt=function(){function e(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),lN=function(e){Ce(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new vtt},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r,0),s=n.startAngle,l=n.endAngle,u=n.clockwise,c=Math.cos(s),f=Math.sin(s);r.moveTo(c*a+i,f*a+o),r.arc(i,o,a,s,l,!u)},t}(de);lN.prototype.type="arc";const Zk=lN;var gtt=function(e){Ce(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="compound",r}return t.prototype._updatePathDirty=function(){for(var r=this.shape.paths,n=this.shapeChanged(),i=0;i<r.length;i++)n=n||r[i].shapeChanged();n&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var r=this.shape.paths||[],n=this.getGlobalScale(),i=0;i<r.length;i++)r[i].path||r[i].createPathProxy(),r[i].path.setScale(n[0],n[1],r[i].segmentIgnoreThreshold)},t.prototype.buildPath=function(r,n){for(var i=n.paths||[],o=0;o<i.length;o++)i[o].buildPath(r,i[o].shape,!0)},t.prototype.afterBrush=function(){for(var r=this.shape.paths||[],n=0;n<r.length;n++)r[n].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),de.prototype.getBoundingRect.call(this)},t}(de);const mtt=gtt;var _tt=function(){function e(t){this.colorStops=t||[]}return e.prototype.addColorStop=function(t,r){this.colorStops.push({offset:t,color:r})},e}();const uN=_tt;var ytt=function(e){Ce(t,e);function t(r,n,i,o,a,s){var l=e.call(this,a)||this;return l.x=r==null?0:r,l.y=n==null?0:n,l.x2=i==null?1:i,l.y2=o==null?0:o,l.type="linear",l.global=s||!1,l}return t}(uN);const Kk=ytt;var btt=function(e){Ce(t,e);function t(r,n,i,o,a){var s=e.call(this,o)||this;return s.x=r==null?.5:r,s.y=n==null?.5:n,s.r=i==null?.5:i,s.type="radial",s.global=a||!1,s}return t}(uN);const wtt=btt;var ll=[0,0],ul=[0,0],$0=new Le,B0=new Le,Stt=function(){function e(t,r){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Le;for(var n=0;n<2;n++)this._axes[n]=new Le;t&&this.fromBoundingRect(t,r)}return e.prototype.fromBoundingRect=function(t,r){var n=this._corners,i=this._axes,o=t.x,a=t.y,s=o+t.width,l=a+t.height;if(n[0].set(o,a),n[1].set(s,a),n[2].set(s,l),n[3].set(o,l),r)for(var u=0;u<4;u++)n[u].transform(r);Le.sub(i[0],n[1],n[0]),Le.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize();for(var u=0;u<2;u++)this._origin[u]=i[u].dot(n[0])},e.prototype.intersect=function(t,r){var n=!0,i=!r;return $0.set(1/0,1/0),B0.set(0,0),!this._intersectCheckOneSide(this,t,$0,B0,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,$0,B0,i,-1)&&(n=!1,i)||i||Le.copy(r,n?$0:B0),n},e.prototype._intersectCheckOneSide=function(t,r,n,i,o,a){for(var s=!0,l=0;l<2;l++){var u=this._axes[l];if(this._getProjMinMaxOnAxis(l,t._corners,ll),this._getProjMinMaxOnAxis(l,r._corners,ul),ll[1]<ul[0]||ll[0]>ul[1]){if(s=!1,o)return s;var c=Math.abs(ul[0]-ll[1]),f=Math.abs(ll[0]-ul[1]);Math.min(c,f)>i.len()&&(c<f?Le.scale(i,u,-c*a):Le.scale(i,u,f*a))}else if(n){var c=Math.abs(ul[0]-ll[1]),f=Math.abs(ll[0]-ul[1]);Math.min(c,f)<n.len()&&(c<f?Le.scale(n,u,c*a):Le.scale(n,u,-f*a))}}return s},e.prototype._getProjMinMaxOnAxis=function(t,r,n){for(var i=this._axes[t],o=this._origin,a=r[0].dot(i)+o[t],s=a,l=a,u=1;u<r.length;u++){var c=r[u].dot(i)+o[t];s=Math.min(c,s),l=Math.max(c,l)}n[0]=s,n[1]=l},e}();const Dm=Stt;var Ttt=[],ktt=function(e){Ce(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.notClear=!0,r.incremental=!0,r._displayables=[],r._temporaryDisplayables=[],r._cursor=0,r}return t.prototype.traverse=function(r,n){r.call(n,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(r,n){n?this._temporaryDisplayables.push(r):this._displayables.push(r),this.markRedraw()},t.prototype.addDisplayables=function(r,n){n=n||!1;for(var i=0;i<r.length;i++)this.addDisplayable(r[i],n)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(r){for(var n=this._cursor;n<this._displayables.length;n++)r&&r(this._displayables[n]);for(var n=0;n<this._temporaryDisplayables.length;n++)r&&r(this._temporaryDisplayables[n])},t.prototype.update=function(){this.updateTransform();for(var r=this._cursor;r<this._displayables.length;r++){var n=this._displayables[r];n.parent=this,n.update(),n.parent=null}for(var r=0;r<this._temporaryDisplayables.length;r++){var n=this._temporaryDisplayables[r];n.parent=this,n.update(),n.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var r=new le(1/0,1/0,-1/0,-1/0),n=0;n<this._displayables.length;n++){var i=this._displayables[n],o=i.getBoundingRect().clone();i.needLocalTransform()&&o.applyTransform(i.getLocalTransform(Ttt)),r.union(o)}this._rect=r}return this._rect},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(o.contain(i[0],i[1]))for(var a=0;a<this._displayables.length;a++){var s=this._displayables[a];if(s.contain(r,n))return!0}return!1},t}(du);const Ptt=ktt;var Ett=Re();function Jk(e,t,r,n,i){var o;if(t&&t.ecModel){var a=t.ecModel.getUpdatePayload();o=a&&a.animation}var s=t&&t.isAnimationEnabled(),l=e==="update";if(s){var u=void 0,c=void 0,f=void 0;n?(u=Zt(n.duration,200),c=Zt(n.easing,"cubicOut"),f=0):(u=t.getShallow(l?"animationDurationUpdate":"animationDuration"),c=t.getShallow(l?"animationEasingUpdate":"animationEasing"),f=t.getShallow(l?"animationDelayUpdate":"animationDelay")),o&&(o.duration!=null&&(u=o.duration),o.easing!=null&&(c=o.easing),o.delay!=null&&(f=o.delay)),Ut(f)&&(f=f(r,i)),Ut(u)&&(u=u(r));var h={duration:u||0,delay:f,easing:c};return h}else return null}function Qk(e,t,r,n,i,o,a){var s=!1,l;Ut(i)?(a=o,o=i,i=null):Rt(i)&&(o=i.cb,a=i.during,s=i.isFrom,l=i.removeOpt,i=i.dataIndex);var u=e==="leave";u||t.stopAnimation("leave");var c=Jk(e,n,i,u?l||{}:null,n&&n.getAnimationDelayParams?n.getAnimationDelayParams(t,i):null);if(c&&c.duration>0){var f=c.duration,h=c.delay,d=c.easing,p={duration:f,delay:h||0,easing:d,done:o,force:!!o||!!a,setToFinal:!u,scope:e,during:a};s?t.animateFrom(r,p):t.animateTo(r,p)}else t.stopAnimation(),!s&&t.attr(r),a&&a(1),o&&o()}function _r(e,t,r,n,i,o){Qk("update",e,t,r,n,i,o)}function Io(e,t,r,n,i,o){Qk("enter",e,t,r,n,i,o)}function Sd(e){if(!e.__zr)return!0;for(var t=0;t<e.animators.length;t++){var r=e.animators[t];if(r.scope==="leave")return!0}return!1}function eu(e,t,r,n,i,o){Sd(e)||Qk("leave",e,t,r,n,i,o)}function KM(e,t,r,n){e.removeTextContent(),e.removeTextGuideLine(),eu(e,{style:{opacity:0}},t,r,n)}function ZS(e,t,r){function n(){e.parent&&e.parent.remove(e)}e.isGroup?e.traverse(function(i){i.isGroup||KM(i,t,r,n)}):KM(e,t,r,n)}function cN(e){Ett(e).oldStyle=e.style}var Nm=Math.max,Fm=Math.min,KS={};function Ctt(e){return de.extend(e)}var Att=QQ;function Mtt(e,t){return Att(e,t)}function ji(e,t){KS[e]=t}function fN(e){if(KS.hasOwnProperty(e))return KS[e]}function K1(e,t,r,n){var i=JQ(e,t);return r&&(n==="center"&&(r=dN(r,i.getBoundingRect())),pN(i,r)),i}function hN(e,t,r){var n=new Ea({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(i){if(r==="center"){var o={width:i.width,height:i.height};n.setStyle(dN(t,o))}}});return n}function dN(e,t){var r=t.width/t.height,n=e.height*r,i;n<=e.width?i=e.height:(n=e.width,i=n/r);var o=e.x+e.width/2,a=e.y+e.height/2;return{x:o-n/2,y:a-i/2,width:n,height:i}}var xtt=ttt;function pN(e,t){if(!!e.applyTransform){var r=e.getBoundingRect(),n=r.calculateTransform(t);e.applyTransform(n)}}function tp(e,t){return O9(e,e,{lineWidth:t}),e}function Ltt(e){return R9(e.shape,e.shape,e.style),e}var Itt=Ll;function jg(e,t){for(var r=Ik([]);e&&e!==t;)Ic(r,e.getLocalTransform(),r),e=e.parent;return r}function Rc(e,t,r){return t&&!Xr(t)&&(t=xl.getLocalTransform(t)),r&&(t=G1([],t)),nn([],e,t)}function vN(e,t,r){var n=t[4]===0||t[5]===0||t[0]===0?1:Math.abs(2*t[4]/t[0]),i=t[4]===0||t[5]===0||t[2]===0?1:Math.abs(2*t[4]/t[2]),o=[e==="left"?-n:e==="right"?n:0,e==="top"?-i:e==="bottom"?i:0];return o=Rc(o,t,r),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function JM(e){return!e.isGroup}function Ott(e){return e.shape!=null}function gN(e,t,r){if(!e||!t)return;function n(a){var s={};return a.traverse(function(l){JM(l)&&l.anid&&(s[l.anid]=l)}),s}function i(a){var s={x:a.x,y:a.y,rotation:a.rotation};return Ott(a)&&(s.shape=at({},a.shape)),s}var o=n(e);t.traverse(function(a){if(JM(a)&&a.anid){var s=o[a.anid];if(s){var l=i(a);a.attr(i(s)),_r(a,l,r,ae(a).dataIndex)}}})}function Rtt(e,t){return Lt(e,function(r){var n=r[0];n=Nm(n,t.x),n=Fm(n,t.x+t.width);var i=r[1];return i=Nm(i,t.y),i=Fm(i,t.y+t.height),[n,i]})}function Dtt(e,t){var r=Nm(e.x,t.x),n=Fm(e.x+e.width,t.x+t.width),i=Nm(e.y,t.y),o=Fm(e.y+e.height,t.y+t.height);if(n>=r&&o>=i)return{x:r,y:i,width:n-r,height:o-i}}function tP(e,t,r){var n=at({rectHover:!0},t),i=n.style={strokeNoScale:!0};if(r=r||{x:-1,y:-1,width:2,height:2},e)return e.indexOf("image://")===0?(i.image=e.slice(8),re(i,r),new Ea(n)):K1(e.replace("path://",""),n,r,"center")}function Ntt(e,t,r,n,i){for(var o=0,a=i[i.length-1];o<i.length;o++){var s=i[o];if(mN(e,t,r,n,s[0],s[1],a[0],a[1]))return!0;a=s}}function mN(e,t,r,n,i,o,a,s){var l=r-e,u=n-t,c=a-i,f=s-o,h=n2(c,f,l,u);if(Ftt(h))return!1;var d=e-i,p=t-o,v=n2(d,p,l,u)/h;if(v<0||v>1)return!1;var m=n2(d,p,c,f)/h;return!(m<0||m>1)}function n2(e,t,r,n){return e*n-r*t}function Ftt(e){return e<=1e-6&&e>=-1e-6}function eP(e){var t=e.itemTooltipOption,r=e.componentModel,n=e.itemName,i=Mt(t)?{formatter:t}:t,o=r.mainType,a=r.componentIndex,s={componentType:o,name:n,$vars:["name"]};s[o+"Index"]=a;var l=e.formatterParamsExtra;l&&$(ve(l),function(c){pt(s,c)||(s[c]=l[c],s.$vars.push(c))});var u=ae(e.el);u.componentMainType=o,u.componentIndex=a,u.tooltipConfig={name:n,option:re({content:n,formatterParams:s},i)}}function QM(e,t){var r;e.isGroup&&(r=t(e)),r||e.traverse(t)}function pf(e,t){if(e)if(ct(e))for(var r=0;r<e.length;r++)QM(e[r],t);else QM(e,t)}ji("circle",qk);ji("ellipse",K9);ji("sector",Rp);ji("ring",eN);ji("polygon",Qd);ji("polyline",oN);ji("rect",Qe);ji("line",xs);ji("bezierCurve",Z1);ji("arc",Zk);const $tt=Object.freeze(Object.defineProperty({__proto__:null,updateProps:_r,initProps:Io,removeElement:eu,removeElementWithFadeOut:ZS,isElementRemoved:Sd,extendShape:Ctt,extendPath:Mtt,registerShape:ji,getShapeClass:fN,makePath:K1,makeImage:hN,mergePath:xtt,resizePath:pN,subPixelOptimizeLine:tp,subPixelOptimizeRect:Ltt,subPixelOptimize:Itt,getTransform:jg,applyTransform:Rc,transformDirection:vN,groupTransition:gN,clipPointsByRect:Rtt,clipRectByRect:Dtt,createIcon:tP,linePolygonIntersect:Ntt,lineLineIntersect:mN,setTooltipConfig:eP,traverseElements:pf,Group:Ne,Image:Ea,Text:tr,Circle:qk,Ellipse:K9,Sector:Rp,Ring:eN,Polygon:Qd,Polyline:oN,Rect:Qe,Line:xs,BezierCurve:Z1,Arc:Zk,IncrementalDisplayable:Ptt,CompoundPath:mtt,LinearGradient:Kk,RadialGradient:wtt,BoundingRect:le,OrientedBoundingRect:Dm,Point:Le,Path:de},Symbol.toStringTag,{value:"Module"}));var J1={};function Btt(e,t){for(var r=0;r<si.length;r++){var n=si[r],i=t[n],o=e.ensureState(n);o.style=o.style||{},o.style.text=i}var a=e.currentStates.slice();e.clearStates(!0),e.setStyle({text:t.normal}),e.useStates(a,!0)}function t4(e,t,r){var n=e.labelFetcher,i=e.labelDataIndex,o=e.labelDimIndex,a=t.normal,s;n&&(s=n.getFormattedLabel(i,"normal",null,o,a&&a.get("formatter"),r!=null?{interpolatedValue:r}:null)),s==null&&(s=Ut(e.defaultText)?e.defaultText(i,e,r):e.defaultText);for(var l={normal:s},u=0;u<si.length;u++){var c=si[u],f=t[c];l[c]=Zt(n?n.getFormattedLabel(i,c,null,o,f&&f.get("formatter")):null,s)}return l}function vf(e,t,r,n){r=r||J1;for(var i=e instanceof tr,o=!1,a=0;a<NM.length;a++){var s=t[NM[a]];if(s&&s.getShallow("show")){o=!0;break}}var l=i?e:e.getTextContent();if(o){i||(l||(l=new tr,e.setTextContent(l)),e.stateProxy&&(l.stateProxy=e.stateProxy));var u=t4(r,t),c=t.normal,f=!!c.getShallow("show"),h=mn(c,n&&n.normal,r,!1,!i);h.text=u.normal,i||e.setTextConfig($m(c,r,!1));for(var a=0;a<si.length;a++){var d=si[a],s=t[d];if(s){var p=l.ensureState(d),v=!!Zt(s.getShallow("show"),f);if(v!==f&&(p.ignore=!v),p.style=mn(s,n&&n[d],r,!0,!i),p.style.text=u[d],!i){var m=e.ensureState(d);m.textConfig=$m(s,r,!0)}}}l.silent=!!c.getShallow("silent"),l.style.x!=null&&(h.x=l.style.x),l.style.y!=null&&(h.y=l.style.y),l.ignore=!f,l.useStyle(h),l.dirty(),r.enableTextSetter&&(Q1(l).setLabelText=function(g){var _=t4(r,t,g);Btt(l,_)})}else l&&(l.ignore=!0);e.dirty()}function pu(e,t){t=t||"label";for(var r={normal:e.getModel(t)},n=0;n<si.length;n++){var i=si[n];r[i]=e.getModel([i,t])}return r}function mn(e,t,r,n,i){var o={};return ztt(o,e,r,n,i),t&&at(o,t),o}function $m(e,t,r){t=t||{};var n={},i,o=e.getShallow("rotate"),a=Zt(e.getShallow("distance"),r?null:5),s=e.getShallow("offset");return i=e.getShallow("position")||(r?null:"inside"),i==="outside"&&(i=t.defaultOutsidePosition||"top"),i!=null&&(n.position=i),s!=null&&(n.offset=s),o!=null&&(o*=Math.PI/180,n.rotation=o),a!=null&&(n.distance=a),n.outsideFill=e.get("color")==="inherit"?t.inheritColor||null:"auto",n}function ztt(e,t,r,n,i){r=r||J1;var o=t.ecModel,a=o&&o.option.textStyle,s=Vtt(t),l;if(s){l={};for(var u in s)if(s.hasOwnProperty(u)){var c=t.getModel(["rich",u]);i4(l[u]={},c,a,r,n,i,!1,!0)}}l&&(e.rich=l);var f=t.get("overflow");f&&(e.overflow=f);var h=t.get("minMargin");h!=null&&(e.margin=h),i4(e,t,a,r,n,i,!0,!1)}function Vtt(e){for(var t;e&&e!==e.ecModel;){var r=(e.option||J1).rich;if(r){t=t||{};for(var n=ve(r),i=0;i<n.length;i++){var o=n[i];t[o]=1}}e=e.parentModel}return t}var e4=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],r4=["align","lineHeight","width","height","tag","verticalAlign"],n4=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function i4(e,t,r,n,i,o,a,s){r=!i&&r||J1;var l=n&&n.inheritColor,u=t.getShallow("color"),c=t.getShallow("textBorderColor"),f=Zt(t.getShallow("opacity"),r.opacity);(u==="inherit"||u==="auto")&&(l?u=l:u=null),(c==="inherit"||c==="auto")&&(l?c=l:c=null),o||(u=u||r.color,c=c||r.textBorderColor),u!=null&&(e.fill=u),c!=null&&(e.stroke=c);var h=Zt(t.getShallow("textBorderWidth"),r.textBorderWidth);h!=null&&(e.lineWidth=h);var d=Zt(t.getShallow("textBorderType"),r.textBorderType);d!=null&&(e.lineDash=d);var p=Zt(t.getShallow("textBorderDashOffset"),r.textBorderDashOffset);p!=null&&(e.lineDashOffset=p),!i&&f==null&&!s&&(f=n&&n.defaultOpacity),f!=null&&(e.opacity=f),!i&&!o&&e.fill==null&&n.inheritColor&&(e.fill=n.inheritColor);for(var v=0;v<e4.length;v++){var m=e4[v],g=Zt(t.getShallow(m),r[m]);g!=null&&(e[m]=g)}for(var v=0;v<r4.length;v++){var m=r4[v],g=t.getShallow(m);g!=null&&(e[m]=g)}if(e.verticalAlign==null){var _=t.getShallow("baseline");_!=null&&(e.verticalAlign=_)}if(!a||!n.disableBox){for(var v=0;v<n4.length;v++){var m=n4[v],g=t.getShallow(m);g!=null&&(e[m]=g)}var b=t.getShallow("borderType");b!=null&&(e.borderDash=b),(e.backgroundColor==="auto"||e.backgroundColor==="inherit")&&l&&(e.backgroundColor=l),(e.borderColor==="auto"||e.borderColor==="inherit")&&l&&(e.borderColor=l)}}function _N(e,t){var r=t&&t.getModel("textStyle");return To([e.fontStyle||r&&r.getShallow("fontStyle")||"",e.fontWeight||r&&r.getShallow("fontWeight")||"",(e.fontSize||r&&r.getShallow("fontSize")||12)+"px",e.fontFamily||r&&r.getShallow("fontFamily")||"sans-serif"].join(" "))}var Q1=Re();function Utt(e,t,r,n){if(!!e){var i=Q1(e);i.prevValue=i.value,i.value=r;var o=t.normal;i.valueAnimation=o.get("valueAnimation"),i.valueAnimation&&(i.precision=o.get("precision"),i.defaultInterpolatedText=n,i.statesModels=t)}}var Wtt=["textStyle","color"],i2=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],o2=new tr,Gtt=function(){function e(){}return e.prototype.getTextColor=function(t){var r=this.ecModel;return this.getShallow("color")||(!t&&r?r.get(Wtt):null)},e.prototype.getFont=function(){return _N({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},e.prototype.getTextRect=function(t){for(var r={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<i2.length;n++)r[i2[n]]=this.getShallow(i2[n]);return o2.useStyle(r),o2.update(),o2.getBoundingRect()},e}();const jtt=Gtt;var yN=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Htt=qd(yN),Xtt=function(){function e(){}return e.prototype.getLineStyle=function(t){return Htt(this,t)},e}(),bN=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],Ytt=qd(bN),qtt=function(){function e(){}return e.prototype.getItemStyle=function(t,r){return Ytt(this,t,r)},e}(),vu=function(){function e(t,r,n){this.parentModel=r,this.ecModel=n,this.option=t}return e.prototype.init=function(t,r,n){},e.prototype.mergeOption=function(t,r){se(this.option,t,!0)},e.prototype.get=function(t,r){return t==null?this.option:this._doGet(this.parsePath(t),!r&&this.parentModel)},e.prototype.getShallow=function(t,r){var n=this.option,i=n==null?n:n[t];if(i==null&&!r){var o=this.parentModel;o&&(i=o.getShallow(t))}return i},e.prototype.getModel=function(t,r){var n=t!=null,i=n?this.parsePath(t):null,o=n?this._doGet(i):this.option;return r=r||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(i)),new e(o,r,this.ecModel)},e.prototype.isEmpty=function(){return this.option==null},e.prototype.restoreData=function(){},e.prototype.clone=function(){var t=this.constructor;return new t(zt(this.option))},e.prototype.parsePath=function(t){return typeof t=="string"?t.split("."):t},e.prototype.resolveParentPath=function(t){return t},e.prototype.isAnimationEnabled=function(){if(!Yt.node&&this.option){if(this.option.animation!=null)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},e.prototype._doGet=function(t,r){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&!(!!t[i]&&(n=n&&typeof n=="object"?n[t[i]]:null,n==null));i++);return n==null&&r&&(n=r._doGet(this.resolveParentPath(t),r.parentModel)),n},e}();Vk(vu);xJ(vu);Wi(vu,Xtt);Wi(vu,qtt);Wi(vu,DJ);Wi(vu,jtt);const Ar=vu;var Ztt=Math.round(Math.random()*10);function t_(e){return[e||"",Ztt++].join("_")}function Ktt(e){var t={};e.registerSubTypeDefaulter=function(r,n){var i=Po(r);t[i.main]=n},e.determineSubType=function(r,n){var i=n.type;if(!i){var o=Po(r).main;e.hasSubTypes(r)&&t[o]&&(i=t[o](n))}return i}}function Jtt(e,t){e.topologicalTravel=function(o,a,s,l){if(!o.length)return;var u=r(a),c=u.graph,f=u.noEntryList,h={};for($(o,function(_){h[_]=!0});f.length;){var d=f.pop(),p=c[d],v=!!h[d];v&&(s.call(l,d,p.originalDeps.slice()),delete h[d]),$(p.successor,v?g:m)}$(h,function(){var _="";throw new Error(_)});function m(_){c[_].entryCount--,c[_].entryCount===0&&f.push(_)}function g(_){h[_]=!0,m(_)}};function r(o){var a={},s=[];return $(o,function(l){var u=n(a,l),c=u.originalDeps=t(l),f=i(c,o);u.entryCount=f.length,u.entryCount===0&&s.push(l),$(f,function(h){fe(u.predecessor,h)<0&&u.predecessor.push(h);var d=n(a,h);fe(d.successor,h)<0&&d.successor.push(l)})}),{graph:a,noEntryList:s}}function n(o,a){return o[a]||(o[a]={predecessor:[],successor:[]}),o[a]}function i(o,a){var s=[];return $(o,function(l){fe(a,l)>=0&&s.push(l)}),s}}function e_(e,t){return se(se({},e,!0),t,!0)}const Qtt={time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}},tet={time:{month:["\u4E00\u6708","\u4E8C\u6708","\u4E09\u6708","\u56DB\u6708","\u4E94\u6708","\u516D\u6708","\u4E03\u6708","\u516B\u6708","\u4E5D\u6708","\u5341\u6708","\u5341\u4E00\u6708","\u5341\u4E8C\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661F\u671F\u65E5","\u661F\u671F\u4E00","\u661F\u671F\u4E8C","\u661F\u671F\u4E09","\u661F\u671F\u56DB","\u661F\u671F\u4E94","\u661F\u671F\u516D"],dayOfWeekAbbr:["\u65E5","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53CD\u9009"}},toolbox:{brush:{title:{rect:"\u77E9\u5F62\u9009\u62E9",polygon:"\u5708\u9009",lineX:"\u6A2A\u5411\u9009\u62E9",lineY:"\u7EB5\u5411\u9009\u62E9",keep:"\u4FDD\u6301\u9009\u62E9",clear:"\u6E05\u9664\u9009\u62E9"}},dataView:{title:"\u6570\u636E\u89C6\u56FE",lang:["\u6570\u636E\u89C6\u56FE","\u5173\u95ED","\u5237\u65B0"]},dataZoom:{title:{zoom:"\u533A\u57DF\u7F29\u653E",back:"\u533A\u57DF\u7F29\u653E\u8FD8\u539F"}},magicType:{title:{line:"\u5207\u6362\u4E3A\u6298\u7EBF\u56FE",bar:"\u5207\u6362\u4E3A\u67F1\u72B6\u56FE",stack:"\u5207\u6362\u4E3A\u5806\u53E0",tiled:"\u5207\u6362\u4E3A\u5E73\u94FA"}},restore:{title:"\u8FD8\u539F"},saveAsImage:{title:"\u4FDD\u5B58\u4E3A\u56FE\u7247",lang:["\u53F3\u952E\u53E6\u5B58\u4E3A\u56FE\u7247"]}},series:{typeNames:{pie:"\u997C\u56FE",bar:"\u67F1\u72B6\u56FE",line:"\u6298\u7EBF\u56FE",scatter:"\u6563\u70B9\u56FE",effectScatter:"\u6D9F\u6F2A\u6563\u70B9\u56FE",radar:"\u96F7\u8FBE\u56FE",tree:"\u6811\u56FE",treemap:"\u77E9\u5F62\u6811\u56FE",boxplot:"\u7BB1\u578B\u56FE",candlestick:"K\u7EBF\u56FE",k:"K\u7EBF\u56FE",heatmap:"\u70ED\u529B\u56FE",map:"\u5730\u56FE",parallel:"\u5E73\u884C\u5750\u6807\u56FE",lines:"\u7EBF\u56FE",graph:"\u5173\u7CFB\u56FE",sankey:"\u6851\u57FA\u56FE",funnel:"\u6F0F\u6597\u56FE",gauge:"\u4EEA\u8868\u76D8\u56FE",pictorialBar:"\u8C61\u5F62\u67F1\u56FE",themeRiver:"\u4E3B\u9898\u6CB3\u6D41\u56FE",sunburst:"\u65ED\u65E5\u56FE"}},aria:{general:{withTitle:"\u8FD9\u662F\u4E00\u4E2A\u5173\u4E8E\u201C{title}\u201D\u7684\u56FE\u8868\u3002",withoutTitle:"\u8FD9\u662F\u4E00\u4E2A\u56FE\u8868\uFF0C"},series:{single:{prefix:"",withName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\uFF0C\u8868\u793A{seriesName}\u3002",withoutName:"\u56FE\u8868\u7C7B\u578B\u662F{seriesType}\u3002"},multiple:{prefix:"\u5B83\u7531{seriesCount}\u4E2A\u56FE\u8868\u7CFB\u5217\u7EC4\u6210\u3002",withName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A\u8868\u793A{seriesName}\u7684{seriesType}\uFF0C",withoutName:"\u7B2C{seriesId}\u4E2A\u7CFB\u5217\u662F\u4E00\u4E2A{seriesType}\uFF0C",separator:{middle:"\uFF1B",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636E\u662F\u2014\u2014",partialData:"\u5176\u4E2D\uFF0C\u524D{displayCnt}\u9879\u662F\u2014\u2014",withName:"{name}\u7684\u6570\u636E\u662F{value}",withoutName:"{value}",separator:{middle:"\uFF0C",end:""}}}};var Bm="ZH",rP="EN",ep=rP,Hg={},nP={},wN=Yt.domSupported?function(){var e=(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase();return e.indexOf(Bm)>-1?Bm:ep}():ep;function SN(e,t){e=e.toUpperCase(),nP[e]=new Ar(t),Hg[e]=t}function eet(e){if(Mt(e)){var t=Hg[e.toUpperCase()]||{};return e===Bm||e===rP?zt(t):se(zt(t),zt(Hg[ep]),!1)}else return se(zt(e),zt(Hg[ep]),!1)}function ret(e){return nP[e]}function net(){return nP[ep]}SN(rP,Qtt);SN(Bm,tet);var iP=1e3,oP=iP*60,Td=oP*60,ti=Td*24,o4=ti*365,Kh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},z0="{yyyy}-{MM}-{dd}",a4={year:"{yyyy}",month:"{yyyy}-{MM}",day:z0,hour:z0+" "+Kh.hour,minute:z0+" "+Kh.minute,second:z0+" "+Kh.second,millisecond:Kh.none},a2=["year","month","day","hour","minute","second","millisecond"],TN=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function cl(e,t){return e+="","0000".substr(0,t-e.length)+e}function Dc(e){switch(e){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return e}}function iet(e){return e===Dc(e)}function oet(e){switch(e){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}function r_(e,t,r,n){var i=_a(e),o=i[aP(r)](),a=i[Nc(r)]()+1,s=Math.floor((a-1)/3)+1,l=i[n_(r)](),u=i["get"+(r?"UTC":"")+"Day"](),c=i[rp(r)](),f=(c-1)%12+1,h=i[i_(r)](),d=i[o_(r)](),p=i[a_(r)](),v=n instanceof Ar?n:ret(n||wN)||net(),m=v.getModel("time"),g=m.get("month"),_=m.get("monthAbbr"),b=m.get("dayOfWeek"),w=m.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,o%100+"").replace(/{Q}/g,s+"").replace(/{MMMM}/g,g[a-1]).replace(/{MMM}/g,_[a-1]).replace(/{MM}/g,cl(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,cl(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,b[u]).replace(/{ee}/g,w[u]).replace(/{e}/g,u+"").replace(/{HH}/g,cl(c,2)).replace(/{H}/g,c+"").replace(/{hh}/g,cl(f+"",2)).replace(/{h}/g,f+"").replace(/{mm}/g,cl(h,2)).replace(/{m}/g,h+"").replace(/{ss}/g,cl(d,2)).replace(/{s}/g,d+"").replace(/{SSS}/g,cl(p,3)).replace(/{S}/g,p+"")}function aet(e,t,r,n,i){var o=null;if(Mt(r))o=r;else if(Ut(r))o=r(e.value,t,{level:e.level});else{var a=at({},Kh);if(e.level>0)for(var s=0;s<a2.length;++s)a[a2[s]]="{primary|"+a[a2[s]]+"}";var l=r?r.inherit===!1?r:re(r,a):a,u=kN(e.value,i);if(l[u])o=l[u];else if(l.inherit){for(var c=TN.indexOf(u),s=c-1;s>=0;--s)if(l[u]){o=l[u];break}o=o||a.none}if(ct(o)){var f=e.level==null?0:e.level>=0?e.level:o.length+e.level;f=Math.min(f,o.length-1),o=o[f]}}return r_(new Date(e.value),o,i,n)}function kN(e,t){var r=_a(e),n=r[Nc(t)]()+1,i=r[n_(t)](),o=r[rp(t)](),a=r[i_(t)](),s=r[o_(t)](),l=r[a_(t)](),u=l===0,c=u&&s===0,f=c&&a===0,h=f&&o===0,d=h&&i===1,p=d&&n===1;return p?"year":d?"month":h?"day":f?"hour":c?"minute":u?"second":"millisecond"}function s4(e,t,r){var n=Se(e)?_a(e):e;switch(t=t||kN(e,r),t){case"year":return n[aP(r)]();case"half-year":return n[Nc(r)]()>=6?1:0;case"quarter":return Math.floor((n[Nc(r)]()+1)/4);case"month":return n[Nc(r)]();case"day":return n[n_(r)]();case"half-day":return n[rp(r)]()/24;case"hour":return n[rp(r)]();case"minute":return n[i_(r)]();case"second":return n[o_(r)]();case"millisecond":return n[a_(r)]()}}function aP(e){return e?"getUTCFullYear":"getFullYear"}function Nc(e){return e?"getUTCMonth":"getMonth"}function n_(e){return e?"getUTCDate":"getDate"}function rp(e){return e?"getUTCHours":"getHours"}function i_(e){return e?"getUTCMinutes":"getMinutes"}function o_(e){return e?"getUTCSeconds":"getSeconds"}function a_(e){return e?"getUTCMilliseconds":"getMilliseconds"}function set(e){return e?"setUTCFullYear":"setFullYear"}function PN(e){return e?"setUTCMonth":"setMonth"}function EN(e){return e?"setUTCDate":"setDate"}function CN(e){return e?"setUTCHours":"setHours"}function AN(e){return e?"setUTCMinutes":"setMinutes"}function MN(e){return e?"setUTCSeconds":"setSeconds"}function xN(e){return e?"setUTCMilliseconds":"setMilliseconds"}function LN(e){if(!lJ(e))return Mt(e)?e:"-";var t=(e+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function IN(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(r,n){return n.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Dp=U7;function JS(e,t,r){var n="{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}";function i(c){return c&&To(c)?c:"-"}function o(c){return!!(c!=null&&!isNaN(c)&&isFinite(c))}var a=t==="time",s=e instanceof Date;if(a||s){var l=a?_a(e):e;if(isNaN(+l)){if(s)return"-"}else return r_(l,n,r)}if(t==="ordinal")return yS(e)?i(e):Se(e)&&o(e)?e+"":"-";var u=Ms(e);return o(u)?LN(u):yS(e)?i(e):typeof e=="boolean"?e+"":"-"}var l4=["a","b","c","d","e","f","g"],s2=function(e,t){return"{"+e+(t==null?"":t)+"}"};function ON(e,t,r){ct(t)||(t=[t]);var n=t.length;if(!n)return"";for(var i=t[0].$vars||[],o=0;o<i.length;o++){var a=l4[o];e=e.replace(s2(a),s2(a,0))}for(var s=0;s<n;s++)for(var l=0;l<i.length;l++){var u=t[s][i[l]];e=e.replace(s2(l4[l],s),r?Jn(u):u)}return e}function uet(e,t){var r=Mt(e)?{color:e,extraCssText:t}:e||{},n=r.color,i=r.type;t=r.extraCssText;var o=r.renderMode||"html";if(!n)return"";if(o==="html")return i==="subItem"?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Jn(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Jn(n)+";"+(t||"")+'"></span>';var a=r.markerId||"markerX";return{renderMode:o,content:"{"+a+"|}  ",style:i==="subItem"?{width:4,height:4,borderRadius:2,backgroundColor:n}:{width:10,height:10,borderRadius:5,backgroundColor:n}}}function ru(e,t){return t=t||"transparent",Mt(e)?e:Rt(e)&&e.colorStops&&(e.colorStops[0]||{}).color||t}function u4(e,t){if(t==="_blank"||t==="blank"){var r=window.open();r.opener=null,r.location.href=e}else window.open(e,t)}var Xg=$,cet=["left","right","top","bottom","width","height"],V0=[["width","left","right"],["height","top","bottom"]];function sP(e,t,r,n,i){var o=0,a=0;n==null&&(n=1/0),i==null&&(i=1/0);var s=0;t.eachChild(function(l,u){var c=l.getBoundingRect(),f=t.childAt(u+1),h=f&&f.getBoundingRect(),d,p;if(e==="horizontal"){var v=c.width+(h?-h.x+c.x:0);d=o+v,d>n||l.newline?(o=0,d=v,a+=s+r,s=c.height):s=Math.max(s,c.height)}else{var m=c.height+(h?-h.y+c.y:0);p=a+m,p>i||l.newline?(o+=s+r,a=0,p=m,s=c.width):s=Math.max(s,c.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),e==="horizontal"?o=d+r:a=p+r)})}var Fc=sP;ye(sP,"vertical");ye(sP,"horizontal");function Ls(e,t,r){r=Dp(r||0);var n=t.width,i=t.height,o=je(e.left,n),a=je(e.top,i),s=je(e.right,n),l=je(e.bottom,i),u=je(e.width,n),c=je(e.height,i),f=r[2]+r[0],h=r[1]+r[3],d=e.aspect;switch(isNaN(u)&&(u=n-s-h-o),isNaN(c)&&(c=i-l-f-a),d!=null&&(isNaN(u)&&isNaN(c)&&(d>n/i?u=n*.8:c=i*.8),isNaN(u)&&(u=d*c),isNaN(c)&&(c=u/d)),isNaN(o)&&(o=n-s-u-h),isNaN(a)&&(a=i-l-c-f),e.left||e.right){case"center":o=n/2-u/2-r[3];break;case"right":o=n-u-h;break}switch(e.top||e.bottom){case"middle":case"center":a=i/2-c/2-r[0];break;case"bottom":a=i-c-f;break}o=o||0,a=a||0,isNaN(u)&&(u=n-h-o-(s||0)),isNaN(c)&&(c=i-f-a-(l||0));var p=new le(o+r[3],a+r[0],u,c);return p.margin=r,p}function fet(e,t,r,n,i,o){var a=!i||!i.hv||i.hv[0],s=!i||!i.hv||i.hv[1],l=i&&i.boundingMode||"all";if(o=o||e,o.x=e.x,o.y=e.y,!a&&!s)return!1;var u;if(l==="raw")u=e.type==="group"?new le(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(u=e.getBoundingRect(),e.needLocalTransform()){var c=e.getLocalTransform();u=u.clone(),u.applyTransform(c)}var f=Ls(re({width:u.width,height:u.height},t),r,n),h=a?f.x-u.x:0,d=s?f.y-u.y:0;return l==="raw"?(o.x=h,o.y=d):(o.x+=h,o.y+=d),o===e&&e.markRedraw(),!0}function np(e){var t=e.layoutMode||e.constructor.layoutMode;return Rt(t)?t:t?{type:t}:null}function qc(e,t,r){var n=r&&r.ignoreSize;!ct(n)&&(n=[n,n]);var i=a(V0[0],0),o=a(V0[1],1);u(V0[0],e,i),u(V0[1],e,o);function a(c,f){var h={},d=0,p={},v=0,m=2;if(Xg(c,function(b){p[b]=e[b]}),Xg(c,function(b){s(t,b)&&(h[b]=p[b]=t[b]),l(h,b)&&d++,l(p,b)&&v++}),n[f])return l(t,c[1])?p[c[2]]=null:l(t,c[2])&&(p[c[1]]=null),p;if(v===m||!d)return p;if(d>=m)return h;for(var g=0;g<c.length;g++){var _=c[g];if(!s(h,_)&&s(e,_)){h[_]=e[_];break}}return h}function s(c,f){return c.hasOwnProperty(f)}function l(c,f){return c[f]!=null&&c[f]!=="auto"}function u(c,f,h){Xg(c,function(d){f[d]=h[d]})}}function s_(e){return het({},e)}function het(e,t){return t&&e&&Xg(cet,function(r){t.hasOwnProperty(r)&&(e[r]=t[r])}),e}var det=Re(),gf=function(e){yt(t,e);function t(r,n,i){var o=e.call(this,r,n,i)||this;return o.uid=t_("ec_cpt_model"),o}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=np(this),o=i?s_(r):{},a=n.getTheme();se(r,a.get(this.mainType)),se(r,this.getDefaultOption()),i&&qc(r,o,i)},t.prototype.mergeOption=function(r,n){se(this.option,r,!0);var i=np(this);i&&qc(this.option,r,i)},t.prototype.optionUpdated=function(r,n){},t.prototype.getDefaultOption=function(){var r=this.constructor;if(!CJ(r))return r.defaultOption;var n=det(this);if(!n.defaultOption){for(var i=[],o=r;o;){var a=o.prototype.defaultOption;a&&i.push(a),o=o.superClass}for(var s={},l=i.length-1;l>=0;l--)s=se(s,i[l],!0);n.defaultOption=s}return n.defaultOption},t.prototype.getReferringComponents=function(r,n){var i=r+"Index",o=r+"Id";return Ip(this.ecModel,r,{index:this.get(i,!0),id:this.get(o,!0)},n)},t.prototype.getBoxLayoutParams=function(){var r=this;return{left:r.get("left"),top:r.get("top"),right:r.get("right"),bottom:r.get("bottom"),width:r.get("width"),height:r.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(r){this.option.zlevel=r},t.protoInitialize=function(){var r=t.prototype;r.type="component",r.id="",r.name="",r.mainType="",r.subType="",r.componentIndex=0}(),t}(Ar);k9(gf,Ar);j1(gf);Ktt(gf);Jtt(gf,pet);function pet(e){var t=[];return $(gf.getClassesByMainType(e),function(r){t=t.concat(r.dependencies||r.prototype.dependencies||[])}),t=Lt(t,function(r){return Po(r).main}),e!=="dataset"&&fe(t,"dataset")<=0&&t.unshift("dataset"),t}const Me=gf;var RN="";typeof navigator<"u"&&(RN=navigator.platform||"");var Vu="rgba(0, 0, 0, 0.2)";const vet={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:Vu,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:Vu,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:Vu,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:Vu,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:Vu,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:Vu,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:RN.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1};var DN=jt(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),ci="original",an="arrayRows",Hi="objectRows",Aa="keyedColumns",Ss="typedArray",NN="unknown",Co="column",mf="row",Pn={Must:1,Might:2,Not:3},FN=Re();function get(e){FN(e).datasetMap=jt()}function met(e,t,r){var n={},i=$N(t);if(!i||!e)return n;var o=[],a=[],s=t.ecModel,l=FN(s).datasetMap,u=i.uid+"_"+r.seriesLayoutBy,c,f;e=e.slice(),$(e,function(v,m){var g=Rt(v)?v:e[m]={name:v};g.type==="ordinal"&&c==null&&(c=m,f=p(g)),n[g.name]=[]});var h=l.get(u)||l.set(u,{categoryWayDim:f,valueWayDim:0});$(e,function(v,m){var g=v.name,_=p(v);if(c==null){var b=h.valueWayDim;d(n[g],b,_),d(a,b,_),h.valueWayDim+=_}else if(c===m)d(n[g],0,_),d(o,0,_);else{var b=h.categoryWayDim;d(n[g],b,_),d(a,b,_),h.categoryWayDim+=_}});function d(v,m,g){for(var _=0;_<g;_++)v.push(m+_)}function p(v){var m=v.dimsDef;return m?m.length:1}return o.length&&(n.itemName=o),a.length&&(n.seriesName=a),n}function $N(e){var t=e.get("data",!0);if(!t)return Ip(e.ecModel,"dataset",{index:e.get("datasetIndex",!0),id:e.get("datasetId",!0)},Mi).models[0]}function _et(e){return!e.get("transform",!0)&&!e.get("fromTransformResult",!0)?[]:Ip(e.ecModel,"dataset",{index:e.get("fromDatasetIndex",!0),id:e.get("fromDatasetId",!0)},Mi).models}function BN(e,t){return yet(e.data,e.sourceFormat,e.seriesLayoutBy,e.dimensionsDefine,e.startIndex,t)}function yet(e,t,r,n,i,o){var a,s=5;if(Rn(e))return Pn.Not;var l,u;if(n){var c=n[o];Rt(c)?(l=c.name,u=c.type):Mt(c)&&(l=c)}if(u!=null)return u==="ordinal"?Pn.Must:Pn.Not;if(t===an){var f=e;if(r===mf){for(var h=f[o],d=0;d<(h||[]).length&&d<s;d++)if((a=w(h[i+d]))!=null)return a}else for(var d=0;d<f.length&&d<s;d++){var p=f[i+d];if(p&&(a=w(p[o]))!=null)return a}}else if(t===Hi){var v=e;if(!l)return Pn.Not;for(var d=0;d<v.length&&d<s;d++){var m=v[d];if(m&&(a=w(m[l]))!=null)return a}}else if(t===Aa){var g=e;if(!l)return Pn.Not;var h=g[l];if(!h||Rn(h))return Pn.Not;for(var d=0;d<h.length&&d<s;d++)if((a=w(h[d]))!=null)return a}else if(t===ci)for(var _=e,d=0;d<_.length&&d<s;d++){var m=_[d],b=Lp(m);if(!ct(b))return Pn.Not;if((a=w(b[o]))!=null)return a}function w(T){var S=Mt(T);if(T!=null&&isFinite(T)&&T!=="")return S?Pn.Might:Pn.Not;if(S&&T!=="-")return Pn.Must}return Pn.Not}var bet=jt();function wet(e,t,r){var n=bet.get(t);if(!n)return r;var i=n(e);return i?r.concat(i):r}var c4=Re();Re();var lP=function(){function e(){}return e.prototype.getColorFromPalette=function(t,r,n){var i=Je(this.get("color",!0)),o=this.get("colorLayer",!0);return ket(this,c4,i,o,t,r,n)},e.prototype.clearColorPalette=function(){Pet(this,c4)},e}();function Tet(e,t){for(var r=e.length,n=0;n<r;n++)if(e[n].length>t)return e[n];return e[r-1]}function ket(e,t,r,n,i,o,a){o=o||e;var s=t(o),l=s.paletteIdx||0,u=s.paletteNameMap=s.paletteNameMap||{};if(u.hasOwnProperty(i))return u[i];var c=a==null||!n?r:Tet(n,a);if(c=c||r,!(!c||!c.length)){var f=c[l];return i&&(u[i]=f),s.paletteIdx=(l+1)%c.length,f}}function Pet(e,t){t(e).paletteIdx=0,t(e).paletteNameMap={}}var U0,ih,f4,h4="\0_ec_inner",Eet=1,zN=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(r,n,i,o,a,s){o=o||{},this.option=null,this._theme=new Ar(o),this._locale=new Ar(a),this._optionManager=s},t.prototype.setOption=function(r,n,i){var o=v4(n);this._optionManager.setOption(r,i,o),this._resetOption(null,o)},t.prototype.resetOption=function(r,n){return this._resetOption(r,v4(n))},t.prototype._resetOption=function(r,n){var i=!1,o=this._optionManager;if(!r||r==="recreate"){var a=o.mountOption(r==="recreate");!this.option||r==="recreate"?f4(this,a):(this.restoreData(),this._mergeOption(a,n)),i=!0}if((r==="timeline"||r==="media")&&this.restoreData(),!r||r==="recreate"||r==="timeline"){var s=o.getTimelineOption(this);s&&(i=!0,this._mergeOption(s,n))}if(!r||r==="recreate"||r==="media"){var l=o.getMediaOption(this);l.length&&$(l,function(u){i=!0,this._mergeOption(u,n)},this)}return i},t.prototype.mergeOption=function(r){this._mergeOption(r,null)},t.prototype._mergeOption=function(r,n){var i=this.option,o=this._componentsMap,a=this._componentsCount,s=[],l=jt(),u=n&&n.replaceMergeMainTypeMap;get(this),$(r,function(f,h){f!=null&&(Me.hasClass(h)?h&&(s.push(h),l.set(h,!0)):i[h]=i[h]==null?zt(f):se(i[h],f,!0))}),u&&u.each(function(f,h){Me.hasClass(h)&&!l.get(h)&&(s.push(h),l.set(h,!0))}),Me.topologicalTravel(s,Me.getAllClassMainTypes(),c,this);function c(f){var h=wet(this,f,Je(r[f])),d=o.get(f),p=d?u&&u.get(f)?"replaceMerge":"normalMerge":"replaceAll",v=fJ(d,h,p);_J(v,f,Me),i[f]=null,o.set(f,null),a.set(f,0);var m=[],g=[],_=0,b;$(v,function(w,T){var S=w.existing,k=w.newOption;if(!k)S&&(S.mergeOption({},this),S.optionUpdated({},!1));else{var C=f==="series",E=Me.getClass(f,w.keyInfo.subType,!C);if(!E)return;if(f==="tooltip"){if(b)return;b=!0}if(S&&S.constructor===E)S.name=w.keyInfo.name,S.mergeOption(k,this),S.optionUpdated(k,!1);else{var M=at({componentIndex:T},w.keyInfo);S=new E(k,this,this,M),at(S,M),w.brandNew&&(S.__requireNewView=!0),S.init(k,this,this),S.optionUpdated(null,!0)}}S?(m.push(S.option),g.push(S),_++):(m.push(void 0),g.push(void 0))},this),i[f]=m,o.set(f,g),a.set(f,_),f==="series"&&U0(this)}this._seriesIndices||U0(this)},t.prototype.getOption=function(){var r=zt(this.option);return $(r,function(n,i){if(Me.hasClass(i)){for(var o=Je(n),a=o.length,s=!1,l=a-1;l>=0;l--)o[l]&&!Yd(o[l])?s=!0:(o[l]=null,!s&&a--);o.length=a,r[i]=o}}),delete r[h4],r},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(r){this._payload=r},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(r,n){var i=this._componentsMap.get(r);if(i){var o=i[n||0];if(o)return o;if(n==null){for(var a=0;a<i.length;a++)if(i[a])return i[a]}}},t.prototype.queryComponents=function(r){var n=r.mainType;if(!n)return[];var i=r.index,o=r.id,a=r.name,s=this._componentsMap.get(n);if(!s||!s.length)return[];var l;return i!=null?(l=[],$(Je(i),function(u){s[u]&&l.push(s[u])})):o!=null?l=d4("id",o,s):a!=null?l=d4("name",a,s):l=Er(s,function(u){return!!u}),p4(l,r)},t.prototype.findComponents=function(r){var n=r.query,i=r.mainType,o=s(n),a=o?this.queryComponents(o):Er(this._componentsMap.get(i),function(u){return!!u});return l(p4(a,r));function s(u){var c=i+"Index",f=i+"Id",h=i+"Name";return u&&(u[c]!=null||u[f]!=null||u[h]!=null)?{mainType:i,index:u[c],id:u[f],name:u[h]}:null}function l(u){return r.filter?Er(u,r.filter):u}},t.prototype.eachComponent=function(r,n,i){var o=this._componentsMap;if(Ut(r)){var a=n,s=r;o.each(function(f,h){for(var d=0;f&&d<f.length;d++){var p=f[d];p&&s.call(a,h,p,p.componentIndex)}})}else for(var l=Mt(r)?o.get(r):Rt(r)?this.findComponents(r):null,u=0;l&&u<l.length;u++){var c=l[u];c&&n.call(i,c,c.componentIndex)}},t.prototype.getSeriesByName=function(r){var n=ri(r,null);return Er(this._componentsMap.get("series"),function(i){return!!i&&n!=null&&i.name===n})},t.prototype.getSeriesByIndex=function(r){return this._componentsMap.get("series")[r]},t.prototype.getSeriesByType=function(r){return Er(this._componentsMap.get("series"),function(n){return!!n&&n.subType===r})},t.prototype.getSeries=function(){return Er(this._componentsMap.get("series"),function(r){return!!r})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(r,n){ih(this),$(this._seriesIndices,function(i){var o=this._componentsMap.get("series")[i];r.call(n,o,i)},this)},t.prototype.eachRawSeries=function(r,n){$(this._componentsMap.get("series"),function(i){i&&r.call(n,i,i.componentIndex)})},t.prototype.eachSeriesByType=function(r,n,i){ih(this),$(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===r&&n.call(i,a,o)},this)},t.prototype.eachRawSeriesByType=function(r,n,i){return $(this.getSeriesByType(r),n,i)},t.prototype.isSeriesFiltered=function(r){return ih(this),this._seriesIndicesMap.get(r.componentIndex)==null},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(r,n){ih(this);var i=[];$(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];r.call(n,a,o)&&i.push(o)},this),this._seriesIndices=i,this._seriesIndicesMap=jt(i)},t.prototype.restoreData=function(r){U0(this);var n=this._componentsMap,i=[];n.each(function(o,a){Me.hasClass(a)&&i.push(a)}),Me.topologicalTravel(i,Me.getAllClassMainTypes(),function(o){$(n.get(o),function(a){a&&(o!=="series"||!Cet(a,r))&&a.restoreData()})})},t.internalField=function(){U0=function(r){var n=r._seriesIndices=[];$(r._componentsMap.get("series"),function(i){i&&n.push(i.componentIndex)}),r._seriesIndicesMap=jt(n)},ih=function(r){},f4=function(r,n){r.option={},r.option[h4]=Eet,r._componentsMap=jt({series:[]}),r._componentsCount=jt();var i=n.aria;Rt(i)&&i.enabled==null&&(i.enabled=!0),Aet(n,r._theme.option),se(n,vet,!1),r._mergeOption(n,null)}}(),t}(Ar);function Cet(e,t){if(t){var r=t.seriesIndex,n=t.seriesId,i=t.seriesName;return r!=null&&e.componentIndex!==r||n!=null&&e.id!==n||i!=null&&e.name!==i}}function Aet(e,t){var r=e.color&&!e.colorLayer;$(t,function(n,i){i==="colorLayer"&&r||Me.hasClass(i)||(typeof n=="object"?e[i]=e[i]?se(e[i],n,!1):zt(n):e[i]==null&&(e[i]=n))})}function d4(e,t,r){if(ct(t)){var n=jt();return $(t,function(o){if(o!=null){var a=ri(o,null);a!=null&&n.set(o,!0)}}),Er(r,function(o){return o&&n.get(o[e])})}else{var i=ri(t,null);return Er(r,function(o){return o&&i!=null&&o[e]===i})}}function p4(e,t){return t.hasOwnProperty("subType")?Er(e,function(r){return r&&r.subType===t.subType}):e}function v4(e){var t=jt();return e&&$(Je(e.replaceMerge),function(r){t.set(r,!0)}),{replaceMergeMainTypeMap:t}}Wi(zN,lP);const VN=zN;var Met=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],xet=function(){function e(t){$(Met,function(r){this[r]=Vt(t[r],t)},this)}return e}();const UN=xet;var l2={},Let=function(){function e(){this._coordinateSystems=[]}return e.prototype.create=function(t,r){var n=[];$(l2,function(i,o){var a=i.create(t,r);n=n.concat(a||[])}),this._coordinateSystems=n},e.prototype.update=function(t,r){$(this._coordinateSystems,function(n){n.update&&n.update(t,r)})},e.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},e.register=function(t,r){l2[t]=r},e.get=function(t){return l2[t]},e}();const uP=Let;var Iet=/^(min|max)?(.+)$/,Oet=function(){function e(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return e.prototype.setOption=function(t,r,n){t&&($(Je(t.series),function(a){a&&a.data&&Rn(a.data)&&Pm(a.data)}),$(Je(t.dataset),function(a){a&&a.source&&Rn(a.source)&&Pm(a.source)})),t=zt(t);var i=this._optionBackup,o=Ret(t,r,!i);this._newBaseOption=o.baseOption,i?(o.timelineOptions.length&&(i.timelineOptions=o.timelineOptions),o.mediaList.length&&(i.mediaList=o.mediaList),o.mediaDefault&&(i.mediaDefault=o.mediaDefault)):this._optionBackup=o},e.prototype.mountOption=function(t){var r=this._optionBackup;return this._timelineOptions=r.timelineOptions,this._mediaList=r.mediaList,this._mediaDefault=r.mediaDefault,this._currentMediaIndices=[],zt(t?r.baseOption:this._newBaseOption)},e.prototype.getTimelineOption=function(t){var r,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(r=zt(n[i.getCurrentIndex()]))}return r},e.prototype.getMediaOption=function(t){var r=this._api.getWidth(),n=this._api.getHeight(),i=this._mediaList,o=this._mediaDefault,a=[],s=[];if(!i.length&&!o)return s;for(var l=0,u=i.length;l<u;l++)Det(i[l].query,r,n)&&a.push(l);return!a.length&&o&&(a=[-1]),a.length&&!Fet(a,this._currentMediaIndices)&&(s=Lt(a,function(c){return zt(c===-1?o.option:i[c].option)})),this._currentMediaIndices=a,s},e}();function Ret(e,t,r){var n=[],i,o,a=e.baseOption,s=e.timeline,l=e.options,u=e.media,c=!!e.media,f=!!(l||s||a&&a.timeline);a?(o=a,o.timeline||(o.timeline=s)):((f||c)&&(e.options=e.media=null),o=e),c&&ct(u)&&$(u,function(d){d&&d.option&&(d.query?n.push(d):i||(i=d))}),h(o),$(l,function(d){return h(d)}),$(n,function(d){return h(d.option)});function h(d){$(t,function(p){p(d,r)})}return{baseOption:o,timelineOptions:l||[],mediaDefault:i,mediaList:n}}function Det(e,t,r){var n={width:t,height:r,aspectratio:t/r},i=!0;return $(e,function(o,a){var s=a.match(Iet);if(!(!s||!s[1]||!s[2])){var l=s[1],u=s[2].toLowerCase();Net(n[u],o,l)||(i=!1)}}),i}function Net(e,t,r){return r==="min"?e>=t:r==="max"?e<=t:e===t}function Fet(e,t){return e.join(",")===t.join(",")}const $et=Oet;var di=$,ip=Rt,g4=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function u2(e){var t=e&&e.itemStyle;if(!!t)for(var r=0,n=g4.length;r<n;r++){var i=g4[r],o=t.normal,a=t.emphasis;o&&o[i]&&(e[i]=e[i]||{},e[i].normal?se(e[i].normal,o[i]):e[i].normal=o[i],o[i]=null),a&&a[i]&&(e[i]=e[i]||{},e[i].emphasis?se(e[i].emphasis,a[i]):e[i].emphasis=a[i],a[i]=null)}}function zr(e,t,r){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,i=e[t].emphasis;n&&(r?(e[t].normal=e[t].emphasis=null,re(e[t],n)):e[t]=n),i&&(e.emphasis=e.emphasis||{},e.emphasis[t]=i,i.focus&&(e.emphasis.focus=i.focus),i.blurScope&&(e.emphasis.blurScope=i.blurScope))}}function Jh(e){zr(e,"itemStyle"),zr(e,"lineStyle"),zr(e,"areaStyle"),zr(e,"label"),zr(e,"labelLine"),zr(e,"upperLabel"),zr(e,"edgeLabel")}function qe(e,t){var r=ip(e)&&e[t],n=ip(r)&&r.textStyle;if(n)for(var i=0,o=mM.length;i<o;i++){var a=mM[i];n.hasOwnProperty(a)&&(r[a]=n[a])}}function qn(e){e&&(Jh(e),qe(e,"label"),e.emphasis&&qe(e.emphasis,"label"))}function Bet(e){if(!!ip(e)){u2(e),Jh(e),qe(e,"label"),qe(e,"upperLabel"),qe(e,"edgeLabel"),e.emphasis&&(qe(e.emphasis,"label"),qe(e.emphasis,"upperLabel"),qe(e.emphasis,"edgeLabel"));var t=e.markPoint;t&&(u2(t),qn(t));var r=e.markLine;r&&(u2(r),qn(r));var n=e.markArea;n&&qn(n);var i=e.data;if(e.type==="graph"){i=i||e.nodes;var o=e.links||e.edges;if(o&&!Rn(o))for(var a=0;a<o.length;a++)qn(o[a]);$(e.categories,function(u){Jh(u)})}if(i&&!Rn(i))for(var a=0;a<i.length;a++)qn(i[a]);if(t=e.markPoint,t&&t.data)for(var s=t.data,a=0;a<s.length;a++)qn(s[a]);if(r=e.markLine,r&&r.data)for(var l=r.data,a=0;a<l.length;a++)ct(l[a])?(qn(l[a][0]),qn(l[a][1])):qn(l[a]);e.type==="gauge"?(qe(e,"axisLabel"),qe(e,"title"),qe(e,"detail")):e.type==="treemap"?(zr(e.breadcrumb,"itemStyle"),$(e.levels,function(u){Jh(u)})):e.type==="tree"&&Jh(e.leaves)}}function Xo(e){return ct(e)?e:e?[e]:[]}function m4(e){return(ct(e)?e[0]:e)||{}}function zet(e,t){di(Xo(e.series),function(n){ip(n)&&Bet(n)});var r=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&r.push("valueAxis","categoryAxis","logAxis","timeAxis"),di(r,function(n){di(Xo(e[n]),function(i){i&&(qe(i,"axisLabel"),qe(i.axisPointer,"label"))})}),di(Xo(e.parallel),function(n){var i=n&&n.parallelAxisDefault;qe(i,"axisLabel"),qe(i&&i.axisPointer,"label")}),di(Xo(e.calendar),function(n){zr(n,"itemStyle"),qe(n,"dayLabel"),qe(n,"monthLabel"),qe(n,"yearLabel")}),di(Xo(e.radar),function(n){qe(n,"name"),n.name&&n.axisName==null&&(n.axisName=n.name,delete n.name),n.nameGap!=null&&n.axisNameGap==null&&(n.axisNameGap=n.nameGap,delete n.nameGap)}),di(Xo(e.geo),function(n){ip(n)&&(qn(n),di(Xo(n.regions),function(i){qn(i)}))}),di(Xo(e.timeline),function(n){qn(n),zr(n,"label"),zr(n,"itemStyle"),zr(n,"controlStyle",!0);var i=n.data;ct(i)&&$(i,function(o){Rt(o)&&(zr(o,"label"),zr(o,"itemStyle"))})}),di(Xo(e.toolbox),function(n){zr(n,"iconStyle"),di(n.feature,function(i){zr(i,"iconStyle")})}),qe(m4(e.axisPointer),"label"),qe(m4(e.tooltip).axisPointer,"label")}function Vet(e,t){for(var r=t.split(","),n=e,i=0;i<r.length&&(n=n&&n[r[i]],n!=null);i++);return n}function Uet(e,t,r,n){for(var i=t.split(","),o=e,a,s=0;s<i.length-1;s++)a=i[s],o[a]==null&&(o[a]={}),o=o[a];(n||o[i[s]]==null)&&(o[i[s]]=r)}function _4(e){e&&$(Wet,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var Wet=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Get=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],c2=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function oh(e){var t=e&&e.itemStyle;if(t)for(var r=0;r<c2.length;r++){var n=c2[r][1],i=c2[r][0];t[n]!=null&&(t[i]=t[n])}}function y4(e){!e||e.alignTo==="edge"&&e.margin!=null&&e.edgeDistance==null&&(e.edgeDistance=e.margin)}function b4(e){!e||e.downplay&&!e.blur&&(e.blur=e.downplay)}function jet(e){!e||e.focusNodeAdjacency!=null&&(e.emphasis=e.emphasis||{},e.emphasis.focus==null&&(e.emphasis.focus="adjacency"))}function WN(e,t){if(e)for(var r=0;r<e.length;r++)t(e[r]),e[r]&&WN(e[r].children,t)}function GN(e,t){zet(e,t),e.series=Je(e.series),$(e.series,function(r){if(!!Rt(r)){var n=r.type;if(n==="line")r.clipOverflow!=null&&(r.clip=r.clipOverflow);else if(n==="pie"||n==="gauge"){r.clockWise!=null&&(r.clockwise=r.clockWise),y4(r.label);var i=r.data;if(i&&!Rn(i))for(var o=0;o<i.length;o++)y4(i[o]);r.hoverOffset!=null&&(r.emphasis=r.emphasis||{},(r.emphasis.scaleSize=null)&&(r.emphasis.scaleSize=r.hoverOffset))}else if(n==="gauge"){var a=Vet(r,"pointer.color");a!=null&&Uet(r,"itemStyle.color",a)}else if(n==="bar"){oh(r),oh(r.backgroundStyle),oh(r.emphasis);var i=r.data;if(i&&!Rn(i))for(var o=0;o<i.length;o++)typeof i[o]=="object"&&(oh(i[o]),oh(i[o]&&i[o].emphasis))}else if(n==="sunburst"){var s=r.highlightPolicy;s&&(r.emphasis=r.emphasis||{},r.emphasis.focus||(r.emphasis.focus=s)),b4(r),WN(r.data,b4)}else n==="graph"||n==="sankey"?jet(r):n==="map"&&(r.mapType&&!r.map&&(r.map=r.mapType),r.mapLocation&&re(r,r.mapLocation));r.hoverAnimation!=null&&(r.emphasis=r.emphasis||{},r.emphasis&&r.emphasis.scale==null&&(r.emphasis.scale=r.hoverAnimation)),_4(r)}}),e.dataRange&&(e.visualMap=e.dataRange),$(Get,function(r){var n=e[r];n&&(ct(n)||(n=[n]),$(n,function(i){_4(i)}))})}function Het(e){var t=jt();e.eachSeries(function(r){var n=r.get("stack");if(n){var i=t.get(n)||t.set(n,[]),o=r.getData(),a={stackResultDimension:o.getCalculationInfo("stackResultDimension"),stackedOverDimension:o.getCalculationInfo("stackedOverDimension"),stackedDimension:o.getCalculationInfo("stackedDimension"),stackedByDimension:o.getCalculationInfo("stackedByDimension"),isStackedByIndex:o.getCalculationInfo("isStackedByIndex"),data:o,seriesModel:r};if(!a.stackedDimension||!(a.isStackedByIndex||a.stackedByDimension))return;i.length&&o.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(a)}}),t.each(Xet)}function Xet(e){$(e,function(t,r){var n=[],i=[NaN,NaN],o=[t.stackResultDimension,t.stackedOverDimension],a=t.data,s=t.isStackedByIndex,l=t.seriesModel.get("stackStrategy")||"samesign";a.modify(o,function(u,c,f){var h=a.get(t.stackedDimension,f);if(isNaN(h))return i;var d,p;s?p=a.getRawIndex(f):d=a.get(t.stackedByDimension,f);for(var v=NaN,m=r-1;m>=0;m--){var g=e[m];if(s||(p=g.data.rawIndexOf(g.stackedByDimension,d)),p>=0){var _=g.data.getByRawIndex(g.stackResultDimension,p);if(l==="all"||l==="positive"&&_>0||l==="negative"&&_<0||l==="samesign"&&h>=0&&_>0||l==="samesign"&&h<=0&&_<0){h=oJ(h,_),v=_;break}}}return n[0]=h,n[1]=v,n})})}var l_=function(){function e(t){this.data=t.data||(t.sourceFormat===Aa?{}:[]),this.sourceFormat=t.sourceFormat||NN,this.seriesLayoutBy=t.seriesLayoutBy||Co,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var r=this.dimensionsDefine=t.dimensionsDefine;if(r)for(var n=0;n<r.length;n++){var i=r[n];i.type==null&&BN(this,n)===Pn.Must&&(i.type="ordinal")}}return e}();function cP(e){return e instanceof l_}function QS(e,t,r){r=r||jN(e);var n=t.seriesLayoutBy,i=qet(e,r,n,t.sourceHeader,t.dimensions),o=new l_({data:e,sourceFormat:r,seriesLayoutBy:n,dimensionsDefine:i.dimensionsDefine,startIndex:i.startIndex,dimensionsDetectedCount:i.dimensionsDetectedCount,metaRawOption:zt(t)});return o}function fP(e){return new l_({data:e,sourceFormat:Rn(e)?Ss:ci})}function Yet(e){return new l_({data:e.data,sourceFormat:e.sourceFormat,seriesLayoutBy:e.seriesLayoutBy,dimensionsDefine:zt(e.dimensionsDefine),startIndex:e.startIndex,dimensionsDetectedCount:e.dimensionsDetectedCount})}function jN(e){var t=NN;if(Rn(e))t=Ss;else if(ct(e)){e.length===0&&(t=an);for(var r=0,n=e.length;r<n;r++){var i=e[r];if(i!=null){if(ct(i)){t=an;break}else if(Rt(i)){t=Hi;break}}}}else if(Rt(e)){for(var o in e)if(pt(e,o)&&Xr(e[o])){t=Aa;break}}return t}function qet(e,t,r,n,i){var o,a;if(!e)return{dimensionsDefine:w4(i),startIndex:a,dimensionsDetectedCount:o};if(t===an){var s=e;n==="auto"||n==null?S4(function(u){u!=null&&u!=="-"&&(Mt(u)?a==null&&(a=1):a=0)},r,s,10):a=Se(n)?n:n?1:0,!i&&a===1&&(i=[],S4(function(u,c){i[c]=u!=null?u+"":""},r,s,1/0)),o=i?i.length:r===mf?s.length:s[0]?s[0].length:null}else if(t===Hi)i||(i=Zet(e));else if(t===Aa)i||(i=[],$(e,function(u,c){i.push(c)}));else if(t===ci){var l=Lp(e[0]);o=ct(l)&&l.length||1}return{startIndex:a,dimensionsDefine:w4(i),dimensionsDetectedCount:o}}function Zet(e){for(var t=0,r;t<e.length&&!(r=e[t++]););if(r){var n=[];return $(r,function(i,o){n.push(o)}),n}}function w4(e){if(!!e){var t=jt();return Lt(e,function(r,n){r=Rt(r)?r:{name:r};var i={name:r.name,displayName:r.displayName,type:r.type};if(i.name==null)return i;i.name+="",i.displayName==null&&(i.displayName=i.name);var o=t.get(i.name);return o?i.name+="-"+o.count++:t.set(i.name,{count:1}),i})}}function S4(e,t,r,n){if(t===mf)for(var i=0;i<r.length&&i<n;i++)e(r[i]?r[i][0]:null,i);else for(var o=r[0]||[],i=0;i<o.length&&i<n;i++)e(o[i],i)}function HN(e){var t=e.sourceFormat;return t===Hi||t===Aa}var fl,hl,dl,T4,k4,XN=function(){function e(t,r){var n=cP(t)?t:fP(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Ss&&(this._offset=0,this._dimSize=r,this._data=i),k4(this,i,n)}return e.prototype.getSource=function(){return this._source},e.prototype.count=function(){return 0},e.prototype.getItem=function(t,r){},e.prototype.appendData=function(t){},e.prototype.clean=function(){},e.protoInitialize=function(){var t=e.prototype;t.pure=!1,t.persistent=!0}(),e.internalField=function(){var t;k4=function(a,s,l){var u=l.sourceFormat,c=l.seriesLayoutBy,f=l.startIndex,h=l.dimensionsDefine,d=T4[hP(u,c)];if(at(a,d),u===Ss)a.getItem=r,a.count=i,a.fillStorage=n;else{var p=YN(u,c);a.getItem=Vt(p,null,s,f,h);var v=qN(u,c);a.count=Vt(v,null,s,f,h)}};var r=function(a,s){a=a-this._offset,s=s||[];for(var l=this._data,u=this._dimSize,c=u*a,f=0;f<u;f++)s[f]=l[c+f];return s},n=function(a,s,l,u){for(var c=this._data,f=this._dimSize,h=0;h<f;h++){for(var d=u[h],p=d[0]==null?1/0:d[0],v=d[1]==null?-1/0:d[1],m=s-a,g=l[h],_=0;_<m;_++){var b=c[_*f+h];g[a+_]=b,b<p&&(p=b),b>v&&(v=b)}d[0]=p,d[1]=v}},i=function(){return this._data?this._data.length/this._dimSize:0};T4=(t={},t[an+"_"+Co]={pure:!0,appendData:o},t[an+"_"+mf]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Hi]={pure:!0,appendData:o},t[Aa]={pure:!0,appendData:function(a){var s=this._data;$(a,function(l,u){for(var c=s[u]||(s[u]=[]),f=0;f<(l||[]).length;f++)c.push(l[f])})}},t[ci]={appendData:o},t[Ss]={persistent:!1,pure:!0,appendData:function(a){this._data=a},clean:function(){this._offset+=this.count(),this._data=null}},t);function o(a){for(var s=0;s<a.length;s++)this._data.push(a[s])}}(),e}(),P4=function(e,t,r,n){return e[n]},Ket=(fl={},fl[an+"_"+Co]=function(e,t,r,n){return e[n+t]},fl[an+"_"+mf]=function(e,t,r,n,i){n+=t;for(var o=i||[],a=e,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[n]:null}return o},fl[Hi]=P4,fl[Aa]=function(e,t,r,n,i){for(var o=i||[],a=0;a<r.length;a++){var s=r[a].name,l=e[s];o[a]=l?l[n]:null}return o},fl[ci]=P4,fl);function YN(e,t){var r=Ket[hP(e,t)];return r}var E4=function(e,t,r){return e.length},Jet=(hl={},hl[an+"_"+Co]=function(e,t,r){return Math.max(0,e.length-t)},hl[an+"_"+mf]=function(e,t,r){var n=e[0];return n?Math.max(0,n.length-t):0},hl[Hi]=E4,hl[Aa]=function(e,t,r){var n=r[0].name,i=e[n];return i?i.length:0},hl[ci]=E4,hl);function qN(e,t){var r=Jet[hP(e,t)];return r}var f2=function(e,t,r){return e[t]},Qet=(dl={},dl[an]=f2,dl[Hi]=function(e,t,r){return e[r]},dl[Aa]=f2,dl[ci]=function(e,t,r){var n=Lp(e);return n instanceof Array?n[t]:n},dl[Ss]=f2,dl);function ZN(e){var t=Qet[e];return t}function hP(e,t){return e===an?e+"_"+t:e}function Zc(e,t,r){if(!!e){var n=e.getRawDataItem(t);if(n!=null){var i=e.getStore(),o=i.getSource().sourceFormat;if(r!=null){var a=e.getDimensionIndex(r),s=i.getDimensionProperty(a);return ZN(o)(n,a,s)}else{var l=n;return o===ci&&(l=Lp(n)),l}}}}var trt=/\{@(.+?)\}/g,KN=function(){function e(){}return e.prototype.getDataParams=function(t,r){var n=this.getData(r),i=this.getRawValue(t,r),o=n.getRawIndex(t),a=n.getName(t),s=n.getRawDataItem(t),l=n.getItemVisual(t,"style"),u=l&&l[n.getItemVisual(t,"drawType")||"fill"],c=l&&l.stroke,f=this.mainType,h=f==="series",d=n.userOutput&&n.userOutput.get();return{componentType:f,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:a,dataIndex:o,data:s,dataType:r,value:i,color:u,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},e.prototype.getFormattedLabel=function(t,r,n,i,o,a){r=r||"normal";var s=this.getData(n),l=this.getDataParams(t,n);if(a&&(l.value=a.interpolatedValue),i!=null&&ct(l.value)&&(l.value=l.value[i]),!o){var u=s.getItemModel(t);o=u.get(r==="normal"?["label","formatter"]:[r,"label","formatter"])}if(Ut(o))return l.status=r,l.dimensionIndex=i,o(l);if(Mt(o)){var c=ON(o,l);return c.replace(trt,function(f,h){var d=h.length,p=h;p.charAt(0)==="["&&p.charAt(d-1)==="]"&&(p=+p.slice(1,d-1));var v=Zc(s,t,p);if(a&&ct(a.interpolatedValue)){var m=s.getDimensionIndex(p);m>=0&&(v=a.interpolatedValue[m])}return v!=null?v+"":""})}},e.prototype.getRawValue=function(t,r){return Zc(this.getData(r),t)},e.prototype.formatTooltip=function(t,r,n){},e}();function C4(e){var t,r;return Rt(e)?e.type&&(r=e):t=e,{text:t,frag:r}}function kd(e){return new ert(e)}var ert=function(){function e(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return e.prototype.perform=function(t){var r=this._upstream,n=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this);var o;this._plan&&!n&&(o=this._plan(this.context));var a=c(this._modBy),s=this._modDataCount||0,l=c(t&&t.modBy),u=t&&t.modDataCount||0;(a!==l||s!==u)&&(o="reset");function c(_){return!(_>=1)&&(_=1),_}var f;(this._dirty||o==="reset")&&(this._dirty=!1,f=this._doReset(n)),this._modBy=l,this._modDataCount=u;var h=t&&t.step;if(r?this._dueEnd=r._outputDueEnd:this._dueEnd=this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(h!=null?this._dueIndex+h:1/0,this._dueEnd);if(!n&&(f||d<p)){var v=this._progress;if(ct(v))for(var m=0;m<v.length;m++)this._doProgress(v[m],d,p,l,u);else this._doProgress(v,d,p,l,u)}this._dueIndex=p;var g=this._settedOutputEnd!=null?this._settedOutputEnd:p;this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=this._settedOutputEnd!=null?this._settedOutputEnd:this._dueEnd;return this.unfinished()},e.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},e.prototype._doProgress=function(t,r,n,i,o){A4.reset(r,n,i,o),this._callingProgress=t,this._callingProgress({start:r,end:n,count:n-r,next:A4.next},this.context)},e.prototype._doReset=function(t){this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null;var r,n;!t&&this._reset&&(r=this._reset(this.context),r&&r.progress&&(n=r.forceFirstProgress,r=r.progress),ct(r)&&!r.length&&(r=null)),this._progress=r,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},e.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},e.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},e.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},e.prototype.getUpstream=function(){return this._upstream},e.prototype.getDownstream=function(){return this._downstream},e.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},e}(),A4=function(){var e,t,r,n,i,o={reset:function(l,u,c,f){t=l,e=u,r=c,n=f,i=Math.ceil(n/r),o.next=r>1&&n>0?s:a}};return o;function a(){return t<e?t++:null}function s(){var l=t%i*r+Math.ceil(t/i),u=t>=e?null:l<n?l:t;return t++,u}}();function Ts(e,t){var r=t&&t.type;return r==="ordinal"?e:(r==="time"&&!Se(e)&&e!=null&&e!=="-"&&(e=+_a(e)),e==null||e===""?NaN:+e)}var rrt=jt({number:function(e){return parseFloat(e)},time:function(e){return+_a(e)},trim:function(e){return Mt(e)?To(e):e}});function JN(e){return rrt.get(e)}var QN={lt:function(e,t){return e<t},lte:function(e,t){return e<=t},gt:function(e,t){return e>t},gte:function(e,t){return e>=t}},nrt=function(){function e(t,r){if(!Se(r)){var n="";oe(n)}this._opFn=QN[t],this._rvalFloat=Ms(r)}return e.prototype.evaluate=function(t){return Se(t)?this._opFn(t,this._rvalFloat):this._opFn(Ms(t),this._rvalFloat)},e}(),tF=function(){function e(t,r){var n=t==="desc";this._resultLT=n?1:-1,r==null&&(r=n?"min":"max"),this._incomparable=r==="min"?-1/0:1/0}return e.prototype.evaluate=function(t,r){var n=Se(t)?t:Ms(t),i=Se(r)?r:Ms(r),o=isNaN(n),a=isNaN(i);if(o&&(n=this._incomparable),a&&(i=this._incomparable),o&&a){var s=Mt(t),l=Mt(r);s&&(n=l?t:0),l&&(i=s?r:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},e}(),irt=function(){function e(t,r){this._rval=r,this._isEQ=t,this._rvalTypeof=typeof r,this._rvalFloat=Ms(r)}return e.prototype.evaluate=function(t){var r=t===this._rval;if(!r){var n=typeof t;n!==this._rvalTypeof&&(n==="number"||this._rvalTypeof==="number")&&(r=Ms(t)===this._rvalFloat)}return this._isEQ?r:!r},e}();function ort(e,t){return e==="eq"||e==="ne"?new irt(e==="eq",t):pt(QN,e)?new nrt(e,t):null}var art=function(){function e(){}return e.prototype.getRawData=function(){throw new Error("not supported")},e.prototype.getRawDataItem=function(t){throw new Error("not supported")},e.prototype.cloneRawData=function(){},e.prototype.getDimensionInfo=function(t){},e.prototype.cloneAllDimensionInfo=function(){},e.prototype.count=function(){},e.prototype.retrieveValue=function(t,r){},e.prototype.retrieveValueFromItem=function(t,r){},e.prototype.convertValue=function(t,r){return Ts(t,r)},e}();function srt(e,t){var r=new art,n=e.data,i=r.sourceFormat=e.sourceFormat,o=e.startIndex,a="";e.seriesLayoutBy!==Co&&oe(a);var s=[],l={},u=e.dimensionsDefine;if(u)$(u,function(v,m){var g=v.name,_={index:m,name:g,displayName:v.displayName};if(s.push(_),g!=null){var b="";pt(l,g)&&oe(b),l[g]=_}});else for(var c=0;c<e.dimensionsDetectedCount;c++)s.push({index:c});var f=YN(i,Co);t.__isBuiltIn&&(r.getRawDataItem=function(v){return f(n,o,s,v)},r.getRawData=Vt(lrt,null,e)),r.cloneRawData=Vt(urt,null,e);var h=qN(i,Co);r.count=Vt(h,null,n,o,s);var d=ZN(i);r.retrieveValue=function(v,m){var g=f(n,o,s,v);return p(g,m)};var p=r.retrieveValueFromItem=function(v,m){if(v!=null){var g=s[m];if(g)return d(v,m,g.name)}};return r.getDimensionInfo=Vt(crt,null,s,l),r.cloneAllDimensionInfo=Vt(frt,null,s),r}function lrt(e){var t=e.sourceFormat;if(!dP(t)){var r="";oe(r)}return e.data}function urt(e){var t=e.sourceFormat,r=e.data;if(!dP(t)){var n="";oe(n)}if(t===an){for(var i=[],o=0,a=r.length;o<a;o++)i.push(r[o].slice());return i}else if(t===Hi){for(var i=[],o=0,a=r.length;o<a;o++)i.push(at({},r[o]));return i}}function crt(e,t,r){if(r!=null){if(Se(r)||!isNaN(r)&&!pt(t,r))return e[r];if(pt(t,r))return t[r]}}function frt(e){return zt(e)}var eF=jt();function hrt(e){e=zt(e);var t=e.type,r="";t||oe(r);var n=t.split(":");n.length!==2&&oe(r);var i=!1;n[0]==="echarts"&&(t=n[1],i=!0),e.__isBuiltIn=i,eF.set(t,e)}function drt(e,t,r){var n=Je(e),i=n.length,o="";i||oe(o);for(var a=0,s=i;a<s;a++){var l=n[a];t=prt(l,t),a!==s-1&&(t.length=Math.max(t.length,1))}return t}function prt(e,t,r,n){var i="";t.length||oe(i),Rt(e)||oe(i);var o=e.type,a=eF.get(o);a||oe(i);var s=Lt(t,function(u){return srt(u,a)}),l=Je(a.transform({upstream:s[0],upstreamList:s,config:zt(e.config)}));return Lt(l,function(u,c){var f="";Rt(u)||oe(f),u.data||oe(f);var h=jN(u.data);dP(h)||oe(f);var d,p=t[0];if(p&&c===0&&!u.dimensions){var v=p.startIndex;v&&(u.data=p.data.slice(0,v).concat(u.data)),d={seriesLayoutBy:Co,sourceHeader:v,dimensions:p.metaRawOption.dimensions}}else d={seriesLayoutBy:Co,sourceHeader:0,dimensions:u.dimensions};return QS(u.data,d,null)})}function dP(e){return e===an||e===Hi}var u_="undefined",vrt=typeof Uint32Array===u_?Array:Uint32Array,grt=typeof Uint16Array===u_?Array:Uint16Array,rF=typeof Int32Array===u_?Array:Int32Array,M4=typeof Float64Array===u_?Array:Float64Array,nF={float:M4,int:rF,ordinal:Array,number:Array,time:M4},h2;function ah(e){return e>65535?vrt:grt}function Uu(){return[1/0,-1/0]}function mrt(e){var t=e.constructor;return t===Array?e.slice():new t(e)}function x4(e,t,r,n,i){var o=nF[r||"float"];if(i){var a=e[t],s=a&&a.length;if(s!==n){for(var l=new o(n),u=0;u<s;u++)l[u]=a[u];e[t]=l}}else e[t]=new o(n)}var _rt=function(){function e(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=jt()}return e.prototype.initData=function(t,r,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),o=this.defaultDimValueGetter=h2[i.sourceFormat];this._dimValueGetter=n||o,this._rawExtent=[],HN(i),this._dimensions=Lt(r,function(a){return{type:a.type,property:a.property}}),this._initDataFromProvider(0,t.count())},e.prototype.getProvider=function(){return this._provider},e.prototype.getSource=function(){return this._provider.getSource()},e.prototype.ensureCalculationDimension=function(t,r){var n=this._calcDimNameToIdx,i=this._dimensions,o=n.get(t);if(o!=null){if(i[o].type===r)return o}else o=i.length;return i[o]={type:r},n.set(t,o),this._chunks[o]=new nF[r||"float"](this._rawCount),this._rawExtent[o]=Uu(),o},e.prototype.collectOrdinalMeta=function(t,r){var n=this._chunks[t],i=this._dimensions[t],o=this._rawExtent,a=i.ordinalOffset||0,s=n.length;a===0&&(o[t]=Uu());for(var l=o[t],u=a;u<s;u++){var c=n[u]=r.parseAndCollect(n[u]);isNaN(c)||(l[0]=Math.min(c,l[0]),l[1]=Math.max(c,l[1]))}i.ordinalMeta=r,i.ordinalOffset=s,i.type="ordinal"},e.prototype.getOrdinalMeta=function(t){var r=this._dimensions[t],n=r.ordinalMeta;return n},e.prototype.getDimensionProperty=function(t){var r=this._dimensions[t];return r&&r.property},e.prototype.appendData=function(t){var r=this._provider,n=this.count();r.appendData(t);var i=r.count();return r.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},e.prototype.appendValues=function(t,r){for(var n=this._chunks,i=this._dimensions,o=i.length,a=this._rawExtent,s=this.count(),l=s+Math.max(t.length,r||0),u=0;u<o;u++){var c=i[u];x4(n,u,c.type,l,!0)}for(var f=[],h=s;h<l;h++)for(var d=h-s,p=0;p<o;p++){var c=i[p],v=h2.arrayRows.call(this,t[d]||f,c.property,d,p);n[p][h]=v;var m=a[p];v<m[0]&&(m[0]=v),v>m[1]&&(m[1]=v)}return this._rawCount=this._count=l,{start:s,end:l}},e.prototype._initDataFromProvider=function(t,r,n){for(var i=this._provider,o=this._chunks,a=this._dimensions,s=a.length,l=this._rawExtent,u=Lt(a,function(_){return _.property}),c=0;c<s;c++){var f=a[c];l[c]||(l[c]=Uu()),x4(o,c,f.type,r,n)}if(i.fillStorage)i.fillStorage(t,r,o,l);else for(var h=[],d=t;d<r;d++){h=i.getItem(d,h);for(var p=0;p<s;p++){var v=o[p],m=this._dimValueGetter(h,u[p],d,p);v[d]=m;var g=l[p];m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=r,this._extent=[]},e.prototype.count=function(){return this._count},e.prototype.get=function(t,r){if(!(r>=0&&r<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(r)]:NaN},e.prototype.getValues=function(t,r){var n=[],i=[];if(r==null){r=t,t=[];for(var o=0;o<this._dimensions.length;o++)i.push(o)}else i=t;for(var o=0,a=i.length;o<a;o++)n.push(this.get(i[o],r));return n},e.prototype.getByRawIndex=function(t,r){if(!(r>=0&&r<this._rawCount))return NaN;var n=this._chunks[t];return n?n[r]:NaN},e.prototype.getSum=function(t){var r=this._chunks[t],n=0;if(r)for(var i=0,o=this.count();i<o;i++){var a=this.get(t,i);isNaN(a)||(n+=a)}return n},e.prototype.getMedian=function(t){var r=[];this.each([t],function(o){isNaN(o)||r.push(o)});var n=r.sort(function(o,a){return o-a}),i=this.count();return i===0?0:i%2===1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},e.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var r=this._indices,n=r[t];if(n!=null&&n<this._count&&n===t)return t;for(var i=0,o=this._count-1;i<=o;){var a=(i+o)/2|0;if(r[a]<t)i=a+1;else if(r[a]>t)o=a-1;else return a}return-1},e.prototype.indicesOfNearest=function(t,r,n){var i=this._chunks,o=i[t],a=[];if(!o)return a;n==null&&(n=1/0);for(var s=1/0,l=-1,u=0,c=0,f=this.count();c<f;c++){var h=this.getRawIndex(c),d=r-o[h],p=Math.abs(d);p<=n&&((p<s||p===s&&d>=0&&l<0)&&(s=p,l=d,u=0),d===l&&(a[u++]=c))}return a.length=u,a},e.prototype.getIndices=function(){var t,r=this._indices;if(r){var n=r.constructor,i=this._count;if(n===Array){t=new n(i);for(var o=0;o<i;o++)t[o]=r[o]}else t=new n(r.buffer,0,i)}else{var n=ah(this._rawCount);t=new n(this.count());for(var o=0;o<t.length;o++)t[o]=o}return t},e.prototype.filter=function(t,r){if(!this._count)return this;for(var n=this.clone(),i=n.count(),o=ah(n._rawCount),a=new o(i),s=[],l=t.length,u=0,c=t[0],f=n._chunks,h=0;h<i;h++){var d=void 0,p=n.getRawIndex(h);if(l===0)d=r(h);else if(l===1){var v=f[c][p];d=r(v,h)}else{for(var m=0;m<l;m++)s[m]=f[t[m]][p];s[m]=h,d=r.apply(null,s)}d&&(a[u++]=p)}return u<i&&(n._indices=a),n._count=u,n._extent=[],n._updateGetRawIdx(),n},e.prototype.selectRange=function(t){var r=this.clone(),n=r._count;if(!n)return this;var i=ve(t),o=i.length;if(!o)return this;var a=r.count(),s=ah(r._rawCount),l=new s(a),u=0,c=i[0],f=t[c][0],h=t[c][1],d=r._chunks,p=!1;if(!r._indices){var v=0;if(o===1){for(var m=d[i[0]],g=0;g<n;g++){var _=m[g];(_>=f&&_<=h||isNaN(_))&&(l[u++]=v),v++}p=!0}else if(o===2){for(var m=d[i[0]],b=d[i[1]],w=t[i[1]][0],T=t[i[1]][1],g=0;g<n;g++){var _=m[g],S=b[g];(_>=f&&_<=h||isNaN(_))&&(S>=w&&S<=T||isNaN(S))&&(l[u++]=v),v++}p=!0}}if(!p)if(o===1)for(var g=0;g<a;g++){var k=r.getRawIndex(g),_=d[i[0]][k];(_>=f&&_<=h||isNaN(_))&&(l[u++]=k)}else for(var g=0;g<a;g++){for(var C=!0,k=r.getRawIndex(g),E=0;E<o;E++){var M=i[E],_=d[M][k];(_<t[M][0]||_>t[M][1])&&(C=!1)}C&&(l[u++]=r.getRawIndex(g))}return u<a&&(r._indices=l),r._count=u,r._extent=[],r._updateGetRawIdx(),r},e.prototype.map=function(t,r){var n=this.clone(t);return this._updateDims(n,t,r),n},e.prototype.modify=function(t,r){this._updateDims(this,t,r)},e.prototype._updateDims=function(t,r,n){for(var i=t._chunks,o=[],a=r.length,s=t.count(),l=[],u=t._rawExtent,c=0;c<r.length;c++)u[r[c]]=Uu();for(var f=0;f<s;f++){for(var h=t.getRawIndex(f),d=0;d<a;d++)l[d]=i[r[d]][h];l[a]=f;var p=n&&n.apply(null,l);if(p!=null){typeof p!="object"&&(o[0]=p,p=o);for(var c=0;c<p.length;c++){var v=r[c],m=p[c],g=u[v],_=i[v];_&&(_[h]=m),m<g[0]&&(g[0]=m),m>g[1]&&(g[1]=m)}}}},e.prototype.lttbDownSample=function(t,r){var n=this.clone([t],!0),i=n._chunks,o=i[t],a=this.count(),s=0,l=Math.floor(1/r),u=this.getRawIndex(0),c,f,h,d=new(ah(this._rawCount))(Math.min((Math.ceil(a/l)+2)*2,a));d[s++]=u;for(var p=1;p<a-1;p+=l){for(var v=Math.min(p+l,a-1),m=Math.min(p+l*2,a),g=(m+v)/2,_=0,b=v;b<m;b++){var w=this.getRawIndex(b),T=o[w];isNaN(T)||(_+=T)}_/=m-v;var S=p,k=Math.min(p+l,a),C=p-1,E=o[u];c=-1,h=S;for(var M=-1,x=0,b=S;b<k;b++){var w=this.getRawIndex(b),T=o[w];if(isNaN(T)){x++,M<0&&(M=w);continue}f=Math.abs((C-g)*(T-E)-(C-b)*(_-E)),f>c&&(c=f,h=w)}x>0&&x<k-S&&(d[s++]=Math.min(M,h),h=Math.max(M,h)),d[s++]=h,u=h}return d[s++]=this.getRawIndex(a-1),n._count=s,n._indices=d,n.getRawIndex=this._getRawIdx,n},e.prototype.downSample=function(t,r,n,i){for(var o=this.clone([t],!0),a=o._chunks,s=[],l=Math.floor(1/r),u=a[t],c=this.count(),f=o._rawExtent[t]=Uu(),h=new(ah(this._rawCount))(Math.ceil(c/l)),d=0,p=0;p<c;p+=l){l>c-p&&(l=c-p,s.length=l);for(var v=0;v<l;v++){var m=this.getRawIndex(p+v);s[v]=u[m]}var g=n(s),_=this.getRawIndex(Math.min(p+i(s,g)||0,c-1));u[_]=g,g<f[0]&&(f[0]=g),g>f[1]&&(f[1]=g),h[d++]=_}return o._count=d,o._indices=h,o._updateGetRawIdx(),o},e.prototype.each=function(t,r){if(!!this._count)for(var n=t.length,i=this._chunks,o=0,a=this.count();o<a;o++){var s=this.getRawIndex(o);switch(n){case 0:r(o);break;case 1:r(i[t[0]][s],o);break;case 2:r(i[t[0]][s],i[t[1]][s],o);break;default:for(var l=0,u=[];l<n;l++)u[l]=i[t[l]][s];u[l]=o,r.apply(null,u)}}},e.prototype.getDataExtent=function(t){var r=this._chunks[t],n=Uu();if(!r)return n;var i=this.count(),o=!this._indices,a;if(o)return this._rawExtent[t].slice();if(a=this._extent[t],a)return a.slice();a=n;for(var s=a[0],l=a[1],u=0;u<i;u++){var c=this.getRawIndex(u),f=r[c];f<s&&(s=f),f>l&&(l=f)}return a=[s,l],this._extent[t]=a,a},e.prototype.getRawDataItem=function(t){var r=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(r);for(var n=[],i=this._chunks,o=0;o<i.length;o++)n.push(i[o][r]);return n},e.prototype.clone=function(t,r){var n=new e,i=this._chunks,o=t&&hu(t,function(s,l){return s[l]=!0,s},{});if(o)for(var a=0;a<i.length;a++)n._chunks[a]=o[a]?mrt(i[a]):i[a];else n._chunks=i;return this._copyCommonProps(n),r||(n._indices=this._cloneIndices()),n._updateGetRawIdx(),n},e.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=zt(this._extent),t._rawExtent=zt(this._rawExtent)},e.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,r=void 0;if(t===Array){var n=this._indices.length;r=new t(n);for(var i=0;i<n;i++)r[i]=this._indices[i]}else r=new t(this._indices);return r}return null},e.prototype._getRawIdxIdentity=function(t){return t},e.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},e.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},e.internalField=function(){function t(r,n,i,o){return Ts(r[o],this._dimensions[o])}h2={arrayRows:t,objectRows:function(r,n,i,o){return Ts(r[n],this._dimensions[o])},keyedColumns:t,original:function(r,n,i,o){var a=r&&(r.value==null?r:r.value);return Ts(a instanceof Array?a[o]:a,this._dimensions[o])},typedArray:function(r,n,i,o){return r[o]}}}(),e}();const t3=_rt;var iF=function(){function e(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return e.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},e.prototype._setLocalSource=function(t,r){this._sourceList=t,this._upstreamSignList=r,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},e.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},e.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},e.prototype._createSource=function(){this._setLocalSource([],[]);var t=this._sourceHost,r=this._getUpstreamSourceManagers(),n=!!r.length,i,o;if(W0(t)){var a=t,s=void 0,l=void 0,u=void 0;if(n){var c=r[0];c.prepareSource(),u=c.getSource(),s=u.data,l=u.sourceFormat,o=[c._getVersionSign()]}else s=a.get("data",!0),l=Rn(s)?Ss:ci,o=[];var f=this._getSourceMetaRawOption()||{},h=u&&u.metaRawOption||{},d=Zt(f.seriesLayoutBy,h.seriesLayoutBy)||null,p=Zt(f.sourceHeader,h.sourceHeader),v=Zt(f.dimensions,h.dimensions),m=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||v;i=m?[QS(s,{seriesLayoutBy:d,sourceHeader:p,dimensions:v},l)]:[]}else{var g=t;if(n){var _=this._applyTransform(r);i=_.sourceList,o=_.upstreamSignList}else{var b=g.get("source",!0);i=[QS(b,this._getSourceMetaRawOption(),null)],o=[]}}this._setLocalSource(i,o)},e.prototype._applyTransform=function(t){var r=this._sourceHost,n=r.get("transform",!0),i=r.get("fromTransformResult",!0);if(i!=null){var o="";t.length!==1&&I4(o)}var a,s=[],l=[];return $(t,function(u){u.prepareSource();var c=u.getSource(i||0),f="";i!=null&&!c&&I4(f),s.push(c),l.push(u._getVersionSign())}),n?a=drt(n,s,{datasetIndex:r.componentIndex}):i!=null&&(a=[Yet(s[0])]),{sourceList:a,upstreamSignList:l}},e.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),r=0;r<t.length;r++){var n=t[r];if(n._isDirty()||this._upstreamSignList[r]!==n._getVersionSign())return!0}},e.prototype.getSource=function(t){t=t||0;var r=this._sourceList[t];if(!r){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return r},e.prototype.getSharedDataStore=function(t){var r=t.makeStoreSchema();return this._innerGetDataStore(r.dimensions,t.source,r.hash)},e.prototype._innerGetDataStore=function(t,r,n){var i=0,o=this._storeList,a=o[i];a||(a=o[i]={});var s=a[n];if(!s){var l=this._getUpstreamSourceManagers()[0];W0(this._sourceHost)&&l?s=l._innerGetDataStore(t,r,n):(s=new t3,s.initData(new XN(r,t.length),t)),a[n]=s}return s},e.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(W0(t)){var r=$N(t);return r?[r.getSourceManager()]:[]}else return Lt(_et(t),function(n){return n.getSourceManager()})},e.prototype._getSourceMetaRawOption=function(){var t=this._sourceHost,r,n,i;if(W0(t))r=t.get("seriesLayoutBy",!0),n=t.get("sourceHeader",!0),i=t.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var o=t;r=o.get("seriesLayoutBy",!0),n=o.get("sourceHeader",!0),i=o.get("dimensions",!0)}return{seriesLayoutBy:r,sourceHeader:n,dimensions:i}},e}();function L4(e){var t=e.option.transform;t&&Pm(e.option.transform)}function W0(e){return e.mainType==="series"}function I4(e){throw new Error(e)}var oF="line-height:1";function aF(e,t){var r=e.color||"#6e7079",n=e.fontSize||12,i=e.fontWeight||"400",o=e.color||"#464646",a=e.fontSize||14,s=e.fontWeight||"900";return t==="html"?{nameStyle:"font-size:"+Jn(n+"")+"px;color:"+Jn(r)+";font-weight:"+Jn(i+""),valueStyle:"font-size:"+Jn(a+"")+"px;color:"+Jn(o)+";font-weight:"+Jn(s+"")}:{nameStyle:{fontSize:n,fill:r,fontWeight:i},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var yrt=[0,10,20,30],brt=["",`
`,`

`,`


`];function Is(e,t){return t.type=e,t}function e3(e){return e.type==="section"}function sF(e){return e3(e)?wrt:Srt}function lF(e){if(e3(e)){var t=0,r=e.blocks.length,n=r>1||r>0&&!e.noHeader;return $(e.blocks,function(i){var o=lF(i);o>=t&&(t=o+ +(n&&(!o||e3(i)&&!i.noHeader)))}),t}return 0}function wrt(e,t,r,n){var i=t.noHeader,o=Trt(lF(t)),a=[],s=t.blocks||[];Bi(!s||ct(s)),s=s||[];var l=e.orderMode;if(t.sortBlocks&&l){s=s.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(pt(u,l)){var c=new tF(u[l],null);s.sort(function(p,v){return c.evaluate(p.sortParam,v.sortParam)})}else l==="seriesDesc"&&s.reverse()}$(s,function(p,v){var m=t.valueFormatter,g=sF(p)(m?at(at({},e),{valueFormatter:m}):e,p,v>0?o.html:0,n);g!=null&&a.push(g)});var f=e.renderMode==="richText"?a.join(o.richText):r3(a.join(""),i?r:o.html);if(i)return f;var h=JS(t.header,"ordinal",e.useUTC),d=aF(n,e.renderMode).nameStyle;return e.renderMode==="richText"?uF(e,h,d)+o.richText+f:r3('<div style="'+d+";"+oF+';">'+Jn(h)+"</div>"+f,r)}function Srt(e,t,r,n){var i=e.renderMode,o=t.noName,a=t.noValue,s=!t.markerType,l=t.name,u=e.useUTC,c=t.valueFormatter||e.valueFormatter||function(w){return w=ct(w)?w:[w],Lt(w,function(T,S){return JS(T,ct(d)?d[S]:d,u)})};if(!(o&&a)){var f=s?"":e.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",i),h=o?"":JS(l,"ordinal",u),d=t.valueType,p=a?[]:c(t.value),v=!s||!o,m=!s&&o,g=aF(n,i),_=g.nameStyle,b=g.valueStyle;return i==="richText"?(s?"":f)+(o?"":uF(e,h,_))+(a?"":Ert(e,p,v,m,b)):r3((s?"":f)+(o?"":krt(h,!s,_))+(a?"":Prt(p,v,m,b)),r)}}function O4(e,t,r,n,i,o){if(!!e){var a=sF(e),s={useUTC:i,renderMode:r,orderMode:n,markupStyleCreator:t,valueFormatter:e.valueFormatter};return a(s,e,0,o)}}function Trt(e){return{html:yrt[e],richText:brt[e]}}function r3(e,t){var r='<div style="clear:both"></div>',n="margin: "+t+"px 0 0";return'<div style="'+n+";"+oF+';">'+e+r+"</div>"}function krt(e,t,r){var n=t?"margin-left:2px":"";return'<span style="'+r+";"+n+'">'+Jn(e)+"</span>"}function Prt(e,t,r,n){var i=r?"10px":"20px",o=t?"float:right;margin-left:"+i:"";return e=ct(e)?e:[e],'<span style="'+o+";"+n+'">'+Lt(e,function(a){return Jn(a)}).join("&nbsp;&nbsp;")+"</span>"}function uF(e,t,r){return e.markupStyleCreator.wrapRichTextStyle(t,r)}function Ert(e,t,r,n,i){var o=[i],a=n?10:20;return r&&o.push({padding:[0,0,0,a],align:"right"}),e.markupStyleCreator.wrapRichTextStyle(ct(t)?t.join("  "):t,o)}function Crt(e,t){var r=e.getData().getItemVisual(t,"style"),n=r[e.visualDrawType];return ru(n)}function cF(e,t){var r=e.get("padding");return r!=null?r:t==="richText"?[8,10]:10}var d2=function(){function e(){this.richTextStyles={},this._nextStyleNameId=_9()}return e.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},e.prototype.makeTooltipMarker=function(t,r,n){var i=n==="richText"?this._generateStyleName():null,o=uet({color:r,type:t,renderMode:n,markerId:i});return Mt(o)?o:(this.richTextStyles[i]=o.style,o.content)},e.prototype.wrapRichTextStyle=function(t,r){var n={};ct(r)?$(r,function(o){return at(n,o)}):at(n,r);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},e}();function Art(e){var t=e.series,r=e.dataIndex,n=e.multipleSeries,i=t.getData(),o=i.mapDimensionsAll("defaultedTooltip"),a=o.length,s=t.getRawValue(r),l=ct(s),u=Crt(t,r),c,f,h,d;if(a>1||l&&!a){var p=Mrt(s,t,r,o,u);c=p.inlineValues,f=p.inlineValueTypes,h=p.blocks,d=p.inlineValues[0]}else if(a){var v=i.getDimensionInfo(o[0]);d=c=Zc(i,r,o[0]),f=v.type}else d=c=l?s[0]:s;var m=Bk(t),g=m&&t.name||"",_=i.getName(r),b=n?g:_;return Is("section",{header:g,noHeader:n||!m,sortParam:d,blocks:[Is("nameValue",{markerType:"item",markerColor:u,name:b,noName:!To(b),value:c,valueType:f})].concat(h||[])})}function Mrt(e,t,r,n,i){var o=t.getData(),a=hu(e,function(f,h,d){var p=o.getDimensionInfo(d);return f=f||p&&p.tooltip!==!1&&p.displayName!=null},!1),s=[],l=[],u=[];n.length?$(n,function(f){c(Zc(o,r,f),f)}):$(e,c);function c(f,h){var d=o.getDimensionInfo(h);!d||d.otherDims.tooltip===!1||(a?u.push(Is("nameValue",{markerType:"subItem",markerColor:i,name:d.displayName,value:f,valueType:d.type})):(s.push(f),l.push(d.type)))}return{inlineValues:s,inlineValueTypes:l,blocks:u}}var $a=Re();function G0(e,t){return e.getName(t)||e.getId(t)}var xrt="__universalTransitionEnabled",c_=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r._selectedDataIndicesMap={},r}return t.prototype.init=function(r,n,i){this.seriesIndex=this.componentIndex,this.dataTask=kd({count:Irt,reset:Ort}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(r,i);var o=$a(this).sourceManager=new iF(this);o.prepareSource();var a=this.getInitialData(r,i);D4(a,this),this.dataTask.context.data=a,$a(this).dataBeforeProcessed=a,R4(this),this._initSelectedMapFromData(a)},t.prototype.mergeDefaultAndTheme=function(r,n){var i=np(this),o=i?s_(r):{},a=this.subType;Me.hasClass(a)&&(a+="Series"),se(r,n.getTheme().get(this.subType)),se(r,this.getDefaultOption()),$S(r,"label",["show"]),this.fillDataTextStyle(r.data),i&&qc(r,o,i)},t.prototype.mergeOption=function(r,n){r=se(this.option,r,!0),this.fillDataTextStyle(r.data);var i=np(this);i&&qc(this.option,r,i);var o=$a(this).sourceManager;o.dirty(),o.prepareSource();var a=this.getInitialData(r,n);D4(a,this),this.dataTask.dirty(),this.dataTask.context.data=a,$a(this).dataBeforeProcessed=a,R4(this),this._initSelectedMapFromData(a)},t.prototype.fillDataTextStyle=function(r){if(r&&!Rn(r))for(var n=["show"],i=0;i<r.length;i++)r[i]&&r[i].label&&$S(r[i],"label",n)},t.prototype.getInitialData=function(r,n){},t.prototype.appendData=function(r){var n=this.getRawData();n.appendData(r.data)},t.prototype.getData=function(r){var n=n3(this);if(n){var i=n.context.data;return r==null?i:i.getLinkedData(r)}else return $a(this).data},t.prototype.getAllData=function(){var r=this.getData();return r&&r.getLinkedDataAll?r.getLinkedDataAll():[{data:r}]},t.prototype.setData=function(r){var n=n3(this);if(n){var i=n.context;i.outputData=r,n!==this.dataTask&&(i.data=r)}$a(this).data=r},t.prototype.getEncode=function(){var r=this.get("encode",!0);if(r)return jt(r)},t.prototype.getSourceManager=function(){return $a(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return $a(this).dataBeforeProcessed},t.prototype.getColorBy=function(){var r=this.get("colorBy");return r||"series"},t.prototype.isColorBySeries=function(){return this.getColorBy()==="series"},t.prototype.getBaseAxis=function(){var r=this.coordinateSystem;return r&&r.getBaseAxis&&r.getBaseAxis()},t.prototype.formatTooltip=function(r,n,i){return Art({series:this,dataIndex:r,multipleSeries:n})},t.prototype.isAnimationEnabled=function(){var r=this.ecModel;if(Yt.node&&!(r&&r.ssr))return!1;var n=this.getShallow("animation");return n&&this.getData().count()>this.getShallow("animationThreshold")&&(n=!1),!!n},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(r,n,i){var o=this.ecModel,a=lP.prototype.getColorFromPalette.call(this,r,n,i);return a||(a=o.getColorFromPalette(r,n,i)),a},t.prototype.coordDimToDataDim=function(r){return this.getRawData().mapDimensionsAll(r)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(r,n){this._innerSelect(this.getData(n),r)},t.prototype.unselect=function(r,n){var i=this.option.selectedMap;if(!!i){var o=this.option.selectedMode,a=this.getData(n);if(o==="series"||i==="all"){this.option.selectedMap={},this._selectedDataIndicesMap={};return}for(var s=0;s<r.length;s++){var l=r[s],u=G0(a,l);i[u]=!1,this._selectedDataIndicesMap[u]=-1}}},t.prototype.toggleSelect=function(r,n){for(var i=[],o=0;o<r.length;o++)i[0]=r[o],this.isSelected(r[o],n)?this.unselect(i,n):this.select(i,n)},t.prototype.getSelectedDataIndices=function(){if(this.option.selectedMap==="all")return[].slice.call(this.getData().getIndices());for(var r=this._selectedDataIndicesMap,n=ve(r),i=[],o=0;o<n.length;o++){var a=r[n[o]];a>=0&&i.push(a)}return i},t.prototype.isSelected=function(r,n){var i=this.option.selectedMap;if(!i)return!1;var o=this.getData(n);return(i==="all"||i[G0(o,r)])&&!o.getItemModel(r).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[xrt])return!0;var r=this.option.universalTransition;return r?r===!0?!0:r&&r.enabled:!1},t.prototype._innerSelect=function(r,n){var i,o,a=this.option,s=a.selectedMode,l=n.length;if(!(!s||!l)){if(s==="series")a.selectedMap="all";else if(s==="multiple"){Rt(a.selectedMap)||(a.selectedMap={});for(var u=a.selectedMap,c=0;c<l;c++){var f=n[c],h=G0(r,f);u[h]=!0,this._selectedDataIndicesMap[h]=r.getRawIndex(f)}}else if(s==="single"||s===!0){var d=n[l-1],h=G0(r,d);a.selectedMap=(i={},i[h]=!0,i),this._selectedDataIndicesMap=(o={},o[h]=r.getRawIndex(d),o)}}},t.prototype._initSelectedMapFromData=function(r){if(!this.option.selectedMap){var n=[];r.hasItemOption&&r.each(function(i){var o=r.getRawDataItem(i);o&&o.selected&&n.push(i)}),n.length>0&&this._innerSelect(r,n)}},t.registerClass=function(r){return Me.registerClass(r)},t.protoInitialize=function(){var r=t.prototype;r.type="series.__base__",r.seriesIndex=0,r.ignoreStyleOnData=!1,r.hasSymbolVisual=!1,r.defaultSymbol="circle",r.visualStyleAccessPath="itemStyle",r.visualDrawType="fill"}(),t}(Me);Wi(c_,KN);Wi(c_,lP);k9(c_,Me);function R4(e){var t=e.name;Bk(e)||(e.name=Lrt(e)||t)}function Lrt(e){var t=e.getRawData(),r=t.mapDimensionsAll("seriesName"),n=[];return $(r,function(i){var o=t.getDimensionInfo(i);o.displayName&&n.push(o.displayName)}),n.join(" ")}function Irt(e){return e.model.getRawData().count()}function Ort(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Rrt}function Rrt(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function D4(e,t){$(G7(e.CHANGABLE_METHODS,e.DOWNSAMPLE_METHODS),function(r){e.wrapMethod(r,ye(Drt,t))})}function Drt(e,t){var r=n3(e);return r&&r.setOutputEnd((t||this).count()),t}function n3(e){var t=(e.ecModel||{}).scheduler,r=t&&t.getPipeline(e.uid);if(r){var n=r.currentTask;if(n){var i=n.agentStubMap;i&&(n=i.get(e.uid))}return n}}const Oo=c_;var pP=function(){function e(){this.group=new Ne,this.uid=t_("viewComponent")}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){},e.prototype.updateLayout=function(t,r,n,i){},e.prototype.updateVisual=function(t,r,n,i){},e.prototype.toggleBlurSeries=function(t,r,n){},e.prototype.eachRendered=function(t){var r=this.group;r&&r.traverse(t)},e}();Vk(pP);j1(pP);const li=pP;function vP(){var e=Re();return function(t){var r=e(t),n=t.pipelineContext,i=!!r.large,o=!!r.progressiveRender,a=r.large=!!(n&&n.large),s=r.progressiveRender=!!(n&&n.progressiveRender);return(i!==a||o!==s)&&"reset"}}var fF=Re(),Nrt=vP(),gP=function(){function e(){this.group=new Ne,this.uid=t_("viewChart"),this.renderTask=kd({plan:Frt,reset:$rt}),this.renderTask.context={view:this}}return e.prototype.init=function(t,r){},e.prototype.render=function(t,r,n,i){},e.prototype.highlight=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||F4(o,i,"emphasis")},e.prototype.downplay=function(t,r,n,i){var o=t.getData(i&&i.dataType);!o||F4(o,i,"normal")},e.prototype.remove=function(t,r){this.group.removeAll()},e.prototype.dispose=function(t,r){},e.prototype.updateView=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateLayout=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.updateVisual=function(t,r,n,i){this.render(t,r,n,i)},e.prototype.eachRendered=function(t){pf(this.group,t)},e.markUpdateMethod=function(t,r){fF(t).updateMethod=r},e.protoInitialize=function(){var t=e.prototype;t.type="chart"}(),e}();function N4(e,t,r){e&&XS(e)&&(t==="emphasis"?Zd:Kd)(e,r)}function F4(e,t,r){var n=Jl(e,t),i=t&&t.highlightKey!=null?GQ(t.highlightKey):null;n!=null?$(Je(n),function(o){N4(e.getItemGraphicEl(o),r,i)}):e.eachItemGraphicEl(function(o){N4(o,r,i)})}Vk(gP);j1(gP);function Frt(e){return Nrt(e.model)}function $rt(e){var t=e.model,r=e.ecModel,n=e.api,i=e.payload,o=t.pipelineContext.progressiveRender,a=e.view,s=i&&fF(i).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return l!=="render"&&a[l](t,r,n,i),Brt[l]}var Brt={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}};const ni=gP;var zm="\0__throttleOriginMethod",$4="\0__throttleRate",B4="\0__throttleType";function f_(e,t,r){var n,i=0,o=0,a=null,s,l,u,c;t=t||0;function f(){o=new Date().getTime(),a=null,e.apply(l,u||[])}var h=function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];n=new Date().getTime(),l=this,u=d;var v=c||t,m=c||r;c=null,s=n-(m?i:o)-v,clearTimeout(a),m?a=setTimeout(f,v):s>=0?f():a=setTimeout(f,-s),i=n};return h.clear=function(){a&&(clearTimeout(a),a=null)},h.debounceNextCall=function(d){c=d},h}function hF(e,t,r,n){var i=e[t];if(!!i){var o=i[zm]||i,a=i[B4],s=i[$4];if(s!==r||a!==n){if(r==null||!n)return e[t]=o;i=e[t]=f_(o,r,n==="debounce"),i[zm]=o,i[B4]=n,i[$4]=r}return i}}function i3(e,t){var r=e[t];r&&r[zm]&&(r.clear&&r.clear(),e[t]=r[zm])}var z4=Re(),V4={itemStyle:qd(bN,!0),lineStyle:qd(yN,!0)},zrt={lineStyle:"stroke",itemStyle:"fill"};function dF(e,t){var r=e.visualStyleMapper||V4[t];return r||(console.warn("Unkown style type '"+t+"'."),V4.itemStyle)}function pF(e,t){var r=e.visualDrawType||zrt[t];return r||(console.warn("Unkown style type '"+t+"'."),"fill")}var Vrt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=e.getModel(n),o=dF(e,n),a=o(i),s=i.getShallow("decal");s&&(r.setVisual("decal",s),s.dirty=!0);var l=pF(e,n),u=a[l],c=Ut(u)?u:null,f=a.fill==="auto"||a.stroke==="auto";if(!a[l]||c||f){var h=e.getColorFromPalette(e.name,null,t.getSeriesCount());a[l]||(a[l]=h,r.setVisual("colorFromPalette",!0)),a.fill=a.fill==="auto"||Ut(a.fill)?h:a.fill,a.stroke=a.stroke==="auto"||Ut(a.stroke)?h:a.stroke}if(r.setVisual("style",a),r.setVisual("drawType",l),!t.isSeriesFiltered(e)&&c)return r.setVisual("colorFromPalette",!1),{dataEach:function(d,p){var v=e.getDataParams(p),m=at({},a);m[l]=c(v),d.setItemVisual(p,"style",m)}}}},sh=new Ar,Urt={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!(e.ignoreStyleOnData||t.isSeriesFiltered(e))){var r=e.getData(),n=e.visualStyleAccessPath||"itemStyle",i=dF(e,n),o=r.getVisual("drawType");return{dataEach:r.hasItemOption?function(a,s){var l=a.getRawDataItem(s);if(l&&l[n]){sh.option=l[n];var u=i(sh),c=a.ensureUniqueItemVisual(s,"style");at(c,u),sh.option.decal&&(a.setItemVisual(s,"decal",sh.option.decal),sh.option.decal.dirty=!0),o in u&&a.setItemVisual(s,"colorFromPalette",!1)}}:null}}}},Wrt={performRawSeries:!0,overallReset:function(e){var t=jt();e.eachSeries(function(r){var n=r.getColorBy();if(!r.isColorBySeries()){var i=r.type+"-"+n,o=t.get(i);o||(o={},t.set(i,o)),z4(r).scope=o}}),e.eachSeries(function(r){if(!(r.isColorBySeries()||e.isSeriesFiltered(r))){var n=r.getRawData(),i={},o=r.getData(),a=z4(r).scope,s=r.visualStyleAccessPath||"itemStyle",l=pF(r,s);o.each(function(u){var c=o.getRawIndex(u);i[c]=u}),n.each(function(u){var c=i[u],f=o.getItemVisual(c,"colorFromPalette");if(f){var h=o.ensureUniqueItemVisual(c,"style"),d=n.getName(u)||u+"",p=n.count();h[l]=r.getColorFromPalette(d,a,p)}})}})}},j0=Math.PI;function Grt(e,t){t=t||{},re(t,{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var r=new Ne,n=new Qe({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});r.add(n);var i=new tr({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),o=new Qe({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});r.add(o);var a;return t.showSpinner&&(a=new Zk({shape:{startAngle:-j0/2,endAngle:-j0/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001}),a.animateShape(!0).when(1e3,{endAngle:j0*3/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:j0*3/2}).delay(300).start("circularInOut"),r.add(a)),r.resize=function(){var s=i.getBoundingRect().width,l=t.showSpinner?t.spinnerRadius:0,u=(e.getWidth()-l*2-(t.showSpinner&&s?10:0)-s)/2-(t.showSpinner&&s?0:5+s/2)+(t.showSpinner?0:s/2)+(s?0:l),c=e.getHeight()/2;t.showSpinner&&a.setShape({cx:u,cy:c}),o.setShape({x:u-l,y:c-l,width:l*2,height:l*2}),n.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},r.resize(),r}var jrt=function(){function e(t,r,n,i){this._stageTaskMap=jt(),this.ecInstance=t,this.api=r,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return e.prototype.restoreData=function(t,r){t.restoreData(r),this._stageTaskMap.each(function(n){var i=n.overallTask;i&&i.dirty()})},e.prototype.getPerformArgs=function(t,r){if(!!t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,o=!r&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex,a=o?n.step:null,s=i&&i.modDataCount,l=s!=null?Math.ceil(s/a):null;return{step:a,modBy:l,modDataCount:s}}},e.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},e.prototype.updateStreamModes=function(t,r){var n=this._pipelineMap.get(t.uid),i=t.getData(),o=i.count(),a=n.progressiveEnabled&&r.incrementalPrepareRender&&o>=n.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l=t.get("progressiveChunkMode")==="mod"?o:null;t.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:s}},e.prototype.restorePipelines=function(t){var r=this,n=r._pipelineMap=jt();t.eachSeries(function(i){var o=i.getProgressive(),a=i.uid;n.set(a,{id:a,head:null,tail:null,threshold:i.getProgressiveThreshold(),progressiveEnabled:o&&!(i.preventIncremental&&i.preventIncremental()),blockIndex:-1,step:Math.round(o||700),count:0}),r._pipe(i,i.dataTask)})},e.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,r=this.api.getModel(),n=this.api;$(this._allHandlers,function(i){var o=t.get(i.uid)||t.set(i.uid,{}),a="";Bi(!(i.reset&&i.overallReset),a),i.reset&&this._createSeriesStageTask(i,o,r,n),i.overallReset&&this._createOverallStageTask(i,o,r,n)},this)},e.prototype.prepareView=function(t,r,n,i){var o=t.renderTask,a=o.context;a.model=r,a.ecModel=n,a.api=i,o.__block=!t.incrementalPrepareRender,this._pipe(r,o)},e.prototype.performDataProcessorTasks=function(t,r){this._performStageTasks(this._dataProcessorHandlers,t,r,{block:!0})},e.prototype.performVisualTasks=function(t,r,n){this._performStageTasks(this._visualHandlers,t,r,n)},e.prototype._performStageTasks=function(t,r,n,i){i=i||{};var o=!1,a=this;$(t,function(l,u){if(!(i.visualType&&i.visualType!==l.visualType)){var c=a._stageTaskMap.get(l.uid),f=c.seriesTaskMap,h=c.overallTask;if(h){var d,p=h.agentStubMap;p.each(function(m){s(i,m)&&(m.dirty(),d=!0)}),d&&h.dirty(),a.updatePayload(h,n);var v=a.getPerformArgs(h,i.block);p.each(function(m){m.perform(v)}),h.perform(v)&&(o=!0)}else f&&f.each(function(m,g){s(i,m)&&m.dirty();var _=a.getPerformArgs(m,i.block);_.skip=!l.performRawSeries&&r.isSeriesFiltered(m.context.model),a.updatePayload(m,n),m.perform(_)&&(o=!0)})}});function s(l,u){return l.setDirty&&(!l.dirtyMap||l.dirtyMap.get(u.__pipeline.id))}this.unfinished=o||this.unfinished},e.prototype.performSeriesTasks=function(t){var r;t.eachSeries(function(n){r=n.dataTask.perform()||r}),this.unfinished=r||this.unfinished},e.prototype.plan=function(){this._pipelineMap.each(function(t){var r=t.tail;do{if(r.__block){t.blockIndex=r.__idxInPipeline;break}r=r.getUpstream()}while(r)})},e.prototype.updatePayload=function(t,r){r!=="remain"&&(t.context.payload=r)},e.prototype._createSeriesStageTask=function(t,r,n,i){var o=this,a=r.seriesTaskMap,s=r.seriesTaskMap=jt(),l=t.seriesType,u=t.getTargetSeries;t.createOnAllSeries?n.eachRawSeries(c):l?n.eachRawSeriesByType(l,c):u&&u(n,i).each(c);function c(f){var h=f.uid,d=s.set(h,a&&a.get(h)||kd({plan:Zrt,reset:Krt,count:Qrt}));d.context={model:f,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:o},o._pipe(f,d)}},e.prototype._createOverallStageTask=function(t,r,n,i){var o=this,a=r.overallTask=r.overallTask||kd({reset:Hrt});a.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:o};var s=a.agentStubMap,l=a.agentStubMap=jt(),u=t.seriesType,c=t.getTargetSeries,f=!0,h=!1,d="";Bi(!t.createOnAllSeries,d),u?n.eachRawSeriesByType(u,p):c?c(n,i).each(p):(f=!1,$(n.getSeries(),p));function p(v){var m=v.uid,g=l.set(m,s&&s.get(m)||(h=!0,kd({reset:Xrt,onDirty:qrt})));g.context={model:v,overallProgress:f},g.agent=a,g.__block=f,o._pipe(v,g)}h&&a.dirty()},e.prototype._pipe=function(t,r){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=r),i.tail&&i.tail.pipe(r),i.tail=r,r.__idxInPipeline=i.count++,r.__pipeline=i},e.wrapStageHandler=function(t,r){return Ut(t)&&(t={overallReset:t,seriesType:tnt(t)}),t.uid=t_("stageHandler"),r&&(t.visualType=r),t},e}();function Hrt(e){e.overallReset(e.ecModel,e.api,e.payload)}function Xrt(e){return e.overallProgress&&Yrt}function Yrt(){this.agent.dirty(),this.getDownstream().dirty()}function qrt(){this.agent&&this.agent.dirty()}function Zrt(e){return e.plan?e.plan(e.model,e.ecModel,e.api,e.payload):null}function Krt(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Je(e.reset(e.model,e.ecModel,e.api,e.payload));return t.length>1?Lt(t,function(r,n){return vF(n)}):Jrt}var Jrt=vF(0);function vF(e){return function(t,r){var n=r.data,i=r.resetDefines[e];if(i&&i.dataEach)for(var o=t.start;o<t.end;o++)i.dataEach(n,o);else i&&i.progress&&i.progress(t,n)}}function Qrt(e){return e.data.count()}function tnt(e){Vm=null;try{e(op,gF)}catch{}return Vm}var op={},gF={},Vm;mF(op,VN);mF(gF,UN);op.eachSeriesByType=op.eachRawSeriesByType=function(e){Vm=e};op.eachComponent=function(e){e.mainType==="series"&&e.subType&&(Vm=e.subType)};function mF(e,t){for(var r in t.prototype)e[r]=jr}const _F=jrt;var U4=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"];const ent={color:U4,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],U4]};var Qr="#B9B8CE",W4="#100C2A",H0=function(){return{axisLine:{lineStyle:{color:Qr}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},G4=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],yF={darkMode:!0,color:G4,backgroundColor:W4,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:Qr}},textStyle:{color:Qr},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:Qr}},dataZoom:{borderColor:"#71708A",textStyle:{color:Qr},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:Qr}},timeline:{lineStyle:{color:Qr},label:{color:Qr},controlStyle:{color:Qr,borderColor:Qr}},calendar:{itemStyle:{color:W4},dayLabel:{color:Qr},monthLabel:{color:Qr},yearLabel:{color:Qr}},timeAxis:H0(),logAxis:H0(),valueAxis:H0(),categoryAxis:H0(),line:{symbol:"circle"},graph:{color:G4},gauge:{title:{color:Qr},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:Qr},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};yF.categoryAxis.splitLine.show=!1;const rnt=yF;var nnt=function(){function e(){}return e.prototype.normalizeQuery=function(t){var r={},n={},i={};if(Mt(t)){var o=Po(t);r.mainType=o.main||null,r.subType=o.sub||null}else{var a=["Index","Name","Id"],s={name:1,dataIndex:1,dataType:1};$(t,function(l,u){for(var c=!1,f=0;f<a.length;f++){var h=a[f],d=u.lastIndexOf(h);if(d>0&&d===u.length-h.length){var p=u.slice(0,d);p!=="data"&&(r.mainType=p,r[h.toLowerCase()]=l,c=!0)}}s.hasOwnProperty(u)&&(n[u]=l,c=!0),c||(i[u]=l)})}return{cptQuery:r,dataQuery:n,otherQuery:i}},e.prototype.filter=function(t,r){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,o=n.packedEvent,a=n.model,s=n.view;if(!a||!s)return!0;var l=r.cptQuery,u=r.dataQuery;return c(l,a,"mainType")&&c(l,a,"subType")&&c(l,a,"index","componentIndex")&&c(l,a,"name")&&c(l,a,"id")&&c(u,o,"name")&&c(u,o,"dataIndex")&&c(u,o,"dataType")&&(!s.filterForExposedEvent||s.filterForExposedEvent(t,r.otherQuery,i,o));function c(f,h,d,p){return f[d]==null||h[p||d]===f[d]}},e.prototype.afterTrigger=function(){this.eventInfo=null},e}(),o3=["symbol","symbolSize","symbolRotate","symbolOffset"],j4=o3.concat(["symbolKeepAspect"]),int={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var r=e.getData();if(e.legendIcon&&r.setVisual("legendIcon",e.legendIcon),!e.hasSymbolVisual)return;for(var n={},i={},o=!1,a=0;a<o3.length;a++){var s=o3[a],l=e.get(s);Ut(l)?(o=!0,i[s]=l):n[s]=l}if(n.symbol=n.symbol||e.defaultSymbol,r.setVisual(at({legendIcon:e.legendIcon||n.symbol,symbolKeepAspect:e.get("symbolKeepAspect")},n)),t.isSeriesFiltered(e))return;var u=ve(i);function c(f,h){for(var d=e.getRawValue(h),p=e.getDataParams(h),v=0;v<u.length;v++){var m=u[v];f.setItemVisual(h,m,i[m](d,p))}}return{dataEach:o?c:null}}},ont={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){if(!e.hasSymbolVisual||t.isSeriesFiltered(e))return;var r=e.getData();function n(i,o){for(var a=i.getItemModel(o),s=0;s<j4.length;s++){var l=j4[s],u=a.getShallow(l,!0);u!=null&&i.setItemVisual(o,l,u)}}return{dataEach:r.hasItemOption?n:null}}};function bF(e,t,r){switch(r){case"color":var n=e.getItemVisual(t,"style");return n[e.getVisual("drawType")];case"opacity":return e.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getItemVisual(t,r)}}function h_(e,t){switch(t){case"color":var r=e.getVisual("style");return r[e.getVisual("drawType")];case"opacity":return e.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return e.getVisual(t)}}function ant(e,t,r,n){switch(r){case"color":var i=e.ensureUniqueItemVisual(t,"style");i[e.getVisual("drawType")]=n,e.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":e.ensureUniqueItemVisual(t,"style").opacity=n;break;case"symbol":case"symbolSize":case"liftZ":e.setItemVisual(t,r,n);break}}function Wu(e,t,r,n,i){var o=e+t;r.isSilent(o)||n.eachComponent({mainType:"series",subType:"pie"},function(a){for(var s=a.seriesIndex,l=a.option.selectedMap,u=i.selected,c=0;c<u.length;c++)if(u[c].seriesIndex===s){var f=a.getData(),h=Jl(f,i.fromActionPayload);r.trigger(o,{type:o,seriesId:a.id,name:ct(h)?f.getName(h[0]):f.getName(h),selected:Mt(l)?l:at({},l)})}})}function snt(e,t,r){e.on("selectchanged",function(n){var i=r.getModel();n.isFromClick?(Wu("map","selectchanged",t,i,n),Wu("pie","selectchanged",t,i,n)):n.fromAction==="select"?(Wu("map","selected",t,i,n),Wu("pie","selected",t,i,n)):n.fromAction==="unselect"&&(Wu("map","unselected",t,i,n),Wu("pie","unselected",t,i,n))})}function Sc(e,t,r){for(var n;e&&!(t(e)&&(n=e,r));)e=e.__hostTarget||e.parent;return n}var lnt=Math.round(Math.random()*9),unt=typeof Object.defineProperty=="function",cnt=function(){function e(){this._id="__ec_inner_"+lnt++}return e.prototype.get=function(t){return this._guard(t)[this._id]},e.prototype.set=function(t,r){var n=this._guard(t);return unt?Object.defineProperty(n,this._id,{value:r,enumerable:!1,configurable:!0}):n[this._id]=r,this},e.prototype.delete=function(t){return this.has(t)?(delete this._guard(t)[this._id],!0):!1},e.prototype.has=function(t){return!!this._guard(t)[this._id]},e.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},e}();const fnt=cnt;var hnt=de.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n+o),e.lineTo(r-i,n+o),e.closePath()}}),dnt=de.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var r=t.cx,n=t.cy,i=t.width/2,o=t.height/2;e.moveTo(r,n-o),e.lineTo(r+i,n),e.lineTo(r,n+o),e.lineTo(r-i,n),e.closePath()}}),pnt=de.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.x,n=t.y,i=t.width/5*3,o=Math.max(i,t.height),a=i/2,s=a*a/(o-a),l=n-o+a+s,u=Math.asin(s/a),c=Math.cos(u)*a,f=Math.sin(u),h=Math.cos(u),d=a*.6,p=a*.7;e.moveTo(r-c,l+s),e.arc(r,l,a,Math.PI-u,Math.PI*2+u),e.bezierCurveTo(r+c-f*d,l+s+h*d,r,n-p,r,n),e.bezierCurveTo(r,n-p,r-c+f*d,l+s+h*d,r-c,l+s),e.closePath()}}),vnt=de.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var r=t.height,n=t.width,i=t.x,o=t.y,a=n/3*2;e.moveTo(i,o),e.lineTo(i+a,o+r),e.lineTo(i,o+r/4*3),e.lineTo(i-a,o+r),e.lineTo(i,o),e.closePath()}}),gnt={line:xs,rect:Qe,roundRect:Qe,square:Qe,circle:qk,diamond:dnt,pin:pnt,arrow:vnt,triangle:hnt},mnt={line:function(e,t,r,n,i){i.x1=e,i.y1=t+n/2,i.x2=e+r,i.y2=t+n/2},rect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n},roundRect:function(e,t,r,n,i){i.x=e,i.y=t,i.width=r,i.height=n,i.r=Math.min(r,n)/4},square:function(e,t,r,n,i){var o=Math.min(r,n);i.x=e,i.y=t,i.width=o,i.height=o},circle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.r=Math.min(r,n)/2},diamond:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n},pin:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},arrow:function(e,t,r,n,i){i.x=e+r/2,i.y=t+n/2,i.width=r,i.height=n},triangle:function(e,t,r,n,i){i.cx=e+r/2,i.cy=t+n/2,i.width=r,i.height=n}},a3={};$(gnt,function(e,t){a3[t]=new e});var _nt=de.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,r){var n=Im(e,t,r),i=this.shape;return i&&i.symbolType==="pin"&&t.position==="inside"&&(n.y=r.y+r.height*.4),n},buildPath:function(e,t,r){var n=t.symbolType;if(n!=="none"){var i=a3[n];i||(n="rect",i=a3[n]),mnt[n](t.x,t.y,t.width,t.height,i.shape),i.buildPath(e,i.shape,r)}}});function ynt(e,t){if(this.type!=="image"){var r=this.style;this.__isEmptyBrush?(r.stroke=e,r.fill=t||"#fff",r.lineWidth=2):this.shape.symbolType==="line"?r.stroke=e:r.fill=e,this.markRedraw()}}function zi(e,t,r,n,i,o,a){var s=e.indexOf("empty")===0;s&&(e=e.substr(5,1).toLowerCase()+e.substr(6));var l;return e.indexOf("image://")===0?l=hN(e.slice(8),new le(t,r,n,i),a?"center":"cover"):e.indexOf("path://")===0?l=K1(e.slice(7),{},new le(t,r,n,i),a?"center":"cover"):l=new _nt({shape:{symbolType:e,x:t,y:r,width:n,height:i}}),l.__isEmptyBrush=s,l.setColor=ynt,o&&l.setColor(o),l}function wF(e){return ct(e)||(e=[+e,+e]),[e[0]||0,e[1]||0]}function mP(e,t){if(e!=null)return ct(e)||(e=[e,e]),[je(e[0],t[0])||0,je(Zt(e[1],e[0]),t[1])||0]}function Il(e){return isFinite(e)}function bnt(e,t,r){var n=t.x==null?0:t.x,i=t.x2==null?1:t.x2,o=t.y==null?0:t.y,a=t.y2==null?0:t.y2;t.global||(n=n*r.width+r.x,i=i*r.width+r.x,o=o*r.height+r.y,a=a*r.height+r.y),n=Il(n)?n:0,i=Il(i)?i:1,o=Il(o)?o:0,a=Il(a)?a:0;var s=e.createLinearGradient(n,o,i,a);return s}function wnt(e,t,r){var n=r.width,i=r.height,o=Math.min(n,i),a=t.x==null?.5:t.x,s=t.y==null?.5:t.y,l=t.r==null?.5:t.r;t.global||(a=a*n+r.x,s=s*i+r.y,l=l*o),a=Il(a)?a:.5,s=Il(s)?s:.5,l=l>=0&&Il(l)?l:.5;var u=e.createRadialGradient(a,s,0,a,s,l);return u}function s3(e,t,r){for(var n=t.type==="radial"?wnt(e,t,r):bnt(e,t,r),i=t.colorStops,o=0;o<i.length;o++)n.addColorStop(i[o].offset,i[o].color);return n}function Snt(e,t){if(e===t||!e&&!t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!0;return!1}function X0(e){return parseInt(e,10)}function Y0(e,t,r){var n=["width","height"][t],i=["clientWidth","clientHeight"][t],o=["paddingLeft","paddingTop"][t],a=["paddingRight","paddingBottom"][t];if(r[n]!=null&&r[n]!=="auto")return parseFloat(r[n]);var s=document.defaultView.getComputedStyle(e);return(e[i]||X0(s[n])||X0(e.style[n]))-(X0(s[o])||0)-(X0(s[a])||0)|0}function Tnt(e,t){return!e||e==="solid"||!(t>0)?null:e==="dashed"?[4*t,2*t]:e==="dotted"?[t]:Se(e)?[e]:ct(e)?e:null}function SF(e){var t=e.style,r=t.lineDash&&t.lineWidth>0&&Tnt(t.lineDash,t.lineWidth),n=t.lineDashOffset;if(r){var i=t.strokeNoScale&&e.getLineScale?e.getLineScale():1;i&&i!==1&&(r=Lt(r,function(o){return o/i}),n/=i)}return[r,n]}var knt=new Ql(!0);function Um(e){var t=e.stroke;return!(t==null||t==="none"||!(e.lineWidth>0))}function H4(e){return typeof e=="string"&&e!=="none"}function Wm(e){var t=e.fill;return t!=null&&t!=="none"}function X4(e,t){if(t.fillOpacity!=null&&t.fillOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.fillOpacity*t.opacity,e.fill(),e.globalAlpha=r}else e.fill()}function Y4(e,t){if(t.strokeOpacity!=null&&t.strokeOpacity!==1){var r=e.globalAlpha;e.globalAlpha=t.strokeOpacity*t.opacity,e.stroke(),e.globalAlpha=r}else e.stroke()}function l3(e,t,r){var n=P9(t.image,t.__image,r);if(H1(n)){var i=e.createPattern(n,t.repeat||"repeat");if(typeof DOMMatrix=="function"&&i&&i.setTransform){var o=new DOMMatrix;o.translateSelf(t.x||0,t.y||0),o.rotateSelf(0,0,(t.rotation||0)*xZ),o.scaleSelf(t.scaleX||1,t.scaleY||1),i.setTransform(o)}return i}}function Pnt(e,t,r,n){var i,o=Um(r),a=Wm(r),s=r.strokePercent,l=s<1,u=!t.path;(!t.silent||l)&&u&&t.createPathProxy();var c=t.path||knt,f=t.__dirty;if(!n){var h=r.fill,d=r.stroke,p=a&&!!h.colorStops,v=o&&!!d.colorStops,m=a&&!!h.image,g=o&&!!d.image,_=void 0,b=void 0,w=void 0,T=void 0,S=void 0;(p||v)&&(S=t.getBoundingRect()),p&&(_=f?s3(e,h,S):t.__canvasFillGradient,t.__canvasFillGradient=_),v&&(b=f?s3(e,d,S):t.__canvasStrokeGradient,t.__canvasStrokeGradient=b),m&&(w=f||!t.__canvasFillPattern?l3(e,h,t):t.__canvasFillPattern,t.__canvasFillPattern=w),g&&(T=f||!t.__canvasStrokePattern?l3(e,d,t):t.__canvasStrokePattern,t.__canvasStrokePattern=w),p?e.fillStyle=_:m&&(w?e.fillStyle=w:a=!1),v?e.strokeStyle=b:g&&(T?e.strokeStyle=T:o=!1)}var k=t.getGlobalScale();c.setScale(k[0],k[1],t.segmentIgnoreThreshold);var C,E;e.setLineDash&&r.lineDash&&(i=SF(t),C=i[0],E=i[1]);var M=!0;(u||f&pc)&&(c.setDPR(e.dpr),l?c.setContext(null):(c.setContext(e),M=!1),c.reset(),t.buildPath(c,t.shape,n),c.toStatic(),t.pathUpdated()),M&&c.rebuildPath(e,l?s:1),C&&(e.setLineDash(C),e.lineDashOffset=E),n||(r.strokeFirst?(o&&Y4(e,r),a&&X4(e,r)):(a&&X4(e,r),o&&Y4(e,r))),C&&e.setLineDash([])}function Ent(e,t,r){var n=t.__image=P9(r.image,t.__image,t,t.onload);if(!(!n||!H1(n))){var i=r.x||0,o=r.y||0,a=t.getWidth(),s=t.getHeight(),l=n.width/n.height;if(a==null&&s!=null?a=s*l:s==null&&a!=null?s=a/l:a==null&&s==null&&(a=n.width,s=n.height),r.sWidth&&r.sHeight){var u=r.sx||0,c=r.sy||0;e.drawImage(n,u,c,r.sWidth,r.sHeight,i,o,a,s)}else if(r.sx&&r.sy){var u=r.sx,c=r.sy,f=a-u,h=s-c;e.drawImage(n,u,c,f,h,i,o,a,s)}else e.drawImage(n,i,o,a,s)}}function Cnt(e,t,r){var n,i=r.text;if(i!=null&&(i+=""),i){e.font=r.font||Zl,e.textAlign=r.textAlign,e.textBaseline=r.textBaseline;var o=void 0,a=void 0;e.setLineDash&&r.lineDash&&(n=SF(t),o=n[0],a=n[1]),o&&(e.setLineDash(o),e.lineDashOffset=a),r.strokeFirst?(Um(r)&&e.strokeText(i,r.x,r.y),Wm(r)&&e.fillText(i,r.x,r.y)):(Wm(r)&&e.fillText(i,r.x,r.y),Um(r)&&e.strokeText(i,r.x,r.y)),o&&e.setLineDash([])}}var q4=["shadowBlur","shadowOffsetX","shadowOffsetY"],Z4=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function TF(e,t,r,n,i){var o=!1;if(!n&&(r=r||{},t===r))return!1;if(n||t.opacity!==r.opacity){vn(e,i),o=!0;var a=Math.max(Math.min(t.opacity,1),0);e.globalAlpha=isNaN(a)?zl.opacity:a}(n||t.blend!==r.blend)&&(o||(vn(e,i),o=!0),e.globalCompositeOperation=t.blend||zl.blend);for(var s=0;s<q4.length;s++){var l=q4[s];(n||t[l]!==r[l])&&(o||(vn(e,i),o=!0),e[l]=e.dpr*(t[l]||0))}return(n||t.shadowColor!==r.shadowColor)&&(o||(vn(e,i),o=!0),e.shadowColor=t.shadowColor||zl.shadowColor),o}function K4(e,t,r,n,i){var o=ap(t,i.inHover),a=n?null:r&&ap(r,i.inHover)||{};if(o===a)return!1;var s=TF(e,o,a,n,i);if((n||o.fill!==a.fill)&&(s||(vn(e,i),s=!0),H4(o.fill)&&(e.fillStyle=o.fill)),(n||o.stroke!==a.stroke)&&(s||(vn(e,i),s=!0),H4(o.stroke)&&(e.strokeStyle=o.stroke)),(n||o.opacity!==a.opacity)&&(s||(vn(e,i),s=!0),e.globalAlpha=o.opacity==null?1:o.opacity),t.hasStroke()){var l=o.lineWidth,u=l/(o.strokeNoScale&&t.getLineScale?t.getLineScale():1);e.lineWidth!==u&&(s||(vn(e,i),s=!0),e.lineWidth=u)}for(var c=0;c<Z4.length;c++){var f=Z4[c],h=f[0];(n||o[h]!==a[h])&&(s||(vn(e,i),s=!0),e[h]=o[h]||f[1])}return s}function Ant(e,t,r,n,i){return TF(e,ap(t,i.inHover),r&&ap(r,i.inHover),n,i)}function kF(e,t){var r=t.transform,n=e.dpr||1;r?e.setTransform(n*r[0],n*r[1],n*r[2],n*r[3],n*r[4],n*r[5]):e.setTransform(n,0,0,n,0,0)}function Mnt(e,t,r){for(var n=!1,i=0;i<e.length;i++){var o=e[i];n=n||o.isZeroArea(),kF(t,o),t.beginPath(),o.buildPath(t,o.shape),t.clip()}r.allClipped=n}function xnt(e,t){return e&&t?e[0]!==t[0]||e[1]!==t[1]||e[2]!==t[2]||e[3]!==t[3]||e[4]!==t[4]||e[5]!==t[5]:!(!e&&!t)}var J4=1,Q4=2,t5=3,e5=4;function Lnt(e){var t=Wm(e),r=Um(e);return!(e.lineDash||!(+t^+r)||t&&typeof e.fill!="string"||r&&typeof e.stroke!="string"||e.strokePercent<1||e.strokeOpacity<1||e.fillOpacity<1)}function vn(e,t){t.batchFill&&e.fill(),t.batchStroke&&e.stroke(),t.batchFill="",t.batchStroke=""}function ap(e,t){return t&&e.__hoverStyle||e.style}function PF(e,t){Ol(e,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ol(e,t,r,n){var i=t.transform;if(!t.shouldBePainted(r.viewWidth,r.viewHeight,!1,!1)){t.__dirty&=~Mn,t.__isRendered=!1;return}var o=t.__clipPaths,a=r.prevElClipPaths,s=!1,l=!1;if((!a||Snt(o,a))&&(a&&a.length&&(vn(e,r),e.restore(),l=s=!0,r.prevElClipPaths=null,r.allClipped=!1,r.prevEl=null),o&&o.length&&(vn(e,r),e.save(),Mnt(o,e,r),s=!0),r.prevElClipPaths=o),r.allClipped){t.__isRendered=!1;return}t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var u=r.prevEl;u||(l=s=!0);var c=t instanceof de&&t.autoBatch&&Lnt(t.style);s||xnt(i,u.transform)?(vn(e,r),kF(e,t)):c||vn(e,r);var f=ap(t,r.inHover);t instanceof de?(r.lastDrawType!==J4&&(l=!0,r.lastDrawType=J4),K4(e,t,u,l,r),(!c||!r.batchFill&&!r.batchStroke)&&e.beginPath(),Pnt(e,t,f,c),c&&(r.batchFill=f.fill||"",r.batchStroke=f.stroke||"")):t instanceof US?(r.lastDrawType!==t5&&(l=!0,r.lastDrawType=t5),K4(e,t,u,l,r),Cnt(e,t,f)):t instanceof Ea?(r.lastDrawType!==Q4&&(l=!0,r.lastDrawType=Q4),Ant(e,t,u,l,r),Ent(e,t,f)):t.getTemporalDisplayables&&(r.lastDrawType!==e5&&(l=!0,r.lastDrawType=e5),Int(e,t,r)),c&&n&&vn(e,r),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),r.prevEl=t,t.__dirty=0,t.__isRendered=!0}function Int(e,t,r){var n=t.getDisplayables(),i=t.getTemporalDisplayables();e.save();var o={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:r.viewWidth,viewHeight:r.viewHeight,inHover:r.inHover},a,s;for(a=t.getCursor(),s=n.length;a<s;a++){var l=n[a];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ol(e,l,o,a===s-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}for(var u=0,c=i.length;u<c;u++){var l=i[u];l.beforeBrush&&l.beforeBrush(),l.innerBeforeBrush(),Ol(e,l,o,u===c-1),l.innerAfterBrush(),l.afterBrush&&l.afterBrush(),o.prevEl=l}t.clearTemporalDisplayables(),t.notClear=!0,e.restore()}var p2=new fnt,r5=new xp(100),n5=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Gm(e,t){if(e==="none")return null;var r=t.getDevicePixelRatio(),n=t.getZr(),i=n.painter.type==="svg";e.dirty&&p2.delete(e);var o=p2.get(e);if(o)return o;var a=re(e,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});a.backgroundColor==="none"&&(a.backgroundColor=null);var s={repeat:"repeat"};return l(s),s.rotation=a.rotation,s.scaleX=s.scaleY=i?1:1/r,p2.set(e,s),e.dirty=!1,s;function l(u){for(var c=[r],f=!0,h=0;h<n5.length;++h){var d=a[n5[h]];if(d!=null&&!ct(d)&&!Mt(d)&&!Se(d)&&typeof d!="boolean"){f=!1;break}c.push(d)}var p;if(f){p=c.join(",")+(i?"-svg":"");var v=r5.get(p);v&&(i?u.svgElement=v:u.image=v)}var m=CF(a.dashArrayX),g=Ont(a.dashArrayY),_=EF(a.symbol),b=Rnt(m),w=AF(g),T=!i&&fu.createCanvas(),S=i&&{tag:"g",attrs:{},key:"dcl",children:[]},k=E(),C;T&&(T.width=k.width*r,T.height=k.height*r,C=T.getContext("2d")),M(),f&&r5.put(p,T||S),u.image=T,u.svgElement=S,u.svgWidth=k.width,u.svgHeight=k.height;function E(){for(var x=1,D=0,B=b.length;D<B;++D)x=vM(x,b[D]);for(var V=1,D=0,B=_.length;D<B;++D)V=vM(V,_[D].length);x*=V;var F=w*b.length*_.length;return{width:Math.max(1,Math.min(x,a.maxTileWidth)),height:Math.max(1,Math.min(F,a.maxTileHeight))}}function M(){C&&(C.clearRect(0,0,T.width,T.height),a.backgroundColor&&(C.fillStyle=a.backgroundColor,C.fillRect(0,0,T.width,T.height)));for(var x=0,D=0;D<g.length;++D)x+=g[D];if(x<=0)return;for(var B=-w,V=0,F=0,G=0;B<k.height;){if(V%2===0){for(var Z=F/2%_.length,q=0,et=0,At=0;q<k.width*2;){for(var Dt=0,D=0;D<m[G].length;++D)Dt+=m[G][D];if(Dt<=0)break;if(et%2===0){var Tt=(1-a.symbolSize)*.5,kt=q+m[G][et]*Tt,Xt=B+g[V]*Tt,Y=m[G][et]*a.symbolSize,it=g[V]*a.symbolSize,K=At/2%_[Z].length;vt(kt,Xt,Y,it,_[Z][K])}q+=m[G][et],++At,++et,et===m[G].length&&(et=0)}++G,G===m.length&&(G=0)}B+=g[V],++F,++V,V===g.length&&(V=0)}function vt(Pt,xt,lt,ft,z){var W=i?1:r,X=zi(z,Pt*W,xt*W,lt*W,ft*W,a.color,a.symbolKeepAspect);if(i){var J=n.painter.renderOneToVNode(X);J&&S.children.push(J)}else PF(C,X)}}}}function EF(e){if(!e||e.length===0)return[["rect"]];if(Mt(e))return[[e]];for(var t=!0,r=0;r<e.length;++r)if(!Mt(e[r])){t=!1;break}if(t)return EF([e]);for(var n=[],r=0;r<e.length;++r)Mt(e[r])?n.push([e[r]]):n.push(e[r]);return n}function CF(e){if(!e||e.length===0)return[[0,0]];if(Se(e)){var t=Math.ceil(e);return[[t,t]]}for(var r=!0,n=0;n<e.length;++n)if(!Se(e[n])){r=!1;break}if(r)return CF([e]);for(var i=[],n=0;n<e.length;++n)if(Se(e[n])){var t=Math.ceil(e[n]);i.push([t,t])}else{var t=Lt(e[n],function(s){return Math.ceil(s)});t.length%2===1?i.push(t.concat(t)):i.push(t)}return i}function Ont(e){if(!e||typeof e=="object"&&e.length===0)return[0,0];if(Se(e)){var t=Math.ceil(e);return[t,t]}var r=Lt(e,function(n){return Math.ceil(n)});return e.length%2?r.concat(r):r}function Rnt(e){return Lt(e,function(t){return AF(t)})}function AF(e){for(var t=0,r=0;r<e.length;++r)t+=e[r];return e.length%2===1?t*2:t}function Dnt(e,t){e.eachRawSeries(function(r){if(!e.isSeriesFiltered(r)){var n=r.getData();n.hasItemVisual()&&n.each(function(a){var s=n.getItemVisual(a,"decal");if(s){var l=n.ensureUniqueItemVisual(a,"style");l.decal=Gm(s,t)}});var i=n.getVisual("decal");if(i){var o=n.getVisual("style");o.decal=Gm(i,t)}}})}var Nnt=new Gi;const wi=Nnt;var MF={};function Fnt(e,t){MF[e]=t}function $nt(e){return MF[e]}var Bnt=typeof window<"u",znt=1,Vnt=800,Unt=900,Wnt=1e3,Gnt=2e3,jnt=5e3,xF=1e3,Hnt=1100,_P=2e3,LF=3e3,Xnt=4e3,d_=4500,Ynt=4600,qnt=5e3,Znt=6e3,IF=7e3,Knt={PROCESSOR:{FILTER:Wnt,SERIES_FILTER:Vnt,STATISTIC:jnt},VISUAL:{LAYOUT:xF,PROGRESSIVE_LAYOUT:Hnt,GLOBAL:_P,CHART:LF,POST_CHART_LAYOUT:Ynt,COMPONENT:Xnt,BRUSH:qnt,CHART_ITEM:d_,ARIA:Znt,DECAL:IF}},Nr="__flagInMainProcess",fn="__pendingUpdate",v2="__needsUpdateStatus",i5=/^[a-zA-Z0-9_]+$/,g2="__connectUpdateStatus",o5=0,Jnt=1,Qnt=2;function OF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(this.isDisposed()){this.id;return}return DF(this,e,t)}}function RF(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return DF(this,e,t)}}function DF(e,t,r){return r[0]=r[0]&&r[0].toLowerCase(),Gi.prototype[t].apply(e,r)}var NF=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(Gi),FF=NF.prototype;FF.on=RF("on");FF.off=RF("off");var Gu,m2,q0,Ba,_2,y2,b2,lh,uh,a5,s5,w2,l5,Z0,u5,$F,zn,c5,BF=function(e){yt(t,e);function t(r,n,i){var o=e.call(this,new nnt)||this;o._chartsViews=[],o._chartsMap={},o._componentsViews=[],o._componentsMap={},o._pendingActions=[],i=i||{},Mt(n)&&(n=zF[n]),o._dom=r;var a="canvas",s="auto",l=!1,u=o._zr=hM(r,{renderer:i.renderer||a,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:Zt(i.useDirtyRect,l),useCoarsePointer:Zt(i.useCoarsePointer,s),pointerSize:i.pointerSize});o._ssr=i.ssr,o._throttledZrFlush=f_(Vt(u.flush,u),17),n=zt(n),n&&GN(n,!0),o._theme=n,o._locale=eet(i.locale||wN),o._coordSysMgr=new uP;var c=o._api=u5(o);function f(h,d){return h.__prio-d.__prio}return Fg(Hm,f),Fg(u3,f),o._scheduler=new _F(o,c,u3,Hm),o._messageCenter=new NF,o._initEvents(),o.resize=Vt(o.resize,o),u.animation.on("frame",o._onframe,o),a5(u,o),s5(u,o),Pm(o),o}return t.prototype._onframe=function(){if(!this._disposed){c5(this);var r=this._scheduler;if(this[fn]){var n=this[fn].silent;this[Nr]=!0;try{Gu(this),Ba.update.call(this,null,this[fn].updateParams)}catch(l){throw this[Nr]=!1,this[fn]=null,l}this._zr.flush(),this[Nr]=!1,this[fn]=null,lh.call(this,n),uh.call(this,n)}else if(r.unfinished){var i=znt,o=this._model,a=this._api;r.unfinished=!1;do{var s=+new Date;r.performSeriesTasks(o),r.performDataProcessorTasks(o),y2(this,o),r.performVisualTasks(o),Z0(this,this._model,a,"remain",{}),i-=+new Date-s}while(i>0&&r.unfinished);r.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(r,n,i){if(!this[Nr]){if(this._disposed){this.id;return}var o,a,s;if(Rt(n)&&(i=n.lazyUpdate,o=n.silent,a=n.replaceMerge,s=n.transition,n=n.notMerge),this[Nr]=!0,!this._model||n){var l=new $et(this._api),u=this._theme,c=this._model=new VN;c.scheduler=this._scheduler,c.ssr=this._ssr,c.init(null,null,null,u,this._locale,l)}this._model.setOption(r,{replaceMerge:a},c3);var f={seriesTransition:s,optionChanged:!0};if(i)this[fn]={silent:o,updateParams:f},this[Nr]=!1,this.getZr().wakeUp();else{try{Gu(this),Ba.update.call(this,null,f)}catch(h){throw this[fn]=null,this[Nr]=!1,h}this._ssr||this._zr.flush(),this[fn]=null,this[Nr]=!1,lh.call(this,o),uh.call(this,o)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||Bnt&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(r){return this.renderToCanvas(r)},t.prototype.renderToCanvas=function(r){r=r||{};var n=this._zr.painter;return n.getRenderedCanvas({backgroundColor:r.backgroundColor||this._model.get("backgroundColor"),pixelRatio:r.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(r){r=r||{};var n=this._zr.painter;return n.renderToString({useViewBox:r.useViewBox})},t.prototype.getSvgDataURL=function(){if(!!Yt.svgSupported){var r=this._zr,n=r.storage.getDisplayList();return $(n,function(i){i.stopAnimation(null,!0)}),r.painter.toDataURL()}},t.prototype.getDataURL=function(r){if(this._disposed){this.id;return}r=r||{};var n=r.excludeComponents,i=this._model,o=[],a=this;$(n,function(l){i.eachComponent({mainType:l},function(u){var c=a._componentsMap[u.__viewId];c.group.ignore||(o.push(c),c.group.ignore=!0)})});var s=this._zr.painter.getType()==="svg"?this.getSvgDataURL():this.renderToCanvas(r).toDataURL("image/"+(r&&r.type||"png"));return $(o,function(l){l.group.ignore=!1}),s},t.prototype.getConnectedDataURL=function(r){if(this._disposed){this.id;return}var n=r.type==="svg",i=this.group,o=Math.min,a=Math.max,s=1/0;if(f5[i]){var l=s,u=s,c=-s,f=-s,h=[],d=r&&r.pixelRatio||this.getDevicePixelRatio();$(Ed,function(b,w){if(b.group===i){var T=n?b.getZr().painter.getSvgDom().innerHTML:b.renderToCanvas(zt(r)),S=b.getDom().getBoundingClientRect();l=o(S.left,l),u=o(S.top,u),c=a(S.right,c),f=a(S.bottom,f),h.push({dom:T,left:S.left,top:S.top})}}),l*=d,u*=d,c*=d,f*=d;var p=c-l,v=f-u,m=fu.createCanvas(),g=hM(m,{renderer:n?"svg":"canvas"});if(g.resize({width:p,height:v}),n){var _="";return $(h,function(b){var w=b.left-l,T=b.top-u;_+='<g transform="translate('+w+","+T+')">'+b.dom+"</g>"}),g.painter.getSvgRoot().innerHTML=_,r.connectedBackgroundColor&&g.painter.setBackgroundColor(r.connectedBackgroundColor),g.refreshImmediately(),g.painter.toDataURL()}else return r.connectedBackgroundColor&&g.add(new Qe({shape:{x:0,y:0,width:p,height:v},style:{fill:r.connectedBackgroundColor}})),$(h,function(b){var w=new Ea({style:{x:b.left*d-l,y:b.top*d-u,image:b.dom}});g.add(w)}),g.refreshImmediately(),m.toDataURL("image/"+(r&&r.type||"png"))}else return this.getDataURL(r)},t.prototype.convertToPixel=function(r,n){return _2(this,"convertToPixel",r,n)},t.prototype.convertFromPixel=function(r,n){return _2(this,"convertFromPixel",r,n)},t.prototype.containPixel=function(r,n){if(this._disposed){this.id;return}var i=this._model,o,a=Vy(i,r);return $(a,function(s,l){l.indexOf("Models")>=0&&$(s,function(u){var c=u.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(n);else if(l==="seriesModels"){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(o=o||f.containPoint(n,u))}},this)},this),!!o},t.prototype.getVisual=function(r,n){var i=this._model,o=Vy(i,r,{defaultMainType:"series"}),a=o.seriesModel,s=a.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return l!=null?bF(s,l,n):h_(s,n)},t.prototype.getViewOfComponentModel=function(r){return this._componentsMap[r.__viewId]},t.prototype.getViewOfSeriesModel=function(r){return this._chartsMap[r.__viewId]},t.prototype._initEvents=function(){var r=this;$(tit,function(n){var i=function(o){var a=r.getModel(),s=o.target,l,u=n==="globalout";if(u?l={}:s&&Sc(s,function(p){var v=ae(p);if(v&&v.dataIndex!=null){var m=v.dataModel||a.getSeriesByIndex(v.seriesIndex);return l=m&&m.getDataParams(v.dataIndex,v.dataType)||{},!0}else if(v.eventData)return l=at({},v.eventData),!0},!0),l){var c=l.componentType,f=l.componentIndex;(c==="markLine"||c==="markPoint"||c==="markArea")&&(c="series",f=l.seriesIndex);var h=c&&f!=null&&a.getComponent(c,f),d=h&&r[h.mainType==="series"?"_chartsMap":"_componentsMap"][h.__viewId];l.event=o,l.type=n,r._$eventProcessor.eventInfo={targetEl:s,packedEvent:l,model:h,view:d},r.trigger(n,l)}};i.zrEventfulCallAtLast=!0,r._zr.on(n,i,r)}),$(Pd,function(n,i){r._messageCenter.on(i,function(o){this.trigger(i,o)},r)}),$(["selectchanged"],function(n){r._messageCenter.on(n,function(i){this.trigger(n,i)},r)}),snt(this._messageCenter,this,this._api)},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){if(this._disposed){this.id;return}this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed){this.id;return}this._disposed=!0;var r=this.getDom();r&&S9(this.getDom(),bP,"");var n=this,i=n._api,o=n._model;$(n._componentsViews,function(a){a.dispose(o,i)}),$(n._chartsViews,function(a){a.dispose(o,i)}),n._zr.dispose(),n._dom=n._model=n._chartsMap=n._componentsMap=n._chartsViews=n._componentsViews=n._scheduler=n._api=n._zr=n._throttledZrFlush=n._theme=n._coordSysMgr=n._messageCenter=null,delete Ed[n.id]},t.prototype.resize=function(r){if(!this[Nr]){if(this._disposed){this.id;return}this._zr.resize(r);var n=this._model;if(this._loadingFX&&this._loadingFX.resize(),!!n){var i=n.resetOption("media"),o=r&&r.silent;this[fn]&&(o==null&&(o=this[fn].silent),i=!0,this[fn]=null),this[Nr]=!0;try{i&&Gu(this),Ba.update.call(this,{type:"resize",animation:at({duration:0},r&&r.animation)})}catch(a){throw this[Nr]=!1,a}this[Nr]=!1,lh.call(this,o),uh.call(this,o)}}},t.prototype.showLoading=function(r,n){if(this._disposed){this.id;return}if(Rt(r)&&(n=r,r=""),r=r||"default",this.hideLoading(),!!f3[r]){var i=f3[r](this._api,n),o=this._zr;this._loadingFX=i,o.add(i)}},t.prototype.hideLoading=function(){if(this._disposed){this.id;return}this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},t.prototype.makeActionFromEvent=function(r){var n=at({},r);return n.type=Pd[r.type],n},t.prototype.dispatchAction=function(r,n){if(this._disposed){this.id;return}if(Rt(n)||(n={silent:!!n}),!!jm[r.type]&&!!this._model){if(this[Nr]){this._pendingActions.push(r);return}var i=n.silent;b2.call(this,r,i);var o=n.flush;o?this._zr.flush():o!==!1&&Yt.browser.weChat&&this._throttledZrFlush(),lh.call(this,i),uh.call(this,i)}},t.prototype.updateLabelLayout=function(){wi.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(r){if(this._disposed){this.id;return}var n=r.seriesIndex,i=this.getModel(),o=i.getSeriesByIndex(n);o.appendData(r),this._scheduler.unfinished=!0,this.getZr().wakeUp()},t.internalField=function(){Gu=function(f){var h=f._scheduler;h.restorePipelines(f._model),h.prepareStageTasks(),m2(f,!0),m2(f,!1),h.plan()},m2=function(f,h){for(var d=f._model,p=f._scheduler,v=h?f._componentsViews:f._chartsViews,m=h?f._componentsMap:f._chartsMap,g=f._zr,_=f._api,b=0;b<v.length;b++)v[b].__alive=!1;h?d.eachComponent(function(S,k){S!=="series"&&w(k)}):d.eachSeries(w);function w(S){var k=S.__requireNewView;S.__requireNewView=!1;var C="_ec_"+S.id+"_"+S.type,E=!k&&m[C];if(!E){var M=Po(S.type),x=h?li.getClass(M.main,M.sub):ni.getClass(M.sub);E=new x,E.init(d,_),m[C]=E,v.push(E),g.add(E.group)}S.__viewId=E.__id=C,E.__alive=!0,E.__model=S,E.group.__ecComponentInfo={mainType:S.mainType,index:S.componentIndex},!h&&p.prepareView(E,S,d,_)}for(var b=0;b<v.length;){var T=v[b];T.__alive?b++:(!h&&T.renderTask.dispose(),g.remove(T.group),T.dispose(d,_),v.splice(b,1),m[T.__id]===T&&delete m[T.__id],T.__id=T.group.__ecComponentInfo=null)}},q0=function(f,h,d,p,v){var m=f._model;if(m.setUpdatePayload(d),!p){$([].concat(f._componentsViews).concat(f._chartsViews),T);return}var g={};g[p+"Id"]=d[p+"Id"],g[p+"Index"]=d[p+"Index"],g[p+"Name"]=d[p+"Name"];var _={mainType:p,query:g};v&&(_.subType=v);var b=d.excludeSeriesId,w;b!=null&&(w=jt(),$(Je(b),function(S){var k=ri(S,null);k!=null&&w.set(k,!0)})),m&&m.eachComponent(_,function(S){var k=w&&w.get(S.id)!==null;if(!k)if(GM(d))if(S instanceof Oo)d.type===Vl&&!d.notBlur&&!S.get(["emphasis","disabled"])&&NQ(S,d,f._api);else{var C=Xk(S.mainType,S.componentIndex,d.name,f._api),E=C.focusSelf,M=C.dispatchers;d.type===Vl&&E&&!d.notBlur&&jS(S.mainType,S.componentIndex,f._api),M&&$(M,function(x){d.type===Vl?Zd(x):Kd(x)})}else YS(d)&&S instanceof Oo&&(BQ(S,d,f._api),UM(S),zn(f))},f),m&&m.eachComponent(_,function(S){var k=w&&w.get(S.id)!==null;k||T(f[p==="series"?"_chartsMap":"_componentsMap"][S.__viewId])},f);function T(S){S&&S.__alive&&S[h]&&S[h](S.__model,m,f._api,d)}},Ba={prepareAndUpdate:function(f){Gu(this),Ba.update.call(this,f,{optionChanged:f.newOption!=null})},update:function(f,h){var d=this._model,p=this._api,v=this._zr,m=this._coordSysMgr,g=this._scheduler;if(!!d){d.setUpdatePayload(f),g.restoreData(d,f),g.performSeriesTasks(d),m.create(d,p),g.performDataProcessorTasks(d,f),y2(this,d),m.update(d,p),r(d),g.performVisualTasks(d,f),w2(this,d,p,f,h);var _=d.get("backgroundColor")||"transparent",b=d.get("darkMode");v.setBackgroundColor(_),b!=null&&b!=="auto"&&v.setDarkMode(b),wi.trigger("afterupdate",d,p)}},updateTransform:function(f){var h=this,d=this._model,p=this._api;if(!!d){d.setUpdatePayload(f);var v=[];d.eachComponent(function(g,_){if(g!=="series"){var b=h.getViewOfComponentModel(_);if(b&&b.__alive)if(b.updateTransform){var w=b.updateTransform(_,d,p,f);w&&w.update&&v.push(b)}else v.push(b)}});var m=jt();d.eachSeries(function(g){var _=h._chartsMap[g.__viewId];if(_.updateTransform){var b=_.updateTransform(g,d,p,f);b&&b.update&&m.set(g.uid,1)}else m.set(g.uid,1)}),r(d),this._scheduler.performVisualTasks(d,f,{setDirty:!0,dirtyMap:m}),Z0(this,d,p,f,{},m),wi.trigger("afterupdate",d,p)}},updateView:function(f){var h=this._model;!h||(h.setUpdatePayload(f),ni.markUpdateMethod(f,"updateView"),r(h),this._scheduler.performVisualTasks(h,f,{setDirty:!0}),w2(this,h,this._api,f,{}),wi.trigger("afterupdate",h,this._api))},updateVisual:function(f){var h=this,d=this._model;!d||(d.setUpdatePayload(f),d.eachSeries(function(p){p.getData().clearAllVisual()}),ni.markUpdateMethod(f,"updateVisual"),r(d),this._scheduler.performVisualTasks(d,f,{visualType:"visual",setDirty:!0}),d.eachComponent(function(p,v){if(p!=="series"){var m=h.getViewOfComponentModel(v);m&&m.__alive&&m.updateVisual(v,d,h._api,f)}}),d.eachSeries(function(p){var v=h._chartsMap[p.__viewId];v.updateVisual(p,d,h._api,f)}),wi.trigger("afterupdate",d,this._api))},updateLayout:function(f){Ba.update.call(this,f)}},_2=function(f,h,d,p){if(f._disposed){f.id;return}for(var v=f._model,m=f._coordSysMgr.getCoordinateSystems(),g,_=Vy(v,d),b=0;b<m.length;b++){var w=m[b];if(w[h]&&(g=w[h](v,_,p))!=null)return g}},y2=function(f,h){var d=f._chartsMap,p=f._scheduler;h.eachSeries(function(v){p.updateStreamModes(v,d[v.__viewId])})},b2=function(f,h){var d=this,p=this.getModel(),v=f.type,m=f.escapeConnect,g=jm[v],_=g.actionInfo,b=(_.update||"update").split(":"),w=b.pop(),T=b[0]!=null&&Po(b[0]);this[Nr]=!0;var S=[f],k=!1;f.batch&&(k=!0,S=Lt(f.batch,function(V){return V=re(at({},V),f),V.batch=null,V}));var C=[],E,M=YS(f),x=GM(f);if(x&&j9(this._api),$(S,function(V){if(E=g.action(V,d._model,d._api),E=E||at({},V),E.type=_.event||E.type,C.push(E),x){var F=zk(f),G=F.queryOptionMap,Z=F.mainTypeSpecified,q=Z?G.keys()[0]:"series";q0(d,w,V,q),zn(d)}else M?(q0(d,w,V,"series"),zn(d)):T&&q0(d,w,V,T.main,T.sub)}),w!=="none"&&!x&&!M&&!T)try{this[fn]?(Gu(this),Ba.update.call(this,f),this[fn]=null):Ba[w].call(this,f)}catch(V){throw this[Nr]=!1,V}if(k?E={type:_.event||v,escapeConnect:m,batch:C}:E=C[0],this[Nr]=!1,!h){var D=this._messageCenter;if(D.trigger(E.type,E),M){var B={type:"selectchanged",escapeConnect:m,selected:zQ(p),isFromClick:f.isFromClick||!1,fromAction:f.type,fromActionPayload:f};D.trigger(B.type,B)}}},lh=function(f){for(var h=this._pendingActions;h.length;){var d=h.shift();b2.call(this,d,f)}},uh=function(f){!f&&this.trigger("updated")},a5=function(f,h){f.on("rendered",function(d){h.trigger("rendered",d),f.animation.isFinished()&&!h[fn]&&!h._scheduler.unfinished&&!h._pendingActions.length&&h.trigger("finished")})},s5=function(f,h){f.on("mouseover",function(d){var p=d.target,v=Sc(p,XS);v&&(FQ(v,d,h._api),zn(h))}).on("mouseout",function(d){var p=d.target,v=Sc(p,XS);v&&($Q(v,d,h._api),zn(h))}).on("click",function(d){var p=d.target,v=Sc(p,function(_){return ae(_).dataIndex!=null},!0);if(v){var m=v.selected?"unselect":"select",g=ae(v);h._api.dispatchAction({type:m,dataType:g.dataType,dataIndexInside:g.dataIndex,seriesIndex:g.seriesIndex,isFromClick:!0})}})};function r(f){f.clearColorPalette(),f.eachSeries(function(h){h.clearColorPalette()})}function n(f){var h=[],d=[],p=!1;if(f.eachComponent(function(_,b){var w=b.get("zlevel")||0,T=b.get("z")||0,S=b.getZLevelKey();p=p||!!S,(_==="series"?d:h).push({zlevel:w,z:T,idx:b.componentIndex,type:_,key:S})}),p){var v=h.concat(d),m,g;Fg(v,function(_,b){return _.zlevel===b.zlevel?_.z-b.z:_.zlevel-b.zlevel}),$(v,function(_){var b=f.getComponent(_.type,_.idx),w=_.zlevel,T=_.key;m!=null&&(w=Math.max(m,w)),T?(w===m&&T!==g&&w++,g=T):g&&(w===m&&w++,g=""),m=w,b.setZLevel(w)})}}w2=function(f,h,d,p,v){n(h),l5(f,h,d,p,v),$(f._chartsViews,function(m){m.__alive=!1}),Z0(f,h,d,p,v),$(f._chartsViews,function(m){m.__alive||m.remove(h,d)})},l5=function(f,h,d,p,v,m){$(m||f._componentsViews,function(g){var _=g.__model;u(_,g),g.render(_,h,d,p),s(_,g),c(_,g)})},Z0=function(f,h,d,p,v,m){var g=f._scheduler;v=at(v||{},{updatedSeries:h.getSeries()}),wi.trigger("series:beforeupdate",h,d,v);var _=!1;h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];w.__alive=!0;var T=w.renderTask;g.updatePayload(T,p),u(b,w),m&&m.get(b.uid)&&T.dirty(),T.perform(g.getPerformArgs(T))&&(_=!0),w.group.silent=!!b.get("silent"),a(b,w),UM(b)}),g.unfinished=_||g.unfinished,wi.trigger("series:layoutlabels",h,d,v),wi.trigger("series:transition",h,d,v),h.eachSeries(function(b){var w=f._chartsMap[b.__viewId];s(b,w),c(b,w)}),o(f,h),wi.trigger("series:afterupdate",h,d,v)},zn=function(f){f[v2]=!0,f.getZr().wakeUp()},c5=function(f){!f[v2]||(f.getZr().storage.traverse(function(h){Sd(h)||i(h)}),f[v2]=!1)};function i(f){for(var h=[],d=f.currentStates,p=0;p<d.length;p++){var v=d[p];v==="emphasis"||v==="blur"||v==="select"||h.push(v)}f.selected&&f.states.select&&h.push("select"),f.hoverState===Y1&&f.states.emphasis?h.push("emphasis"):f.hoverState===Op&&f.states.blur&&h.push("blur"),f.useStates(h)}function o(f,h){var d=f._zr,p=d.storage,v=0;p.traverse(function(m){m.isGroup||v++}),v>h.get("hoverLayerThreshold")&&!Yt.node&&!Yt.worker&&h.eachSeries(function(m){if(!m.preventUsingHoverLayer){var g=f._chartsMap[m.__viewId];g.__alive&&g.eachRendered(function(_){_.states.emphasis&&(_.states.emphasis.hoverLayer=!0)})}})}function a(f,h){var d=f.get("blendMode")||null;h.eachRendered(function(p){p.isGroup||(p.style.blend=d)})}function s(f,h){if(!f.preventAutoZ){var d=f.get("z")||0,p=f.get("zlevel")||0;h.eachRendered(function(v){return l(v,d,p,-1/0),!0})}}function l(f,h,d,p){var v=f.getTextContent(),m=f.getTextGuideLine(),g=f.isGroup;if(g)for(var _=f.childrenRef(),b=0;b<_.length;b++)p=Math.max(l(_[b],h,d,p),p);else f.z=h,f.zlevel=d,p=Math.max(f.z2,p);if(v&&(v.z=h,v.zlevel=d,isFinite(p)&&(v.z2=p+2)),m){var w=f.textGuideLineConfig;m.z=h,m.zlevel=d,isFinite(p)&&(m.z2=p+(w&&w.showAbove?1:-1))}return p}function u(f,h){h.eachRendered(function(d){if(!Sd(d)){var p=d.getTextContent(),v=d.getTextGuideLine();d.stateTransition&&(d.stateTransition=null),p&&p.stateTransition&&(p.stateTransition=null),v&&v.stateTransition&&(v.stateTransition=null),d.hasState()?(d.prevStates=d.currentStates,d.clearStates()):d.prevStates&&(d.prevStates=null)}})}function c(f,h){var d=f.getModel("stateAnimation"),p=f.isAnimationEnabled(),v=d.get("duration"),m=v>0?{duration:v,delay:d.get("delay"),easing:d.get("easing")}:null;h.eachRendered(function(g){if(g.states&&g.states.emphasis){if(Sd(g))return;if(g instanceof de&&jQ(g),g.__dirty){var _=g.prevStates;_&&g.useStates(_)}if(p){g.stateTransition=m;var b=g.getTextContent(),w=g.getTextGuideLine();b&&(b.stateTransition=m),w&&(w.stateTransition=m)}g.__dirty&&i(g)}})}u5=function(f){return new(function(h){yt(d,h);function d(){return h!==null&&h.apply(this,arguments)||this}return d.prototype.getCoordinateSystems=function(){return f._coordSysMgr.getCoordinateSystems()},d.prototype.getComponentByElement=function(p){for(;p;){var v=p.__ecComponentInfo;if(v!=null)return f._model.getComponent(v.mainType,v.index);p=p.parent}},d.prototype.enterEmphasis=function(p,v){Zd(p,v),zn(f)},d.prototype.leaveEmphasis=function(p,v){Kd(p,v),zn(f)},d.prototype.enterBlur=function(p){V9(p),zn(f)},d.prototype.leaveBlur=function(p){Hk(p),zn(f)},d.prototype.enterSelect=function(p){U9(p),zn(f)},d.prototype.leaveSelect=function(p){W9(p),zn(f)},d.prototype.getModel=function(){return f.getModel()},d.prototype.getViewOfComponentModel=function(p){return f.getViewOfComponentModel(p)},d.prototype.getViewOfSeriesModel=function(p){return f.getViewOfSeriesModel(p)},d}(UN))(f)},$F=function(f){function h(d,p){for(var v=0;v<d.length;v++){var m=d[v];m[g2]=p}}$(Pd,function(d,p){f._messageCenter.on(p,function(v){if(f5[f.group]&&f[g2]!==o5){if(v&&v.escapeConnect)return;var m=f.makeActionFromEvent(v),g=[];$(Ed,function(_){_!==f&&_.group===f.group&&g.push(_)}),h(g,o5),$(g,function(_){_[g2]!==Jnt&&_.dispatchAction(m)}),h(g,Qnt)}})})}}(),t}(Gi),yP=BF.prototype;yP.on=OF("on");yP.off=OF("off");yP.one=function(e,t,r){var n=this;function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];t&&t.apply&&t.apply(this,o),n.off(e,i)}this.on.call(this,e,i,r)};var tit=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];var jm={},Pd={},u3=[],c3=[],Hm=[],zF={},f3={},Ed={},f5={},eit=+new Date-0,bP="_echarts_instance_";function rit(e,t,r){var n=!(r&&r.ssr);if(n){var i=nit(e);if(i)return i}var o=new BF(e,t,r);return o.id="ec_"+eit++,Ed[o.id]=o,n&&S9(e,bP,o.id),$F(o),wi.trigger("afterinit",o),o}function nit(e){return Ed[SJ(e,bP)]}function VF(e,t){zF[e]=t}function UF(e){fe(c3,e)<0&&c3.push(e)}function WF(e,t){SP(u3,e,t,Gnt)}function iit(e){wP("afterinit",e)}function oit(e){wP("afterupdate",e)}function wP(e,t){wi.on(e,t)}function gu(e,t,r){Ut(t)&&(r=t,t="");var n=Rt(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,!Pd[t]&&(Bi(i5.test(n)&&i5.test(t)),jm[n]||(jm[n]={action:r,actionInfo:e}),Pd[t]=n)}function ait(e,t){uP.register(e,t)}function sit(e,t){SP(Hm,e,t,xF,"layout")}function mu(e,t){SP(Hm,e,t,LF,"visual")}var h5=[];function SP(e,t,r,n,i){if((Ut(t)||Rt(t))&&(r=t,t=n),!(fe(h5,r)>=0)){h5.push(r);var o=_F.wrapStageHandler(r,i);o.__prio=t,o.__raw=r,e.push(o)}}function GF(e,t){f3[e]=t}function lit(e,t,r){var n=$nt("registerMap");n&&n(e,t,r)}var uit=hrt;mu(_P,Vrt);mu(d_,Urt);mu(d_,Wrt);mu(_P,int);mu(d_,ont);mu(IF,Dnt);UF(GN);WF(Unt,Het);GF("default",Grt);gu({type:Vl,event:Vl,update:Vl},jr);gu({type:Wg,event:Wg,update:Wg},jr);gu({type:yd,event:yd,update:yd},jr);gu({type:Gg,event:Gg,update:Gg},jr);gu({type:bd,event:bd,update:bd},jr);VF("light",ent);VF("dark",rnt);function ch(e){return e==null?0:e.length||1}function d5(e){return e}var cit=function(){function e(t,r,n,i,o,a){this._old=t,this._new=r,this._oldKeyGetter=n||d5,this._newKeyGetter=i||d5,this.context=o,this._diffModeMultiple=a==="multiple"}return e.prototype.add=function(t){return this._add=t,this},e.prototype.update=function(t){return this._update=t,this},e.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},e.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},e.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},e.prototype.remove=function(t){return this._remove=t,this},e.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},e.prototype._executeOneToOne=function(){var t=this._old,r=this._new,n={},i=new Array(t.length),o=new Array(r.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(r,n,o,"_newKeyGetter");for(var a=0;a<t.length;a++){var s=i[a],l=n[s],u=ch(l);if(u>1){var c=l.shift();l.length===1&&(n[s]=l[0]),this._update&&this._update(c,a)}else u===1?(n[s]=null,this._update&&this._update(l,a)):this._remove&&this._remove(a)}this._performRestAdd(o,n)},e.prototype._executeMultiple=function(){var t=this._old,r=this._new,n={},i={},o=[],a=[];this._initIndexMap(t,n,o,"_oldKeyGetter"),this._initIndexMap(r,i,a,"_newKeyGetter");for(var s=0;s<o.length;s++){var l=o[s],u=n[l],c=i[l],f=ch(u),h=ch(c);if(f>1&&h===1)this._updateManyToOne&&this._updateManyToOne(c,u),i[l]=null;else if(f===1&&h>1)this._updateOneToMany&&this._updateOneToMany(c,u),i[l]=null;else if(f===1&&h===1)this._update&&this._update(c,u),i[l]=null;else if(f>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,u),i[l]=null;else if(f>1)for(var d=0;d<f;d++)this._remove&&this._remove(u[d]);else this._remove&&this._remove(u)}this._performRestAdd(a,i)},e.prototype._performRestAdd=function(t,r){for(var n=0;n<t.length;n++){var i=t[n],o=r[i],a=ch(o);if(a>1)for(var s=0;s<a;s++)this._add&&this._add(o[s]);else a===1&&this._add&&this._add(o);r[i]=null}},e.prototype._initIndexMap=function(t,r,n,i){for(var o=this._diffModeMultiple,a=0;a<t.length;a++){var s="_ec_"+this[i](t[a],a);if(o||(n[a]=s),!!r){var l=r[s],u=ch(l);u===0?(r[s]=a,o&&n.push(s)):u===1?r[s]=[l,a]:l.push(a)}}},e}();const jF=cit;var fit=function(){function e(t,r){this._encode=t,this._schema=r}return e.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},e.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},e}();function hit(e,t){var r={},n=r.encode={},i=jt(),o=[],a=[],s={};$(e.dimensions,function(h){var d=e.getDimensionInfo(h),p=d.coordDim;if(p){var v=d.coordDimIndex;S2(n,p)[v]=h,d.isExtraCoord||(i.set(p,1),pit(d.type)&&(o[0]=h),S2(s,p)[v]=e.getDimensionIndex(d.name)),d.defaultTooltip&&a.push(h)}DN.each(function(m,g){var _=S2(n,g),b=d.otherDims[g];b!=null&&b!==!1&&(_[b]=d.name)})});var l=[],u={};i.each(function(h,d){var p=n[d];u[d]=p[0],l=l.concat(p)}),r.dataDimsOnCoord=l,r.dataDimIndicesOnCoord=Lt(l,function(h){return e.getDimensionInfo(h).storeDimIndex}),r.encodeFirstDimNotExtra=u;var c=n.label;c&&c.length&&(o=c.slice());var f=n.tooltip;return f&&f.length?a=f.slice():a.length||(a=o.slice()),n.defaultedLabel=o,n.defaultedTooltip=a,r.userOutput=new fit(s,t),r}function S2(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function dit(e){return e==="category"?"ordinal":e==="time"?"time":"float"}function pit(e){return!(e==="ordinal"||e==="time")}var vit=function(){function e(t){this.otherDims={},t!=null&&at(this,t)}return e}();const Yg=vit;var git=Re(),mit={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},HF=function(){function e(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return e.prototype.isDimensionOmitted=function(){return this._dimOmitted},e.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=qF(this.source)))},e.prototype.getSourceDimensionIndex=function(t){return Zt(this._dimNameMap.get(t),-1)},e.prototype.getSourceDimension=function(t){var r=this.source.dimensionsDefine;if(r)return r[t]},e.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,r=HN(this.source),n=!ZF(t),i="",o=[],a=0,s=0;a<t;a++){var l=void 0,u=void 0,c=void 0,f=this.dimensions[s];if(f&&f.storeDimIndex===a)l=r?f.name:null,u=f.type,c=f.ordinalMeta,s++;else{var h=this.getSourceDimension(a);h&&(l=r?h.name:null,u=h.type)}o.push({property:l,type:u,ordinalMeta:c}),r&&l!=null&&(!f||!f.isCalculationCoord)&&(i+=n?l.replace(/\`/g,"`1").replace(/\$/g,"`2"):l),i+="$",i+=mit[u]||"f",c&&(i+=c.uid),i+="$"}var d=this.source,p=[d.seriesLayoutBy,d.startIndex,i].join("$$");return{dimensions:o,hash:p}},e.prototype.makeOutputDimensionNames=function(){for(var t=[],r=0,n=0;r<this._fullDimCount;r++){var i=void 0,o=this.dimensions[n];if(o&&o.storeDimIndex===r)o.isCalculationCoord||(i=o.name),n++;else{var a=this.getSourceDimension(r);a&&(i=a.name)}t.push(i)}return t},e.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},e}();function XF(e){return e instanceof HF}function YF(e){for(var t=jt(),r=0;r<(e||[]).length;r++){var n=e[r],i=Rt(n)?n.name:n;i!=null&&t.get(i)==null&&t.set(i,r)}return t}function qF(e){var t=git(e);return t.dimNameMap||(t.dimNameMap=YF(e.dimensionsDefine))}function ZF(e){return e>30}var fh=Rt,za=Lt,_it=typeof Int32Array>"u"?Array:Int32Array,yit="e\0\0",p5=-1,bit=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],wit=["_approximateExtent"],v5,K0,hh,dh,T2,J0,k2,Sit=function(){function e(t,r){this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var n,i=!1;XF(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var o={},a=[],s={},l=!1,u={},c=0;c<n.length;c++){var f=n[c],h=Mt(f)?new Yg({name:f}):f instanceof Yg?f:new Yg(f),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};a.push(d),o[d]=h,u[d]!=null&&(l=!0),h.createInvertedIndices&&(s[d]=[]),p.itemName===0&&(this._nameDimIdx=c),p.itemId===0&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=a,this._dimInfos=o,this._initGetDimensionInfo(l),this.hostModel=r,this._invertedIndicesMap=s,this._dimOmitted){var v=this._dimIdxToName=jt();$(a,function(m){v.set(o[m].storeDimIndex,m)})}}return e.prototype.getDimension=function(t){var r=this._recognizeDimIndex(t);if(r==null)return t;if(r=t,!this._dimOmitted)return this.dimensions[r];var n=this._dimIdxToName.get(r);if(n!=null)return n;var i=this._schema.getSourceDimension(r);if(i)return i.name},e.prototype.getDimensionIndex=function(t){var r=this._recognizeDimIndex(t);if(r!=null)return r;if(t==null)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},e.prototype._recognizeDimIndex=function(t){if(Se(t)||t!=null&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},e.prototype._getStoreDimIndex=function(t){var r=this.getDimensionIndex(t);return r},e.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},e.prototype._initGetDimensionInfo=function(t){var r=this._dimInfos;this._getDimInfo=t?function(n){return r.hasOwnProperty(n)?r[n]:void 0}:function(n){return r[n]}},e.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},e.prototype.mapDimension=function(t,r){var n=this._dimSummary;if(r==null)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[r]:null},e.prototype.mapDimensionsAll=function(t){var r=this._dimSummary,n=r.encode[t];return(n||[]).slice()},e.prototype.getStore=function(){return this._store},e.prototype.initData=function(t,r,n){var i=this,o;if(t instanceof t3&&(o=t),!o){var a=this.dimensions,s=cP(t)||Xr(t)?new XN(t,a.length):t;o=new t3;var l=za(a,function(u){return{type:i._dimInfos[u].type,property:u}});o.initData(s,l,n)}this._store=o,this._nameList=(r||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=hit(this,this._schema),this.userOutput=this._dimSummary.userOutput},e.prototype.appendData=function(t){var r=this._store.appendData(t);this._doInit(r[0],r[1])},e.prototype.appendValues=function(t,r){var n=this._store.appendValues(t,r.length),i=n.start,o=n.end,a=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),r)for(var s=i;s<o;s++){var l=s-i;this._nameList[s]=r[l],a&&k2(this,s)}},e.prototype._updateOrdinalMeta=function(){for(var t=this._store,r=this.dimensions,n=0;n<r.length;n++){var i=this._dimInfos[r[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},e.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return this._idDimIdx==null&&t.getSource().sourceFormat!==Ss&&!t.fillStorage},e.prototype._doInit=function(t,r){if(!(t>=r)){var n=this._store,i=n.getProvider();this._updateOrdinalMeta();var o=this._nameList,a=this._idList,s=i.getSource().sourceFormat,l=s===ci;if(l&&!i.pure)for(var u=[],c=t;c<r;c++){var f=i.getItem(c,u);if(!this.hasItemOption&&cJ(f)&&(this.hasItemOption=!0),f){var h=f.name;o[c]==null&&h!=null&&(o[c]=ri(h,null));var d=f.id;a[c]==null&&d!=null&&(a[c]=ri(d,null))}}if(this._shouldMakeIdFromName())for(var c=t;c<r;c++)k2(this,c);v5(this)}},e.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.setApproximateExtent=function(t,r){r=this.getDimension(r),this._approximateExtent[r]=t.slice()},e.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},e.prototype.setCalculationInfo=function(t,r){fh(t)?at(this._calculationInfo,t):this._calculationInfo[t]=r},e.prototype.getName=function(t){var r=this.getRawIndex(t),n=this._nameList[r];return n==null&&this._nameDimIdx!=null&&(n=hh(this,this._nameDimIdx,r)),n==null&&(n=""),n},e.prototype._getCategory=function(t,r){var n=this._store.get(t,r),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},e.prototype.getId=function(t){return K0(this,this.getRawIndex(t))},e.prototype.count=function(){return this._store.count()},e.prototype.get=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,r)},e.prototype.getByRawIndex=function(t,r){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,r)},e.prototype.getIndices=function(){return this._store.getIndices()},e.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},e.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},e.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},e.prototype.getValues=function(t,r){var n=this,i=this._store;return ct(t)?i.getValues(za(t,function(o){return n._getStoreDimIndex(o)}),r):i.getValues(t)},e.prototype.hasValue=function(t){for(var r=this._dimSummary.dataDimIndicesOnCoord,n=0,i=r.length;n<i;n++)if(isNaN(this._store.get(r[n],t)))return!1;return!0},e.prototype.indexOfName=function(t){for(var r=0,n=this._store.count();r<n;r++)if(this.getName(r)===t)return r;return-1},e.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},e.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},e.prototype.rawIndexOf=function(t,r){var n=t&&this._invertedIndicesMap[t],i=n[r];return i==null||isNaN(i)?p5:i},e.prototype.indicesOfNearest=function(t,r,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),r,n)},e.prototype.each=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=za(dh(t),this._getStoreDimIndex,this);this._store.each(o,i?Vt(r,i):r)},e.prototype.filterSelf=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]);var i=n||this,o=za(dh(t),this._getStoreDimIndex,this);return this._store=this._store.filter(o,i?Vt(r,i):r),this},e.prototype.selectRange=function(t){var r=this,n={},i=ve(t);return $(i,function(o){var a=r._getStoreDimIndex(o);n[a]=t[o]}),this._store=this._store.selectRange(n),this},e.prototype.mapArray=function(t,r,n){Ut(t)&&(n=r,r=t,t=[]),n=n||this;var i=[];return this.each(t,function(){i.push(r&&r.apply(this,arguments))},n),i},e.prototype.map=function(t,r,n,i){var o=n||i||this,a=za(dh(t),this._getStoreDimIndex,this),s=J0(this);return s._store=this._store.map(a,o?Vt(r,o):r),s},e.prototype.modify=function(t,r,n,i){var o=n||i||this,a=za(dh(t),this._getStoreDimIndex,this);this._store.modify(a,o?Vt(r,o):r)},e.prototype.downSample=function(t,r,n,i){var o=J0(this);return o._store=this._store.downSample(this._getStoreDimIndex(t),r,n,i),o},e.prototype.lttbDownSample=function(t,r){var n=J0(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),r),n},e.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},e.prototype.getItemModel=function(t){var r=this.hostModel,n=this.getRawDataItem(t);return new Ar(n,r,r&&r.ecModel)},e.prototype.diff=function(t){var r=this;return new jF(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(n){return K0(t,n)},function(n){return K0(r,n)})},e.prototype.getVisual=function(t){var r=this._visual;return r&&r[t]},e.prototype.setVisual=function(t,r){this._visual=this._visual||{},fh(t)?at(this._visual,t):this._visual[t]=r},e.prototype.getItemVisual=function(t,r){var n=this._itemVisuals[t],i=n&&n[r];return i==null?this.getVisual(r):i},e.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},e.prototype.ensureUniqueItemVisual=function(t,r){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var o=i[r];return o==null&&(o=this.getVisual(r),ct(o)?o=o.slice():fh(o)&&(o=at({},o)),i[r]=o),o},e.prototype.setItemVisual=function(t,r,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,fh(r)?at(i,r):i[r]=n},e.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},e.prototype.setLayout=function(t,r){fh(t)?at(this._layout,t):this._layout[t]=r},e.prototype.getLayout=function(t){return this._layout[t]},e.prototype.getItemLayout=function(t){return this._itemLayouts[t]},e.prototype.setItemLayout=function(t,r,n){this._itemLayouts[t]=n?at(this._itemLayouts[t]||{},r):r},e.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},e.prototype.setItemGraphicEl=function(t,r){var n=this.hostModel&&this.hostModel.seriesIndex;CQ(n,this.dataType,t,r),this._graphicEls[t]=r},e.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},e.prototype.eachItemGraphicEl=function(t,r){$(this._graphicEls,function(n,i){n&&t&&t.call(r,n,i)})},e.prototype.cloneShallow=function(t){return t||(t=new e(this._schema?this._schema:za(this.dimensions,this._getDimInfo,this),this.hostModel)),T2(t,this),t._store=this._store,t},e.prototype.wrapMethod=function(t,r){var n=this[t];!Ut(n)||(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var i=n.apply(this,arguments);return r.apply(this,[i].concat(Mk(arguments)))})},e.internalField=function(){v5=function(t){var r=t._invertedIndicesMap;$(r,function(n,i){var o=t._dimInfos[i],a=o.ordinalMeta,s=t._store;if(a){n=r[i]=new _it(a.categories.length);for(var l=0;l<n.length;l++)n[l]=p5;for(var l=0;l<s.count();l++)n[s.get(o.storeDimIndex,l)]=l}})},hh=function(t,r,n){return ri(t._getCategory(r,n),null)},K0=function(t,r){var n=t._idList[r];return n==null&&t._idDimIdx!=null&&(n=hh(t,t._idDimIdx,r)),n==null&&(n=yit+r),n},dh=function(t){return ct(t)||(t=t!=null?[t]:[]),t},J0=function(t){var r=new e(t._schema?t._schema:za(t.dimensions,t._getDimInfo,t),t.hostModel);return T2(r,t),r},T2=function(t,r){$(bit.concat(r.__wrappedMethods||[]),function(n){r.hasOwnProperty(n)&&(t[n]=r[n])}),t.__wrappedMethods=r.__wrappedMethods,$(wit,function(n){t[n]=zt(r[n])}),t._calculationInfo=at({},r._calculationInfo)},k2=function(t,r){var n=t._nameList,i=t._idList,o=t._nameDimIdx,a=t._idDimIdx,s=n[r],l=i[r];if(s==null&&o!=null&&(n[r]=s=hh(t,o,r)),l==null&&a!=null&&(i[r]=l=hh(t,a,r)),l==null&&s!=null){var u=t._nameRepeatCount,c=u[s]=(u[s]||0)+1;l=s,c>1&&(l+="__ec__"+c),i[r]=l}}}(),e}();const Ul=Sit;function KF(e,t){cP(e)||(e=fP(e)),t=t||{};var r=t.coordDimensions||[],n=t.dimensionsDefine||e.dimensionsDefine||[],i=jt(),o=[],a=kit(e,r,n,t.dimensionsCount),s=t.canOmitUnusedDimensions&&ZF(a),l=n===e.dimensionsDefine,u=l?qF(e):YF(n),c=t.encodeDefine;!c&&t.encodeDefaulter&&(c=t.encodeDefaulter(e,a));for(var f=jt(c),h=new rF(a),d=0;d<h.length;d++)h[d]=-1;function p(E){var M=h[E];if(M<0){var x=n[E],D=Rt(x)?x:{name:x},B=new Yg,V=D.name;V!=null&&u.get(V)!=null&&(B.name=B.displayName=V),D.type!=null&&(B.type=D.type),D.displayName!=null&&(B.displayName=D.displayName);var F=o.length;return h[E]=F,B.storeDimIndex=E,o.push(B),B}return o[M]}if(!s)for(var d=0;d<a;d++)p(d);f.each(function(E,M){var x=Je(E).slice();if(x.length===1&&!Mt(x[0])&&x[0]<0){f.set(M,!1);return}var D=f.set(M,[]);$(x,function(B,V){var F=Mt(B)?u.get(B):B;F!=null&&F<a&&(D[V]=F,m(p(F),M,V))})});var v=0;$(r,function(E){var M,x,D,B;if(Mt(E))M=E,B={};else{B=E,M=B.name;var V=B.ordinalMeta;B.ordinalMeta=null,B=at({},B),B.ordinalMeta=V,x=B.dimsDef,D=B.otherDims,B.name=B.coordDim=B.coordDimIndex=B.dimsDef=B.otherDims=null}var F=f.get(M);if(F!==!1){if(F=Je(F),!F.length)for(var G=0;G<(x&&x.length||1);G++){for(;v<a&&p(v).coordDim!=null;)v++;v<a&&F.push(v++)}$(F,function(Z,q){var et=p(Z);if(l&&B.type!=null&&(et.type=B.type),m(re(et,B),M,q),et.name==null&&x){var At=x[q];!Rt(At)&&(At={name:At}),et.name=et.displayName=At.name,et.defaultTooltip=At.defaultTooltip}D&&re(et.otherDims,D)})}});function m(E,M,x){DN.get(M)!=null?E.otherDims[M]=x:(E.coordDim=M,E.coordDimIndex=x,i.set(M,!0))}var g=t.generateCoord,_=t.generateCoordCount,b=_!=null;_=g?_||1:0;var w=g||"value";function T(E){E.name==null&&(E.name=E.coordDim)}if(s)$(o,function(E){T(E)}),o.sort(function(E,M){return E.storeDimIndex-M.storeDimIndex});else for(var S=0;S<a;S++){var k=p(S),C=k.coordDim;C==null&&(k.coordDim=Pit(w,i,b),k.coordDimIndex=0,(!g||_<=0)&&(k.isExtraCoord=!0),_--),T(k),k.type==null&&(BN(e,S)===Pn.Must||k.isExtraCoord&&(k.otherDims.itemName!=null||k.otherDims.seriesName!=null))&&(k.type="ordinal")}return Tit(o),new HF({source:e,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function Tit(e){for(var t=jt(),r=0;r<e.length;r++){var n=e[r],i=n.name,o=t.get(i)||0;o>0&&(n.name=i+(o-1)),o++,t.set(i,o)}}function kit(e,t,r,n){var i=Math.max(e.dimensionsDetectedCount||1,t.length,r.length,n||0);return $(t,function(o){var a;Rt(o)&&(a=o.dimsDef)&&(i=Math.max(i,a.length))}),i}function Pit(e,t,r){var n=t.data;if(r||n.hasOwnProperty(e)){for(var i=0;n.hasOwnProperty(e+i);)i++;e+=i}return t.set(e,!0),e}var Eit=function(){function e(t){this.coordSysDims=[],this.axisMap=jt(),this.categoryAxisMap=jt(),this.coordSysName=t}return e}();function Cit(e){var t=e.get("coordinateSystem"),r=new Eit(t),n=Ait[t];if(n)return n(e,r,r.axisMap,r.categoryAxisMap),r}var Ait={cartesian2d:function(e,t,r,n){var i=e.getReferringComponents("xAxis",Mi).models[0],o=e.getReferringComponents("yAxis",Mi).models[0];t.coordSysDims=["x","y"],r.set("x",i),r.set("y",o),ju(i)&&(n.set("x",i),t.firstCategoryDimIndex=0),ju(o)&&(n.set("y",o),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},singleAxis:function(e,t,r,n){var i=e.getReferringComponents("singleAxis",Mi).models[0];t.coordSysDims=["single"],r.set("single",i),ju(i)&&(n.set("single",i),t.firstCategoryDimIndex=0)},polar:function(e,t,r,n){var i=e.getReferringComponents("polar",Mi).models[0],o=i.findAxisModel("radiusAxis"),a=i.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],r.set("radius",o),r.set("angle",a),ju(o)&&(n.set("radius",o),t.firstCategoryDimIndex=0),ju(a)&&(n.set("angle",a),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=1))},geo:function(e,t,r,n){t.coordSysDims=["lng","lat"]},parallel:function(e,t,r,n){var i=e.ecModel,o=i.getComponent("parallel",e.get("parallelIndex")),a=t.coordSysDims=o.dimensions.slice();$(o.parallelAxisIndex,function(s,l){var u=i.getComponent("parallelAxis",s),c=a[l];r.set(c,u),ju(u)&&(n.set(c,u),t.firstCategoryDimIndex==null&&(t.firstCategoryDimIndex=l))})}};function ju(e){return e.get("type")==="category"}function Mit(e,t,r){r=r||{};var n=r.byIndex,i=r.stackedCoordDimension,o,a,s;xit(t)?o=t:(a=t.schema,o=a.dimensions,s=t.store);var l=!!(e&&e.get("stack")),u,c,f,h;if($(o,function(_,b){Mt(_)&&(o[b]=_={name:_}),l&&!_.isExtraCoord&&(!n&&!u&&_.ordinalMeta&&(u=_),!c&&_.type!=="ordinal"&&_.type!=="time"&&(!i||i===_.coordDim)&&(c=_))}),c&&!n&&!u&&(n=!0),c){f="__\0ecstackresult_"+e.id,h="__\0ecstackedover_"+e.id,u&&(u.createInvertedIndices=!0);var d=c.coordDim,p=c.type,v=0;$(o,function(_){_.coordDim===d&&v++});var m={name:f,coordDim:d,coordDimIndex:v,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length},g={name:h,coordDim:h,coordDimIndex:v+1,type:p,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:o.length+1};a?(s&&(m.storeDimIndex=s.ensureCalculationDimension(h,p),g.storeDimIndex=s.ensureCalculationDimension(f,p)),a.appendCalculationDimension(m),a.appendCalculationDimension(g)):(o.push(m),o.push(g))}return{stackedDimension:c&&c.name,stackedByDimension:u&&u.name,isStackedByIndex:n,stackedOverDimension:h,stackResultDimension:f}}function xit(e){return!XF(e.schema)}function nu(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function JF(e,t){return nu(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Lit(e,t){var r=e.get("coordinateSystem"),n=uP.get(r),i;return t&&t.coordSysDims&&(i=Lt(t.coordSysDims,function(o){var a={name:o},s=t.axisMap.get(o);if(s){var l=s.get("type");a.type=dit(l)}return a})),i||(i=n&&(n.getDimensionsInfo?n.getDimensionsInfo():n.dimensions.slice())||["x","y"]),i}function Iit(e,t,r){var n,i;return r&&$(e,function(o,a){var s=o.coordDim,l=r.categoryAxisMap.get(s);l&&(n==null&&(n=a),o.ordinalMeta=l.getOrdinalMeta(),t&&(o.createInvertedIndices=!0)),o.otherDims.itemName!=null&&(i=!0)}),!i&&n!=null&&(e[n].otherDims.itemName=0),n}function Np(e,t,r){r=r||{};var n=t.getSourceManager(),i,o=!1;e?(o=!0,i=fP(e)):(i=n.getSource(),o=i.sourceFormat===ci);var a=Cit(t),s=Lit(t,a),l=r.useEncodeDefaulter,u=Ut(l)?l:l?ye(met,s,t):null,c={coordDimensions:s,generateCoord:r.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:u,canOmitUnusedDimensions:!o},f=KF(i,c),h=Iit(f.dimensions,r.createInvertedIndices,a),d=o?null:n.getSharedDataStore(f),p=Mit(t,{schema:f,store:d}),v=new Ul(f,t);v.setCalculationInfo(p);var m=h!=null&&Oit(i)?function(g,_,b,w){return w===h?b:this.defaultDimValueGetter(g,_,b,w)}:null;return v.hasItemOption=!1,v.initData(o?i:d,null,m),v}function Oit(e){if(e.sourceFormat===ci){var t=Rit(e.data||[]);return!ct(Lp(t))}}function Rit(e){for(var t=0;t<e.length&&e[t]==null;)t++;return e[t]}var QF=function(){function e(t){this._setting=t||{},this._extent=[1/0,-1/0]}return e.prototype.getSetting=function(t){return this._setting[t]},e.prototype.unionExtent=function(t){var r=this._extent;t[0]<r[0]&&(r[0]=t[0]),t[1]>r[1]&&(r[1]=t[1])},e.prototype.unionExtentFromData=function(t,r){this.unionExtent(t.getApproximateExtent(r))},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.setExtent=function(t,r){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(r)||(n[1]=r)},e.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},e.prototype.isBlank=function(){return this._isBlank},e.prototype.setBlank=function(t){this._isBlank=t},e}();j1(QF);const Ma=QF;var Dit=0,Nit=function(){function e(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++Dit}return e.createByAxisModel=function(t){var r=t.option,n=r.data,i=n&&Lt(n,Fit);return new e({categories:i,needCollect:!i,deduplication:r.dedplication!==!1})},e.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},e.prototype.parseAndCollect=function(t){var r,n=this._needCollect;if(!Mt(t)&&!n)return t;if(n&&!this._deduplication)return r=this.categories.length,this.categories[r]=t,r;var i=this._getOrCreateMap();return r=i.get(t),r==null&&(n?(r=this.categories.length,this.categories[r]=t,i.set(t,r)):r=NaN),r},e.prototype._getOrCreateMap=function(){return this._map||(this._map=jt(this.categories))},e}();function Fit(e){return Rt(e)&&e.value!=null?e.value:e+""}const h3=Nit;function d3(e){return e.type==="interval"||e.type==="log"}function $it(e,t,r,n){var i={},o=e[1]-e[0],a=i.interval=m9(o/t,!0);r!=null&&a<r&&(a=i.interval=r),n!=null&&a>n&&(a=i.interval=n);var s=i.intervalPrecision=t$(a),l=i.niceTickExtent=[Ke(Math.ceil(e[0]/a)*a,s),Ke(Math.floor(e[1]/a)*a,s)];return Bit(l,e),i}function P2(e){var t=Math.pow(10,$k(e)),r=e/t;return r?r===2?r=3:r===3?r=5:r*=2:r=1,Ke(r*t)}function t$(e){return ko(e)+2}function g5(e,t,r){e[t]=Math.max(Math.min(e[t],r[1]),r[0])}function Bit(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),g5(e,0,t),g5(e,1,t),e[0]>e[1]&&(e[0]=e[1])}function p_(e,t){return e>=t[0]&&e<=t[1]}function v_(e,t){return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])}function g_(e,t){return e*(t[1]-t[0])+t[0]}var e$=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new h3({})),ct(i)&&(i=new h3({categories:Lt(i,function(o){return Rt(o)?o.value:o})})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return t.prototype.parse=function(r){return r==null?NaN:Mt(r)?this._ordinalMeta.getOrdinal(r):Math.round(r)},t.prototype.contain=function(r){return r=this.parse(r),p_(r,this._extent)&&this._ordinalMeta.categories[r]!=null},t.prototype.normalize=function(r){return r=this._getTickNumber(this.parse(r)),v_(r,this._extent)},t.prototype.scale=function(r){return r=Math.round(g_(r,this._extent)),this.getRawOrdinalNumber(r)},t.prototype.getTicks=function(){for(var r=[],n=this._extent,i=n[0];i<=n[1];)r.push({value:i}),i++;return r},t.prototype.getMinorTicks=function(r){},t.prototype.setSortInfo=function(r){if(r==null){this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null;return}for(var n=r.ordinalNumbers,i=this._ordinalNumbersByTick=[],o=this._ticksByOrdinalNumber=[],a=0,s=this._ordinalMeta.categories.length,l=Math.min(s,n.length);a<l;++a){var u=n[a];i[a]=u,o[u]=a}for(var c=0;a<s;++a){for(;o[c]!=null;)c++;i.push(c),o[c]=a}},t.prototype._getTickNumber=function(r){var n=this._ticksByOrdinalNumber;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getRawOrdinalNumber=function(r){var n=this._ordinalNumbersByTick;return n&&r>=0&&r<n.length?n[r]:r},t.prototype.getLabel=function(r){if(!this.isBlank()){var n=this.getRawOrdinalNumber(r.value),i=this._ordinalMeta.categories[n];return i==null?"":i+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.isInExtentRange=function(r){return r=this._getTickNumber(r),this._extent[0]<=r&&this._extent[1]>=r},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(Ma);Ma.registerClass(e$);const r$=e$;var pl=Ke,n$=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="interval",r._interval=0,r._intervalPrecision=2,r}return t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return p_(r,this._extent)},t.prototype.normalize=function(r){return v_(r,this._extent)},t.prototype.scale=function(r){return g_(r,this._extent)},t.prototype.setExtent=function(r,n){var i=this._extent;isNaN(r)||(i[0]=parseFloat(r)),isNaN(n)||(i[1]=parseFloat(n))},t.prototype.unionExtent=function(r){var n=this._extent;r[0]<n[0]&&(n[0]=r[0]),r[1]>n[1]&&(n[1]=r[1]),this.setExtent(n[0],n[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(r){this._interval=r,this._niceExtent=this._extent.slice(),this._intervalPrecision=t$(r)},t.prototype.getTicks=function(r){var n=this._interval,i=this._extent,o=this._niceExtent,a=this._intervalPrecision,s=[];if(!n)return s;var l=1e4;i[0]<o[0]&&(r?s.push({value:pl(o[0]-n,a)}):s.push({value:i[0]}));for(var u=o[0];u<=o[1]&&(s.push({value:u}),u=pl(u+n,a),u!==s[s.length-1].value);)if(s.length>l)return[];var c=s.length?s[s.length-1].value:o[1];return i[1]>c&&(r?s.push({value:pl(c+n,a)}):s.push({value:i[1]})),s},t.prototype.getMinorTicks=function(r){for(var n=this.getTicks(!0),i=[],o=this.getExtent(),a=1;a<n.length;a++){for(var s=n[a],l=n[a-1],u=0,c=[],f=s.value-l.value,h=f/r;u<r-1;){var d=pl(l.value+(u+1)*h);d>o[0]&&d<o[1]&&c.push(d),u++}i.push(c)}return i},t.prototype.getLabel=function(r,n){if(r==null)return"";var i=n&&n.precision;i==null?i=ko(r.value)||0:i==="auto"&&(i=this._intervalPrecision);var o=pl(r.value,i,!0);return LN(o)},t.prototype.calcNiceTicks=function(r,n,i){r=r||5;var o=this._extent,a=o[1]-o[0];if(!!isFinite(a)){a<0&&(a=-a,o.reverse());var s=$it(o,r,n,i);this._intervalPrecision=s.intervalPrecision,this._interval=s.interval,this._niceExtent=s.niceTickExtent}},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1])if(n[0]!==0){var i=Math.abs(n[0]);r.fixMax||(n[1]+=i/2),n[0]-=i/2}else n[1]=1;var o=n[1]-n[0];isFinite(o)||(n[0]=0,n[1]=1),this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval);var a=this._interval;r.fixMin||(n[0]=pl(Math.floor(n[0]/a)*a)),r.fixMax||(n[1]=pl(Math.ceil(n[1]/a)*a))},t.prototype.setNiceExtent=function(r,n){this._niceExtent=[r,n]},t.type="interval",t}(Ma);Ma.registerClass(n$);const Fp=n$;var i$=typeof Float32Array<"u",zit=i$?Float32Array:Array;function la(e){return ct(e)?i$?new Float32Array(e):e:new zit(e)}var p3="__ec_stack_";function TP(e){return e.get("stack")||p3+e.seriesIndex}function kP(e){return e.dim+e.index}function Vit(e){var t=[],r=e.axis,n="axis0";if(r.type==="category"){for(var i=r.getBandWidth(),o=0;o<e.count;o++)t.push(re({bandWidth:i,axisKey:n,stackId:p3+o},e));for(var a=s$(t),s=[],o=0;o<e.count;o++){var l=a[n][p3+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}function o$(e,t){var r=[];return t.eachSeriesByType(e,function(n){l$(n)&&r.push(n)}),r}function Uit(e){var t={};$(e,function(l){var u=l.coordinateSystem,c=u.getBaseAxis();if(!(c.type!=="time"&&c.type!=="value"))for(var f=l.getData(),h=c.dim+"_"+c.index,d=f.getDimensionIndex(f.mapDimension(c.dim)),p=f.getStore(),v=0,m=p.count();v<m;++v){var g=p.get(d,v);t[h]?t[h].push(g):t[h]=[g]}});var r={};for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];if(i){i.sort(function(l,u){return l-u});for(var o=null,a=1;a<i.length;++a){var s=i[a]-i[a-1];s>0&&(o=o===null?s:Math.min(o,s))}r[n]=o}}return r}function a$(e){var t=Uit(e),r=[];return $(e,function(n){var i=n.coordinateSystem,o=i.getBaseAxis(),a=o.getExtent(),s;if(o.type==="category")s=o.getBandWidth();else if(o.type==="value"||o.type==="time"){var l=o.dim+"_"+o.index,u=t[l],c=Math.abs(a[1]-a[0]),f=o.scale.getExtent(),h=Math.abs(f[1]-f[0]);s=u?c/h*u:c}else{var d=n.getData();s=Math.abs(a[1]-a[0])/d.count()}var p=je(n.get("barWidth"),s),v=je(n.get("barMaxWidth"),s),m=je(n.get("barMinWidth")||(u$(n)?.5:1),s),g=n.get("barGap"),_=n.get("barCategoryGap");r.push({bandWidth:s,barWidth:p,barMaxWidth:v,barMinWidth:m,barGap:g,barCategoryGap:_,axisKey:kP(o),stackId:TP(n)})}),s$(r)}function s$(e){var t={};$(e,function(n,i){var o=n.axisKey,a=n.bandWidth,s=t[o]||{bandWidth:a,remainedWidth:a,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},l=s.stacks;t[o]=s;var u=n.stackId;l[u]||s.autoWidthCount++,l[u]=l[u]||{width:0,maxWidth:0};var c=n.barWidth;c&&!l[u].width&&(l[u].width=c,c=Math.min(s.remainedWidth,c),s.remainedWidth-=c);var f=n.barMaxWidth;f&&(l[u].maxWidth=f);var h=n.barMinWidth;h&&(l[u].minWidth=h);var d=n.barGap;d!=null&&(s.gap=d);var p=n.barCategoryGap;p!=null&&(s.categoryGap=p)});var r={};return $(t,function(n,i){r[i]={};var o=n.stacks,a=n.bandWidth,s=n.categoryGap;if(s==null){var l=ve(o).length;s=Math.max(35-l*4,15)+"%"}var u=je(s,a),c=je(n.gap,1),f=n.remainedWidth,h=n.autoWidthCount,d=(f-u)/(h+(h-1)*c);d=Math.max(d,0),$(o,function(g){var _=g.maxWidth,b=g.minWidth;if(g.width){var w=g.width;_&&(w=Math.min(w,_)),b&&(w=Math.max(w,b)),g.width=w,f-=w+c*w,h--}else{var w=d;_&&_<w&&(w=Math.min(_,f)),b&&b>w&&(w=b),w!==d&&(g.width=w,f-=w+c*w,h--)}}),d=(f-u)/(h+(h-1)*c),d=Math.max(d,0);var p=0,v;$(o,function(g,_){g.width||(g.width=d),v=g,p+=g.width*(1+c)}),v&&(p-=v.width*c);var m=-p/2;$(o,function(g,_){r[i][_]=r[i][_]||{bandWidth:a,offset:m,width:g.width},m+=g.width*(1+c)})}),r}function Wit(e,t,r){if(e&&t){var n=e[kP(t)];return n!=null&&r!=null?n[TP(r)]:n}}function Git(e,t){var r=o$(e,t),n=a$(r);$(r,function(i){var o=i.getData(),a=i.coordinateSystem,s=a.getBaseAxis(),l=TP(i),u=n[kP(s)][l],c=u.offset,f=u.width;o.setLayout({bandWidth:u.bandWidth,offset:c,size:f})})}function jit(e){return{seriesType:e,plan:vP(),reset:function(t){if(!!l$(t)){var r=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),o=n.getOtherAxis(i),a=r.getDimensionIndex(r.mapDimension(o.dim)),s=r.getDimensionIndex(r.mapDimension(i.dim)),l=t.get("showBackground",!0),u=r.mapDimension(o.dim),c=r.getCalculationInfo("stackResultDimension"),f=nu(r,u)&&!!r.getCalculationInfo("stackedOnSeries"),h=o.isHorizontal(),d=Hit(i,o),p=u$(t),v=t.get("barMinHeight")||0,m=c&&r.getDimensionIndex(c),g=r.getLayout("size"),_=r.getLayout("offset");return{progress:function(b,w){for(var T=b.count,S=p&&la(T*3),k=p&&l&&la(T*3),C=p&&la(T),E=n.master.getRect(),M=h?E.width:E.height,x,D=w.getStore(),B=0;(x=b.next())!=null;){var V=D.get(f?m:a,x),F=D.get(s,x),G=d,Z=void 0;f&&(Z=+V-D.get(a,x));var q=void 0,et=void 0,At=void 0,Dt=void 0;if(h){var Tt=n.dataToPoint([V,F]);if(f){var kt=n.dataToPoint([Z,F]);G=kt[0]}q=G,et=Tt[1]+_,At=Tt[0]-G,Dt=g,Math.abs(At)<v&&(At=(At<0?-1:1)*v)}else{var Tt=n.dataToPoint([F,V]);if(f){var kt=n.dataToPoint([F,Z]);G=kt[1]}q=Tt[0]+_,et=G,At=g,Dt=Tt[1]-G,Math.abs(Dt)<v&&(Dt=(Dt<=0?-1:1)*v)}p?(S[B]=q,S[B+1]=et,S[B+2]=h?At:Dt,k&&(k[B]=h?E.x:q,k[B+1]=h?et:E.y,k[B+2]=M),C[x]=x):w.setItemLayout(x,{x:q,y:et,width:At,height:Dt}),B+=3}p&&w.setLayout({largePoints:S,largeDataIndices:C,largeBackgroundPoints:k,valueAxisHorizontal:h})}}}}}}function l$(e){return e.coordinateSystem&&e.coordinateSystem.type==="cartesian2d"}function u$(e){return e.pipelineContext&&e.pipelineContext.large}function Hit(e,t){return t.toGlobalCoord(t.dataToCoord(t.type==="log"?1:0))}var Xit=function(e,t,r,n){for(;r<n;){var i=r+n>>>1;e[i][1]<t?r=i+1:n=i}return r},c$=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="time",n}return t.prototype.getLabel=function(r){var n=this.getSetting("useUTC");return r_(r.value,a4[oet(Dc(this._minLevelUnit))]||a4.second,n,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(r,n,i){var o=this.getSetting("useUTC"),a=this.getSetting("locale");return aet(r,n,i,a,o)},t.prototype.getTicks=function(){var r=this._interval,n=this._extent,i=[];if(!r)return i;i.push({value:n[0],level:0});var o=this.getSetting("useUTC"),a=tot(this._minLevelUnit,this._approxInterval,o,n);return i=i.concat(a),i.push({value:n[1],level:0}),i},t.prototype.calcNiceExtent=function(r){var n=this._extent;if(n[0]===n[1]&&(n[0]-=ti,n[1]+=ti),n[1]===-1/0&&n[0]===1/0){var i=new Date;n[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),n[0]=n[1]-ti}this.calcNiceTicks(r.splitNumber,r.minInterval,r.maxInterval)},t.prototype.calcNiceTicks=function(r,n,i){r=r||10;var o=this._extent,a=o[1]-o[0];this._approxInterval=a/r,n!=null&&this._approxInterval<n&&(this._approxInterval=n),i!=null&&this._approxInterval>i&&(this._approxInterval=i);var s=Q0.length,l=Math.min(Xit(Q0,this._approxInterval,0,s),s-1);this._interval=Q0[l][1],this._minLevelUnit=Q0[Math.max(l-1,0)][0]},t.prototype.parse=function(r){return Se(r)?r:+_a(r)},t.prototype.contain=function(r){return p_(this.parse(r),this._extent)},t.prototype.normalize=function(r){return v_(this.parse(r),this._extent)},t.prototype.scale=function(r){return g_(r,this._extent)},t.type="time",t}(Fp),Q0=[["second",iP],["minute",oP],["hour",Td],["quarter-day",Td*6],["half-day",Td*12],["day",ti*1.2],["half-week",ti*3.5],["week",ti*7],["month",ti*31],["quarter",ti*95],["half-year",o4/2],["year",o4]];function Yit(e,t,r,n){var i=_a(t),o=_a(r),a=function(p){return s4(i,p,n)===s4(o,p,n)},s=function(){return a("year")},l=function(){return s()&&a("month")},u=function(){return l()&&a("day")},c=function(){return u()&&a("hour")},f=function(){return c()&&a("minute")},h=function(){return f()&&a("second")},d=function(){return h()&&a("millisecond")};switch(e){case"year":return s();case"month":return l();case"day":return u();case"hour":return c();case"minute":return f();case"second":return h();case"millisecond":return d()}}function qit(e,t){return e/=ti,e>16?16:e>7.5?7:e>3.5?4:e>1.5?2:1}function Zit(e){var t=30*ti;return e/=t,e>6?6:e>3?3:e>2?2:1}function Kit(e){return e/=Td,e>12?12:e>6?6:e>3.5?4:e>2?2:1}function m5(e,t){return e/=t?oP:iP,e>30?30:e>20?20:e>15?15:e>10?10:e>5?5:e>2?2:1}function Jit(e){return m9(e,!0)}function Qit(e,t,r){var n=new Date(e);switch(Dc(t)){case"year":case"month":n[PN(r)](0);case"day":n[EN(r)](1);case"hour":n[CN(r)](0);case"minute":n[AN(r)](0);case"second":n[MN(r)](0),n[xN(r)](0)}return n.getTime()}function tot(e,t,r,n){var i=1e4,o=TN,a=0;function s(M,x,D,B,V,F,G){for(var Z=new Date(x),q=x,et=Z[B]();q<D&&q<=n[1];)G.push({value:q}),et+=M,Z[V](et),q=Z.getTime();G.push({value:q,notAdd:!0})}function l(M,x,D){var B=[],V=!x.length;if(!Yit(Dc(M),n[0],n[1],r)){V&&(x=[{value:Qit(new Date(n[0]),M,r)},{value:n[1]}]);for(var F=0;F<x.length-1;F++){var G=x[F].value,Z=x[F+1].value;if(G!==Z){var q=void 0,et=void 0,At=void 0,Dt=!1;switch(M){case"year":q=Math.max(1,Math.round(t/ti/365)),et=aP(r),At=set(r);break;case"half-year":case"quarter":case"month":q=Zit(t),et=Nc(r),At=PN(r);break;case"week":case"half-week":case"day":q=qit(t),et=n_(r),At=EN(r),Dt=!0;break;case"half-day":case"quarter-day":case"hour":q=Kit(t),et=rp(r),At=CN(r);break;case"minute":q=m5(t,!0),et=i_(r),At=AN(r);break;case"second":q=m5(t,!1),et=o_(r),At=MN(r);break;case"millisecond":q=Jit(t),et=a_(r),At=xN(r);break}s(q,G,Z,et,At,Dt,B),M==="year"&&D.length>1&&F===0&&D.unshift({value:D[0].value-q})}}for(var F=0;F<B.length;F++)D.push(B[F]);return B}}for(var u=[],c=[],f=0,h=0,d=0;d<o.length&&a++<i;++d){var p=Dc(o[d]);if(!!iet(o[d])){l(o[d],u[u.length-1]||[],c);var v=o[d+1]?Dc(o[d+1]):null;if(p!==v){if(c.length){h=f,c.sort(function(M,x){return M.value-x.value});for(var m=[],g=0;g<c.length;++g){var _=c[g].value;(g===0||c[g-1].value!==_)&&(m.push(c[g]),_>=n[0]&&_<=n[1]&&f++)}var b=(n[1]-n[0])/t;if(f>b*1.5&&h>b/1.5||(u.push(m),f>b||e===o[d]))break}c=[]}}}for(var w=Er(Lt(u,function(M){return Er(M,function(x){return x.value>=n[0]&&x.value<=n[1]&&!x.notAdd})}),function(M){return M.length>0}),T=[],S=w.length-1,d=0;d<w.length;++d)for(var k=w[d],C=0;C<k.length;++C)T.push({value:k[C].value,level:S-d});T.sort(function(M,x){return M.value-x.value});for(var E=[],d=0;d<T.length;++d)(d===0||T[d].value!==T[d-1].value)&&E.push(T[d]);return E}Ma.registerClass(c$);const eot=c$;var _5=Ma.prototype,Cd=Fp.prototype,rot=Ke,not=Math.floor,iot=Math.ceil,tv=Math.pow,pi=Math.log,PP=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="log",r.base=10,r._originalScale=new Fp,r._interval=0,r}return t.prototype.getTicks=function(r){var n=this._originalScale,i=this._extent,o=n.getExtent(),a=Cd.getTicks.call(this,r);return Lt(a,function(s){var l=s.value,u=Ke(tv(this.base,l));return u=l===i[0]&&this._fixMin?ev(u,o[0]):u,u=l===i[1]&&this._fixMax?ev(u,o[1]):u,{value:u}},this)},t.prototype.setExtent=function(r,n){var i=pi(this.base);r=pi(Math.max(0,r))/i,n=pi(Math.max(0,n))/i,Cd.setExtent.call(this,r,n)},t.prototype.getExtent=function(){var r=this.base,n=_5.getExtent.call(this);n[0]=tv(r,n[0]),n[1]=tv(r,n[1]);var i=this._originalScale,o=i.getExtent();return this._fixMin&&(n[0]=ev(n[0],o[0])),this._fixMax&&(n[1]=ev(n[1],o[1])),n},t.prototype.unionExtent=function(r){this._originalScale.unionExtent(r);var n=this.base;r[0]=pi(r[0])/pi(n),r[1]=pi(r[1])/pi(n),_5.unionExtent.call(this,r)},t.prototype.unionExtentFromData=function(r,n){this.unionExtent(r.getApproximateExtent(n))},t.prototype.calcNiceTicks=function(r){r=r||10;var n=this._extent,i=n[1]-n[0];if(!(i===1/0||i<=0)){var o=sJ(i),a=r/i*o;for(a<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&Math.abs(o)>0;)o*=10;var s=[Ke(iot(n[0]/o)*o),Ke(not(n[1]/o)*o)];this._interval=o,this._niceExtent=s}},t.prototype.calcNiceExtent=function(r){Cd.calcNiceExtent.call(this,r),this._fixMin=r.fixMin,this._fixMax=r.fixMax},t.prototype.parse=function(r){return r},t.prototype.contain=function(r){return r=pi(r)/pi(this.base),p_(r,this._extent)},t.prototype.normalize=function(r){return r=pi(r)/pi(this.base),v_(r,this._extent)},t.prototype.scale=function(r){return r=g_(r,this._extent),tv(this.base,r)},t.type="log",t}(Ma),f$=PP.prototype;f$.getMinorTicks=Cd.getMinorTicks;f$.getLabel=Cd.getLabel;function ev(e,t){return rot(e,ko(t))}Ma.registerClass(PP);const oot=PP;var aot=function(){function e(t,r,n){this._prepareParams(t,r,n)}return e.prototype._prepareParams=function(t,r,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal=t.type==="ordinal";this._needCrossZero=t.type==="interval"&&r.getNeedCrossZero&&r.getNeedCrossZero();var o=this._modelMinRaw=r.get("min",!0);Ut(o)?this._modelMinNum=rv(t,o({min:n[0],max:n[1]})):o!=="dataMin"&&(this._modelMinNum=rv(t,o));var a=this._modelMaxRaw=r.get("max",!0);if(Ut(a)?this._modelMaxNum=rv(t,a({min:n[0],max:n[1]})):a!=="dataMax"&&(this._modelMaxNum=rv(t,a)),i)this._axisDataLen=r.getCategories().length;else{var s=r.get("boundaryGap"),l=ct(s)?s:[s||0,s||0];typeof l[0]=="boolean"||typeof l[1]=="boolean"?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[ga(l[0],1),ga(l[1],1)]}},e.prototype.calculate=function(){var t=this._isOrdinal,r=this._dataMin,n=this._dataMax,i=this._axisDataLen,o=this._boundaryGapInner,a=t?null:n-r||Math.abs(r),s=this._modelMinRaw==="dataMin"?r:this._modelMinNum,l=this._modelMaxRaw==="dataMax"?n:this._modelMaxNum,u=s!=null,c=l!=null;s==null&&(s=t?i?0:NaN:r-o[0]*a),l==null&&(l=t?i?i-1:NaN:n+o[1]*a),(s==null||!isFinite(s))&&(s=NaN),(l==null||!isFinite(l))&&(l=NaN);var f=km(s)||km(l)||t&&!i;this._needCrossZero&&(s>0&&l>0&&!u&&(s=0),s<0&&l<0&&!c&&(l=0));var h=this._determinedMin,d=this._determinedMax;return h!=null&&(s=h,u=!0),d!=null&&(l=d,c=!0),{min:s,max:l,minFixed:u,maxFixed:c,isBlank:f}},e.prototype.modifyDataMinMax=function(t,r){this[lot[t]]=r},e.prototype.setDeterminedMinMax=function(t,r){var n=sot[t];this[n]=r},e.prototype.freeze=function(){this.frozen=!0},e}(),sot={min:"_determinedMin",max:"_determinedMax"},lot={min:"_dataMin",max:"_dataMax"};function uot(e,t,r){var n=e.rawExtentInfo;return n||(n=new aot(e,t,r),e.rawExtentInfo=n,n)}function rv(e,t){return t==null?null:km(t)?NaN:e.parse(t)}function h$(e,t){var r=e.type,n=uot(e,t,e.getExtent()).calculate();e.setBlank(n.isBlank);var i=n.min,o=n.max,a=t.ecModel;if(a&&r==="time"){var s=o$("bar",a),l=!1;if($(s,function(f){l=l||f.getBaseAxis()===t.axis}),l){var u=a$(s),c=cot(i,o,t,u);i=c.min,o=c.max}}return{extent:[i,o],fixMin:n.minFixed,fixMax:n.maxFixed}}function cot(e,t,r,n){var i=r.axis.getExtent(),o=i[1]-i[0],a=Wit(n,r.axis);if(a===void 0)return{min:e,max:t};var s=1/0;$(a,function(d){s=Math.min(d.offset,s)});var l=-1/0;$(a,function(d){l=Math.max(d.offset+d.width,l)}),s=Math.abs(s),l=Math.abs(l);var u=s+l,c=t-e,f=1-(s+l)/o,h=c/f-c;return t+=h*(l/u),e-=h*(s/u),{min:e,max:t}}function y5(e,t){var r=t,n=h$(e,r),i=n.extent,o=r.get("splitNumber");e instanceof oot&&(e.base=r.get("logBase"));var a=e.type,s=r.get("interval"),l=a==="interval"||a==="time";e.setExtent(i[0],i[1]),e.calcNiceExtent({splitNumber:o,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:l?r.get("minInterval"):null,maxInterval:l?r.get("maxInterval"):null}),s!=null&&e.setInterval&&e.setInterval(s)}function fot(e,t){if(t=t||e.get("type"),t)switch(t){case"category":return new r$({ordinalMeta:e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),extent:[1/0,-1/0]});case"time":return new eot({locale:e.ecModel.getLocaleModel(),useUTC:e.ecModel.get("useUTC")});default:return new(Ma.getClass(t)||Fp)}}function hot(e){var t=e.scale.getExtent(),r=t[0],n=t[1];return!(r>0&&n>0||r<0&&n<0)}function $p(e){var t=e.getLabelModel().get("formatter"),r=e.type==="category"?e.scale.getExtent()[0]:null;return e.scale.type==="time"?function(n){return function(i,o){return e.scale.getFormattedLabel(i,o,n)}}(t):Mt(t)?function(n){return function(i){var o=e.scale.getLabel(i),a=n.replace("{value}",o!=null?o:"");return a}}(t):Ut(t)?function(n){return function(i,o){return r!=null&&(o=i.value-r),n(EP(e,i),o,i.level!=null?{level:i.level}:null)}}(t):function(n){return e.scale.getLabel(n)}}function EP(e,t){return e.type==="category"?e.scale.getLabel(t):t.value}function dot(e){var t=e.model,r=e.scale;if(!(!t.get(["axisLabel","show"])||r.isBlank())){var n,i,o=r.getExtent();r instanceof r$?i=r.count():(n=r.getTicks(),i=n.length);var a=e.getLabelModel(),s=$p(e),l,u=1;i>40&&(u=Math.ceil(i/40));for(var c=0;c<i;c+=u){var f=n?n[c]:{value:o[0]+c},h=s(f,c),d=a.getTextRect(h),p=pot(d,a.get("rotate")||0);l?l.union(p):l=p}return l}}function pot(e,t){var r=t*Math.PI/180,n=e.width,i=e.height,o=n*Math.abs(Math.cos(r))+Math.abs(i*Math.sin(r)),a=n*Math.abs(Math.sin(r))+Math.abs(i*Math.cos(r)),s=new le(e.x,e.y,o,a);return s}function CP(e){var t=e.get("interval");return t==null?"auto":t}function d$(e){return e.type==="category"&&CP(e.getLabelModel())===0}function vot(e,t){var r={};return $(e.mapDimensionsAll(t),function(n){r[JF(e,n)]=!0}),ve(r)}var got=function(){function e(){}return e.prototype.getNeedCrossZero=function(){var t=this.option;return!t.scale},e.prototype.getCoordSysModel=function(){},e}(),b5=[],mot={registerPreprocessor:UF,registerProcessor:WF,registerPostInit:iit,registerPostUpdate:oit,registerUpdateLifecycle:wP,registerAction:gu,registerCoordinateSystem:ait,registerLayout:sit,registerVisual:mu,registerTransform:uit,registerLoading:GF,registerMap:lit,registerImpl:Fnt,PRIORITY:Knt,ComponentModel:Me,ComponentView:li,SeriesModel:Oo,ChartView:ni,registerComponentModel:function(e){Me.registerClass(e)},registerComponentView:function(e){li.registerClass(e)},registerSeriesModel:function(e){Oo.registerClass(e)},registerChartView:function(e){ni.registerClass(e)},registerSubTypeDefaulter:function(e,t){Me.registerSubTypeDefaulter(e,t)},registerPainter:function(e,t){eJ(e,t)}};function Yr(e){if(ct(e)){$(e,function(t){Yr(t)});return}fe(b5,e)>=0||(b5.push(e),Ut(e)&&(e={install:e}),e.install(mot))}var sp=Re();function _ot(e){return e.type==="category"?bot(e):Sot(e)}function yot(e,t){return e.type==="category"?wot(e,t):{ticks:Lt(e.scale.getTicks(),function(r){return r.value})}}function bot(e){var t=e.getLabelModel(),r=p$(e,t);return!t.get("show")||e.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}function p$(e,t){var r=v$(e,"labels"),n=CP(t),i=g$(r,n);if(i)return i;var o,a;return Ut(n)?o=y$(e,n):(a=n==="auto"?Tot(e):n,o=_$(e,a)),m$(r,n,{labels:o,labelCategoryInterval:a})}function wot(e,t){var r=v$(e,"ticks"),n=CP(t),i=g$(r,n);if(i)return i;var o,a;if((!t.get("show")||e.scale.isBlank())&&(o=[]),Ut(n))o=y$(e,n,!0);else if(n==="auto"){var s=p$(e,e.getLabelModel());a=s.labelCategoryInterval,o=Lt(s.labels,function(l){return l.tickValue})}else a=n,o=_$(e,a,!0);return m$(r,n,{ticks:o,tickCategoryInterval:a})}function Sot(e){var t=e.scale.getTicks(),r=$p(e);return{labels:Lt(t,function(n,i){return{level:n.level,formattedLabel:r(n,i),rawLabel:e.scale.getLabel(n),tickValue:n.value}})}}function v$(e,t){return sp(e)[t]||(sp(e)[t]=[])}function g$(e,t){for(var r=0;r<e.length;r++)if(e[r].key===t)return e[r].value}function m$(e,t,r){return e.push({key:t,value:r}),r}function Tot(e){var t=sp(e).autoInterval;return t!=null?t:sp(e).autoInterval=e.calculateCategoryInterval()}function kot(e){var t=Pot(e),r=$p(e),n=(t.axisRotate-t.labelRotate)/180*Math.PI,i=e.scale,o=i.getExtent(),a=i.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],u=e.dataToCoord(l+1)-e.dataToCoord(l),c=Math.abs(u*Math.cos(n)),f=Math.abs(u*Math.sin(n)),h=0,d=0;l<=o[1];l+=s){var p=0,v=0,m=Dk(r({value:l}),t.font,"center","top");p=m.width*1.3,v=m.height*1.3,h=Math.max(h,p,7),d=Math.max(d,v,7)}var g=h/c,_=d/f;isNaN(g)&&(g=1/0),isNaN(_)&&(_=1/0);var b=Math.max(0,Math.floor(Math.min(g,_))),w=sp(e.model),T=e.getExtent(),S=w.lastAutoInterval,k=w.lastTickCount;return S!=null&&k!=null&&Math.abs(S-b)<=1&&Math.abs(k-a)<=1&&S>b&&w.axisExtent0===T[0]&&w.axisExtent1===T[1]?b=S:(w.lastTickCount=a,w.lastAutoInterval=b,w.axisExtent0=T[0],w.axisExtent1=T[1]),b}function Pot(e){var t=e.getLabelModel();return{axisRotate:e.getRotate?e.getRotate():e.isHorizontal&&!e.isHorizontal()?90:0,labelRotate:t.get("rotate")||0,font:t.getFont()}}function _$(e,t,r){var n=$p(e),i=e.scale,o=i.getExtent(),a=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),u=o[0],c=i.count();u!==0&&l>1&&c/l>2&&(u=Math.round(Math.ceil(u/l)*l));var f=d$(e),h=a.get("showMinLabel")||f,d=a.get("showMaxLabel")||f;h&&u!==o[0]&&v(o[0]);for(var p=u;p<=o[1];p+=l)v(p);d&&p-l!==o[1]&&v(o[1]);function v(m){var g={value:m};s.push(r?m:{formattedLabel:n(g),rawLabel:i.getLabel(g),tickValue:m})}return s}function y$(e,t,r){var n=e.scale,i=$p(e),o=[];return $(n.getTicks(),function(a){var s=n.getLabel(a),l=a.value;t(a.value,s)&&o.push(r?l:{formattedLabel:i(a),rawLabel:s,tickValue:l})}),o}var w5=[0,1],Eot=function(){function e(t,r,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=r,this._extent=n||[0,0]}return e.prototype.contain=function(t){var r=this._extent,n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]);return t>=n&&t<=i},e.prototype.containData=function(t){return this.scale.contain(t)},e.prototype.getExtent=function(){return this._extent.slice()},e.prototype.getPixelPrecision=function(t){return iJ(t||this.scale.getExtent(),this._extent)},e.prototype.setExtent=function(t,r){var n=this._extent;n[0]=t,n[1]=r},e.prototype.dataToCoord=function(t,r){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&i.type==="ordinal"&&(n=n.slice(),S5(n,i.count())),ma(t,w5,n,r)},e.prototype.coordToData=function(t,r){var n=this._extent,i=this.scale;this.onBand&&i.type==="ordinal"&&(n=n.slice(),S5(n,i.count()));var o=ma(t,n,w5,r);return this.scale.scale(o)},e.prototype.pointToData=function(t,r){},e.prototype.getTicksCoords=function(t){t=t||{};var r=t.tickModel||this.getTickModel(),n=yot(this,r),i=n.ticks,o=Lt(i,function(s){return{coord:this.dataToCoord(this.scale.type==="ordinal"?this.scale.getRawOrdinalNumber(s):s),tickValue:s}},this),a=r.get("alignWithLabel");return Cot(this,o,a,t.clamp),o},e.prototype.getMinorTicksCoords=function(){if(this.scale.type==="ordinal")return[];var t=this.model.getModel("minorTick"),r=t.get("splitNumber");r>0&&r<100||(r=5);var n=this.scale.getMinorTicks(r),i=Lt(n,function(o){return Lt(o,function(a){return{coord:this.dataToCoord(a),tickValue:a}},this)},this);return i},e.prototype.getViewLabels=function(){return _ot(this).labels},e.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},e.prototype.getTickModel=function(){return this.model.getModel("axisTick")},e.prototype.getBandWidth=function(){var t=this._extent,r=this.scale.getExtent(),n=r[1]-r[0]+(this.onBand?1:0);n===0&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},e.prototype.calculateCategoryInterval=function(){return kot(this)},e}();function S5(e,t){var r=e[1]-e[0],n=t,i=r/n/2;e[0]+=i,e[1]-=i}function Cot(e,t,r,n){var i=t.length;if(!e.onBand||r||!i)return;var o=e.getExtent(),a,s;if(i===1)t[0].coord=o[0],a=t[1]={coord:o[0]};else{var l=t[i-1].tickValue-t[0].tickValue,u=(t[i-1].coord-t[0].coord)/l;$(t,function(d){d.coord-=u/2});var c=e.scale.getExtent();s=1+c[1]-t[i-1].tickValue,a={coord:t[i-1].coord+u*s},t.push(a)}var f=o[0]>o[1];h(t[0].coord,o[0])&&(n?t[0].coord=o[0]:t.shift()),n&&h(o[0],t[0].coord)&&t.unshift({coord:o[0]}),h(o[1],a.coord)&&(n?a.coord=o[1]:t.pop()),n&&h(a.coord,o[1])&&t.push({coord:o[1]});function h(d,p){return d=Ke(d),p=Ke(p),f?d>p:d<p}}const Aot=Eot;function Mot(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];if(!n.defaultAttr.ignore){var i=n.label,o=i.getComputedTransform(),a=i.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=i.style.margin||0,u=a.clone();u.applyTransform(o),u.x-=l/2,u.y-=l/2,u.width+=l,u.height+=l;var c=s?new Dm(a,o):null;t.push({label:i,labelLine:n.labelLine,rect:u,localRect:a,obb:c,priority:n.priority,defaultAttr:n.defaultAttr,layoutOption:n.computedLayoutOption,axisAligned:s,transform:o})}}return t}function xot(e){var t=[];e.sort(function(v,m){return m.priority-v.priority});var r=new le(0,0,0,0);function n(v){if(!v.ignore){var m=v.ensureState("emphasis");m.ignore==null&&(m.ignore=!1)}v.ignore=!0}for(var i=0;i<e.length;i++){var o=e[i],a=o.axisAligned,s=o.localRect,l=o.transform,u=o.label,c=o.labelLine;r.copy(o.rect),r.width-=.1,r.height-=.1,r.x+=.05,r.y+=.05;for(var f=o.obb,h=!1,d=0;d<t.length;d++){var p=t[d];if(!!r.intersect(p.rect)){if(a&&p.axisAligned){h=!0;break}if(p.obb||(p.obb=new Dm(p.localRect,p.transform)),f||(f=new Dm(s,l)),f.intersect(p.obb)){h=!0;break}}}h?(n(u),c&&n(c)):(u.attr("ignore",o.defaultAttr.ignore),c&&c.attr("ignore",o.defaultAttr.labelGuideIgnore),t.push(o))}}function T5(e,t,r){var n=fu.createCanvas(),i=t.getWidth(),o=t.getHeight(),a=n.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=i+"px",a.height=o+"px",n.setAttribute("data-zr-dom-id",e)),n.width=i*r,n.height=o*r,n}var Lot=function(e){Ce(t,e);function t(r,n,i){var o=e.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null;var a;i=i||Lm,typeof r=="string"?a=T5(r,n,i):Rt(r)&&(a=r,r=a.id),o.id=r,o.dom=a;var s=a.style;return s&&(j7(a),a.onselectstart=function(){return!1},s.padding="0",s.margin="0",s.borderWidth="0"),o.painter=n,o.dpr=i,o}return t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var r=this.dpr;this.domBack=T5("back-"+this.id,this.painter,r),this.ctxBack=this.domBack.getContext("2d"),r!==1&&this.ctxBack.scale(r,r)},t.prototype.createRepaintRects=function(r,n,i,o){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var a=[],s=this.maxRepaintRectCount,l=!1,u=new le(0,0,0,0);function c(_){if(!(!_.isFinite()||_.isZero()))if(a.length===0){var b=new le(0,0,0,0);b.copy(_),a.push(b)}else{for(var w=!1,T=1/0,S=0,k=0;k<a.length;++k){var C=a[k];if(C.intersect(_)){var E=new le(0,0,0,0);E.copy(C),E.union(_),a[k]=E,w=!0;break}else if(l){u.copy(_),u.union(C);var M=_.width*_.height,x=C.width*C.height,D=u.width*u.height,B=D-M-x;B<T&&(T=B,S=k)}}if(l&&(a[S].union(_),w=!0),!w){var b=new le(0,0,0,0);b.copy(_),a.push(b)}l||(l=a.length>=s)}}for(var f=this.__startIndex;f<this.__endIndex;++f){var h=r[f];if(h){var d=h.shouldBePainted(i,o,!0,!0),p=h.__isRendered&&(h.__dirty&Mn||!d)?h.getPrevPaintRect():null;p&&c(p);var v=d&&(h.__dirty&Mn||!h.__isRendered)?h.getPaintRect():null;v&&c(v)}}for(var f=this.__prevStartIndex;f<this.__prevEndIndex;++f){var h=n[f],d=h.shouldBePainted(i,o,!0,!0);if(h&&(!d||!h.__zr)&&h.__isRendered){var p=h.getPrevPaintRect();p&&c(p)}}var m;do{m=!1;for(var f=0;f<a.length;){if(a[f].isZero()){a.splice(f,1);continue}for(var g=f+1;g<a.length;)a[f].intersect(a[g])?(m=!0,a[f].union(a[g]),a.splice(g,1)):g++;f++}}while(m);return this._paintRects=a,a},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(r,n){var i=this.dpr,o=this.dom,a=o.style,s=this.domBack;a&&(a.width=r+"px",a.height=n+"px"),o.width=r*i,o.height=n*i,s&&(s.width=r*i,s.height=n*i,i!==1&&this.ctxBack.scale(i,i))},t.prototype.clear=function(r,n,i){var o=this.dom,a=this.ctx,s=o.width,l=o.height;n=n||this.clearColor;var u=this.motionBlur&&!r,c=this.lastFrameAlpha,f=this.dpr,h=this;u&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,s/f,l/f));var d=this.domBack;function p(v,m,g,_){if(a.clearRect(v,m,g,_),n&&n!=="transparent"){var b=void 0;U1(n)?(b=n.__canvasGradient||s3(a,n,{x:0,y:0,width:g,height:_}),n.__canvasGradient=b):CZ(n)&&(n.scaleX=n.scaleX||f,n.scaleY=n.scaleY||f,b=l3(a,n,{dirty:function(){h.setUnpainted(),h.__painter.refresh()}})),a.save(),a.fillStyle=b||n,a.fillRect(v,m,g,_),a.restore()}u&&(a.save(),a.globalAlpha=c,a.drawImage(d,v,m,g,_),a.restore())}!i||u?p(0,0,s,l):i.length&&$(i,function(v){p(v.x*f,v.y*f,v.width*f,v.height*f)})},t}(Gi);const E2=Lot;var k5=1e5,vl=314159,nv=.01,Iot=.001;function Oot(e){return e?e.__builtin__?!0:!(typeof e.resize!="function"||typeof e.refresh!="function"):!1}function Rot(e,t){var r=document.createElement("div");return r.style.cssText=["position:relative","width:"+e+"px","height:"+t+"px","padding:0","margin:0","border-width:0"].join(";")+";",r}var Dot=function(){function e(t,r,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var o=!t.nodeName||t.nodeName.toUpperCase()==="CANVAS";this._opts=n=at({},n||{}),this.dpr=n.devicePixelRatio||Lm,this._singleCanvas=o,this.root=t;var a=t.style;a&&(j7(t),t.innerHTML=""),this.storage=r;var s=this._zlevelList;this._prevDisplayList=[];var l=this._layers;if(o){var c=t,f=c.width,h=c.height;n.width!=null&&(f=n.width),n.height!=null&&(h=n.height),this.dpr=n.devicePixelRatio||1,c.width=f*this.dpr,c.height=h*this.dpr,this._width=f,this._height=h;var d=new E2(c,this,this.dpr);d.__builtin__=!0,d.initContext(),l[vl]=d,d.zlevel=vl,s.push(vl),this._domRoot=t}else{this._width=Y0(t,0,n),this._height=Y0(t,1,n);var u=this._domRoot=Rot(this._width,this._height);t.appendChild(u)}}return e.prototype.getType=function(){return"canvas"},e.prototype.isSingleCanvas=function(){return this._singleCanvas},e.prototype.getViewportRoot=function(){return this._domRoot},e.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},e.prototype.refresh=function(t){var r=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(r,n,t,this._redrawId);for(var o=0;o<i.length;o++){var a=i[o],s=this._layers[a];if(!s.__builtin__&&s.refresh){var l=o===0?this._backgroundColor:null;s.refresh(l)}}return this._opts.useDirtyRect&&(this._prevDisplayList=r.slice()),this},e.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},e.prototype._paintHoverList=function(t){var r=t.length,n=this._hoverlayer;if(n&&n.clear(),!!r){for(var i={inHover:!0,viewWidth:this._width,viewHeight:this._height},o,a=0;a<r;a++){var s=t[a];s.__inHover&&(n||(n=this._hoverlayer=this.getLayer(k5)),o||(o=n.ctx,o.save()),Ol(o,s,i,a===r-1))}o&&o.restore()}},e.prototype.getHoverLayer=function(){return this.getLayer(k5)},e.prototype.paintOne=function(t,r){PF(t,r)},e.prototype._paintList=function(t,r,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var o=this._doPaintList(t,r,n),a=o.finished,s=o.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),s&&this._paintHoverList(t),a)this.eachLayer(function(u){u.afterBrush&&u.afterBrush()});else{var l=this;ES(function(){l._paintList(t,r,n,i)})}}},e.prototype._compositeManually=function(){var t=this.getLayer(vl).ctx,r=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,r,n),this.eachBuiltinLayer(function(i){i.virtual&&t.drawImage(i.dom,0,0,r,n)})},e.prototype._doPaintList=function(t,r,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],u=this._layers[l];u.__builtin__&&u!==this._hoverlayer&&(u.__dirty||n)&&o.push(u)}for(var c=!0,f=!1,h=function(v){var m=o[v],g=m.ctx,_=a&&m.createRepaintRects(t,r,d._width,d._height),b=n?m.__startIndex:m.__drawIndex,w=!n&&m.incremental&&Date.now,T=w&&Date.now(),S=m.zlevel===d._zlevelList[0]?d._backgroundColor:null;if(m.__startIndex===m.__endIndex)m.clear(!1,S,_);else if(b===m.__startIndex){var k=t[b];(!k.incremental||!k.notClear||n)&&m.clear(!1,S,_)}b===-1&&(console.error("For some unknown reason. drawIndex is -1"),b=m.__startIndex);var C,E=function(B){var V={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(C=b;C<m.__endIndex;C++){var F=t[C];if(F.__inHover&&(f=!0),i._doPaintEl(F,m,a,B,V,C===m.__endIndex-1),w){var G=Date.now()-T;if(G>15)break}}V.prevElClipPaths&&g.restore()};if(_)if(_.length===0)C=m.__endIndex;else for(var M=d.dpr,x=0;x<_.length;++x){var D=_[x];g.save(),g.beginPath(),g.rect(D.x*M,D.y*M,D.width*M,D.height*M),g.clip(),E(D),g.restore()}else g.save(),E(),g.restore();m.__drawIndex=C,m.__drawIndex<m.__endIndex&&(c=!1)},d=this,p=0;p<o.length;p++)h(p);return Yt.wxa&&$(this._layers,function(v){v&&v.ctx&&v.ctx.draw&&v.ctx.draw()}),{finished:c,needsRefreshHover:f}},e.prototype._doPaintEl=function(t,r,n,i,o,a){var s=r.ctx;if(n){var l=t.getPaintRect();(!i||l&&l.intersect(i))&&(Ol(s,t,o,a),t.setPrevPaintRect(l))}else Ol(s,t,o,a)},e.prototype.getLayer=function(t,r){this._singleCanvas&&!this._needsManuallyCompositing&&(t=vl);var n=this._layers[t];return n||(n=new E2("zr_"+t,this,this.dpr),n.zlevel=t,n.__builtin__=!0,this._layerConfig[t]?se(n,this._layerConfig[t],!0):this._layerConfig[t-nv]&&se(n,this._layerConfig[t-nv],!0),r&&(n.virtual=r),this.insertLayer(t,n),n.initContext()),n},e.prototype.insertLayer=function(t,r){var n=this._layers,i=this._zlevelList,o=i.length,a=this._domRoot,s=null,l=-1;if(!n[t]&&!!Oot(r)){if(o>0&&t>i[0]){for(l=0;l<o-1&&!(i[l]<t&&i[l+1]>t);l++);s=n[i[l]]}if(i.splice(l+1,0,t),n[t]=r,!r.virtual)if(s){var u=s.dom;u.nextSibling?a.insertBefore(r.dom,u.nextSibling):a.appendChild(r.dom)}else a.firstChild?a.insertBefore(r.dom,a.firstChild):a.appendChild(r.dom);r.__painter=this}},e.prototype.eachLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i];t.call(r,this._layers[o],o)}},e.prototype.eachBuiltinLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__&&t.call(r,a,o)}},e.prototype.eachOtherLayer=function(t,r){for(var n=this._zlevelList,i=0;i<n.length;i++){var o=n[i],a=this._layers[o];a.__builtin__||t.call(r,a,o)}},e.prototype.getLayers=function(){return this._layers},e.prototype._updateLayerStatus=function(t){this.eachBuiltinLayer(function(f,h){f.__dirty=f.__used=!1});function r(f){o&&(o.__endIndex!==f&&(o.__dirty=!0),o.__endIndex=f)}if(this._singleCanvas)for(var n=1;n<t.length;n++){var i=t[n];if(i.zlevel!==t[n-1].zlevel||i.incremental){this._needsManuallyCompositing=!0;break}}var o=null,a=0,s,l;for(l=0;l<t.length;l++){var i=t[l],u=i.zlevel,c=void 0;s!==u&&(s=u,a=0),i.incremental?(c=this.getLayer(u+Iot,this._needsManuallyCompositing),c.incremental=!0,a=1):c=this.getLayer(u+(a>0?nv:0),this._needsManuallyCompositing),c.__builtin__||Ak("ZLevel "+u+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==l&&(c.__dirty=!0),c.__startIndex=l,c.incremental?c.__drawIndex=-1:c.__drawIndex=l,r(l),o=c),i.__dirty&Mn&&!i.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=l))}r(l),this.eachBuiltinLayer(function(f,h){!f.__used&&f.getElementCount()>0&&(f.__dirty=!0,f.__startIndex=f.__endIndex=f.__drawIndex=0),f.__dirty&&f.__drawIndex<0&&(f.__drawIndex=f.__startIndex)})},e.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},e.prototype._clearLayer=function(t){t.clear()},e.prototype.setBackgroundColor=function(t){this._backgroundColor=t,$(this._layers,function(r){r.setUnpainted()})},e.prototype.configLayer=function(t,r){if(r){var n=this._layerConfig;n[t]?se(n[t],r,!0):n[t]=r;for(var i=0;i<this._zlevelList.length;i++){var o=this._zlevelList[i];if(o===t||o===t+nv){var a=this._layers[o];se(a,n[t],!0)}}}},e.prototype.delLayer=function(t){var r=this._layers,n=this._zlevelList,i=r[t];!i||(i.dom.parentNode.removeChild(i.dom),delete r[t],n.splice(fe(n,t),1))},e.prototype.resize=function(t,r){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,o=this.root;if(t!=null&&(i.width=t),r!=null&&(i.height=r),t=Y0(o,0,i),r=Y0(o,1,i),n.style.display="",this._width!==t||r!==this._height){n.style.width=t+"px",n.style.height=r+"px";for(var a in this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(t,r);this.refresh(!0)}this._width=t,this._height=r}else{if(t==null||r==null)return;this._width=t,this._height=r,this.getLayer(vl).resize(t,r)}return this},e.prototype.clearLayer=function(t){var r=this._layers[t];r&&r.clear()},e.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},e.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[vl].dom;var r=new E2("image",this,t.pixelRatio||this.dpr);r.initContext(),r.clear(!1,t.backgroundColor||this._backgroundColor);var n=r.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=r.dom.width,o=r.dom.height;this.eachLayer(function(f){f.__builtin__?n.drawImage(f.dom,0,0,i,o):f.renderToCanvas&&(n.save(),f.renderToCanvas(n),n.restore())})}else for(var a={inHover:!1,viewWidth:this._width,viewHeight:this._height},s=this.storage.getDisplayList(!0),l=0,u=s.length;l<u;l++){var c=s[l];Ol(n,c,a,l===u-1)}return r.dom},e.prototype.getWidth=function(){return this._width},e.prototype.getHeight=function(){return this._height},e}();const Not=Dot;function _f(e){e.registerPainter("canvas",Not)}var Fot=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r){return Np(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(r){var n=new Ne,i=zi("line",0,r.itemHeight/2,r.itemWidth,0,r.lineStyle.stroke,!1);n.add(i),i.setStyle(r.lineStyle);var o=this.getData().getVisual("symbol"),a=this.getData().getVisual("symbolRotate"),s=o==="none"?"circle":o,l=r.itemHeight*.8,u=zi(s,(r.itemWidth-l)/2,(r.itemHeight-l)/2,l,l,r.itemStyle.fill);n.add(u),u.setStyle(r.itemStyle);var c=r.iconRotate==="inherit"?a:r.iconRotate||0;return u.rotation=c*Math.PI/180,u.setOrigin([r.itemWidth/2,r.itemHeight/2]),s.indexOf("empty")>-1&&(u.style.stroke=u.style.fill,u.style.fill="#fff",u.style.lineWidth=2),n},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Oo);const $ot=Fot;function lp(e,t){var r=e.mapDimensionsAll("defaultedLabel"),n=r.length;if(n===1){var i=Zc(e,t,r[0]);return i!=null?i+"":null}else if(n){for(var o=[],a=0;a<r.length;a++)o.push(Zc(e,t,r[a]));return o.join(" ")}}function b$(e,t){var r=e.mapDimensionsAll("defaultedLabel");if(!ct(t))return t+"";for(var n=[],i=0;i<r.length;i++){var o=e.getDimensionIndex(r[i]);o>=0&&n.push(t[o])}return n.join(" ")}var Bot=function(e){yt(t,e);function t(r,n,i,o){var a=e.call(this)||this;return a.updateData(r,n,i,o),a}return t.prototype._createSymbol=function(r,n,i,o,a){this.removeAll();var s=zi(r,-1,-1,2,2,null,a);s.attr({z2:100,culling:!0,scaleX:o[0]/2,scaleY:o[1]/2}),s.drift=zot,this._symbolType=r,this.add(s)},t.prototype.stopSymbolAnimation=function(r){this.childAt(0).stopAnimation(null,r)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){Zd(this.childAt(0))},t.prototype.downplay=function(){Kd(this.childAt(0))},t.prototype.setZ=function(r,n){var i=this.childAt(0);i.zlevel=r,i.z=n},t.prototype.setDraggable=function(r,n){var i=this.childAt(0);i.draggable=r,i.cursor=!n&&r?"move":i.cursor},t.prototype.updateData=function(r,n,i,o){this.silent=!1;var a=r.getItemVisual(n,"symbol")||"circle",s=r.hostModel,l=t.getSymbolSize(r,n),u=a!==this._symbolType,c=o&&o.disableAnimation;if(u){var f=r.getItemVisual(n,"symbolKeepAspect");this._createSymbol(a,r,n,l,f)}else{var h=this.childAt(0);h.silent=!1;var d={scaleX:l[0]/2,scaleY:l[1]/2};c?h.attr(d):_r(h,d,s,n),cN(h)}if(this._updateCommon(r,n,l,i,o),u){var h=this.childAt(0);if(!c){var d={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:h.style.opacity}};h.scaleX=h.scaleY=0,h.style.opacity=0,Io(h,d,s,n)}}c&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(r,n,i,o,a){var s=this.childAt(0),l=r.hostModel,u,c,f,h,d,p,v,m,g;if(o&&(u=o.emphasisItemStyle,c=o.blurItemStyle,f=o.selectItemStyle,h=o.focus,d=o.blurScope,v=o.labelStatesModels,m=o.hoverScale,g=o.cursorStyle,p=o.emphasisDisabled),!o||r.hasItemOption){var _=o&&o.itemModel?o.itemModel:r.getItemModel(n),b=_.getModel("emphasis");u=b.getModel("itemStyle").getItemStyle(),f=_.getModel(["select","itemStyle"]).getItemStyle(),c=_.getModel(["blur","itemStyle"]).getItemStyle(),h=b.get("focus"),d=b.get("blurScope"),p=b.get("disabled"),v=pu(_),m=b.getShallow("scale"),g=_.getShallow("cursor")}var w=r.getItemVisual(n,"symbolRotate");s.attr("rotation",(w||0)*Math.PI/180||0);var T=mP(r.getItemVisual(n,"symbolOffset"),i);T&&(s.x=T[0],s.y=T[1]),g&&s.attr("cursor",g);var S=r.getItemVisual(n,"style"),k=S.fill;if(s instanceof Ea){var C=s.style;s.useStyle(at({image:C.image,x:C.x,y:C.y,width:C.width,height:C.height},S))}else s.__isEmptyBrush?s.useStyle(at({},S)):s.useStyle(S),s.style.decal=null,s.setColor(k,a&&a.symbolInnerColor),s.style.strokeNoScale=!0;var E=r.getItemVisual(n,"liftZ"),M=this._z2;E!=null?M==null&&(this._z2=s.z2,s.z2+=E):M!=null&&(s.z2=M,this._z2=null);var x=a&&a.useNameLabel;vf(s,v,{labelFetcher:l,labelDataIndex:n,defaultText:D,inheritColor:k,defaultOpacity:S.opacity});function D(F){return x?r.getName(F):lp(r,F)}this._sizeX=i[0]/2,this._sizeY=i[1]/2;var B=s.ensureState("emphasis");B.style=u,s.ensureState("select").style=f,s.ensureState("blur").style=c;var V=m==null||m===!0?Math.max(1.1,3/this._sizeY):isFinite(m)&&m>0?+m:1;B.scaleX=this._sizeX*V,B.scaleY=this._sizeY*V,this.setSymbolScale(1),tu(this,h,d,p)},t.prototype.setSymbolScale=function(r){this.scaleX=this.scaleY=r},t.prototype.fadeOut=function(r,n,i){var o=this.childAt(0),a=ae(this).dataIndex,s=i&&i.animation;if(this.silent=o.silent=!0,i&&i.fadeLabel){var l=o.getTextContent();l&&eu(l,{style:{opacity:0}},n,{dataIndex:a,removeOpt:s,cb:function(){o.removeTextContent()}})}else o.removeTextContent();eu(o,{style:{opacity:0},scaleX:0,scaleY:0},n,{dataIndex:a,cb:r,removeOpt:s})},t.getSymbolSize=function(r,n){return wF(r.getItemVisual(n,"symbolSize"))},t}(Ne);function zot(e,t){this.parent.drift(e,t)}const m_=Bot;function C2(e,t,r,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(r))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&e.getItemVisual(r,"symbol")!=="none"}function P5(e){return e!=null&&!Rt(e)&&(e={isIgnore:e}),e||{}}function E5(e){var t=e.hostModel,r=t.getModel("emphasis");return{emphasisItemStyle:r.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:r.get("focus"),blurScope:r.get("blurScope"),emphasisDisabled:r.get("disabled"),hoverScale:r.get("scale"),labelStatesModels:pu(t),cursorStyle:t.get("cursor")}}var Vot=function(){function e(t){this.group=new Ne,this._SymbolCtor=t||m_}return e.prototype.updateData=function(t,r){this._progressiveEls=null,r=P5(r);var n=this.group,i=t.hostModel,o=this._data,a=this._SymbolCtor,s=r.disableAnimation,l=E5(t),u={disableAnimation:s},c=r.getSymbolPoint||function(f){return t.getItemLayout(f)};o||n.removeAll(),t.diff(o).add(function(f){var h=c(f);if(C2(t,h,f,r)){var d=new a(t,f,l,u);d.setPosition(h),t.setItemGraphicEl(f,d),n.add(d)}}).update(function(f,h){var d=o.getItemGraphicEl(h),p=c(f);if(!C2(t,p,f,r)){n.remove(d);return}var v=t.getItemVisual(f,"symbol")||"circle",m=d&&d.getSymbolType&&d.getSymbolType();if(!d||m&&m!==v)n.remove(d),d=new a(t,f,l,u),d.setPosition(p);else{d.updateData(t,f,l,u);var g={x:p[0],y:p[1]};s?d.attr(g):_r(d,g,i)}n.add(d),t.setItemGraphicEl(f,d)}).remove(function(f){var h=o.getItemGraphicEl(f);h&&h.fadeOut(function(){n.remove(h)},i)}).execute(),this._getSymbolPoint=c,this._data=t},e.prototype.updateLayout=function(){var t=this,r=this._data;r&&r.eachItemGraphicEl(function(n,i){var o=t._getSymbolPoint(i);n.setPosition(o),n.markRedraw()})},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=E5(t),this._data=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r,n){this._progressiveEls=[],n=P5(n);function i(l){l.isGroup||(l.incremental=!0,l.ensureState("emphasis").hoverLayer=!0)}for(var o=t.start;o<t.end;o++){var a=r.getItemLayout(o);if(C2(r,a,o,n)){var s=new this._SymbolCtor(r,o,this._seriesScope);s.traverse(i),s.setPosition(a),this.group.add(s),r.setItemGraphicEl(o,s),this._progressiveEls.push(s)}}},e.prototype.eachRendered=function(t){pf(this._progressiveEls||this.group,t)},e.prototype.remove=function(t){var r=this.group,n=this._data;n&&t?n.eachItemGraphicEl(function(i){i.fadeOut(function(){r.remove(i)},n.hostModel)}):r.removeAll()},e}();const w$=Vot;function S$(e,t,r){var n=e.getBaseAxis(),i=e.getOtherAxis(n),o=Uot(i,r),a=n.dim,s=i.dim,l=t.mapDimension(s),u=t.mapDimension(a),c=s==="x"||s==="radius"?1:0,f=Lt(e.dimensions,function(p){return t.mapDimension(p)}),h=!1,d=t.getCalculationInfo("stackResultDimension");return nu(t,f[0])&&(h=!0,f[0]=d),nu(t,f[1])&&(h=!0,f[1]=d),{dataDimsForPoint:f,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!h,valueDim:l,baseDim:u,baseDataOffset:c,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Uot(e,t){var r=0,n=e.scale.getExtent();return t==="start"?r=n[0]:t==="end"?r=n[1]:Se(t)&&!isNaN(t)?r=t:n[0]>0?r=n[0]:n[1]<0&&(r=n[1]),r}function T$(e,t,r,n){var i=NaN;e.stacked&&(i=r.get(r.getCalculationInfo("stackedOverDimension"),n)),isNaN(i)&&(i=e.valueStart);var o=e.baseDataOffset,a=[];return a[o]=r.get(e.baseDim,n),a[1-o]=i,t.dataToPoint(a)}function Wot(e,t){var r=[];return t.diff(e).add(function(n){r.push({cmd:"+",idx:n})}).update(function(n,i){r.push({cmd:"=",idx:i,idx1:n})}).remove(function(n){r.push({cmd:"-",idx:n})}).execute(),r}function Got(e,t,r,n,i,o,a,s){for(var l=Wot(e,t),u=[],c=[],f=[],h=[],d=[],p=[],v=[],m=S$(i,t,a),g=e.getLayout("points")||[],_=t.getLayout("points")||[],b=0;b<l.length;b++){var w=l[b],T=!0,S=void 0,k=void 0;switch(w.cmd){case"=":S=w.idx*2,k=w.idx1*2;var C=g[S],E=g[S+1],M=_[k],x=_[k+1];(isNaN(C)||isNaN(E))&&(C=M,E=x),u.push(C,E),c.push(M,x),f.push(r[S],r[S+1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(w.idx1));break;case"+":var D=w.idx,B=m.dataDimsForPoint,V=i.dataToPoint([t.get(B[0],D),t.get(B[1],D)]);k=D*2,u.push(V[0],V[1]),c.push(_[k],_[k+1]);var F=T$(m,i,t,D);f.push(F[0],F[1]),h.push(n[k],n[k+1]),v.push(t.getRawIndex(D));break;case"-":T=!1}T&&(d.push(w),p.push(p.length))}p.sort(function(Y,it){return v[Y]-v[it]});for(var G=u.length,Z=la(G),q=la(G),et=la(G),At=la(G),Dt=[],b=0;b<p.length;b++){var Tt=p[b],kt=b*2,Xt=Tt*2;Z[kt]=u[Xt],Z[kt+1]=u[Xt+1],q[kt]=c[Xt],q[kt+1]=c[Xt+1],et[kt]=f[Xt],et[kt+1]=f[Xt+1],At[kt]=h[Xt],At[kt+1]=h[Xt+1],Dt[b]=d[Tt]}return{current:Z,next:q,stackedOnCurrent:et,stackedOnNext:At,status:Dt}}var Va=Math.min,Ua=Math.max;function Wl(e,t){return isNaN(e)||isNaN(t)}function v3(e,t,r,n,i,o,a,s,l){for(var u,c,f,h,d,p,v=r,m=0;m<n;m++){var g=t[v*2],_=t[v*2+1];if(v>=i||v<0)break;if(Wl(g,_)){if(l){v+=o;continue}break}if(v===r)e[o>0?"moveTo":"lineTo"](g,_),f=g,h=_;else{var b=g-u,w=_-c;if(b*b+w*w<.5){v+=o;continue}if(a>0){for(var T=v+o,S=t[T*2],k=t[T*2+1];S===g&&k===_&&m<n;)m++,T+=o,v+=o,S=t[T*2],k=t[T*2+1],g=t[v*2],_=t[v*2+1],b=g-u,w=_-c;var C=m+1;if(l)for(;Wl(S,k)&&C<n;)C++,T+=o,S=t[T*2],k=t[T*2+1];var E=.5,M=0,x=0,D=void 0,B=void 0;if(C>=n||Wl(S,k))d=g,p=_;else{M=S-u,x=k-c;var V=g-u,F=S-g,G=_-c,Z=k-_,q=void 0,et=void 0;if(s==="x"){q=Math.abs(V),et=Math.abs(F);var At=M>0?1:-1;d=g-At*q*a,p=_,D=g+At*et*a,B=_}else if(s==="y"){q=Math.abs(G),et=Math.abs(Z);var Dt=x>0?1:-1;d=g,p=_-Dt*q*a,D=g,B=_+Dt*et*a}else q=Math.sqrt(V*V+G*G),et=Math.sqrt(F*F+Z*Z),E=et/(et+q),d=g-M*a*(1-E),p=_-x*a*(1-E),D=g+M*a*E,B=_+x*a*E,D=Va(D,Ua(S,g)),B=Va(B,Ua(k,_)),D=Ua(D,Va(S,g)),B=Ua(B,Va(k,_)),M=D-g,x=B-_,d=g-M*q/et,p=_-x*q/et,d=Va(d,Ua(u,g)),p=Va(p,Ua(c,_)),d=Ua(d,Va(u,g)),p=Ua(p,Va(c,_)),M=g-d,x=_-p,D=g+M*et/q,B=_+x*et/q}e.bezierCurveTo(f,h,d,p,g,_),f=D,h=B}else e.lineTo(g,_)}u=g,c=_,v+=o}return m}var k$=function(){function e(){this.smooth=0,this.smoothConstraint=!0}return e}(),jot=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polyline",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new k$},t.prototype.buildPath=function(r,n){var i=n.points,o=0,a=i.length/2;if(n.connectNulls){for(;a>0&&Wl(i[a*2-2],i[a*2-1]);a--);for(;o<a&&Wl(i[o*2],i[o*2+1]);o++);}for(;o<a;)o+=v3(r,i,o,a,a,1,n.smooth,n.smoothMonotone,n.connectNulls)+1},t.prototype.getPointOn=function(r,n){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var i=this.path,o=i.data,a=Ql.CMD,s,l,u=n==="x",c=[],f=0;f<o.length;){var h=o[f++],d=void 0,p=void 0,v=void 0,m=void 0,g=void 0,_=void 0,b=void 0;switch(h){case a.M:s=o[f++],l=o[f++];break;case a.L:if(d=o[f++],p=o[f++],b=u?(r-s)/(d-s):(r-l)/(p-l),b<=1&&b>=0){var w=u?(p-l)*b+l:(d-s)*b+s;return u?[r,w]:[w,r]}s=d,l=p;break;case a.C:d=o[f++],p=o[f++],v=o[f++],m=o[f++],g=o[f++],_=o[f++];var T=u?Cm(s,d,v,g,r,c):Cm(l,p,m,_,r,c);if(T>0)for(var S=0;S<T;S++){var k=c[S];if(k<=1&&k>=0){var w=u?cr(l,p,m,_,k):cr(s,d,v,g,k);return u?[r,w]:[w,r]}}s=g,l=_;break}}},t}(de),Hot=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(k$),Xot=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-polygon",n}return t.prototype.getDefaultShape=function(){return new Hot},t.prototype.buildPath=function(r,n){var i=n.points,o=n.stackedOnPoints,a=0,s=i.length/2,l=n.smoothMonotone;if(n.connectNulls){for(;s>0&&Wl(i[s*2-2],i[s*2-1]);s--);for(;a<s&&Wl(i[a*2],i[a*2+1]);a++);}for(;a<s;){var u=v3(r,i,a,s,s,1,n.smooth,l,n.connectNulls);v3(r,o,a+u-1,u,s,-1,n.stackedOnSmooth,l,n.connectNulls),a+=u+1,r.closePath()}},t}(de);function P$(e,t,r,n,i){var o=e.getArea(),a=o.x,s=o.y,l=o.width,u=o.height,c=r.get(["lineStyle","width"])||2;a-=c/2,s-=c/2,l+=c,u+=c,a=Math.floor(a),l=Math.round(l);var f=new Qe({shape:{x:a,y:s,width:l,height:u}});if(t){var h=e.getBaseAxis(),d=h.isHorizontal(),p=h.inverse;d?(p&&(f.shape.x+=l),f.shape.width=0):(p||(f.shape.y+=u),f.shape.height=0);var v=Ut(i)?function(m){i(m,f)}:null;Io(f,{shape:{width:l,height:u,x:a,y:s}},r,null,n,v)}return f}function E$(e,t,r){var n=e.getArea(),i=Ke(n.r0,1),o=Ke(n.r,1),a=new Rp({shape:{cx:Ke(e.cx,1),cy:Ke(e.cy,1),r0:i,r:o,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}});if(t){var s=e.getBaseAxis().dim==="angle";s?a.shape.endAngle=n.startAngle:a.shape.r=i,Io(a,{shape:{endAngle:n.endAngle,r:o}},r)}return a}function C$(e,t,r,n,i){if(e){if(e.type==="polar")return E$(e,t,r);if(e.type==="cartesian2d")return P$(e,t,r,n,i)}else return null;return null}function yf(e,t){return e.type===t}function C5(e,t){if(e.length===t.length){for(var r=0;r<e.length;r++)if(e[r]!==t[r])return;return!0}}function A5(e){for(var t=1/0,r=1/0,n=-1/0,i=-1/0,o=0;o<e.length;){var a=e[o++],s=e[o++];isNaN(a)||(t=Math.min(a,t),n=Math.max(a,n)),isNaN(s)||(r=Math.min(s,r),i=Math.max(s,i))}return[[t,r],[n,i]]}function M5(e,t){var r=A5(e),n=r[0],i=r[1],o=A5(t),a=o[0],s=o[1];return Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(i[0]-s[0]),Math.abs(i[1]-s[1]))}function x5(e){return Se(e)?e:e?.5:0}function Yot(e,t,r){if(!r.valueDim)return[];for(var n=t.count(),i=la(n*2),o=0;o<n;o++){var a=T$(r,e,t,o);i[o*2]=a[0],i[o*2+1]=a[1]}return i}function Wa(e,t,r,n){var i=t.getBaseAxis(),o=i.dim==="x"||i.dim==="radius"?0:1,a=[],s=0,l=[],u=[],c=[],f=[];if(n){for(s=0;s<e.length;s+=2)!isNaN(e[s])&&!isNaN(e[s+1])&&f.push(e[s],e[s+1]);e=f}for(s=0;s<e.length-2;s+=2)switch(c[0]=e[s+2],c[1]=e[s+3],u[0]=e[s],u[1]=e[s+1],a.push(u[0],u[1]),r){case"end":l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1]);break;case"middle":var h=(u[o]+c[o])/2,d=[];l[o]=d[o]=h,l[1-o]=u[1-o],d[1-o]=c[1-o],a.push(l[0],l[1]),a.push(d[0],d[1]);break;default:l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1])}return a.push(e[s++],e[s++]),a}function qot(e,t){var r=[],n=e.length,i,o;function a(c,f,h){var d=c.coord,p=(h-d)/(f.coord-d),v=PK(p,[c.color,f.color]);return{coord:h,color:v}}for(var s=0;s<n;s++){var l=e[s],u=l.coord;if(u<0)i=l;else if(u>t){o?r.push(a(o,l,t)):i&&r.push(a(i,l,0),a(i,l,t));break}else i&&(r.push(a(i,l,0)),i=null),r.push(l),o=l}return r}function Zot(e,t,r){var n=e.getVisual("visualMeta");if(!(!n||!n.length||!e.count())&&t.type==="cartesian2d"){for(var i,o,a=n.length-1;a>=0;a--){var s=e.getDimensionInfo(n[a].dimension);if(i=s&&s.coordDim,i==="x"||i==="y"){o=n[a];break}}if(!!o){var l=t.getAxis(i),u=Lt(o.stops,function(b){return{coord:l.toGlobalCoord(l.dataToCoord(b.value)),color:b.color}}),c=u.length,f=o.outerColors.slice();c&&u[0].coord>u[c-1].coord&&(u.reverse(),f.reverse());var h=qot(u,i==="x"?r.getWidth():r.getHeight()),d=h.length;if(!d&&c)return u[0].coord<0?f[1]?f[1]:u[c-1].color:f[0]?f[0]:u[0].color;var p=10,v=h[0].coord-p,m=h[d-1].coord+p,g=m-v;if(g<.001)return"transparent";$(h,function(b){b.offset=(b.coord-v)/g}),h.push({offset:d?h[d-1].offset:.5,color:f[1]||"transparent"}),h.unshift({offset:d?h[0].offset:.5,color:f[0]||"transparent"});var _=new Kk(0,0,0,0,h,!0);return _[i]=v,_[i+"2"]=m,_}}}function Kot(e,t,r){var n=e.get("showAllSymbol"),i=n==="auto";if(!(n&&!i)){var o=r.getAxesByScale("ordinal")[0];if(!!o&&!(i&&Jot(o,t))){var a=t.mapDimension(o.dim),s={};return $(o.getViewLabels(),function(l){var u=o.scale.getRawOrdinalNumber(l.tickValue);s[u]=1}),function(l){return!s.hasOwnProperty(t.get(a,l))}}}}function Jot(e,t){var r=e.getExtent(),n=Math.abs(r[1]-r[0])/e.scale.count();isNaN(n)&&(n=0);for(var i=t.count(),o=Math.max(1,Math.round(i/5)),a=0;a<i;a+=o)if(m_.getSymbolSize(t,a)[e.isHorizontal()?1:0]*1.5>n)return!1;return!0}function Qot(e,t){return isNaN(e)||isNaN(t)}function tat(e){for(var t=e.length/2;t>0&&Qot(e[t*2-2],e[t*2-1]);t--);return t-1}function L5(e,t){return[e[t*2],e[t*2+1]]}function eat(e,t,r){for(var n=e.length/2,i=r==="x"?0:1,o,a,s=0,l=-1,u=0;u<n;u++)if(a=e[u*2+i],!(isNaN(a)||isNaN(e[u*2+1-i]))){if(u===0){o=a;continue}if(o<=t&&a>=t||o>=t&&a<=t){l=u;break}s=u,o=a}return{range:[s,l],t:(t-o)/(a-o)}}function A$(e){if(e.get(["endLabel","show"]))return!0;for(var t=0;t<si.length;t++)if(e.get([si[t],"endLabel","show"]))return!0;return!1}function A2(e,t,r,n){if(yf(t,"cartesian2d")){var i=n.getModel("endLabel"),o=i.get("valueAnimation"),a=n.getData(),s={lastFrameIndex:0},l=A$(n)?function(d,p){e._endLabelOnDuring(d,p,a,s,o,i,t)}:null,u=t.getBaseAxis().isHorizontal(),c=P$(t,r,n,function(){var d=e._endLabel;d&&r&&s.originalX!=null&&d.attr({x:s.originalX,y:s.originalY})},l);if(!n.get("clip",!0)){var f=c.shape,h=Math.max(f.width,f.height);u?(f.y-=h,f.height+=h*2):(f.x-=h,f.width+=h*2)}return l&&l(1,c),c}else return E$(t,r,n)}function rat(e,t){var r=t.getBaseAxis(),n=r.isHorizontal(),i=r.inverse,o=n?i?"right":"left":"center",a=n?"middle":i?"top":"bottom";return{normal:{align:e.get("align")||o,verticalAlign:e.get("verticalAlign")||a}}}var nat=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.init=function(){var r=new Ne,n=new w$;this.group.add(n.group),this._symbolDraw=n,this._lineGroup=r},t.prototype.render=function(r,n,i){var o=this,a=r.coordinateSystem,s=this.group,l=r.getData(),u=r.getModel("lineStyle"),c=r.getModel("areaStyle"),f=l.getLayout("points")||[],h=a.type==="polar",d=this._coordSys,p=this._symbolDraw,v=this._polyline,m=this._polygon,g=this._lineGroup,_=r.get("animation"),b=!c.isEmpty(),w=c.get("origin"),T=S$(a,l,w),S=b&&Yot(a,l,T),k=r.get("showSymbol"),C=r.get("connectNulls"),E=k&&!h&&Kot(r,l,a),M=this._data;M&&M.eachItemGraphicEl(function(it,K){it.__temp&&(s.remove(it),M.setItemGraphicEl(K,null))}),k||p.remove(),s.add(g);var x=h?!1:r.get("step"),D;a&&a.getArea&&r.get("clip",!0)&&(D=a.getArea(),D.width!=null?(D.x-=.1,D.y-=.1,D.width+=.2,D.height+=.2):D.r0&&(D.r0-=.5,D.r+=.5)),this._clipShapeForSymbol=D;var B=Zot(l,a,i)||l.getVisual("style")[l.getVisual("drawType")];if(!(v&&d.type===a.type&&x===this._step))k&&p.updateData(l,{isIgnore:E,clipShape:D,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),_&&this._initSymbolLabelAnimation(l,a,D),x&&(f=Wa(f,a,x,C),S&&(S=Wa(S,a,x,C))),v=this._newPolyline(f),b?m=this._newPolygon(f,S):m&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,ru(B)),g.setClipPath(A2(this,a,!0,r));else{b&&!m?m=this._newPolygon(f,S):m&&!b&&(g.remove(m),m=this._polygon=null),h||this._initOrUpdateEndLabel(r,a,ru(B));var V=g.getClipPath();if(V){var F=A2(this,a,!1,r);Io(V,{shape:F.shape},r)}else g.setClipPath(A2(this,a,!0,r));k&&p.updateData(l,{isIgnore:E,clipShape:D,disableAnimation:!0,getSymbolPoint:function(it){return[f[it*2],f[it*2+1]]}}),(!C5(this._stackedOnPoints,S)||!C5(this._points,f))&&(_?this._doUpdateAnimation(l,S,a,i,x,w,C):(x&&(f=Wa(f,a,x,C),S&&(S=Wa(S,a,x,C))),v.setShape({points:f}),m&&m.setShape({points:f,stackedOnPoints:S})))}var G=r.getModel("emphasis"),Z=G.get("focus"),q=G.get("blurScope"),et=G.get("disabled");if(v.useStyle(re(u.getLineStyle(),{fill:"none",stroke:B,lineJoin:"bevel"})),Jd(v,r,"lineStyle"),v.style.lineWidth>0&&r.get(["emphasis","lineStyle","width"])==="bolder"){var At=v.getState("emphasis").style;At.lineWidth=+v.style.lineWidth+1}ae(v).seriesIndex=r.seriesIndex,tu(v,Z,q,et);var Dt=x5(r.get("smooth")),Tt=r.get("smoothMonotone");if(v.setShape({smooth:Dt,smoothMonotone:Tt,connectNulls:C}),m){var kt=l.getCalculationInfo("stackedOnSeries"),Xt=0;m.useStyle(re(c.getAreaStyle(),{fill:B,opacity:.7,lineJoin:"bevel",decal:l.getVisual("style").decal})),kt&&(Xt=x5(kt.get("smooth"))),m.setShape({smooth:Dt,stackedOnSmooth:Xt,smoothMonotone:Tt,connectNulls:C}),Jd(m,r,"areaStyle"),ae(m).seriesIndex=r.seriesIndex,tu(m,Z,q,et)}var Y=function(it){o._changePolyState(it)};l.eachItemGraphicEl(function(it){it&&(it.onHoverStateChange=Y)}),this._polyline.onHoverStateChange=Y,this._data=l,this._coordSys=a,this._stackedOnPoints=S,this._points=f,this._step=x,this._valueOrigin=w,r.get("triggerLineEvent")&&(this.packEventData(r,v),m&&this.packEventData(r,m))},t.prototype.packEventData=function(r,n){ae(n).eventData={componentType:"series",componentSubType:"line",componentIndex:r.componentIndex,seriesIndex:r.seriesIndex,seriesName:r.name,seriesType:"line"}},t.prototype.highlight=function(r,n,i,o){var a=r.getData(),s=Jl(a,o);if(this._changePolyState("emphasis"),!(s instanceof Array)&&s!=null&&s>=0){var l=a.getLayout("points"),u=a.getItemGraphicEl(s);if(!u){var c=l[s*2],f=l[s*2+1];if(isNaN(c)||isNaN(f)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(c,f))return;var h=r.get("zlevel")||0,d=r.get("z")||0;u=new m_(a,s),u.x=c,u.y=f,u.setZ(h,d);var p=u.getSymbolPath().getTextContent();p&&(p.zlevel=h,p.z=d,p.z2=this._polyline.z2+1),u.__temp=!0,a.setItemGraphicEl(s,u),u.stopSymbolAnimation(!0),this.group.add(u)}u.highlight()}else ni.prototype.highlight.call(this,r,n,i,o)},t.prototype.downplay=function(r,n,i,o){var a=r.getData(),s=Jl(a,o);if(this._changePolyState("normal"),s!=null&&s>=0){var l=a.getItemGraphicEl(s);l&&(l.__temp?(a.setItemGraphicEl(s,null),this.group.remove(l)):l.downplay())}else ni.prototype.downplay.call(this,r,n,i,o)},t.prototype._changePolyState=function(r){var n=this._polygon;WS(this._polyline,r),n&&WS(n,r)},t.prototype._newPolyline=function(r){var n=this._polyline;return n&&this._lineGroup.remove(n),n=new jot({shape:{points:r},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(n),this._polyline=n,n},t.prototype._newPolygon=function(r,n){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Xot({shape:{points:r,stackedOnPoints:n},segmentIgnoreThreshold:2}),this._lineGroup.add(i),this._polygon=i,i},t.prototype._initSymbolLabelAnimation=function(r,n,i){var o,a,s=n.getBaseAxis(),l=s.inverse;n.type==="cartesian2d"?(o=s.isHorizontal(),a=!1):n.type==="polar"&&(o=s.dim==="angle",a=!0);var u=r.hostModel,c=u.get("animationDuration");Ut(c)&&(c=c(null));var f=u.get("animationDelay")||0,h=Ut(f)?f(null):f;r.eachItemGraphicEl(function(d,p){var v=d;if(v){var m=[d.x,d.y],g=void 0,_=void 0,b=void 0;if(i)if(a){var w=i,T=n.pointToCoord(m);o?(g=w.startAngle,_=w.endAngle,b=-T[1]/180*Math.PI):(g=w.r0,_=w.r,b=T[0])}else{var S=i;o?(g=S.x,_=S.x+S.width,b=d.x):(g=S.y+S.height,_=S.y,b=d.y)}var k=_===g?0:(b-g)/(_-g);l&&(k=1-k);var C=Ut(f)?f(p):c*k+h,E=v.getSymbolPath(),M=E.getTextContent();v.attr({scaleX:0,scaleY:0}),v.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:C}),M&&M.animateFrom({style:{opacity:0}},{duration:300,delay:C}),E.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(r,n,i){var o=r.getModel("endLabel");if(A$(r)){var a=r.getData(),s=this._polyline,l=a.getLayout("points");if(!l){s.removeTextContent(),this._endLabel=null;return}var u=this._endLabel;u||(u=this._endLabel=new tr({z2:200}),u.ignoreClip=!0,s.setTextContent(this._endLabel),s.disableLabelAnimation=!0);var c=tat(l);c>=0&&(vf(s,pu(r,"endLabel"),{inheritColor:i,labelFetcher:r,labelDataIndex:c,defaultText:function(f,h,d){return d!=null?b$(a,d):lp(a,f)},enableTextSetter:!0},rat(o,n)),s.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(r,n,i,o,a,s,l){var u=this._endLabel,c=this._polyline;if(u){r<1&&o.originalX==null&&(o.originalX=u.x,o.originalY=u.y);var f=i.getLayout("points"),h=i.hostModel,d=h.get("connectNulls"),p=s.get("precision"),v=s.get("distance")||0,m=l.getBaseAxis(),g=m.isHorizontal(),_=m.inverse,b=n.shape,w=_?g?b.x:b.y+b.height:g?b.x+b.width:b.y,T=(g?v:0)*(_?-1:1),S=(g?0:-v)*(_?-1:1),k=g?"x":"y",C=eat(f,w,k),E=C.range,M=E[1]-E[0],x=void 0;if(M>=1){if(M>1&&!d){var D=L5(f,E[0]);u.attr({x:D[0]+T,y:D[1]+S}),a&&(x=h.getRawValue(E[0]))}else{var D=c.getPointOn(w,k);D&&u.attr({x:D[0]+T,y:D[1]+S});var B=h.getRawValue(E[0]),V=h.getRawValue(E[1]);a&&(x=kJ(i,p,B,V,C.t))}o.lastFrameIndex=E[0]}else{var F=r===1||o.lastFrameIndex>0?E[0]:0,D=L5(f,F);a&&(x=h.getRawValue(F)),u.attr({x:D[0]+T,y:D[1]+S})}a&&Q1(u).setLabelText(x)}},t.prototype._doUpdateAnimation=function(r,n,i,o,a,s,l){var u=this._polyline,c=this._polygon,f=r.hostModel,h=Got(this._data,r,this._stackedOnPoints,n,this._coordSys,i,this._valueOrigin),d=h.current,p=h.stackedOnCurrent,v=h.next,m=h.stackedOnNext;if(a&&(d=Wa(h.current,i,a,l),p=Wa(h.stackedOnCurrent,i,a,l),v=Wa(h.next,i,a,l),m=Wa(h.stackedOnNext,i,a,l)),M5(d,v)>3e3||c&&M5(p,m)>3e3){u.stopAnimation(),u.setShape({points:v}),c&&(c.stopAnimation(),c.setShape({points:v,stackedOnPoints:m}));return}u.shape.__points=h.current,u.shape.points=d;var g={shape:{points:v}};h.current!==d&&(g.shape.__points=h.next),u.stopAnimation(),_r(u,g,f),c&&(c.setShape({points:d,stackedOnPoints:p}),c.stopAnimation(),_r(c,{shape:{stackedOnPoints:m}},f),u.shape.points!==c.shape.points&&(c.shape.points=u.shape.points));for(var _=[],b=h.status,w=0;w<b.length;w++){var T=b[w].cmd;if(T==="="){var S=r.getItemGraphicEl(b[w].idx1);S&&_.push({el:S,ptIdx:w})}}u.animators&&u.animators.length&&u.animators[0].during(function(){c&&c.dirtyShape();for(var k=u.shape.__points,C=0;C<_.length;C++){var E=_[C].el,M=_[C].ptIdx*2;E.x=k[M],E.y=k[M+1],E.markRedraw()}})},t.prototype.remove=function(r){var n=this.group,i=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),i&&i.eachItemGraphicEl(function(o,a){o.__temp&&(n.remove(o),i.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}(ni);const iat=nat;function AP(e,t){return{seriesType:e,plan:vP(),reset:function(r){var n=r.getData(),i=r.coordinateSystem,o=r.pipelineContext,a=t||o.large;if(!!i){var s=Lt(i.dimensions,function(d){return n.mapDimension(d)}).slice(0,2),l=s.length,u=n.getCalculationInfo("stackResultDimension");nu(n,s[0])&&(s[0]=u),nu(n,s[1])&&(s[1]=u);var c=n.getStore(),f=n.getDimensionIndex(s[0]),h=n.getDimensionIndex(s[1]);return l&&{progress:function(d,p){for(var v=d.end-d.start,m=a&&la(v*l),g=[],_=[],b=d.start,w=0;b<d.end;b++){var T=void 0;if(l===1){var S=c.get(f,b);T=i.dataToPoint(S,null,_)}else g[0]=c.get(f,b),g[1]=c.get(h,b),T=i.dataToPoint(g,null,_);a?(m[w++]=T[0],m[w++]=T[1]):p.setItemLayout(b,T.slice())}a&&p.setLayout("points",m)}}}}}}var oat={average:function(e){for(var t=0,r=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],r++);return r===0?NaN:t/r},sum:function(e){for(var t=0,r=0;r<e.length;r++)t+=e[r]||0;return t},max:function(e){for(var t=-1/0,r=0;r<e.length;r++)e[r]>t&&(t=e[r]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,r=0;r<e.length;r++)e[r]<t&&(t=e[r]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},aat=function(e){return Math.round(e.length/2)};function M$(e){return{seriesType:e,reset:function(t,r,n){var i=t.getData(),o=t.get("sampling"),a=t.coordinateSystem,s=i.count();if(s>10&&a.type==="cartesian2d"&&o){var l=a.getBaseAxis(),u=a.getOtherAxis(l),c=l.getExtent(),f=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(f||1),d=Math.round(s/h);if(isFinite(d)&&d>1){o==="lttb"&&t.setData(i.lttbDownSample(i.mapDimension(u.dim),1/d));var p=void 0;Mt(o)?p=oat[o]:Ut(o)&&(p=o),p&&t.setData(i.downSample(i.mapDimension(u.dim),1/d,p,aat))}}}}}function Bp(e){e.registerChartView(iat),e.registerSeriesModel($ot),e.registerLayout(AP("line",!0)),e.registerVisual({seriesType:"line",reset:function(t){var r=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=r.getVisual("style").fill),r.setVisual("legendLineStyle",n)}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,M$("line"))}var x$=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(r,n){return Np(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(r){var n=this.coordinateSystem;if(n&&n.clampData){var i=n.dataToPoint(n.clampData(r)),o=this.getData(),a=o.getLayout("offset"),s=o.getLayout("size"),l=n.getBaseAxis().isHorizontal()?0:1;return i[l]+=a+s/2,i}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Oo);Oo.registerClass(x$);const I5=x$;var sat=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.getInitialData=function(){return Np(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return this.get("large")?this.get("progressive"):!1},t.prototype.getProgressiveThreshold=function(){var r=this.get("progressiveThreshold"),n=this.get("largeThreshold");return n>r&&(r=n),r},t.prototype.brushSelector=function(r,n,i){return i.rect(n.getItemLayout(r))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=e_(I5.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(I5);const lat=sat;var uat=function(){function e(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=Math.PI*2,this.clockwise=!0}return e}(),cat=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="sausage",n}return t.prototype.getDefaultShape=function(){return new uat},t.prototype.buildPath=function(r,n){var i=n.cx,o=n.cy,a=Math.max(n.r0||0,0),s=Math.max(n.r,0),l=(s-a)*.5,u=a+l,c=n.startAngle,f=n.endAngle,h=n.clockwise,d=Math.PI*2,p=h?f-c<d:c-f<d;p||(c=f-(h?d:-d));var v=Math.cos(c),m=Math.sin(c),g=Math.cos(f),_=Math.sin(f);p?(r.moveTo(v*a+i,m*a+o),r.arc(v*u+i,m*u+o,l,-Math.PI+c,c,!h)):r.moveTo(v*s+i,m*s+o),r.arc(i,o,s,c,f,!h),r.arc(g*u+i,_*u+o,l,f-Math.PI*2,f-Math.PI,!h),a!==0&&r.arc(i,o,a,f,c,h)},t}(de);const O5=cat;function fat(e,t){t=t||{};var r=t.isRoundCap;return function(n,i,o){var a=i.position;if(!a||a instanceof Array)return Im(n,i,o);var s=e(a),l=i.distance!=null?i.distance:5,u=this.shape,c=u.cx,f=u.cy,h=u.r,d=u.r0,p=(h+d)/2,v=u.startAngle,m=u.endAngle,g=(v+m)/2,_=r?Math.abs(h-d)/2:0,b=Math.cos,w=Math.sin,T=c+h*b(v),S=f+h*w(v),k="left",C="top";switch(s){case"startArc":T=c+(d-l)*b(g),S=f+(d-l)*w(g),k="center",C="top";break;case"insideStartArc":T=c+(d+l)*b(g),S=f+(d+l)*w(g),k="center",C="bottom";break;case"startAngle":T=c+p*b(v)+iv(v,l+_,!1),S=f+p*w(v)+ov(v,l+_,!1),k="right",C="middle";break;case"insideStartAngle":T=c+p*b(v)+iv(v,-l+_,!1),S=f+p*w(v)+ov(v,-l+_,!1),k="left",C="middle";break;case"middle":T=c+p*b(g),S=f+p*w(g),k="center",C="middle";break;case"endArc":T=c+(h+l)*b(g),S=f+(h+l)*w(g),k="center",C="bottom";break;case"insideEndArc":T=c+(h-l)*b(g),S=f+(h-l)*w(g),k="center",C="top";break;case"endAngle":T=c+p*b(m)+iv(m,l+_,!0),S=f+p*w(m)+ov(m,l+_,!0),k="left",C="middle";break;case"insideEndAngle":T=c+p*b(m)+iv(m,-l+_,!0),S=f+p*w(m)+ov(m,-l+_,!0),k="right",C="middle";break;default:return Im(n,i,o)}return n=n||{},n.x=T,n.y=S,n.align=k,n.verticalAlign=C,n}}function hat(e,t,r,n){if(Se(n)){e.setTextConfig({rotation:n});return}else if(ct(t)){e.setTextConfig({rotation:0});return}var i=e.shape,o=i.clockwise?i.startAngle:i.endAngle,a=i.clockwise?i.endAngle:i.startAngle,s=(o+a)/2,l,u=r(t);switch(u){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":l=s;break;case"startAngle":case"insideStartAngle":l=o;break;case"endAngle":case"insideEndAngle":l=a;break;default:e.setTextConfig({rotation:0});return}var c=Math.PI*1.5-l;u==="middle"&&c>Math.PI/2&&c<Math.PI*1.5&&(c-=Math.PI),e.setTextConfig({rotation:c})}function iv(e,t,r){return t*Math.sin(e)*(r?-1:1)}function ov(e,t,r){return t*Math.cos(e)*(r?1:-1)}var M2=Math.max,x2=Math.min;function dat(e,t){var r=e.getArea&&e.getArea();if(yf(e,"cartesian2d")){var n=e.getBaseAxis();if(n.type!=="category"||!n.onBand){var i=t.getLayout("bandWidth");n.isHorizontal()?(r.x-=i,r.width+=i*2):(r.y-=i,r.height+=i*2)}}return r}var pat=function(e){yt(t,e);function t(){var r=e.call(this)||this;return r.type=t.type,r._isFirstFrame=!0,r}return t.prototype.render=function(r,n,i,o){this._model=r,this._removeOnRenderedListener(i),this._updateDrawMode(r);var a=r.get("coordinateSystem");(a==="cartesian2d"||a==="polar")&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(r,n,i):this._renderNormal(r,n,i,o))},t.prototype.incrementalPrepareRender=function(r){this._clear(),this._updateDrawMode(r),this._updateLargeClip(r)},t.prototype.incrementalRender=function(r,n){this._progressiveEls=[],this._incrementalRenderLarge(r,n)},t.prototype.eachRendered=function(r){pf(this._progressiveEls||this.group,r)},t.prototype._updateDrawMode=function(r){var n=r.pipelineContext.large;(this._isLargeDraw==null||n!==this._isLargeDraw)&&(this._isLargeDraw=n,this._clear())},t.prototype._renderNormal=function(r,n,i,o){var a=this.group,s=r.getData(),l=this._data,u=r.coordinateSystem,c=u.getBaseAxis(),f;u.type==="cartesian2d"?f=c.isHorizontal():u.type==="polar"&&(f=c.dim==="angle");var h=r.isAnimationEnabled()?r:null,d=vat(r,u);d&&this._enableRealtimeSort(d,s,i);var p=r.get("clip",!0)||d,v=dat(u,s);a.removeClipPath();var m=r.get("roundCap",!0),g=r.get("showBackground",!0),_=r.getModel("backgroundStyle"),b=_.get("borderRadius")||0,w=[],T=this._backgroundEls,S=o&&o.isInitSort,k=o&&o.type==="changeAxisOrder";function C(x){var D=av[u.type](s,x),B=Sat(u,f,D);return B.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&B.setShape("r",b),w[x]=B,B}s.diff(l).add(function(x){var D=s.getItemModel(x),B=av[u.type](s,x,D);if(g&&C(x),!(!s.hasValue(x)||!$5[u.type](B))){var V=!1;p&&(V=R5[u.type](v,B));var F=D5[u.type](r,s,x,B,f,h,c.model,!1,m);d&&(F.forceLabelAnimation=!0),B5(F,s,x,D,B,r,f,u.type==="polar"),S?F.attr({shape:B}):d?N5(d,h,F,B,x,f,!1,!1):Io(F,{shape:B},r,x),s.setItemGraphicEl(x,F),a.add(F),F.ignore=V}}).update(function(x,D){var B=s.getItemModel(x),V=av[u.type](s,x,B);if(g){var F=void 0;T.length===0?F=C(D):(F=T[D],F.useStyle(_.getItemStyle()),u.type==="cartesian2d"&&F.setShape("r",b),w[x]=F);var G=av[u.type](s,x),Z=I$(f,G,u);_r(F,{shape:Z},h,x)}var q=l.getItemGraphicEl(D);if(!s.hasValue(x)||!$5[u.type](V)){a.remove(q);return}var et=!1;if(p&&(et=R5[u.type](v,V),et&&a.remove(q)),q?cN(q):q=D5[u.type](r,s,x,V,f,h,c.model,!!q,m),d&&(q.forceLabelAnimation=!0),k){var At=q.getTextContent();if(At){var Dt=Q1(At);Dt.prevValue!=null&&(Dt.prevValue=Dt.value)}}else B5(q,s,x,B,V,r,f,u.type==="polar");S?q.attr({shape:V}):d?N5(d,h,q,V,x,f,!0,k):_r(q,{shape:V},r,x,null),s.setItemGraphicEl(x,q),q.ignore=et,a.add(q)}).remove(function(x){var D=l.getItemGraphicEl(x);D&&ZS(D,r,x)}).execute();var E=this._backgroundGroup||(this._backgroundGroup=new Ne);E.removeAll();for(var M=0;M<w.length;++M)E.add(w[M]);a.add(E),this._backgroundEls=w,this._data=s},t.prototype._renderLarge=function(r,n,i){this._clear(),V5(r,this.group),this._updateLargeClip(r)},t.prototype._incrementalRenderLarge=function(r,n){this._removeBackground(),V5(n,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(r){var n=r.get("clip",!0)&&C$(r.coordinateSystem,!1,r),i=this.group;n?i.setClipPath(n):i.removeClipPath()},t.prototype._enableRealtimeSort=function(r,n,i){var o=this;if(!!n.count()){var a=r.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(n,r,i),this._isFirstFrame=!1;else{var s=function(l){var u=n.getItemGraphicEl(l),c=u&&u.shape;return c&&Math.abs(a.isHorizontal()?c.height:c.width)||0};this._onRendered=function(){o._updateSortWithinSameData(n,s,a,i)},i.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(r,n,i){var o=[];return r.each(r.mapDimension(n.dim),function(a,s){var l=i(s);l=l==null?NaN:l,o.push({dataIndex:s,mappedValue:l,ordinalNumber:a})}),o.sort(function(a,s){return s.mappedValue-a.mappedValue}),{ordinalNumbers:Lt(o,function(a){return a.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(r,n,i){for(var o=i.scale,a=r.mapDimension(i.dim),s=Number.MAX_VALUE,l=0,u=o.getOrdinalMeta().categories.length;l<u;++l){var c=r.rawIndexOf(a,o.getRawOrdinalNumber(l)),f=c<0?Number.MIN_VALUE:n(r.indexOfRawIndex(c));if(f>s)return!0;s=f}return!1},t.prototype._isOrderDifferentInView=function(r,n){for(var i=n.scale,o=i.getExtent(),a=Math.max(0,o[0]),s=Math.min(o[1],i.getOrdinalMeta().categories.length-1);a<=s;++a)if(r.ordinalNumbers[a]!==i.getRawOrdinalNumber(a))return!0},t.prototype._updateSortWithinSameData=function(r,n,i,o){if(!!this._isOrderChangedWithinSameData(r,n,i)){var a=this._dataSort(r,i,n);this._isOrderDifferentInView(a,i)&&(this._removeOnRenderedListener(o),o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",axisId:i.index,sortInfo:a}))}},t.prototype._dispatchInitSort=function(r,n,i){var o=n.baseAxis,a=this._dataSort(r,o,function(s){return r.get(r.mapDimension(n.otherAxis.dim),s)});i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",isInitSort:!0,axisId:o.index,sortInfo:a})},t.prototype.remove=function(r,n){this._clear(this._model),this._removeOnRenderedListener(n)},t.prototype.dispose=function(r,n){this._removeOnRenderedListener(n)},t.prototype._removeOnRenderedListener=function(r){this._onRendered&&(r.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(r){var n=this.group,i=this._data;r&&r.isAnimationEnabled()&&i&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],i.eachItemGraphicEl(function(o){ZS(o,r,ae(o).dataIndex)})):n.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}(ni),R5={cartesian2d:function(e,t){var r=t.width<0?-1:1,n=t.height<0?-1:1;r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height);var i=e.x+e.width,o=e.y+e.height,a=M2(t.x,e.x),s=x2(t.x+t.width,i),l=M2(t.y,e.y),u=x2(t.y+t.height,o),c=s<a,f=u<l;return t.x=c&&a>i?s:a,t.y=f&&l>o?u:l,t.width=c?0:s-a,t.height=f?0:u-l,r<0&&(t.x+=t.width,t.width=-t.width),n<0&&(t.y+=t.height,t.height=-t.height),c||f},polar:function(e,t){var r=t.r0<=t.r?1:-1;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}var i=x2(t.r,e.r),o=M2(t.r0,e.r0);t.r=i,t.r0=o;var a=i-o<0;if(r<0){var n=t.r;t.r=t.r0,t.r0=n}return a}},D5={cartesian2d:function(e,t,r,n,i,o,a,s,l){var u=new Qe({shape:at({},n),z2:1});if(u.__dataIndex=r,u.name="item",o){var c=u.shape,f=i?"height":"width";c[f]=0}return u},polar:function(e,t,r,n,i,o,a,s,l){var u=!i&&l?O5:Rp,c=new u({shape:n,z2:1});c.name="item";var f=L$(i);if(c.calculateTextPosition=fat(f,{isRoundCap:u===O5}),o){var h=c.shape,d=i?"r":"endAngle",p={};h[d]=i?0:n.startAngle,p[d]=n[d],(s?_r:Io)(c,{shape:p},o)}return c}};function vat(e,t){var r=e.get("realtimeSort",!0),n=t.getBaseAxis();if(r&&n.type==="category"&&t.type==="cartesian2d")return{baseAxis:n,otherAxis:t.getOtherAxis(n)}}function N5(e,t,r,n,i,o,a,s){var l,u;o?(u={x:n.x,width:n.width},l={y:n.y,height:n.height}):(u={y:n.y,height:n.height},l={x:n.x,width:n.width}),s||(a?_r:Io)(r,{shape:l},t,i,null);var c=t?e.baseAxis.model:null;(a?_r:Io)(r,{shape:u},c,i)}function F5(e,t){for(var r=0;r<t.length;r++)if(!isFinite(e[t[r]]))return!0;return!1}var gat=["x","y","width","height"],mat=["cx","cy","r","startAngle","endAngle"],$5={cartesian2d:function(e){return!F5(e,gat)},polar:function(e){return!F5(e,mat)}},av={cartesian2d:function(e,t,r){var n=e.getItemLayout(t),i=r?yat(r,n):0,o=n.width>0?1:-1,a=n.height>0?1:-1;return{x:n.x+o*i/2,y:n.y+a*i/2,width:n.width-o*i,height:n.height-a*i}},polar:function(e,t,r){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle,clockwise:n.clockwise}}};function _at(e){return e.startAngle!=null&&e.endAngle!=null&&e.startAngle===e.endAngle}function L$(e){return function(t){var r=t?"Arc":"Angle";return function(n){switch(n){case"start":case"insideStart":case"end":case"insideEnd":return n+r;default:return n}}}(e)}function B5(e,t,r,n,i,o,a,s){var l=t.getItemVisual(r,"style");s||e.setShape("r",n.get(["itemStyle","borderRadius"])||0),e.useStyle(l);var u=n.getShallow("cursor");u&&e.attr("cursor",u);var c=s?a?i.r>=i.r0?"endArc":"startArc":i.endAngle>=i.startAngle?"endAngle":"startAngle":a?i.height>=0?"bottom":"top":i.width>=0?"right":"left",f=pu(n);vf(e,f,{labelFetcher:o,labelDataIndex:r,defaultText:lp(o.getData(),r),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:c});var h=e.getTextContent();if(s&&h){var d=n.get(["label","position"]);e.textConfig.inside=d==="middle"?!0:null,hat(e,d==="outside"?c:d,L$(a),n.get(["label","rotate"]))}Utt(h,f,o.getRawValue(r),function(v){return b$(t,v)});var p=n.getModel(["emphasis"]);tu(e,p.get("focus"),p.get("blurScope"),p.get("disabled")),Jd(e,n),_at(i)&&(e.style.fill="none",e.style.stroke="none",$(e.states,function(v){v.style&&(v.style.fill=v.style.stroke="none")}))}function yat(e,t){var r=e.get(["itemStyle","borderColor"]);if(!r||r==="none")return 0;var n=e.get(["itemStyle","borderWidth"])||0,i=isNaN(t.width)?Number.MAX_VALUE:Math.abs(t.width),o=isNaN(t.height)?Number.MAX_VALUE:Math.abs(t.height);return Math.min(n,i,o)}var bat=function(){function e(){}return e}(),z5=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="largeBar",n}return t.prototype.getDefaultShape=function(){return new bat},t.prototype.buildPath=function(r,n){for(var i=n.points,o=this.baseDimIdx,a=1-this.baseDimIdx,s=[],l=[],u=this.barWidth,c=0;c<i.length;c+=3)l[o]=u,l[a]=i[c+2],s[o]=i[c+o],s[a]=i[c+a],r.rect(s[0],s[1],l[0],l[1])},t}(de);function V5(e,t,r,n){var i=e.getData(),o=i.getLayout("valueAxisHorizontal")?1:0,a=i.getLayout("largeDataIndices"),s=i.getLayout("size"),l=e.getModel("backgroundStyle"),u=i.getLayout("largeBackgroundPoints");if(u){var c=new z5({shape:{points:u},incremental:!!n,silent:!0,z2:0});c.baseDimIdx=o,c.largeDataIndices=a,c.barWidth=s,c.useStyle(l.getItemStyle()),t.add(c),r&&r.push(c)}var f=new z5({shape:{points:i.getLayout("largePoints")},incremental:!!n,ignoreCoarsePointer:!0,z2:1});f.baseDimIdx=o,f.largeDataIndices=a,f.barWidth=s,t.add(f),f.useStyle(i.getVisual("style")),ae(f).seriesIndex=e.seriesIndex,e.get("silent")||(f.on("mousedown",U5),f.on("mousemove",U5)),r&&r.push(f)}var U5=f_(function(e){var t=this,r=wat(t,e.offsetX,e.offsetY);ae(t).dataIndex=r>=0?r:null},30,!1);function wat(e,t,r){for(var n=e.baseDimIdx,i=1-n,o=e.shape.points,a=e.largeDataIndices,s=[],l=[],u=e.barWidth,c=0,f=o.length/3;c<f;c++){var h=c*3;if(l[n]=u,l[i]=o[h+2],s[n]=o[h+n],s[i]=o[h+i],l[i]<0&&(s[i]+=l[i],l[i]=-l[i]),t>=s[0]&&t<=s[0]+l[0]&&r>=s[1]&&r<=s[1]+l[1])return a[c]}return-1}function I$(e,t,r){if(yf(r,"cartesian2d")){var n=t,i=r.getArea();return{x:e?n.x:i.x,y:e?i.y:n.y,width:e?n.width:i.width,height:e?i.height:n.height}}else{var i=r.getArea(),o=t;return{cx:i.cx,cy:i.cy,r0:e?i.r0:o.r0,r:e?i.r:o.r,startAngle:e?o.startAngle:0,endAngle:e?o.endAngle:Math.PI*2}}}function Sat(e,t,r){var n=e.type==="polar"?Rp:Qe;return new n({shape:I$(t,r,e),silent:!0,z2:0})}const Tat=pat;function __(e){e.registerChartView(Tat),e.registerSeriesModel(lat),e.registerLayout(e.PRIORITY.VISUAL.LAYOUT,ye(Git,"bar")),e.registerLayout(e.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,jit("bar")),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,M$("bar")),e.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,r){var n=t.componentType||"series";r.eachComponent({mainType:n,query:t},function(i){t.sortInfo&&i.axis.setCategorySortInfo(t.sortInfo)})})}var kat=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.hasSymbolVisual=!0,r}return t.prototype.getInitialData=function(r,n){return Np(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var r=this.option.progressive;return r==null?this.option.large?5e3:this.get("progressive"):r},t.prototype.getProgressiveThreshold=function(){var r=this.option.progressiveThreshold;return r==null?this.option.large?1e4:this.get("progressiveThreshold"):r},t.prototype.brushSelector=function(r,n,i){return i.point(n.getItemLayout(r))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Oo);const Pat=kat;var O$=4,Eat=function(){function e(){}return e}(),Cat=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n._off=0,n.hoverDataIdx=-1,n}return t.prototype.getDefaultShape=function(){return new Eat},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(r,n){var i=n.points,o=n.size,a=this.symbolProxy,s=a.shape,l=r.getContext?r.getContext():r,u=l&&o[0]<O$,c=this.softClipShape,f;if(u){this._ctx=l;return}for(this._ctx=null,f=this._off;f<i.length;){var h=i[f++],d=i[f++];isNaN(h)||isNaN(d)||c&&!c.contain(h,d)||(s.x=h-o[0]/2,s.y=d-o[1]/2,s.width=o[0],s.height=o[1],a.buildPath(r,s,!0))}this.incremental&&(this._off=f,this.notClear=!0)},t.prototype.afterBrush=function(){var r=this.shape,n=r.points,i=r.size,o=this._ctx,a=this.softClipShape,s;if(!!o){for(s=this._off;s<n.length;){var l=n[s++],u=n[s++];isNaN(l)||isNaN(u)||a&&!a.contain(l,u)||o.fillRect(l-i[0]/2,u-i[1]/2,i[0],i[1])}this.incremental&&(this._off=s,this.notClear=!0)}},t.prototype.findDataIndex=function(r,n){for(var i=this.shape,o=i.points,a=i.size,s=Math.max(a[0],4),l=Math.max(a[1],4),u=o.length/2-1;u>=0;u--){var c=u*2,f=o[c]-s/2,h=o[c+1]-l/2;if(r>=f&&n>=h&&r<=f+s&&n<=h+l)return u}return-1},t.prototype.contain=function(r,n){var i=this.transformCoordToLocal(r,n),o=this.getBoundingRect();if(r=i[0],n=i[1],o.contain(r,n)){var a=this.hoverDataIdx=this.findDataIndex(r,n);return a>=0}return this.hoverDataIdx=-1,!1},t.prototype.getBoundingRect=function(){var r=this._rect;if(!r){for(var n=this.shape,i=n.points,o=n.size,a=o[0],s=o[1],l=1/0,u=1/0,c=-1/0,f=-1/0,h=0;h<i.length;){var d=i[h++],p=i[h++];l=Math.min(d,l),c=Math.max(d,c),u=Math.min(p,u),f=Math.max(p,f)}r=this._rect=new le(l-a/2,u-s/2,c-l+a,f-u+s)}return r},t}(de),Aat=function(){function e(){this.group=new Ne}return e.prototype.updateData=function(t,r){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,r)},e.prototype.updateLayout=function(t){var r=t.getLayout("points");this.group.eachChild(function(n){if(n.startIndex!=null){var i=(n.endIndex-n.startIndex)*2,o=n.startIndex*4*2;r=new Float32Array(r.buffer,o,i)}n.setShape("points",r),n.reset()})},e.prototype.incrementalPrepareUpdate=function(t){this._clear()},e.prototype.incrementalUpdate=function(t,r,n){var i=this._newAdded[0],o=r.getLayout("points"),a=i&&i.shape.points;if(a&&a.length<2e4){var s=a.length,l=new Float32Array(s+o.length);l.set(a),l.set(o,s),i.endIndex=t.end,i.setShape({points:l})}else{this._newAdded=[];var u=this._create();u.startIndex=t.start,u.endIndex=t.end,u.incremental=!0,u.setShape({points:o}),this._setCommon(u,r,n)}},e.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},e.prototype._create=function(){var t=new Cat({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},e.prototype._setCommon=function(t,r,n){var i=r.hostModel;n=n||{};var o=r.getVisual("symbolSize");t.setShape("size",o instanceof Array?o:[o,o]),t.softClipShape=n.clipShape||null,t.symbolProxy=zi(r.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var a=t.shape.size[0]<O$;t.useStyle(i.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var s=r.getVisual("style"),l=s&&s.fill;l&&t.setColor(l);var u=ae(t);u.seriesIndex=i.seriesIndex,t.on("mousemove",function(c){u.dataIndex=null;var f=t.hoverDataIdx;f>=0&&(u.dataIndex=f+(t.startIndex||0))})},e.prototype.remove=function(){this._clear()},e.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},e}();const Mat=Aat;var xat=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.updateData(o,{clipShape:this._getClipShape(r)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(r,n,i){var o=r.getData(),a=this._updateSymbolDraw(o,r);a.incrementalPrepareUpdate(o),this._finished=!1},t.prototype.incrementalRender=function(r,n,i){this._symbolDraw.incrementalUpdate(r,n.getData(),{clipShape:this._getClipShape(n)}),this._finished=r.end===n.getData().count()},t.prototype.updateTransform=function(r,n,i){var o=r.getData();if(this.group.dirty(),!this._finished||o.count()>1e4)return{update:!0};var a=AP("").reset(r,n,i);a.progress&&a.progress({start:0,end:o.count(),count:o.count()},o),this._symbolDraw.updateLayout(o)},t.prototype.eachRendered=function(r){this._symbolDraw&&this._symbolDraw.eachRendered(r)},t.prototype._getClipShape=function(r){var n=r.coordinateSystem,i=n&&n.getArea&&n.getArea();return r.get("clip",!0)?i:null},t.prototype._updateSymbolDraw=function(r,n){var i=this._symbolDraw,o=n.pipelineContext,a=o.large;return(!i||a!==this._isLargeDraw)&&(i&&i.remove(),i=this._symbolDraw=a?new Mat:new w$,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},t.prototype.remove=function(r,n){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}(ni);const Lat=xat;var Iat=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(Me);const Oat=Iat;var g3=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Mi).models[0]},t.type="cartesian2dAxis",t}(Me);Wi(g3,got);var R$={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},Rat=se({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},R$),MP=se({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},R$),Dat=se({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},MP),Nat=re({logBase:10},MP);const Fat={category:Rat,value:MP,time:Dat,log:Nat};var $at={value:1,category:1,time:1,log:1};function W5(e,t,r,n){$($at,function(i,o){var a=se(se({},Fat[o],!0),n,!0),s=function(l){yt(u,l);function u(){var c=l!==null&&l.apply(this,arguments)||this;return c.type=t+"Axis."+o,c}return u.prototype.mergeDefaultAndTheme=function(c,f){var h=np(this),d=h?s_(c):{},p=f.getTheme();se(c,p.get(o+"Axis")),se(c,this.getDefaultOption()),c.type=G5(c),h&&qc(c,d,h)},u.prototype.optionUpdated=function(){var c=this.option;c.type==="category"&&(this.__ordinalMeta=h3.createByAxisModel(this))},u.prototype.getCategories=function(c){var f=this.option;if(f.type==="category")return c?f.data:this.__ordinalMeta.categories},u.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},u.type=t+"Axis."+o,u.defaultOption=a,u}(r);e.registerComponentModel(s)}),e.registerSubTypeDefaulter(t+"Axis",G5)}function G5(e){return e.type||(e.data?"category":"value")}var Bat=function(){function e(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return e.prototype.getAxis=function(t){return this._axes[t]},e.prototype.getAxes=function(){return Lt(this._dimList,function(t){return this._axes[t]},this)},e.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),Er(this.getAxes(),function(r){return r.scale.type===t})},e.prototype.addAxis=function(t){var r=t.dim;this._axes[r]=t,this._dimList.push(r)},e}();const zat=Bat;var m3=["x","y"];function j5(e){return e.type==="interval"||e.type==="time"}var Vat=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="cartesian2d",r.dimensions=m3,r}return t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var r=this.getAxis("x").scale,n=this.getAxis("y").scale;if(!(!j5(r)||!j5(n))){var i=r.getExtent(),o=n.getExtent(),a=this.dataToPoint([i[0],o[0]]),s=this.dataToPoint([i[1],o[1]]),l=i[1]-i[0],u=o[1]-o[0];if(!(!l||!u)){var c=(s[0]-a[0])/l,f=(s[1]-a[1])/u,h=a[0]-i[0]*c,d=a[1]-o[0]*f,p=this._transform=[c,0,0,f,h,d];this._invTransform=G1([],p)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(r){var n=this.getAxis("x"),i=this.getAxis("y");return n.contain(n.toLocalCoord(r[0]))&&i.contain(i.toLocalCoord(r[1]))},t.prototype.containData=function(r){return this.getAxis("x").containData(r[0])&&this.getAxis("y").containData(r[1])},t.prototype.containZone=function(r,n){var i=this.dataToPoint(r),o=this.dataToPoint(n),a=this.getArea(),s=new le(i[0],i[1],o[0]-i[0],o[1]-i[1]);return a.intersect(s)},t.prototype.dataToPoint=function(r,n,i){i=i||[];var o=r[0],a=r[1];if(this._transform&&o!=null&&isFinite(o)&&a!=null&&isFinite(a))return nn(i,r,this._transform);var s=this.getAxis("x"),l=this.getAxis("y");return i[0]=s.toGlobalCoord(s.dataToCoord(o,n)),i[1]=l.toGlobalCoord(l.dataToCoord(a,n)),i},t.prototype.clampData=function(r,n){var i=this.getAxis("x").scale,o=this.getAxis("y").scale,a=i.getExtent(),s=o.getExtent(),l=i.parse(r[0]),u=o.parse(r[1]);return n=n||[],n[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),n[1]=Math.min(Math.max(Math.min(s[0],s[1]),u),Math.max(s[0],s[1])),n},t.prototype.pointToData=function(r,n){var i=[];if(this._invTransform)return nn(i,r,this._invTransform);var o=this.getAxis("x"),a=this.getAxis("y");return i[0]=o.coordToData(o.toLocalCoord(r[0]),n),i[1]=a.coordToData(a.toLocalCoord(r[1]),n),i},t.prototype.getOtherAxis=function(r){return this.getAxis(r.dim==="x"?"y":"x")},t.prototype.getArea=function(){var r=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(r[0],r[1]),o=Math.min(n[0],n[1]),a=Math.max(r[0],r[1])-i,s=Math.max(n[0],n[1])-o;return new le(i,o,a,s)},t}(zat),Uat=function(e){yt(t,e);function t(r,n,i,o,a){var s=e.call(this,r,n,i)||this;return s.index=0,s.type=o||"value",s.position=a||"bottom",s}return t.prototype.isHorizontal=function(){var r=this.position;return r==="top"||r==="bottom"},t.prototype.getGlobalExtent=function(r){var n=this.getExtent();return n[0]=this.toGlobalCoord(n[0]),n[1]=this.toGlobalCoord(n[1]),r&&n[0]>n[1]&&n.reverse(),n},t.prototype.pointToData=function(r,n){return this.coordToData(this.toLocalCoord(r[this.dim==="x"?0:1]),n)},t.prototype.setCategorySortInfo=function(r){if(this.type!=="category")return!1;this.model.option.categorySortInfo=r,this.scale.setSortInfo(r)},t}(Aot);const Wat=Uat;function _3(e,t,r){r=r||{};var n=e.coordinateSystem,i=t.axis,o={},a=i.getAxesOnZeroOf()[0],s=i.position,l=a?"onZero":s,u=i.dim,c=n.getRect(),f=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},d=t.get("offset")||0,p=u==="x"?[f[2]-d,f[3]+d]:[f[0]-d,f[1]+d];if(a){var v=a.toGlobalCoord(a.dataToCoord(0));p[h.onZero]=Math.max(Math.min(v,p[1]),p[0])}o.position=[u==="y"?p[h[l]]:f[0],u==="x"?p[h[l]]:f[3]],o.rotation=Math.PI/2*(u==="x"?0:1);var m={top:-1,bottom:1,left:-1,right:1};o.labelDirection=o.tickDirection=o.nameDirection=m[s],o.labelOffset=a?p[h[s]]-p[h.onZero]:0,t.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Ai(r.labelInside,t.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var g=t.get(["axisLabel","rotate"]);return o.labelRotate=l==="top"?-g:g,o.z2=1,o}function H5(e){return e.get("coordinateSystem")==="cartesian2d"}function X5(e){var t={xAxisModel:null,yAxisModel:null};return $(t,function(r,n){var i=n.replace(/Model$/,""),o=e.getReferringComponents(i,Mi).models[0];t[n]=o}),t}var L2=Math.log;function Gat(e,t,r){var n=Fp.prototype,i=n.getTicks.call(r),o=n.getTicks.call(r,!0),a=i.length-1,s=n.getInterval.call(r),l=h$(e,t),u=l.extent,c=l.fixMin,f=l.fixMax;if(e.type==="log"){var h=L2(e.base);u=[L2(u[0])/h,L2(u[1])/h]}e.setExtent(u[0],u[1]),e.calcNiceExtent({splitNumber:a,fixMin:c,fixMax:f});var d=n.getExtent.call(e);c&&(u[0]=d[0]),f&&(u[1]=d[1]);var p=n.getInterval.call(e),v=u[0],m=u[1];if(c&&f)p=(m-v)/a;else if(c)for(m=u[0]+p*a;m<u[1]&&isFinite(m)&&isFinite(u[1]);)p=P2(p),m=u[0]+p*a;else if(f)for(v=u[1]-p*a;v>u[0]&&isFinite(v)&&isFinite(u[0]);)p=P2(p),v=u[1]-p*a;else{var g=e.getTicks().length-1;g>a&&(p=P2(p));var _=p*a;m=Math.ceil(u[1]/p)*p,v=Ke(m-_),v<0&&u[0]>=0?(v=0,m=Ke(_)):m>0&&u[1]<=0&&(m=0,v=-Ke(_))}var b=(i[0].value-o[0].value)/s,w=(i[a].value-o[a].value)/s;n.setExtent.call(e,v+p*b,m+p*w),n.setInterval.call(e,p),(b||w)&&n.setNiceExtent.call(e,v+p,m-p)}var jat=function(){function e(t,r,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=m3,this._initCartesian(t,r,n),this.model=t}return e.prototype.getRect=function(){return this._rect},e.prototype.update=function(t,r){var n=this._axesMap;this._updateScale(t,this.model);function i(a){var s,l=ve(a),u=l.length;if(!!u){for(var c=[],f=u-1;f>=0;f--){var h=+l[f],d=a[h],p=d.model,v=d.scale;d3(v)&&p.get("alignTicks")&&p.get("interval")==null?c.push(d):(y5(v,p),d3(v)&&(s=d))}c.length&&(s||(s=c.pop(),y5(s.scale,s.model)),$(c,function(m){Gat(m.scale,m.model,s.scale)}))}}i(n.x),i(n.y);var o={};$(n.x,function(a){Y5(n,"y",a,o)}),$(n.y,function(a){Y5(n,"x",a,o)}),this.resize(this.model,r)},e.prototype.resize=function(t,r,n){var i=t.getBoxLayoutParams(),o=!n&&t.get("containLabel"),a=Ls(i,{width:r.getWidth(),height:r.getHeight()});this._rect=a;var s=this._axesList;l(),o&&($(s,function(u){if(!u.model.get(["axisLabel","inside"])){var c=dot(u);if(c){var f=u.isHorizontal()?"height":"width",h=u.model.get(["axisLabel","margin"]);a[f]-=c[f]+h,u.position==="top"?a.y+=c.height+h:u.position==="left"&&(a.x+=c.width+h)}}}),l()),$(this._coordsList,function(u){u.calcAffineTransform()});function l(){$(s,function(u){var c=u.isHorizontal(),f=c?[0,a.width]:[0,a.height],h=u.inverse?1:0;u.setExtent(f[h],f[1-h]),Hat(u,c?a.x:a.y)})}},e.prototype.getAxis=function(t,r){var n=this._axesMap[t];if(n!=null)return n[r||0]},e.prototype.getAxes=function(){return this._axesList.slice()},e.prototype.getCartesian=function(t,r){if(t!=null&&r!=null){var n="x"+t+"y"+r;return this._coordsMap[n]}Rt(t)&&(r=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,o=this._coordsList;i<o.length;i++)if(o[i].getAxis("x").index===t||o[i].getAxis("y").index===r)return o[i]},e.prototype.getCartesians=function(){return this._coordsList.slice()},e.prototype.convertToPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},e.prototype.convertFromPixel=function(t,r,n){var i=this._findConvertTarget(r);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},e.prototype._findConvertTarget=function(t){var r=t.seriesModel,n=t.xAxisModel||r&&r.getReferringComponents("xAxis",Mi).models[0],i=t.yAxisModel||r&&r.getReferringComponents("yAxis",Mi).models[0],o=t.gridModel,a=this._coordsList,s,l;if(r)s=r.coordinateSystem,fe(a,s)<0&&(s=null);else if(n&&i)s=this.getCartesian(n.componentIndex,i.componentIndex);else if(n)l=this.getAxis("x",n.componentIndex);else if(i)l=this.getAxis("y",i.componentIndex);else if(o){var u=o.coordinateSystem;u===this&&(s=this._coordsList[0])}return{cartesian:s,axis:l}},e.prototype.containPoint=function(t){var r=this._coordsList[0];if(r)return r.containPoint(t)},e.prototype._initCartesian=function(t,r,n){var i=this,o=this,a={left:!1,right:!1,top:!1,bottom:!1},s={x:{},y:{}},l={x:0,y:0};if(r.eachComponent("xAxis",u("x"),this),r.eachComponent("yAxis",u("y"),this),!l.x||!l.y){this._axesMap={},this._axesList=[];return}this._axesMap=s,$(s.x,function(c,f){$(s.y,function(h,d){var p="x"+f+"y"+d,v=new Vat(p);v.master=i,v.model=t,i._coordsMap[p]=v,i._coordsList.push(v),v.addAxis(c),v.addAxis(h)})});function u(c){return function(f,h){if(!!I2(f,t)){var d=f.get("position");c==="x"?d!=="top"&&d!=="bottom"&&(d=a.bottom?"top":"bottom"):d!=="left"&&d!=="right"&&(d=a.left?"right":"left"),a[d]=!0;var p=new Wat(c,fot(f),[0,0],f.get("type"),d),v=p.type==="category";p.onBand=v&&f.get("boundaryGap"),p.inverse=f.get("inverse"),f.axis=p,p.model=f,p.grid=o,p.index=h,o._axesList.push(p),s[c][h]=p,l[c]++}}}},e.prototype._updateScale=function(t,r){$(this._axesList,function(i){if(i.scale.setExtent(1/0,-1/0),i.type==="category"){var o=i.model.get("categorySortInfo");i.scale.setSortInfo(o)}}),t.eachSeries(function(i){if(H5(i)){var o=X5(i),a=o.xAxisModel,s=o.yAxisModel;if(!I2(a,r)||!I2(s,r))return;var l=this.getCartesian(a.componentIndex,s.componentIndex),u=i.getData(),c=l.getAxis("x"),f=l.getAxis("y");n(u,c),n(u,f)}},this);function n(i,o){$(vot(i,o.dim),function(a){o.scale.unionExtentFromData(i,a)})}},e.prototype.getTooltipAxes=function(t){var r=[],n=[];return $(this.getCartesians(),function(i){var o=t!=null&&t!=="auto"?i.getAxis(t):i.getBaseAxis(),a=i.getOtherAxis(o);fe(r,o)<0&&r.push(o),fe(n,a)<0&&n.push(a)}),{baseAxes:r,otherAxes:n}},e.create=function(t,r){var n=[];return t.eachComponent("grid",function(i,o){var a=new e(i,t,r);a.name="grid_"+o,a.resize(i,r,!0),i.coordinateSystem=a,n.push(a)}),t.eachSeries(function(i){if(!!H5(i)){var o=X5(i),a=o.xAxisModel,s=o.yAxisModel,l=a.getCoordSysModel(),u=l.coordinateSystem;i.coordinateSystem=u.getCartesian(a.componentIndex,s.componentIndex)}}),n},e.dimensions=m3,e}();function I2(e,t){return e.getCoordSysModel()===t}function Y5(e,t,r,n){r.getAxesOnZeroOf=function(){return o?[o]:[]};var i=e[t],o,a=r.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(!s)return;if(l!=null)q5(i[l])&&(o=i[l]);else for(var u in i)if(i.hasOwnProperty(u)&&q5(i[u])&&!n[c(i[u])]){o=i[u];break}o&&(n[c(o)]=!0);function c(f){return f.dim+"_"+f.index}}function q5(e){return e&&e.type!=="category"&&e.type!=="time"&&hot(e)}function Hat(e,t){var r=e.getExtent(),n=r[0]+r[1];e.toGlobalCoord=e.dim==="x"?function(i){return i+t}:function(i){return n-i+t},e.toLocalCoord=e.dim==="x"?function(i){return i-t}:function(i){return n-i+t}}const Xat=jat;var vs=Math.PI,Gl=function(){function e(t,r){this.group=new Ne,this.opt=r,this.axisModel=t,re(r,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Ne({x:r.position[0],y:r.position[1],rotation:r.rotation});n.updateTransform(),this._transformGroup=n}return e.prototype.hasBuilder=function(t){return!!Z5[t]},e.prototype.add=function(t){Z5[t](this.opt,this.axisModel,this.group,this._transformGroup)},e.prototype.getGroup=function(){return this.group},e.innerTextLayout=function(t,r,n){var i=g9(r-t),o,a;return Rm(i)?(a=n>0?"top":"bottom",o="center"):Rm(i-vs)?(a=n>0?"bottom":"top",o="center"):(a="middle",i>0&&i<vs?o=n>0?"right":"left":o=n>0?"left":"right"),{rotation:i,textAlign:o,textVerticalAlign:a}},e.makeAxisEventDataBase=function(t){var r={componentType:t.mainType,componentIndex:t.componentIndex};return r[t.mainType+"Index"]=t.componentIndex,r},e.isLabelSilent=function(t){var r=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||r&&r.show)},e}(),Z5={axisLine:function(e,t,r,n){var i=t.get(["axisLine","show"]);if(i==="auto"&&e.handleAutoShown&&(i=e.handleAutoShown("axisLine")),!!i){var o=t.axis.getExtent(),a=n.transform,s=[o[0],0],l=[o[1],0],u=s[0]>l[0];a&&(nn(s,s,a),nn(l,l,a));var c=at({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),f=new xs({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:c,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1});tp(f.shape,f.style.lineWidth),f.anid="line",r.add(f);var h=t.get(["axisLine","symbol"]);if(h!=null){var d=t.get(["axisLine","symbolSize"]);Mt(h)&&(h=[h,h]),(Mt(d)||Se(d))&&(d=[d,d]);var p=mP(t.get(["axisLine","symbolOffset"])||0,d),v=d[0],m=d[1];$([{rotate:e.rotation+Math.PI/2,offset:p[0],r:0},{rotate:e.rotation-Math.PI/2,offset:p[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],function(g,_){if(h[_]!=="none"&&h[_]!=null){var b=zi(h[_],-v/2,-m/2,v,m,c.stroke,!0),w=g.r+g.offset,T=u?l:s;b.attr({rotation:g.rotate,x:T[0]+w*Math.cos(e.rotation),y:T[1]-w*Math.sin(e.rotation),silent:!0,z2:11}),r.add(b)}})}}},axisTickLabel:function(e,t,r,n){var i=Zat(r,n,t,e),o=Jat(r,n,t,e);if(qat(t,o,i),Kat(r,n,t,e.tickDirection),t.get(["axisLabel","hideOverlap"])){var a=Mot(Lt(o,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}}));xot(a)}},axisName:function(e,t,r,n){var i=Ai(e.axisName,t.get("name"));if(!!i){var o=t.get("nameLocation"),a=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,u=t.axis.getExtent(),c=u[0]>u[1]?-1:1,f=[o==="start"?u[0]-c*l:o==="end"?u[1]+c*l:(u[0]+u[1])/2,J5(o)?e.labelOffset+a*l:0],h,d=t.get("nameRotate");d!=null&&(d=d*vs/180);var p;J5(o)?h=Gl.innerTextLayout(e.rotation,d!=null?d:e.rotation,a):(h=Yat(e.rotation,o,d||0,u),p=e.axisNameAvailableWidth,p!=null&&(p=Math.abs(p/Math.sin(h.rotation)),!isFinite(p)&&(p=null)));var v=s.getFont(),m=t.get("nameTruncate",!0)||{},g=m.ellipsis,_=Ai(e.nameTruncateMaxWidth,m.maxWidth,p),b=new tr({x:f[0],y:f[1],rotation:h.rotation,silent:Gl.isLabelSilent(t),style:mn(s,{text:i,font:v,overflow:"truncate",width:_,ellipsis:g,fill:s.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:s.get("align")||h.textAlign,verticalAlign:s.get("verticalAlign")||h.textVerticalAlign}),z2:1});if(eP({el:b,componentModel:t,itemName:i}),b.__fullText=i,b.anid="name",t.get("triggerEvent")){var w=Gl.makeAxisEventDataBase(t);w.targetType="axisName",w.name=i,ae(b).eventData=w}n.add(b),b.updateTransform(),r.add(b),b.decomposeTransform()}}};function Yat(e,t,r,n){var i=g9(r-e),o,a,s=n[0]>n[1],l=t==="start"&&!s||t!=="start"&&s;return Rm(i-vs/2)?(a=l?"bottom":"top",o="center"):Rm(i-vs*1.5)?(a=l?"top":"bottom",o="center"):(a="middle",i<vs*1.5&&i>vs/2?o=l?"left":"right":o=l?"right":"left"),{rotation:i,textAlign:o,textVerticalAlign:a}}function qat(e,t,r){if(!d$(e.axis)){var n=e.get(["axisLabel","showMinLabel"]),i=e.get(["axisLabel","showMaxLabel"]);t=t||[],r=r||[];var o=t[0],a=t[1],s=t[t.length-1],l=t[t.length-2],u=r[0],c=r[1],f=r[r.length-1],h=r[r.length-2];n===!1?(Vn(o),Vn(u)):K5(o,a)&&(n?(Vn(a),Vn(c)):(Vn(o),Vn(u))),i===!1?(Vn(s),Vn(f)):K5(l,s)&&(i?(Vn(l),Vn(h)):(Vn(s),Vn(f)))}}function Vn(e){e&&(e.ignore=!0)}function K5(e,t){var r=e&&e.getBoundingRect().clone(),n=t&&t.getBoundingRect().clone();if(!(!r||!n)){var i=Ik([]);return Ok(i,i,-e.rotation),r.applyTransform(Ic([],i,e.getLocalTransform())),n.applyTransform(Ic([],i,t.getLocalTransform())),r.intersect(n)}}function J5(e){return e==="middle"||e==="center"}function D$(e,t,r,n,i){for(var o=[],a=[],s=[],l=0;l<e.length;l++){var u=e[l].coord;a[0]=u,a[1]=0,s[0]=u,s[1]=r,t&&(nn(a,a,t),nn(s,s,t));var c=new xs({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:n,z2:2,autoBatch:!0,silent:!0});tp(c.shape,c.style.lineWidth),c.anid=i+"_"+e[l].tickValue,o.push(c)}return o}function Zat(e,t,r,n){var i=r.axis,o=r.getModel("axisTick"),a=o.get("show");if(a==="auto"&&n.handleAutoShown&&(a=n.handleAutoShown("axisTick")),!(!a||i.scale.isBlank())){for(var s=o.getModel("lineStyle"),l=n.tickDirection*o.get("length"),u=i.getTicksCoords(),c=D$(u,t.transform,l,re(s.getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])}),"ticks"),f=0;f<c.length;f++)e.add(c[f]);return c}}function Kat(e,t,r,n){var i=r.axis,o=r.getModel("minorTick");if(!(!o.get("show")||i.scale.isBlank())){var a=i.getMinorTicksCoords();if(!!a.length)for(var s=o.getModel("lineStyle"),l=n*o.get("length"),u=re(s.getLineStyle(),re(r.getModel("axisTick").getLineStyle(),{stroke:r.get(["axisLine","lineStyle","color"])})),c=0;c<a.length;c++)for(var f=D$(a[c],t.transform,l,u,"minorticks_"+c),h=0;h<f.length;h++)e.add(f[h])}}function Jat(e,t,r,n){var i=r.axis,o=Ai(n.axisLabelShow,r.get(["axisLabel","show"]));if(!(!o||i.scale.isBlank())){var a=r.getModel("axisLabel"),s=a.get("margin"),l=i.getViewLabels(),u=(Ai(n.labelRotate,a.get("rotate"))||0)*vs/180,c=Gl.innerTextLayout(n.rotation,u,n.labelDirection),f=r.getCategories&&r.getCategories(!0),h=[],d=Gl.isLabelSilent(r),p=r.get("triggerEvent");return $(l,function(v,m){var g=i.scale.type==="ordinal"?i.scale.getRawOrdinalNumber(v.tickValue):v.tickValue,_=v.formattedLabel,b=v.rawLabel,w=a;if(f&&f[g]){var T=f[g];Rt(T)&&T.textStyle&&(w=new Ar(T.textStyle,a,r.ecModel))}var S=w.getTextColor()||r.get(["axisLine","lineStyle","color"]),k=i.dataToCoord(g),C=new tr({x:k,y:n.labelOffset+n.labelDirection*s,rotation:c.rotation,silent:d,z2:10+(v.level||0),style:mn(w,{text:_,align:w.getShallow("align",!0)||c.textAlign,verticalAlign:w.getShallow("verticalAlign",!0)||w.getShallow("baseline",!0)||c.textVerticalAlign,fill:Ut(S)?S(i.type==="category"?b:i.type==="value"?g+"":g,m):S})});if(C.anid="label_"+g,p){var E=Gl.makeAxisEventDataBase(r);E.targetType="axisLabel",E.value=b,E.tickIndex=m,i.type==="category"&&(E.dataIndex=g),ae(C).eventData=E}t.add(C),C.updateTransform(),h.push(C),e.add(C),C.decomposeTransform()}),h}}const N$=Gl;function Qat(e,t){var r={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return tst(r,e,t),r.seriesInvolved&&rst(r,e),r}function tst(e,t,r){var n=t.getComponent("tooltip"),i=t.getComponent("axisPointer"),o=i.get("link",!0)||[],a=[];$(r.getCoordinateSystems(),function(s){if(!s.axisPointerEnabled)return;var l=up(s.model),u=e.coordSysAxesInfo[l]={};e.coordSysMap[l]=s;var c=s.model,f=c.getModel("tooltip",n);if($(s.getAxes(),ye(v,!1,null)),s.getTooltipAxes&&n&&f.get("show")){var h=f.get("trigger")==="axis",d=f.get(["axisPointer","type"])==="cross",p=s.getTooltipAxes(f.get(["axisPointer","axis"]));(h||d)&&$(p.baseAxes,ye(v,d?"cross":!0,h)),d&&$(p.otherAxes,ye(v,"cross",!1))}function v(m,g,_){var b=_.model.getModel("axisPointer",i),w=b.get("show");if(!(!w||w==="auto"&&!m&&!y3(b))){g==null&&(g=b.get("triggerTooltip")),b=m?est(_,f,i,t,m,g):b;var T=b.get("snap"),S=up(_.model),k=g||T||_.type==="category",C=e.axesInfo[S]={key:S,axis:_,coordSys:s,axisPointerModel:b,triggerTooltip:g,involveSeries:k,snap:T,useHandle:y3(b),seriesModels:[],linkGroup:null};u[S]=C,e.seriesInvolved=e.seriesInvolved||k;var E=nst(o,_);if(E!=null){var M=a[E]||(a[E]={axesInfo:{}});M.axesInfo[S]=C,M.mapper=o[E].mapper,C.linkGroup=M}}}})}function est(e,t,r,n,i,o){var a=t.getModel("axisPointer"),s=["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],l={};$(s,function(h){l[h]=zt(a.get(h))}),l.snap=e.type!=="category"&&!!o,a.get("type")==="cross"&&(l.type="line");var u=l.label||(l.label={});if(u.show==null&&(u.show=!1),i==="cross"){var c=a.get(["label","show"]);if(u.show=c!=null?c:!0,!o){var f=l.lineStyle=a.get("crossStyle");f&&re(u,f.textStyle)}}return e.model.getModel("axisPointer",new Ar(l,r,n))}function rst(e,t){t.eachSeries(function(r){var n=r.coordinateSystem,i=r.get(["tooltip","trigger"],!0),o=r.get(["tooltip","show"],!0);!n||i==="none"||i===!1||i==="item"||o===!1||r.get(["axisPointer","show"],!0)===!1||$(e.coordSysAxesInfo[up(n.model)],function(a){var s=a.axis;n.getAxis(s.dim)===s&&(a.seriesModels.push(r),a.seriesDataCount==null&&(a.seriesDataCount=0),a.seriesDataCount+=r.getData().count())})})}function nst(e,t){for(var r=t.model,n=t.dim,i=0;i<e.length;i++){var o=e[i]||{};if(O2(o[n+"AxisId"],r.id)||O2(o[n+"AxisIndex"],r.componentIndex)||O2(o[n+"AxisName"],r.name))return i}}function O2(e,t){return e==="all"||ct(e)&&fe(e,t)>=0||e===t}function ist(e){var t=xP(e);if(!!t){var r=t.axisPointerModel,n=t.axis.scale,i=r.option,o=r.get("status"),a=r.get("value");a!=null&&(a=n.parse(a));var s=y3(r);o==null&&(i.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(a==null||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),i.value=a,s&&(i.status=t.axis.scale.isBlank()?"hide":"show")}}function xP(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[up(e)]}function ost(e){var t=xP(e);return t&&t.axisPointerModel}function y3(e){return!!e.get(["handle","show"])}function up(e){return e.type+"||"+e.id}var Q5={},ast=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this.axisPointerClass&&ist(r),e.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(r,i,!0)},t.prototype.updateAxisPointer=function(r,n,i,o){this._doUpdateAxisPointerClass(r,i,!1)},t.prototype.remove=function(r,n){var i=this._axisPointer;i&&i.remove(n)},t.prototype.dispose=function(r,n){this._disposeAxisPointer(n),e.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(r,n,i){var o=t.getAxisPointerClass(this.axisPointerClass);if(!!o){var a=ost(r);a?(this._axisPointer||(this._axisPointer=new o)).render(r,a,n,i):this._disposeAxisPointer(n)}},t.prototype._disposeAxisPointer=function(r){this._axisPointer&&this._axisPointer.dispose(r),this._axisPointer=null},t.registerAxisPointerClass=function(r,n){Q5[r]=n},t.getAxisPointerClass=function(r){return r&&Q5[r]},t.type="axis",t}(li);const F$=ast;var b3=Re();function sst(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=n.coordinateSystem.getRect(),u=i.getTicksCoords({tickModel:o,clamp:!0});if(!!u.length){var c=s.length,f=b3(e).splitAreaColors,h=jt(),d=0;if(f)for(var p=0;p<u.length;p++){var v=f.get(u[p].tickValue);if(v!=null){d=(v+(c-1)*p)%c;break}}var m=i.toGlobalCoord(u[0].coord),g=a.getAreaStyle();s=ct(s)?s:[s];for(var p=1;p<u.length;p++){var _=i.toGlobalCoord(u[p].coord),b=void 0,w=void 0,T=void 0,S=void 0;i.isHorizontal()?(b=m,w=l.y,T=_-b,S=l.height,m=b+T):(b=l.x,w=m,T=l.width,S=_-w,m=w+S);var k=u[p-1].tickValue;k!=null&&h.set(k,d),t.add(new Qe({anid:k!=null?"area_"+k:null,shape:{x:b,y:w,width:T,height:S},style:re({fill:s[d]},g),autoBatch:!0,silent:!0})),d=(d+1)%c}b3(e).splitAreaColors=h}}}function lst(e){b3(e).splitAreaColors=null}var ust=["axisLine","axisTickLabel","axisName"],cst=["splitArea","splitLine","minorSplitLine"],$$=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.axisPointerClass="CartesianAxisPointer",r}return t.prototype.render=function(r,n,i,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new Ne,this.group.add(this._axisGroup),!!r.get("show")){var s=r.getCoordSysModel(),l=_3(s,r),u=new N$(r,at({handleAutoShown:function(f){for(var h=s.coordinateSystem.getCartesians(),d=0;d<h.length;d++)if(d3(h[d].getOtherAxis(r.axis).scale))return!0;return!1}},l));$(ust,u.add,u),this._axisGroup.add(u.getGroup()),$(cst,function(f){r.get([f,"show"])&&fst[f](this,this._axisGroup,r,s)},this);var c=o&&o.type==="changeAxisOrder"&&o.isInitSort;c||gN(a,this._axisGroup,r),e.prototype.render.call(this,r,n,i,o)}},t.prototype.remove=function(){lst(this)},t.type="cartesianAxis",t}(F$),fst={splitLine:function(e,t,r,n){var i=r.axis;if(!i.scale.isBlank()){var o=r.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=ct(s)?s:[s];for(var l=n.coordinateSystem.getRect(),u=i.isHorizontal(),c=0,f=i.getTicksCoords({tickModel:o}),h=[],d=[],p=a.getLineStyle(),v=0;v<f.length;v++){var m=i.toGlobalCoord(f[v].coord);u?(h[0]=m,h[1]=l.y,d[0]=m,d[1]=l.y+l.height):(h[0]=l.x,h[1]=m,d[0]=l.x+l.width,d[1]=m);var g=c++%s.length,_=f[v].tickValue,b=new xs({anid:_!=null?"line_"+f[v].tickValue:null,autoBatch:!0,shape:{x1:h[0],y1:h[1],x2:d[0],y2:d[1]},style:re({stroke:s[g]},p),silent:!0});tp(b.shape,p.lineWidth),t.add(b)}}},minorSplitLine:function(e,t,r,n){var i=r.axis,o=r.getModel("minorSplitLine"),a=o.getModel("lineStyle"),s=n.coordinateSystem.getRect(),l=i.isHorizontal(),u=i.getMinorTicksCoords();if(!!u.length)for(var c=[],f=[],h=a.getLineStyle(),d=0;d<u.length;d++)for(var p=0;p<u[d].length;p++){var v=i.toGlobalCoord(u[d][p].coord);l?(c[0]=v,c[1]=s.y,f[0]=v,f[1]=s.y+s.height):(c[0]=s.x,c[1]=v,f[0]=s.x+s.width,f[1]=v);var m=new xs({anid:"minor_line_"+u[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:f[0],y2:f[1]},style:h,silent:!0});tp(m.shape,h.lineWidth),t.add(m)}},splitArea:function(e,t,r,n){sst(e,t,r,n)}},B$=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="xAxis",t}($$),hst=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=B$.type,r}return t.type="yAxis",t}($$),dst=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="grid",r}return t.prototype.render=function(r,n){this.group.removeAll(),r.get("show")&&this.group.add(new Qe({shape:r.coordinateSystem.getRect(),style:re({fill:r.get("backgroundColor")},r.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(li),t6={offset:0};function z$(e){e.registerComponentView(dst),e.registerComponentModel(Oat),e.registerCoordinateSystem("cartesian2d",Xat),W5(e,"x",g3,t6),W5(e,"y",g3,t6),e.registerComponentView(B$),e.registerComponentView(hst),e.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function zp(e){Yr(z$),e.registerSeriesModel(Pat),e.registerChartView(Lat),e.registerLayout(AP("scatter"))}var e6="\0_ec_interaction_mutex";function r6(e,t){return!!pst(e)[t]}function pst(e){return e[e6]||(e[e6]={})}gu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},jr);var vst=function(e){yt(t,e);function t(r){var n=e.call(this)||this;n._zr=r;var i=Vt(n._mousedownHandler,n),o=Vt(n._mousemoveHandler,n),a=Vt(n._mouseupHandler,n),s=Vt(n._mousewheelHandler,n),l=Vt(n._pinchHandler,n);return n.enable=function(u,c){this.disable(),this._opt=re(zt(c)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),u==null&&(u=!0),(u===!0||u==="move"||u==="pan")&&(r.on("mousedown",i),r.on("mousemove",o),r.on("mouseup",a)),(u===!0||u==="scale"||u==="zoom")&&(r.on("mousewheel",s),r.on("pinch",l))},n.disable=function(){r.off("mousedown",i),r.off("mousemove",o),r.off("mouseup",a),r.off("mousewheel",s),r.off("pinch",l)},n}return t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(r){this.pointerChecker=r},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(r){if(!GA(r)){for(var n=r.target;n;){if(n.draggable)return;n=n.__hostTarget||n.parent}var i=r.offsetX,o=r.offsetY;this.pointerChecker&&this.pointerChecker(r,i,o)&&(this._x=i,this._y=o,this._dragging=!0)}},t.prototype._mousemoveHandler=function(r){if(!(!this._dragging||!qg("moveOnMouseMove",r,this._opt)||r.gestureEvent==="pinch"||r6(this._zr,"globalPan"))){var n=r.offsetX,i=r.offsetY,o=this._x,a=this._y,s=n-o,l=i-a;this._x=n,this._y=i,this._opt.preventDefaultMouseMove&&Kl(r.event),V$(this,"pan","moveOnMouseMove",r,{dx:s,dy:l,oldX:o,oldY:a,newX:n,newY:i,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(r){GA(r)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(r){var n=qg("zoomOnMouseWheel",r,this._opt),i=qg("moveOnMouseWheel",r,this._opt),o=r.wheelDelta,a=Math.abs(o),s=r.offsetX,l=r.offsetY;if(!(o===0||!n&&!i)){if(n){var u=a>3?1.4:a>1?1.2:1.1,c=o>0?u:1/u;R2(this,"zoom","zoomOnMouseWheel",r,{scale:c,originX:s,originY:l,isAvailableBehavior:null})}if(i){var f=Math.abs(o),h=(o>0?1:-1)*(f>3?.4:f>1?.15:.05);R2(this,"scrollMove","moveOnMouseWheel",r,{scrollDelta:h,originX:s,originY:l,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(r){if(!r6(this._zr,"globalPan")){var n=r.pinchScale>1?1.1:1/1.1;R2(this,"zoom",null,r,{scale:n,originX:r.pinchX,originY:r.pinchY,isAvailableBehavior:null})}},t}(Gi);function R2(e,t,r,n,i){e.pointerChecker&&e.pointerChecker(n,i.originX,i.originY)&&(Kl(n.event),V$(e,t,r,n,i))}function V$(e,t,r,n,i){i.isAvailableBehavior=Vt(qg,null,r,n),e.trigger(t,i)}function qg(e,t,r){var n=r[e];return!e||n&&(!Mt(n)||t.event[n+"Key"])}const gst=vst;function mst(e,t,r){var n=e.target;n.x+=t,n.y+=r,n.dirty()}function _st(e,t,r,n){var i=e.target,o=e.zoomLimit,a=e.zoom=e.zoom||1;if(a*=t,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var u=a/e.zoom;e.zoom=a,i.x-=(r-i.x)*(u-1),i.y-=(n-i.y)*(u-1),i.scaleX*=u,i.scaleY*=u,i.dirty()}var yst={axisPointer:1,tooltip:1,brush:1};function bst(e,t,r){var n=t.getComponentByElement(e.topTarget),i=n&&n.coordinateSystem;return n&&n!==r&&!yst.hasOwnProperty(n.mainType)&&i&&i.model!==r}var n6=nn,wst=function(e){yt(t,e);function t(r){var n=e.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new xl,n._rawTransformable=new xl,n.name=r,n}return t.prototype.setBoundingRect=function(r,n,i,o){return this._rect=new le(r,n,i,o),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(r,n,i,o){this._transformTo(r,n,i,o),this._viewRect=new le(r,n,i,o)},t.prototype._transformTo=function(r,n,i,o){var a=this.getBoundingRect(),s=this._rawTransformable;s.transform=a.calculateTransform(new le(r,n,i,o));var l=s.parent;s.parent=null,s.decomposeTransform(),s.parent=l,this._updateTransform()},t.prototype.setCenter=function(r,n){!r||(this._center=[je(r[0],n.getWidth()),je(r[1],n.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(r){r=r||1;var n=this.zoomLimit;n&&(n.max!=null&&(r=Math.min(n.max,r)),n.min!=null&&(r=Math.max(n.min,r))),this._zoom=r,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var r=this.getBoundingRect(),n=r.x+r.width/2,i=r.y+r.height/2;return[n,i]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var r=this._rawTransformable.getLocalTransform(),n=this._roamTransformable,i=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=nn([],o,r),i=nn([],i,r),n.originX=o[0],n.originY=o[1],n.x=i[0]-o[0],n.y=i[1]-o[1],n.scaleX=n.scaleY=a,this._updateTransform()},t.prototype._updateTransform=function(){var r=this._roamTransformable,n=this._rawTransformable;n.parent=r,r.updateTransform(),n.updateTransform(),Y7(this.transform||(this.transform=[]),n.transform||Yc()),this._rawTransform=n.getLocalTransform(),this.invTransform=this.invTransform||[],G1(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var r=this._rawTransformable,n=this._roamTransformable,i=new xl;return i.transform=n.transform,i.decomposeTransform(),{roam:{x:i.x,y:i.y,scaleX:i.scaleX,scaleY:i.scaleY},raw:{x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var r=this.getBoundingRect().clone();return r.applyTransform(this.transform),r},t.prototype.dataToPoint=function(r,n,i){var o=n?this._rawTransform:this.transform;return i=i||[],o?n6(i,r,o):LZ(i,r)},t.prototype.pointToData=function(r){var n=this.invTransform;return n?n6([],r,n):[r[0],r[1]]},t.prototype.convertToPixel=function(r,n,i){var o=i6(n);return o===this?o.dataToPoint(i):null},t.prototype.convertFromPixel=function(r,n,i){var o=i6(n);return o===this?o.pointToData(i):null},t.prototype.containPoint=function(r){return this.getViewRectAfterRoam().contain(r[0],r[1])},t.dimensions=["x","y"],t}(xl);function i6(e){var t=e.seriesModel;return t?t.coordinateSystem:null}const Sst=wst;function o6(e,t){return e.pointToProjected?e.pointToProjected(t):e.pointToData(t)}function Tst(e,t,r,n){var i=e.getZoom(),o=e.getCenter(),a=t.zoom,s=e.projectedToPoint?e.projectedToPoint(o):e.dataToPoint(o);if(t.dx!=null&&t.dy!=null&&(s[0]-=t.dx,s[1]-=t.dy,e.setCenter(o6(e,s),n)),a!=null){if(r){var l=r.min||0,u=r.max||1/0;a=Math.max(Math.min(i*a,u),l)/i}e.scaleX*=a,e.scaleY*=a;var c=(t.originX-e.x)*(a-1),f=(t.originY-e.y)*(a-1);e.x-=c,e.y-=f,e.updateTransform(),e.setCenter(o6(e,s),n),e.setZoom(a*i)}return{center:e.getCenter(),zoom:e.getZoom()}}function kst(e){var t=e;t.hierNode={defaultAncestor:null,ancestor:t,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var r=[t],n,i;n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length,a=o-1;a>=0;a--){var s=i[a];s.hierNode={defaultAncestor:null,ancestor:s,prelim:0,modifier:0,change:0,shift:0,i:a,thread:null},r.push(s)}}function Pst(e,t){var r=e.isExpand?e.children:[],n=e.parentNode.children,i=e.hierNode.i?n[e.hierNode.i-1]:null;if(r.length){Ast(e);var o=(r[0].hierNode.prelim+r[r.length-1].hierNode.prelim)/2;i?(e.hierNode.prelim=i.hierNode.prelim+t(e,i),e.hierNode.modifier=e.hierNode.prelim-o):e.hierNode.prelim=o}else i&&(e.hierNode.prelim=i.hierNode.prelim+t(e,i));e.parentNode.hierNode.defaultAncestor=Mst(e,i,e.parentNode.hierNode.defaultAncestor||n[0],t)}function Est(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function a6(e){return arguments.length?e:Ist}function Qh(e,t){return e-=Math.PI/2,{x:t*Math.cos(e),y:t*Math.sin(e)}}function Cst(e,t){return Ls(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function Ast(e){for(var t=e.children,r=t.length,n=0,i=0;--r>=0;){var o=t[r];o.hierNode.prelim+=n,o.hierNode.modifier+=n,i+=o.hierNode.change,n+=o.hierNode.shift+i}}function Mst(e,t,r,n){if(t){for(var i=e,o=e,a=o.parentNode.children[0],s=t,l=i.hierNode.modifier,u=o.hierNode.modifier,c=a.hierNode.modifier,f=s.hierNode.modifier;s=D2(s),o=N2(o),s&&o;){i=D2(i),a=N2(a),i.hierNode.ancestor=e;var h=s.hierNode.prelim+f-o.hierNode.prelim-u+n(s,o);h>0&&(Lst(xst(s,e,r),e,h),u+=h,l+=h),f+=s.hierNode.modifier,u+=o.hierNode.modifier,l+=i.hierNode.modifier,c+=a.hierNode.modifier}s&&!D2(i)&&(i.hierNode.thread=s,i.hierNode.modifier+=f-l),o&&!N2(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=u-c,r=e)}return r}function D2(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function N2(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function xst(e,t,r){return e.hierNode.ancestor.parentNode===t.parentNode?e.hierNode.ancestor:r}function Lst(e,t,r){var n=r/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=r,t.hierNode.modifier+=r,t.hierNode.prelim+=r,e.hierNode.change+=n}function Ist(e,t){return e.parentNode===t.parentNode?1:2}var Ost=function(){function e(){this.parentPoint=[],this.childPoints=[]}return e}(),Rst=function(e){yt(t,e);function t(r){return e.call(this,r)||this}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Ost},t.prototype.buildPath=function(r,n){var i=n.childPoints,o=i.length,a=n.parentPoint,s=i[0],l=i[o-1];if(o===1){r.moveTo(a[0],a[1]),r.lineTo(s[0],s[1]);return}var u=n.orient,c=u==="TB"||u==="BT"?0:1,f=1-c,h=je(n.forkPosition,1),d=[];d[c]=a[c],d[f]=a[f]+(l[f]-a[f])*h,r.moveTo(a[0],a[1]),r.lineTo(d[0],d[1]),r.moveTo(s[0],s[1]),d[c]=s[c],r.lineTo(d[0],d[1]),d[c]=l[c],r.lineTo(d[0],d[1]),r.lineTo(l[0],l[1]);for(var p=1;p<o-1;p++){var v=i[p];r.moveTo(v[0],v[1]),d[c]=v[c],r.lineTo(d[0],d[1])}},t}(de),Dst=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._mainGroup=new Ne,r}return t.prototype.init=function(r,n){this._controller=new gst(n.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(r,n,i){var o=r.getData(),a=r.layoutInfo,s=this._mainGroup,l=r.get("layout");l==="radial"?(s.x=a.x+a.width/2,s.y=a.y+a.height/2):(s.x=a.x,s.y=a.y),this._updateViewCoordSys(r,i),this._updateController(r,n,i);var u=this._data;o.diff(u).add(function(c){s6(o,c)&&l6(o,c,null,s,r)}).update(function(c,f){var h=u.getItemGraphicEl(f);if(!s6(o,c)){h&&c6(u,f,h,s,r);return}l6(o,c,h,s,r)}).remove(function(c){var f=u.getItemGraphicEl(c);f&&c6(u,c,f,s,r)}).execute(),this._nodeScaleRatio=r.get("nodeScaleRatio"),this._updateNodeAndLinkScale(r),r.get("expandAndCollapse")===!0&&o.eachItemGraphicEl(function(c,f){c.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:r.id,dataIndex:f})})}),this._data=o},t.prototype._updateViewCoordSys=function(r,n){var i=r.getData(),o=[];i.each(function(f){var h=i.getItemLayout(f);h&&!isNaN(h.x)&&!isNaN(h.y)&&o.push([+h.x,+h.y])});var a=[],s=[];qJ(o,a,s);var l=this._min,u=this._max;s[0]-a[0]===0&&(a[0]=l?l[0]:a[0]-1,s[0]=u?u[0]:s[0]+1),s[1]-a[1]===0&&(a[1]=l?l[1]:a[1]-1,s[1]=u?u[1]:s[1]+1);var c=r.coordinateSystem=new Sst;c.zoomLimit=r.get("scaleLimit"),c.setBoundingRect(a[0],a[1],s[0]-a[0],s[1]-a[1]),c.setCenter(r.get("center"),n),c.setZoom(r.get("zoom")),this.group.attr({x:c.x,y:c.y,scaleX:c.scaleX,scaleY:c.scaleY}),this._min=a,this._max=s},t.prototype._updateController=function(r,n,i){var o=this,a=this._controller,s=this._controllerHost,l=this.group;a.setPointerChecker(function(u,c,f){var h=l.getBoundingRect();return h.applyTransform(l.transform),h.contain(c,f)&&!bst(u,i,r)}),a.enable(r.get("roam")),s.zoomLimit=r.get("scaleLimit"),s.zoom=r.coordinateSystem.getZoom(),a.off("pan").off("zoom").on("pan",function(u){mst(s,u.dx,u.dy),i.dispatchAction({seriesId:r.id,type:"treeRoam",dx:u.dx,dy:u.dy})}).on("zoom",function(u){_st(s,u.scale,u.originX,u.originY),i.dispatchAction({seriesId:r.id,type:"treeRoam",zoom:u.scale,originX:u.originX,originY:u.originY}),o._updateNodeAndLinkScale(r),i.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(r){var n=r.getData(),i=this._getNodeGlobalScale(r);n.eachItemGraphicEl(function(o,a){o.setSymbolScale(i)})},t.prototype._getNodeGlobalScale=function(r){var n=r.coordinateSystem;if(n.type!=="view")return 1;var i=this._nodeScaleRatio,o=n.scaleX||1,a=n.getZoom(),s=(a-1)*i+1;return s/o},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}(ni);function s6(e,t){var r=e.getItemLayout(t);return r&&!isNaN(r.x)&&!isNaN(r.y)}function l6(e,t,r,n,i){var o=!r,a=e.tree.getNodeByDataIndex(t),s=a.getModel(),l=a.getVisual("style").fill,u=a.isExpand===!1&&a.children.length!==0?l:"#fff",c=e.tree.root,f=a.parentNode===c?a:a.parentNode||a,h=e.getItemGraphicEl(f.dataIndex),d=f.getLayout(),p=h?{x:h.__oldX,y:h.__oldY,rawX:h.__radialOldRawX,rawY:h.__radialOldRawY}:d,v=a.getLayout();o?(r=new m_(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.x=p.x,r.y=p.y):r.updateData(e,t,null,{symbolInnerColor:u,useNameLabel:!0}),r.__radialOldRawX=r.__radialRawX,r.__radialOldRawY=r.__radialRawY,r.__radialRawX=v.rawX,r.__radialRawY=v.rawY,n.add(r),e.setItemGraphicEl(t,r),r.__oldX=r.x,r.__oldY=r.y,_r(r,{x:v.x,y:v.y},i);var m=r.getSymbolPath();if(i.get("layout")==="radial"){var g=c.children[0],_=g.getLayout(),b=g.children.length,w=void 0,T=void 0;if(v.x===_.x&&a.isExpand===!0&&g.children.length){var S={x:(g.children[0].getLayout().x+g.children[b-1].getLayout().x)/2,y:(g.children[0].getLayout().y+g.children[b-1].getLayout().y)/2};w=Math.atan2(S.y-_.y,S.x-_.x),w<0&&(w=Math.PI*2+w),T=S.x<_.x,T&&(w=w-Math.PI)}else w=Math.atan2(v.y-_.y,v.x-_.x),w<0&&(w=Math.PI*2+w),a.children.length===0||a.children.length!==0&&a.isExpand===!1?(T=v.x<_.x,T&&(w=w-Math.PI)):(T=v.x>_.x,T||(w=w-Math.PI));var k=T?"left":"right",C=s.getModel("label"),E=C.get("rotate"),M=E*(Math.PI/180),x=m.getTextContent();x&&(m.setTextConfig({position:C.get("position")||k,rotation:E==null?-w:M,origin:"center"}),x.setStyle("verticalAlign","middle"))}var D=s.get(["emphasis","focus"]),B=D==="relative"?G7(a.getAncestorsIndices(),a.getDescendantIndices()):D==="ancestor"?a.getAncestorsIndices():D==="descendant"?a.getDescendantIndices():null;B&&(ae(r).focus=B),Nst(i,a,c,r,p,d,v,n),r.__edge&&(r.onHoverStateChange=function(V){if(V!=="blur"){var F=a.parentNode&&e.getItemGraphicEl(a.parentNode.dataIndex);F&&F.hoverState===Op||WS(r.__edge,V)}})}function Nst(e,t,r,n,i,o,a,s){var l=t.getModel(),u=e.get("edgeShape"),c=e.get("layout"),f=e.getOrient(),h=e.get(["lineStyle","curveness"]),d=e.get("edgeForkPosition"),p=l.getModel("lineStyle").getLineStyle(),v=n.__edge;if(u==="curve")t.parentNode&&t.parentNode!==r&&(v||(v=n.__edge=new Z1({shape:w3(c,f,h,i,i)})),_r(v,{shape:w3(c,f,h,o,a)},e));else if(u==="polyline"&&c==="orthogonal"&&t!==r&&t.children&&t.children.length!==0&&t.isExpand===!0){for(var m=t.children,g=[],_=0;_<m.length;_++){var b=m[_].getLayout();g.push([b.x,b.y])}v||(v=n.__edge=new Rst({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:f,forkPosition:d}})),_r(v,{shape:{parentPoint:[a.x,a.y],childPoints:g}},e)}v&&!(u==="polyline"&&!t.isExpand)&&(v.useStyle(re({strokeNoScale:!0,fill:null},p)),Jd(v,l,"lineStyle"),jk(v),s.add(v))}function u6(e,t,r,n,i){var o=t.tree.root,a=U$(o,e),s=a.source,l=a.sourceLayout,u=t.getItemGraphicEl(e.dataIndex);if(!!u){var c=t.getItemGraphicEl(s.dataIndex),f=c.__edge,h=u.__edge||(s.isExpand===!1||s.children.length===1?f:void 0),d=n.get("edgeShape"),p=n.get("layout"),v=n.get("orient"),m=n.get(["lineStyle","curveness"]);h&&(d==="curve"?eu(h,{shape:w3(p,v,m,l,l),style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}):d==="polyline"&&n.get("layout")==="orthogonal"&&eu(h,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},n,{cb:function(){r.remove(h)},removeOpt:i}))}}function U$(e,t){for(var r=t.parentNode===e?t:t.parentNode||t,n;n=r.getLayout(),n==null;)r=r.parentNode===e?r:r.parentNode||r;return{source:r,sourceLayout:n}}function c6(e,t,r,n,i){var o=e.tree.getNodeByDataIndex(t),a=e.tree.root,s=U$(a,o).sourceLayout,l={duration:i.get("animationDurationUpdate"),easing:i.get("animationEasingUpdate")};eu(r,{x:s.x+1,y:s.y+1},i,{cb:function(){n.remove(r),e.setItemGraphicEl(t,null)},removeOpt:l}),r.fadeOut(null,e.hostModel,{fadeLabel:!0,animation:l}),o.children.forEach(function(u){u6(u,e,n,i,l)}),u6(o,e,n,i,l)}function w3(e,t,r,n,i){var o,a,s,l,u,c,f,h;if(e==="radial"){u=n.rawX,f=n.rawY,c=i.rawX,h=i.rawY;var d=Qh(u,f),p=Qh(u,f+(h-f)*r),v=Qh(c,h+(f-h)*r),m=Qh(c,h);return{x1:d.x||0,y1:d.y||0,x2:m.x||0,y2:m.y||0,cpx1:p.x||0,cpy1:p.y||0,cpx2:v.x||0,cpy2:v.y||0}}else u=n.x,f=n.y,c=i.x,h=i.y,(t==="LR"||t==="RL")&&(o=u+(c-u)*r,a=f,s=c+(u-c)*r,l=h),(t==="TB"||t==="BT")&&(o=u,a=f+(h-f)*r,s=c,l=h+(f-h)*r);return{x1:u,y1:f,x2:c,y2:h,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}const Fst=Dst;var ii=Re();function $st(e){var t=e.mainData,r=e.datas;r||(r={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,W$(t,r,e),$(r,function(n){$(t.TRANSFERABLE_METHODS,function(i){n.wrapMethod(i,ye(Bst,e))})}),t.wrapMethod("cloneShallow",ye(Vst,e)),$(t.CHANGABLE_METHODS,function(n){t.wrapMethod(n,ye(zst,e))}),Bi(r[t.dataType]===t)}function Bst(e,t){if(Gst(this)){var r=at({},ii(this).datas);r[this.dataType]=t,W$(t,r,e)}else LP(t,this.dataType,ii(this).mainData,e);return t}function zst(e,t){return e.struct&&e.struct.update(),t}function Vst(e,t){return $(ii(t).datas,function(r,n){r!==t&&LP(r.cloneShallow(),n,t,e)}),t}function Ust(e){var t=ii(this).mainData;return e==null||t==null?t:ii(t).datas[e]}function Wst(){var e=ii(this).mainData;return e==null?[{data:e}]:Lt(ve(ii(e).datas),function(t){return{type:t,data:ii(e).datas[t]}})}function Gst(e){return ii(e).mainData===e}function W$(e,t,r){ii(e).datas={},$(t,function(n,i){LP(n,i,e,r)})}function LP(e,t,r,n){ii(r).datas[t]=e,ii(e).mainData=r,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=Ust,e.getLinkedDataAll=Wst}var jst=function(){function e(t,r){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=r}return e.prototype.isRemoved=function(){return this.dataIndex<0},e.prototype.eachNode=function(t,r,n){Ut(t)&&(n=r,r=t,t=null),t=t||{},Mt(t)&&(t={order:t});var i=t.order||"preorder",o=this[t.attr||"children"],a;i==="preorder"&&(a=r.call(n,this));for(var s=0;!a&&s<o.length;s++)o[s].eachNode(t,r,n);i==="postorder"&&r.call(n,this)},e.prototype.updateDepthAndHeight=function(t){var r=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>r&&(r=i.height)}this.height=r+1},e.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].getNodeById(t);if(o)return o}},e.prototype.contains=function(t){if(t===this)return!0;for(var r=0,n=this.children,i=n.length;r<i;r++){var o=n[r].contains(t);if(o)return o}},e.prototype.getAncestors=function(t){for(var r=[],n=t?this:this.parentNode;n;)r.push(n),n=n.parentNode;return r.reverse(),r},e.prototype.getAncestorsIndices=function(){for(var t=[],r=this;r;)t.push(r.dataIndex),r=r.parentNode;return t.reverse(),t},e.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(r){t.push(r.dataIndex)}),t},e.prototype.getValue=function(t){var r=this.hostTree.data;return r.getStore().get(r.getDimensionIndex(t||"value"),this.dataIndex)},e.prototype.setLayout=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,r)},e.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},e.prototype.getModel=function(t){if(!(this.dataIndex<0)){var r=this.hostTree,n=r.data.getItemModel(this.dataIndex);return n.getModel(t)}},e.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},e.prototype.setVisual=function(t,r){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,r)},e.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},e.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},e.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},e.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,r=0;r<t.length;++r)if(t[r]===this)return r;return-1}return-1},e.prototype.isAncestorOf=function(t){for(var r=t.parentNode;r;){if(r===this)return!0;r=r.parentNode}return!1},e.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},e}(),Hst=function(){function e(t){this.type="tree",this._nodes=[],this.hostModel=t}return e.prototype.eachNode=function(t,r,n){this.root.eachNode(t,r,n)},e.prototype.getNodeByDataIndex=function(t){var r=this.data.getRawIndex(t);return this._nodes[r]},e.prototype.getNodeById=function(t){return this.root.getNodeById(t)},e.prototype.update=function(){for(var t=this.data,r=this._nodes,n=0,i=r.length;n<i;n++)r[n].dataIndex=-1;for(var n=0,i=t.count();n<i;n++)r[t.getRawIndex(n)].dataIndex=n},e.prototype.clearLayouts=function(){this.data.clearItemLayouts()},e.createTree=function(t,r,n){var i=new e(r),o=[],a=1;s(t);function s(c,f){var h=c.value;a=Math.max(a,ct(h)?h.length:1),o.push(c);var d=new jst(ri(c.name,""),i);f?Xst(d,f):i.root=d,i._nodes.push(d);var p=c.children;if(p)for(var v=0;v<p.length;v++)s(p[v],d)}i.root.updateDepthAndHeight(0);var l=KF(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,u=new Ul(l,r);return u.initData(o),n&&n(u),$st({mainData:u,struct:i,structAttr:"tree"}),i.update(),i},e}();function Xst(e,t){var r=t.children;e.parentNode!==t&&(r.push(e),e.parentNode=t)}const Yst=Hst;function qst(e,t){for(var r=[];e;){var n=e.dataIndex;r.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return r.reverse(),r}var Zst=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.hasSymbolVisual=!0,r.ignoreStyleOnData=!0,r}return t.prototype.getInitialData=function(r){var n={name:r.name,children:r.data},i=r.leaves||{},o=new Ar(i,this,this.ecModel),a=Yst.createTree(n,this,s);function s(f){f.wrapMethod("getItemModel",function(h,d){var p=a.getNodeByDataIndex(d);return p&&p.children.length&&p.isExpand||(h.parentModel=o),h})}var l=0;a.eachNode("preorder",function(f){f.depth>l&&(l=f.depth)});var u=r.expandAndCollapse,c=u&&r.initialTreeDepth>=0?r.initialTreeDepth:l;return a.root.eachNode("preorder",function(f){var h=f.hostTree.data.getRawDataItem(f.dataIndex);f.isExpand=h&&h.collapsed!=null?!h.collapsed:f.depth<=c}),a.data},t.prototype.getOrient=function(){var r=this.get("orient");return r==="horizontal"?r="LR":r==="vertical"&&(r="TB"),r},t.prototype.setZoom=function(r){this.option.zoom=r},t.prototype.setCenter=function(r){this.option.center=r},t.prototype.formatTooltip=function(r,n,i){for(var o=this.getData().tree,a=o.root.children[0],s=o.getNodeByDataIndex(r),l=s.getValue(),u=s.name;s&&s!==a;)u=s.parentNode.name+"."+u,s=s.parentNode;return Is("nameValue",{name:u,value:l,noValue:isNaN(l)||l==null})},t.prototype.getDataParams=function(r){var n=e.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(r);return n.treeAncestors=qst(i,this),n.collapsed=!i.isExpand,n},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Oo);const Kst=Zst;function Jst(e,t,r){for(var n=[e],i=[],o;o=n.pop();)if(i.push(o),o.isExpand){var a=o.children;if(a.length)for(var s=0;s<a.length;s++)n.push(a[s])}for(;o=i.pop();)t(o,r)}function ph(e,t){for(var r=[e],n;n=r.pop();)if(t(n),n.isExpand){var i=n.children;if(i.length)for(var o=i.length-1;o>=0;o--)r.push(i[o])}}function Qst(e,t){e.eachSeriesByType("tree",function(r){tlt(r,t)})}function tlt(e,t){var r=Cst(e,t);e.layoutInfo=r;var n=e.get("layout"),i=0,o=0,a=null;n==="radial"?(i=2*Math.PI,o=Math.min(r.height,r.width)/2,a=a6(function(b,w){return(b.parentNode===w.parentNode?1:2)/b.depth})):(i=r.width,o=r.height,a=a6());var s=e.getData().tree.root,l=s.children[0];if(l){kst(s),Jst(l,Pst,a),s.hierNode.modifier=-l.hierNode.prelim,ph(l,Est);var u=l,c=l,f=l;ph(l,function(b){var w=b.getLayout().x;w<u.getLayout().x&&(u=b),w>c.getLayout().x&&(c=b),b.depth>f.depth&&(f=b)});var h=u===c?1:a(u,c)/2,d=h-u.getLayout().x,p=0,v=0,m=0,g=0;if(n==="radial")p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),ph(l,function(b){m=(b.getLayout().x+d)*p,g=(b.depth-1)*v;var w=Qh(m,g);b.setLayout({x:w.x,y:w.y,rawX:m,rawY:g},!0)});else{var _=e.getOrient();_==="RL"||_==="LR"?(v=o/(c.getLayout().x+h+d),p=i/(f.depth-1||1),ph(l,function(b){g=(b.getLayout().x+d)*v,m=_==="LR"?(b.depth-1)*p:i-(b.depth-1)*p,b.setLayout({x:m,y:g},!0)})):(_==="TB"||_==="BT")&&(p=i/(c.getLayout().x+h+d),v=o/(f.depth-1||1),ph(l,function(b){m=(b.getLayout().x+d)*p,g=_==="TB"?(b.depth-1)*v:o-(b.depth-1)*v,b.setLayout({x:m,y:g},!0)}))}}}function elt(e){e.eachSeriesByType("tree",function(t){var r=t.getData(),n=r.tree;n.eachNode(function(i){var o=i.getModel(),a=o.getModel("itemStyle").getItemStyle(),s=r.ensureUniqueItemVisual(i.dataIndex,"style");at(s,a)})})}function rlt(e){e.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(t,r){r.eachComponent({mainType:"series",subType:"tree",query:t},function(n){var i=t.dataIndex,o=n.getData().tree,a=o.getNodeByDataIndex(i);a.isExpand=!a.isExpand})}),e.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(t,r,n){r.eachComponent({mainType:"series",subType:"tree",query:t},function(i){var o=i.coordinateSystem,a=Tst(o,t,void 0,n);i.setCenter&&i.setCenter(a.center),i.setZoom&&i.setZoom(a.zoom)})})}function nlt(e){e.registerChartView(Fst),e.registerSeriesModel(Kst),e.registerLayout(Qst),e.registerVisual(elt),rlt(e)}var cp=$,ilt=Rt,Xm=-1,IP=function(){function e(t){var r=t.mappingMethod,n=t.type,i=this.option=zt(t);this.type=n,this.mappingMethod=r,this._normalizeData=slt[r];var o=e.visualHandlers[n];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[r],r==="piecewise"?(F2(i),olt(i)):r==="category"?i.categories?alt(i):F2(i,!0):(Bi(r!=="linear"||i.dataExtent),F2(i))}return e.prototype.mapValueToVisual=function(t){var r=this._normalizeData(t);return this._normalizedToVisual(r,t)},e.prototype.getNormalizer=function(){return Vt(this._normalizeData,this)},e.listVisualTypes=function(){return ve(e.visualHandlers)},e.isValidType=function(t){return e.visualHandlers.hasOwnProperty(t)},e.eachVisual=function(t,r,n){Rt(t)?$(t,r,n):r.call(n,t)},e.mapVisual=function(t,r,n){var i,o=ct(t)?[]:Rt(t)?{}:(i=!0,null);return e.eachVisual(t,function(a,s){var l=r.call(n,a,s);i?o=l:o[s]=l}),o},e.retrieveVisuals=function(t){var r={},n;return t&&cp(e.visualHandlers,function(i,o){t.hasOwnProperty(o)&&(r[o]=t[o],n=!0)}),n?r:null},e.prepareVisualTypes=function(t){if(ct(t))t=t.slice();else if(ilt(t)){var r=[];cp(t,function(n,i){r.push(i)}),t=r}else return[];return t.sort(function(n,i){return i==="color"&&n!=="color"&&n.indexOf("color")===0?1:-1}),t},e.dependsOn=function(t,r){return r==="color"?!!(t&&t.indexOf(r)===0):t===r},e.findPieceIndex=function(t,r,n){for(var i,o=1/0,a=0,s=r.length;a<s;a++){var l=r[a].value;if(l!=null){if(l===t||Mt(l)&&l===t+"")return a;n&&h(l,a)}}for(var a=0,s=r.length;a<s;a++){var u=r[a],c=u.interval,f=u.close;if(c){if(c[0]===-1/0){if(lv(f[1],t,c[1]))return a}else if(c[1]===1/0){if(lv(f[0],c[0],t))return a}else if(lv(f[0],c[0],t)&&lv(f[1],t,c[1]))return a;n&&h(c[0],a),n&&h(c[1],a)}}if(n)return t===1/0?r.length-1:t===-1/0?0:i;function h(d,p){var v=Math.abs(d-t);v<o&&(o=v,i=p)}},e.visualHandlers={color:{applyVisual:vh("color"),getColorMapper:function(){var t=this.option;return Vt(t.mappingMethod==="category"?function(r,n){return!n&&(r=this._normalizeData(r)),td.call(this,r)}:function(r,n,i){var o=!!i;return!n&&(r=this._normalizeData(r)),i=Ay(r,t.parsedVisual,i),o?i:ha(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return ha(Ay(t,this.option.parsedVisual),"rgba")},category:td,piecewise:function(t,r){var n=T3.call(this,r);return n==null&&(n=ha(Ay(t,this.option.parsedVisual),"rgba")),n},fixed:kl}},colorHue:sv(function(t,r){return My(t,r)}),colorSaturation:sv(function(t,r){return My(t,null,r)}),colorLightness:sv(function(t,r){return My(t,null,null,r)}),colorAlpha:sv(function(t,r){return MS(t,r)}),decal:{applyVisual:vh("decal"),_normalizedToVisual:{linear:null,category:td,piecewise:null,fixed:null}},opacity:{applyVisual:vh("opacity"),_normalizedToVisual:S3([0,1])},liftZ:{applyVisual:vh("liftZ"),_normalizedToVisual:{linear:kl,category:kl,piecewise:kl,fixed:kl}},symbol:{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("symbol",i)},_normalizedToVisual:{linear:f6,category:td,piecewise:function(t,r){var n=T3.call(this,r);return n==null&&(n=f6.call(this,t)),n},fixed:kl}},symbolSize:{applyVisual:vh("symbolSize"),_normalizedToVisual:S3([0,1])}},e}();function olt(e){var t=e.pieceList;e.hasSpecialVisual=!1,$(t,function(r,n){r.originIndex=n,r.visual!=null&&(e.hasSpecialVisual=!0)})}function alt(e){var t=e.categories,r=e.categoryMap={},n=e.visual;if(cp(t,function(a,s){r[a]=s}),!ct(n)){var i=[];Rt(n)?cp(n,function(a,s){var l=r[s];i[l!=null?l:Xm]=a}):i[Xm]=n,n=G$(e,i)}for(var o=t.length-1;o>=0;o--)n[o]==null&&(delete r[t[o]],t.pop())}function F2(e,t){var r=e.visual,n=[];Rt(r)?cp(r,function(o){n.push(o)}):r!=null&&n.push(r);var i={color:1,symbol:1};!t&&n.length===1&&!i.hasOwnProperty(e.type)&&(n[1]=n[0]),G$(e,n)}function sv(e){return{applyVisual:function(t,r,n){var i=this.mapValueToVisual(t);n("color",e(r("color"),i))},_normalizedToVisual:S3([0,1])}}function f6(e){var t=this.option.visual;return t[Math.round(ma(e,[0,1],[0,t.length-1],!0))]||{}}function vh(e){return function(t,r,n){n(e,this.mapValueToVisual(t))}}function td(e){var t=this.option.visual;return t[this.option.loop&&e!==Xm?e%t.length:e]}function kl(){return this.option.visual[0]}function S3(e){return{linear:function(t){return ma(t,e,this.option.visual,!0)},category:td,piecewise:function(t,r){var n=T3.call(this,r);return n==null&&(n=ma(t,e,this.option.visual,!0)),n},fixed:kl}}function T3(e){var t=this.option,r=t.pieceList;if(t.hasSpecialVisual){var n=IP.findPieceIndex(e,r),i=r[n];if(i&&i.visual)return i.visual[this.type]}}function G$(e,t){return e.visual=t,e.type==="color"&&(e.parsedVisual=Lt(t,function(r){var n=ei(r);return n||[0,0,0,1]})),t}var slt={linear:function(e){return ma(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,r=IP.findPieceIndex(e,t,!0);if(r!=null)return ma(r,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return t==null?Xm:t},fixed:jr};function lv(e,t,r){return e?t<=r:t<r}const _n=IP;var h6=xs.prototype,$2=Z1.prototype,j$=function(){function e(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1}return e}();(function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t})(j$);function B2(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var llt=function(e){yt(t,e);function t(r){var n=e.call(this,r)||this;return n.type="ec-line",n}return t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new j$},t.prototype.buildPath=function(r,n){B2(n)?h6.buildPath.call(this,r,n):$2.buildPath.call(this,r,n)},t.prototype.pointAt=function(r){return B2(this.shape)?h6.pointAt.call(this,r):$2.pointAt.call(this,r)},t.prototype.tangentAt=function(r){var n=this.shape,i=B2(n)?[n.x2-n.x1,n.y2-n.y1]:$2.tangentAt.call(this,r);return xk(i,i)},t}(de);const ult=llt;var z2=["fromSymbol","toSymbol"];function d6(e){return"_"+e+"Type"}function p6(e,t,r){var n=t.getItemVisual(r,e);if(!(!n||n==="none")){var i=t.getItemVisual(r,e+"Size"),o=t.getItemVisual(r,e+"Rotate"),a=t.getItemVisual(r,e+"Offset"),s=t.getItemVisual(r,e+"KeepAspect"),l=wF(i),u=mP(a||0,l),c=zi(n,-l[0]/2+u[0],-l[1]/2+u[1],l[0],l[1],null,s);return c.__specifiedRotation=o==null||isNaN(o)?void 0:+o*Math.PI/180||0,c.name=e,c}}function clt(e){var t=new ult({name:"line",subPixelOptimize:!0});return k3(t.shape,e),t}function k3(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var r=t[2];r?(e.cpx1=r[0],e.cpy1=r[1]):(e.cpx1=NaN,e.cpy1=NaN)}var flt=function(e){yt(t,e);function t(r,n,i){var o=e.call(this)||this;return o._createLine(r,n,i),o}return t.prototype._createLine=function(r,n,i){var o=r.hostModel,a=r.getItemLayout(n),s=clt(a);s.shape.percent=0,Io(s,{shape:{percent:1}},o,n),this.add(s),$(z2,function(l){var u=p6(l,r,n);this.add(u),this[d6(l)]=r.getItemVisual(n,l)},this),this._updateCommonStl(r,n,i)},t.prototype.updateData=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=r.getItemLayout(n),l={shape:{}};k3(l.shape,s),_r(a,l,o,n),$(z2,function(u){var c=r.getItemVisual(n,u),f=d6(u);if(this[f]!==c){this.remove(this.childOfName(u));var h=p6(u,r,n);this.add(h)}this[f]=c},this),this._updateCommonStl(r,n,i)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(r,n,i){var o=r.hostModel,a=this.childOfName("line"),s=i&&i.emphasisLineStyle,l=i&&i.blurLineStyle,u=i&&i.selectLineStyle,c=i&&i.labelStatesModels,f=i&&i.emphasisDisabled,h=i&&i.focus,d=i&&i.blurScope;if(!i||r.hasItemOption){var p=r.getItemModel(n),v=p.getModel("emphasis");s=v.getModel("lineStyle").getLineStyle(),l=p.getModel(["blur","lineStyle"]).getLineStyle(),u=p.getModel(["select","lineStyle"]).getLineStyle(),f=v.get("disabled"),h=v.get("focus"),d=v.get("blurScope"),c=pu(p)}var m=r.getItemVisual(n,"style"),g=m.stroke;a.useStyle(m),a.style.fill=null,a.style.strokeNoScale=!0,a.ensureState("emphasis").style=s,a.ensureState("blur").style=l,a.ensureState("select").style=u,$(z2,function(S){var k=this.childOfName(S);if(k){k.setColor(g),k.style.opacity=m.opacity;for(var C=0;C<si.length;C++){var E=si[C],M=a.getState(E);if(M){var x=M.style||{},D=k.ensureState(E),B=D.style||(D.style={});x.stroke!=null&&(B[k.__isEmptyBrush?"stroke":"fill"]=x.stroke),x.opacity!=null&&(B.opacity=x.opacity)}}k.markRedraw()}},this);var _=o.getRawValue(n);vf(this,c,{labelDataIndex:n,labelFetcher:{getFormattedLabel:function(S,k){return o.getFormattedLabel(S,k,r.dataType)}},inheritColor:g||"#000",defaultOpacity:m.opacity,defaultText:(_==null?r.getName(n):isFinite(_)?Ke(_):_)+""});var b=this.getTextContent();if(b){var w=c.normal;b.__align=b.style.align,b.__verticalAlign=b.style.verticalAlign,b.__position=w.get("position")||"middle";var T=w.get("distance");ct(T)||(T=[T,T]),b.__labelDistance=T}this.setTextConfig({position:null,local:!0,inside:!1}),tu(this,h,d,f)},t.prototype.highlight=function(){Zd(this)},t.prototype.downplay=function(){Kd(this)},t.prototype.updateLayout=function(r,n){this.setLinePoints(r.getItemLayout(n))},t.prototype.setLinePoints=function(r){var n=this.childOfName("line");k3(n.shape,r),n.dirty()},t.prototype.beforeUpdate=function(){var r=this,n=r.childOfName("fromSymbol"),i=r.childOfName("toSymbol"),o=r.getTextContent();if(!n&&!i&&(!o||o.ignore))return;for(var a=1,s=this.parent;s;)s.scaleX&&(a/=s.scaleX),s=s.parent;var l=r.childOfName("line");if(!this.__dirty&&!l.__dirty)return;var u=l.shape.percent,c=l.pointAt(0),f=l.pointAt(u),h=H7([],f,c);xk(h,h);function d(M,x){var D=M.__specifiedRotation;if(D==null){var B=l.tangentAt(x);M.attr("rotation",(x===1?-1:1)*Math.PI/2-Math.atan2(B[1],B[0]))}else M.attr("rotation",D)}if(n&&(n.setPosition(c),d(n,0),n.scaleX=n.scaleY=a*u,n.markRedraw()),i&&(i.setPosition(f),d(i,1),i.scaleX=i.scaleY=a*u,i.markRedraw()),o&&!o.ignore){o.x=o.y=0,o.originX=o.originY=0;var p=void 0,v=void 0,m=o.__labelDistance,g=m[0]*a,_=m[1]*a,b=u/2,w=l.tangentAt(b),T=[w[1],-w[0]],S=l.pointAt(b);T[1]>0&&(T[0]=-T[0],T[1]=-T[1]);var k=w[0]<0?-1:1;if(o.__position!=="start"&&o.__position!=="end"){var C=-Math.atan2(w[1],w[0]);f[0]<c[0]&&(C=Math.PI+C),o.rotation=C}var E=void 0;switch(o.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":E=-_,v="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":E=_,v="top";break;default:E=0,v="middle"}switch(o.__position){case"end":o.x=h[0]*g+f[0],o.y=h[1]*_+f[1],p=h[0]>.8?"left":h[0]<-.8?"right":"center",v=h[1]>.8?"top":h[1]<-.8?"bottom":"middle";break;case"start":o.x=-h[0]*g+c[0],o.y=-h[1]*_+c[1],p=h[0]>.8?"right":h[0]<-.8?"left":"center",v=h[1]>.8?"bottom":h[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":o.x=g*k+c[0],o.y=c[1]+E,p=w[0]<0?"right":"left",o.originX=-g*k,o.originY=-E;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":o.x=S[0],o.y=S[1]+E,p="center",o.originY=-E;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":o.x=-g*k+f[0],o.y=f[1]+E,p=w[0]>=0?"right":"left",o.originX=g*k,o.originY=-E;break}o.scaleX=o.scaleY=a,o.setStyle({verticalAlign:o.__verticalAlign||v,align:o.__align||p})}},t}(Ne);const hlt=flt;var dlt=function(){function e(t){this.group=new Ne,this._LineCtor=t||hlt}return e.prototype.updateData=function(t){var r=this;this._progressiveEls=null;var n=this,i=n.group,o=n._lineData;n._lineData=t,o||i.removeAll();var a=v6(t);t.diff(o).add(function(s){r._doAdd(t,s,a)}).update(function(s,l){r._doUpdate(o,t,l,s,a)}).remove(function(s){i.remove(o.getItemGraphicEl(s))}).execute()},e.prototype.updateLayout=function(){var t=this._lineData;!t||t.eachItemGraphicEl(function(r,n){r.updateLayout(t,n)},this)},e.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=v6(t),this._lineData=null,this.group.removeAll()},e.prototype.incrementalUpdate=function(t,r){this._progressiveEls=[];function n(s){!s.isGroup&&!plt(s)&&(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}for(var i=t.start;i<t.end;i++){var o=r.getItemLayout(i);if(V2(o)){var a=new this._LineCtor(r,i,this._seriesScope);a.traverse(n),this.group.add(a),r.setItemGraphicEl(i,a),this._progressiveEls.push(a)}}},e.prototype.remove=function(){this.group.removeAll()},e.prototype.eachRendered=function(t){pf(this._progressiveEls||this.group,t)},e.prototype._doAdd=function(t,r,n){var i=t.getItemLayout(r);if(!!V2(i)){var o=new this._LineCtor(t,r,n);t.setItemGraphicEl(r,o),this.group.add(o)}},e.prototype._doUpdate=function(t,r,n,i,o){var a=t.getItemGraphicEl(n);if(!V2(r.getItemLayout(i))){this.group.remove(a);return}a?a.updateData(r,i,o):a=new this._LineCtor(r,i,o),r.setItemGraphicEl(i,a),this.group.add(a)},e}();function plt(e){return e.animators&&e.animators.length>0}function v6(e){var t=e.hostModel,r=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:r.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:r.get("disabled"),blurScope:r.get("blurScope"),focus:r.get("focus"),labelStatesModels:pu(t)}}function g6(e){return isNaN(e[0])||isNaN(e[1])}function V2(e){return e&&!g6(e[0])&&!g6(e[1])}const vlt=dlt;function glt(e,t,r,n,i,o){e=e||0;var a=r[1]-r[0];if(i!=null&&(i=Hu(i,[0,a])),o!=null&&(o=Math.max(o,i!=null?i:0)),n==="all"){var s=Math.abs(t[1]-t[0]);s=Hu(s,[0,a]),i=o=Hu(s,[i,o]),n=0}t[0]=Hu(t[0],r),t[1]=Hu(t[1],r);var l=U2(t,n);t[n]+=e;var u=i||0,c=r.slice();l.sign<0?c[0]+=u:c[1]-=u,t[n]=Hu(t[n],c);var f;return f=U2(t,n),i!=null&&(f.sign!==l.sign||f.span<i)&&(t[1-n]=t[n]+l.sign*i),f=U2(t,n),o!=null&&f.span>o&&(t[1-n]=t[n]+f.sign*o),t}function U2(e,t){var r=e[t]-e[1-t];return{span:Math.abs(r),sign:r>0?-1:r<0?1:t?-1:1}}function Hu(e,t){return Math.min(t[1]!=null?t[1]:1/0,Math.max(t[0]!=null?t[0]:-1/0,e))}var m6={color:"fill",borderColor:"stroke"},mlt={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},da=Re(),_lt=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(r,n){return Np(null,this)},t.prototype.getDataParams=function(r,n,i){var o=e.prototype.getDataParams.call(this,r,n);return i&&(o.info=da(i).info),o},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Oo);const ylt=_lt;function blt(e,t){return t=t||[0,0],Lt(["x","y"],function(r,n){var i=this.getAxis(r),o=t[n],a=e[n]/2;return i.type==="category"?i.getBandWidth():Math.abs(i.dataToCoord(o-a)-i.dataToCoord(o+a))},this)}function wlt(e){var t=e.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(blt,e)}}}function Slt(e,t){return t=t||[0,0],Lt([0,1],function(r){var n=t[r],i=e[r]/2,o=[],a=[];return o[r]=n-i,a[r]=n+i,o[1-r]=a[1-r]=t[1-r],Math.abs(this.dataToPoint(o)[r]-this.dataToPoint(a)[r])},this)}function Tlt(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(Slt,e)}}}function klt(e,t){var r=this.getAxis(),n=t instanceof Array?t[0]:t,i=(e instanceof Array?e[0]:e)/2;return r.type==="category"?r.getBandWidth():Math.abs(r.dataToCoord(n-i)-r.dataToCoord(n+i))}function Plt(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(r){return e.dataToPoint(r)},size:Vt(klt,e)}}}function Elt(e,t){return t=t||[0,0],Lt(["Radius","Angle"],function(r,n){var i="get"+r+"Axis",o=this[i](),a=t[n],s=e[n]/2,l=o.type==="category"?o.getBandWidth():Math.abs(o.dataToCoord(a-s)-o.dataToCoord(a+s));return r==="Angle"&&(l=l*Math.PI/180),l},this)}function Clt(e){var t=e.getRadiusAxis(),r=e.getAngleAxis(),n=t.getExtent();return n[0]>n[1]&&n.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:n[1],r0:n[0]},api:{coord:function(i){var o=t.dataToRadius(i[0]),a=r.dataToAngle(i[1]),s=e.coordToPoint([o,a]);return s.push(o,a*Math.PI/180),s},size:Vt(Elt,e)}}}function Alt(e){var t=e.getRect(),r=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:r.start,end:r.end,weeks:r.weeks,dayCount:r.allDay}},api:{coord:function(n,i){return e.dataToPoint(n,i)}}}}function Mlt(e,t,r,n){return e&&(e.legacy||e.legacy!==!1&&!r&&!n&&t!=="tspan"&&(t==="text"||pt(e,"text")))}function xlt(e,t,r){var n=e,i,o,a;if(t==="text")a=n;else{a={},pt(n,"text")&&(a.text=n.text),pt(n,"rich")&&(a.rich=n.rich),pt(n,"textFill")&&(a.fill=n.textFill),pt(n,"textStroke")&&(a.stroke=n.textStroke),pt(n,"fontFamily")&&(a.fontFamily=n.fontFamily),pt(n,"fontSize")&&(a.fontSize=n.fontSize),pt(n,"fontStyle")&&(a.fontStyle=n.fontStyle),pt(n,"fontWeight")&&(a.fontWeight=n.fontWeight),o={type:"text",style:a,silent:!0},i={};var s=pt(n,"textPosition");r?i.position=s?n.textPosition:"inside":s&&(i.position=n.textPosition),pt(n,"textPosition")&&(i.position=n.textPosition),pt(n,"textOffset")&&(i.offset=n.textOffset),pt(n,"textRotation")&&(i.rotation=n.textRotation),pt(n,"textDistance")&&(i.distance=n.textDistance)}return _6(a,e),$(a.rich,function(l){_6(l,l)}),{textConfig:i,textContent:o}}function _6(e,t){!t||(t.font=t.textFont||t.font,pt(t,"textStrokeWidth")&&(e.lineWidth=t.textStrokeWidth),pt(t,"textAlign")&&(e.align=t.textAlign),pt(t,"textVerticalAlign")&&(e.verticalAlign=t.textVerticalAlign),pt(t,"textLineHeight")&&(e.lineHeight=t.textLineHeight),pt(t,"textWidth")&&(e.width=t.textWidth),pt(t,"textHeight")&&(e.height=t.textHeight),pt(t,"textBackgroundColor")&&(e.backgroundColor=t.textBackgroundColor),pt(t,"textPadding")&&(e.padding=t.textPadding),pt(t,"textBorderColor")&&(e.borderColor=t.textBorderColor),pt(t,"textBorderWidth")&&(e.borderWidth=t.textBorderWidth),pt(t,"textBorderRadius")&&(e.borderRadius=t.textBorderRadius),pt(t,"textBoxShadowColor")&&(e.shadowColor=t.textBoxShadowColor),pt(t,"textBoxShadowBlur")&&(e.shadowBlur=t.textBoxShadowBlur),pt(t,"textBoxShadowOffsetX")&&(e.shadowOffsetX=t.textBoxShadowOffsetX),pt(t,"textBoxShadowOffsetY")&&(e.shadowOffsetY=t.textBoxShadowOffsetY))}function y6(e,t,r){var n=e;n.textPosition=n.textPosition||r.position||"inside",r.offset!=null&&(n.textOffset=r.offset),r.rotation!=null&&(n.textRotation=r.rotation),r.distance!=null&&(n.textDistance=r.distance);var i=n.textPosition.indexOf("inside")>=0,o=e.fill||"#000";b6(n,t);var a=n.textFill==null;return i?a&&(n.textFill=r.insideFill||"#fff",!n.textStroke&&r.insideStroke&&(n.textStroke=r.insideStroke),!n.textStroke&&(n.textStroke=o),n.textStrokeWidth==null&&(n.textStrokeWidth=2)):(a&&(n.textFill=e.fill||r.outsideFill||"#000"),!n.textStroke&&r.outsideStroke&&(n.textStroke=r.outsideStroke)),n.text=t.text,n.rich=t.rich,$(t.rich,function(s){b6(s,s)}),n}function b6(e,t){!t||(pt(t,"fill")&&(e.textFill=t.fill),pt(t,"stroke")&&(e.textStroke=t.fill),pt(t,"lineWidth")&&(e.textStrokeWidth=t.lineWidth),pt(t,"font")&&(e.font=t.font),pt(t,"fontStyle")&&(e.fontStyle=t.fontStyle),pt(t,"fontWeight")&&(e.fontWeight=t.fontWeight),pt(t,"fontSize")&&(e.fontSize=t.fontSize),pt(t,"fontFamily")&&(e.fontFamily=t.fontFamily),pt(t,"align")&&(e.textAlign=t.align),pt(t,"verticalAlign")&&(e.textVerticalAlign=t.verticalAlign),pt(t,"lineHeight")&&(e.textLineHeight=t.lineHeight),pt(t,"width")&&(e.textWidth=t.width),pt(t,"height")&&(e.textHeight=t.height),pt(t,"backgroundColor")&&(e.textBackgroundColor=t.backgroundColor),pt(t,"padding")&&(e.textPadding=t.padding),pt(t,"borderColor")&&(e.textBorderColor=t.borderColor),pt(t,"borderWidth")&&(e.textBorderWidth=t.borderWidth),pt(t,"borderRadius")&&(e.textBorderRadius=t.borderRadius),pt(t,"shadowColor")&&(e.textBoxShadowColor=t.shadowColor),pt(t,"shadowBlur")&&(e.textBoxShadowBlur=t.shadowBlur),pt(t,"shadowOffsetX")&&(e.textBoxShadowOffsetX=t.shadowOffsetX),pt(t,"shadowOffsetY")&&(e.textBoxShadowOffsetY=t.shadowOffsetY),pt(t,"textShadowColor")&&(e.textShadowColor=t.textShadowColor),pt(t,"textShadowBlur")&&(e.textShadowBlur=t.textShadowBlur),pt(t,"textShadowOffsetX")&&(e.textShadowOffsetX=t.textShadowOffsetX),pt(t,"textShadowOffsetY")&&(e.textShadowOffsetY=t.textShadowOffsetY))}var H$={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},w6=ve(H$);hu(Lo,function(e,t){return e[t]=1,e},{});Lo.join(", ");var Ym=["","style","shape","extra"],Kc=Re();function OP(e,t,r,n,i){var o=e+"Animation",a=Jk(e,n,i)||{},s=Kc(t).userDuring;return a.duration>0&&(a.during=s?Vt(Flt,{el:t,userDuring:s}):null,a.setToFinal=!0,a.scope=e),at(a,r[o]),a}function Llt(e,t,r,n){n=n||{};var i=n.dataIndex,o=n.isInit,a=n.clearStyle,s=r.isAnimationEnabled(),l=Kc(e),u=t.style;l.userDuring=t.during;var c={},f={};if(Blt(e,t,f),T6("shape",t,f),T6("extra",t,f),!o&&s&&($lt(e,t,c),S6("shape",e,t,c),S6("extra",e,t,c),zlt(e,t,u,c)),f.style=u,Olt(e,f,a),Dlt(e,t),s)if(o){var h={};$(Ym,function(p){var v=p?t[p]:t;v&&v.enterFrom&&(p&&(h[p]=h[p]||{}),at(p?h[p]:h,v.enterFrom))});var d=OP("enter",e,t,r,i);d.duration>0&&e.animateFrom(h,d)}else Rlt(e,t,i||0,r,c);Ilt(e,t),u?e.dirty():e.markRedraw()}function Ilt(e,t){for(var r=Kc(e).leaveToProps,n=0;n<Ym.length;n++){var i=Ym[n],o=i?t[i]:t;o&&o.leaveTo&&(r||(r=Kc(e).leaveToProps={}),i&&(r[i]=r[i]||{}),at(i?r[i]:r,o.leaveTo))}}function RP(e,t,r,n){if(e){var i=e.parent,o=Kc(e).leaveToProps;if(o){var a=OP("update",e,t,r,0);a.done=function(){i.remove(e),n&&n()},e.animateTo(o,a)}else i.remove(e),n&&n()}}function $c(e){return e==="all"}function Olt(e,t,r){var n=t.style;if(!e.isGroup&&n){if(r){e.useStyle({});for(var i=e.animators,o=0;o<i.length;o++){var a=i[o];a.targetName==="style"&&a.changeTarget(e.style)}}e.setStyle(n)}t&&(t.style=null,t&&e.attr(t),t.style=n)}function Rlt(e,t,r,n,i){if(i){var o=OP("update",e,t,n,r);o.duration>0&&e.animateFrom(i,o)}}function Dlt(e,t){pt(t,"silent")&&(e.silent=t.silent),pt(t,"ignore")&&(e.ignore=t.ignore),e instanceof du&&pt(t,"invisible")&&(e.invisible=t.invisible),e instanceof de&&pt(t,"autoBatch")&&(e.autoBatch=t.autoBatch)}var vo={},Nlt={setTransform:function(e,t){return vo.el[e]=t,this},getTransform:function(e){return vo.el[e]},setShape:function(e,t){var r=vo.el,n=r.shape||(r.shape={});return n[e]=t,r.dirtyShape&&r.dirtyShape(),this},getShape:function(e){var t=vo.el.shape;if(t)return t[e]},setStyle:function(e,t){var r=vo.el,n=r.style;return n&&(n[e]=t,r.dirtyStyle&&r.dirtyStyle()),this},getStyle:function(e){var t=vo.el.style;if(t)return t[e]},setExtra:function(e,t){var r=vo.el.extra||(vo.el.extra={});return r[e]=t,this},getExtra:function(e){var t=vo.el.extra;if(t)return t[e]}};function Flt(){var e=this,t=e.el;if(!!t){var r=Kc(t).userDuring,n=e.userDuring;if(r!==n){e.el=e.userDuring=null;return}vo.el=t,n(Nlt)}}function S6(e,t,r,n){var i=r[e];if(!!i){var o=t[e],a;if(o){var s=r.transition,l=i.transition;if(l)if(!a&&(a=n[e]={}),$c(l))at(a,o);else for(var u=Je(l),c=0;c<u.length;c++){var f=u[c],h=o[f];a[f]=h}else if($c(s)||fe(s,e)>=0){!a&&(a=n[e]={});for(var d=ve(o),c=0;c<d.length;c++){var f=d[c],h=o[f];Vlt(i[f],h)&&(a[f]=h)}}}}}function T6(e,t,r){var n=t[e];if(!!n)for(var i=r[e]={},o=ve(n),a=0;a<o.length;a++){var s=o[a];i[s]=md(n[s])}}function $lt(e,t,r){for(var n=t.transition,i=$c(n)?Lo:Je(n||[]),o=0;o<i.length;o++){var a=i[o];if(!(a==="style"||a==="shape"||a==="extra")){var s=e[a];r[a]=s}}}function Blt(e,t,r){for(var n=0;n<w6.length;n++){var i=w6[n],o=H$[i],a=t[i];a&&(r[o[0]]=a[0],r[o[1]]=a[1])}for(var n=0;n<Lo.length;n++){var s=Lo[n];t[s]!=null&&(r[s]=t[s])}}function zlt(e,t,r,n){if(!!r){var i=e.style,o;if(i){var a=r.transition,s=t.transition;if(a&&!$c(a)){var l=Je(a);!o&&(o=n.style={});for(var u=0;u<l.length;u++){var c=l[u],f=i[c];o[c]=f}}else if(e.getAnimationStyleProps&&($c(s)||$c(a)||fe(s,"style")>=0)){var h=e.getAnimationStyleProps(),d=h?h.style:null;if(d){!o&&(o=n.style={});for(var p=ve(r),u=0;u<p.length;u++){var c=p[u];if(d[c]){var f=i[c];o[c]=f}}}}}}}function Vlt(e,t){return Xr(e)?e!==t:e!=null&&isFinite(e)}var X$=Re(),Ult=["percent","easing","shape","style","extra"];function Wlt(e){e.stopAnimation("keyframe"),e.attr(X$(e))}function Y$(e,t,r){if(!(!r.isAnimationEnabled()||!t)){if(ct(t)){$(t,function(s){Y$(e,s,r)});return}var n=t.keyframes,i=t.duration;if(r&&i==null){var o=Jk("enter",r,0);i=o&&o.duration}if(!(!n||!i)){var a=X$(e);$(Ym,function(s){if(!(s&&!e[s])){var l;n.sort(function(u,c){return u.percent-c.percent}),$(n,function(u){var c=e.animators,f=s?u[s]:u;if(!!f){var h=ve(f);if(s||(h=Er(h,function(v){return fe(Ult,v)<0})),!!h.length){l||(l=e.animate(s,t.loop,!0),l.scope="keyframe");for(var d=0;d<c.length;d++)c[d]!==l&&c[d].targetName===l.targetName&&c[d].stopTracks(h);s&&(a[s]=a[s]||{});var p=s?a[s]:a;$(h,function(v){p[v]=((s?e[s]:e)||{})[v]}),l.whenWithKeys(i*u.percent,f,h,u.easing)}}}),l&&l.delay(t.delay||0).duration(i).start(t.easing)}})}}}var pa="emphasis",gs="normal",DP="blur",NP="select",Os=[gs,pa,DP,NP],W2={normal:["itemStyle"],emphasis:[pa,"itemStyle"],blur:[DP,"itemStyle"],select:[NP,"itemStyle"]},G2={normal:["label"],emphasis:[pa,"label"],blur:[DP,"label"],select:[NP,"label"]},Glt=["x","y"],jlt="e\0\0",Un={normal:{},emphasis:{},blur:{},select:{}},Hlt={cartesian2d:wlt,geo:Tlt,single:Plt,polar:Clt,calendar:Alt};function P3(e){return e instanceof de}function E3(e){return e instanceof du}function Xlt(e,t){t.copyTransform(e),E3(t)&&E3(e)&&(t.setStyle(e.style),t.z=e.z,t.z2=e.z2,t.zlevel=e.zlevel,t.invisible=e.invisible,t.ignore=e.ignore,P3(t)&&P3(e)&&t.setShape(e.shape))}var Ylt=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i,o){this._progressiveEls=null;var a=this._data,s=r.getData(),l=this.group,u=k6(r,s,n,i);a||l.removeAll(),s.diff(a).add(function(f){j2(i,null,f,u(f,o),r,l,s)}).remove(function(f){var h=a.getItemGraphicEl(f);h&&RP(h,da(h).option,r)}).update(function(f,h){var d=a.getItemGraphicEl(h);j2(i,d,f,u(f,o),r,l,s)}).execute();var c=r.get("clip",!0)?C$(r.coordinateSystem,!1,r):null;c?l.setClipPath(c):l.removeClipPath(),this._data=s},t.prototype.incrementalPrepareRender=function(r,n,i){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(r,n,i,o,a){var s=n.getData(),l=k6(n,s,i,o),u=this._progressiveEls=[];function c(d){d.isGroup||(d.incremental=!0,d.ensureState("emphasis").hoverLayer=!0)}for(var f=r.start;f<r.end;f++){var h=j2(null,null,f,l(f,a),n,this.group,s);h&&(h.traverse(c),u.push(h))}},t.prototype.eachRendered=function(r){pf(this._progressiveEls||this.group,r)},t.prototype.filterForExposedEvent=function(r,n,i,o){var a=n.element;if(a==null||i.name===a)return!0;for(;(i=i.__hostTarget||i.parent)&&i!==this.group;)if(i.name===a)return!0;return!1},t.type="custom",t}(ni);const qlt=Ylt;function FP(e){var t=e.type,r;if(t==="path"){var n=e.shape,i=n.width!=null&&n.height!=null?{x:n.x||0,y:n.y||0,width:n.width,height:n.height}:null,o=K$(n);r=K1(o,null,i,n.layout||"center"),da(r).customPathData=o}else if(t==="image")r=new Ea({}),da(r).customImagePath=e.style.image;else if(t==="text")r=new tr({});else if(t==="group")r=new Ne;else{if(t==="compoundPath")throw new Error('"compoundPath" is not supported yet.');var a=fN(t);if(!a){var s="";oe(s)}r=new a}return da(r).customGraphicType=t,r.name=e.name,r.z2EmphasisLift=1,r.z2SelectLift=1,r}function $P(e,t,r,n,i,o,a){Wlt(t);var s=i&&i.normal.cfg;s&&t.setTextConfig(s),n&&n.transition==null&&(n.transition=Glt);var l=n&&n.style;if(l){if(t.type==="text"){var u=l;pt(u,"textFill")&&(u.fill=u.textFill),pt(u,"textStroke")&&(u.stroke=u.textStroke)}var c=void 0,f=P3(t)?l.decal:null;e&&f&&(f.dirty=!0,c=Gm(f,e)),l.__decalPattern=c}if(E3(t)&&l){var c=l.__decalPattern;c&&(l.decal=c)}Llt(t,n,o,{dataIndex:r,isInit:a,clearStyle:!0}),Y$(t,n.keyframeAnimation,o)}function q$(e,t,r,n,i){var o=t.isGroup?null:t,a=i&&i[e].cfg;if(o){var s=o.ensureState(e);if(n===!1){var l=o.getState(e);l&&(l.style=null)}else s.style=n||null;a&&(s.textConfig=a),jk(o)}}function Zlt(e,t,r){if(!e.isGroup){var n=e,i=r.currentZ,o=r.currentZLevel;n.z=i,n.zlevel=o;var a=t.z2;a!=null&&(n.z2=a||0);for(var s=0;s<Os.length;s++)Klt(n,t,Os[s])}}function Klt(e,t,r){var n=r===gs,i=n?t:qm(t,r),o=i?i.z2:null,a;o!=null&&(a=n?e:e.ensureState(r),a.z2=o||0)}function k6(e,t,r,n){var i=e.get("renderItem"),o=e.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):Hlt[o.type](o));for(var s=re({getWidth:n.getWidth,getHeight:n.getHeight,getZr:n.getZr,getDevicePixelRatio:n.getDevicePixelRatio,value:w,style:S,ordinalRawValue:T,styleEmphasis:k,visual:M,barLayout:x,currentSeriesIndices:D,font:B},a.api||{}),l={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:a.coordSys,dataInsideLength:t.count(),encode:Jlt(e.getData())},u,c,f={},h={},d={},p={},v=0;v<Os.length;v++){var m=Os[v];d[m]=e.getModel(W2[m]),p[m]=e.getModel(G2[m])}function g(V){return V===u?c||(c=t.getItemModel(V)):t.getItemModel(V)}function _(V,F){return t.hasItemOption?V===u?f[F]||(f[F]=g(V).getModel(W2[F])):g(V).getModel(W2[F]):d[F]}function b(V,F){return t.hasItemOption?V===u?h[F]||(h[F]=g(V).getModel(G2[F])):g(V).getModel(G2[F]):p[F]}return function(V,F){return u=V,c=null,f={},h={},i&&i(re({dataIndexInside:V,dataIndex:t.getRawIndex(V),actionType:F?F.type:null},l),s)};function w(V,F){return F==null&&(F=u),t.getStore().get(t.getDimensionIndex(V||0),F)}function T(V,F){F==null&&(F=u),V=V||0;var G=t.getDimensionInfo(V);if(!G){var Z=t.getDimensionIndex(V);return Z>=0?t.getStore().get(Z,F):void 0}var q=t.get(G.name,F),et=G&&G.ordinalMeta;return et?et.categories[q]:q}function S(V,F){F==null&&(F=u);var G=t.getItemVisual(F,"style"),Z=G&&G.fill,q=G&&G.opacity,et=_(F,gs).getItemStyle();Z!=null&&(et.fill=Z),q!=null&&(et.opacity=q);var At={inheritColor:Mt(Z)?Z:"#000"},Dt=b(F,gs),Tt=mn(Dt,null,At,!1,!0);Tt.text=Dt.getShallow("show")?Zt(e.getFormattedLabel(F,gs),lp(t,F)):null;var kt=$m(Dt,At,!1);return E(V,et),et=y6(et,Tt,kt),V&&C(et,V),et.legacy=!0,et}function k(V,F){F==null&&(F=u);var G=_(F,pa).getItemStyle(),Z=b(F,pa),q=mn(Z,null,null,!0,!0);q.text=Z.getShallow("show")?vd(e.getFormattedLabel(F,pa),e.getFormattedLabel(F,gs),lp(t,F)):null;var et=$m(Z,null,!0);return E(V,G),G=y6(G,q,et),V&&C(G,V),G.legacy=!0,G}function C(V,F){for(var G in F)pt(F,G)&&(V[G]=F[G])}function E(V,F){V&&(V.textFill&&(F.textFill=V.textFill),V.textPosition&&(F.textPosition=V.textPosition))}function M(V,F){if(F==null&&(F=u),pt(m6,V)){var G=t.getItemVisual(F,"style");return G?G[m6[V]]:null}if(pt(mlt,V))return t.getItemVisual(F,V)}function x(V){if(o.type==="cartesian2d"){var F=o.getBaseAxis();return Vit(re({axis:F},V))}}function D(){return r.getCurrentSeriesIndices()}function B(V){return _N(V,r)}}function Jlt(e){var t={};return $(e.dimensions,function(r){var n=e.getDimensionInfo(r);if(!n.isExtraCoord){var i=n.coordDim,o=t[i]=t[i]||[];o[n.coordDimIndex]=e.getDimensionIndex(r)}}),t}function j2(e,t,r,n,i,o,a){if(!n){o.remove(t);return}var s=BP(e,t,r,n,i,o);return s&&a.setItemGraphicEl(r,s),s&&tu(s,n.focus,n.blurScope,n.emphasisDisabled),s}function BP(e,t,r,n,i,o){var a=-1,s=t;t&&Z$(t,n,i)&&(a=fe(o.childrenRef(),t),t=null);var l=!t,u=t;u?u.clearStates():(u=FP(n),s&&Xlt(s,u)),n.morph===!1?u.disableMorphing=!0:u.disableMorphing&&(u.disableMorphing=!1),Un.normal.cfg=Un.normal.conOpt=Un.emphasis.cfg=Un.emphasis.conOpt=Un.blur.cfg=Un.blur.conOpt=Un.select.cfg=Un.select.conOpt=null,Un.isLegacy=!1,tut(u,r,n,i,l,Un),Qlt(u,r,n,i,l),$P(e,u,r,n,Un,i,l),pt(n,"info")&&(da(u).info=n.info);for(var c=0;c<Os.length;c++){var f=Os[c];if(f!==gs){var h=qm(n,f),d=zP(n,h,f);q$(f,u,h,d,Un)}}return Zlt(u,n,i),n.type==="group"&&eut(e,u,r,n,i),a>=0?o.replaceAt(u,a):o.add(u),u}function Z$(e,t,r){var n=da(e),i=t.type,o=t.shape,a=t.style;return r.isUniversalTransitionEnabled()||i!=null&&i!==n.customGraphicType||i==="path"&&out(o)&&K$(o)!==n.customPathData||i==="image"&&pt(a,"image")&&a.image!==n.customImagePath}function Qlt(e,t,r,n,i){var o=r.clipPath;if(o===!1)e&&e.getClipPath()&&e.removeClipPath();else if(o){var a=e.getClipPath();a&&Z$(a,o,n)&&(a=null),a||(a=FP(o),e.setClipPath(a)),$P(null,a,t,o,null,n,i)}}function tut(e,t,r,n,i,o){if(!e.isGroup){P6(r,null,o),P6(r,pa,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,u=o.select.conOpt;if(a!=null||s!=null||u!=null||l!=null){var c=e.getTextContent();if(a===!1)c&&e.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},c?c.clearStates():(c=FP(a),e.setTextContent(c)),$P(null,c,t,a,null,n,i);for(var f=a&&a.style,h=0;h<Os.length;h++){var d=Os[h];if(d!==gs){var p=o[d].conOpt;q$(d,c,p,zP(a,p,d),null)}}f?c.dirty():c.markRedraw()}}}}function P6(e,t,r){var n=t?qm(e,t):e,i=t?zP(e,n,pa):e.style,o=e.type,a=n?n.textConfig:null,s=e.textContent,l=s?t?qm(s,t):s:null;if(i&&(r.isLegacy||Mlt(i,o,!!a,!!l))){r.isLegacy=!0;var u=xlt(i,o,!t);!a&&u.textConfig&&(a=u.textConfig),!l&&u.textContent&&(l=u.textContent)}if(!t&&l){var c=l;!c.type&&(c.type="text")}var f=t?r[t]:r.normal;f.cfg=a,f.conOpt=l}function qm(e,t){return t?e?e[t]:null:e}function zP(e,t,r){var n=t&&t.style;return n==null&&r===pa&&e&&(n=e.styleEmphasis),n}function eut(e,t,r,n,i){var o=n.children,a=o?o.length:0,s=n.$mergeChildren,l=s==="byName"||n.diffChildrenByName,u=s===!1;if(!(!a&&!l&&!u)){if(l){nut({api:e,oldChildren:t.children()||[],newChildren:o||[],dataIndex:r,seriesModel:i,group:t});return}u&&t.removeAll();for(var c=0;c<a;c++){var f=o[c],h=t.childAt(c);f?(f.ignore==null&&(f.ignore=!1),BP(e,h,r,f,i,t)):h.ignore=!0}for(var d=t.childCount()-1;d>=c;d--){var p=t.childAt(d);rut(t,p,i)}}}function rut(e,t,r){t&&RP(t,da(e).option,r)}function nut(e){new jF(e.oldChildren,e.newChildren,E6,E6,e).add(C6).update(C6).remove(iut).execute()}function E6(e,t){var r=e&&e.name;return r!=null?r:jlt+t}function C6(e,t){var r=this.context,n=e!=null?r.newChildren[e]:null,i=t!=null?r.oldChildren[t]:null;BP(r.api,i,r.dataIndex,n,r.seriesModel,r.group)}function iut(e){var t=this.context,r=t.oldChildren[e];r&&RP(r,da(r).option,t.seriesModel)}function K$(e){return e&&(e.pathData||e.d)}function out(e){return e&&(pt(e,"pathData")||pt(e,"d"))}function aut(e){e.registerChartView(qlt),e.registerSeriesModel(ylt)}var Al=Re(),A6=zt,H2=Vt,sut=function(){function e(){this._dragging=!1,this.animationThreshold=15}return e.prototype.render=function(t,r,n,i){var o=r.get("value"),a=r.get("status");if(this._axisModel=t,this._axisPointerModel=r,this._api=n,!(!i&&this._lastValue===o&&this._lastStatus===a)){this._lastValue=o,this._lastStatus=a;var s=this._group,l=this._handle;if(!a||a==="hide"){s&&s.hide(),l&&l.hide();return}s&&s.show(),l&&l.show();var u={};this.makeElOption(u,o,t,r,n);var c=u.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var f=this._moveAnimation=this.determineAnimation(t,r);if(!s)s=this._group=new Ne,this.createPointerEl(s,u,t,r),this.createLabelEl(s,u,t,r),n.getZr().add(s);else{var h=ye(M6,r,f);this.updatePointerEl(s,u,h),this.updateLabelEl(s,u,h,r)}L6(s,r,!0),this._renderHandle(o)}},e.prototype.remove=function(t){this.clear(t)},e.prototype.dispose=function(t){this.clear(t)},e.prototype.determineAnimation=function(t,r){var n=r.get("animation"),i=t.axis,o=i.type==="category",a=r.get("snap");if(!a&&!o)return!1;if(n==="auto"||n==null){var s=this.animationThreshold;if(o&&i.getBandWidth()>s)return!0;if(a){var l=xP(t).seriesDataCount,u=i.getExtent();return Math.abs(u[0]-u[1])/l>s}return!1}return n===!0},e.prototype.makeElOption=function(t,r,n,i,o){},e.prototype.createPointerEl=function(t,r,n,i){var o=r.pointer;if(o){var a=Al(t).pointerEl=new $tt[o.type](A6(r.pointer));t.add(a)}},e.prototype.createLabelEl=function(t,r,n,i){if(r.label){var o=Al(t).labelEl=new tr(A6(r.label));t.add(o),x6(o,i)}},e.prototype.updatePointerEl=function(t,r,n){var i=Al(t).pointerEl;i&&r.pointer&&(i.setStyle(r.pointer.style),n(i,{shape:r.pointer.shape}))},e.prototype.updateLabelEl=function(t,r,n,i){var o=Al(t).labelEl;o&&(o.setStyle(r.label.style),n(o,{x:r.label.x,y:r.label.y}),x6(o,i))},e.prototype._renderHandle=function(t){if(!(this._dragging||!this.updateHandleTransform)){var r=this._axisPointerModel,n=this._api.getZr(),i=this._handle,o=r.getModel("handle"),a=r.get("status");if(!o.get("show")||!a||a==="hide"){i&&n.remove(i),this._handle=null;return}var s;this._handle||(s=!0,i=this._handle=tP(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(u){Kl(u.event)},onmousedown:H2(this._onHandleDragMove,this,0,0),drift:H2(this._onHandleDragMove,this),ondragend:H2(this._onHandleDragEnd,this)}),n.add(i)),L6(i,r,!1),i.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var l=o.get("size");ct(l)||(l=[l,l]),i.scaleX=l[0]/2,i.scaleY=l[1]/2,hF(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,s)}},e.prototype._moveHandleToValue=function(t,r){M6(this._axisPointerModel,!r&&this._moveAnimation,this._handle,X2(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},e.prototype._onHandleDragMove=function(t,r){var n=this._handle;if(!!n){this._dragging=!0;var i=this.updateHandleTransform(X2(n),[t,r],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(X2(i)),Al(n).lastProp=null,this._doDispatchAxisPointer()}},e.prototype._doDispatchAxisPointer=function(){var t=this._handle;if(!!t){var r=this._payloadInfo,n=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:r.cursorPoint[0],y:r.cursorPoint[1],tooltipOption:r.tooltipOption,axesInfo:[{axisDim:n.axis.dim,axisIndex:n.componentIndex}]})}},e.prototype._onHandleDragEnd=function(){this._dragging=!1;var t=this._handle;if(!!t){var r=this._axisPointerModel.get("value");this._moveHandleToValue(r),this._api.dispatchAction({type:"hideTip"})}},e.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var r=t.getZr(),n=this._group,i=this._handle;r&&n&&(this._lastGraphicKey=null,n&&r.remove(n),i&&r.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),i3(this,"_doDispatchAxisPointer")},e.prototype.doClear=function(){},e.prototype.buildLabel=function(t,r,n){return n=n||0,{x:t[n],y:t[1-n],width:r[n],height:r[1-n]}},e}();function M6(e,t,r,n){J$(Al(r).lastProp,n)||(Al(r).lastProp=n,t?_r(r,n,e):(r.stopAnimation(),r.attr(n)))}function J$(e,t){if(Rt(e)&&Rt(t)){var r=!0;return $(t,function(n,i){r=r&&J$(e[i],n)}),!!r}else return e===t}function x6(e,t){e[t.get(["label","show"])?"show":"hide"]()}function X2(e){return{x:e.x||0,y:e.y||0,rotation:e.rotation||0}}function L6(e,t,r){var n=t.get("z"),i=t.get("zlevel");e&&e.traverse(function(o){o.type!=="group"&&(n!=null&&(o.z=n),i!=null&&(o.zlevel=i),o.silent=r)})}const lut=sut;function uut(e){var t=e.get("type"),r=e.getModel(t+"Style"),n;return t==="line"?(n=r.getLineStyle(),n.fill=null):t==="shadow"&&(n=r.getAreaStyle(),n.stroke=null),n}function cut(e,t,r,n,i){var o=r.get("value"),a=Q$(o,t.axis,t.ecModel,r.get("seriesDataIndices"),{precision:r.get(["label","precision"]),formatter:r.get(["label","formatter"])}),s=r.getModel("label"),l=Dp(s.get("padding")||0),u=s.getFont(),c=Dk(a,u),f=i.position,h=c.width+l[1]+l[3],d=c.height+l[0]+l[2],p=i.align;p==="right"&&(f[0]-=h),p==="center"&&(f[0]-=h/2);var v=i.verticalAlign;v==="bottom"&&(f[1]-=d),v==="middle"&&(f[1]-=d/2),fut(f,h,d,n);var m=s.get("backgroundColor");(!m||m==="auto")&&(m=t.get(["axisLine","lineStyle","color"])),e.label={x:f[0],y:f[1],style:mn(s,{text:a,font:u,fill:s.getTextColor(),padding:l,backgroundColor:m}),z2:10}}function fut(e,t,r,n){var i=n.getWidth(),o=n.getHeight();e[0]=Math.min(e[0]+t,i)-t,e[1]=Math.min(e[1]+r,o)-r,e[0]=Math.max(e[0],0),e[1]=Math.max(e[1],0)}function Q$(e,t,r,n,i){e=t.scale.parse(e);var o=t.scale.getLabel({value:e},{precision:i.precision}),a=i.formatter;if(a){var s={value:EP(t,{value:e}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};$(n,function(l){var u=r.getSeriesByIndex(l.seriesIndex),c=l.dataIndexInside,f=u&&u.getDataParams(c);f&&s.seriesData.push(f)}),Mt(a)?o=a.replace("{value}",o):Ut(a)&&(o=a(s))}return o}function tB(e,t,r){var n=Yc();return Ok(n,n,r.rotation),PS(n,n,r.position),Rc([e.dataToCoord(t),(r.labelOffset||0)+(r.labelDirection||1)*(r.labelMargin||0)],n)}function hut(e,t,r,n,i,o){var a=N$.innerTextLayout(r.rotation,0,r.labelDirection);r.labelMargin=i.get(["label","margin"]),cut(t,n,i,o,{position:tB(n.axis,e,r),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function dut(e,t,r){return r=r||0,{x1:e[r],y1:e[1-r],x2:t[r],y2:t[1-r]}}function put(e,t,r){return r=r||0,{x:e[r],y:e[1-r],width:t[r],height:t[1-r]}}var vut=function(e){yt(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.makeElOption=function(r,n,i,o,a){var s=i.axis,l=s.grid,u=o.get("type"),c=I6(l,s).getOtherAxis(s).getGlobalExtent(),f=s.toGlobalCoord(s.dataToCoord(n,!0));if(u&&u!=="none"){var h=uut(o),d=gut[u](s,f,c);d.style=h,r.graphicKey=d.type,r.pointer=d}var p=_3(l.model,i);hut(n,r,p,i,o,a)},t.prototype.getHandleTransform=function(r,n,i){var o=_3(n.axis.grid.model,n,{labelInside:!1});o.labelMargin=i.get(["handle","margin"]);var a=tB(n.axis,r,o);return{x:a[0],y:a[1],rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(r,n,i,o){var a=i.axis,s=a.grid,l=a.getGlobalExtent(!0),u=I6(s,a).getOtherAxis(a).getGlobalExtent(),c=a.dim==="x"?0:1,f=[r.x,r.y];f[c]+=n[c],f[c]=Math.min(l[1],f[c]),f[c]=Math.max(l[0],f[c]);var h=(u[1]+u[0])/2,d=[h,h];d[c]=f[c];var p=[{verticalAlign:"middle"},{align:"center"}];return{x:f[0],y:f[1],rotation:r.rotation,cursorPoint:d,tooltipOption:p[c]}},t}(lut);function I6(e,t){var r={};return r[t.dim+"AxisIndex"]=t.index,e.getCartesian(r)}var gut={line:function(e,t,r){var n=dut([t,r[0]],[t,r[1]],O6(e));return{type:"Line",subPixelOptimize:!0,shape:n}},shadow:function(e,t,r){var n=Math.max(1,e.getBandWidth()),i=r[1]-r[0];return{type:"Rect",shape:put([t-n/2,r[0]],[n,i],O6(e))}}};function O6(e){return e.dim==="x"?0:1}const mut=vut;var _ut=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(Me);const yut=_ut;var ua=Re(),but=$;function eB(e,t,r){if(!Yt.node){var n=t.getZr();ua(n).records||(ua(n).records={}),wut(n,t);var i=ua(n).records[e]||(ua(n).records[e]={});i.handler=r}}function wut(e,t){if(ua(e).initialized)return;ua(e).initialized=!0,r("click",ye(R6,"click")),r("mousemove",ye(R6,"mousemove")),r("globalout",Tut);function r(n,i){e.on(n,function(o){var a=kut(t);but(ua(e).records,function(s){s&&i(s,o,a.dispatchAction)}),Sut(a.pendings,t)})}}function Sut(e,t){var r=e.showTip.length,n=e.hideTip.length,i;r?i=e.showTip[r-1]:n&&(i=e.hideTip[n-1]),i&&(i.dispatchAction=null,t.dispatchAction(i))}function Tut(e,t,r){e.handler("leave",null,r)}function R6(e,t,r,n){t.handler(e,r,n)}function kut(e){var t={showTip:[],hideTip:[]},r=function(n){var i=t[n.type];i?i.push(n):(n.dispatchAction=r,e.dispatchAction(n))};return{dispatchAction:r,pendings:t}}function C3(e,t){if(!Yt.node){var r=t.getZr(),n=(ua(r).records||{})[e];n&&(ua(r).records[e]=null)}}var Put=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){var o=n.getComponent("tooltip"),a=r.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";eB("axisPointer",i,function(s,l,u){a!=="none"&&(s==="leave"||a.indexOf(s)>=0)&&u({type:"updateAxisPointer",currTrigger:s,x:l&&l.offsetX,y:l&&l.offsetY})})},t.prototype.remove=function(r,n){C3("axisPointer",n)},t.prototype.dispose=function(r,n){C3("axisPointer",n)},t.type="axisPointer",t}(li);const Eut=Put;function rB(e,t){var r=[],n=e.seriesIndex,i;if(n==null||!(i=t.getSeriesByIndex(n)))return{point:[]};var o=i.getData(),a=Jl(o,e);if(a==null||a<0||ct(a))return{point:[]};var s=o.getItemGraphicEl(a),l=i.coordinateSystem;if(i.getTooltipPosition)r=i.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(e.isStacked){var u=l.getBaseAxis(),c=l.getOtherAxis(u),f=c.dim,h=u.dim,d=f==="x"||f==="radius"?1:0,p=o.mapDimension(h),v=[];v[d]=o.get(p,a),v[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),r=l.dataToPoint(v)||[]}else r=l.dataToPoint(o.getValues(Lt(l.dimensions,function(g){return o.mapDimension(g)}),a))||[];else if(s){var m=s.getBoundingRect().clone();m.applyTransform(s.transform),r=[m.x+m.width/2,m.y+m.height/2]}return{point:r,el:s}}var D6=Re();function Cut(e,t,r){var n=e.currTrigger,i=[e.x,e.y],o=e,a=e.dispatchAction||Vt(r.dispatchAction,r),s=t.getComponent("axisPointer").coordSysAxesInfo;if(!!s){Zg(i)&&(i=rB({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=Zg(i),u=o.axesInfo,c=s.axesInfo,f=n==="leave"||Zg(i),h={},d={},p={list:[],map:{}},v={showPointer:ye(Mut,d),showTooltip:ye(xut,p)};$(s.coordSysMap,function(g,_){var b=l||g.containPoint(i);$(s.coordSysAxesInfo[_],function(w,T){var S=w.axis,k=Rut(u,w);if(!f&&b&&(!u||k)){var C=k&&k.value;C==null&&!l&&(C=S.pointToData(i)),C!=null&&N6(w,C,v,!1,h)}})});var m={};return $(c,function(g,_){var b=g.linkGroup;b&&!d[_]&&$(b.axesInfo,function(w,T){var S=d[T];if(w!==g&&S){var k=S.value;b.mapper&&(k=g.axis.scale.parse(b.mapper(k,F6(w),F6(g)))),m[g.key]=k}})}),$(m,function(g,_){N6(c[_],g,v,!0,h)}),Lut(d,c,h),Iut(p,i,e,a),Out(c,a,r),h}}function N6(e,t,r,n,i){var o=e.axis;if(!(o.scale.isBlank()||!o.containData(t))){if(!e.involveSeries){r.showPointer(e,t);return}var a=Aut(t,e),s=a.payloadBatch,l=a.snapToValue;s[0]&&i.seriesIndex==null&&at(i,s[0]),!n&&e.snap&&o.containData(l)&&l!=null&&(t=l),r.showPointer(e,t,s),r.showTooltip(e,a,l)}}function Aut(e,t){var r=t.axis,n=r.dim,i=e,o=[],a=Number.MAX_VALUE,s=-1;return $(t.seriesModels,function(l,u){var c=l.getData().mapDimensionsAll(n),f,h;if(l.getAxisTooltipData){var d=l.getAxisTooltipData(c,e,r);h=d.dataIndices,f=d.nestestValue}else{if(h=l.getData().indicesOfNearest(c[0],e,r.type==="category"?.5:null),!h.length)return;f=l.getData().get(c[0],h[0])}if(!(f==null||!isFinite(f))){var p=e-f,v=Math.abs(p);v<=a&&((v<a||p>=0&&s<0)&&(a=v,s=p,i=f,o.length=0),$(h,function(m){o.push({seriesIndex:l.seriesIndex,dataIndexInside:m,dataIndex:l.getData().getRawIndex(m)})}))}}),{payloadBatch:o,snapToValue:i}}function Mut(e,t,r,n){e[t.key]={value:r,payloadBatch:n}}function xut(e,t,r,n){var i=r.payloadBatch,o=t.axis,a=o.model,s=t.axisPointerModel;if(!(!t.triggerTooltip||!i.length)){var l=t.coordSys.model,u=up(l),c=e.map[u];c||(c=e.map[u]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:n,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:i.slice()})}}function Lut(e,t,r){var n=r.axesInfo=[];$(t,function(i,o){var a=i.axisPointerModel.option,s=e[o];s?(!i.useHandle&&(a.status="show"),a.value=s.value,a.seriesDataIndices=(s.payloadBatch||[]).slice()):!i.useHandle&&(a.status="hide"),a.status==="show"&&n.push({axisDim:i.axis.dim,axisIndex:i.axis.model.componentIndex,value:a.value})})}function Iut(e,t,r,n){if(Zg(t)||!e.list.length){n({type:"hideTip"});return}var i=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:r.tooltipOption,position:r.position,dataIndexInside:i.dataIndexInside,dataIndex:i.dataIndex,seriesIndex:i.seriesIndex,dataByCoordSys:e.list})}function Out(e,t,r){var n=r.getZr(),i="axisPointerLastHighlights",o=D6(n)[i]||{},a=D6(n)[i]={};$(e,function(u,c){var f=u.axisPointerModel.option;f.status==="show"&&$(f.seriesDataIndices,function(h){var d=h.seriesIndex+" | "+h.dataIndex;a[d]=h})});var s=[],l=[];$(o,function(u,c){!a[c]&&l.push(u)}),$(a,function(u,c){!o[c]&&s.push(u)}),l.length&&r.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&r.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}function Rut(e,t){for(var r=0;r<(e||[]).length;r++){var n=e[r];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}function F6(e){var t=e.axis.model,r={},n=r.axisDim=e.axis.dim;return r.axisIndex=r[n+"AxisIndex"]=t.componentIndex,r.axisName=r[n+"AxisName"]=t.name,r.axisId=r[n+"AxisId"]=t.id,r}function Zg(e){return!e||e[0]==null||isNaN(e[0])||e[1]==null||isNaN(e[1])}function nB(e){F$.registerAxisPointerClass("CartesianAxisPointer",mut),e.registerComponentModel(yut),e.registerComponentView(Eut),e.registerPreprocessor(function(t){if(t){(!t.axisPointer||t.axisPointer.length===0)&&(t.axisPointer={});var r=t.axisPointer.link;r&&!ct(r)&&(t.axisPointer.link=[r])}}),e.registerProcessor(e.PRIORITY.PROCESSOR.STATISTIC,function(t,r){t.getComponent("axisPointer").coordSysAxesInfo=Qat(t,r)}),e.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},Cut)}function Vp(e){Yr(z$),Yr(nB)}function Dut(e,t){var r=Dp(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new Qe({shape:{x:e.x-r[3],y:e.y-r[0],width:e.width+r[1]+r[3],height:e.height+r[0]+r[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1}),e}var Nut=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(Me);const Fut=Nut;function iB(e){var t=e.get("confine");return t!=null?!!t:e.get("renderMode")==="richText"}function oB(e){if(!!Yt.domSupported){for(var t=document.documentElement.style,r=0,n=e.length;r<n;r++)if(e[r]in t)return e[r]}}var aB=oB(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),$ut=oB(["webkitTransition","transition","OTransition","MozTransition","msTransition"]);function sB(e,t){if(!e)return t;t=IN(t,!0);var r=e.indexOf(t);return e=r===-1?t:"-"+e.slice(0,r)+"-"+t,e.toLowerCase()}function But(e,t){var r=e.currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e);return r?t?r[t]:r:null}var zut=sB($ut,"transition"),VP=sB(aB,"transform"),Vut="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(Yt.transform3dSupported?"will-change:transform;":"");function Uut(e){return e=e==="left"?"right":e==="right"?"left":e==="top"?"bottom":"top",e}function Wut(e,t,r){if(!Mt(r)||r==="inside")return"";var n=e.get("backgroundColor"),i=e.get("borderWidth");t=ru(t);var o=Uut(r),a=Math.max(Math.round(i)*1.5,6),s="",l=VP+":",u;fe(["left","right"],o)>-1?(s+="top:50%",l+="translateY(-50%) rotate("+(u=o==="left"?-225:-45)+"deg)"):(s+="left:50%",l+="translateX(-50%) rotate("+(u=o==="top"?225:45)+"deg)");var c=u*Math.PI/180,f=a+i,h=f*Math.abs(Math.cos(c))+f*Math.abs(Math.sin(c)),d=Math.round(((h-Math.SQRT2*i)/2+Math.SQRT2*i-(h-f)/2)*100)/100;s+=";"+o+":-"+d+"px";var p=t+" solid "+i+"px;",v=["position:absolute;width:"+a+"px;height:"+a+"px;",s+";"+l+";","border-bottom:"+p,"border-right:"+p,"background-color:"+n+";"];return'<div style="'+v.join("")+'"></div>'}function Gut(e,t){var r="cubic-bezier(0.23,1,0.32,1)",n=" "+e/2+"s "+r,i="opacity"+n+",visibility"+n;return t||(n=" "+e+"s "+r,i+=Yt.transformSupported?","+VP+n:",left"+n+",top"+n),zut+":"+i}function $6(e,t,r){var n=e.toFixed(0)+"px",i=t.toFixed(0)+"px";if(!Yt.transformSupported)return r?"top:"+i+";left:"+n+";":[["top",i],["left",n]];var o=Yt.transform3dSupported,a="translate"+(o?"3d":"")+"("+n+","+i+(o?",0":"")+")";return r?"top:0;left:0;"+VP+":"+a+";":[["top",0],["left",0],[aB,a]]}function jut(e){var t=[],r=e.get("fontSize"),n=e.getTextColor();n&&t.push("color:"+n),t.push("font:"+e.getFont()),r&&t.push("line-height:"+Math.round(r*3/2)+"px");var i=e.get("textShadowColor"),o=e.get("textShadowBlur")||0,a=e.get("textShadowOffsetX")||0,s=e.get("textShadowOffsetY")||0;return i&&o&&t.push("text-shadow:"+a+"px "+s+"px "+o+"px "+i),$(["decoration","align"],function(l){var u=e.get(l);u&&t.push("text-"+l+":"+u)}),t.join(";")}function Hut(e,t,r){var n=[],i=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.get("shadowBlur"),s=e.get("shadowColor"),l=e.get("shadowOffsetX"),u=e.get("shadowOffsetY"),c=e.getModel("textStyle"),f=cF(e,"html"),h=l+"px "+u+"px "+a+"px "+s;return n.push("box-shadow:"+h),t&&i&&n.push(Gut(i,r)),o&&n.push("background-color:"+o),$(["width","color","radius"],function(d){var p="border-"+d,v=IN(p),m=e.get(v);m!=null&&n.push(p+":"+m+(d==="color"?"":"px"))}),n.push(jut(c)),f!=null&&n.push("padding:"+Dp(f).join("px ")+"px"),n.join(";")+";"}function B6(e,t,r,n,i){var o=t&&t.painter;if(r){var a=o&&o.getViewportRoot();a&&VZ(e,a,document.body,n,i)}else{e[0]=n,e[1]=i;var s=o&&o.getViewportRootOffset();s&&(e[0]+=s.offsetLeft,e[1]+=s.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}var Xut=function(){function e(t,r,n){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._firstShow=!0,this._longHide=!0,Yt.wxa)return null;var i=document.createElement("div");i.domBelongToZr=!0,this.el=i;var o=this._zr=r.getZr(),a=this._appendToBody=n&&n.appendToBody;B6(this._styleCoord,o,a,r.getWidth()/2,r.getHeight()/2),a?document.body.appendChild(i):t.appendChild(i),this._container=t;var s=this;i.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},i.onmousemove=function(l){if(l=l||window.event,!s._enterable){var u=o.handler,c=o.painter.getViewportRoot();Yn(c,l,!0),u.dispatch("mousemove",l)}},i.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return e.prototype.update=function(t){var r=this._container,n=But(r,"position"),i=r.style;i.position!=="absolute"&&n!=="absolute"&&(i.position="relative");var o=t.get("alwaysShowContent");o&&this._moveIfResized(),this.el.className=t.get("className")||""},e.prototype.show=function(t,r){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,o=this._styleCoord;n.innerHTML?i.cssText=Vut+Hut(t,!this._firstShow,this._longHide)+$6(o[0],o[1],!0)+("border-color:"+ru(r)+";")+(t.get("extraCssText")||"")+(";pointer-events:"+(this._enterable?"auto":"none")):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},e.prototype.setContent=function(t,r,n,i,o){var a=this.el;if(t==null){a.innerHTML="";return}var s="";if(Mt(o)&&n.get("trigger")==="item"&&!iB(n)&&(s=Wut(n,i,o)),Mt(t))a.innerHTML=t+s;else if(t){a.innerHTML="",ct(t)||(t=[t]);for(var l=0;l<t.length;l++)Tm(t[l])&&t[l].parentNode!==a&&a.appendChild(t[l]);if(s&&a.childNodes.length){var u=document.createElement("div");u.innerHTML=s,a.appendChild(u)}}},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},e.prototype.moveTo=function(t,r){var n=this._styleCoord;if(B6(n,this._zr,this._appendToBody,t,r),n[0]!=null&&n[1]!=null){var i=this.el.style,o=$6(n[0],n[1]);$(o,function(a){i[a[0]]=a[1]})}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){var t=this,r=this.el.style;r.visibility="hidden",r.opacity="0",Yt.transform3dSupported&&(r.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},e}();const Yut=Xut;var qut=function(){function e(t){this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._zr=t.getZr(),V6(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return e.prototype.update=function(t){var r=t.get("alwaysShowContent");r&&this._moveIfResized()},e.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},e.prototype.setContent=function(t,r,n,i,o){var a=this;Rt(t)&&oe(""),this.el&&this._zr.remove(this.el);var s=n.getModel("textStyle");this.el=new tr({style:{rich:r.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:s.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:cF(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),$(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(u){a.el.style[u]=n.get(u)}),$(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(u){a.el.style[u]=s.get(u)||0}),this._zr.add(this.el);var l=this;this.el.on("mouseover",function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0}),this.el.on("mouseout",function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1})},e.prototype.setEnterable=function(t){this._enterable=t},e.prototype.getSize=function(){var t=this.el,r=this.el.getBoundingRect(),n=z6(t.style);return[r.width+n.left+n.right,r.height+n.top+n.bottom]},e.prototype.moveTo=function(t,r){var n=this.el;if(n){var i=this._styleCoord;V6(i,this._zr,t,r),t=i[0],r=i[1];var o=n.style,a=ls(o.borderWidth||0),s=z6(o);n.x=t+a+s.left,n.y=r+a+s.top,n.markRedraw()}},e.prototype._moveIfResized=function(){var t=this._styleCoord[2],r=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),r*this._zr.getHeight())},e.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},e.prototype.hideLater=function(t){this._show&&!(this._inContent&&this._enterable)&&(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(Vt(this.hide,this),t)):this.hide())},e.prototype.isShow=function(){return this._show},e.prototype.dispose=function(){this._zr.remove(this.el)},e}();function ls(e){return Math.max(0,e)}function z6(e){var t=ls(e.shadowBlur||0),r=ls(e.shadowOffsetX||0),n=ls(e.shadowOffsetY||0);return{left:ls(t-r),right:ls(t+r),top:ls(t-n),bottom:ls(t+n)}}function V6(e,t,r,n){e[0]=r,e[1]=n,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}const Zut=qut;var Kut=new Qe({shape:{x:-1,y:-1,width:2,height:2}}),Jut=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(r,n){if(!(Yt.node||!n.getDom())){var i=r.getComponent("tooltip"),o=this._renderMode=TJ(i.get("renderMode"));this._tooltipContent=o==="richText"?new Zut(n):new Yut(n.getDom(),n,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(r,n,i){if(!(Yt.node||!i.getDom())){this.group.removeAll(),this._tooltipModel=r,this._ecModel=n,this._api=i,this._alwaysShowContent=r.get("alwaysShowContent");var o=this._tooltipContent;o.update(r),o.setEnterable(r.get("enterable")),this._initGlobalListener(),this._keepShow(),this._renderMode!=="richText"&&r.get("transitionDuration")?hF(this,"_updatePosition",50,"fixRate"):i3(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var r=this._tooltipModel,n=r.get("triggerOn");eB("itemTooltip",this._api,Vt(function(i,o,a){n!=="none"&&(n.indexOf(i)>=0?this._tryShow(o,a):i==="leave"&&this._hide(a))},this))},t.prototype._keepShow=function(){var r=this._tooltipModel,n=this._ecModel,i=this._api,o=r.get("triggerOn");if(this._lastX!=null&&this._lastY!=null&&o!=="none"&&o!=="click"){var a=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!i.isDisposed()&&a.manuallyShowTip(r,n,i,{x:a._lastX,y:a._lastY,dataByCoordSys:a._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(r,n,i,o){if(!(o.from===this.uid||Yt.node||!i.getDom())){var a=U6(o,i);this._ticket="";var s=o.dataByCoordSys,l=rct(o,n,i);if(l){var u=l.el.getBoundingRect().clone();u.applyTransform(l.el.transform),this._tryShow({offsetX:u.x+u.width/2,offsetY:u.y+u.height/2,target:l.el,position:o.position,positionDefault:"bottom"},a)}else if(o.tooltip&&o.x!=null&&o.y!=null){var c=Kut;c.x=o.x,c.y=o.y,c.update(),ae(c).tooltipConfig={name:null,option:o.tooltip},this._tryShow({offsetX:o.x,offsetY:o.y,target:c},a)}else if(s)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:s,tooltipOption:o.tooltipOption},a);else if(o.seriesIndex!=null){if(this._manuallyAxisShowTip(r,n,i,o))return;var f=rB(o,n),h=f.point[0],d=f.point[1];h!=null&&d!=null&&this._tryShow({offsetX:h,offsetY:d,target:f.el,position:o.position,positionDefault:"bottom"},a)}else o.x!=null&&o.y!=null&&(i.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:i.getZr().findHover(o.x,o.y).target},a))}},t.prototype.manuallyHideTip=function(r,n,i,o){var a=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&a.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,o.from!==this.uid&&this._hide(U6(o,i))},t.prototype._manuallyAxisShowTip=function(r,n,i,o){var a=o.seriesIndex,s=o.dataIndex,l=n.getComponent("axisPointer").coordSysAxesInfo;if(!(a==null||s==null||l==null)){var u=n.getSeriesByIndex(a);if(!!u){var c=u.getData(),f=gh([c.getItemModel(s),u,(u.coordinateSystem||{}).model],this._tooltipModel);if(f.get("trigger")==="axis")return i.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:s,position:o.position}),!0}}},t.prototype._tryShow=function(r,n){var i=r.target,o=this._tooltipModel;if(!!o){this._lastX=r.offsetX,this._lastY=r.offsetY;var a=r.dataByCoordSys;if(a&&a.length)this._showAxisTooltip(a,r);else if(i){this._lastDataByCoordSys=null;var s,l;Sc(i,function(u){if(ae(u).dataIndex!=null)return s=u,!0;if(ae(u).tooltipConfig!=null)return l=u,!0},!0),s?this._showSeriesItemTooltip(r,s,n):l?this._showComponentItemTooltip(r,l,n):this._hide(n)}else this._lastDataByCoordSys=null,this._hide(n)}},t.prototype._showOrMove=function(r,n){var i=r.get("showDelay");n=Vt(n,this),clearTimeout(this._showTimout),i>0?this._showTimout=setTimeout(n,i):n()},t.prototype._showAxisTooltip=function(r,n){var i=this._ecModel,o=this._tooltipModel,a=[n.offsetX,n.offsetY],s=gh([n.tooltipOption],o),l=this._renderMode,u=[],c=Is("section",{blocks:[],noHeader:!0}),f=[],h=new d2;$(r,function(_){$(_.dataByAxis,function(b){var w=i.getComponent(b.axisDim+"Axis",b.axisIndex),T=b.value;if(!(!w||T==null)){var S=Q$(T,w.axis,i,b.seriesDataIndices,b.valueLabelOpt),k=Is("section",{header:S,noHeader:!To(S),sortBlocks:!0,blocks:[]});c.blocks.push(k),$(b.seriesDataIndices,function(C){var E=i.getSeriesByIndex(C.seriesIndex),M=C.dataIndexInside,x=E.getDataParams(M);if(!(x.dataIndex<0)){x.axisDim=b.axisDim,x.axisIndex=b.axisIndex,x.axisType=b.axisType,x.axisId=b.axisId,x.axisValue=EP(w.axis,{value:T}),x.axisValueLabel=S,x.marker=h.makeTooltipMarker("item",ru(x.color),l);var D=C4(E.formatTooltip(M,!0,null)),B=D.frag;if(B){var V=gh([E],o).get("valueFormatter");k.blocks.push(V?at({valueFormatter:V},B):B)}D.text&&f.push(D.text),u.push(x)}})}})}),c.blocks.reverse(),f.reverse();var d=n.position,p=s.get("order"),v=O4(c,h,l,p,i.get("useUTC"),s.get("textStyle"));v&&f.unshift(v);var m=l==="richText"?`

`:"<br/>",g=f.join(m);this._showOrMove(s,function(){this._updateContentNotChangedOnAxis(r,u)?this._updatePosition(s,d,a[0],a[1],this._tooltipContent,u):this._showTooltipContent(s,g,u,Math.random()+"",a[0],a[1],d,null,h)})},t.prototype._showSeriesItemTooltip=function(r,n,i){var o=this._ecModel,a=ae(n),s=a.seriesIndex,l=o.getSeriesByIndex(s),u=a.dataModel||l,c=a.dataIndex,f=a.dataType,h=u.getData(f),d=this._renderMode,p=r.positionDefault,v=gh([h.getItemModel(c),u,l&&(l.coordinateSystem||{}).model],this._tooltipModel,p?{position:p}:null),m=v.get("trigger");if(!(m!=null&&m!=="item")){var g=u.getDataParams(c,f),_=new d2;g.marker=_.makeTooltipMarker("item",ru(g.color),d);var b=C4(u.formatTooltip(c,!1,f)),w=v.get("order"),T=v.get("valueFormatter"),S=b.frag,k=S?O4(T?at({valueFormatter:T},S):S,_,d,w,o.get("useUTC"),v.get("textStyle")):b.text,C="item_"+u.name+"_"+c;this._showOrMove(v,function(){this._showTooltipContent(v,k,g,C,r.offsetX,r.offsetY,r.position,r.target,_)}),i({type:"showTip",dataIndexInside:c,dataIndex:h.getRawIndex(c),seriesIndex:s,from:this.uid})}},t.prototype._showComponentItemTooltip=function(r,n,i){var o=ae(n),a=o.tooltipConfig,s=a.option||{};if(Mt(s)){var l=s;s={content:l,formatter:l}}var u=[s],c=this._ecModel.getComponent(o.componentMainType,o.componentIndex);c&&u.push(c),u.push({formatter:s.content});var f=r.positionDefault,h=gh(u,this._tooltipModel,f?{position:f}:null),d=h.get("content"),p=Math.random()+"",v=new d2;this._showOrMove(h,function(){var m=zt(h.get("formatterParams")||{});this._showTooltipContent(h,d,m,p,r.offsetX,r.offsetY,r.position,n,v)}),i({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(r,n,i,o,a,s,l,u,c){if(this._ticket="",!(!r.get("showContent")||!r.get("show"))){var f=this._tooltipContent;f.setEnterable(r.get("enterable"));var h=r.get("formatter");l=l||r.get("position");var d=n,p=this._getNearestPoint([a,s],i,r.get("trigger"),r.get("borderColor")),v=p.color;if(h)if(Mt(h)){var m=r.ecModel.get("useUTC"),g=ct(i)?i[0]:i,_=g&&g.axisType&&g.axisType.indexOf("time")>=0;d=h,_&&(d=r_(g.axisValue,d,m)),d=ON(d,i,!0)}else if(Ut(h)){var b=Vt(function(w,T){w===this._ticket&&(f.setContent(T,c,r,v,l),this._updatePosition(r,l,a,s,f,i,u))},this);this._ticket=o,d=h(i,o,b)}else d=h;f.setContent(d,c,r,v,l),f.show(r,v),this._updatePosition(r,l,a,s,f,i,u)}},t.prototype._getNearestPoint=function(r,n,i,o){if(i==="axis"||ct(n))return{color:o||(this._renderMode==="html"?"#fff":"none")};if(!ct(n))return{color:o||n.color||n.borderColor}},t.prototype._updatePosition=function(r,n,i,o,a,s,l){var u=this._api.getWidth(),c=this._api.getHeight();n=n||r.get("position");var f=a.getSize(),h=r.get("align"),d=r.get("verticalAlign"),p=l&&l.getBoundingRect().clone();if(l&&p.applyTransform(l.transform),Ut(n)&&(n=n([i,o],s,a.el,p,{viewSize:[u,c],contentSize:f.slice()})),ct(n))i=je(n[0],u),o=je(n[1],c);else if(Rt(n)){var v=n;v.width=f[0],v.height=f[1];var m=Ls(v,{width:u,height:c});i=m.x,o=m.y,h=null,d=null}else if(Mt(n)&&l){var g=ect(n,p,f,r.get("borderWidth"));i=g[0],o=g[1]}else{var g=Qut(i,o,a,u,c,h?null:20,d?null:20);i=g[0],o=g[1]}if(h&&(i-=W6(h)?f[0]/2:h==="right"?f[0]:0),d&&(o-=W6(d)?f[1]/2:d==="bottom"?f[1]:0),iB(r)){var g=tct(i,o,a,u,c);i=g[0],o=g[1]}a.moveTo(i,o)},t.prototype._updateContentNotChangedOnAxis=function(r,n){var i=this._lastDataByCoordSys,o=this._cbParamsList,a=!!i&&i.length===r.length;return a&&$(i,function(s,l){var u=s.dataByAxis||[],c=r[l]||{},f=c.dataByAxis||[];a=a&&u.length===f.length,a&&$(u,function(h,d){var p=f[d]||{},v=h.seriesDataIndices||[],m=p.seriesDataIndices||[];a=a&&h.value===p.value&&h.axisType===p.axisType&&h.axisId===p.axisId&&v.length===m.length,a&&$(v,function(g,_){var b=m[_];a=a&&g.seriesIndex===b.seriesIndex&&g.dataIndex===b.dataIndex}),o&&$(h.seriesDataIndices,function(g){var _=g.seriesIndex,b=n[_],w=o[_];b&&w&&w.data!==b.data&&(a=!1)})})}),this._lastDataByCoordSys=r,this._cbParamsList=n,!!a},t.prototype._hide=function(r){this._lastDataByCoordSys=null,r({type:"hideTip",from:this.uid})},t.prototype.dispose=function(r,n){Yt.node||!n.getDom()||(i3(this,"_updatePosition"),this._tooltipContent.dispose(),C3("itemTooltip",n))},t.type="tooltip",t}(li);function gh(e,t,r){var n=t.ecModel,i;r?(i=new Ar(r,n,n),i=new Ar(t.option,i,n)):i=t;for(var o=e.length-1;o>=0;o--){var a=e[o];a&&(a instanceof Ar&&(a=a.get("tooltip",!0)),Mt(a)&&(a={formatter:a}),a&&(i=new Ar(a,i,n)))}return i}function U6(e,t){return e.dispatchAction||Vt(t.dispatchAction,t)}function Qut(e,t,r,n,i,o,a){var s=r.getSize(),l=s[0],u=s[1];return o!=null&&(e+l+o+2>n?e-=l+o:e+=o),a!=null&&(t+u+a>i?t-=u+a:t+=a),[e,t]}function tct(e,t,r,n,i){var o=r.getSize(),a=o[0],s=o[1];return e=Math.min(e+a,n)-a,t=Math.min(t+s,i)-s,e=Math.max(e,0),t=Math.max(t,0),[e,t]}function ect(e,t,r,n){var i=r[0],o=r[1],a=Math.ceil(Math.SQRT2*n)+8,s=0,l=0,u=t.width,c=t.height;switch(e){case"inside":s=t.x+u/2-i/2,l=t.y+c/2-o/2;break;case"top":s=t.x+u/2-i/2,l=t.y-o-a;break;case"bottom":s=t.x+u/2-i/2,l=t.y+c+a;break;case"left":s=t.x-i-a,l=t.y+c/2-o/2;break;case"right":s=t.x+u+a,l=t.y+c/2-o/2}return[s,l]}function W6(e){return e==="center"||e==="middle"}function rct(e,t,r){var n=zk(e).queryOptionMap,i=n.keys()[0];if(!(!i||i==="series")){var o=Ip(t,i,n.get(i),{useDefault:!1,enableAll:!1,enableNone:!1}),a=o.models[0];if(!!a){var s=r.getViewOfComponentModel(a),l;if(s.group.traverse(function(u){var c=ae(u).tooltipConfig;if(c&&c.name===e.name)return l=u,!0}),l)return{componentMainType:i,componentIndex:a.componentIndex,el:l}}}}const nct=Jut;function bf(e){Yr(nB),e.registerComponentModel(Fut),e.registerComponentView(nct),e.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},jr),e.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},jr)}var G6=$;function j6(e){if(e){for(var t in e)if(e.hasOwnProperty(t))return!0}}function H6(e,t,r){var n={};return G6(t,function(o){var a=n[o]=i();G6(e[o],function(s,l){if(!!_n.isValidType(l)){var u={type:l,visual:s};r&&r(u,o),a[l]=new _n(u),l==="opacity"&&(u=zt(u),u.type="colorAlpha",a.__hidden.__alphaForOpacity=new _n(u))}})}),n;function i(){var o=function(){};o.prototype.__hidden=o.prototype;var a=new o;return a}}function ict(e,t,r){var n;$(r,function(i){t.hasOwnProperty(i)&&j6(t[i])&&(n=!0)}),n&&$(r,function(i){t.hasOwnProperty(i)&&j6(t[i])?e[i]=zt(t[i]):delete e[i]})}function oct(e,t,r,n){var i={};return $(e,function(o){var a=_n.prepareVisualTypes(t[o]);i[o]=a}),{progress:function(a,s){var l;n!=null&&(l=s.getDimensionIndex(n));function u(T){return bF(s,f,T)}function c(T,S){ant(s,f,T,S)}for(var f,h=s.getStore();(f=a.next())!=null;){var d=s.getRawDataItem(f);if(!(d&&d.visualMap===!1))for(var p=n!=null?h.get(l,f):f,v=r(p),m=t[v],g=i[v],_=0,b=g.length;_<b;_++){var w=g[_];m[w]&&m[w].applyVisual(p,u,c)}}}}}var act=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(Me),sct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.render=function(r,n,i){if(this.group.removeAll(),!!r.get("show")){var o=this.group,a=r.getModel("textStyle"),s=r.getModel("subtextStyle"),l=r.get("textAlign"),u=Zt(r.get("textBaseline"),r.get("textVerticalAlign")),c=new tr({style:mn(a,{text:r.get("text"),fill:a.getTextColor()},{disableBox:!0}),z2:10}),f=c.getBoundingRect(),h=r.get("subtext"),d=new tr({style:mn(s,{text:h,fill:s.getTextColor(),y:f.height+r.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),p=r.get("link"),v=r.get("sublink"),m=r.get("triggerEvent",!0);c.silent=!p&&!m,d.silent=!v&&!m,p&&c.on("click",function(){u4(p,"_"+r.get("target"))}),v&&d.on("click",function(){u4(v,"_"+r.get("subtarget"))}),ae(c).eventData=ae(d).eventData=m?{componentType:"title",componentIndex:r.componentIndex}:null,o.add(c),h&&o.add(d);var g=o.getBoundingRect(),_=r.getBoxLayoutParams();_.width=g.width,_.height=g.height;var b=Ls(_,{width:i.getWidth(),height:i.getHeight()},r.get("padding"));l||(l=r.get("left")||r.get("right"),l==="middle"&&(l="center"),l==="right"?b.x+=b.width:l==="center"&&(b.x+=b.width/2)),u||(u=r.get("top")||r.get("bottom"),u==="center"&&(u="middle"),u==="bottom"?b.y+=b.height:u==="middle"&&(b.y+=b.height/2),u=u||"top"),o.x=b.x,o.y=b.y,o.markRedraw();var w={align:l,verticalAlign:u};c.setStyle(w),d.setStyle(w),g=o.getBoundingRect();var T=b.margin,S=r.getItemStyle(["color","opacity"]);S.fill=r.get("backgroundColor");var k=new Qe({shape:{x:g.x-T[3],y:g.y-T[0],width:g.width+T[1]+T[3],height:g.height+T[0]+T[2],r:r.get("borderRadius")},style:S,subPixelOptimize:!0,silent:!0});o.add(k)}},t.type="title",t}(li);function wf(e){e.registerComponentModel(act),e.registerComponentView(sct)}function lB(e,t){if(!e)return!1;for(var r=ct(e)?e:[e],n=0;n<r.length;n++)if(r[n]&&r[n][t])return!0;return!1}function uv(e){$S(e,"label",["show"])}var cv=Re(),uB=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.createdBySelf=!1,r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),this._mergeOption(r,i,!1,!0)},t.prototype.isAnimationEnabled=function(){if(Yt.node)return!1;var r=this.__hostSeries;return this.getShallow("animation")&&r&&r.isAnimationEnabled()},t.prototype.mergeOption=function(r,n){this._mergeOption(r,n,!1,!1)},t.prototype._mergeOption=function(r,n,i,o){var a=this.mainType;i||n.eachSeries(function(s){var l=s.get(this.mainType,!0),u=cv(s)[a];if(!l||!l.data){cv(s)[a]=null;return}u?u._mergeOption(l,n,!0):(o&&uv(l),$(l.data,function(c){c instanceof Array?(uv(c[0]),uv(c[1])):uv(c)}),u=this.createMarkerModelFromSeries(l,this,n),at(u,{mainType:this.mainType,seriesIndex:s.seriesIndex,name:s.name,createdBySelf:!0}),u.__hostSeries=s),cv(s)[a]=u},this)},t.prototype.formatTooltip=function(r,n,i){var o=this.getData(),a=this.getRawValue(r),s=o.getName(r);return Is("section",{header:this.name,blocks:[Is("nameValue",{name:s,value:a,noName:!s,noValue:a==null})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(r){this._data=r},t.getMarkerModelFromSeries=function(r,n){return cv(r)[n]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(Me);Wi(uB,KN.prototype);const Jc=uB;function A3(e){return!(isNaN(parseFloat(e.x))&&isNaN(parseFloat(e.y)))}function lct(e){return!isNaN(parseFloat(e.x))&&!isNaN(parseFloat(e.y))}function fv(e,t,r,n,i,o){var a=[],s=nu(t,n),l=s?t.getCalculationInfo("stackResultDimension"):n,u=UP(t,l,e),c=t.indicesOfNearest(l,u)[0];a[i]=t.get(r,c),a[o]=t.get(l,c);var f=t.get(n,c),h=ko(t.get(n,c));return h=Math.min(h,20),h>=0&&(a[o]=+a[o].toFixed(h)),[a,f]}var Y2={min:ye(fv,"min"),max:ye(fv,"max"),average:ye(fv,"average"),median:ye(fv,"median")};function Zm(e,t){var r=e.getData(),n=e.coordinateSystem;if(t&&!lct(t)&&!ct(t.coord)&&n){var i=n.dimensions,o=cB(t,r,n,e);if(t=zt(t),t.type&&Y2[t.type]&&o.baseAxis&&o.valueAxis){var a=fe(i,o.baseAxis.dim),s=fe(i,o.valueAxis.dim),l=Y2[t.type](r,o.baseDataDim,o.valueDataDim,a,s);t.coord=l[0],t.value=l[1]}else{for(var u=[t.xAxis!=null?t.xAxis:t.radiusAxis,t.yAxis!=null?t.yAxis:t.angleAxis],c=0;c<2;c++)Y2[u[c]]&&(u[c]=UP(r,r.mapDimension(i[c]),u[c]));t.coord=u}}return t}function cB(e,t,r,n){var i={};return e.valueIndex!=null||e.valueDim!=null?(i.valueDataDim=e.valueIndex!=null?t.getDimension(e.valueIndex):e.valueDim,i.valueAxis=r.getAxis(uct(n,i.valueDataDim)),i.baseAxis=r.getOtherAxis(i.valueAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim)):(i.baseAxis=n.getBaseAxis(),i.valueAxis=r.getOtherAxis(i.baseAxis),i.baseDataDim=t.mapDimension(i.baseAxis.dim),i.valueDataDim=t.mapDimension(i.valueAxis.dim)),i}function uct(e,t){var r=e.getData().getDimensionInfo(t);return r&&r.coordDim}function Km(e,t){return e&&e.containData&&t.coord&&!A3(t)?e.containData(t.coord):!0}function cct(e,t,r){return e&&e.containZone&&t.coord&&r.coord&&!A3(t)&&!A3(r)?e.containZone(t.coord,r.coord):!0}function fct(e,t){return e?function(r,n,i,o){var a=o<2?r.coord&&r.coord[o]:r.value;return Ts(a,t[o])}:function(r,n,i,o){return Ts(r.value,t[o])}}function UP(e,t,r){if(r==="average"){var n=0,i=0;return e.each(t,function(o,a){isNaN(o)||(n+=o,i++)}),n/i}else return r==="median"?e.getMedian(t):e.getDataExtent(t)[r==="max"?1:0]}var q2=Re(),hct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.init=function(){this.markerGroupMap=jt()},t.prototype.render=function(r,n,i){var o=this,a=this.markerGroupMap;a.each(function(s){q2(s).keep=!1}),n.eachSeries(function(s){var l=Jc.getMarkerModelFromSeries(s,o.type);l&&o.renderSeries(s,l,n,i)}),a.each(function(s){!q2(s).keep&&o.group.remove(s.group)})},t.prototype.markKeep=function(r){q2(r).keep=!0},t.prototype.toggleBlurSeries=function(r,n){var i=this;$(r,function(o){var a=Jc.getMarkerModelFromSeries(o,i.type);if(a){var s=a.getData();s.eachItemGraphicEl(function(l){l&&(n?V9(l):Hk(l))})}})},t.type="marker",t}(li);const fB=hct;var dct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(Jc);const pct=dct;var hv=Re(),vct=function(e,t,r,n){var i=e.getData(),o;if(ct(n))o=n;else{var a=n.type;if(a==="min"||a==="max"||a==="average"||a==="median"||n.xAxis!=null||n.yAxis!=null){var s=void 0,l=void 0;if(n.yAxis!=null||n.xAxis!=null)s=t.getAxis(n.yAxis!=null?"y":"x"),l=Ai(n.yAxis,n.xAxis);else{var u=cB(n,i,t,e);s=u.valueAxis;var c=JF(i,u.valueDataDim);l=UP(i,c,a)}var f=s.dim==="x"?0:1,h=1-f,d=zt(n),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var v=r.get("precision");v>=0&&Se(l)&&(l=+l.toFixed(Math.min(v,20))),d.coord[f]=p.coord[f]=l,o=[d,p,{type:a,valueIndex:n.valueIndex,value:l}]}else o=[]}var m=[Zm(e,o[0]),Zm(e,o[1]),at({},o[2])];return m[2].type=m[2].type||null,se(m[2],m[0]),se(m[2],m[1]),m};function Jm(e){return!isNaN(e)&&!isFinite(e)}function X6(e,t,r,n){var i=1-e,o=n.dimensions[e];return Jm(t[i])&&Jm(r[i])&&t[e]===r[e]&&n.getAxis(o).containData(t[e])}function gct(e,t){if(e.type==="cartesian2d"){var r=t[0].coord,n=t[1].coord;if(r&&n&&(X6(1,r,n,e)||X6(0,r,n,e)))return!0}return Km(e,t[0])&&Km(e,t[1])}function Z2(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=je(a.get("x"),i.getWidth()),u=je(a.get("y"),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=o.dimensions,f=e.get(c[0],t),h=e.get(c[1],t);s=o.dataToPoint([f,h])}if(yf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=o.dimensions;Jm(e.get(c[0],t))?s[0]=d.toGlobalCoord(d.getExtent()[r?0:1]):Jm(e.get(c[1],t))&&(s[1]=p.toGlobalCoord(p.getExtent()[r?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}e.setItemLayout(t,s)}var mct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Jc.getMarkerModelFromSeries(o,"markLine");if(a){var s=a.getData(),l=hv(a).from,u=hv(a).to;l.each(function(c){Z2(l,c,!0,o,i),Z2(u,c,!1,o,i)}),s.each(function(c){s.setItemLayout(c,[l.getItemLayout(c),u.getItemLayout(c)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,new vlt);this.group.add(c.group);var f=_ct(a,r,n),h=f.from,d=f.to,p=f.line;hv(n).from=h,hv(n).to=d,n.setData(p);var v=n.get("symbol"),m=n.get("symbolSize"),g=n.get("symbolRotate"),_=n.get("symbolOffset");ct(v)||(v=[v,v]),ct(m)||(m=[m,m]),ct(g)||(g=[g,g]),ct(_)||(_=[_,_]),f.from.each(function(w){b(h,w,!0),b(d,w,!1)}),p.each(function(w){var T=p.getItemModel(w).getModel("lineStyle").getLineStyle();p.setItemLayout(w,[h.getItemLayout(w),d.getItemLayout(w)]),T.stroke==null&&(T.stroke=h.getItemVisual(w,"style").fill),p.setItemVisual(w,{fromSymbolKeepAspect:h.getItemVisual(w,"symbolKeepAspect"),fromSymbolOffset:h.getItemVisual(w,"symbolOffset"),fromSymbolRotate:h.getItemVisual(w,"symbolRotate"),fromSymbolSize:h.getItemVisual(w,"symbolSize"),fromSymbol:h.getItemVisual(w,"symbol"),toSymbolKeepAspect:d.getItemVisual(w,"symbolKeepAspect"),toSymbolOffset:d.getItemVisual(w,"symbolOffset"),toSymbolRotate:d.getItemVisual(w,"symbolRotate"),toSymbolSize:d.getItemVisual(w,"symbolSize"),toSymbol:d.getItemVisual(w,"symbol"),style:T})}),c.updateData(p),f.line.eachItemGraphicEl(function(w){ae(w).dataModel=n,w.traverse(function(T){ae(T).dataModel=n})});function b(w,T,S){var k=w.getItemModel(T);Z2(w,T,S,r,o);var C=k.getModel("itemStyle").getItemStyle();C.fill==null&&(C.fill=h_(l,"color")),w.setItemVisual(T,{symbolKeepAspect:k.get("symbolKeepAspect"),symbolOffset:Zt(k.get("symbolOffset",!0),_[S?0:1]),symbolRotate:Zt(k.get("symbolRotate",!0),g[S?0:1]),symbolSize:Zt(k.get("symbolSize"),m[S?0:1]),symbol:Zt(k.get("symbol",!0),v[S?0:1]),style:C})}this.markKeep(c),c.group.silent=n.get("silent")||r.get("silent")},t.type="markLine",t}(fB);function _ct(e,t,r){var n;e?n=Lt(e&&e.dimensions,function(u){var c=t.getData().getDimensionInfo(t.getData().mapDimension(u))||{};return at(at({},c),{name:u,ordinalMeta:null})}):n=[{name:"value",type:"float"}];var i=new Ul(n,r),o=new Ul(n,r),a=new Ul([],r),s=Lt(r.get("data"),ye(vct,t,e,r));e&&(s=Er(s,ye(gct,e)));var l=fct(!!e,n);return i.initData(Lt(s,function(u){return u[0]}),null,l),o.initData(Lt(s,function(u){return u[1]}),null,l),a.initData(Lt(s,function(u){return u[2]})),a.hasItemOption=!0,{from:i,to:o,line:a}}const yct=mct;function y_(e){e.registerComponentModel(pct),e.registerComponentView(yct),e.registerPreprocessor(function(t){lB(t.series,"markLine")&&(t.markLine=t.markLine||{})})}var bct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.createMarkerModelFromSeries=function(r,n,i){return new t(r,n,i)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(Jc);const wct=bct;var dv=Re(),Sct=function(e,t,r,n){var i=Zm(e,n[0]),o=Zm(e,n[1]),a=i.coord,s=o.coord;a[0]=Ai(a[0],-1/0),a[1]=Ai(a[1],-1/0),s[0]=Ai(s[0],1/0),s[1]=Ai(s[1],1/0);var l=kZ([{},i,o]);return l.coord=[i.coord,o.coord],l.x0=i.x,l.y0=i.y,l.x1=o.x,l.y1=o.y,l};function Qm(e){return!isNaN(e)&&!isFinite(e)}function Y6(e,t,r,n){var i=1-e;return Qm(t[i])&&Qm(r[i])}function Tct(e,t){var r=t.coord[0],n=t.coord[1],i={coord:r,x:t.x0,y:t.y0},o={coord:n,x:t.x1,y:t.y1};return yf(e,"cartesian2d")?r&&n&&(Y6(1,r,n)||Y6(0,r,n))?!0:cct(e,i,o):Km(e,i)||Km(e,o)}function q6(e,t,r,n,i){var o=n.coordinateSystem,a=e.getItemModel(t),s,l=je(a.get(r[0]),i.getWidth()),u=je(a.get(r[1]),i.getHeight());if(!isNaN(l)&&!isNaN(u))s=[l,u];else{if(n.getMarkerPosition)s=n.getMarkerPosition(e.getValues(r,t));else{var c=e.get(r[0],t),f=e.get(r[1],t),h=[c,f];o.clampData&&o.clampData(h,h),s=o.dataToPoint(h,!0)}if(yf(o,"cartesian2d")){var d=o.getAxis("x"),p=o.getAxis("y"),c=e.get(r[0],t),f=e.get(r[1],t);Qm(c)?s[0]=d.toGlobalCoord(d.getExtent()[r[0]==="x0"?0:1]):Qm(f)&&(s[1]=p.toGlobalCoord(p.getExtent()[r[1]==="y0"?0:1]))}isNaN(l)||(s[0]=l),isNaN(u)||(s[1]=u)}return s}var Z6=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],kct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.updateTransform=function(r,n,i){n.eachSeries(function(o){var a=Jc.getMarkerModelFromSeries(o,"markArea");if(a){var s=a.getData();s.each(function(l){var u=Lt(Z6,function(f){return q6(s,l,f,o,i)});s.setItemLayout(l,u);var c=s.getItemGraphicEl(l);c.setShape("points",u)})}},this)},t.prototype.renderSeries=function(r,n,i,o){var a=r.coordinateSystem,s=r.id,l=r.getData(),u=this.markerGroupMap,c=u.get(s)||u.set(s,{group:new Ne});this.group.add(c.group),this.markKeep(c);var f=Pct(a,r,n);n.setData(f),f.each(function(h){var d=Lt(Z6,function(C){return q6(f,h,C,r,o)}),p=a.getAxis("x").scale,v=a.getAxis("y").scale,m=p.getExtent(),g=v.getExtent(),_=[p.parse(f.get("x0",h)),p.parse(f.get("x1",h))],b=[v.parse(f.get("y0",h)),v.parse(f.get("y1",h))];Om(_),Om(b);var w=!(m[0]>_[1]||m[1]<_[0]||g[0]>b[1]||g[1]<b[0]),T=!w;f.setItemLayout(h,{points:d,allClipped:T});var S=f.getItemModel(h).getModel("itemStyle").getItemStyle(),k=h_(l,"color");S.fill||(S.fill=k,Mt(S.fill)&&(S.fill=MS(S.fill,.4))),S.stroke||(S.stroke=k),f.setItemVisual(h,"style",S)}),f.diff(dv(c).data).add(function(h){var d=f.getItemLayout(h);if(!d.allClipped){var p=new Qd({shape:{points:d.points}});f.setItemGraphicEl(h,p),c.group.add(p)}}).update(function(h,d){var p=dv(c).data.getItemGraphicEl(d),v=f.getItemLayout(h);v.allClipped?p&&c.group.remove(p):(p?_r(p,{shape:{points:v.points}},n,h):p=new Qd({shape:{points:v.points}}),f.setItemGraphicEl(h,p),c.group.add(p))}).remove(function(h){var d=dv(c).data.getItemGraphicEl(h);c.group.remove(d)}).execute(),f.eachItemGraphicEl(function(h,d){var p=f.getItemModel(d),v=f.getItemVisual(d,"style");h.useStyle(f.getItemVisual(d,"style")),vf(h,pu(p),{labelFetcher:n,labelDataIndex:d,defaultText:f.getName(d)||"",inheritColor:Mt(v.fill)?MS(v.fill,1):"#000"}),Jd(h,p),tu(h,null,null,p.get(["emphasis","disabled"])),ae(h).dataModel=n}),dv(c).data=f,c.group.silent=n.get("silent")||r.get("silent")},t.type="markArea",t}(fB);function Pct(e,t,r){var n,i,o=["x0","y0","x1","y1"];if(e){var a=Lt(e&&e.dimensions,function(u){var c=t.getData(),f=c.getDimensionInfo(c.mapDimension(u))||{};return at(at({},f),{name:u,ordinalMeta:null})});i=Lt(o,function(u,c){return{name:u,type:a[c%2].type}}),n=new Ul(i,r)}else i=[{name:"value",type:"float"}],n=new Ul(i,r);var s=Lt(r.get("data"),ye(Sct,t,e,r));e&&(s=Er(s,ye(Tct,e)));var l=e?function(u,c,f,h){var d=u.coord[Math.floor(h/2)][h%2];return Ts(d,i[h])}:function(u,c,f,h){return Ts(u.value,i[h])};return n.initData(s,null,l),n.hasItemOption=!0,n}const Ect=kct;function Up(e){e.registerComponentModel(wct),e.registerComponentView(Ect),e.registerPreprocessor(function(t){lB(t.series,"markArea")&&(t.markArea=t.markArea||{})})}var Cct=function(e,t){if(t==="all")return{type:"all",title:e.getLocaleModel().get(["legend","selector","all"])};if(t==="inverse")return{type:"inverse",title:e.getLocaleModel().get(["legend","selector","inverse"])}},Act=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.layoutMode={type:"box",ignoreSize:!0},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i),r.selected=r.selected||{},this._updateSelector(r)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),this._updateSelector(r)},t.prototype._updateSelector=function(r){var n=r.selector,i=this.ecModel;n===!0&&(n=r.selector=["all","inverse"]),ct(n)&&$(n,function(o,a){Mt(o)&&(o={type:o}),n[a]=se(o,Cct(i,o.type))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var r=this._data;if(r[0]&&this.get("selectedMode")==="single"){for(var n=!1,i=0;i<r.length;i++){var o=r[i].get("name");if(this.isSelected(o)){this.select(o),n=!0;break}}!n&&this.select(r[0].get("name"))}},t.prototype._updateData=function(r){var n=[],i=[];r.eachRawSeries(function(s){var l=s.name;i.push(l);var u;if(s.legendVisualProvider){var c=s.legendVisualProvider,f=c.getAllNames();r.isSeriesFiltered(s)||(i=i.concat(f)),f.length?n=n.concat(f):u=!0}else u=!0;u&&Bk(s)&&n.push(s.name)}),this._availableNames=i;var o=this.get("data")||n,a=Lt(o,function(s){return(Mt(s)||Se(s))&&(s={name:s}),new Ar(s,this,this.ecModel)},this);this._data=a},t.prototype.getData=function(){return this._data},t.prototype.select=function(r){var n=this.option.selected,i=this.get("selectedMode");if(i==="single"){var o=this._data;$(o,function(a){n[a.get("name")]=!1})}n[r]=!0},t.prototype.unSelect=function(r){this.get("selectedMode")!=="single"&&(this.option.selected[r]=!1)},t.prototype.toggleSelected=function(r){var n=this.option.selected;n.hasOwnProperty(r)||(n[r]=!0),this[n[r]?"unSelect":"select"](r)},t.prototype.allSelect=function(){var r=this._data,n=this.option.selected;$(r,function(i){n[i.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this._data,n=this.option.selected;$(r,function(i){var o=i.get("name",!0);n.hasOwnProperty(o)||(n[o]=!0),n[o]=!n[o]})},t.prototype.isSelected=function(r){var n=this.option.selected;return!(n.hasOwnProperty(r)&&!n[r])&&fe(this._availableNames,r)>=0},t.prototype.getOrient=function(){return this.get("orient")==="vertical"?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(Me);const M3=Act;var Xu=ye,x3=$,pv=Ne,Mct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!1,r}return t.prototype.init=function(){this.group.add(this._contentGroup=new pv),this.group.add(this._selectorGroup=new pv),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(r,n,i){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),!!r.get("show",!0)){var a=r.get("align"),s=r.get("orient");(!a||a==="auto")&&(a=r.get("left")==="right"&&s==="vertical"?"right":"left");var l=r.get("selector",!0),u=r.get("selectorPosition",!0);l&&(!u||u==="auto")&&(u=s==="horizontal"?"end":"start"),this.renderInner(a,r,n,i,l,s,u);var c=r.getBoxLayoutParams(),f={width:i.getWidth(),height:i.getHeight()},h=r.get("padding"),d=Ls(c,f,h),p=this.layoutInner(r,a,d,o,l,u),v=Ls(re({width:p.width,height:p.height},c),f,h);this.group.x=v.x-p.x,this.group.y=v.y-p.y,this.group.markRedraw(),this.group.add(this._backgroundEl=Dut(p,r))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this.getContentGroup(),c=jt(),f=n.get("selectedMode"),h=[];i.eachRawSeries(function(d){!d.get("legendHoverLink")&&h.push(d.id)}),x3(n.getData(),function(d,p){var v=d.get("name");if(!this.newlineDisabled&&(v===""||v===`
`)){var m=new pv;m.newline=!0,u.add(m);return}var g=i.getSeriesByName(v)[0];if(!c.get(v))if(g){var _=g.getData(),b=_.getVisual("legendLineStyle")||{},w=_.getVisual("legendIcon"),T=_.getVisual("style"),S=this._createItem(g,v,p,d,n,r,b,T,w,f,o);S.on("click",Xu(K6,v,null,o,h)).on("mouseover",Xu(L3,g.name,null,o,h)).on("mouseout",Xu(I3,g.name,null,o,h)),c.set(v,!0)}else i.eachRawSeries(function(k){if(!c.get(v)&&k.legendVisualProvider){var C=k.legendVisualProvider;if(!C.containName(v))return;var E=C.indexOfName(v),M=C.getItemVisual(E,"style"),x=C.getItemVisual(E,"legendIcon"),D=ei(M.fill);D&&D[3]===0&&(D[3]=.2,M=at(at({},M),{fill:ha(D,"rgba")}));var B=this._createItem(k,v,p,d,n,r,{},M,x,f,o);B.on("click",Xu(K6,null,v,o,h)).on("mouseover",Xu(L3,null,v,o,h)).on("mouseout",Xu(I3,null,v,o,h)),c.set(v,!0)}},this)},this),a&&this._createSelector(a,n,o,s,l)},t.prototype._createSelector=function(r,n,i,o,a){var s=this.getSelectorGroup();x3(r,function(u){var c=u.type,f=new tr({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){i.dispatchAction({type:c==="all"?"legendAllSelect":"legendInverseSelect"})}});s.add(f);var h=n.getModel("selectorLabel"),d=n.getModel(["emphasis","selectorLabel"]);vf(f,{normal:h,emphasis:d},{defaultText:u.title}),HS(f)})},t.prototype._createItem=function(r,n,i,o,a,s,l,u,c,f,h){var d=r.visualDrawType,p=a.get("itemWidth"),v=a.get("itemHeight"),m=a.isSelected(n),g=o.get("symbolRotate"),_=o.get("symbolKeepAspect"),b=o.get("icon");c=b||c||"roundRect";var w=xct(c,o,l,u,d,m,h),T=new pv,S=o.getModel("textStyle");if(Ut(r.getLegendIcon)&&(!b||b==="inherit"))T.add(r.getLegendIcon({itemWidth:p,itemHeight:v,icon:c,iconRotate:g,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}));else{var k=b==="inherit"&&r.getData().getVisual("symbol")?g==="inherit"?r.getData().getVisual("symbolRotate"):g:0;T.add(Lct({itemWidth:p,itemHeight:v,icon:c,iconRotate:k,itemStyle:w.itemStyle,lineStyle:w.lineStyle,symbolKeepAspect:_}))}var C=s==="left"?p+5:-5,E=s,M=a.get("formatter"),x=n;Mt(M)&&M?x=M.replace("{name}",n!=null?n:""):Ut(M)&&(x=M(n));var D=o.get("inactiveColor");T.add(new tr({style:mn(S,{text:x,x:C,y:v/2,fill:m?S.getTextColor():D,align:E,verticalAlign:"middle"})}));var B=new Qe({shape:T.getBoundingRect(),invisible:!0}),V=o.getModel("tooltip");return V.get("show")&&eP({el:B,componentModel:a,itemName:n,itemTooltipOption:V.option}),T.add(B),T.eachChild(function(F){F.silent=!0}),B.silent=!f,this.getContentGroup().add(T),HS(T),T.__legendDataIndex=i,T},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getContentGroup(),u=this.getSelectorGroup();Fc(r.get("orient"),l,r.get("itemGap"),i.width,i.height);var c=l.getBoundingRect(),f=[-c.x,-c.y];if(u.markRedraw(),l.markRedraw(),a){Fc("horizontal",u,r.get("selectorItemGap",!0));var h=u.getBoundingRect(),d=[-h.x,-h.y],p=r.get("selectorButtonGap",!0),v=r.getOrient().index,m=v===0?"width":"height",g=v===0?"height":"width",_=v===0?"y":"x";s==="end"?d[v]+=c[m]+p:f[v]+=h[m]+p,d[1-v]+=c[g]/2-h[g]/2,u.x=d[0],u.y=d[1],l.x=f[0],l.y=f[1];var b={x:0,y:0};return b[m]=c[m]+p+h[m],b[g]=Math.max(c[g],h[g]),b[_]=Math.min(0,h[_]+d[1-v]),b}else return l.x=f[0],l.y=f[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(li);function xct(e,t,r,n,i,o,a){function s(m,g){m.lineWidth==="auto"&&(m.lineWidth=g.lineWidth>0?2:0),x3(m,function(_,b){m[b]==="inherit"&&(m[b]=g[b])})}var l=t.getModel("itemStyle"),u=l.getItemStyle(),c=e.lastIndexOf("empty",0)===0?"fill":"stroke",f=l.getShallow("decal");u.decal=!f||f==="inherit"?n.decal:Gm(f,a),u.fill==="inherit"&&(u.fill=n[i]),u.stroke==="inherit"&&(u.stroke=n[c]),u.opacity==="inherit"&&(u.opacity=(i==="fill"?n:r).opacity),s(u,n);var h=t.getModel("lineStyle"),d=h.getLineStyle();if(s(d,r),u.fill==="auto"&&(u.fill=n.fill),u.stroke==="auto"&&(u.stroke=n.fill),d.stroke==="auto"&&(d.stroke=n.fill),!o){var p=t.get("inactiveBorderWidth"),v=u[c];u.lineWidth=p==="auto"?n.lineWidth>0&&v?2:0:u.lineWidth,u.fill=t.get("inactiveColor"),u.stroke=t.get("inactiveBorderColor"),d.stroke=h.get("inactiveColor"),d.lineWidth=h.get("inactiveWidth")}return{itemStyle:u,lineStyle:d}}function Lct(e){var t=e.icon||"roundRect",r=zi(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill,e.symbolKeepAspect);return r.setStyle(e.itemStyle),r.rotation=(e.iconRotate||0)*Math.PI/180,r.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(r.style.stroke=r.style.fill,r.style.fill="#fff",r.style.lineWidth=2),r}function K6(e,t,r,n){I3(e,t,r,n),r.dispatchAction({type:"legendToggleSelect",name:e!=null?e:t}),L3(e,t,r,n)}function hB(e){for(var t=e.getZr().storage.getDisplayList(),r,n=0,i=t.length;n<i&&!(r=t[n].states.emphasis);)n++;return r&&r.hoverLayer}function L3(e,t,r,n){hB(r)||r.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:n})}function I3(e,t,r,n){hB(r)||r.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:n})}const dB=Mct;function Ict(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(r){for(var n=0;n<t.length;n++)if(!t[n].isSelected(r.name))return!1;return!0})}function mh(e,t,r){var n={},i=e==="toggleSelected",o;return r.eachComponent("legend",function(a){i&&o!=null?a[o?"select":"unSelect"](t.name):e==="allSelect"||e==="inverseSelect"?a[e]():(a[e](t.name),o=a.isSelected(t.name));var s=a.getData();$(s,function(l){var u=l.get("name");if(!(u===`
`||u==="")){var c=a.isSelected(u);n.hasOwnProperty(u)?n[u]=n[u]&&c:n[u]=c}})}),e==="allSelect"||e==="inverseSelect"?{selected:n}:{name:t.name,selected:n}}function Oct(e){e.registerAction("legendToggleSelect","legendselectchanged",ye(mh,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",ye(mh,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",ye(mh,"inverseSelect")),e.registerAction("legendSelect","legendselected",ye(mh,"select")),e.registerAction("legendUnSelect","legendunselected",ye(mh,"unSelect"))}function pB(e){e.registerComponentModel(M3),e.registerComponentView(dB),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,Ict),e.registerSubTypeDefaulter("legend",function(){return"plain"}),Oct(e)}var Rct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.setScrollDataIndex=function(r){this.option.scrollDataIndex=r},t.prototype.init=function(r,n,i){var o=s_(r);e.prototype.init.call(this,r,n,i),J6(this,r,o)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),J6(this,this.option,r)},t.type="legend.scroll",t.defaultOption=e_(M3.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(M3);function J6(e,t,r){var n=e.getOrient(),i=[1,1];i[n.index]=0,qc(t,r,{type:"box",ignoreSize:!!i})}const Dct=Rct;var Q6=Ne,K2=["width","height"],J2=["x","y"],Nct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.newlineDisabled=!0,r._currentIndex=0,r}return t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new Q6),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new Q6)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(r,n,i,o,a,s,l){var u=this;e.prototype.renderInner.call(this,r,n,i,o,a,s,l);var c=this._controllerGroup,f=n.get("pageIconSize",!0),h=ct(f)?f:[f,f];p("pagePrev",0);var d=n.getModel("pageTextStyle");c.add(new tr({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1);function p(v,m){var g=v+"DataIndex",_=tP(n.get("pageIcons",!0)[n.getOrient().name][m],{onclick:Vt(u._pageGo,u,g,n,o)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});_.name=v,c.add(_)}},t.prototype.layoutInner=function(r,n,i,o,a,s){var l=this.getSelectorGroup(),u=r.getOrient().index,c=K2[u],f=J2[u],h=K2[1-u],d=J2[1-u];a&&Fc("horizontal",l,r.get("selectorItemGap",!0));var p=r.get("selectorButtonGap",!0),v=l.getBoundingRect(),m=[-v.x,-v.y],g=zt(i);a&&(g[c]=i[c]-v[c]-p);var _=this._layoutContentAndController(r,o,g,u,c,h,d,f);if(a){if(s==="end")m[u]+=_[c]+p;else{var b=v[c]+p;m[u]-=b,_[f]-=b}_[c]+=v[c]+p,m[1-u]+=_[d]+_[h]/2-v[h]/2,_[h]=Math.max(_[h],v[h]),_[d]=Math.min(_[d],v[d]+m[1-u]),l.x=m[0],l.y=m[1],l.markRedraw()}return _},t.prototype._layoutContentAndController=function(r,n,i,o,a,s,l,u){var c=this.getContentGroup(),f=this._containerGroup,h=this._controllerGroup;Fc(r.get("orient"),c,r.get("itemGap"),o?i.width:null,o?null:i.height),Fc("horizontal",h,r.get("pageButtonItemGap",!0));var d=c.getBoundingRect(),p=h.getBoundingRect(),v=this._showController=d[a]>i[a],m=[-d.x,-d.y];n||(m[o]=c[u]);var g=[0,0],_=[-p.x,-p.y],b=Zt(r.get("pageButtonGap",!0),r.get("itemGap",!0));if(v){var w=r.get("pageButtonPosition",!0);w==="end"?_[o]+=i[a]-p[a]:g[o]+=p[a]+b}_[1-o]+=d[s]/2-p[s]/2,c.setPosition(m),f.setPosition(g),h.setPosition(_);var T={x:0,y:0};if(T[a]=v?i[a]:d[a],T[s]=Math.max(d[s],p[s]),T[l]=Math.min(0,p[l]+_[1-o]),f.__rectSize=i[a],v){var S={x:0,y:0};S[a]=Math.max(i[a]-p[a]-b,0),S[s]=T[s],f.setClipPath(new Qe({shape:S})),f.__rectSize=S[a]}else h.eachChild(function(C){C.attr({invisible:!0,silent:!0})});var k=this._getPageInfo(r);return k.pageIndex!=null&&_r(c,{x:k.contentPosition[0],y:k.contentPosition[1]},v?r:null),this._updatePageInfoView(r,k),T},t.prototype._pageGo=function(r,n,i){var o=this._getPageInfo(n)[r];o!=null&&i.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:n.id})},t.prototype._updatePageInfoView=function(r,n){var i=this._controllerGroup;$(["pagePrev","pageNext"],function(c){var f=c+"DataIndex",h=n[f]!=null,d=i.childOfName(c);d&&(d.setStyle("fill",h?r.get("pageIconColor",!0):r.get("pageIconInactiveColor",!0)),d.cursor=h?"pointer":"default")});var o=i.childOfName("pageText"),a=r.get("pageFormatter"),s=n.pageIndex,l=s!=null?s+1:0,u=n.pageCount;o&&a&&o.setStyle("text",Mt(a)?a.replace("{current}",l==null?"":l+"").replace("{total}",u==null?"":u+""):a({current:l,total:u}))},t.prototype._getPageInfo=function(r){var n=r.get("scrollDataIndex",!0),i=this.getContentGroup(),o=this._containerGroup.__rectSize,a=r.getOrient().index,s=K2[a],l=J2[a],u=this._findTargetItemIndex(n),c=i.children(),f=c[u],h=c.length,d=h?1:0,p={contentPosition:[i.x,i.y],pageCount:d,pageIndex:d-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!f)return p;var v=w(f);p.contentPosition[a]=-v.s;for(var m=u+1,g=v,_=v,b=null;m<=h;++m)b=w(c[m]),(!b&&_.e>g.s+o||b&&!T(b,g.s))&&(_.i>g.i?g=_:g=b,g&&(p.pageNextDataIndex==null&&(p.pageNextDataIndex=g.i),++p.pageCount)),_=b;for(var m=u-1,g=v,_=v,b=null;m>=-1;--m)b=w(c[m]),(!b||!T(_,b.s))&&g.i<_.i&&(_=g,p.pagePrevDataIndex==null&&(p.pagePrevDataIndex=g.i),++p.pageCount,++p.pageIndex),g=b;return p;function w(S){if(S){var k=S.getBoundingRect(),C=k[l]+S[l];return{s:C,e:C+k[s],i:S.__legendDataIndex}}}function T(S,k){return S.e>=k&&S.s<=k+o}},t.prototype._findTargetItemIndex=function(r){if(!this._showController)return 0;var n,i=this.getContentGroup(),o;return i.eachChild(function(a,s){var l=a.__legendDataIndex;o==null&&l!=null&&(o=s),l===r&&(n=s)}),n!=null?n:o},t.type="legend.scroll",t}(dB);const Fct=Nct;function $ct(e){e.registerAction("legendScroll","legendscroll",function(t,r){var n=t.scrollDataIndex;n!=null&&r.eachComponent({mainType:"legend",subType:"scroll",query:t},function(i){i.setScrollDataIndex(n)})})}function Bct(e){Yr(pB),e.registerComponentModel(Dct),e.registerComponentView(Fct),$ct(e)}function Sf(e){Yr(pB),Yr(Bct)}var zct={get:function(e,t,r){var n=zt((Vct[e]||{})[t]);return r&&ct(n)?n[n.length-1]:n}},Vct={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}};const vB=zct;var tx=_n.mapVisual,Uct=_n.eachVisual,Wct=ct,ex=$,Gct=Om,jct=ma,Hct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.stateList=["inRange","outOfRange"],r.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],r.layoutMode={type:"box",ignoreSize:!0},r.dataBound=[-1/0,1/0],r.targetVisuals={},r.controllerVisuals={},r}return t.prototype.init=function(r,n,i){this.mergeDefaultAndTheme(r,i)},t.prototype.optionUpdated=function(r,n){var i=this.option;!n&&ict(i,r,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(r){var n=this.stateList;r=Vt(r,this),this.controllerVisuals=H6(this.option.controller,n,r),this.targetVisuals=H6(this.option.target,n,r)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var r=this.option.seriesIndex,n=[];return r==null||r==="all"?this.ecModel.eachSeries(function(i,o){n.push(o)}):n=Je(r),n},t.prototype.eachTargetSeries=function(r,n){$(this.getTargetSeriesIndices(),function(i){var o=this.ecModel.getSeriesByIndex(i);o&&r.call(n,o)},this)},t.prototype.isTargetSeries=function(r){var n=!1;return this.eachTargetSeries(function(i){i===r&&(n=!0)}),n},t.prototype.formatValueText=function(r,n,i){var o=this.option,a=o.precision,s=this.dataBound,l=o.formatter,u;i=i||["<",">"],ct(r)&&(r=r.slice(),u=!0);var c=n?r:u?[f(r[0]),f(r[1])]:f(r);if(Mt(l))return l.replace("{value}",u?c[0]:c).replace("{value2}",u?c[1]:c);if(Ut(l))return u?l(r[0],r[1]):l(r);if(u)return r[0]===s[0]?i[0]+" "+c[1]:r[1]===s[1]?i[1]+" "+c[0]:c[0]+" - "+c[1];return c;function f(h){return h===s[0]?"min":h===s[1]?"max":(+h).toFixed(Math.min(a,20))}},t.prototype.resetExtent=function(){var r=this.option,n=Gct([r.min,r.max]);this._dataExtent=n},t.prototype.getDataDimensionIndex=function(r){var n=this.option.dimension;if(n!=null)return r.getDimensionIndex(n);for(var i=r.dimensions,o=i.length-1;o>=0;o--){var a=i[o],s=r.getDimensionInfo(a);if(!s.isCalculationCoord)return s.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var r=this.ecModel,n=this.option,i={inRange:n.inRange,outOfRange:n.outOfRange},o=n.target||(n.target={}),a=n.controller||(n.controller={});se(o,i),se(a,i);var s=this.isCategory();l.call(this,o),l.call(this,a),u.call(this,o,"inRange","outOfRange"),c.call(this,a);function l(f){Wct(n.color)&&!f.inRange&&(f.inRange={color:n.color.slice().reverse()}),f.inRange=f.inRange||{color:r.get("gradientColor")}}function u(f,h,d){var p=f[h],v=f[d];p&&!v&&(v=f[d]={},ex(p,function(m,g){if(!!_n.isValidType(g)){var _=vB.get(g,"inactive",s);_!=null&&(v[g]=_,g==="color"&&!v.hasOwnProperty("opacity")&&!v.hasOwnProperty("colorAlpha")&&(v.opacity=[0,0]))}}))}function c(f){var h=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,d=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,p=this.get("inactiveColor"),v=this.getItemSymbol(),m=v||"roundRect";ex(this.stateList,function(g){var _=this.itemSize,b=f[g];b||(b=f[g]={color:s?p:[p]}),b.symbol==null&&(b.symbol=h&&zt(h)||(s?m:[m])),b.symbolSize==null&&(b.symbolSize=d&&zt(d)||(s?_[0]:[_[0],_[0]])),b.symbol=tx(b.symbol,function(S){return S==="none"?m:S});var w=b.symbolSize;if(w!=null){var T=-1/0;Uct(w,function(S){S>T&&(T=S)}),b.symbolSize=tx(w,function(S){return jct(S,[0,T],[0,_[0]],!0)})}},this)}},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(r){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(r){return null},t.prototype.getVisualMeta=function(r){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(Me);const t1=Hct;var rx=[20,140],Xct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(i){i.mappingMethod="linear",i.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){e.prototype.resetItemSize.apply(this,arguments);var r=this.itemSize;(r[0]==null||isNaN(r[0]))&&(r[0]=rx[0]),(r[1]==null||isNaN(r[1]))&&(r[1]=rx[1])},t.prototype._resetRange=function(){var r=this.getExtent(),n=this.option.range;!n||n.auto?(r.auto=1,this.option.range=r):ct(n)&&(n[0]>n[1]&&n.reverse(),n[0]=Math.max(n[0],r[0]),n[1]=Math.min(n[1],r[1]))},t.prototype.completeVisualOption=function(){e.prototype.completeVisualOption.apply(this,arguments),$(this.stateList,function(r){var n=this.option.controller[r].symbolSize;n&&n[0]!==n[1]&&(n[0]=n[1]/3)},this)},t.prototype.setSelected=function(r){this.option.range=r.slice(),this._resetRange()},t.prototype.getSelected=function(){var r=this.getExtent(),n=Om((this.get("range")||[]).slice());return n[0]>r[1]&&(n[0]=r[1]),n[1]>r[1]&&(n[1]=r[1]),n[0]<r[0]&&(n[0]=r[0]),n[1]<r[0]&&(n[1]=r[0]),n},t.prototype.getValueState=function(r){var n=this.option.range,i=this.getExtent();return(n[0]<=i[0]||n[0]<=r)&&(n[1]>=i[1]||r<=n[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[];return this.eachTargetSeries(function(i){var o=[],a=i.getData();a.each(this.getDataDimensionIndex(a),function(s,l){r[0]<=s&&s<=r[1]&&o.push(l)},this),n.push({seriesId:i.id,dataIndex:o})},this),n},t.prototype.getVisualMeta=function(r){var n=nx(this,"outOfRange",this.getExtent()),i=nx(this,"inRange",this.option.range.slice()),o=[];function a(d,p){o.push({value:d,color:r(d,p)})}for(var s=0,l=0,u=i.length,c=n.length;l<c&&(!i.length||n[l]<=i[0]);l++)n[l]<i[s]&&a(n[l],"outOfRange");for(var f=1;s<u;s++,f=0)f&&o.length&&a(i[s],"outOfRange"),a(i[s],"inRange");for(var f=1;l<c;l++)(!i.length||i[i.length-1]<n[l])&&(f&&(o.length&&a(o[o.length-1].value,"outOfRange"),f=0),a(n[l],"outOfRange"));var h=o.length;return{stops:o,outerColors:[h?o[0].color:"transparent",h?o[h-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=e_(t1.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(t1);function nx(e,t,r){if(r[0]===r[1])return r.slice();for(var n=200,i=(r[1]-r[0])/n,o=r[0],a=[],s=0;s<=n&&o<r[1];s++)a.push(o),o+=i;return a.push(r[1]),a}const Yct=Xct;var qct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r.autoPositionValues={left:1,right:1,top:1,bottom:1},r}return t.prototype.init=function(r,n){this.ecModel=r,this.api=n},t.prototype.render=function(r,n,i,o){if(this.visualMapModel=r,r.get("show")===!1){this.group.removeAll();return}this.doRender(r,n,i,o)},t.prototype.renderBackground=function(r){var n=this.visualMapModel,i=Dp(n.get("padding")||0),o=r.getBoundingRect();r.add(new Qe({z2:-1,silent:!0,shape:{x:o.x-i[3],y:o.y-i[0],width:o.width+i[3]+i[1],height:o.height+i[0]+i[2]},style:{fill:n.get("backgroundColor"),stroke:n.get("borderColor"),lineWidth:n.get("borderWidth")}}))},t.prototype.getControllerVisual=function(r,n,i){i=i||{};var o=i.forceState,a=this.visualMapModel,s={};if(n==="color"){var l=a.get("contentColor");s.color=l}function u(d){return s[d]}function c(d,p){s[d]=p}var f=a.controllerVisuals[o||a.getValueState(r)],h=_n.prepareVisualTypes(f);return $(h,function(d){var p=f[d];i.convertOpacityToAlpha&&d==="opacity"&&(d="colorAlpha",p=f.__alphaForOpacity),_n.dependsOn(d,n)&&p&&p.applyVisual(r,u,c)}),s[n]},t.prototype.positionGroup=function(r){var n=this.visualMapModel,i=this.api;fet(r,n.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},t.prototype.doRender=function(r,n,i,o){},t.type="visualMap",t}(li);const gB=qct;var ix=[["left","right","width"],["top","bottom","height"]];function mB(e,t,r){var n=e.option,i=n.align;if(i!=null&&i!=="auto")return i;for(var o={width:t.getWidth(),height:t.getHeight()},a=n.orient==="horizontal"?1:0,s=ix[a],l=[0,null,10],u={},c=0;c<3;c++)u[ix[1-a][c]]=l[c],u[s[c]]=c===2?r[0]:n[s[c]];var f=[["x","width",3],["y","height",0]][a],h=Ls(u,o,n.padding);return s[(h.margin[f[2]]||0)+h[f[0]]+h[f[1]]*.5<o[f[1]]*.5?0:1]}function Kg(e,t){return $(e||[],function(r){r.dataIndex!=null&&(r.dataIndexInside=r.dataIndex,r.dataIndex=null),r.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var go=ma,Zct=$,ox=Math.min,Q2=Math.max,Kct=12,Jct=6,Qct=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._shapes={},r._dataInterval=[],r._handleEnds=[],r._hoverLinkDataIndices=[],r}return t.prototype.doRender=function(r,n,i,o){this._api=i,(!o||o.type!=="selectDataRange"||o.from!==this.uid)&&this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var r=this.visualMapModel,n=this.group;this._orient=r.get("orient"),this._useHandle=r.get("calculable"),this._resetInterval(),this._renderBar(n);var i=r.get("text");this._renderEndsText(n,i,0),this._renderEndsText(n,i,1),this._updateView(!0),this.renderBackground(n),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(n)},t.prototype._renderEndsText=function(r,n,i){if(!!n){var o=n[1-i];o=o!=null?o+"":"";var a=this.visualMapModel,s=a.get("textGap"),l=a.itemSize,u=this._shapes.mainGroup,c=this._applyTransform([l[0]/2,i===0?-s:l[1]+s],u),f=this._applyTransform(i===0?"bottom":"top",u),h=this._orient,d=this.visualMapModel.textStyleModel;this.group.add(new tr({style:mn(d,{x:c[0],y:c[1],verticalAlign:h==="horizontal"?"middle":f,align:h==="horizontal"?f:"center",text:o})}))}},t.prototype._renderBar=function(r){var n=this.visualMapModel,i=this._shapes,o=n.itemSize,a=this._orient,s=this._useHandle,l=mB(n,this.api,o),u=i.mainGroup=this._createBarGroup(l),c=new Ne;u.add(c),c.add(i.outOfRange=ax()),c.add(i.inRange=ax(null,s?lx(this._orient):null,Vt(this._dragHandle,this,"all",!1),Vt(this._dragHandle,this,"all",!0))),c.setClipPath(new Qe({shape:{x:0,y:0,width:o[0],height:o[1],r:3}}));var f=n.textStyleModel.getTextRect("\u56FD"),h=Q2(f.width,f.height);s&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(n,u,0,o,h,a),this._createHandle(n,u,1,o,h,a)),this._createIndicator(n,u,o,h,a),r.add(u)},t.prototype._createHandle=function(r,n,i,o,a,s){var l=Vt(this._dragHandle,this,i,!1),u=Vt(this._dragHandle,this,i,!0),c=ga(r.get("handleSize"),o[0]),f=zi(r.get("handleIcon"),-c/2,-c/2,c,c,null,!0),h=lx(this._orient);f.attr({cursor:h,draggable:!0,drift:l,ondragend:u,onmousemove:function(g){Kl(g.event)}}),f.x=o[0]/2,f.useStyle(r.getModel("handleStyle").getItemStyle()),f.setStyle({strokeNoScale:!0,strokeFirst:!0}),f.style.lineWidth*=2,f.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),Yk(f,!0),n.add(f);var d=this.visualMapModel.textStyleModel,p=new tr({cursor:h,draggable:!0,drift:l,onmousemove:function(g){Kl(g.event)},ondragend:u,style:mn(d,{x:0,y:0,text:""})});p.ensureState("blur").style={opacity:.1},p.stateTransition={duration:200},this.group.add(p);var v=[c,0],m=this._shapes;m.handleThumbs[i]=f,m.handleLabelPoints[i]=v,m.handleLabels[i]=p},t.prototype._createIndicator=function(r,n,i,o,a){var s=ga(r.get("indicatorSize"),i[0]),l=zi(r.get("indicatorIcon"),-s/2,-s/2,s,s,null,!0);l.attr({cursor:"move",invisible:!0,silent:!0,x:i[0]/2});var u=r.getModel("indicatorStyle").getItemStyle();if(l instanceof Ea){var c=l.style;l.useStyle(at({image:c.image,x:c.x,y:c.y,width:c.width,height:c.height},u))}else l.useStyle(u);n.add(l);var f=this.visualMapModel.textStyleModel,h=new tr({silent:!0,invisible:!0,style:mn(f,{x:0,y:0,text:""})});this.group.add(h);var d=[(a==="horizontal"?o/2:Jct)+i[0]/2,0],p=this._shapes;p.indicator=l,p.indicatorLabel=h,p.indicatorLabelPoint=d,this._firstShowIndicator=!0},t.prototype._dragHandle=function(r,n,i,o){if(!!this._useHandle){if(this._dragging=!n,!n){var a=this._applyTransform([i,o],this._shapes.mainGroup,!0);this._updateInterval(r,a[1]),this._hideIndicator(),this._updateView()}n===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),n?!this._hovering&&this._clearHoverLinkToSeries():sx(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[r],!1)}},t.prototype._resetInterval=function(){var r=this.visualMapModel,n=this._dataInterval=r.getSelected(),i=r.getExtent(),o=[0,r.itemSize[1]];this._handleEnds=[go(n[0],i,o,!0),go(n[1],i,o,!0)]},t.prototype._updateInterval=function(r,n){n=n||0;var i=this.visualMapModel,o=this._handleEnds,a=[0,i.itemSize[1]];glt(n,o,a,r,0);var s=i.getExtent();this._dataInterval=[go(o[0],a,s,!0),go(o[1],a,s,!0)]},t.prototype._updateView=function(r){var n=this.visualMapModel,i=n.getExtent(),o=this._shapes,a=[0,n.itemSize[1]],s=r?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,i,s,"inRange"),u=this._createBarVisual(i,i,a,"outOfRange");o.inRange.setStyle({fill:l.barColor}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:u.barColor}).setShape("points",u.barPoints),this._updateHandle(s,l)},t.prototype._createBarVisual=function(r,n,i,o){var a={forceState:o,convertOpacityToAlpha:!0},s=this._makeColorGradient(r,a),l=[this.getControllerVisual(r[0],"symbolSize",a),this.getControllerVisual(r[1],"symbolSize",a)],u=this._createBarPoints(i,l);return{barColor:new Kk(0,0,0,1,s),barPoints:u,handlesColor:[s[0].color,s[s.length-1].color]}},t.prototype._makeColorGradient=function(r,n){var i=100,o=[],a=(r[1]-r[0])/i;o.push({color:this.getControllerVisual(r[0],"color",n),offset:0});for(var s=1;s<i;s++){var l=r[0]+a*s;if(l>r[1])break;o.push({color:this.getControllerVisual(l,"color",n),offset:s/i})}return o.push({color:this.getControllerVisual(r[1],"color",n),offset:1}),o},t.prototype._createBarPoints=function(r,n){var i=this.visualMapModel.itemSize;return[[i[0]-n[0],r[0]],[i[0],r[0]],[i[0],r[1]],[i[0]-n[1],r[1]]]},t.prototype._createBarGroup=function(r){var n=this._orient,i=this.visualMapModel.get("inverse");return new Ne(n==="horizontal"&&!i?{scaleX:r==="bottom"?1:-1,rotation:Math.PI/2}:n==="horizontal"&&i?{scaleX:r==="bottom"?-1:1,rotation:-Math.PI/2}:n==="vertical"&&!i?{scaleX:r==="left"?1:-1,scaleY:-1}:{scaleX:r==="left"?1:-1})},t.prototype._updateHandle=function(r,n){if(!!this._useHandle){var i=this._shapes,o=this.visualMapModel,a=i.handleThumbs,s=i.handleLabels,l=o.itemSize,u=o.getExtent();Zct([0,1],function(c){var f=a[c];f.setStyle("fill",n.handlesColor[c]),f.y=r[c];var h=go(r[c],[0,l[1]],u,!0),d=this.getControllerVisual(h,"symbolSize");f.scaleX=f.scaleY=d/l[0],f.x=l[0]-d/2;var p=Rc(i.handleLabelPoints[c],jg(f,this.group));s[c].setStyle({x:p[0],y:p[1],text:o.formatValueText(this._dataInterval[c]),verticalAlign:"middle",align:this._orient==="vertical"?this._applyTransform("left",i.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(r,n,i,o){var a=this.visualMapModel,s=a.getExtent(),l=a.itemSize,u=[0,l[1]],c=this._shapes,f=c.indicator;if(!!f){f.attr("invisible",!1);var h={convertOpacityToAlpha:!0},d=this.getControllerVisual(r,"color",h),p=this.getControllerVisual(r,"symbolSize"),v=go(r,s,u,!0),m=l[0]-p/2,g={x:f.x,y:f.y};f.y=v,f.x=m;var _=Rc(c.indicatorLabelPoint,jg(f,this.group)),b=c.indicatorLabel;b.attr("invisible",!1);var w=this._applyTransform("left",c.mainGroup),T=this._orient,S=T==="horizontal";b.setStyle({text:(i||"")+a.formatValueText(n),verticalAlign:S?w:"middle",align:S?"center":w});var k={x:m,y:v,style:{fill:d}},C={style:{x:_[0],y:_[1]}};if(a.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var E={duration:100,easing:"cubicInOut",additive:!0};f.x=g.x,f.y=g.y,f.animateTo(k,E),b.animateTo(C,E)}else f.attr(k),b.attr(C);this._firstShowIndicator=!1;var M=this._shapes.handleLabels;if(M)for(var x=0;x<M.length;x++)this._api.enterBlur(M[x])}},t.prototype._enableHoverLinkToSeries=function(){var r=this;this._shapes.mainGroup.on("mousemove",function(n){if(r._hovering=!0,!r._dragging){var i=r.visualMapModel.itemSize,o=r._applyTransform([n.offsetX,n.offsetY],r._shapes.mainGroup,!0,!0);o[1]=ox(Q2(0,o[1]),i[1]),r._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=i[0])}}).on("mouseout",function(){r._hovering=!1,!r._dragging&&r._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var r=this.api.getZr();this.visualMapModel.option.hoverLink?(r.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),r.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(r,n){var i=this.visualMapModel,o=i.itemSize;if(!!i.option.hoverLink){var a=[0,o[1]],s=i.getExtent();r=ox(Q2(a[0],r),a[1]);var l=tft(i,s,a),u=[r-l,r+l],c=go(r,a,s,!0),f=[go(u[0],a,s,!0),go(u[1],a,s,!0)];u[0]<a[0]&&(f[0]=-1/0),u[1]>a[1]&&(f[1]=1/0),n&&(f[0]===-1/0?this._showIndicator(c,f[1],"< ",l):f[1]===1/0?this._showIndicator(c,f[0],"> ",l):this._showIndicator(c,c,"\u2248 ",l));var h=this._hoverLinkDataIndices,d=[];(n||sx(i))&&(d=this._hoverLinkDataIndices=i.findTargetDataIndices(f));var p=bJ(h,d);this._dispatchHighDown("downplay",Kg(p[0],i)),this._dispatchHighDown("highlight",Kg(p[1],i))}},t.prototype._hoverLinkFromSeriesMouseOver=function(r){var n;if(Sc(r.target,function(l){var u=ae(l);if(u.dataIndex!=null)return n=u,!0},!0),!!n){var i=this.ecModel.getSeriesByIndex(n.seriesIndex),o=this.visualMapModel;if(!!o.isTargetSeries(i)){var a=i.getData(n.dataType),s=a.getStore().get(o.getDataDimensionIndex(a),n.dataIndex);isNaN(s)||this._showIndicator(s,s)}}},t.prototype._hideIndicator=function(){var r=this._shapes;r.indicator&&r.indicator.attr("invisible",!0),r.indicatorLabel&&r.indicatorLabel.attr("invisible",!0);var n=this._shapes.handleLabels;if(n)for(var i=0;i<n.length;i++)this._api.leaveBlur(n[i])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var r=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",Kg(r,this.visualMapModel)),r.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var r=this.api.getZr();r.off("mouseover",this._hoverLinkFromSeriesMouseOver),r.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(r,n,i,o){var a=jg(n,o?null:this.group);return ct(r)?Rc(r,a,i):vN(r,a,i)},t.prototype._dispatchHighDown=function(r,n){n&&n.length&&this.api.dispatchAction({type:r,batch:n})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(gB);function ax(e,t,r,n){return new Qd({shape:{points:e},draggable:!!r,cursor:t,drift:r,onmousemove:function(i){Kl(i.event)},ondragend:n})}function tft(e,t,r){var n=Kct/2,i=e.get("hoverLinkDataSize");return i&&(n=go(i,t,r,!0)/2),n}function sx(e){var t=e.get("hoverLinkOnHandle");return!!(t==null?e.get("realtime"):t)}function lx(e){return e==="vertical"?"ns-resize":"ew-resize"}const eft=Qct;var rft={type:"selectDataRange",event:"dataRangeSelected",update:"update"},nft=function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(r){r.setSelected(e.selected)})},ift=[{createOnAllSeries:!0,reset:function(e,t){var r=[];return t.eachComponent("visualMap",function(n){var i=e.pipelineContext;!n.isTargetSeries(e)||i&&i.large||r.push(oct(n.stateList,n.targetVisuals,Vt(n.getValueState,n),n.getDataDimensionIndex(e.getData())))}),r}},{createOnAllSeries:!0,reset:function(e,t){var r=e.getData(),n=[];t.eachComponent("visualMap",function(i){if(i.isTargetSeries(e)){var o=i.getVisualMeta(Vt(oft,null,e,i))||{stops:[],outerColors:[]},a=i.getDataDimensionIndex(r);a>=0&&(o.dimension=a,n.push(o))}}),e.getData().setVisual("visualMeta",n)}}];function oft(e,t,r,n){for(var i=t.targetVisuals[n],o=_n.prepareVisualTypes(i),a={color:h_(e.getData(),"color")},s=0,l=o.length;s<l;s++){var u=o[s],c=i[u==="opacity"?"__alphaForOpacity":u];c&&c.applyVisual(r,f,h)}return a.color;function f(d){return a[d]}function h(d,p){a[d]=p}}var ux=$;function aft(e){var t=e&&e.visualMap;ct(t)||(t=t?[t]:[]),ux(t,function(r){if(!!r){Yu(r,"splitList")&&!Yu(r,"pieces")&&(r.pieces=r.splitList,delete r.splitList);var n=r.pieces;n&&ct(n)&&ux(n,function(i){Rt(i)&&(Yu(i,"start")&&!Yu(i,"min")&&(i.min=i.start),Yu(i,"end")&&!Yu(i,"max")&&(i.max=i.end))})}})}function Yu(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}var cx=!1;function _B(e){cx||(cx=!0,e.registerSubTypeDefaulter("visualMap",function(t){return!t.categories&&(!(t.pieces?t.pieces.length>0:t.splitNumber>0)||t.calculable)?"continuous":"piecewise"}),e.registerAction(rft,nft),$(ift,function(t){e.registerVisual(e.PRIORITY.VISUAL.COMPONENT,t)}),e.registerPreprocessor(aft))}function sft(e){e.registerComponentModel(Yct),e.registerComponentView(eft),_B(e)}var lft=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r._pieceList=[],r}return t.prototype.optionUpdated=function(r,n){e.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],uft[this._mode].call(this,this._pieceList),this._resetSelected(r,n);var o=this.option.categories;this.resetVisual(function(a,s){i==="categories"?(a.mappingMethod="category",a.categories=zt(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=Lt(this._pieceList,function(l){return l=zt(l),s!=="inRange"&&(l.visual=null),l}))})},t.prototype.completeVisualOption=function(){var r=this.option,n={},i=_n.listVisualTypes(),o=this.isCategory();$(r.pieces,function(s){$(i,function(l){s.hasOwnProperty(l)&&(n[l]=1)})}),$(n,function(s,l){var u=!1;$(this.stateList,function(c){u=u||a(r,c,l)||a(r.target,c,l)},this),!u&&$(this.stateList,function(c){(r[c]||(r[c]={}))[l]=vB.get(l,c==="inRange"?"active":"inactive",o)})},this);function a(s,l,u){return s&&s[l]&&s[l].hasOwnProperty(u)}e.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(r,n){var i=this.option,o=this._pieceList,a=(n?i:r).selected||{};if(i.selected=a,$(o,function(l,u){var c=this.getSelectedMapKey(l);a.hasOwnProperty(c)||(a[c]=!0)},this),i.selectedMode==="single"){var s=!1;$(o,function(l,u){var c=this.getSelectedMapKey(l);a[c]&&(s?a[c]=!1:s=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(r){return this._mode==="categories"?r.value+"":r.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var r=this.option;return r.pieces&&r.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(r){this.option.selected=zt(r)},t.prototype.getValueState=function(r){var n=_n.findPieceIndex(r,this._pieceList);return n!=null&&this.option.selected[this.getSelectedMapKey(this._pieceList[n])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(r){var n=[],i=this._pieceList;return this.eachTargetSeries(function(o){var a=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,u){var c=_n.findPieceIndex(l,i);c===r&&a.push(u)},this),n.push({seriesId:o.id,dataIndex:a})},this),n},t.prototype.getRepresentValue=function(r){var n;if(this.isCategory())n=r.value;else if(r.value!=null)n=r.value;else{var i=r.interval||[];n=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return n},t.prototype.getVisualMeta=function(r){if(this.isCategory())return;var n=[],i=["",""],o=this;function a(c,f){var h=o.getRepresentValue({interval:c});f||(f=o.getValueState(h));var d=r(h,f);c[0]===-1/0?i[0]=d:c[1]===1/0?i[1]=d:n.push({value:c[0],color:d},{value:c[1],color:d})}var s=this._pieceList.slice();if(!s.length)s.push({interval:[-1/0,1/0]});else{var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),l=s[s.length-1].interval[1],l!==1/0&&s.push({interval:[l,1/0]})}var u=-1/0;return $(s,function(c){var f=c.interval;f&&(f[0]>u&&a([u,f[0]],"outOfRange"),a(f.slice()),u=f[1])},this),{stops:n,outerColors:i}},t.type="visualMap.piecewise",t.defaultOption=e_(t1.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(t1),uft={splitNumber:function(e){var t=this.option,r=Math.min(t.precision,20),n=this.getExtent(),i=t.splitNumber;i=Math.max(parseInt(i,10),1),t.splitNumber=i;for(var o=(n[1]-n[0])/i;+o.toFixed(r)!==o&&r<5;)r++;t.precision=r,o=+o.toFixed(r),t.minOpen&&e.push({interval:[-1/0,n[0]],close:[0,0]});for(var a=0,s=n[0];a<i;s+=o,a++){var l=a===i-1?n[1]:s+o;e.push({interval:[s,l],close:[1,1]})}t.maxOpen&&e.push({interval:[n[1],1/0],close:[0,0]}),pM(e),$(e,function(u,c){u.index=c,u.text=this.formatValueText(u.interval)},this)},categories:function(e){var t=this.option;$(t.categories,function(r){e.push({text:this.formatValueText(r,!0),value:r})},this),fx(t,e)},pieces:function(e){var t=this.option;$(t.pieces,function(r,n){Rt(r)||(r={value:r});var i={text:"",index:n};if(r.label!=null&&(i.text=r.label),r.hasOwnProperty("value")){var o=i.value=r.value;i.interval=[o,o],i.close=[1,1]}else{for(var a=i.interval=[],s=i.close=[0,0],l=[1,0,1],u=[-1/0,1/0],c=[],f=0;f<2;f++){for(var h=[["gte","gt","min"],["lte","lt","max"]][f],d=0;d<3&&a[f]==null;d++)a[f]=r[h[d]],s[f]=l[d],c[f]=d===2;a[f]==null&&(a[f]=u[f])}c[0]&&a[1]===1/0&&(s[0]=0),c[1]&&a[0]===-1/0&&(s[1]=0),a[0]===a[1]&&s[0]&&s[1]&&(i.value=a[0])}i.visual=_n.retrieveVisuals(r),e.push(i)},this),fx(t,e),pM(e),$(e,function(r){var n=r.close,i=[["<","\u2264"][n[1]],[">","\u2265"][n[0]]];r.text=r.text||this.formatValueText(r.value!=null?r.value:r.interval,!1,i)},this)}};function fx(e,t){var r=e.inverse;(e.orient==="vertical"?!r:r)&&t.reverse()}const cft=lft;var fft=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type=t.type,r}return t.prototype.doRender=function(){var r=this.group;r.removeAll();var n=this.visualMapModel,i=n.get("textGap"),o=n.textStyleModel,a=o.getFont(),s=o.getTextColor(),l=this._getItemAlign(),u=n.itemSize,c=this._getViewData(),f=c.endsText,h=Ai(n.get("showLabel",!0),!f);f&&this._renderEndsText(r,f[0],u,h,l),$(c.viewPieceList,function(d){var p=d.piece,v=new Ne;v.onclick=Vt(this._onItemClick,this,p),this._enableHoverLink(v,d.indexInModelPieceList);var m=n.getRepresentValue(p);if(this._createItemSymbol(v,m,[0,0,u[0],u[1]]),h){var g=this.visualMapModel.getValueState(m);v.add(new tr({style:{x:l==="right"?-i:u[0]+i,y:u[1]/2,text:p.text,verticalAlign:"middle",align:l,font:a,fill:s,opacity:g==="outOfRange"?.5:1}}))}r.add(v)},this),f&&this._renderEndsText(r,f[1],u,h,l),Fc(n.get("orient"),r,n.get("itemGap")),this.renderBackground(r),this.positionGroup(r)},t.prototype._enableHoverLink=function(r,n){var i=this;r.on("mouseover",function(){return o("highlight")}).on("mouseout",function(){return o("downplay")});var o=function(a){var s=i.visualMapModel;s.option.hoverLink&&i.api.dispatchAction({type:a,batch:Kg(s.findTargetDataIndices(n),s)})}},t.prototype._getItemAlign=function(){var r=this.visualMapModel,n=r.option;if(n.orient==="vertical")return mB(r,this.api,r.itemSize);var i=n.align;return(!i||i==="auto")&&(i="left"),i},t.prototype._renderEndsText=function(r,n,i,o,a){if(!!n){var s=new Ne,l=this.visualMapModel.textStyleModel;s.add(new tr({style:mn(l,{x:o?a==="right"?i[0]:0:i[0]/2,y:i[1]/2,verticalAlign:"middle",align:o?a:"center",text:n})})),r.add(s)}},t.prototype._getViewData=function(){var r=this.visualMapModel,n=Lt(r.getPieceList(),function(s,l){return{piece:s,indexInModelPieceList:l}}),i=r.get("text"),o=r.get("orient"),a=r.get("inverse");return(o==="horizontal"?a:!a)?n.reverse():i&&(i=i.slice().reverse()),{viewPieceList:n,endsText:i}},t.prototype._createItemSymbol=function(r,n,i){r.add(zi(this.getControllerVisual(n,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(n,"color")))},t.prototype._onItemClick=function(r){var n=this.visualMapModel,i=n.option,o=i.selectedMode;if(!!o){var a=zt(i.selected),s=n.getSelectedMapKey(r);o==="single"||o===!0?(a[s]=!0,$(a,function(l,u){a[u]=u===s})):a[s]=!a[s],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:a})}},t.type="visualMap.piecewise",t}(gB);const hft=fft;function dft(e){e.registerComponentModel(cft),e.registerComponentView(hft),_B(e)}function pft(e){Yr(sft),Yr(dft)}var hx={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},vft=function(){function e(t){var r=this._condVal=Mt(t)?new RegExp(t):AZ(t)?t:null;if(r==null){var n="";oe(n)}}return e.prototype.evaluate=function(t){var r=typeof t;return Mt(r)?this._condVal.test(t):Se(r)?this._condVal.test(t+""):!1},e}(),gft=function(){function e(){}return e.prototype.evaluate=function(){return this.value},e}(),mft=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(!t[r].evaluate())return!1;return!0},e}(),_ft=function(){function e(){}return e.prototype.evaluate=function(){for(var t=this.children,r=0;r<t.length;r++)if(t[r].evaluate())return!0;return!1},e}(),yft=function(){function e(){}return e.prototype.evaluate=function(){return!this.child.evaluate()},e}(),bft=function(){function e(){}return e.prototype.evaluate=function(){for(var t=!!this.valueParser,r=this.getValue,n=r(this.valueGetterParam),i=t?this.valueParser(n):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?i:n))return!1;return!0},e}();function WP(e,t){if(e===!0||e===!1){var r=new gft;return r.value=e,r}var n="";return yB(e)||oe(n),e.and?dx("and",e,t):e.or?dx("or",e,t):e.not?wft(e,t):Sft(e,t)}function dx(e,t,r){var n=t[e],i="";ct(n)||oe(i),n.length||oe(i);var o=e==="and"?new mft:new _ft;return o.children=Lt(n,function(a){return WP(a,r)}),o.children.length||oe(i),o}function wft(e,t){var r=e.not,n="";yB(r)||oe(n);var i=new yft;return i.child=WP(r,t),i.child||oe(n),i}function Sft(e,t){for(var r="",n=t.prepareGetValue(e),i=[],o=ve(e),a=e.parser,s=a?JN(a):null,l=0;l<o.length;l++){var u=o[l];if(!(u==="parser"||t.valueGetterAttrMap.get(u))){var c=pt(hx,u)?hx[u]:u,f=e[u],h=s?s(f):f,d=ort(c,h)||c==="reg"&&new vft(h);d||oe(r),i.push(d)}}i.length||oe(r);var p=new bft;return p.valueGetterParam=n,p.valueParser=s,p.getValue=t.getValue,p.subCondList=i,p}function yB(e){return Rt(e)&&!Xr(e)}var Tft=function(){function e(t,r){this._cond=WP(t,r)}return e.prototype.evaluate=function(){return this._cond.evaluate()},e}();function kft(e,t){return new Tft(e,t)}var Pft={type:"echarts:filter",transform:function(e){for(var t=e.upstream,r,n=kft(e.config,{valueGetterAttrMap:jt({dimension:!0}),prepareGetValue:function(s){var l="",u=s.dimension;pt(s,"dimension")||oe(l);var c=t.getDimensionInfo(u);return c||oe(l),{dimIdx:c.index}},getValue:function(s){return t.retrieveValueFromItem(r,s.dimIdx)}}),i=[],o=0,a=t.count();o<a;o++)r=t.getRawDataItem(o),n.evaluate()&&i.push(r);return{data:i}}},Eft={type:"echarts:sort",transform:function(e){var t=e.upstream,r=e.config,n="",i=Je(r);i.length||oe(n);var o=[];$(i,function(c){var f=c.dimension,h=c.order,d=c.parser,p=c.incomparable;if(f==null&&oe(n),h!=="asc"&&h!=="desc"&&oe(n),p&&p!=="min"&&p!=="max"){var v="";oe(v)}if(h!=="asc"&&h!=="desc"){var m="";oe(m)}var g=t.getDimensionInfo(f);g||oe(n);var _=d?JN(d):null;d&&!_&&oe(n),o.push({dimIdx:g.index,parser:_,comparator:new tF(h,p)})});var a=t.sourceFormat;a!==an&&a!==Hi&&oe(n);for(var s=[],l=0,u=t.count();l<u;l++)s.push(t.getRawDataItem(l));return s.sort(function(c,f){for(var h=0;h<o.length;h++){var d=o[h],p=t.retrieveValueFromItem(c,d.dimIdx),v=t.retrieveValueFromItem(f,d.dimIdx);d.parser&&(p=d.parser(p),v=d.parser(v));var m=d.comparator.evaluate(p,v);if(m!==0)return m}return 0}),{data:s}}};function b_(e){e.registerTransform(Pft),e.registerTransform(Eft)}var Cft=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.prototype.init=function(r,n,i){e.prototype.init.call(this,r,n,i),this._sourceManager=new iF(this),L4(this)},t.prototype.mergeOption=function(r,n){e.prototype.mergeOption.call(this,r,n),L4(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Co},t}(Me),Aft=function(e){yt(t,e);function t(){var r=e!==null&&e.apply(this,arguments)||this;return r.type="dataset",r}return t.type="dataset",t}(li);function w_(e){e.registerComponentModel(Cft),e.registerComponentView(Aft)}var tb=null;function Mft(e){return tb||(tb=(window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){return setTimeout(t,16)}).bind(window)),tb(e)}var eb=null;function xft(e){eb||(eb=(window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(t){clearTimeout(t)}).bind(window)),eb(e)}function Lft(e){var t=document.createElement("style");return t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e)),(document.querySelector("head")||document.body).appendChild(t),t}function vv(e,t){t===void 0&&(t={});var r=document.createElement(e);return Object.keys(t).forEach(function(n){r[n]=t[n]}),r}function bB(e,t,r){var n=window.getComputedStyle(e,r||null)||{display:"none"};return n[t]}function O3(e){if(!document.documentElement.contains(e))return{detached:!0,rendered:!1};for(var t=e;t!==document;){if(bB(t,"display")==="none")return{detached:!1,rendered:!1};t=t.parentNode}return{detached:!1,rendered:!0}}var Ift='.resize-triggers{visibility:hidden;opacity:0;pointer-events:none}.resize-contract-trigger,.resize-contract-trigger:before,.resize-expand-trigger,.resize-triggers{content:"";position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden}.resize-contract-trigger,.resize-expand-trigger{background:#eee;overflow:auto}.resize-contract-trigger:before{width:200%;height:200%}',R3=0,Jg=null;function Oft(e,t){e.__resize_mutation_handler__||(e.__resize_mutation_handler__=Nft.bind(e));var r=e.__resize_listeners__;if(!r){if(e.__resize_listeners__=[],window.ResizeObserver){var n=e.offsetWidth,i=e.offsetHeight,o=new ResizeObserver(function(){!e.__resize_observer_triggered__&&(e.__resize_observer_triggered__=!0,e.offsetWidth===n&&e.offsetHeight===i)||e1(e)}),a=O3(e),s=a.detached,l=a.rendered;e.__resize_observer_triggered__=s===!1&&l===!1,e.__resize_observer__=o,o.observe(e)}else if(e.attachEvent&&e.addEventListener)e.__resize_legacy_resize_handler__=function(){e1(e)},e.attachEvent("onresize",e.__resize_legacy_resize_handler__),document.addEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);else if(R3||(Jg=Lft(Ift)),Fft(e),e.__resize_rendered__=O3(e).rendered,window.MutationObserver){var u=new MutationObserver(e.__resize_mutation_handler__);u.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),e.__resize_mutation_observer__=u}}e.__resize_listeners__.push(t),R3++}function Rft(e,t){var r=e.__resize_listeners__;if(!!r){if(t&&r.splice(r.indexOf(t),1),!r.length||!t){if(e.detachEvent&&e.removeEventListener){e.detachEvent("onresize",e.__resize_legacy_resize_handler__),document.removeEventListener("DOMSubtreeModified",e.__resize_mutation_handler__);return}e.__resize_observer__?(e.__resize_observer__.unobserve(e),e.__resize_observer__.disconnect(),e.__resize_observer__=null):(e.__resize_mutation_observer__&&(e.__resize_mutation_observer__.disconnect(),e.__resize_mutation_observer__=null),e.removeEventListener("scroll",GP),e.removeChild(e.__resize_triggers__.triggers),e.__resize_triggers__=null),e.__resize_listeners__=null}!--R3&&Jg&&Jg.parentNode.removeChild(Jg)}}function Dft(e){var t=e.__resize_last__,r=t.width,n=t.height,i=e.offsetWidth,o=e.offsetHeight;return i!==r||o!==n?{width:i,height:o}:null}function Nft(){var e=O3(this),t=e.rendered,r=e.detached;t!==this.__resize_rendered__&&(!r&&this.__resize_triggers__&&(jP(this),this.addEventListener("scroll",GP,!0)),this.__resize_rendered__=t,e1(this))}function GP(){var e=this;jP(this),this.__resize_raf__&&xft(this.__resize_raf__),this.__resize_raf__=Mft(function(){var t=Dft(e);t&&(e.__resize_last__=t,e1(e))})}function e1(e){!e||!e.__resize_listeners__||e.__resize_listeners__.forEach(function(t){t.call(e,e)})}function Fft(e){var t=bB(e,"position");(!t||t==="static")&&(e.style.position="relative"),e.__resize_old_position__=t,e.__resize_last__={};var r=vv("div",{className:"resize-triggers"}),n=vv("div",{className:"resize-expand-trigger"}),i=vv("div"),o=vv("div",{className:"resize-contract-trigger"});n.appendChild(i),r.appendChild(n),r.appendChild(o),e.appendChild(r),e.__resize_triggers__={triggers:r,expand:n,expandChild:i,contract:o},jP(e),e.addEventListener("scroll",GP,!0),e.__resize_last__={width:e.offsetWidth,height:e.offsetHeight}}function jP(e){var t=e.__resize_triggers__,r=t.expand,n=t.expandChild,i=t.contract,o=i.scrollWidth,a=i.scrollHeight,s=r.offsetWidth,l=r.offsetHeight,u=r.scrollWidth,c=r.scrollHeight;i.scrollLeft=o,i.scrollTop=a,n.style.width=s+1+"px",n.style.height=l+1+"px",r.scrollLeft=u,r.scrollTop=c}var ra=function(){return ra=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},ra.apply(this,arguments)},$ft=["getWidth","getHeight","getDom","getOption","resize","dispatchAction","convertToPixel","convertFromPixel","containPixel","getDataURL","getConnectedDataURL","appendData","clear","isDisposed","dispose"];function Bft(e){return t=Object.create(null),$ft.forEach(function(r){t[r]=function(n){return function(){for(var i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];if(!e.value)throw new Error("ECharts is not initialized yet.");return e.value[n].apply(e.value,i)}}(r)}),t;var t}var zft={autoresize:Boolean},Vft={loading:Boolean,loadingOptions:Object},Uft=/^on[^a-z]/,Wft=function(e){return Uft.test(e)},px=[],_h=[];(function(e,t){if(e&&typeof document<"u"){var r,n=t.prepend===!0?"prepend":"append",i=t.singleTag===!0,o=typeof t.container=="string"?document.querySelector(t.container):document.getElementsByTagName("head")[0];if(i){var a=px.indexOf(o);a===-1&&(a=px.push(o)-1,_h[a]={}),r=_h[a]&&_h[a][n]?_h[a][n]:_h[a][n]=s()}else r=s();e.charCodeAt(0)===65279&&(e=e.substring(1)),r.styleSheet?r.styleSheet.cssText+=e:r.appendChild(document.createTextNode(e))}function s(){var l=document.createElement("style");if(l.setAttribute("type","text/css"),t.attributes)for(var u=Object.keys(t.attributes),c=0;c<u.length;c++)l.setAttribute(u[c],t.attributes[u[c]]);var f=n==="prepend"?"afterbegin":"beforeend";return o.insertAdjacentElement(f,l),l}})("x-vue-echarts{display:block;width:100%;height:100%}",{});var Gft="ecTheme",Tf=fk({name:"echarts",props:ra(ra({option:Object,theme:{type:[Object,String]},initOptions:Object,updateOptions:Object,group:String,manualUpdate:Boolean},zft),Vft),inheritAttrs:!1,setup:function(e,t){var r=t.attrs,n=Ag(),i=Ag(),o=Ag(),a=xn("ecTheme",null),s=xn("ecInitOptions",null),l=xn("ecUpdateOptions",null),u=Qw(e),c=u.autoresize,f=u.manualUpdate,h=u.loading,d=u.loadingOptions,p=Ze(function(){return o.value||e.option||null}),v=Ze(function(){return e.theme||Pr(a)||{}}),m=Ze(function(){return e.initOptions||Pr(s)||{}}),g=Ze(function(){return e.updateOptions||Pr(l)||{}}),_=Ze(function(){return function(C){var E={};for(var M in C)Wft(M)||(E[M]=C[M]);return E}(r)}),b=vk().proxy.$listeners;function w(C){if(n.value){var E=i.value=rit(n.value,v.value,m.value);e.group&&(E.group=e.group);var M=b;M||(M={},Object.keys(r).filter(function(D){return D.indexOf("on")===0&&D.length>2}).forEach(function(D){var B=D.charAt(2).toLowerCase()+D.slice(3);B.substring(B.length-4)==="Once"&&(B="~".concat(B.substring(0,B.length-4))),M[B]=r[D]})),Object.keys(M).forEach(function(D){var B=M[D];if(B){var V=D.toLowerCase();V.charAt(0)==="~"&&(V=V.substring(1),B.__once__=!0);var F=E;if(V.indexOf("zr:")===0&&(F=E.getZr(),V=V.substring(3)),B.__once__){delete B.__once__;var G=B;B=function(){for(var Z=[],q=0;q<arguments.length;q++)Z[q]=arguments[q];G.apply(void 0,Z),F.off(V,B)}}F.on(V,B)}}),c.value?zd(function(){E&&!E.isDisposed()&&E.resize(),x()}):x()}function x(){var D=C||p.value;D&&E.setOption(D,g.value)}}function T(){i.value&&(i.value.dispose(),i.value=void 0)}var S=null;So(f,function(C){typeof S=="function"&&(S(),S=null),C||(S=So(function(){return e.option},function(E,M){E&&(i.value?i.value.setOption(E,ra({notMerge:E.value!==(M==null?void 0:M.value)},g.value)):w())},{deep:!0}))},{immediate:!0}),So([v,m],function(){T(),w()},{deep:!0}),qC(function(){e.group&&i.value&&(i.value.group=e.group)});var k=Bft(i);return function(C,E,M){var x=xn("ecLoadingOptions",{}),D=Ze(function(){return ra(ra({},Pr(x)),M==null?void 0:M.value)});qC(function(){var B=C.value;B&&(E.value?B.showLoading(D.value):B.hideLoading())})}(i,h,d),function(C,E,M){var x=null;So([M,C,E],function(D,B,V){var F=D[0],G=D[1],Z=D[2];F&&G&&Z&&(x=f_(function(){G.resize()},100),Oft(F,x)),V(function(){x&&F&&Rft(F,x)})})}(i,c,n),XD(function(){w()}),N1(T),ra({chart:i,root:n,setOption:function(C,E){e.manualUpdate&&(o.value=C),i.value?i.value.setOption(C,E||{}):w(C)},nonEventAttrs:_},k)},render:function(){var e=ra({},this.nonEventAttrs);return e.ref="root",e.class=e.class?["echarts"].concat(e.class):"echarts",gk("x-vue-echarts",e)}});Yr([_f,Bp,zp,wf,bf,Sf,Vp,pft,Up]);const jft={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},components:{VChart:Tf},props:{rgk:Number,workload:Number,wspd:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{modHist(){return this.userStore.regionModifiers2.hasOwnProperty(this.rgk)||(this.userStore.regionModifiers2[this.rgk]=[0]),this.userStore.regionModifiers2[this.rgk].map(Number).filter(t=>!isNaN(t)).sort((t,r)=>r-t)},modTimes(){const e=this.modHist.length,t={};for(let r=0;r<this.modHist.length;r++){const n=this.modHist[r];t[n]=100*(r+1)/e}return t},modSorted(){return Object.keys(this.modTimes).map(Number).sort((t,r)=>t-r)},medianModifier(){let e=0;const t=this.modHist.length;if(t%2)e=modHist[(t-1)/2];else{const r=this.modHist[(t-1-1)/2],n=this.modHist[(t-1+1)/2];e=(r+n)/2}return console.log("medianModifier",t,e),this.workload*(2-e/100)},tierModifiers(){const e=[];let t=0;const r=this.workload,n=2*r,i=Math.ceil(r/this.wspd),o=Math.ceil(n/this.wspd);for(let a=i;a<=o;a++){const s=Math.max(2-this.wspd*a/r,0),l=r*(2-s),u=this.userStore.chanceAtModifier(this.rgk,s*100),c=u-t;e.push({wld:l,mod:s,tier:a,time:c}),t=u}return e},chartDataLine(){const e=[];for(let t=0;t<1001;t++){const r=t/10,n=this.workload*(2-r/100),i=this.userStore.chanceAtModifier(this.rgk,r),o=n/this.wspd;e.push([r,n,i,o])}return e},chartDataPoints(){const e=[];if(this.userStore.modHists[this.rgk]==null)return e;const t=this.userStore.modHists[this.rgk].length;for(let r=0;r<t;r++){const n=this.userStore.modHists[this.rgk][r],i=100*r/(t-1);e.push([i,n])}return e},chartColorRanges(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push({lte:t,gt:n}),t=n}return e},chartColorRangesWorkload(){const e=[];let t=this.workload;for(const r of this.tierModifiers){const n=r.wld;e.push({gt:t,lte:n}),t=n}return e},chartBands(){const e=[];let t=100;for(const r of this.tierModifiers){const n=r.mod*100;e.push([{name:r.tier,xAxis:t},{xAxis:n}]),t=n}return console.log("chartBands",e),e},chartOption(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:[{name:"workload",nameGap:22,min:"dataMin",max:"dataMax",nameLocation:"center",splitLine:{show:!1},boundaryGap:["10%","10%"]}],yAxis:{name:"chance",nameGap:10,type:"value",axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},legend:{show:!0},series:[{data:this.chartDataLine,encode:{y:2,x:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{y:0,x:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2];return`${e[0].value[3]*10} minute tier<br/>workload \u2264 ${r.toFixed(1)}<br/>modifier \u2265 ${t.toFixed(1)}<br/>chance ${n.toFixed(1)}%`}},legend:{show:!1}}},chartOption2(){return{grid:{left:30,top:30,right:30,bottom:40},xAxis:{name:"chance %",nameLocation:"center",nameGap:22,type:"value",min:0,max:100,axisLine:{onZero:!1},axisLabel:{},splitLine:{show:!1},axisPointer:{snap:!0}},yAxis:[{name:"modifier",nameGap:10,min:"dataMin",max:"dataMax",splitLine:{show:!1}}],legend:{},series:[{data:this.chartDataLine,encode:{x:2,y:0,tooltip:[0,1,2]},type:"line",showSymbol:!1},{data:this.chartDataPoints,encode:{x:0,y:1},type:"scatter",symbolSize:5,color:"gray"}],visualMap:{show:!1,seriesIndex:0,dimension:0,pieces:this.chartColorRanges,color:["#cc3","#c22"]},tooltip:{trigger:"axis",axisPointer:{axis:"y"},formatter:function(e){const t=e[0].value[0],r=e[0].value[1],n=e[0].value[2],i=e[0].value[3];return`${n.toFixed(1)}% chance to get<br/>${t.toFixed(1)} or more modifier<br/>${r.toFixed(1)} or less workload<br/>${wt(i*10,1)} \u2192 ${Math.ceil(i)*10} minute cycle`},textStyle:{fontSize:11}},legend:{show:!1}}}},methods:{formatFixed:wt,updStore(e){this.userStore.regionModifiers2[this.rgk]=e.split(",")},spaceSep(e,t){return wt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")}}},_u=e=>(Xe("data-v-04376293"),e=e(),Ye(),e),Hft=N(" Observations: "),Xft=_u(()=>y("abbr",{class:"tooltip",title:"Enter comma-separated modifier values (0..100 range) observed evenly across all worker-active time. The order does not matter, but repeat occurence of same value does. You can sneak in newlines and comments like 'evening,0,0.1,2,morning,3,22,0' - text will be stored, but ignored in calculations."},"\u2139\uFE0F",-1)),Yft=_u(()=>y("br",null,null,-1)),qft=["value"],Zft=_u(()=>y("span",{style:{"line-height":"200%"}},"Breakpoints:",-1)),Kft={class:"fsxs tar"},Jft=_u(()=>y("th",null,"work time",-1)),Qft=_u(()=>y("th",null,"workload \u2264",-1)),tht=_u(()=>y("th",null,"modifier \u2265",-1)),eht=_u(()=>y("th",null,"chance",-1));function rht(e,t,r,n,i,o){const a=Qt("v-chart");return I(),O(j,null,[Hft,Xft,Yft,y("textarea",{value:this.userStore.regionModifiers2[this.rgk],onInput:t[0]||(t[0]=s=>o.updStore(s.target.value)),class:"multiline"},`
  `,40,qft),y("div",null,[Et(a,{class:"chart hmid",option:o.chartOption2},null,8,["option"])]),Zft,y("table",Kft,[y("tr",null,[Jft,(I(!0),O(j,null,Ct(o.tierModifiers.filter(s=>s.time),s=>(I(),O("td",null,A(10*s.tier)+" min",1))),256))]),y("tr",null,[Qft,(I(!0),O(j,null,Ct(o.tierModifiers.filter(s=>s.time),s=>(I(),O("td",null,A(o.formatFixed(s.wld,2)),1))),256))]),y("tr",null,[tht,(I(!0),O(j,null,Ct(o.tierModifiers.filter(s=>s.time),s=>(I(),O("td",null,A(o.formatFixed(100*s.mod,2)),1))),256))]),y("tr",null,[eht,(I(!0),O(j,null,Ct(o.tierModifiers.filter(s=>s.time),s=>(I(),O("td",null,A(o.formatFixed(s.time,2))+"%",1))),256))])])],64)}const HP=be(jft,[["render",rht],["__scopeId","data-v-04376293"]]);const nht={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},components:{FloatingModifierEdit:HP},props:{workerEditing:Object,workerInitial:Object,show:{type:Boolean,default:!1}},computed:{newProfit(){return this.profit(this.workerEditing),this.profit(this.workerEditing)},initialProfit(){return this.profit(this.workerInitial)},currentWspdBonus(){var e="farm";if(this.gameStore.jobIsWorkshop(this.workerEditing.job)){const r=this.workerEditing.job.hk;e=this.userStore.userWorkshops[r].industry}return this.gameStore.wspdBonus(this.workerEditing,e)},statRank(){return this.gameStore.workerStatRank(this.workerEditing)}},data:()=>({wasChanged:!1,showChartPane:!1,prerelease_charkind:!0,prerelease_skillicon:!1}),watch:{workerEditing:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerInitial)},deep:!0},workerInitial:{handler(e,t){this.wasChanged=JSON.stringify(e)!==JSON.stringify(this.workerEditing)},deep:!0}},methods:{makeIconSrc:Dn,formatFixed:wt,randBetween:hs,levelup:pd,spaceSep(e,t){return wt(e*1e6,0,t).replace(/\B(?=(\d{3})+(?!\d))/g," ")},revert(){for(const[e,t]of Object.entries(this.workerInitial))typeof t=="object"?this.workerEditing[e]=JSON.parse(JSON.stringify(t)):this.workerEditing[e]=t},profit(e){if(this.gameStore.jobIsPz(e.job)){const t=this.gameStore.workerStatsOnPlantzone(e);return this.gameStore.profitPzTownStats(e.job.pzk,e.tnk,t.wspd,t.mspd,t.luck,this.gameStore.isGiant(e.charkey)).priceDaily}if(this.gameStore.jobIsWorkshop(e.job)){const t=e.job.hk,r=this.userStore.userWorkshops[t];return this.gameStore.profitWorkshopWorker(t,r,e).priceDaily}},maxSkillsAtLevel(e){return 1+Math.floor(e/5)},suggestBestSkills(e,t){const r=this.maxSkillsAtLevel(e),n={0:{skills:[]}},i=["wspd"];t&&i.push("wspd_farm");const o=[];for(const[c,f]of Object.entries(this.gameStore.skillData))i.some(h=>f.hasOwnProperty(h)&&o.push({key:c,amount:f[h],mspd:f.hasOwnProperty("mspd")?f.mspd:0}));o.sort(function(c,f){return f.amount!=c.amount?f.amount-c.amount:f.mspd-c.mspd});for(let c=1;c<=r;c++){const f=o.slice(0,c).map(({key:d})=>d),h=this.profit({...this.workerEditing,skills:f});if(n[c]={skills:f,profit:h},f.every(d=>!this.gameStore.skillData[d].hasOwnProperty("mspd"))){const d=[...f],p=o.filter(v=>v.mspd>0);if(p.length>0){d[d.length-1]=p[0];const v=this.profit({...this.workerEditing,skills:d});v>h&&(n[c]={skills:d,profit:v},console.log("using wmSkill"))}}}console.log("wBonuses",n);const a=["mspd","luck"],s=new Set;for(const[c,f]of Object.entries(this.gameStore.skillData))a.some(d=>f.hasOwnProperty(d))&&s.add(c);console.log("mlSkills",s);const l=[n[r]],u=[];for(let c=1;c<=r;c++){const f=[...n[r-c].skills,...u],h=[];for(const d of s){if(n[r-c].skills.some(m=>m==d))continue;const p=[...f,d],v=this.profit({...this.workerEditing,skills:p});h.push({sk:d,profit:v})}if(h.length>0){h.sort((v,m)=>m.profit-v.profit);const d=h[0].sk,p=[...f,d];l[c]={skills:p,profit:h[0].profit},u.push(d),s.delete(d)}else u.push(0)}if(l.sort((c,f)=>f.profit-c.profit),l.length>0){const c=new Set(l[0].skills);console.log(c);const f=new Array(c.size);for(let d=0;d<r;d++){const p=String(this.workerEditing.skills[d]);c.has(p)&&(f[d]=Number(p),c.delete(p))}console.log(this.workerEditing.skills,c);const h=[...c];for(let d=0;d<r;d++)f[d]==null&&(f[d]=Number(h.shift()),document.querySelector("#skill"+d).classList.add("anim"),setTimeout(()=>{document.querySelector("#skill"+d).classList.remove("anim")},500));this.workerEditing.skills=f}else console.log("worker skills optimization failed")},recalcStats(e,t){if(this.workerEditing.level>1){const r=t-1,n=this.gameStore.workerStatic[this.workerEditing.charkey],i=this.gameStore.workerStatic[e],o=this.workerEditing.wspdSheet*1e6-n.wspd,a=i.wspd_lo*r,s=i.wspd_hi*r,l=a+(s-a)*this.statRank.wspd_rank,u=i.mspd_lo*r,c=i.mspd_hi*r,f=u+(c-u)*this.statRank.mspd_rank,h=this.workerEditing.luckSheet*1e4-n.luck,d=i.luck_lo*r,p=i.luck_hi*r,v=d+(p-d)*this.statRank.luck_rank;console.log(`recalculating levelups: 
        ${i.wspd/1e6}+${r}*[${i.wspd_lo/1e6}\u2026${i.wspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F528} 
        ${i.mspd/100}+${r}*[${i.mspd_lo/1e6}\u2026${i.mspd_hi/1e6}]*${Math.round(this.statRank.wspd_rank*1e3)/10}%\u{1F9B6} 
        ${i.luck/1e4}+${r}*[${i.luck_lo/1e4}\u2026${i.luck_hi/1e4}]*${Math.round(this.statRank.luck_rank*1e3)/10}%\u{1F340}`),this.workerEditing.wspdSheet+=(i.wspd-n.wspd+l-o)/1e6,this.workerEditing.mspdSheet=i.mspd/100*(1+f/1e6),this.workerEditing.luckSheet+=(i.luck-n.luck+v-h)/1e4}else this.workerEditing.wspdSheet+=(stat_new.wspd-stat_old.wspd)/1e6,this.workerEditing.mspdSheet=stat_new.mspd*(this.workerEditing.mspdSheet/stat_old.mspd),this.workerEditing.luckSheet+=(stat_new.luck-stat_old.luck)/1e4,pd(this.gameStore,this.workerEditing,t);this.workerEditing.wspdSheet=Math.round(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.round(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.round(this.workerEditing.luckSheet*100)/100,this.workerEditing.charkey=e,this.workerEditing.level=t,this.limitSkillCount()},limitSkillCount(){const e=1+Math.floor(this.workerEditing.level/5);this.workerEditing.skills.length>e&&this.workerEditing.skills.splice(e)},levelupMe(e){this.limitSkillCount(),pd(this.gameStore,this.workerEditing,e),this.workerEditing.wspdSheet=Math.floor(this.workerEditing.wspdSheet*100)/100,this.workerEditing.mspdSheet=Math.floor(this.workerEditing.mspdSheet*100)/100,this.workerEditing.luckSheet=Math.floor(this.workerEditing.luckSheet*100)/100},setStatsRandom(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=hs(t.wspd_lo,t.wspd_hi),n+=hs(t.mspd_lo,t.mspd_hi),i+=hs(t.luck_lo,t.luck_hi);let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100},setStatsMedian(){const e=this.workerEditing,t=this.gameStore.workerStatic[e.charkey];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=e.level;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);e.wspdSheet=Math.round(r/1e6*100)/100,e.mspdSheet=Math.round(o)/100,e.luckSheet=Math.round(i/1e4*100)/100}}},yr=e=>(Xe("data-v-ece6fae4"),e=e(),Ye(),e),iht={key:0,id:"columns"},oht={id:"worker"},aht={class:"borderless"},sht=yr(()=>y("td",null,"name:",-1)),lht={style:{float:"right"}},uht=yr(()=>y("td",null,"type:",-1)),cht=["value"],fht=["value"],hht={key:0},dht=yr(()=>y("td",null,"stash:",-1)),pht=["value"],vht=yr(()=>y("td",null,"job:",-1)),ght=N(" idle "),mht={key:0},_ht={key:1},yht=N(" \u270D\uFE0F "),bht=N(" @ "),wht=N("M$/day "),Sht=N("CP "),Tht=N(" [\u{1F33B}] "),kht=yr(()=>y("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139\uFE0F",-1)),Pht={class:"fsxs"},Eht=N(" \u270D\uFE0F "),Cht=N(" @ "),Aht=N("M$/day "),Mht=N("CP "),xht=N(" UNKNOWN_JOBTYPE "),Lht={key:1},Iht=yr(()=>y("td",null,"$/day:",-1)),Oht={key:0},Rht={key:0},Dht={colspan:"2"},Nht={key:0,class:"borderless"},Fht=yr(()=>y("tr",null,[y("th",null,"stats:"),y("th",{class:"fsxs"},"rank"),y("th",null,"sheet"),y("th",null,"+"),y("th",null,"skill"),y("th",null,"="),y("th",null,"final"),y("th")],-1)),$ht={class:"center"},Bht={rowspan:"3"},zht=yr(()=>y("br",null,null,-1)),Vht={class:"fsxs"},Uht=yr(()=>y("td",null,null,-1)),Wht=yr(()=>y("td",null,null,-1)),Ght=yr(()=>y("td",null,"\u{1F528}",-1)),jht={class:"center"},Hht={class:"fsxs"},Xht=yr(()=>y("td",null,null,-1)),Yht=yr(()=>y("td",null,null,-1)),qht=yr(()=>y("td",null,"\u{1F9B6}",-1)),Zht={class:"center"},Kht={class:"fsxs"},Jht=yr(()=>y("td",null,null,-1)),Qht=yr(()=>y("td",null,null,-1)),tdt=yr(()=>y("td",null,"\u{1F340}",-1)),edt={class:"center"},rdt=yr(()=>y("td",null,"skills:",-1)),ndt={style:{float:"right"}},idt=["disabled"],odt={colspan:"2",s:""},adt=["id","onUpdate:modelValue"],sdt=["value"],ldt=["src"],udt=N(" use floating modifier for this regionGroup "),cdt={key:0,id:"chartPane"};function fdt(e,t,r,n,i,o){const a=Qt("FloatingModifierEdit");return r.workerEditing?(I(),O("div",iht,[y("div",oht,[y("table",aht,[y("tr",null,[sht,y("td",null,[ht(y("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>r.workerEditing.label=s),style:{width:"10em"}},null,512),[[ie,r.workerEditing.label]]),N(" lvl."+A(r.workerEditing.level)+" ",1),y("button",{onClick:t[1]||(t[1]=s=>o.levelupMe(r.workerEditing.level+1))},"\u{1F815}"),y("button",{onClick:t[2]||(t[2]=s=>o.recalcStats(r.workerEditing.charkey,r.workerEditing.level-1))},"\u{1F817}"),tt("",!0),y("div",lht,[e.wasChanged&&r.workerInitial?(I(),O("button",{key:0,onClick:t[4]||(t[4]=s=>o.revert())},"revert")):tt("",!0)])])]),y("tr",null,[uht,y("td",null,[e.prerelease_charkind?(I(),O("select",{key:0,onChange:t[5]||(t[5]=s=>o.recalcStats(s.target.value,r.workerEditing.level)),value:r.workerEditing.charkey},[(I(!0),O(j,null,Ct(n.gameStore.workerStatic,(s,l)=>(I(),O("option",{value:l},A(l)+" "+A(n.gameStore.uloc.char[l])+" "+A(s.wspd/1e6)+" / "+A(s.mspd/100)+" / "+A(s.luck/1e4),9,fht))),256))],40,cht)):(I(),O(j,{key:1},[N(A(n.gameStore.uloc.char[r.workerEditing.charkey]),1)],64))])]),r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)?(I(),O("tr",hht,[dht,y("td",null,[ht(y("select",{"onUpdate:modelValue":t[6]||(t[6]=s=>r.workerEditing.job.storage=s)},[(I(!0),O(j,null,Ct(n.gameStore.townsWithRedirectableStorage,s=>(I(),O("option",{value:s},A(n.gameStore.uloc.node[s]),9,pht))),256))],512),[[ar,r.workerEditing.job.storage]])])])):tt("",!0),y("tr",null,[vht,y("td",null,[n.gameStore.jobIsIdle(r.workerEditing.job)?(I(),O(j,{key:0},[ght],64)):n.gameStore.jobIsPz(r.workerEditing.job)?(I(),O(j,{key:1},[N(A(n.gameStore.plantzoneName(r.workerEditing.job.pzk))+" / ",1),n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(I(),O("span",mht,[N(" ~"+A(o.formatFixed(n.userStore.medianWorkloads[r.workerEditing.job.pzk],2))+" ",1),y("span",{onClick:t[7]||(t[7]=s=>e.showChartPane=!e.showChartPane)},A(e.showChartPane?"\u25C0":"\u25B6"),1)])):(I(),O("span",_ht,A(o.formatFixed(n.gameStore.plantzones[r.workerEditing.job.pzk].activeWorkload,2)),1))],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(I(),O(j,{key:2},[yht,ht(y("input",{class:"workshop-label-input","onUpdate:modelValue":t[8]||(t[8]=s=>r.workerEditing.job[3]=s)},null,512),[[ie,r.workerEditing.job[3]]]),bht,ht(y("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[9]||(t[9]=s=>r.workerEditing.job[1]=s)},null,512),[[ie,r.workerEditing.job[1],void 0,{number:!0}]]),wht,ht(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[10]||(t[10]=s=>r.workerEditing.job[2]=s)},null,512),[[ie,r.workerEditing.job[2],void 0,{number:!0}]]),Sht],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(I(),O(j,{key:3},[Tht],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(I(),O(j,{key:4},[N(A(n.gameStore.workerJobDescription(r.workerEditing))+" / "+A(n.userStore.userWorkshops[r.workerEditing.job.hk].manualWorkload)+" ",1),kht,y("span",Pht," [type: "+A(n.userStore.userWorkshops[r.workerEditing.job.hk].industry)+"] ",1)],64)):n.gameStore.jobIsCustom(r.workerEditing.job)?(I(),O(j,{key:5},[Eht,ht(y("input",{class:"workshop-label-input","onUpdate:modelValue":t[11]||(t[11]=s=>r.workerEditing.job[3]=s)},null,512),[[ie,r.workerEditing.job[3]]]),Cht,ht(y("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[12]||(t[12]=s=>r.workerEditing.job[1]=s)},null,512),[[ie,r.workerEditing.job[1],void 0,{number:!0}]]),Aht,ht(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[13]||(t[13]=s=>r.workerEditing.job[2]=s)},null,512),[[ie,r.workerEditing.job[2],void 0,{number:!0}]]),Mht],64)):(I(),O(j,{key:6},[xht],64))])]),r.workerEditing.job?(I(),O("tr",Lht,[Iht,y("td",null,[n.gameStore.jobIsPz(r.workerEditing.job)?(I(),O(j,{key:0},[N(A(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(I(),O("span",Oht,[N(" \u2192 "+A(o.spaceSep(o.newProfit))+" ",1),y("span",{class:xr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},A(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):tt("",!0)],64)):n.gameStore.jobIsFarming(r.workerEditing.job)?(I(),O(j,{key:1},[N(A(o.spaceSep(n.userStore.workerIncome(r.workerEditing))),1)],64)):n.gameStore.jobIsWorkshop(r.workerEditing.job)?(I(),O(j,{key:2},[N(A(o.spaceSep(o.initialProfit))+" ",1),o.newProfit!=o.initialProfit?(I(),O("span",Rht,[N(" \u2192 "+A(o.spaceSep(o.newProfit))+" ",1),y("span",{class:xr({greenText:o.newProfit>o.initialProfit,redText:o.newProfit<o.initialProfit,fsxs:1})},A(o.formatFixed(100*(o.newProfit-o.initialProfit)/o.initialProfit,2,!0))+"% ",3)])):tt("",!0)],64)):tt("",!0)])])):tt("",!0),y("tr",null,[y("td",Dht,[n.gameStore.ready?(I(),O("table",Nht,[Fht,y("tr",$ht,[y("td",Bht,[y("button",{onClick:t[14]||(t[14]=s=>o.setStatsMedian()),class:"fsxxs"},"median"),zht,y("button",{onClick:t[15]||(t[15]=s=>o.setStatsRandom()),class:"fsxxs"},"random")]),y("td",Vht,A(o.formatFixed(o.statRank.wspd_rank*100,1))+"% ",1),y("td",null,[ht(y("input",{type:"number","onUpdate:modelValue":t[16]||(t[16]=s=>r.workerEditing.wspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[ie,r.workerEditing.wspdSheet]])]),Uht,y("td",null,A(o.formatFixed(o.currentWspdBonus,2)),1),Wht,y("td",null,A(o.formatFixed(r.workerEditing.wspdSheet+o.currentWspdBonus,2)),1),Ght]),y("tr",jht,[y("td",Hht,A(o.formatFixed(o.statRank.mspd_rank*100,1))+"% ",1),y("td",null,[ht(y("input",{type:"number","onUpdate:modelValue":t[17]||(t[17]=s=>r.workerEditing.mspdSheet=s),step:"0.01",class:"w5em right"},null,512),[[ie,r.workerEditing.mspdSheet]])]),Xht,y("td",null,A(o.formatFixed(n.gameStore.mspdBonus(r.workerEditing),1))+"%",1),Yht,y("td",null,A(o.formatFixed(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100*(r.workerEditing.mspdSheet/(n.gameStore.workerStatic[r.workerEditing.charkey].mspd/100)+n.gameStore.mspdBonus(r.workerEditing)/100),2)),1),qht]),y("tr",Zht,[y("td",Kht,A(o.formatFixed(o.statRank.luck_rank*100,1))+"% ",1),y("td",null,[ht(y("input",{type:"number","onUpdate:modelValue":t[18]||(t[18]=s=>r.workerEditing.luckSheet=s),step:"0.01",class:"w5em right"},null,512),[[ie,r.workerEditing.luckSheet]])]),Jht,y("td",null,A(o.formatFixed(n.gameStore.luckBonus(r.workerEditing),2)),1),Qht,y("td",null,A(o.formatFixed(r.workerEditing.luckSheet+n.gameStore.luckBonus(r.workerEditing),2)),1),tdt])])):tt("",!0)])]),y("tr",edt,[rdt,y("td",null,[y("div",ndt,[y("button",{disabled:!(r.workerEditing.job&&r.workerEditing.job.pzk in n.userStore.pzJobs),onClick:t[19]||(t[19]=s=>o.suggestBestSkills(r.workerEditing.level,!0))}," optimize ",8,idt)])])]),(I(),O(j,null,Ct(9,s=>y("tr",null,[y("td",odt,[ht(y("select",{id:"skill"+(s-1),"onUpdate:modelValue":l=>r.workerEditing.skills[s-1]=l,class:"w30em animable",style:{width:"30em"}},[(I(!0),O(j,null,Ct(n.gameStore.availableSkillPool(r.workerEditing.skills,r.workerEditing.skills[s-1]),l=>(I(),O("option",{value:l},A(n.gameStore.uloc.skill[l]+" / "+n.gameStore.uloc.skilldesc[l]),9,sdt))),256))],8,adt),[[ar,r.workerEditing.skills[s-1]]]),e.prerelease_skillicon?(I(),O("img",{key:0,src:`data/icons/skill/${r.workerEditing.skills[s-1]}.png`,width:"22",height:"22"},null,8,ldt)):tt("",!0)])])),64))]),n.gameStore.ready&&r.workerEditing.job&&n.gameStore.jobIsPz(r.workerEditing.job)&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.allowFloating?(I(),O(j,{key:0},[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[20]||(t[20]=s=>n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]=s)},null,512),[[sr,n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]]]),udt],64)):tt("",!0)]),e.showChartPane&&n.gameStore.ready&&r.workerEditing.job&&r.workerEditing.job.pzk&&r.workerEditing.job.pzk in n.gameStore.plantzones&&n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup&&n.userStore.useFloatingModifiers[n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup]?(I(),O("div",cdt,[Et(a,{rgk:n.gameStore.plantzones[r.workerEditing.job.pzk].regiongroup,wspd:r.workerEditing.wspdSheet+o.currentWspdBonus,workload:n.gameStore.plantzones[r.workerEditing.job.pzk].workload,show:!0},null,8,["rgk","wspd","workload"])])):tt("",!0)])):tt("",!0)}const wB=be(nht,[["render",fdt],["__scopeId","data-v-ece6fae4"]]);const hdt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{w:Object,defaultRedirect:Number,show:{type:Boolean,default:!1}},data:()=>({customProfit:0,customCP:0,customLabel:"",selectedRedirect:1}),watch:{show:function(e){e&&(this.selectedRedirect=this.w.tnk)}},methods:{makeIconSrc:Dn,formatFixed:wt,assignWorkerPz(e,t){console.log("assigning to",this.selectedRedirect),this.userStore.assignWorker(e,{kind:"plantzone",pzk:t,storage:this.selectedRedirect}),this.$emit("update:show",!1)},assignWorkerFm(e){this.userStore.assignWorker(e,"farming"),this.$emit("update:show",!1)},assignWorkerCustom(e){this.userStore.assignWorker(e,["workshop",this.customProfit,this.customCP,this.customLabel]),this.$emit("update:show",!1)},assignWorkerWorkshop(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:t,recipe:void 0}),this.$emit("update:show",!1)},workshopBusy(e){return this.userStore.userWorkers.some(t=>t.job&&t.job.kind=="workshop"&&t.job.hk==e)}},computed:{thisFarmSelectionEntry(){return this.gameStore.farmSelectionEntry(this.gameStore.tnk2tk(this.w.tnk))},addBedHereInfo(){return this.gameStore.addBedInfo(this.gameStore.tnk2tk(this.w.tnk))},workerNearestCpPlantzonesProfit(){const e=[];if(!this.w)return e;const t=Date.now(),r=16,n=this.gameStore.workerStatsOnPlantzone(this.w),i=this.gameStore.tnk2tk(this.w.tnk),o=this.gameStore.tnk2tk(this.selectedRedirect);return this.gameStore.dijDiscountedNearestPlantzones(this.w.tnk,80).forEach(([s,l,u])=>{if(this.userStore.workedPlantzones.has(s.toString()))return;const c=this.gameStore.pzSelectionEntry(s,i,this.w.tnk,l,u,this.w,n,o);c.profit.dist>1e6||e.push(c)}),e.sort((s,l)=>l.dailyPerCp-s.dailyPerCp),console.log("cpt: workerNearestCpPlantzonesProfit took",Date.now()-t,"ms"),e.slice(0,r)},workerWorkshopsProfit(){const e=[];if(!this.w)return e;const t=this.gameStore.tnk2tk(this.w.tnk),r=Date.now(),n=16,i=new Set([...this.userStore.autotakenNodes]);for(const[o,a]of Object.entries(this.userStore.userWorkshops)){const s=Number(o);if(this.workshopBusy(s)&&a.industry!="mass"||this.gameStore.houseDistance(this.w.tnk,s)>1e6)continue;const l=this.gameStore.houseInfo[s].affTown,u=this.gameStore.tk2tnk(l),c=this.userStore.occupiedWorkshops.has(Number(s))?0:a.manualCp,[f,h]=this.gameStore.dijkstraPath(u,this.w.tnk,i),d=this.gameStore.workshopSelectionEntry(s,t,this.w.tnk,f,this.w,h,c);e.push(d)}return e.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),console.log("cpt: workerWorkshopsProfit took",Date.now()-r,"ms"),console.log("workerWorkshopsProfit",e),e.slice(0,n)}}},wn=e=>(Xe("data-v-a248f925"),e=e(),Ye(),e),ddt={class:"spaced-columns"},pdt=N(" stash: "),vdt=["value"],gdt=wn(()=>y("th",null,"node",-1)),mdt=wn(()=>y("th",null,"workload",-1)),_dt=wn(()=>y("th",null,"walk",-1)),ydt=wn(()=>y("th",null,"+M$/day",-1)),bdt=wn(()=>y("th",null,"+CP",-1)),wdt=wn(()=>y("th",null,"M$/day/CP",-1)),Sdt=wn(()=>y("th",null,"action",-1)),Tdt=["href"],kdt=N(A(" ")+" "),Pdt=["src"],Edt={class:"tac"},Cdt={class:"tac"},Adt={class:"tac"},Mdt={class:"tac"},xdt=["title"],Ldt=N("+"),Idt=["title"],Odt={class:"tac"},Rdt=["onClick"],Ddt=wn(()=>y("tr",null,[y("td",{colspan:"7",class:"center"},"Special jobs (not node based)")],-1)),Ndt={key:0},Fdt=wn(()=>y("td",null,[N(" \u{1F33B} Farm "),y("abbr",{title:"see Settings page: singleWorkerProfit = (fullWorkersProfit - noWorkersProfit) / 10",class:"tooltip"},"\u2139\uFE0F")],-1)),$dt=wn(()=>y("td",{class:"tac"},"x",-1)),Bdt=wn(()=>y("td",{class:"tac"},"x",-1)),zdt={class:"tac"},Vdt={class:"tac"},Udt=["title"],Wdt={class:"tac"},Gdt={class:"tac"},jdt={class:"tac"},Hdt={class:"tac"},Xdt={class:"tac"},Ydt=["title"],qdt=N("+"),Zdt={class:"tooltip",title:`cost of operating the workshop
(see Settings > \u{1F3ED}Workshops)`},Kdt=N("+"),Jdt=["title"],Qdt={class:"tac"},tpt=["onClick"],ept=N(" \u270D\uFE0F Custom job "),rpt=wn(()=>y("abbr",{title:"enter daily profit and CP cost for this specific job. these are per worker - so for Mass Production, divide by worker count manually",class:"tooltip"},"\u2139\uFE0F",-1)),npt={style:{float:"right"}},ipt=N(" \xA0label: "),opt=wn(()=>y("td",{class:"tac"},"x",-1)),apt=wn(()=>y("td",{class:"tac"},"x",-1)),spt={class:"tac"},lpt={class:"tac"},upt=N("+"),cpt=["title"],fpt={class:"tac"};function hpt(e,t,r,n,i,o){const a=Qt("RouterLink");return r.w?(I(),O(j,{key:0},[y("div",ddt,[y("div",null,[N(" Send "+A(r.w.label)+" ( ",1),n.userStore.displayWorkerStatsForPz?(I(),O(j,{key:0},[N(A(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).wspd,2))+"\u{1F528} "+A(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).mspd,2))+"\u{1F9B6} "+A(o.formatFixed(n.gameStore.workerStatsOnPlantzone(r.w).luck,2))+"\u{1F340} ",1)],64)):(I(),O(j,{key:1},[N(A(o.formatFixed(r.w.wspdSheet,2))+"\u{1F528} "+A(o.formatFixed(r.w.mspdSheet,2))+"\u{1F9B6} "+A(o.formatFixed(r.w.luckSheet,2))+"\u{1F340} ",1)],64)),N(" ) where? "+A(o.workerNearestCpPlantzonesProfit.length)+" top untaken nodes near "+A(n.gameStore.uloc.node[r.w.tnk])+": ",1)]),y("div",null,[pdt,ht(y("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.selectedRedirect=s)},[(I(!0),O(j,null,Ct(n.gameStore.townsWithRedirectableStorageSet,s=>(I(),O("option",{value:s},A(n.gameStore.uloc.node[s]),9,vdt))),256))],512),[[ar,e.selectedRedirect]])])]),y("table",null,[y("tr",null,[gdt,mdt,_dt,ydt,bdt,wdt,tt("",!0),Sdt]),(I(!0),O(j,null,Ct(o.workerNearestCpPlantzonesProfit,s=>(I(),O("tr",null,[y("td",null,[y("a",{href:this.userStore.codexNodeUrl+s.pz.key},A(s.pz.name),9,Tdt),(I(!0),O(j,null,Ct(this.gameStore.plantzones[s.pz.key].itemkeys,l=>(I(),O(j,null,[kdt,Et(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:we(()=>[y("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,Pdt)]),_:2},1032,["to"])],64))),256))]),y("td",Edt,A(n.userStore.useFloatingModifiers[s.pz.regiongroup]?"~":"")+A(o.formatFixed(n.userStore.medianWorkloads[s.pz.key],2)),1),y("td",Cdt,A(o.formatFixed(s.profit.dist,0)),1),y("td",Adt,A(o.formatFixed(s.profit.priceDaily,2)),1),y("td",Mdt,[y("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`),class:"tooltip"},A(s.mapCp),9,xdt),Ldt,y("abbr",{title:s.infraTooltip,class:"tooltip"},A(o.formatFixed(s.townCp)),9,Idt),N("="+A(o.formatFixed(s.cp)),1)]),y("td",Odt,A(o.formatFixed(s.dailyPerCp,2)),1),tt("",!0),y("td",null,[y("button",{onClick:l=>o.assignWorkerPz(r.w,s.pz.key)},"assign",8,Rdt)])]))),256)),Ddt,n.userStore.farmingEnable&&n.userStore.workersFarmingCount<10?(I(),O("tr",Ndt,[Fdt,$dt,Bdt,y("td",zdt,A(o.formatFixed(o.thisFarmSelectionEntry.income,2)),1),y("td",Vdt,[y("abbr",{title:o.thisFarmSelectionEntry.infraTooltip,class:"tooltip"},A(o.formatFixed(o.thisFarmSelectionEntry.infraCp)),9,Udt)]),y("td",Wdt,A(o.formatFixed(o.thisFarmSelectionEntry.dailyPerCp,2)),1),tt("",!0),y("td",null,[y("button",{onClick:t[1]||(t[1]=s=>o.assignWorkerFm(r.w))},"assign")])])):tt("",!0),(I(!0),O(j,null,Ct(o.workerWorkshopsProfit,s=>(I(),O("tr",null,[y("td",null," \u{1F3ED} "+A(n.gameStore.uloc.char[s.hk])+" "+A(s.workshop.label),1),y("td",Gdt,A(s.workshop.manualWorkload),1),y("td",jdt,A(o.formatFixed(s.profit.distance,0)),1),y("td",Hdt,A(o.formatFixed(s.profit.priceDaily,2)),1),y("td",Xdt,[y("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`)},A(s.mapCp),9,Ydt),qdt,y("abbr",Zdt,A(s.houseCp),1),Kdt,y("abbr",{title:s.infraTooltip,class:"tooltip"},A(s.townCp),9,Jdt),N("="+A(s.cp),1)]),y("td",Qdt,A(o.formatFixed(s.dailyPerCp,2)),1),tt("",!0),y("td",null,[y("button",{onClick:l=>o.assignWorkerWorkshop(r.w,s.hk)},"assign",8,tpt)])]))),256)),y("tr",null,[y("td",null,[ept,rpt,y("div",npt,[ipt,ht(y("input",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.customLabel=s),class:"workshop-label-input"},null,512),[[ie,e.customLabel]])])]),opt,apt,y("td",spt,[ht(y("input",{type:"number",class:"float4",step:"0.1","onUpdate:modelValue":t[3]||(t[3]=s=>e.customProfit=s)},null,512),[[ie,e.customProfit,void 0,{number:!0}]])]),y("td",lpt,[ht(y("input",{type:"number",class:"float3","onUpdate:modelValue":t[4]||(t[4]=s=>e.customCP=s)},null,512),[[ie,e.customCP,void 0,{number:!0}]]),upt,y("abbr",{title:o.addBedHereInfo.tooltip,class:"tooltip"},A(o.addBedHereInfo.cost),9,cpt),N("="+A(e.customCP+o.addBedHereInfo.cost),1)]),y("td",fpt,A(o.formatFixed(e.customProfit/(e.customCP+o.addBedHereInfo.cost),2)),1),tt("",!0),y("td",null,[y("button",{onClick:t[5]||(t[5]=s=>o.assignWorkerCustom(r.w))},"assign")])])])],64)):tt("",!0)}const dpt=be(hdt,[["render",hpt],["__scopeId","data-v-a248f925"]]),ppt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{tk:String,o:Object,show:{type:Boolean,default:!1}},methods:{formatFixed:wt}},vpt=N(" Connect to nearest town "),gpt=y("tr",null,[y("th",null,"House"),y("th",null,"\u{1F6CF}\uFE0F"),y("th",null,"CP")],-1),mpt=["disabled","onUpdate:modelValue"],_pt=N(" "+A(" ")+" "),ypt=["href"],bpt=["disabled"],wpt=N(" P2W slots \u2192 Total: ");function Spt(e,t,r,n,i,o){return r.o?(I(),O(j,{key:0},[y("h3",null,A(n.gameStore.uloc.town[r.tk])+" lodging config",1),r.tk==619?(I(),O(j,{key:0},[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[sr,n.userStore.activateAncado]]),vpt],64)):tt("",!0),y("table",null,[gpt,(I(!0),O(j,null,Ct(r.o.houses,a=>(I(),O("tr",null,[y("td",null,[ht(y("input",{type:"checkbox",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":s=>n.userStore.lodgingTaken[a.key]=s},null,8,mpt),[[sr,n.userStore.lodgingTaken[a.key]]]),_pt,y("a",{href:"https://bdocodex.com/us/npc/"+a.key},A(n.gameStore.uloc.char[a.key]),9,ypt)]),y("td",null,A(a.lodgingSpaces),1),y("td",null,A(a.CP),1)]))),256)),y("tr",null,[y("td",null,[ht(y("input",{type:"number",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a),class:"short"},null,8,bpt),[[ie,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),wpt]),y("td",null,A(n.userStore.haveLodging.slots.perTown[r.tk]),1),y("td",null,A(n.userStore.haveLodging.cp.perTown[r.tk]),1)])])],64)):tt("",!0)}const Tpt=be(ppt,[["render",Spt]]);const kpt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{tk:Number,show:{type:Boolean,default:!1}},data:()=>({}),computed:{wantLodging(){this.tk in this.userStore.lodgingP2W||(this.userStore.lodgingP2W[this.tk]=0);const e=this.userStore.townWorkers(this.tk).length-this.userStore.lodgingP2W[this.tk]-1;return e>0?e:0},wantStorage(){if(!this.userStore.townsStoreItemkeys[this.tk].size)return 0;this.tk in this.userStore.storageP2W||(this.userStore.storageP2W[this.tk]=0),this.tk in this.userStore.storagePersonal||(this.userStore.storagePersonal[this.tk]=0);const e=this.userStore.townsStoreItemkeys[this.tk].size+this.userStore.storagePersonal[this.tk]-this.userStore.storageP2W[this.tk]-this.userStore.baseStorage;return e>0?e:0},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},storageViewCount(){const e=this.userStore.baseStorage+this.userStore.storageP2W[this.tk]+this.userStore.townsInfra[this.tk].storage;return isNaN(e)?0:e},ingameSortedItems(){const e=[...this.userStore.townsStoreItemkeys[this.tk]];e.sort((n,i)=>{var o=this.gameStore.itemInfo[i].typePriority-this.gameStore.itemInfo[n].typePriority;if(o)return o;var o=this.gameStore.itemInfo[i].grade-this.gameStore.itemInfo[n].grade;return o||i-n});const t=Array(this.userStore.storagePersonal[this.tk]).fill("P"),r=e.concat(t);return e.length&&r.push("F"),r}},methods:{formatFixed:wt,makeIconSrc:Dn,houseCraftPickedTooltip(e){const t=[];return this.userStore.townsInfra[e].indices.forEach((r,n)=>{if(this.userStore.townsInfra[e].states[n]==0)return;const i=this.userStore.townsInfra[e].states[n]==1?"\u{1F4E6}":"\u{1F6CF}\uFE0F";t.push(i+this.gameStore.uloc.char[r])}),t.join(`
`)}}},qr=e=>(Xe("data-v-face1b81"),e=e(),Ye(),e),Ppt={style:{"font-size":"x-large"}},Ept=N(" housing config"),Cpt=N(" Connect to nearest town "),Apt={key:2,class:"section"},Mpt=qr(()=>y("h3",null,"\u{1F6CF}\uFE0F lodging",-1)),xpt=qr(()=>y("br",null,null,-1)),Lpt=N(" - 1 initial"),Ipt=qr(()=>y("br",null,null,-1)),Opt=N(" - "),Rpt=["disabled"],Dpt=N(" from P2W"),Npt=qr(()=>y("br",null,null,-1)),Fpt={key:0},$pt={key:1,class:"red"},Bpt=qr(()=>y("br",null,null,-1)),zpt={class:"section"},Vpt={id:"storageParent"},Upt={id:"storageLeft"},Wpt=qr(()=>y("h3",null,"\u{1F4E6} storage",-1)),Gpt=qr(()=>y("br",null,null,-1)),jpt=N(" + 1 Free slot"),Hpt=qr(()=>y("br",null,null,-1)),Xpt=N(" + "),Ypt=N(" Personal items"),qpt=qr(()=>y("br",null,null,-1)),Zpt=qr(()=>y("span",{class:"markInnate underline"},"initial",-1)),Kpt=qr(()=>y("br",null,null,-1)),Jpt=N(" - "),Qpt=N(" "+A(" ")),t0t=qr(()=>y("span",{class:"markP2W underline"},"from P2W",-1)),e0t=qr(()=>y("br",null,null,-1)),r0t=qr(()=>y("span",{class:"markProvided underline"},"required",-1)),n0t={key:1},i0t={key:2,class:"red"},o0t=qr(()=>y("br",null,null,-1)),a0t=qr(()=>y("span",{class:"markExtra underline"},"extra",-1)),s0t={id:"storageItemList"},l0t={key:0},u0t={key:0,class:"textItem"},c0t={key:1,class:"textItem"},f0t=["title"],h0t=["src"],d0t={class:"fsxs"};function p0t(e,t,r,n,i,o){return r.tk>0?(I(),O(j,{key:0},[tt("",!0),y("p",null,[y("span",Ppt,A(n.gameStore.uloc.town[r.tk]),1),Ept]),r.tk==619?(I(),O(j,{key:1},[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=a=>n.userStore.activateAncado=a)},null,512),[[sr,n.userStore.activateAncado]]),Cpt],64)):tt("",!0),r.tk in n.gameStore.lodgingPerTown?(I(),O("div",Apt,[Mpt,N(" "+A(n.userStore.townWorkingWorkers(r.tk).length)+" used by workers",1),xpt,Lpt,Ipt,Opt,ht(y("input",{type:"number",class:"w3em",min:"0",max:"20",disabled:r.tk==619&&!n.userStore.activateAncado,"onUpdate:modelValue":t[1]||(t[1]=a=>n.userStore.lodgingP2W[r.tk]=a)},null,8,Rpt),[[ie,n.userStore.lodgingP2W[r.tk],void 0,{number:!0}]]),Dpt,Npt,N(" = "+A(n.userStore.townsInfra[r.tk].wantLodging)+" required ",1),n.userStore.townsInfra[r.tk].warnL?(I(),O("span",Fpt,"\u2190 max possible")):tt("",!0),n.userStore.townsInfra[r.tk].errL?(I(),O("span",$pt,"\u2190 too much!")):tt("",!0),Bpt,y("strong",null,A(n.userStore.townsInfra[r.tk].lodging)+" found ",1)])):tt("",!0),y("div",zpt,[y("div",Vpt,[y("div",Upt,[Wpt,N(" "+A(n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size)+" worker items",1),Gpt,n.userStore.townsStoreItemkeys[r.tk]&&n.userStore.townsStoreItemkeys[r.tk].size>0?(I(),O(j,{key:0},[jpt,Hpt],64)):tt("",!0),Xpt,ht(y("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[2]||(t[2]=a=>n.userStore.storagePersonal[r.tk]=a)},null,512),[[ie,n.userStore.storagePersonal[r.tk],void 0,{number:!0}]]),Ypt,qpt,N(" - "+A(n.userStore.baseStorage)+" ",1),Zpt,Kpt,Jpt,ht(y("input",{type:"number",class:"w42em",min:"0",max:"192","onUpdate:modelValue":t[3]||(t[3]=a=>n.userStore.storageP2W[r.tk]=a)},null,512),[[ie,n.userStore.storageP2W[r.tk],void 0,{number:!0}]]),Qpt,t0t,e0t,N(" = "+A(n.userStore.townsInfra[r.tk].wantStorage)+" ",1),r0t,n.userStore.townsInfra[r.tk].warnS?(I(),O("span",n0t,"\u2190 max possible")):tt("",!0),n.userStore.townsInfra[r.tk].errS?(I(),O("span",i0t,"\u2190 too much!")):tt("",!0),o0t,y("strong",null,A(n.userStore.townsInfra[r.tk].storage)+" found",1),N(" \u2192 "+A(n.userStore.townsInfra[r.tk].storage-n.userStore.townsInfra[r.tk].wantStorage)+" ",1),a0t]),y("div",s0t,[(I(!0),O(j,null,Ct(o.storageViewCount,a=>(I(),O(j,null,[a>1&&(a-1)%9==0?(I(),O("br",l0t)):tt("",!0),y("div",{class:xr(["storageCell",{markInnate:0<=a&&a<=n.userStore.baseStorage,markP2W:n.userStore.baseStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk],markProvided:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage,markExtra:n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].wantStorage<a&&a<=n.userStore.baseStorage+n.userStore.storageP2W[r.tk]+n.userStore.townsInfra[r.tk].storage}])},[a-1>o.ingameSortedItems.length?(I(),O("span",u0t)):isNaN(o.ingameSortedItems[a-1])?(I(),O("span",c0t,A(o.ingameSortedItems[a-1]),1)):(I(),O("abbr",{key:2,title:o.ingameSortedItems[a-1]+" "+n.gameStore.uloc.item[o.ingameSortedItems[a-1]]},[y("img",{src:o.makeIconSrc(o.ingameSortedItems[a-1]),class:"iconitem"},null,8,h0t)],8,f0t))],2)],64))),256))])])]),y("details",null,[y("summary",null,"Found cost: "+A(n.userStore.townsInfra[r.tk].cost)+" CP",1),y("pre",d0t,A(n.userStore.townsInfra[r.tk].success?o.houseCraftPickedTooltip(r.tk):"FAILED"),1)])],64)):tt("",!0)}const v0t=be(kpt,[["render",p0t],["__scopeId","data-v-face1b81"]]);function r1(e,t){if(!e)throw new Error(t||"loader assertion failed.")}const XP=Boolean(typeof process!="object"||String(process)!=="[object process]"||process.browser),vx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);vx&&parseFloat(vx[1]);const g0t="3.2.7";function ya(e,t){if(!e)throw new Error(t||"loaders.gl assertion failed.")}const D3=typeof process!="object"||String(process)!=="[object process]"||process.browser,m0t=typeof window<"u"&&typeof window.orientation<"u",gx=typeof process<"u"&&process.version&&/v([0-9]*)/.exec(process.version);gx&&parseFloat(gx[1]);function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class _0t{constructor(t,r){P(this,"name",void 0),P(this,"workerThread",void 0),P(this,"isRunning",!0),P(this,"result",void 0),P(this,"_resolve",()=>{}),P(this,"_reject",()=>{}),this.name=t,this.workerThread=r,this.result=new Promise((n,i)=>{this._resolve=n,this._reject=i})}postMessage(t,r){this.workerThread.postMessage({source:"loaders.gl",type:t,payload:r})}done(t){ya(this.isRunning),this.isRunning=!1,this._resolve(t)}error(t){ya(this.isRunning),this.isRunning=!1,this._reject(t)}}class rb{}const nb=new Map;function y0t(e){ya(e.source&&!e.url||!e.source&&e.url);let t=nb.get(e.source||e.url);return t||(e.url&&(t=b0t(e.url),nb.set(e.url,t)),e.source&&(t=SB(e.source),nb.set(e.source,t))),ya(t),t}function b0t(e){if(!e.startsWith("http"))return e;const t=w0t(e);return SB(t)}function SB(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function w0t(e){return`try {
  importScripts('`.concat(e,`');
} catch (error) {
  console.error(error);
  throw error;
}`)}function TB(e,t=!0,r){const n=r||new Set;if(e){if(mx(e))n.add(e);else if(mx(e.buffer))n.add(e.buffer);else if(!ArrayBuffer.isView(e)){if(t&&typeof e=="object")for(const i in e)TB(e[i],t,n)}}return r===void 0?Array.from(n):[]}function mx(e){return e?e instanceof ArrayBuffer||typeof MessagePort<"u"&&e instanceof MessagePort||typeof ImageBitmap<"u"&&e instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas:!1}const ib=()=>{};class N3{static isSupported(){return typeof Worker<"u"&&D3||typeof rb!==void 0}constructor(t){P(this,"name",void 0),P(this,"source",void 0),P(this,"url",void 0),P(this,"terminated",!1),P(this,"worker",void 0),P(this,"onMessage",void 0),P(this,"onError",void 0),P(this,"_loadableURL","");const{name:r,source:n,url:i}=t;ya(n||i),this.name=r,this.source=n,this.url=i,this.onMessage=ib,this.onError=o=>console.log(o),this.worker=D3?this._createBrowserWorker():this._createNodeWorker()}destroy(){this.onMessage=ib,this.onError=ib,this.worker.terminate(),this.terminated=!0}get isRunning(){return Boolean(this.onMessage)}postMessage(t,r){r=r||TB(t),this.worker.postMessage(t,r)}_getErrorFromErrorEvent(t){let r="Failed to load ";return r+="worker ".concat(this.name," from ").concat(this.url,". "),t.message&&(r+="".concat(t.message," in ")),t.lineno&&(r+=":".concat(t.lineno,":").concat(t.colno)),new Error(r)}_createBrowserWorker(){this._loadableURL=y0t({source:this.source,url:this.url});const t=new Worker(this._loadableURL,{name:this.name});return t.onmessage=r=>{r.data?this.onMessage(r.data):this.onError(new Error("No data received"))},t.onerror=r=>{this.onError(this._getErrorFromErrorEvent(r)),this.terminated=!0},t.onmessageerror=r=>console.error(r),t}_createNodeWorker(){let t;if(this.url){const n=this.url.includes(":/")||this.url.startsWith("/")?this.url:"./".concat(this.url);t=new rb(n,{eval:!1})}else if(this.source)t=new rb(this.source,{eval:!0});else throw new Error("no worker");return t.on("message",r=>{this.onMessage(r)}),t.on("error",r=>{this.onError(r)}),t.on("exit",r=>{}),t}}class S0t{static isSupported(){return N3.isSupported()}constructor(t){P(this,"name","unnamed"),P(this,"source",void 0),P(this,"url",void 0),P(this,"maxConcurrency",1),P(this,"maxMobileConcurrency",1),P(this,"onDebug",()=>{}),P(this,"reuseWorkers",!0),P(this,"props",{}),P(this,"jobQueue",[]),P(this,"idleQueue",[]),P(this,"count",0),P(this,"isDestroyed",!1),this.source=t.source,this.url=t.url,this.setProps(t)}destroy(){this.idleQueue.forEach(t=>t.destroy()),this.isDestroyed=!0}setProps(t){this.props={...this.props,...t},t.name!==void 0&&(this.name=t.name),t.maxConcurrency!==void 0&&(this.maxConcurrency=t.maxConcurrency),t.maxMobileConcurrency!==void 0&&(this.maxMobileConcurrency=t.maxMobileConcurrency),t.reuseWorkers!==void 0&&(this.reuseWorkers=t.reuseWorkers),t.onDebug!==void 0&&(this.onDebug=t.onDebug)}async startJob(t,r=(i,o,a)=>i.done(a),n=(i,o)=>i.error(o)){const i=new Promise(o=>(this.jobQueue.push({name:t,onMessage:r,onError:n,onStart:o}),this));return this._startQueuedJob(),await i}async _startQueuedJob(){if(!this.jobQueue.length)return;const t=this._getAvailableWorker();if(!t)return;const r=this.jobQueue.shift();if(r){this.onDebug({message:"Starting job",name:r.name,workerThread:t,backlog:this.jobQueue.length});const n=new _0t(r.name,t);t.onMessage=i=>r.onMessage(n,i.type,i.payload),t.onError=i=>r.onError(n,i),r.onStart(n);try{await n.result}finally{this.returnWorkerToQueue(t)}}}returnWorkerToQueue(t){this.isDestroyed||!this.reuseWorkers||this.count>this._getMaxConcurrency()?(t.destroy(),this.count--):this.idleQueue.push(t),this.isDestroyed||this._startQueuedJob()}_getAvailableWorker(){if(this.idleQueue.length>0)return this.idleQueue.shift()||null;if(this.count<this._getMaxConcurrency()){this.count++;const t="".concat(this.name.toLowerCase()," (#").concat(this.count," of ").concat(this.maxConcurrency,")");return new N3({name:t,source:this.source,url:this.url})}return null}_getMaxConcurrency(){return m0t?this.maxMobileConcurrency:this.maxConcurrency}}const T0t={maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:!0,onDebug:()=>{}};class sa{static isSupported(){return N3.isSupported()}static getWorkerFarm(t={}){return sa._workerFarm=sa._workerFarm||new sa({}),sa._workerFarm.setProps(t),sa._workerFarm}constructor(t){P(this,"props",void 0),P(this,"workerPools",new Map),this.props={...T0t},this.setProps(t),this.workerPools=new Map}destroy(){for(const t of this.workerPools.values())t.destroy();this.workerPools=new Map}setProps(t){this.props={...this.props,...t};for(const r of this.workerPools.values())r.setProps(this._getWorkerPoolProps())}getWorkerPool(t){const{name:r,source:n,url:i}=t;let o=this.workerPools.get(r);return o||(o=new S0t({name:r,source:n,url:i}),o.setProps(this._getWorkerPoolProps()),this.workerPools.set(r,o)),o}_getWorkerPoolProps(){return{maxConcurrency:this.props.maxConcurrency,maxMobileConcurrency:this.props.maxMobileConcurrency,reuseWorkers:this.props.reuseWorkers,onDebug:this.props.onDebug}}}P(sa,"_workerFarm",void 0);const k0t="latest";function P0t(e,t={}){const r=t[e.id]||{},n="".concat(e.id,"-worker.js");let i=r.workerUrl;if(!i&&e.id==="compression"&&(i=t.workerUrl),t._workerType==="test"&&(i="modules/".concat(e.module,"/dist/").concat(n)),!i){let o=e.version;o==="latest"&&(o=k0t);const a=o?"@".concat(o):"";i="https://unpkg.com/@loaders.gl/".concat(e.module).concat(a,"/dist/").concat(n)}return ya(i),i}function E0t(e,t=g0t){ya(e,"no worker provided");const r=e.version;return!(!t||!r)}function C0t(e,t){return!sa.isSupported()||!D3&&!(t!=null&&t._nodeWorkers)?!1:e.worker&&(t==null?void 0:t.worker)}async function A0t(e,t,r,n,i){const o=e.id,a=P0t(e,r),l=sa.getWorkerFarm(r).getWorkerPool({name:o,url:a});r=JSON.parse(JSON.stringify(r)),n=JSON.parse(JSON.stringify(n||{}));const u=await l.startJob("process-on-worker",M0t.bind(null,i));return u.postMessage("process",{input:t,options:r,context:n}),await(await u.result).result}async function M0t(e,t,r,n){switch(r){case"done":t.done(n);break;case"error":t.error(new Error(n.error));break;case"process":const{id:i,input:o,options:a}=n;try{const s=await e(o,a);t.postMessage("done",{id:i,result:s})}catch(s){const l=s instanceof Error?s.message:"unknown error";t.postMessage("error",{id:i,error:l})}break;default:console.warn("parse-with-worker unknown message ".concat(r))}}function kB(e){return e&&typeof e=="object"&&e.isBuffer}function x0t(e){return kB(e)?new Uint8Array(e.buffer,e.byteOffset,e.length).slice().buffer:e}function PB(e){if(kB(e))return x0t(e);if(e instanceof ArrayBuffer)return e;if(ArrayBuffer.isView(e))return e.byteOffset===0&&e.byteLength===e.buffer.byteLength?e.buffer:e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);if(typeof e=="string"){const t=e;return new TextEncoder().encode(t).buffer}if(e&&typeof e=="object"&&e._toArrayBuffer)return e._toArrayBuffer();throw new Error("toArrayBuffer")}function L0t(e,t,r){if(r=r||e.byteLength,e.byteLength<r||t.byteLength<r)return!1;const n=new Uint8Array(e),i=new Uint8Array(t);for(let o=0;o<n.length;++o)if(n[o]!==i[o])return!1;return!0}function I0t(...e){const t=e.map(o=>o instanceof ArrayBuffer?new Uint8Array(o):o),r=t.reduce((o,a)=>o+a.byteLength,0),n=new Uint8Array(r);let i=0;for(const o of t)n.set(o,i),i+=o.byteLength;return n.buffer}async function O0t(e){const t=[];for await(const r of e)t.push(r);return I0t(...t)}function _x(){let e;if(typeof window<"u"&&window.performance)e=window.performance.now();else if(typeof process<"u"&&process.hrtime){const t=process.hrtime();e=t[0]*1e3+t[1]/1e6}else e=Date.now();return e}class yx{constructor(t,r){P(this,"name",void 0),P(this,"type",void 0),P(this,"sampleSize",1),P(this,"time",void 0),P(this,"count",void 0),P(this,"samples",void 0),P(this,"lastTiming",void 0),P(this,"lastSampleTime",void 0),P(this,"lastSampleCount",void 0),P(this,"_count",0),P(this,"_time",0),P(this,"_samples",0),P(this,"_startTime",0),P(this,"_timerPending",!1),this.name=t,this.type=r,this.reset()}setSampleSize(t){return this.sampleSize=t,this}incrementCount(){return this.addCount(1),this}decrementCount(){return this.subtractCount(1),this}addCount(t){return this._count+=t,this._samples++,this._checkSampling(),this}subtractCount(t){return this._count-=t,this._samples++,this._checkSampling(),this}addTime(t){return this._time+=t,this.lastTiming=t,this._samples++,this._checkSampling(),this}timeStart(){return this._startTime=_x(),this._timerPending=!0,this}timeEnd(){return this._timerPending?(this.addTime(_x()-this._startTime),this._timerPending=!1,this._checkSampling(),this):this}getSampleAverageCount(){return this.sampleSize>0?this.lastSampleCount/this.sampleSize:0}getSampleAverageTime(){return this.sampleSize>0?this.lastSampleTime/this.sampleSize:0}getSampleHz(){return this.lastSampleTime>0?this.sampleSize/(this.lastSampleTime/1e3):0}getAverageCount(){return this.samples>0?this.count/this.samples:0}getAverageTime(){return this.samples>0?this.time/this.samples:0}getHz(){return this.time>0?this.samples/(this.time/1e3):0}reset(){return this.time=0,this.count=0,this.samples=0,this.lastTiming=0,this.lastSampleTime=0,this.lastSampleCount=0,this._count=0,this._time=0,this._samples=0,this._startTime=0,this._timerPending=!1,this}_checkSampling(){this._samples===this.sampleSize&&(this.lastSampleTime=this._time,this.lastSampleCount=this._count,this.count+=this._count,this.time+=this._time,this.samples+=this._samples,this._time=0,this._count=0,this._samples=0)}}class S_{constructor(t){P(this,"id",void 0),P(this,"stats",{}),this.id=t.id,this.stats={},this._initializeStats(t.stats),Object.seal(this)}get(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"count";return this._getOrCreate({name:t,type:r})}get size(){return Object.keys(this.stats).length}reset(){for(const t in this.stats)this.stats[t].reset();return this}forEach(t){for(const r in this.stats)t(this.stats[r])}getTable(){const t={};return this.forEach(r=>{t[r.name]={time:r.time||0,count:r.count||0,average:r.getAverageTime()||0,hz:r.getHz()||0}}),t}_initializeStats(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(r=>this._getOrCreate(r))}_getOrCreate(t){if(!t||!t.name)return null;const{name:r,type:n}=t;return this.stats[r]||(t instanceof yx?this.stats[r]=t:this.stats[r]=new yx(r,n)),this.stats[r]}}const R0t="Queued Requests",D0t="Active Requests",N0t="Cancelled Requests",F0t="Queued Requests Ever",$0t="Active Requests Ever",B0t={id:"request-scheduler",throttleRequests:!0,maxRequests:6};class z0t{constructor(t={}){P(this,"props",void 0),P(this,"stats",void 0),P(this,"activeRequestCount",0),P(this,"requestQueue",[]),P(this,"requestMap",new Map),P(this,"deferredUpdate",null),this.props={...B0t,...t},this.stats=new S_({id:this.props.id}),this.stats.get(R0t),this.stats.get(D0t),this.stats.get(N0t),this.stats.get(F0t),this.stats.get($0t)}scheduleRequest(t,r=()=>0){if(!this.props.throttleRequests)return Promise.resolve({done:()=>{}});if(this.requestMap.has(t))return this.requestMap.get(t);const n={handle:t,priority:0,getPriority:r},i=new Promise(o=>(n.resolve=o,n));return this.requestQueue.push(n),this.requestMap.set(t,i),this._issueNewRequests(),i}_issueRequest(t){const{handle:r,resolve:n}=t;let i=!1;const o=()=>{i||(i=!0,this.requestMap.delete(r),this.activeRequestCount--,this._issueNewRequests())};return this.activeRequestCount++,n?n({done:o}):Promise.resolve({done:o})}_issueNewRequests(){this.deferredUpdate||(this.deferredUpdate=setTimeout(()=>this._issueNewRequestsAsync(),0))}_issueNewRequestsAsync(){this.deferredUpdate=null;const t=Math.max(this.props.maxRequests-this.activeRequestCount,0);if(t!==0){this._updateAllRequests();for(let r=0;r<t;++r){const n=this.requestQueue.shift();n&&this._issueRequest(n)}}}_updateAllRequests(){const t=this.requestQueue;for(let r=0;r<t.length;++r){const n=t[r];this._updateRequest(n)||(t.splice(r,1),this.requestMap.delete(n.handle),r--)}t.sort((r,n)=>r.priority-n.priority)}_updateRequest(t){return t.priority=t.getPriority(t.handle),t.priority<0?(t.resolve(null),!1):!0}}let V0t="";const bx={};function U0t(e){for(const t in bx)if(e.startsWith(t)){const r=bx[t];e=e.replace(t,r)}return!e.startsWith("http://")&&!e.startsWith("https://")&&(e="".concat(V0t).concat(e)),e}function W0t(e){const t=e&&e.lastIndexOf("/");return t>=0?e.substr(t+1):""}const G0t=e=>typeof e=="boolean",Ad=e=>typeof e=="function",Wp=e=>e!==null&&typeof e=="object",Sx=e=>Wp(e)&&e.constructor==={}.constructor,j0t=e=>e&&typeof e[Symbol.iterator]=="function",H0t=e=>e&&typeof e[Symbol.asyncIterator]=="function",kf=e=>typeof Response<"u"&&e instanceof Response||e&&e.arrayBuffer&&e.text&&e.json,Pf=e=>typeof Blob<"u"&&e instanceof Blob,X0t=e=>e&&typeof e=="object"&&e.isBuffer,Y0t=e=>typeof ReadableStream<"u"&&e instanceof ReadableStream||Wp(e)&&Ad(e.tee)&&Ad(e.cancel)&&Ad(e.getReader),q0t=e=>Wp(e)&&Ad(e.read)&&Ad(e.pipe)&&G0t(e.readable),EB=e=>Y0t(e)||q0t(e),Z0t=/^data:([-\w.]+\/[-\w.+]+)(;|,)/,K0t=/^([-\w.]+\/[-\w.+]+)/;function J0t(e){const t=K0t.exec(e);return t?t[1]:e}function Tx(e){const t=Z0t.exec(e);return t?t[1]:""}const Q0t=/\?.*/;function T_(e){if(kf(e)){const t=ob(e.url||""),r=e.headers.get("content-type")||"";return{url:t,type:J0t(r)||Tx(t)}}return Pf(e)?{url:ob(e.name||""),type:e.type||""}:typeof e=="string"?{url:ob(e),type:Tx(e)}:{url:"",type:""}}function tvt(e){return kf(e)?e.headers["content-length"]||-1:Pf(e)?e.size:typeof e=="string"?e.length:e instanceof ArrayBuffer||ArrayBuffer.isView(e)?e.byteLength:-1}function ob(e){return e.replace(Q0t,"")}async function CB(e){if(kf(e))return e;const t={},r=tvt(e);r>=0&&(t["content-length"]=String(r));const{url:n,type:i}=T_(e);i&&(t["content-type"]=i);const o=await nvt(e);o&&(t["x-first-bytes"]=o),typeof e=="string"&&(e=new TextEncoder().encode(e));const a=new Response(e,{headers:t});return Object.defineProperty(a,"url",{value:n}),a}async function evt(e){if(!e.ok){const t=await rvt(e);throw new Error(t)}}async function rvt(e){let t="Failed to fetch resource ".concat(e.url," (").concat(e.status,"): ");try{const r=e.headers.get("Content-Type");let n=e.statusText;r.includes("application/json")&&(n+=" ".concat(await e.text())),t+=n,t=t.length>60?"".concat(t.slice(0,60),"..."):t}catch{}return t}async function nvt(e){if(typeof e=="string")return"data:,".concat(e.slice(0,5));if(e instanceof Blob){const r=e.slice(0,5);return await new Promise(n=>{const i=new FileReader;i.onload=o=>{var a;return n(o==null||(a=o.target)===null||a===void 0?void 0:a.result)},i.readAsDataURL(r)})}if(e instanceof ArrayBuffer){const r=e.slice(0,5),n=ivt(r);return"data:base64,".concat(n)}return null}function ivt(e){let t="";const r=new Uint8Array(e);for(let n=0;n<r.byteLength;n++)t+=String.fromCharCode(r[n]);return btoa(t)}async function kx(e,t){if(typeof e=="string"){e=U0t(e);let r=t;return t!=null&&t.fetch&&typeof(t==null?void 0:t.fetch)!="function"&&(r=t.fetch),await fetch(e,r)}return await CB(e)}function AB(e){if(typeof window<"u"&&typeof window.process=="object"&&window.process.type==="renderer"||typeof process<"u"&&typeof process.versions=="object"&&Boolean(process.versions.electron))return!0;const t=typeof navigator=="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent,r=e||t;return!!(r&&r.indexOf("Electron")>=0)}function xa(){return!(typeof process=="object"&&String(process)==="[object process]"&&!process.browser)||AB()}const Qg={self:typeof self<"u"&&self,window:typeof window<"u"&&window,global:typeof global<"u"&&global,document:typeof document<"u"&&document,process:typeof process=="object"&&process},gv=Qg.window||Qg.self||Qg.global,yh=Qg.process||{},MB=typeof __VERSION__<"u"?__VERSION__:"untranspiled source";xa();const ab=globalThis;function xB(e){if(!e&&!xa())return"Node";if(AB(e))return"Electron";const r=e||(typeof navigator<"u"?navigator:{}).userAgent||"";if(r.indexOf("Edge")>-1)return"Edge";const n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i?"IE":ab.chrome?"Chrome":ab.safari?"Safari":ab.mozInnerScreenX?"Firefox":"Unknown"}function ovt(e){try{const t=window[e],r="__storage_test__";return t.setItem(r,r),t.removeItem(r),t}catch{return null}}class avt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"sessionStorage";P(this,"storage",void 0),P(this,"id",void 0),P(this,"config",{}),this.storage=ovt(n),this.id=t,this.config={},Object.assign(this.config,r),this._loadConfiguration()}getConfiguration(){return this.config}setConfiguration(t){return this.config={},this.updateConfiguration(t)}updateConfiguration(t){if(Object.assign(this.config,t),this.storage){const r=JSON.stringify(this.config);this.storage.setItem(this.id,r)}return this}_loadConfiguration(){let t={};if(this.storage){const r=this.storage.getItem(this.id);t=r?JSON.parse(r):{}}return Object.assign(this.config,t),this}}function svt(e){let t;return e<10?t="".concat(e.toFixed(2),"ms"):e<100?t="".concat(e.toFixed(1),"ms"):e<1e3?t="".concat(e.toFixed(0),"ms"):t="".concat((e/1e3).toFixed(2),"s"),t}function lvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:8;const r=Math.max(t-e.length,0);return"".concat(" ".repeat(r)).concat(e)}function sb(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:600;const i=e.src.replace(/\(/g,"%28").replace(/\)/g,"%29");e.width>n&&(r=Math.min(r,n/e.width));const o=e.width*r,a=e.height*r,s=["font-size:1px;","padding:".concat(Math.floor(a/2),"px ").concat(Math.floor(o/2),"px;"),"line-height:".concat(a,"px;"),"background:url(".concat(i,");"),"background-size:".concat(o,"px ").concat(a,"px;"),"color:transparent;"].join("");return["".concat(t," %c+"),s]}let n1;(function(e){e[e.BLACK=30]="BLACK",e[e.RED=31]="RED",e[e.GREEN=32]="GREEN",e[e.YELLOW=33]="YELLOW",e[e.BLUE=34]="BLUE",e[e.MAGENTA=35]="MAGENTA",e[e.CYAN=36]="CYAN",e[e.WHITE=37]="WHITE",e[e.BRIGHT_BLACK=90]="BRIGHT_BLACK",e[e.BRIGHT_RED=91]="BRIGHT_RED",e[e.BRIGHT_GREEN=92]="BRIGHT_GREEN",e[e.BRIGHT_YELLOW=93]="BRIGHT_YELLOW",e[e.BRIGHT_BLUE=94]="BRIGHT_BLUE",e[e.BRIGHT_MAGENTA=95]="BRIGHT_MAGENTA",e[e.BRIGHT_CYAN=96]="BRIGHT_CYAN",e[e.BRIGHT_WHITE=97]="BRIGHT_WHITE"})(n1||(n1={}));function Px(e){return typeof e=="string"?n1[e.toUpperCase()]||n1.WHITE:e}function uvt(e,t,r){return!xa&&typeof e=="string"&&(t&&(t=Px(t),e="\x1B[".concat(t,"m").concat(e,"\x1B[39m")),r&&(t=Px(r),e="\x1B[".concat(r+10,"m").concat(e,"\x1B[49m"))),e}function cvt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["constructor"];const r=Object.getPrototypeOf(e),n=Object.getOwnPropertyNames(r);for(const i of n)typeof e[i]=="function"&&(t.find(o=>i===o)||(e[i]=e[i].bind(e)))}function i1(e,t){if(!e)throw new Error(t||"Assertion failed")}function qu(){let e;if(xa&&"performance"in gv){var t,r;e=gv==null||(t=gv.performance)===null||t===void 0||(r=t.now)===null||r===void 0?void 0:r.call(t)}else if("hrtime"in yh){var n;const i=yh==null||(n=yh.hrtime)===null||n===void 0?void 0:n.call(yh);e=i[0]*1e3+i[1]/1e6}else e=Date.now();return e}const Zu={debug:xa&&console.debug||console.log,log:console.log,info:console.info,warn:console.warn,error:console.error},fvt={enabled:!0,level:0};function Kn(){}const Ex={},Cx={once:!0};class Gp{constructor(){let{id:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{id:""};P(this,"id",void 0),P(this,"VERSION",MB),P(this,"_startTs",qu()),P(this,"_deltaTs",qu()),P(this,"_storage",void 0),P(this,"userData",{}),P(this,"LOG_THROTTLE_TIMEOUT",0),this.id=t,this._storage=new avt("__probe-".concat(this.id,"__"),fvt),this.userData={},this.timeStamp("".concat(this.id," started")),cvt(this),Object.seal(this)}set level(t){this.setLevel(t)}get level(){return this.getLevel()}isEnabled(){return this._storage.config.enabled}getLevel(){return this._storage.config.level}getTotal(){return Number((qu()-this._startTs).toPrecision(10))}getDelta(){return Number((qu()-this._deltaTs).toPrecision(10))}set priority(t){this.level=t}get priority(){return this.level}getPriority(){return this.level}enable(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return this._storage.updateConfiguration({enabled:t}),this}setLevel(t){return this._storage.updateConfiguration({level:t}),this}get(t){return this._storage.config[t]}set(t,r){this._storage.updateConfiguration({[t]:r})}settings(){console.table?console.table(this._storage.config):console.log(this._storage.config)}assert(t,r){i1(t,r)}warn(t){return this._getLogFunction(0,t,Zu.warn,arguments,Cx)}error(t){return this._getLogFunction(0,t,Zu.error,arguments)}deprecated(t,r){return this.warn("`".concat(t,"` is deprecated and will be removed in a later version. Use `").concat(r,"` instead"))}removed(t,r){return this.error("`".concat(t,"` has been removed. Use `").concat(r,"` instead"))}probe(t,r){return this._getLogFunction(t,r,Zu.log,arguments,{time:!0,once:!0})}log(t,r){return this._getLogFunction(t,r,Zu.debug,arguments)}info(t,r){return this._getLogFunction(t,r,console.info,arguments)}once(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),o=2;o<n;o++)i[o-2]=arguments[o];return this._getLogFunction(t,r,Zu.debug||Zu.info,arguments,Cx)}table(t,r,n){return r?this._getLogFunction(t,r,console.table||Kn,n&&[n],{tag:vvt(r)}):Kn}image(t){let{logLevel:r,priority:n,image:i,message:o="",scale:a=1}=t;return this._shouldLog(r||n)?xa?pvt({image:i,message:o,scale:a}):dvt({image:i,message:o,scale:a}):Kn}time(t,r){return this._getLogFunction(t,r,console.time?console.time:console.info)}timeEnd(t,r){return this._getLogFunction(t,r,console.timeEnd?console.timeEnd:console.info)}timeStamp(t,r){return this._getLogFunction(t,r,console.timeStamp||Kn)}group(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{collapsed:!1};const i=Ax({logLevel:t,message:r,opts:n}),{collapsed:o}=n;return i.method=(o?console.groupCollapsed:console.group)||console.info,this._getLogFunction(i)}groupCollapsed(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.group(t,r,Object.assign({},n,{collapsed:!0}))}groupEnd(t){return this._getLogFunction(t,"",console.groupEnd||Kn)}withGroup(t,r,n){this.group(t,r)();try{n()}finally{this.groupEnd(t)()}}trace(){console.trace&&console.trace()}_shouldLog(t){return this.isEnabled()&&this.getLevel()>=LB(t)}_getLogFunction(t,r,n,i,o){if(this._shouldLog(t)){o=Ax({logLevel:t,message:r,args:i,opts:o}),n=n||o.method,i1(n),o.total=this.getTotal(),o.delta=this.getDelta(),this._deltaTs=qu();const a=o.tag||o.message;if(o.once)if(!Ex[a])Ex[a]=qu();else return Kn;return r=hvt(this.id,o.message,o),n.bind(console,r,...o.args)}return Kn}}P(Gp,"VERSION",MB);function LB(e){if(!e)return 0;let t;switch(typeof e){case"number":t=e;break;case"object":t=e.logLevel||e.priority||0;break;default:return 0}return i1(Number.isFinite(t)&&t>=0),t}function Ax(e){const{logLevel:t,message:r}=e;e.logLevel=LB(t);const n=e.args?Array.from(e.args):[];for(;n.length&&n.shift()!==r;);switch(typeof t){case"string":case"function":r!==void 0&&n.unshift(r),e.message=t;break;case"object":Object.assign(e,t);break}typeof e.message=="function"&&(e.message=e.message());const i=typeof e.message;return i1(i==="string"||i==="object"),Object.assign(e,{args:n},e.opts)}function hvt(e,t,r){if(typeof t=="string"){const n=r.time?lvt(svt(r.total)):"";t=r.time?"".concat(e,": ").concat(n,"  ").concat(t):"".concat(e,": ").concat(t),t=uvt(t,r.color,r.background)}return t}function dvt(e){let{image:t,message:r="",scale:n=1}=e;return(void 0)({image:t,message:r,scale:n}),Kn}function pvt(e){let{image:t,message:r="",scale:n=1}=e;if(typeof t=="string"){const o=new Image;return o.onload=()=>{const a=sb(o,r,n);console.log(...a)},o.src=t,Kn}const i=t.nodeName||"";if(i.toLowerCase()==="img")return console.log(...sb(t,r,n)),Kn;if(i.toLowerCase()==="canvas"){const o=new Image;return o.onload=()=>console.log(...sb(o,r,n)),o.src=t.toDataURL(),Kn}return Kn}function vvt(e){for(const t in e)for(const r in e[t])return r||"untitled";return"empty"}const Mx=new Gp({id:"loaders.gl"});class gvt{log(){return()=>{}}info(){return()=>{}}warn(){return()=>{}}error(){return()=>{}}}class mvt{constructor(){P(this,"console",void 0),this.console=console}log(...t){return this.console.log.bind(this.console,...t)}info(...t){return this.console.info.bind(this.console,...t)}warn(...t){return this.console.warn.bind(this.console,...t)}error(...t){return this.console.error.bind(this.console,...t)}}const IB={fetch:null,mimeType:void 0,nothrow:!1,log:new mvt,CDN:"https://unpkg.com/@loaders.gl",worker:!0,maxConcurrency:3,maxMobileConcurrency:1,reuseWorkers:XP,_nodeWorkers:!1,_workerType:"",limit:0,_limitMB:0,batchSize:"auto",batchDebounceMs:0,metadata:!1,transforms:[]},_vt={throws:"nothrow",dataType:"(no longer used)",uri:"baseUri",method:"fetch.method",headers:"fetch.headers",body:"fetch.body",mode:"fetch.mode",credentials:"fetch.credentials",cache:"fetch.cache",redirect:"fetch.redirect",referrer:"fetch.referrer",referrerPolicy:"fetch.referrerPolicy",integrity:"fetch.integrity",keepalive:"fetch.keepalive",signal:"fetch.signal"};function OB(){globalThis.loaders=globalThis.loaders||{};const{loaders:e}=globalThis;return e._state=e._state||{},e._state}const RB=()=>{const e=OB();return e.globalOptions=e.globalOptions||{...IB},e.globalOptions};function yvt(e,t,r,n){return r=r||[],r=Array.isArray(r)?r:[r],bvt(e,r),Svt(t,e,n)}function DB(e,t){const r=RB(),n=e||r;return typeof n.fetch=="function"?n.fetch:Wp(n.fetch)?i=>kx(i,n):t!=null&&t.fetch?t==null?void 0:t.fetch:kx}function bvt(e,t){xx(e,null,IB,_vt,t);for(const r of t){const n=e&&e[r.id]||{},i=r.options&&r.options[r.id]||{},o=r.deprecatedOptions&&r.deprecatedOptions[r.id]||{};xx(n,r.id,i,o,t)}}function xx(e,t,r,n,i){const o=t||"Top level",a=t?"".concat(t,"."):"";for(const s in e){const l=!t&&Wp(e[s]),u=s==="baseUri"&&!t,c=s==="workerUrl"&&t;if(!(s in r)&&!u&&!c){if(s in n)Mx.warn("".concat(o," loader option '").concat(a).concat(s,"' no longer supported, use '").concat(n[s],"'"))();else if(!l){const f=wvt(s,i);Mx.warn("".concat(o," loader option '").concat(a).concat(s,"' not recognized. ").concat(f))()}}}}function wvt(e,t){const r=e.toLowerCase();let n="";for(const i of t)for(const o in i.options){if(e===o)return"Did you mean '".concat(i.id,".").concat(o,"'?");const a=o.toLowerCase();(r.startsWith(a)||a.startsWith(r))&&(n=n||"Did you mean '".concat(i.id,".").concat(o,"'?"))}return n}function Svt(e,t,r){const i={...e.options||{}};return Tvt(i,r),i.log===null&&(i.log=new gvt),Lx(i,RB()),Lx(i,t),i}function Lx(e,t){for(const r in t)if(r in t){const n=t[r];Sx(n)&&Sx(e[r])?e[r]={...e[r],...t[r]}:e[r]=t[r]}}function Tvt(e,t){t&&!("baseUri"in e)&&(e.baseUri=t)}function YP(e){var t;return e?(Array.isArray(e)&&(e=e[0]),Array.isArray((t=e)===null||t===void 0?void 0:t.extensions)):!1}function qP(e){var t,r;r1(e,"null loader"),r1(YP(e),"invalid loader");let n;return Array.isArray(e)&&(n=e[1],e=e[0],e={...e,options:{...e.options,...n}}),((t=e)!==null&&t!==void 0&&t.parseTextSync||(r=e)!==null&&r!==void 0&&r.parseText)&&(e.text=!0),e.text||(e.binary=!0),e}const NB=()=>{const e=OB();return e.loaderRegistry=e.loaderRegistry||[],e.loaderRegistry};function kvt(e){const t=NB();e=Array.isArray(e)?e:[e];for(const r of e){const n=qP(r);t.find(i=>n===i)||t.unshift(n)}}function Pvt(){return NB()}const Evt=new Gp({id:"loaders.gl"}),Cvt=/\.([^.]+)$/;async function Avt(e,t=[],r,n){if(!FB(e))return null;let i=Ix(e,t,{...r,nothrow:!0},n);if(i)return i;if(Pf(e)&&(e=await e.slice(0,10).arrayBuffer(),i=Ix(e,t,r,n)),!i&&!(r!=null&&r.nothrow))throw new Error($B(e));return i}function Ix(e,t=[],r,n){if(!FB(e))return null;if(t&&!Array.isArray(t))return qP(t);let i=[];t&&(i=i.concat(t)),r!=null&&r.ignoreRegisteredLoaders||i.push(...Pvt()),xvt(i);const o=Mvt(e,i,r,n);if(!o&&!(r!=null&&r.nothrow))throw new Error($B(e));return o}function Mvt(e,t,r,n){const{url:i,type:o}=T_(e),a=i||(n==null?void 0:n.url);let s=null,l="";if(r!=null&&r.mimeType&&(s=lb(t,r==null?void 0:r.mimeType),l="match forced by supplied MIME type ".concat(r==null?void 0:r.mimeType)),s=s||Lvt(t,a),l=l||(s?"matched url ".concat(a):""),s=s||lb(t,o),l=l||(s?"matched MIME type ".concat(o):""),s=s||Ovt(t,e),l=l||(s?"matched initial data ".concat(BB(e)):""),s=s||lb(t,r==null?void 0:r.fallbackMimeType),l=l||(s?"matched fallback MIME type ".concat(o):""),l){var u;Evt.log(1,"selectLoader selected ".concat((u=s)===null||u===void 0?void 0:u.name,": ").concat(l,"."))}return s}function FB(e){return!(e instanceof Response&&e.status===204)}function $B(e){const{url:t,type:r}=T_(e);let n="No valid loader found (";n+=t?"".concat(W0t(t),", "):"no url provided, ",n+="MIME type: ".concat(r?'"'.concat(r,'"'):"not provided",", ");const i=e?BB(e):"";return n+=i?' first bytes: "'.concat(i,'"'):"first bytes: not available",n+=")",n}function xvt(e){for(const t of e)qP(t)}function Lvt(e,t){const r=t&&Cvt.exec(t),n=r&&r[1];return n?Ivt(e,n):null}function Ivt(e,t){t=t.toLowerCase();for(const r of e)for(const n of r.extensions)if(n.toLowerCase()===t)return r;return null}function lb(e,t){for(const r of e)if(r.mimeTypes&&r.mimeTypes.includes(t)||t==="application/x.".concat(r.id))return r;return null}function Ovt(e,t){if(!t)return null;for(const r of e)if(typeof t=="string"){if(Rvt(t,r))return r}else if(ArrayBuffer.isView(t)){if(Ox(t.buffer,t.byteOffset,r))return r}else if(t instanceof ArrayBuffer&&Ox(t,0,r))return r;return null}function Rvt(e,t){return t.testText?t.testText(e):(Array.isArray(t.tests)?t.tests:[t.tests]).some(n=>e.startsWith(n))}function Ox(e,t,r){return(Array.isArray(r.tests)?r.tests:[r.tests]).some(i=>Dvt(e,t,r,i))}function Dvt(e,t,r,n){if(n instanceof ArrayBuffer)return L0t(n,e,n.byteLength);switch(typeof n){case"function":return n(e,r);case"string":const i=F3(e,t,n.length);return n===i;default:return!1}}function BB(e,t=5){return typeof e=="string"?e.slice(0,t):ArrayBuffer.isView(e)?F3(e.buffer,e.byteOffset,t):e instanceof ArrayBuffer?F3(e,0,t):""}function F3(e,t,r){if(e.byteLength<t+r)return"";const n=new DataView(e);let i="";for(let o=0;o<r;o++)i+=String.fromCharCode(n.getUint8(t+o));return i}const Nvt=256*1024;function*Fvt(e,t){const r=(t==null?void 0:t.chunkSize)||Nvt;let n=0;const i=new TextEncoder;for(;n<e.length;){const o=Math.min(e.length-n,r),a=e.slice(n,n+o);n+=o,yield i.encode(a)}}const $vt=256*1024;function*Bvt(e,t={}){const{chunkSize:r=$vt}=t;let n=0;for(;n<e.byteLength;){const i=Math.min(e.byteLength-n,r),o=new ArrayBuffer(i),a=new Uint8Array(e,n,i);new Uint8Array(o).set(a),n+=i,yield o}}const zvt=1024*1024;async function*Vvt(e,t){const r=(t==null?void 0:t.chunkSize)||zvt;let n=0;for(;n<e.size;){const i=n+r,o=await e.slice(n,i).arrayBuffer();n=i,yield o}}function Rx(e,t){return XP?Uvt(e,t):Wvt(e)}async function*Uvt(e,t){const r=e.getReader();let n;try{for(;;){const i=n||r.read();t!=null&&t._streamReadAhead&&(n=r.read());const{done:o,value:a}=await i;if(o)return;yield PB(a)}}catch{r.releaseLock()}}async function*Wvt(e,t){for await(const r of e)yield PB(r)}function Gvt(e,t){if(typeof e=="string")return Fvt(e,t);if(e instanceof ArrayBuffer)return Bvt(e,t);if(Pf(e))return Vvt(e,t);if(EB(e))return Rx(e,t);if(kf(e))return Rx(e.body,t);throw new Error("makeIterator")}const zB="Cannot convert supplied data type";function jvt(e,t,r){if(t.text&&typeof e=="string")return e;if(X0t(e)&&(e=e.buffer),e instanceof ArrayBuffer){const n=e;return t.text&&!t.binary?new TextDecoder("utf8").decode(n):n}if(ArrayBuffer.isView(e)){if(t.text&&!t.binary)return new TextDecoder("utf8").decode(e);let n=e.buffer;const i=e.byteLength||e.length;return(e.byteOffset!==0||i!==n.byteLength)&&(n=n.slice(e.byteOffset,e.byteOffset+i)),n}throw new Error(zB)}async function Hvt(e,t,r){const n=e instanceof ArrayBuffer||ArrayBuffer.isView(e);if(typeof e=="string"||n)return jvt(e,t);if(Pf(e)&&(e=await CB(e)),kf(e)){const i=e;return await evt(i),t.binary?await i.arrayBuffer():await i.text()}if(EB(e)&&(e=Gvt(e,r)),j0t(e)||H0t(e))return O0t(e);throw new Error(zB)}function Xvt(e,t,r=null){if(r)return r;const n={fetch:DB(t,e),...e};return Array.isArray(n.loaders)||(n.loaders=null),n}function Yvt(e,t){if(!t&&e&&!Array.isArray(e))return e;let r;if(e&&(r=Array.isArray(e)?e:[e]),t&&t.loaders){const n=Array.isArray(t.loaders)?t.loaders:[t.loaders];r=r?[...r,...n]:n}return r&&r.length?r:null}async function ZP(e,t,r,n){ya(!n||typeof n=="object"),t&&!Array.isArray(t)&&!YP(t)&&(n=void 0,r=t,t=void 0),e=await e,r=r||{};const{url:i}=T_(e),a=Yvt(t,n),s=await Avt(e,a,r);return s?(r=yvt(r,s,a,i),n=Xvt({url:i,parse:ZP,loaders:a},r,n),await qvt(s,e,r,n)):null}async function qvt(e,t,r,n){if(E0t(e),kf(t)){const i=t,{ok:o,redirected:a,status:s,statusText:l,type:u,url:c}=i,f=Object.fromEntries(i.headers.entries());n.response={headers:f,ok:o,redirected:a,status:s,statusText:l,type:u,url:c}}if(t=await Hvt(t,e,r),e.parseTextSync&&typeof t=="string")return r.dataType="text",e.parseTextSync(t,r,n,e);if(C0t(e,r))return await A0t(e,t,r,n,ZP);if(e.parseText&&typeof t=="string")return await e.parseText(t,r,n,e);if(e.parse)return await e.parse(t,r,n,e);throw ya(!e.parseSync),new Error("".concat(e.id," loader - no parser found and worker is disabled"))}async function o1(e,t,r,n){!Array.isArray(t)&&!YP(t)&&(r=t,t=void 0);const i=DB(r);let o=e;return typeof e=="string"&&(o=await i(e)),Pf(e)&&(o=await i(e)),await ZP(o,t,r)}const Zvt="3.2.7",{_parseImageNode:Kvt}=globalThis,$3=typeof Image<"u",B3=typeof ImageBitmap<"u",Jvt=Boolean(Kvt),z3=XP?!0:Jvt;function Qvt(e){switch(e){case"auto":return B3||$3||z3;case"imagebitmap":return B3;case"image":return $3;case"data":return z3;default:throw new Error("@loaders.gl/images: image ".concat(e," not supported in this environment"))}}function tgt(){if(B3)return"imagebitmap";if($3)return"image";if(z3)return"data";throw new Error("Install '@loaders.gl/polyfills' to parse images under Node.js")}function egt(e){const t=ngt(e);if(!t)throw new Error("Not an image");return t}function rgt(e){switch(egt(e)){case"data":return e;case"image":case"imagebitmap":const t=document.createElement("canvas"),r=t.getContext("2d");if(!r)throw new Error("getImageData");return t.width=e.width,t.height=e.height,r.drawImage(e,0,0),r.getImageData(0,0,e.width,e.height);default:throw new Error("getImageData")}}function ngt(e){return typeof ImageBitmap<"u"&&e instanceof ImageBitmap?"imagebitmap":typeof Image<"u"&&e instanceof Image?"image":e&&typeof e=="object"&&e.data&&e.width&&e.height?"data":null}const igt=/^data:image\/svg\+xml/,ogt=/\.svg((\?|#).*)?$/;function KP(e){return e&&(igt.test(e)||ogt.test(e))}function agt(e,t){if(KP(t)){let n=new TextDecoder().decode(e);try{typeof unescape=="function"&&typeof encodeURIComponent=="function"&&(n=unescape(encodeURIComponent(n)))}catch(o){throw new Error(o.message)}return"data:image/svg+xml;base64,".concat(btoa(n))}return VB(e,t)}function VB(e,t){if(KP(t))throw new Error("SVG cannot be parsed directly to imagebitmap");return new Blob([new Uint8Array(e)])}async function UB(e,t,r){const n=agt(e,r),i=self.URL||self.webkitURL,o=typeof n!="string"&&i.createObjectURL(n);try{return await sgt(o||n,t)}finally{o&&i.revokeObjectURL(o)}}async function sgt(e,t){const r=new Image;return r.src=e,t.image&&t.image.decode&&r.decode?(await r.decode(),r):await new Promise((n,i)=>{try{r.onload=()=>n(r),r.onerror=o=>i(new Error("Could not load image ".concat(e,": ").concat(o)))}catch(o){i(o)}})}const lgt={};let Dx=!0;async function ugt(e,t,r){let n;KP(r)?n=await UB(e,t,r):n=VB(e,r);const i=t&&t.imagebitmap;return await cgt(n,i)}async function cgt(e,t=null){if((fgt(t)||!Dx)&&(t=null),t)try{return await createImageBitmap(e,t)}catch(r){console.warn(r),Dx=!1}return await createImageBitmap(e)}function fgt(e){for(const t in e||lgt)return!1;return!0}const bo=!1,Md=!0;function WB(e){const t=jp(e);return hgt(t)||vgt(t)||dgt(t)||pgt(t)}function hgt(e){const t=jp(e);return t.byteLength>=24&&t.getUint32(0,bo)===2303741511?{mimeType:"image/png",width:t.getUint32(16,bo),height:t.getUint32(20,bo)}:null}function dgt(e){const t=jp(e);return t.byteLength>=10&&t.getUint32(0,bo)===1195984440?{mimeType:"image/gif",width:t.getUint16(6,Md),height:t.getUint16(8,Md)}:null}function pgt(e){const t=jp(e);return t.byteLength>=14&&t.getUint16(0,bo)===16973&&t.getUint32(2,Md)===t.byteLength?{mimeType:"image/bmp",width:t.getUint32(18,Md),height:t.getUint32(22,Md)}:null}function vgt(e){const t=jp(e);if(!(t.byteLength>=3&&t.getUint16(0,bo)===65496&&t.getUint8(2)===255))return null;const{tableMarkers:n,sofMarkers:i}=ggt();let o=2;for(;o+9<t.byteLength;){const a=t.getUint16(o,bo);if(i.has(a))return{mimeType:"image/jpeg",height:t.getUint16(o+5,bo),width:t.getUint16(o+7,bo)};if(!n.has(a))return null;o+=2,o+=t.getUint16(o,bo)}return null}function ggt(){const e=new Set([65499,65476,65484,65501,65534]);for(let r=65504;r<65520;++r)e.add(r);return{tableMarkers:e,sofMarkers:new Set([65472,65473,65474,65475,65477,65478,65479,65481,65482,65483,65485,65486,65487,65502])}}function jp(e){if(e instanceof DataView)return e;if(ArrayBuffer.isView(e))return new DataView(e.buffer);if(e instanceof ArrayBuffer)return new DataView(e);throw new Error("toDataView")}async function mgt(e,t){const{mimeType:r}=WB(e)||{},n=globalThis._parseImageNode;return r1(n),await n(e,r)}async function _gt(e,t,r){t=t||{};const i=(t.image||{}).type||"auto",{url:o}=r||{},a=ygt(i);let s;switch(a){case"imagebitmap":s=await ugt(e,t,o);break;case"image":s=await UB(e,t,o);break;case"data":s=await mgt(e);break;default:r1(!1)}return i==="data"&&(s=rgt(s)),s}function ygt(e){switch(e){case"auto":case"data":return tgt();default:return Qvt(e),e}}const bgt=["png","jpg","jpeg","gif","webp","bmp","ico","svg"],wgt=["image/png","image/jpeg","image/gif","image/webp","image/bmp","image/vnd.microsoft.icon","image/svg+xml"],Sgt={image:{type:"auto",decode:!0}},GB={id:"image",module:"images",name:"Images",version:Zvt,mimeTypes:wgt,extensions:bgt,parse:_gt,tests:[e=>Boolean(WB(new DataView(e)))],options:Sgt},Ht=new Gp({id:"deck"});let V3={};function Tgt(e){V3=e}function Vr(e,t,r,n){Ht.level>0&&V3[e]&&V3[e].call(null,t,r,n)}function kgt(e){const t=e[0],r=e[e.length-1];return t==="{"&&r==="}"||t==="["&&r==="]"}const Pgt={id:"JSON",name:"JSON",module:"",version:"",options:{},extensions:["json","geojson"],mimeTypes:["application/json","application/geo+json"],testText:kgt,parseTextSync:JSON.parse},xd="8.8.8",tm=globalThis.deck&&globalThis.deck.VERSION;if(tm&&tm!==xd)throw new Error("deck.gl - multiple versions detected: ".concat(tm," vs ").concat(xd));tm||(Ht.log(1,"deck.gl ".concat(xd))(),globalThis.deck={...globalThis.deck,VERSION:xd,version:xd,log:Ht,_registerLoggers:Tgt},kvt([Pgt,[GB,{imagebitmap:{premultiplyAlpha:"none"}}]]));const Egt=globalThis.deck,Ot=new Gp({id:"luma.gl"});function en(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}const Cgt="Invalid WebGLRenderingContext",Agt="Requires WebGL2";function k_(e){return typeof WebGLRenderingContext<"u"&&e instanceof WebGLRenderingContext||typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&Number.isFinite(e._version))}function ee(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function Mgt(e){return ee(e)?e:null}function P_(e){return en(k_(e),Cgt),e}function Wr(e){return en(ee(e),Agt),e}const ed={};function xgt(e){globalThis.console&&globalThis.console.error&&globalThis.console.error(e)}function Lgt(e){globalThis.console&&globalThis.console.log&&globalThis.console.log(e)}function Igt(e,t){ed[e]=!0,t!==void 0&&xgt(t)}function Ogt(e){const t=e.getError;e.getError=function(){let n;do n=t.apply(e),n!==0&&(ed[n]=!0);while(n!==0);for(n in ed)if(ed[n])return delete ed[n],parseInt(n,10);return 0}}const Hp=function e(t){const r=t.gl;this.ext=t,this.isAlive=!0,this.hasBeenBound=!1,this.elementArrayBuffer=null,this.attribs=new Array(t.maxVertexAttribs);for(let n=0;n<this.attribs.length;n++){const i=new e.VertexAttrib(r);this.attribs[n]=i}this.maxAttrib=0};Hp.VertexAttrib=function(t){this.enabled=!1,this.buffer=null,this.size=4,this.type=5126,this.normalized=!1,this.stride=16,this.offset=0,this.cached="",this.recache()};Hp.VertexAttrib.prototype.recache=function(){this.cached=[this.size,this.type,this.normalized,this.stride,this.offset].join(":")};const yu=function(t){const r=this;this.gl=t,Ogt(t);const n=this.original={getParameter:t.getParameter,enableVertexAttribArray:t.enableVertexAttribArray,disableVertexAttribArray:t.disableVertexAttribArray,bindBuffer:t.bindBuffer,getVertexAttrib:t.getVertexAttrib,vertexAttribPointer:t.vertexAttribPointer};t.getParameter=function(o){return o===r.VERTEX_ARRAY_BINDING_OES?r.currentVertexArrayObject===r.defaultVertexArrayObject?null:r.currentVertexArrayObject:n.getParameter.apply(this,arguments)},t.enableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!0,n.enableVertexAttribArray.apply(this,arguments)},t.disableVertexAttribArray=function(o){const a=r.currentVertexArrayObject;a.maxAttrib=Math.max(a.maxAttrib,o);const s=a.attribs[o];return s.enabled=!1,n.disableVertexAttribArray.apply(this,arguments)},t.bindBuffer=function(o,a){switch(o){case 34962:r.currentArrayBuffer=a;break;case 34963:r.currentVertexArrayObject.elementArrayBuffer=a;break}return n.bindBuffer.apply(this,arguments)},t.getVertexAttrib=function(o,a){const l=r.currentVertexArrayObject.attribs[o];switch(a){case 34975:return l.buffer;case 34338:return l.enabled;case 34339:return l.size;case 34340:return l.stride;case 34341:return l.type;case 34922:return l.normalized;default:return n.getVertexAttrib.apply(this,arguments)}},t.vertexAttribPointer=function(o,a,s,l,u,c){const f=r.currentVertexArrayObject;f.maxAttrib=Math.max(f.maxAttrib,o);const h=f.attribs[o];return h.buffer=r.currentArrayBuffer,h.size=a,h.type=s,h.normalized=l,h.stride=u,h.offset=c,h.recache(),n.vertexAttribPointer.apply(this,arguments)},t.instrumentExtension&&t.instrumentExtension(this,"OES_vertex_array_object"),t.canvas&&t.canvas.addEventListener("webglcontextrestored",()=>{Lgt("OESVertexArrayObject emulation library context restored"),r.reset_()},!0),this.reset_()};yu.prototype.VERTEX_ARRAY_BINDING_OES=34229;yu.prototype.reset_=function(){if(this.vertexArrayObjects!==void 0)for(let n=0;n<this.vertexArrayObjects.length;++n)this.vertexArrayObjects.isAlive=!1;const r=this.gl;this.maxVertexAttribs=r.getParameter(34921),this.defaultVertexArrayObject=new Hp(this),this.currentVertexArrayObject=null,this.currentArrayBuffer=null,this.vertexArrayObjects=[this.defaultVertexArrayObject],this.bindVertexArrayOES(null)};yu.prototype.createVertexArrayOES=function(){const t=new Hp(this);return this.vertexArrayObjects.push(t),t};yu.prototype.deleteVertexArrayOES=function(t){t.isAlive=!1,this.vertexArrayObjects.splice(this.vertexArrayObjects.indexOf(t),1),this.currentVertexArrayObject===t&&this.bindVertexArrayOES(null)};yu.prototype.isVertexArrayOES=function(t){return!!(t&&t instanceof Hp&&t.hasBeenBound&&t.ext===this)};yu.prototype.bindVertexArrayOES=function(t){const r=this.gl;if(t&&!t.isAlive){Igt(1282,"bindVertexArrayOES: attempt to bind deleted arrayObject");return}const n=this.original,i=this.currentVertexArrayObject;this.currentVertexArrayObject=t||this.defaultVertexArrayObject,this.currentVertexArrayObject.hasBeenBound=!0;const o=this.currentVertexArrayObject;if(i===o)return;(!i||o.elementArrayBuffer!==i.elementArrayBuffer)&&n.bindBuffer.call(r,34963,o.elementArrayBuffer);let a=this.currentArrayBuffer;const s=Math.max(i?i.maxAttrib:0,o.maxAttrib);for(let l=0;l<=s;l++){const u=o.attribs[l],c=i?i.attribs[l]:null;if((!i||u.enabled!==c.enabled)&&(u.enabled?n.enableVertexAttribArray.call(r,l):n.disableVertexAttribArray.call(r,l)),u.enabled){let f=!1;(!i||u.buffer!==c.buffer)&&(a!==u.buffer&&(n.bindBuffer.call(r,34962,u.buffer),a=u.buffer),f=!0),(f||u.cached!==c.cached)&&n.vertexAttribPointer.call(r,l,u.size,u.type,u.normalized,u.stride,u.offset)}}this.currentArrayBuffer!==a&&n.bindBuffer.call(r,34962,this.currentArrayBuffer)};function Rgt(e){if(typeof e.createVertexArray=="function")return;const t=e.getSupportedExtensions;e.getSupportedExtensions=function(){const i=t.call(this)||[];return i.indexOf("OES_vertex_array_object")<0&&i.push("OES_vertex_array_object"),i};const r=e.getExtension;e.getExtension=function(i){const o=r.call(this,i);return o||(i!=="OES_vertex_array_object"?null:(e.__OESVertexArrayObject||(this.__OESVertexArrayObject=new yu(this)),this.__OESVertexArrayObject))}}const Nx="OES_element_index",Fx="WEBGL_draw_buffers",Dgt="EXT_disjoint_timer_query",Ngt="EXT_disjoint_timer_query_webgl2",Fgt="EXT_texture_filter_anisotropic",$x="WEBGL_debug_renderer_info",$gt=35723,Bgt=4352,zgt=36795,Vgt=34047,Ugt=37445,Wgt=37446,De=e=>ee(e)?void 0:0,Ggt={[3074]:e=>ee(e)?void 0:36064,[$gt]:e=>ee(e)?void 0:Bgt,[35977]:De,[32937]:De,[zgt]:(e,t)=>{const r=ee(e)?e.getExtension(Ngt):e.getExtension(Dgt);return r&&r.GPU_DISJOINT_EXT?t(r.GPU_DISJOINT_EXT):0},[Ugt]:(e,t)=>{const r=e.getExtension($x);return t(r&&r.UNMASKED_VENDOR_WEBGL||7936)},[Wgt]:(e,t)=>{const r=e.getExtension($x);return t(r&&r.UNMASKED_RENDERER_WEBGL||7937)},[Vgt]:(e,t)=>{const r=e.luma.extensions[Fgt];return r?t(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT):1},[32883]:De,[35071]:De,[37447]:De,[36063]:(e,t)=>{if(!ee(e)){const r=e.getExtension(Fx);return r?t(r.MAX_COLOR_ATTACHMENTS_WEBGL):0}},[35379]:De,[35374]:De,[35377]:De,[34852]:e=>{if(!ee(e)){const t=e.getExtension(Fx);return t?t.MAX_DRAW_BUFFERS_WEBGL:0}},[36203]:e=>e.getExtension(Nx)?2147483647:65535,[33001]:e=>e.getExtension(Nx)?16777216:65535,[33e3]:e=>16777216,[37157]:De,[35373]:De,[35657]:De,[36183]:De,[37137]:De,[34045]:De,[35978]:De,[35979]:De,[35968]:De,[35376]:De,[35375]:De,[35659]:De,[37154]:De,[35371]:De,[35658]:De,[35076]:De,[35077]:De,[35380]:De};function jgt(e,t,r){const n=Ggt[r],i=typeof n=="function"?n(e,t,r):n;return i!==void 0?i:t(r)}const Hgt="OES_vertex_array_object",jB="ANGLE_instanced_arrays",Xgt="WEBGL_draw_buffers",Ygt="EXT_disjoint_timer_query",qgt="EXT_texture_filter_anisotropic",Zgt="VertexArray requires WebGL2 or OES_vertex_array_object extension";function Kgt(e,t){return{webgl2:ee(e),ext:e.getExtension(t)}}const HB={[Hgt]:{meta:{suffix:"OES"},createVertexArray:()=>{en(!1,Zgt)},deleteVertexArray:()=>{},bindVertexArray:()=>{},isVertexArray:()=>!1},[jB]:{meta:{suffix:"ANGLE"},vertexAttribDivisor(e,t){en(t===0,"WebGL instanced rendering not supported")},drawElementsInstanced:()=>{},drawArraysInstanced:()=>{}},[Xgt]:{meta:{suffix:"WEBGL"},drawBuffers:()=>{en(!1)}},[Ygt]:{meta:{suffix:"EXT"},createQuery:()=>{en(!1)},deleteQuery:()=>{en(!1)},beginQuery:()=>{en(!1)},endQuery:()=>{},getQuery(e,t){return this.getQueryObject(e,t)},getQueryParameter(e,t){return this.getQueryObject(e,t)},getQueryObject:()=>{}}},ub={readBuffer:(e,t,r)=>{ee(e)&&t(r)},getVertexAttrib:(e,t,r,n)=>{const{webgl2:i,ext:o}=Kgt(e,jB);let a;switch(n){case 35069:a=i?void 0:!1;break;case 35070:a=!i&&!o?0:void 0;break}return a!==void 0?a:t(r,n)},getProgramParameter:(e,t,r,n)=>{if(!ee(e))switch(n){case 35967:return 35981;case 35971:return 0;case 35382:return 0}return t(r,n)},getInternalformatParameter:(e,t,r,n,i)=>{if(!ee(e))switch(i){case 32937:return new Int32Array([0])}return e.getInternalformatParameter(r,n,i)},getTexParameter(e,t,r,n){switch(n){case 34046:const{extensions:i}=e.luma,o=i[qgt];n=o&&o.TEXTURE_MAX_ANISOTROPY_EXT||34046;break}return t(r,n)},getParameter:jgt,hint(e,t,r,n){return t(r,n)}};function Jgt(e){e.luma=e.luma||{};const{luma:t}=e;return t.polyfilled||(Rgt(e),Qgt(e),emt(e,HB),tmt(e,{target:t,target2:e}),t.polyfilled=!0),e}globalThis.polyfillContext=Jgt;function Qgt(e){e.luma.extensions={};const t=e.getSupportedExtensions()||[];for(const r of t)e.luma[r]=e.getExtension(r)}function tmt(e,t){let{target:r,target2:n}=t;Object.keys(ub).forEach(i=>{if(typeof ub[i]=="function"){const o=e[i]?e[i].bind(e):()=>{},a=ub[i].bind(null,e,o);r[i]=a,n[i]=a}})}function emt(e,t){for(const r of Object.getOwnPropertyNames(t))r!=="overrides"&&rmt(e,{extension:r,target:e.luma,target2:e})}function rmt(e,t){let{extension:r,target:n,target2:i}=t;const o=HB[r];en(o);const{meta:a={}}=o,{suffix:s=""}=a,l=e.getExtension(r);for(const u of Object.keys(o)){const c="".concat(u).concat(s);let f=null;u==="meta"||typeof e[u]=="function"||(l&&typeof l[c]=="function"?f=function(){return l[c](...arguments)}:typeof o[u]=="function"&&(f=o[u].bind(n))),f&&(n[u]=f,i[u]=f)}}const JP={[3042]:!1,[32773]:new Float32Array([0,0,0,0]),[32777]:32774,[34877]:32774,[32969]:1,[32968]:0,[32971]:1,[32970]:0,[3106]:new Float32Array([0,0,0,0]),[3107]:[!0,!0,!0,!0],[2884]:!1,[2885]:1029,[2929]:!1,[2931]:1,[2932]:513,[2928]:new Float32Array([0,1]),[2930]:!0,[3024]:!0,[36006]:null,[2886]:2305,[33170]:4352,[2849]:1,[32823]:!1,[32824]:0,[10752]:0,[32938]:1,[32939]:!1,[3089]:!1,[3088]:new Int32Array([0,0,1024,1024]),[2960]:!1,[2961]:0,[2968]:4294967295,[36005]:4294967295,[2962]:519,[2967]:0,[2963]:4294967295,[34816]:519,[36003]:0,[36004]:4294967295,[2964]:7680,[2965]:7680,[2966]:7680,[34817]:7680,[34818]:7680,[34819]:7680,[2978]:[0,0,1024,1024],[3333]:4,[3317]:4,[37440]:!1,[37441]:!1,[37443]:37444,[35723]:4352,[36010]:null,[35977]:!1,[3330]:0,[3332]:0,[3331]:0,[3314]:0,[32878]:0,[3316]:0,[3315]:0,[32877]:0},Ga=(e,t,r)=>t?e.enable(r):e.disable(r),Bx=(e,t,r)=>e.hint(r,t),Tn=(e,t,r)=>e.pixelStorei(r,t),nmt=(e,t)=>{const r=ee(e)?36009:36160;return e.bindFramebuffer(r,t)},imt=(e,t)=>e.bindFramebuffer(36008,t);function bh(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const omt={[3042]:Ga,[32773]:(e,t)=>e.blendColor(...t),[32777]:"blendEquation",[34877]:"blendEquation",[32969]:"blendFunc",[32968]:"blendFunc",[32971]:"blendFunc",[32970]:"blendFunc",[3106]:(e,t)=>e.clearColor(...t),[3107]:(e,t)=>e.colorMask(...t),[2884]:Ga,[2885]:(e,t)=>e.cullFace(t),[2929]:Ga,[2931]:(e,t)=>e.clearDepth(t),[2932]:(e,t)=>e.depthFunc(t),[2928]:(e,t)=>e.depthRange(...t),[2930]:(e,t)=>e.depthMask(t),[3024]:Ga,[35723]:Bx,[36006]:nmt,[2886]:(e,t)=>e.frontFace(t),[33170]:Bx,[2849]:(e,t)=>e.lineWidth(t),[32823]:Ga,[32824]:"polygonOffset",[10752]:"polygonOffset",[35977]:Ga,[32938]:"sampleCoverage",[32939]:"sampleCoverage",[3089]:Ga,[3088]:(e,t)=>e.scissor(...t),[2960]:Ga,[2961]:(e,t)=>e.clearStencil(t),[2968]:(e,t)=>e.stencilMaskSeparate(1028,t),[36005]:(e,t)=>e.stencilMaskSeparate(1029,t),[2962]:"stencilFuncFront",[2967]:"stencilFuncFront",[2963]:"stencilFuncFront",[34816]:"stencilFuncBack",[36003]:"stencilFuncBack",[36004]:"stencilFuncBack",[2964]:"stencilOpFront",[2965]:"stencilOpFront",[2966]:"stencilOpFront",[34817]:"stencilOpBack",[34818]:"stencilOpBack",[34819]:"stencilOpBack",[2978]:(e,t)=>e.viewport(...t),[3333]:Tn,[3317]:Tn,[37440]:Tn,[37441]:Tn,[37443]:Tn,[3330]:Tn,[3332]:Tn,[3331]:Tn,[36010]:imt,[3314]:Tn,[32878]:Tn,[3316]:Tn,[3315]:Tn,[32877]:Tn,framebuffer:(e,t)=>{const r=t&&"handle"in t?t.handle:t;return e.bindFramebuffer(36160,r)},blend:(e,t)=>t?e.enable(3042):e.disable(3042),blendColor:(e,t)=>e.blendColor(...t),blendEquation:(e,t)=>{t=bh(t)?t:[t,t],e.blendEquationSeparate(...t)},blendFunc:(e,t)=>{t=bh(t)&&t.length===2?[...t,...t]:t,e.blendFuncSeparate(...t)},clearColor:(e,t)=>e.clearColor(...t),clearDepth:(e,t)=>e.clearDepth(t),clearStencil:(e,t)=>e.clearStencil(t),colorMask:(e,t)=>e.colorMask(...t),cull:(e,t)=>t?e.enable(2884):e.disable(2884),cullFace:(e,t)=>e.cullFace(t),depthTest:(e,t)=>t?e.enable(2929):e.disable(2929),depthFunc:(e,t)=>e.depthFunc(t),depthMask:(e,t)=>e.depthMask(t),depthRange:(e,t)=>e.depthRange(...t),dither:(e,t)=>t?e.enable(3024):e.disable(3024),derivativeHint:(e,t)=>{e.hint(35723,t)},frontFace:(e,t)=>e.frontFace(t),mipmapHint:(e,t)=>e.hint(33170,t),lineWidth:(e,t)=>e.lineWidth(t),polygonOffsetFill:(e,t)=>t?e.enable(32823):e.disable(32823),polygonOffset:(e,t)=>e.polygonOffset(...t),sampleCoverage:(e,t)=>e.sampleCoverage(...t),scissorTest:(e,t)=>t?e.enable(3089):e.disable(3089),scissor:(e,t)=>e.scissor(...t),stencilTest:(e,t)=>t?e.enable(2960):e.disable(2960),stencilMask:(e,t)=>{t=bh(t)?t:[t,t];const[r,n]=t;e.stencilMaskSeparate(1028,r),e.stencilMaskSeparate(1029,n)},stencilFunc:(e,t)=>{t=bh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilFuncSeparate(1028,r,n,i),e.stencilFuncSeparate(1029,o,a,s)},stencilOp:(e,t)=>{t=bh(t)&&t.length===3?[...t,...t]:t;const[r,n,i,o,a,s]=t;e.stencilOpSeparate(1028,r,n,i),e.stencilOpSeparate(1029,o,a,s)},viewport:(e,t)=>e.viewport(...t)};function Ge(e,t,r){return t[e]!==void 0?t[e]:r[e]}const amt={blendEquation:(e,t,r)=>e.blendEquationSeparate(Ge(32777,t,r),Ge(34877,t,r)),blendFunc:(e,t,r)=>e.blendFuncSeparate(Ge(32969,t,r),Ge(32968,t,r),Ge(32971,t,r),Ge(32970,t,r)),polygonOffset:(e,t,r)=>e.polygonOffset(Ge(32824,t,r),Ge(10752,t,r)),sampleCoverage:(e,t,r)=>e.sampleCoverage(Ge(32938,t,r),Ge(32939,t,r)),stencilFuncFront:(e,t,r)=>e.stencilFuncSeparate(1028,Ge(2962,t,r),Ge(2967,t,r),Ge(2963,t,r)),stencilFuncBack:(e,t,r)=>e.stencilFuncSeparate(1029,Ge(34816,t,r),Ge(36003,t,r),Ge(36004,t,r)),stencilOpFront:(e,t,r)=>e.stencilOpSeparate(1028,Ge(2964,t,r),Ge(2965,t,r),Ge(2966,t,r)),stencilOpBack:(e,t,r)=>e.stencilOpSeparate(1029,Ge(34817,t,r),Ge(34818,t,r),Ge(34819,t,r))},zx={enable:(e,t)=>e({[t]:!0}),disable:(e,t)=>e({[t]:!1}),pixelStorei:(e,t,r)=>e({[t]:r}),hint:(e,t,r)=>e({[t]:r}),bindFramebuffer:(e,t,r)=>{switch(t){case 36160:return e({[36006]:r,[36010]:r});case 36009:return e({[36006]:r});case 36008:return e({[36010]:r});default:return null}},blendColor:(e,t,r,n,i)=>e({[32773]:new Float32Array([t,r,n,i])}),blendEquation:(e,t)=>e({[32777]:t,[34877]:t}),blendEquationSeparate:(e,t,r)=>e({[32777]:t,[34877]:r}),blendFunc:(e,t,r)=>e({[32969]:t,[32968]:r,[32971]:t,[32970]:r}),blendFuncSeparate:(e,t,r,n,i)=>e({[32969]:t,[32968]:r,[32971]:n,[32970]:i}),clearColor:(e,t,r,n,i)=>e({[3106]:new Float32Array([t,r,n,i])}),clearDepth:(e,t)=>e({[2931]:t}),clearStencil:(e,t)=>e({[2961]:t}),colorMask:(e,t,r,n,i)=>e({[3107]:[t,r,n,i]}),cullFace:(e,t)=>e({[2885]:t}),depthFunc:(e,t)=>e({[2932]:t}),depthRange:(e,t,r)=>e({[2928]:new Float32Array([t,r])}),depthMask:(e,t)=>e({[2930]:t}),frontFace:(e,t)=>e({[2886]:t}),lineWidth:(e,t)=>e({[2849]:t}),polygonOffset:(e,t,r)=>e({[32824]:t,[10752]:r}),sampleCoverage:(e,t,r)=>e({[32938]:t,[32939]:r}),scissor:(e,t,r,n,i)=>e({[3088]:new Int32Array([t,r,n,i])}),stencilMask:(e,t)=>e({[2968]:t,[36005]:t}),stencilMaskSeparate:(e,t,r)=>e({[t===1028?2968:36005]:r}),stencilFunc:(e,t,r,n)=>e({[2962]:t,[2967]:r,[2963]:n,[34816]:t,[36003]:r,[36004]:n}),stencilFuncSeparate:(e,t,r,n,i)=>e({[t===1028?2962:34816]:r,[t===1028?2967:36003]:n,[t===1028?2963:36004]:i}),stencilOp:(e,t,r,n)=>e({[2964]:t,[2965]:r,[2966]:n,[34817]:t,[34818]:r,[34819]:n}),stencilOpSeparate:(e,t,r,n,i)=>e({[t===1028?2964:34817]:r,[t===1028?2965:34818]:n,[t===1028?2966:34819]:i}),viewport:(e,t,r,n,i)=>e({[2978]:[t,r,n,i]})},io=(e,t)=>e.isEnabled(t),Vx={[3042]:io,[2884]:io,[2929]:io,[3024]:io,[32823]:io,[32926]:io,[32928]:io,[3089]:io,[2960]:io,[35977]:io};function XB(e){for(const t in e)return!1;return!0}function smt(e,t){if(e===t)return!0;const r=Array.isArray(e)||ArrayBuffer.isView(e),n=Array.isArray(t)||ArrayBuffer.isView(t);if(r&&n&&e.length===t.length){for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}return!1}function Ux(e,t){const r=e[t].bind(e);e[t]=function(){const i=arguments.length<=0?void 0:arguments[0];return i in e.state.cache?e.state.enable?e.state.cache[i]:r(...arguments):r(...arguments)},Object.defineProperty(e[t],"name",{value:"".concat(t,"-from-cache"),configurable:!1})}function lmt(e,t,r){const n=e[t].bind(e);e[t]=function(){for(var o=arguments.length,a=new Array(o),s=0;s<o;s++)a[s]=arguments[s];const{valueChanged:l,oldValue:u}=r(e.state._updateCache,...a);return l&&n(...a),u},Object.defineProperty(e[t],"name",{value:"".concat(t,"-to-cache"),configurable:!1})}function umt(e){const t=e.useProgram.bind(e);e.useProgram=function(n){e.state.program!==n&&(t(n),e.state.program=n)}}class cmt{constructor(t){let{copyState:r=!1,log:n=()=>{}}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.program=null,this.stateStack=[],this.enable=!0,this.cache=r?hmt(t):Object.assign({},JP),this.log=n,this._updateCache=this._updateCache.bind(this),Object.seal(this)}push(){this.stateStack.push({})}pop(){en(this.stateStack.length>0);const t=this.stateStack[this.stateStack.length-1];ba(this.gl,t),this.stateStack.pop()}_updateCache(t){let r=!1,n;const i=this.stateStack.length>0&&this.stateStack[this.stateStack.length-1];for(const o in t){en(o!==void 0);const a=t[o],s=this.cache[o];smt(a,s)||(r=!0,n=s,i&&!(o in i)&&(i[o]=s),this.cache[o]=a)}return{valueChanged:r,oldValue:n}}}function YB(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{enable:r=!0,copyState:n}=t;if(en(n!==void 0),!e.state){const{polyfillContext:i}=globalThis;i&&i(e),e.state=new cmt(e,{copyState:n}),umt(e);for(const o in zx){const a=zx[o];lmt(e,o,a)}Ux(e,"getParameter"),Ux(e,"isEnabled")}return e.state.enable=r,e}function fmt(e){e.state||YB(e,{copyState:!1}),e.state.push()}function Wx(e){en(e.state),e.state.pop()}function ba(e,t){if(en(k_(e),"setParameters requires a WebGL context"),XB(t))return;const r={};for(const i in t){const o=Number(i),a=omt[i];a&&(typeof a=="string"?r[a]=!0:a(e,t[i],o))}const n=e.state&&e.state.cache;if(n)for(const i in r){const o=amt[i];o(e,t,n)}}function hmt(e,t){if(t=t||JP,typeof t=="number"){const i=t,o=Vx[i];return o?o(e,i):e.getParameter(i)}const r=Array.isArray(t)?t:Object.keys(t),n={};for(const i of r){const o=Vx[i];n[i]=o?o(e,Number(i)):e.getParameter(Number(i))}return n}function dmt(e){ba(e,JP)}function oi(e,t,r){if(XB(t))return r(e);const{nocatch:n=!0}=t;fmt(e),ba(e,t);let i;if(n)i=r(e),Wx(e);else try{i=r(e)}finally{Wx(e)}return i}function Qc(e){const{luma:t}=e;if(e.canvas&&t){const{clientWidth:r}=t.canvasSizeInfo;return r?e.drawingBufferWidth/r:1}return 1}function cb(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;const n=Qc(e),i=e.drawingBufferWidth,o=e.drawingBufferHeight;return vmt(t,n,i,o,r)}function pmt(e){const t=typeof window>"u"?1:window.devicePixelRatio||1;return Number.isFinite(e)?e<=0?1:e:e?t:1}function vmt(e,t,r,n,i){const o=Gx(e[0],t,r);let a=jx(e[1],t,n,i),s=Gx(e[0]+1,t,r);const l=s===r-1?s:s-1;s=jx(e[1]+1,t,n,i);let u;return i?(s=s===0?s:s+1,u=a,a=s):u=s===n-1?s:s-1,{x:o,y:a,width:Math.max(l-o+1,1),height:Math.max(u-a+1,1)}}function Gx(e,t,r){return Math.min(Math.round(e*t),r-1)}function jx(e,t,r,n){return n?Math.max(0,r-1-Math.round(e*t)):Math.min(Math.round(e*t),r-1)}const QP=xa(),gmt=QP&&typeof document<"u",qB={webgl2:!0,webgl1:!0,throwOnError:!0,manageState:!0,canvas:null,debug:!1,width:800,height:600};function ZB(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};en(QP,`createGLContext only available in the browser.
Create your own headless context or use 'createHeadlessContext' from @luma.gl/test-utils`),e=Object.assign({},qB,e);const{width:t,height:r}=e;function n(s){if(e.throwOnError)throw new Error(s);return console.error(s),null}e.onError=n;let i;const{canvas:o}=e,a=bmt({canvas:o,width:t,height:r,onError:n});return i=ymt(a,e),i?(i=tE(i,e),wmt(i),i):null}function tE(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e||e._instrumented)return e;e._version=e._version||Smt(e),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{},t=Object.assign({},qB,t);const{manageState:r,debug:n}=t;return r&&YB(e,{copyState:!1,log:function(){for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return Ot.log(1,...o)()}}),QP&&n&&(globalThis.makeDebugContext?(e=globalThis.makeDebugContext(e,t),Ot.level=Math.max(Ot.level,1)):Ot.warn('WebGL debug mode not activated. import "@luma.gl/debug" to enable.')()),e._instrumented=!0,e}function mmt(e){const t=e.getParameter(7936),r=e.getParameter(7937),n=e.getExtension("WEBGL_debug_renderer_info"),i=n&&e.getParameter(n.UNMASKED_VENDOR_WEBGL||7936),o=n&&e.getParameter(n.UNMASKED_RENDERER_WEBGL||7937);return{vendor:i||t,renderer:o||r,vendorMasked:t,rendererMasked:r,version:e.getParameter(7938),shadingLanguageVersion:e.getParameter(35724)}}function _mt(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e.canvas){const n=pmt(t.useDevicePixels);Tmt(e,n,t);return}const r=e.getExtension("STACKGL_resize_drawingbuffer");r&&"width"in t&&"height"in t&&r.resize(t.width,t.height)}function ymt(e,t){const{onError:r}=t;let n=null;const i=l=>n=l.statusMessage||n;e.addEventListener("webglcontextcreationerror",i,!1);const{webgl1:o=!0,webgl2:a=!0}=t;let s=null;return a&&(s=s||e.getContext("webgl2",t),s=s||e.getContext("experimental-webgl2",t)),o&&(s=s||e.getContext("webgl",t),s=s||e.getContext("experimental-webgl",t)),e.removeEventListener("webglcontextcreationerror",i,!1),s?(t.onContextLost&&e.addEventListener("webglcontextlost",t.onContextLost,!1),t.onContextRestored&&e.addEventListener("webglcontextrestored",t.onContextRestored,!1),s):r("Failed to create ".concat(a&&!o?"WebGL2":"WebGL"," context: ").concat(n||"Unknown error"))}function bmt(e){let{canvas:t,width:r=800,height:n=600,onError:i}=e,o;return typeof t=="string"?(gmt&&document.readyState==="complete"||i("createGLContext called on canvas '".concat(t,"' before page was loaded")),o=document.getElementById(t)):t?o=t:(o=document.createElement("canvas"),o.id="lumagl-canvas",o.style.width=Number.isFinite(r)?"".concat(r,"px"):"100%",o.style.height=Number.isFinite(n)?"".concat(n,"px"):"100%",document.body.insertBefore(o,document.body.firstChild)),o}function wmt(e){const t=ee(e)?"WebGL2":"WebGL1",r=mmt(e),n=r?"(".concat(r.vendor,",").concat(r.renderer,")"):"",i=e.debug?" debug":"";Ot.info(1,"".concat(t).concat(i," context ").concat(n))()}function Smt(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?2:1}function Tmt(e,t,r){let n="width"in r?r.width:e.canvas.clientWidth,i="height"in r?r.height:e.canvas.clientHeight;(!n||!i)&&(Ot.log(1,"Canvas clientWidth/clientHeight is 0")(),t=1,n=e.canvas.width||1,i=e.canvas.height||1),e.luma=e.luma||{},e.luma.canvasSizeInfo=e.luma.canvasSizeInfo||{};const o=e.luma.canvasSizeInfo;if(o.clientWidth!==n||o.clientHeight!==i||o.devicePixelRatio!==t){let a=t;const s=Math.floor(n*a),l=Math.floor(i*a);e.canvas.width=s,e.canvas.height=l,(e.drawingBufferWidth!==s||e.drawingBufferHeight!==l)&&(Ot.warn("Device pixel ratio clamped")(),a=Math.min(e.drawingBufferWidth/n,e.drawingBufferHeight/i),e.canvas.width=Math.floor(n*a),e.canvas.height=Math.floor(i*a)),Object.assign(e.luma.canvasSizeInfo,{clientWidth:n,clientHeight:i,devicePixelRatio:t})}}const Ld="8.5.16",kmt="set luma.log.level=1 (or higher) to trace rendering";class KB{constructor(){this.stats=new Map}get(t){return this.stats.has(t)||this.stats.set(t,new S_({id:t})),this.stats.get(t)}}const Rl=new KB;if(globalThis.luma&&globalThis.luma.VERSION!==Ld)throw new Error("luma.gl - multiple VERSIONs detected: ".concat(globalThis.luma.VERSION," vs ").concat(Ld));globalThis.luma||(xa()&&Ot.log(1,"luma.gl ".concat(Ld," - ").concat(kmt))(),globalThis.luma=globalThis.luma||{VERSION:Ld,version:Ld,log:Ot,stats:Rl,globals:{modules:{},nodeIO:{}}});function Pmt(e){return typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame(e):setTimeout(e,1e3/60)}function Emt(e){return typeof window<"u"&&window.cancelAnimationFrame?window.cancelAnimationFrame(e):clearTimeout(e)}function mt(e,t){if(!e)throw new Error(t||"luma.gl: assertion failed.")}function fb(e,t){if(typeof t!="string")return t;const r=Number(t);if(!isNaN(r))return r;t=t.replace(/^.*\./,"");const n=e[t];return mt(n!==void 0,"Accessing undefined constant GL.".concat(t)),n}function ks(e,t){t=Number(t);for(const r in e)if(e[r]===t)return"GL.".concat(r);return String(t)}const hb={};function Rs(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"id";hb[e]=hb[e]||1;const t=hb[e]++;return"".concat(e,"-").concat(t)}function Hx(e){return mt(typeof e=="number","Input must be a number"),e&&(e&e-1)===0}function tf(e){let t=!0;for(const r in e){t=!1;break}return t}function JB(e,t,r,n){const i="See luma.gl ".concat(r," Upgrade Guide at https://luma.gl/docs/upgrade-guide"),o=Object.getPrototypeOf(e);n.forEach(a=>{o.methodName||(o[a]=()=>{throw Ot.removed("Calling removed method ".concat(t,".").concat(a,": "),i)(),new Error(a)})})}const Ku="Resource subclass must define virtual methods";class La{get[Symbol.toStringTag](){return"Resource"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P_(t);const{id:n,userData:i={}}=r;this.gl=t,this.gl2=t,this.id=n||Rs(this[Symbol.toStringTag]),this.userData=i,this._bound=!1,this._handle=r.handle,this._handle===void 0&&(this._handle=this._createHandle()),this.byteLength=0,this._initStats(),this._addStats()}toString(){return"".concat(this[Symbol.toStringTag]||this.constructor.name,"(").concat(this.id,")")}get handle(){return this._handle}delete(){let{deleteChildren:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._handle&&this._deleteHandle(this._handle);return this._handle&&this._removeStats(),this._handle=null,r&&t&&r.filter(Boolean).forEach(n=>n.delete()),this}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.handle;if(typeof t!="function")return this._bindHandle(t),this;let r;return this._bound?r=t():(this._bindHandle(this.handle),this._bound=!0,r=t(),this._bound=!1,this._bindHandle(null)),r}unbind(){this.bind(null)}getParameter(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t=fb(this.gl,t),mt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=ee(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension)))){const s=i.webgl1,l="webgl2"in i?i.webgl2:i.webgl1;return o?l:s}}return this._getParameter(t,r)}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{parameters:r,keys:n}=t,i=this.constructor.PARAMETERS||{},o=ee(this.gl),a={},s=r||Object.keys(i);for(const l of s){const u=i[l];if(u&&(!("webgl2"in u)||o)&&(!("extension"in u)||this.gl.getExtension(u.extension))){const f=n?ks(this.gl,l):l;a[f]=this.getParameter(l,t),n&&u.type==="GLenum"&&(a[f]=ks(this.gl,a[f]))}}return a}setParameter(t,r){t=fb(this.gl,t),mt(t);const i=(this.constructor.PARAMETERS||{})[t];if(i){const o=ee(this.gl);if(!((!("webgl2"in i)||o)&&(!("extension"in i)||this.gl.getExtension(i.extension))))throw new Error("Parameter not available on this platform");i.type==="GLenum"&&(r=fb(r))}return this._setParameter(t,r),this}setParameters(t){for(const r in t)this.setParameter(r,t[r]);return this}stubRemovedMethods(t,r,n){return JB(this,t,r,n)}initialize(t){}_createHandle(){throw new Error(Ku)}_deleteHandle(){throw new Error(Ku)}_bindHandle(t){throw new Error(Ku)}_getOptsFromHandle(){throw new Error(Ku)}_getParameter(t,r){throw new Error(Ku)}_setParameter(t,r){throw new Error(Ku)}_context(){return this.gl.luma=this.gl.luma||{},this.gl.luma}_initStats(){this.gl.stats=this.gl.stats||new KB}_addStats(){const t=this[Symbol.toStringTag],r=Rl.get("Resource Counts");r.get("Resources Created").incrementCount(),r.get("".concat(t,"s Created")).incrementCount(),r.get("".concat(t,"s Active")).incrementCount()}_removeStats(){const t=this[Symbol.toStringTag];Rl.get("Resource Counts").get("".concat(t,"s Active")).decrementCount()}_trackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag];this._doTrackAllocatedMemory(t,r),this._doTrackAllocatedMemory(t,r,this.gl.stats.get("Memory Usage"))}_doTrackAllocatedMemory(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this[Symbol.toStringTag],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Rl.get("Memory Usage");n.get("GPU Memory").addCount(t),n.get("".concat(r," Memory")).addCount(t),this.byteLength=t}_trackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag];this._doTrackDeallocatedMemory(t),this._doTrackDeallocatedMemory(t,this.gl.stats.get("Memory Usage"))}_doTrackDeallocatedMemory(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this[Symbol.toStringTag],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Rl.get("Memory Usage");r.get("GPU Memory").subtractCount(this.byteLength),r.get("".concat(t," Memory")).subtractCount(this.byteLength),this.byteLength=0}}const Cmt="Failed to deduce GL constant from typed array";function U3(e){switch(ArrayBuffer.isView(e)?e.constructor:e){case Float32Array:return 5126;case Uint16Array:return 5123;case Uint32Array:return 5125;case Uint8Array:return 5121;case Uint8ClampedArray:return 5121;case Int8Array:return 5120;case Int16Array:return 5122;case Int32Array:return 5124;default:throw new Error(Cmt)}}function fp(e){let{clamped:t=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};switch(e){case 5126:return Float32Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return t?Uint8ClampedArray:Uint8Array;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Failed to deduce typed array type from GL constant")}}function Amt(e){let{data:t,width:r,height:n,bytesPerPixel:i=4,temp:o}=e;const a=r*i;o=o||new Uint8Array(a);for(let s=0;s<n/2;++s){const l=s*a,u=(n-s-1)*a;o.set(t.subarray(l,l+a)),t.copyWithin(l,u,u+a),t.set(o,u)}}function Mmt(e){let{data:t,width:r,height:n}=e;const i=Math.round(r/2),o=Math.round(n/2),a=new Uint8Array(i*o*4);for(let s=0;s<o;s++)for(let l=0;l<i;l++)for(let u=0;u<4;u++)a[(s*i+l)*4+u]=t[(s*2*r+l*2)*4+u];return{data:a,width:i,height:o}}function W3(e,t,r){const{removedProps:n={},deprecatedProps:i={},replacedProps:o={}}=r;for(const s in n)if(s in t){const u=n[s]?"".concat(e,".").concat(n[s]):"N/A";Ot.removed("".concat(e,".").concat(s),u)()}for(const s in i)if(s in t){const l=i[s];Ot.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))()}let a=null;for(const s in o)if(s in t){const l=o[s];Ot.deprecated("".concat(e,".").concat(s),"".concat(e,".").concat(l))(),a=a||Object.assign({},t),a[l]=t[s],delete a[s]}return a||t}const xmt={offset:0,stride:0,type:5126,size:1,divisor:0,normalized:!1,integer:!1},Lmt={deprecatedProps:{instanced:"divisor",isInstanced:"divisor"}};class Cn{static getBytesPerElement(t){return fp(t.type||5126).BYTES_PER_ELEMENT}static getBytesPerVertex(t){return mt(t.size),fp(t.type||5126).BYTES_PER_ELEMENT*t.size}static resolve(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return new Cn(xmt,...r)}constructor(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];r.forEach(i=>this._assign(i)),Object.freeze(this)}toString(){return JSON.stringify(this)}get BYTES_PER_ELEMENT(){return Cn.getBytesPerElement(this)}get BYTES_PER_VERTEX(){return Cn.getBytesPerVertex(this)}_assign(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t=W3("Accessor",t,Lmt),t.type!==void 0&&(this.type=t.type,(t.type===5124||t.type===5125)&&(this.integer=!0)),t.size!==void 0&&(this.size=t.size),t.offset!==void 0&&(this.offset=t.offset),t.stride!==void 0&&(this.stride=t.stride),t.normalized!==void 0&&(this.normalized=t.normalized),t.integer!==void 0&&(this.integer=t.integer),t.divisor!==void 0&&(this.divisor=t.divisor),t.buffer!==void 0&&(this.buffer=t.buffer),t.index!==void 0&&(typeof t.index=="boolean"?this.index=t.index?1:0:this.index=t.index),t.instanced!==void 0&&(this.divisor=t.instanced?1:0),t.isInstanced!==void 0&&(this.divisor=t.isInstanced?1:0),this}}const Xx=10,QB={offset:"accessor.offset",stride:"accessor.stride",type:"accessor.type",size:"accessor.size",divisor:"accessor.divisor",normalized:"accessor.normalized",integer:"accessor.integer",instanced:"accessor.divisor",isInstanced:"accessor.divisor"},Imt={removedProps:{},replacedProps:{bytes:"byteLength"},deprecatedProps:QB},Omt={removedProps:QB};class Ee extends La{get[Symbol.toStringTag](){return"Buffer"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Buffer","v6.0",["layout","setLayout","getIndexedParameter"]),this.target=r.target||(this.gl.webgl2?36662:34962),this.initialize(r),Object.seal(this)}getElementCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Cn.getBytesPerElement(t))}getVertexCount(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.accessor;return Math.round(this.byteLength/Cn.getBytesPerVertex(t))}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return ArrayBuffer.isView(t)&&(t={data:t}),Number.isFinite(t)&&(t={byteLength:t}),t=W3("Buffer",t,Imt),this.usage=t.usage||35044,this.debugData=null,this.setAccessor(Object.assign({},t,t.accessor)),t.data?this._setData(t.data,t.offset,t.byteLength):this._setByteLength(t.byteLength||0),this}setProps(t){return t=W3("Buffer",t,Omt),"accessor"in t&&this.setAccessor(t.accessor),this}setAccessor(t){return t=Object.assign({},t),delete t.buffer,this.accessor=new Cn(t),this}reallocate(t){return t>this.byteLength?(this._setByteLength(t),!0):(this.bytesUsed=t,!1)}setData(t){return this.initialize(t)}subData(t){ArrayBuffer.isView(t)&&(t={data:t});const{data:r,offset:n=0,srcOffset:i=0}=t,o=t.byteLength||t.length;mt(r);const a=this.gl.webgl2?36663:this.target;return this.gl.bindBuffer(a,this.handle),i!==0||o!==void 0?(Wr(this.gl),this.gl.bufferSubData(this.target,n,r,i,o)):this.gl.bufferSubData(a,n,r),this.gl.bindBuffer(a,null),this.debugData=null,this._inferType(r),this}copyData(t){let{sourceBuffer:r,readOffset:n=0,writeOffset:i=0,size:o}=t;const{gl:a}=this;return Wr(a),a.bindBuffer(36662,r.handle),a.bindBuffer(36663,this.handle),a.copyBufferSubData(36662,36663,n,i,o),a.bindBuffer(36662,null),a.bindBuffer(36663,null),this.debugData=null,this}getData(){let{dstData:t=null,srcByteOffset:r=0,dstOffset:n=0,length:i=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Wr(this.gl);const o=fp(this.accessor.type||5126,{clamped:!1}),a=this._getAvailableElementCount(r),s=n;let l,u;t?(u=t.length,l=u-s):(l=Math.min(a,i||a),u=s+l);const c=Math.min(a,l);return i=i||c,mt(i<=c),t=t||new o(u),this.gl.bindBuffer(36662,this.handle),this.gl.getBufferSubData(36662,r,t,n,i),this.gl.bindBuffer(36662,null),t}bind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index,offset:n=0,size:i}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?i!==void 0?this.gl.bindBufferRange(t,r,this.handle,n,i):(mt(n===0),this.gl.bindBufferBase(t,r,this.handle)):this.gl.bindBuffer(t,this.handle),this}unbind(){let{target:t=this.target,index:r=this.accessor&&this.accessor.index}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return t===35345||t===35982?this.gl.bindBufferBase(t,r,null):this.gl.bindBuffer(t,null),this}getDebugData(){return this.debugData?{data:this.debugData,changed:!1}:(this.debugData=this.getData({length:Math.min(Xx,this.byteLength)}),{data:this.debugData,changed:!0})}invalidateDebugData(){this.debugData=null}_setData(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:t.byteLength+r;mt(ArrayBuffer.isView(t)),this._trackDeallocatedMemory();const i=this._getTarget();this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,this.usage),this.gl.bufferSubData(i,r,t),this.gl.bindBuffer(i,null),this.debugData=t.slice(0,Xx),this.bytesUsed=n,this._trackAllocatedMemory(n);const o=U3(t);return mt(o),this.setAccessor(new Cn(this.accessor,{type:o})),this}_setByteLength(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.usage;mt(t>=0),this._trackDeallocatedMemory();let n=t;t===0&&(n=new Float32Array(0));const i=this._getTarget();return this.gl.bindBuffer(i,this.handle),this.gl.bufferData(i,n,r),this.gl.bindBuffer(i,null),this.usage=r,this.debugData=null,this.bytesUsed=t,this._trackAllocatedMemory(t),this}_getTarget(){return this.gl.webgl2?36663:this.target}_getAvailableElementCount(t){const r=fp(this.accessor.type||5126,{clamped:!1}),n=t/r.BYTES_PER_ELEMENT;return this.getElementCount()-n}_inferType(t){this.accessor.type||this.setAccessor(new Cn(this.accessor,{type:U3(t)}))}_createHandle(){return this.gl.createBuffer()}_deleteHandle(){this.gl.deleteBuffer(this.handle),this._trackDeallocatedMemory()}_getParameter(t){this.gl.bindBuffer(this.target,this.handle);const r=this.gl.getBufferParameter(this.target,t);return this.gl.bindBuffer(this.target,null),r}get type(){return Ot.deprecated("Buffer.type","Buffer.accessor.type")(),this.accessor.type}get bytes(){return Ot.deprecated("Buffer.bytes","Buffer.byteLength")(),this.byteLength}setByteLength(t){return Ot.deprecated("setByteLength","reallocate")(),this.reallocate(t)}updateAccessor(t){return Ot.deprecated("updateAccessor(...)","setAccessor(new Accessor(buffer.accessor, ...)")(),this.accessor=new Cn(this.accessor,t),this}}const eE={[6407]:{dataFormat:6407,types:[5121,33635]},[6408]:{dataFormat:6408,types:[5121,32819,32820]},[6406]:{dataFormat:6406,types:[5121]},[6409]:{dataFormat:6409,types:[5121]},[6410]:{dataFormat:6410,types:[5121]},[33326]:{dataFormat:6403,types:[5126],gl2:!0},[33328]:{dataFormat:33319,types:[5126],gl2:!0},[34837]:{dataFormat:6407,types:[5126],gl2:!0},[34836]:{dataFormat:6408,types:[5126],gl2:!0}},tz={[6403]:1,[36244]:1,[33319]:2,[33320]:2,[6407]:3,[36248]:3,[6408]:4,[36249]:4,[6402]:1,[34041]:1,[6406]:1,[6409]:1,[6410]:2},ez={[5126]:4,[5125]:4,[5124]:4,[5123]:2,[5122]:2,[5131]:2,[5120]:1,[5121]:1};function Rmt(e,t){const r=eE[t];if(!r)return!1;if(r.gl1===void 0&&r.gl2===void 0)return!0;const n=ee(e)&&r.gl2||r.gl1;return typeof n=="string"?e.getExtension(n):n}function Dmt(e,t){const r=eE[t];switch(r&&r.types[0]){case 5126:return e.getExtension("OES_texture_float_linear");case 5131:return e.getExtension("OES_texture_half_float_linear");default:return!0}}const Nmt=[9729,9728],Yx=globalThis.WebGLBuffer||function(){};class iu extends La{get[Symbol.toStringTag](){return"Texture"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{format:n,linearFiltering:i}=r;let o=!0;return n&&(o=o&&Rmt(t,n),o=o&&(!i||Dmt(t,n))),o}constructor(t,r){const{id:n=Rs("texture"),handle:i,target:o}=r;super(t,{id:n,handle:i}),this.target=o,this.textureUnit=void 0,this.loaded=!1,this.width=void 0,this.height=void 0,this.depth=void 0,this.format=void 0,this.type=void 0,this.dataFormat=void 0,this.border=void 0,this.textureUnit=void 0,this.mipmaps=void 0}toString(){return"Texture(".concat(this.id,",").concat(this.width,"x").concat(this.height,")")}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.data;if(r instanceof Promise)return r.then(_=>this.initialize(Object.assign({},t,{pixels:_,data:_}))),this;const n=typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement;if(n&&r.readyState<HTMLVideoElement.HAVE_METADATA)return this._video=null,r.addEventListener("loadeddata",()=>this.initialize(t)),this;const{pixels:i=null,format:o=6408,border:a=0,recreate:s=!1,parameters:l={},pixelStore:u={},textureUnit:c=void 0}=t;r||(r=i);let{width:f,height:h,dataFormat:d,type:p,compressed:v=!1,mipmaps:m=!0}=t;const{depth:g=0}=t;return{width:f,height:h,compressed:v,dataFormat:d,type:p}=this._deduceParameters({format:o,type:p,dataFormat:d,compressed:v,data:r,width:f,height:h}),this.width=f,this.height=h,this.depth=g,this.format=o,this.type=p,this.dataFormat=d,this.border=a,this.textureUnit=c,Number.isFinite(this.textureUnit)&&(this.gl.activeTexture(33984+this.textureUnit),this.gl.bindTexture(this.target,this.handle)),m&&this._isNPOT()&&(Ot.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),m=!1,this._updateForNPOT(l)),this.mipmaps=m,this.setImageData({data:r,width:f,height:h,depth:g,format:o,type:p,dataFormat:d,border:a,mipmaps:m,parameters:u,compressed:v}),m&&this.generateMipmap(),this.setParameters(l),s&&(this.data=r),n&&(this._video={video:r,parameters:l,lastTime:r.readyState>=HTMLVideoElement.HAVE_CURRENT_DATA?r.currentTime:-1}),this}update(){if(this._video){const{video:t,parameters:r,lastTime:n}=this._video;if(n===t.currentTime||t.readyState<HTMLVideoElement.HAVE_CURRENT_DATA)return;this.setSubImageData({data:t,parameters:r}),this.mipmaps&&this.generateMipmap(),this._video.lastTime=t.currentTime}}resize(t){let{height:r,width:n,mipmaps:i=!1}=t;return n!==this.width||r!==this.height?this.initialize({width:n,height:r,format:this.format,type:this.type,dataFormat:this.dataFormat,border:this.border,mipmaps:i}):this}generateMipmap(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isNPOT()?(Ot.warn("texture: ".concat(this," is Non-Power-Of-Two, disabling mipmaping"))(),this):(this.mipmaps=!0,this.gl.bindTexture(this.target,this.handle),oi(this.gl,t,()=>{this.gl.generateMipmap(this.target)}),this.gl.bindTexture(this.target,null),this)}setImageData(t){this._trackDeallocatedMemory("Texture");const{target:r=this.target,pixels:n=null,level:i=0,format:o=this.format,border:a=this.border,offset:s=0,parameters:l={}}=t;let{data:u=null,type:c=this.type,width:f=this.width,height:h=this.height,dataFormat:d=this.dataFormat,compressed:p=!1}=t;u||(u=n),{type:c,dataFormat:d,compressed:p,width:f,height:h}=this._deduceParameters({format:o,type:c,dataFormat:d,compressed:p,data:u,width:f,height:h});const{gl:v}=this;v.bindTexture(this.target,this.handle);let m=null;({data:u,dataType:m}=this._getDataType({data:u,compressed:p}));let g,_=0;if(oi(this.gl,l,()=>{switch(m){case"null":v.texImage2D(r,i,o,f,h,a,d,c,u);break;case"typed-array":v.texImage2D(r,i,o,f,h,a,d,c,u,s);break;case"buffer":g=Wr(v),g.bindBuffer(35052,u.handle||u),g.texImage2D(r,i,o,f,h,a,d,c,s),g.bindBuffer(35052,null);break;case"browser-object":ee(v)?v.texImage2D(r,i,o,f,h,a,d,c,u):v.texImage2D(r,i,o,d,c,u);break;case"compressed":for(const[b,w]of u.entries())v.compressedTexImage2D(r,b,w.format,w.width,w.height,a,w.data),_+=w.levelSize;break;default:mt(!1,"Unknown image data type")}}),m==="compressed")this._trackAllocatedMemory(_,"Texture");else if(u&&u.byteLength)this._trackAllocatedMemory(u.byteLength,"Texture");else{const b=tz[this.dataFormat]||4,w=ez[this.type]||1;this._trackAllocatedMemory(this.width*this.height*b*w,"Texture")}return this.loaded=!0,this}setSubImageData(t){let{target:r=this.target,pixels:n=null,data:i=null,x:o=0,y:a=0,width:s=this.width,height:l=this.height,level:u=0,format:c=this.format,type:f=this.type,dataFormat:h=this.dataFormat,compressed:d=!1,offset:p=0,border:v=this.border,parameters:m={}}=t;if({type:f,dataFormat:h,compressed:d,width:s,height:l}=this._deduceParameters({format:c,type:f,dataFormat:h,compressed:d,data:i,width:s,height:l}),mt(this.depth===0,"texSubImage not supported for 3D textures"),i||(i=n),i&&i.data){const g=i;i=g.data,s=g.shape[0],l=g.shape[1]}i instanceof Ee&&(i=i.handle),this.gl.bindTexture(this.target,this.handle),oi(this.gl,m,()=>{if(d)this.gl.compressedTexSubImage2D(r,u,o,a,s,l,c,i);else if(i===null)this.gl.texSubImage2D(r,u,o,a,s,l,h,f,null);else if(ArrayBuffer.isView(i))this.gl.texSubImage2D(r,u,o,a,s,l,h,f,i,p);else if(i instanceof Yx){const g=Wr(this.gl);g.bindBuffer(35052,i),g.texSubImage2D(r,u,o,a,s,l,h,f,p),g.bindBuffer(35052,null)}else ee(this.gl)?Wr(this.gl).texSubImage2D(r,u,o,a,s,l,h,f,i):this.gl.texSubImage2D(r,u,o,a,h,f,i)}),this.gl.bindTexture(this.target,null)}copyFramebuffer(){return Ot.error("Texture.copyFramebuffer({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}getActiveUnit(){return this.gl.getParameter(34016)-33984}bind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,this.handle),t}unbind(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.textureUnit;const{gl:r}=this;return t!==void 0&&(this.textureUnit=t,r.activeTexture(33984+t)),r.bindTexture(this.target,null),t}_getDataType(t){let{data:r,compressed:n=!1}=t;return n?{data:r,dataType:"compressed"}:r===null?{data:r,dataType:"null"}:ArrayBuffer.isView(r)?{data:r,dataType:"typed-array"}:r instanceof Ee?{data:r.handle,dataType:"buffer"}:r instanceof Yx?{data:r,dataType:"buffer"}:{data:r,dataType:"browser-object"}}_deduceParameters(t){const{format:r,data:n}=t;let{width:i,height:o,dataFormat:a,type:s,compressed:l}=t;const u=eE[r];return a=a||u&&u.dataFormat,s=s||u&&u.types[0],l=l||u&&u.compressed,{width:i,height:o}=this._deduceImageSize(n,i,o),{dataFormat:a,type:s,compressed:l,width:i,height:o,format:r,data:n}}_deduceImageSize(t,r,n){let i;return typeof ImageData<"u"&&t instanceof ImageData?i={width:t.width,height:t.height}:typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement?i={width:t.naturalWidth,height:t.naturalHeight}:typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement?i={width:t.width,height:t.height}:typeof ImageBitmap<"u"&&t instanceof ImageBitmap?i={width:t.width,height:t.height}:typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement?i={width:t.videoWidth,height:t.videoHeight}:t?i={width:r,height:n}:i={width:r>=0?r:1,height:n>=0?n:1},mt(i,"Could not deduced texture size"),mt(r===void 0||i.width===r,"Deduced texture width does not match supplied width"),mt(n===void 0||i.height===n,"Deduced texture height does not match supplied height"),i}_createHandle(){return this.gl.createTexture()}_deleteHandle(){this.gl.deleteTexture(this.handle),this._trackDeallocatedMemory("Texture")}_getParameter(t){switch(t){case 4096:return this.width;case 4097:return this.height;default:this.gl.bindTexture(this.target,this.handle);const r=this.gl.getTexParameter(this.target,t);return this.gl.bindTexture(this.target,null),r}}_setParameter(t,r){switch(this.gl.bindTexture(this.target,this.handle),r=this._getNPOTParam(t,r),t){case 33082:case 33083:this.gl.texParameterf(this.handle,t,r);break;case 4096:case 4097:mt(!1);break;default:this.gl.texParameteri(this.target,t,r);break}return this.gl.bindTexture(this.target,null),this}_isNPOT(){return ee(this.gl)||!this.width||!this.height?!1:!Hx(this.width)||!Hx(this.height)}_updateForNPOT(t){t[this.gl.TEXTURE_MIN_FILTER]===void 0&&(t[this.gl.TEXTURE_MIN_FILTER]=this.gl.LINEAR),t[this.gl.TEXTURE_WRAP_S]===void 0&&(t[this.gl.TEXTURE_WRAP_S]=this.gl.CLAMP_TO_EDGE),t[this.gl.TEXTURE_WRAP_T]===void 0&&(t[this.gl.TEXTURE_WRAP_T]=this.gl.CLAMP_TO_EDGE)}_getNPOTParam(t,r){if(this._isNPOT())switch(t){case 10241:Nmt.indexOf(r)===-1&&(r=9729);break;case 10242:case 10243:r!==33071&&(r=33071);break}return r}}let Fmt="";function $mt(e,t){return mt(typeof e=="string"),e=Fmt+e,new Promise((r,n)=>{try{const i=new Image;i.onload=()=>r(i),i.onerror=()=>n(new Error("Could not load image ".concat(e,"."))),i.crossOrigin=t&&t.crossOrigin||"anonymous",i.src=e}catch(i){n(i)}})}class yn extends iu{get[Symbol.toStringTag](){return"Texture2D"}static isSupported(t,r){return iu.isSupported(t,r)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P_(t),(r instanceof Promise||typeof r=="string")&&(r={data:r}),typeof r.data=="string"&&(r=Object.assign({},r,{data:$mt(r.data)})),super(t,Object.assign({},r,{target:3553})),this.initialize(r),Object.seal(this)}}const G3=[34069,34070,34071,34072,34073,34074];class rz extends iu{get[Symbol.toStringTag](){return"TextureCube"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};P_(t),super(t,Object.assign({},r,{target:34067})),this.initialize(r),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{mipmaps:r=!0,parameters:n={}}=t;return this.opts=t,this.setCubeMapImageData(t).then(()=>{this.loaded=!0,r&&this.generateMipmap(t),this.setParameters(n)}),this}subImage(t){let{face:r,data:n,x:i=0,y:o=0,mipmapLevel:a=0}=t;return this._subImage({target:r,data:n,x:i,y:o,mipmapLevel:a})}async setCubeMapImageData(t){let{width:r,height:n,pixels:i,data:o,border:a=0,format:s=6408,type:l=5121}=t;const{gl:u}=this,c=i||o,f=await Promise.all(G3.map(h=>{const d=c[h];return Promise.all(Array.isArray(d)?d:[d])}));this.bind(),G3.forEach((h,d)=>{f[d].length>1&&this.opts.mipmaps!==!1&&Ot.warn("".concat(this.id," has mipmap and multiple LODs."))(),f[d].forEach((p,v)=>{r&&n?u.texImage2D(h,v,s,r,n,a,s,l,p):u.texImage2D(h,v,s,s,l,p)})}),this.unbind()}setImageDataForFace(t){const{face:r,width:n,height:i,pixels:o,data:a,border:s=0,format:l=6408,type:u=5121}=t,{gl:c}=this,f=o||a;return this.bind(),f instanceof Promise?f.then(h=>this.setImageDataForFace(Object.assign({},t,{face:r,data:h,pixels:h}))):this.width||this.height?c.texImage2D(r,0,l,n,i,s,l,u,f):c.texImage2D(r,0,l,l,u,f),this}}rz.FACES=G3;class Bmt extends iu{get[Symbol.toStringTag](){return"Texture3D"}static isSupported(t){return ee(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wr(t),r=Object.assign({depth:1},r,{target:32879,unpackFlipY:!1}),super(t,r),this.initialize(r),Object.seal(this)}setImageData(t){let{level:r=0,dataFormat:n=6408,width:i,height:o,depth:a=1,border:s=0,format:l,type:u=5121,offset:c=0,data:f,parameters:h={}}=t;if(this._trackDeallocatedMemory("Texture"),this.gl.bindTexture(this.target,this.handle),oi(this.gl,h,()=>{ArrayBuffer.isView(f)&&this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,f),f instanceof Ee&&(this.gl.bindBuffer(35052,f.handle),this.gl.texImage3D(this.target,r,n,i,o,a,s,l,u,c))}),f&&f.byteLength)this._trackAllocatedMemory(f.byteLength,"Texture");else{const d=tz[this.dataFormat]||4,p=ez[this.type]||1;this._trackAllocatedMemory(this.width*this.height*this.depth*d*p,"Texture")}return this.loaded=!0,this}}const gl="EXT_color_buffer_float",qx={[33189]:{bpp:2},[33190]:{gl2:!0,bpp:3},[36012]:{gl2:!0,bpp:4},[36168]:{bpp:1},[34041]:{bpp:4},[35056]:{gl2:!0,bpp:4},[36013]:{gl2:!0,bpp:5},[32854]:{bpp:2},[36194]:{bpp:2},[32855]:{bpp:2},[33321]:{gl2:!0,bpp:1},[33330]:{gl2:!0,bpp:1},[33329]:{gl2:!0,bpp:1},[33332]:{gl2:!0,bpp:2},[33331]:{gl2:!0,bpp:2},[33334]:{gl2:!0,bpp:4},[33333]:{gl2:!0,bpp:4},[33323]:{gl2:!0,bpp:2},[33336]:{gl2:!0,bpp:2},[33335]:{gl2:!0,bpp:2},[33338]:{gl2:!0,bpp:4},[33337]:{gl2:!0,bpp:4},[33340]:{gl2:!0,bpp:8},[33339]:{gl2:!0,bpp:8},[32849]:{gl2:!0,bpp:3},[32856]:{gl2:!0,bpp:4},[32857]:{gl2:!0,bpp:4},[36220]:{gl2:!0,bpp:4},[36238]:{gl2:!0,bpp:4},[36975]:{gl2:!0,bpp:4},[36214]:{gl2:!0,bpp:8},[36232]:{gl2:!0,bpp:8},[36226]:{gl2:!0,bpp:16},[36208]:{gl2:!0,bpp:16},[33325]:{gl2:gl,bpp:2},[33327]:{gl2:gl,bpp:4},[34842]:{gl2:gl,bpp:8},[33326]:{gl2:gl,bpp:4},[33328]:{gl2:gl,bpp:8},[34836]:{gl2:gl,bpp:16},[35898]:{gl2:gl,bpp:4}};function zmt(e,t,r){const n=r[t];if(!n)return!1;const i=ee(e)&&n.gl2||n.gl1;return typeof i=="string"?e.getExtension(i):i}class Tc extends La{get[Symbol.toStringTag](){return"Renderbuffer"}static isSupported(t){let{format:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{format:null};return!r||zmt(t,r,qx)}static getSamplesForFormat(t,r){let{format:n}=r;return t.getInternalformatParameter(36161,n,32937)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.initialize(r),Object.seal(this)}initialize(t){let{format:r,width:n=1,height:i=1,samples:o=0}=t;return mt(r,"Needs format"),this._trackDeallocatedMemory(),this.gl.bindRenderbuffer(36161,this.handle),o!==0&&ee(this.gl)?this.gl.renderbufferStorageMultisample(36161,o,r,n,i):this.gl.renderbufferStorage(36161,r,n,i),this.format=r,this.width=n,this.height=i,this.samples=o,this._trackAllocatedMemory(this.width*this.height*(this.samples||1)*qx[this.format].bpp),this}resize(t){let{width:r,height:n}=t;return r!==this.width||n!==this.height?this.initialize({width:r,height:n,format:this.format,samples:this.samples}):this}_createHandle(){return this.gl.createRenderbuffer()}_deleteHandle(){this.gl.deleteRenderbuffer(this.handle),this._trackDeallocatedMemory()}_bindHandle(t){this.gl.bindRenderbuffer(36161,t)}_syncHandle(t){this.format=this.getParameter(36164),this.width=this.getParameter(36162),this.height=this.getParameter(36163),this.samples=this.getParameter(36011)}_getParameter(t){return this.gl.bindRenderbuffer(36161,this.handle),this.gl.getRenderbufferParameter(36161,t)}}const Vmt=256,Umt=1024,Wmt=16384,Zx=6144,Kx=6145,Jx=6146,Qx=34041,nz="clear: bad arguments";function rE(e){let{framebuffer:t=null,color:r=null,depth:n=null,stencil:i=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o={};t&&(o.framebuffer=t);let a=0;r&&(a|=Wmt,r!==!0&&(o.clearColor=r)),n&&(a|=Vmt,n!==!0&&(o.clearDepth=n)),i&&(a|=Umt,n!==!0&&(o.clearStencil=n)),mt(a!==0,nz),oi(e,o,()=>{e.clear(a)})}function Gmt(e){let{framebuffer:t=null,buffer:r=Zx,drawBuffer:n=0,value:i=[0,0,0,0]}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wr(e),oi(e,{framebuffer:t},()=>{switch(r){case Zx:switch(i.constructor){case Int32Array:e.clearBufferiv(r,n,i);break;case Uint32Array:e.clearBufferuiv(r,n,i);break;case Float32Array:default:e.clearBufferfv(r,n,i)}break;case Kx:e.clearBufferfv(Kx,0,[i]);break;case Jx:e.clearBufferiv(Jx,0,[i]);break;case Qx:const[o,a]=i;e.clearBufferfi(Qx,0,o,a);break;default:mt(!1,nz)}})}function jmt(e){switch(e){case 6406:case 33326:case 6403:return 1;case 33328:case 33319:return 2;case 6407:case 34837:return 3;case 6408:case 34836:return 4;default:return mt(!1),0}}function E_(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{sourceX:r=0,sourceY:n=0,sourceFormat:i=6408}=t;let{sourceAttachment:o=36064,target:a=null,sourceWidth:s,sourceHeight:l,sourceType:u}=t;const{framebuffer:c,deleteFramebuffer:f}=iz(e);mt(c);const{gl:h,handle:d,attachments:p}=c;s=s||c.width,l=l||c.height,o===36064&&d===null&&(o=1028),mt(p[o]),u=u||p[o].type,a=Xmt(a,u,i,s,l),u=u||U3(a);const v=h.bindFramebuffer(36160,d);return h.readPixels(r,n,s,l,i,u,a),h.bindFramebuffer(36160,v||null),f&&c.delete(),a}function tL(e){let{sourceAttachment:t=36064,targetMaxHeight:r=Number.MAX_SAFE_INTEGER}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=E_(e,{sourceAttachment:t}),{width:i,height:o}=e;for(;o>r;)({data:n,width:i,height:o}=Mmt({data:n,width:i,height:o}));Amt({data:n,width:i,height:o});const a=document.createElement("canvas");a.width=i,a.height=o;const s=a.getContext("2d"),l=s.createImageData(i,o);return l.data.set(n),s.putImageData(l,0,0),a.toDataURL()}function Hmt(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{sourceX:n=0,sourceY:i=0,targetMipmaplevel:o=0,targetInternalFormat:a=6408}=r;let{targetX:s,targetY:l,targetZ:u,width:c,height:f}=r;const{framebuffer:h,deleteFramebuffer:d}=iz(e);mt(h);const{gl:p,handle:v}=h,m=typeof s<"u"||typeof l<"u"||typeof u<"u";s=s||0,l=l||0,u=u||0;const g=p.bindFramebuffer(36160,v);mt(t);let _=null;if(t instanceof iu&&(_=t,c=Number.isFinite(c)?c:_.width,f=Number.isFinite(f)?f:_.height,_.bind(0),t=_.target),!m)p.copyTexImage2D(t,o,a,n,i,c,f,0);else switch(t){case 3553:case 34067:p.copyTexSubImage2D(t,o,s,l,n,i,c,f);break;case 35866:case 32879:Wr(p).copyTexSubImage3D(t,o,s,l,u,n,i,c,f);break}return _&&_.unbind(),p.bindFramebuffer(36160,g||null),d&&h.delete(),_}function iz(e){return e instanceof lr?{framebuffer:e,deleteFramebuffer:!1}:{framebuffer:r1t(e),deleteFramebuffer:!0}}function Xmt(e,t,r,n,i){if(e)return e;t=t||5121;const o=fp(t,{clamped:!1}),a=jmt(r);return new o(n*i*a)}const Be={WEBGL2:"WEBGL2",VERTEX_ARRAY_OBJECT:"VERTEX_ARRAY_OBJECT",TIMER_QUERY:"TIMER_QUERY",INSTANCED_RENDERING:"INSTANCED_RENDERING",MULTIPLE_RENDER_TARGETS:"MULTIPLE_RENDER_TARGETS",ELEMENT_INDEX_UINT32:"ELEMENT_INDEX_UINT32",BLEND_EQUATION_MINMAX:"BLEND_EQUATION_MINMAX",FLOAT_BLEND:"FLOAT_BLEND",COLOR_ENCODING_SRGB:"COLOR_ENCODING_SRGB",TEXTURE_DEPTH:"TEXTURE_DEPTH",TEXTURE_FLOAT:"TEXTURE_FLOAT",TEXTURE_HALF_FLOAT:"TEXTURE_HALF_FLOAT",TEXTURE_FILTER_LINEAR_FLOAT:"TEXTURE_FILTER_LINEAR_FLOAT",TEXTURE_FILTER_LINEAR_HALF_FLOAT:"TEXTURE_FILTER_LINEAR_HALF_FLOAT",TEXTURE_FILTER_ANISOTROPIC:"TEXTURE_FILTER_ANISOTROPIC",COLOR_ATTACHMENT_RGBA32F:"COLOR_ATTACHMENT_RGBA32F",COLOR_ATTACHMENT_FLOAT:"COLOR_ATTACHMENT_FLOAT",COLOR_ATTACHMENT_HALF_FLOAT:"COLOR_ATTACHMENT_HALF_FLOAT",GLSL_FRAG_DATA:"GLSL_FRAG_DATA",GLSL_FRAG_DEPTH:"GLSL_FRAG_DEPTH",GLSL_DERIVATIVES:"GLSL_DERIVATIVES",GLSL_TEXTURE_LOD:"GLSL_TEXTURE_LOD"};function Ymt(e){const t=new yn(e,{format:6408,type:5126,dataFormat:6408}),r=new lr(e,{id:"test-framebuffer",check:!1,attachments:{[36064]:t}}),n=r.getStatus();return t.delete(),r.delete(),n===36053}const oz={[Be.WEBGL2]:[!1,!0],[Be.VERTEX_ARRAY_OBJECT]:["OES_vertex_array_object",!0],[Be.TIMER_QUERY]:["EXT_disjoint_timer_query","EXT_disjoint_timer_query_webgl2"],[Be.INSTANCED_RENDERING]:["ANGLE_instanced_arrays",!0],[Be.MULTIPLE_RENDER_TARGETS]:["WEBGL_draw_buffers",!0],[Be.ELEMENT_INDEX_UINT32]:["OES_element_index_uint",!0],[Be.BLEND_EQUATION_MINMAX]:["EXT_blend_minmax",!0],[Be.FLOAT_BLEND]:["EXT_float_blend"],[Be.COLOR_ENCODING_SRGB]:["EXT_sRGB",!0],[Be.TEXTURE_DEPTH]:["WEBGL_depth_texture",!0],[Be.TEXTURE_FLOAT]:["OES_texture_float",!0],[Be.TEXTURE_HALF_FLOAT]:["OES_texture_half_float",!0],[Be.TEXTURE_FILTER_LINEAR_FLOAT]:["OES_texture_float_linear"],[Be.TEXTURE_FILTER_LINEAR_HALF_FLOAT]:["OES_texture_half_float_linear"],[Be.TEXTURE_FILTER_ANISOTROPIC]:["EXT_texture_filter_anisotropic"],[Be.COLOR_ATTACHMENT_RGBA32F]:[Ymt,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_FLOAT]:[!1,"EXT_color_buffer_float"],[Be.COLOR_ATTACHMENT_HALF_FLOAT]:["EXT_color_buffer_half_float"],[Be.GLSL_FRAG_DATA]:["WEBGL_draw_buffers",!0],[Be.GLSL_FRAG_DEPTH]:["EXT_frag_depth",!0],[Be.GLSL_DERIVATIVES]:["OES_standard_derivatives",!0],[Be.GLSL_TEXTURE_LOD]:["EXT_shader_texture_lod",!0]},qmt=2;function Zmt(e,t){return nE(e,t)}function nE(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>az(e,r))}function Kmt(e){e.luma=e.luma||{},e.luma.caps=e.luma.caps||{};for(const t in oz)e.luma.caps[t]===void 0&&(e.luma.caps[t]=az(e,t));return e.luma.caps}function az(e,t){return e.luma=e.luma||{},e.luma.caps=e.luma.caps||{},e.luma.caps[t]===void 0&&(e.luma.caps[t]=Jmt(e,t)),e.luma.caps[t]||Ot.log(qmt,"Feature: ".concat(t," not supported"))(),e.luma.caps[t]}function Jmt(e,t){const r=oz[t];mt(r,t);let n;const i=ee(e)&&r[1]||r[0];if(typeof i=="function")n=i(e);else if(Array.isArray(i)){n=!0;for(const o of i)n=n&&Boolean(e.getExtension(o))}else typeof i=="string"?n=Boolean(e.getExtension(i)):typeof i=="boolean"?n=i:mt(!1);return n}const eL="Multiple render targets not supported";class lr extends La{get[Symbol.toStringTag](){return"Framebuffer"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{colorBufferFloat:n,colorBufferHalfFloat:i}=r;let o=!0;return n&&(o=Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("WEBGL_color_buffer_float")||t.getExtension("OES_texture_float"))),i&&(o=o&&Boolean(t.getExtension("EXT_color_buffer_float")||t.getExtension("EXT_color_buffer_half_float"))),o}static getDefaultFramebuffer(t){return t.luma=t.luma||{},t.luma.defaultFramebuffer=t.luma.defaultFramebuffer||new lr(t,{id:"default-framebuffer",handle:null,attachments:{}}),t.luma.defaultFramebuffer}get MAX_COLOR_ATTACHMENTS(){const t=Wr(this.gl);return t.getParameter(t.MAX_COLOR_ATTACHMENTS)}get MAX_DRAW_BUFFERS(){const t=Wr(this.gl);return t.getParameter(t.MAX_DRAW_BUFFERS)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.width=null,this.height=null,this.attachments={},this.readBuffer=36064,this.drawBuffers=[36064],this.ownResources=[],this.initialize(r),Object.seal(this)}get color(){return this.attachments[36064]||null}get texture(){return this.attachments[36064]||null}get depth(){return this.attachments[36096]||this.attachments[33306]||null}get stencil(){return this.attachments[36128]||this.attachments[33306]||null}initialize(t){let{width:r=1,height:n=1,attachments:i=null,color:o=!0,depth:a=!0,stencil:s=!1,check:l=!0,readBuffer:u=void 0,drawBuffers:c=void 0}=t;if(mt(r>=0&&n>=0,"Width and height need to be integers"),this.width=r,this.height=n,i)for(const f in i){const h=i[f];(Array.isArray(h)?h[0]:h).resize({width:r,height:n})}else i=this._createDefaultAttachments(o,a,s,r,n);this.update({clearAttachments:!0,attachments:i,readBuffer:u,drawBuffers:c}),i&&l&&this.checkStatus()}delete(){for(const t of this.ownResources)t.delete();return super.delete(),this}update(t){let{attachments:r={},readBuffer:n,drawBuffers:i,clearAttachments:o=!1,resizeAttachments:a=!0}=t;this.attach(r,{clearAttachments:o,resizeAttachments:a});const{gl:s}=this,l=s.bindFramebuffer(36160,this.handle);return n&&this._setReadBuffer(n),i&&this._setDrawBuffers(i),s.bindFramebuffer(36160,l||null),this}resize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{width:r,height:n}=t;if(this.handle===null)return mt(r===void 0&&n===void 0),this.width=this.gl.drawingBufferWidth,this.height=this.gl.drawingBufferHeight,this;r===void 0&&(r=this.gl.drawingBufferWidth),n===void 0&&(n=this.gl.drawingBufferHeight),r!==this.width&&n!==this.height&&Ot.log(2,"Resizing framebuffer ".concat(this.id," to ").concat(r,"x").concat(n))();for(const i in this.attachments)this.attachments[i].resize({width:r,height:n});return this.width=r,this.height=n,this}attach(t){let{clearAttachments:r=!1,resizeAttachments:n=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i={};r&&Object.keys(this.attachments).forEach(a=>{i[a]=null}),Object.assign(i,t);const o=this.gl.bindFramebuffer(36160,this.handle);for(const a in i){mt(a!==void 0,"Misspelled framebuffer binding point?");const s=Number(a),l=i[s];let u=l;if(!u)this._unattach(s);else if(u instanceof Tc)this._attachRenderbuffer({attachment:s,renderbuffer:u});else if(Array.isArray(l)){const[c,f=0,h=0]=l;u=c,this._attachTexture({attachment:s,texture:c,layer:f,level:h})}else this._attachTexture({attachment:s,texture:u,layer:0,level:0});n&&u&&u.resize({width:this.width,height:this.height})}this.gl.bindFramebuffer(36160,o||null),Object.assign(this.attachments,t),Object.keys(this.attachments).filter(a=>!this.attachments[a]).forEach(a=>{delete this.attachments[a]})}checkStatus(){const t=this.getStatus();if(t!==36053)throw new Error(t1t(t));return this}getStatus(){const{gl:t}=this,r=t.bindFramebuffer(36160,this.handle),n=t.checkFramebufferStatus(36160);return t.bindFramebuffer(36160,r||null),n}clear(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{color:r,depth:n,stencil:i,drawBuffers:o=[]}=t,a=this.gl.bindFramebuffer(36160,this.handle);return(r||n||i)&&rE(this.gl,{color:r,depth:n,stencil:i}),o.forEach((s,l)=>{Gmt(this.gl,{drawBuffer:l,value:s})}),this.gl.bindFramebuffer(36160,a||null),this}readPixels(){return Ot.error("Framebuffer.readPixels() is no logner supported, use readPixelsToArray(framebuffer)")(),null}readPixelsToBuffer(){return Ot.error("Framebuffer.readPixelsToBuffer()is no logner supported, use readPixelsToBuffer(framebuffer)")(),null}copyToDataUrl(){return Ot.error("Framebuffer.copyToDataUrl() is no logner supported, use copyToDataUrl(framebuffer)")(),null}copyToImage(){return Ot.error("Framebuffer.copyToImage() is no logner supported, use copyToImage(framebuffer)")(),null}copyToTexture(){return Ot.error("Framebuffer.copyToTexture({...}) is no logner supported, use copyToTexture(source, target, opts})")(),null}blit(){return Ot.error("Framebuffer.blit({...}) is no logner supported, use blit(source, target, opts)")(),null}invalidate(t){let{attachments:r=[],x:n=0,y:i=0,width:o,height:a}=t;const s=Wr(this.gl),l=s.bindFramebuffer(36008,this.handle);return n===0&&i===0&&o===void 0&&a===void 0?s.invalidateFramebuffer(36008,r):s.invalidateFramebuffer(36008,r,n,i,o,a),s.bindFramebuffer(36008,l),this}getAttachmentParameter(t,r,n){let i=this._getAttachmentParameterFallback(r);return i===null&&(this.gl.bindFramebuffer(36160,this.handle),i=this.gl.getFramebufferAttachmentParameter(36160,t,r),this.gl.bindFramebuffer(36160,null)),n&&i>1e3&&(i=ks(this.gl,i)),i}getAttachmentParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:36064,r=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.constructor.ATTACHMENT_PARAMETERS||[];const i={};for(const o of n){const a=r?ks(this.gl,o):o;i[a]=this.getAttachmentParameter(t,o,r)}return i}getParameters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;const r=Object.keys(this.attachments),n={};for(const i of r){const o=Number(i),a=t?ks(this.gl,o):o;n[a]=this.getAttachmentParameters(o,t)}return n}show(){return typeof window<"u"&&window.open(tL(this),"luma-debug-texture"),this}log(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";if(t>Ot.level||typeof window>"u")return this;r=r||"Framebuffer ".concat(this.id);const n=tL(this,{targetMaxHeight:100});return Ot.image({logLevel:t,message:r,image:n},r)(),this}bind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,this.handle),this}unbind(){let{target:t=36160}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.gl.bindFramebuffer(t,null),this}_createDefaultAttachments(t,r,n,i,o){let a=null;return t&&(a=a||{},a[36064]=new yn(this.gl,{id:"".concat(this.id,"-color0"),pixels:null,format:6408,type:5121,width:i,height:o,mipmaps:!1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.ownResources.push(a[36064])),r&&n?(a=a||{},a[33306]=new Tc(this.gl,{id:"".concat(this.id,"-depth-stencil"),format:35056,width:i,height:111}),this.ownResources.push(a[33306])):r?(a=a||{},a[36096]=new Tc(this.gl,{id:"".concat(this.id,"-depth"),format:33189,width:i,height:o}),this.ownResources.push(a[36096])):n&&mt(!1),a}_unattach(t){const r=this.attachments[t];!r||(r instanceof Tc?this.gl.framebufferRenderbuffer(36160,t,36161,null):this.gl.framebufferTexture2D(36160,t,3553,null,0),delete this.attachments[t])}_attachRenderbuffer(t){let{attachment:r=36064,renderbuffer:n}=t;const{gl:i}=this;i.framebufferRenderbuffer(36160,r,36161,n.handle),this.attachments[r]=n}_attachTexture(t){let{attachment:r=36064,texture:n,layer:i,level:o}=t;const{gl:a}=this;switch(a.bindTexture(n.target,n.handle),n.target){case 35866:case 32879:Wr(a).framebufferTextureLayer(36160,r,n.target,o,i);break;case 34067:const l=Qmt(i);a.framebufferTexture2D(36160,r,l,n.handle,o);break;case 3553:a.framebufferTexture2D(36160,r,3553,n.handle,o);break;default:mt(!1,"Illegal texture type")}a.bindTexture(n.target,null),this.attachments[r]=n}_setReadBuffer(t){const r=Mgt(this.gl);r?r.readBuffer(t):mt(t===36064||t===1029,eL),this.readBuffer=t}_setDrawBuffers(t){const{gl:r}=this,n=Wr(r);if(n)n.drawBuffers(t);else{const i=r.getExtension("WEBGL_draw_buffers");i?i.drawBuffersWEBGL(t):mt(t.length===1&&(t[0]===36064||t[0]===1029),eL)}this.drawBuffers=t}_getAttachmentParameterFallback(t){const r=Kmt(this.gl);switch(t){case 36052:return r.WEBGL2?null:0;case 33298:case 33299:case 33300:case 33301:case 33302:case 33303:return r.WEBGL2?null:8;case 33297:return r.WEBGL2?null:5125;case 33296:return!r.WEBGL2&&!r.EXT_sRGB?9729:null;default:return null}}_createHandle(){return this.gl.createFramebuffer()}_deleteHandle(){this.gl.deleteFramebuffer(this.handle)}_bindHandle(t){return this.gl.bindFramebuffer(36160,t)}}function Qmt(e){return e<34069?e+34069:e}function t1t(e){return(lr.STATUS||{})[e]||"Framebuffer error ".concat(e)}const e1t=[36049,36048,33296,33298,33299,33300,33301,33302,33303];lr.ATTACHMENT_PARAMETERS=e1t;function sz(e,t){mt(e instanceof yn||e instanceof rz||e instanceof Bmt);const r=e.constructor,{gl:n,width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c}=e,f=Object.assign({width:i,height:o,format:a,type:s,dataFormat:l,border:u,mipmaps:c},t);return new r(n,f)}function r1t(e,t){const{gl:r,width:n,height:i,id:o}=e;return new lr(r,Object.assign({},t,{id:"framebuffer-for-".concat(o),width:n,height:i,attachments:{[36064]:e}}))}function em(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"unnamed";const r=/#define[\s*]SHADER_NAME[\s*]([A-Za-z0-9_-]+)[\s*]/,n=e.match(r);return n?n[1]:t}const n1t=35632,i1t=35633;function o1t(e){switch(e){case n1t:return"fragment";case i1t:return"vertex";default:return"unknown type"}}function a1t(e,t,r,n){const i=e.split(/\r?\n/),o={},a={},s=n||em(t)||"(unnamed)",l="".concat(o1t(r)," shader ").concat(s);for(let c=0;c<i.length;c++){const f=i[c];if(f.length<=1)continue;const h=f.split(":"),d=h[0],p=parseInt(h[2],10);if(isNaN(p))throw new Error("GLSL compilation error in ".concat(l,": ").concat(e));d!=="WARNING"?o[p]=f:a[p]=f}const u=s1t(t);return{shaderName:l,errors:rL(o,u),warnings:rL(a,u)}}function rL(e,t){let r="";for(let n=0;n<t.length;n++){const i=t[n];if(!(!e[n+3]&&!e[n+2]&&!e[n+1])&&(r+="".concat(i,`
`),e[n+1])){const o=e[n+1],a=o.split(":",3),s=a[0],l=parseInt(a[1],10)||0,u=o.substring(a.join(":").length+1).trim();r+=lz("^^^ ".concat(s,": ").concat(u,`

`),l)}}return r}function s1t(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:": ";const n=e.split(/\r?\n/),i=String(n.length+t-1).length;return n.map((o,a)=>{const s=String(a+t),l=s.length;return lz(s,i-l)+r+o})}function lz(e,t){let r="";for(let n=0;n<t;++n)r+=" ";return"".concat(r).concat(e)}function uz(e){let t=100;const r=e.match(/[^\s]+/g);if(r.length>=2&&r[0]==="#version"){const n=parseInt(r[1],10);Number.isFinite(n)&&(t=n)}return t}const l1t="Shader: GLSL source code must be a JavaScript string";class hp extends La{get[Symbol.toStringTag](){return"Shader"}static getTypeName(t){switch(t){case 35633:return"vertex-shader";case 35632:return"fragment-shader";default:return mt(!1),"unknown"}}constructor(t,r){P_(t),mt(typeof r.source=="string",l1t);const n=em(r.source,null)||r.id||Rs("unnamed ".concat(hp.getTypeName(r.shaderType)));super(t,{id:n}),this.shaderType=r.shaderType,this.source=r.source,this.initialize(r)}initialize(t){let{source:r}=t;const n=em(r,null);n&&(this.id=Rs(n)),this._compile(r)}getParameter(t){return this.gl.getShaderParameter(this.handle,t)}toString(){return"".concat(hp.getTypeName(this.shaderType),":").concat(this.id)}getName(){return em(this.source)||"unnamed-shader"}getSource(){return this.gl.getShaderSource(this.handle)}getTranslatedSource(){const t=this.gl.getExtension("WEBGL_debug_shaders");return t?t.getTranslatedShaderSource(this.handle):"No translated source available. WEBGL_debug_shaders not implemented"}_compile(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.source;if(t.startsWith("#version ")||(t=`#version 100
`.concat(t)),this.source=t,this.gl.shaderSource(this.handle,this.source),this.gl.compileShader(this.handle),!this.getParameter(35713)){const n=this.gl.getShaderInfoLog(this.handle),{shaderName:i,errors:o,warnings:a}=a1t(n,this.source,this.shaderType,this.id);throw Ot.error("GLSL compilation errors in ".concat(i,`
`).concat(o))(),Ot.warn("GLSL compilation warnings in ".concat(i,`
`).concat(a))(),new Error("GLSL compilation errors in ".concat(i))}}_deleteHandle(){this.gl.deleteShader(this.handle)}_getOptsFromHandle(){return{type:this.getParameter(35663),source:this.getSource()}}}class db extends hp{get[Symbol.toStringTag](){return"VertexShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35633}))}_createHandle(){return this.gl.createShader(35633)}}class pb extends hp{get[Symbol.toStringTag](){return"FragmentShader"}constructor(t,r){typeof r=="string"&&(r={source:r}),super(t,Object.assign({},r,{shaderType:35632}))}_createHandle(){return this.gl.createShader(35632)}}const u1t={[5126]:$e.bind(null,"uniform1fv",kn,1,Fr),[35664]:$e.bind(null,"uniform2fv",kn,2,Fr),[35665]:$e.bind(null,"uniform3fv",kn,3,Fr),[35666]:$e.bind(null,"uniform4fv",kn,4,Fr),[5124]:$e.bind(null,"uniform1iv",ja,1,Fr),[35667]:$e.bind(null,"uniform2iv",ja,2,Fr),[35668]:$e.bind(null,"uniform3iv",ja,3,Fr),[35669]:$e.bind(null,"uniform4iv",ja,4,Fr),[35670]:$e.bind(null,"uniform1iv",ja,1,Fr),[35671]:$e.bind(null,"uniform2iv",ja,2,Fr),[35672]:$e.bind(null,"uniform3iv",ja,3,Fr),[35673]:$e.bind(null,"uniform4iv",ja,4,Fr),[35674]:$e.bind(null,"uniformMatrix2fv",kn,4,Yo),[35675]:$e.bind(null,"uniformMatrix3fv",kn,9,Yo),[35676]:$e.bind(null,"uniformMatrix4fv",kn,16,Yo),[35678]:Tr,[35680]:Tr,[5125]:$e.bind(null,"uniform1uiv",mv,1,Fr),[36294]:$e.bind(null,"uniform2uiv",mv,2,Fr),[36295]:$e.bind(null,"uniform3uiv",mv,3,Fr),[36296]:$e.bind(null,"uniform4uiv",mv,4,Fr),[35685]:$e.bind(null,"uniformMatrix2x3fv",kn,6,Yo),[35686]:$e.bind(null,"uniformMatrix2x4fv",kn,8,Yo),[35687]:$e.bind(null,"uniformMatrix3x2fv",kn,6,Yo),[35688]:$e.bind(null,"uniformMatrix3x4fv",kn,12,Yo),[35689]:$e.bind(null,"uniformMatrix4x2fv",kn,8,Yo),[35690]:$e.bind(null,"uniformMatrix4x3fv",kn,12,Yo),[35678]:Tr,[35680]:Tr,[35679]:Tr,[35682]:Tr,[36289]:Tr,[36292]:Tr,[36293]:Tr,[36298]:Tr,[36299]:Tr,[36300]:Tr,[36303]:Tr,[36306]:Tr,[36307]:Tr,[36308]:Tr,[36311]:Tr},c1t={},f1t={},h1t={},nL=[0];function iE(e,t,r,n){t===1&&typeof e=="boolean"&&(e=e?1:0),Number.isFinite(e)&&(nL[0]=e,e=nL);const i=e.length;if(i%t&&Ot.warn("Uniform size should be multiples of ".concat(t),e)(),e instanceof r)return e;let o=n[i];o||(o=new r(i),n[i]=o);for(let a=0;a<i;a++)o[a]=e[a];return o}function kn(e,t){return iE(e,t,Float32Array,c1t)}function ja(e,t){return iE(e,t,Int32Array,f1t)}function mv(e,t){return iE(e,t,Uint32Array,h1t)}function iL(e,t,r){const n=u1t[r.type];if(!n)throw new Error("Unknown GLSL uniform type ".concat(r.type));return n().bind(null,e,t)}function d1t(e){if(e[e.length-1]!=="]")return{name:e,length:1,isArray:!1};const t=/([^[]*)(\[[0-9]+\])?/,r=e.match(t);if(!r||r.length<2)throw new Error("Failed to parse GLSL uniform name ".concat(e));return{name:r[1],length:r[2]||1,isArray:Boolean(r[2])}}function p1t(e,t,r){for(const n in e){const i=e[n];if((!r||Boolean(r[n]))&&!v1t(i))throw t=t?"".concat(t," "):"",console.error("".concat(t," Bad uniform ").concat(n),i),new Error("".concat(t," Bad uniform ").concat(n))}return!0}function v1t(e){return Array.isArray(e)||ArrayBuffer.isView(e)?m1t(e):isFinite(e)||e===!0||e===!1||e instanceof iu||e instanceof Tc?!0:e instanceof lr?Boolean(e.texture):!1}function g1t(e,t,r){if(Array.isArray(r)||ArrayBuffer.isView(r))if(e[t]){const n=e[t];for(let i=0,o=r.length;i<o;++i)n[i]=r[i]}else e[t]=r.slice();else e[t]=r}function m1t(e){if(e.length===0)return!1;const t=Math.min(e.length,16);for(let r=0;r<t;++r)if(!Number.isFinite(e[r]))return!1;return!0}function Tr(){let e=null;return(t,r,n)=>{const i=e!==n;return i&&(t.uniform1i(r,n),e=n),i}}function $e(e,t,r,n){let i=null,o=null;return(a,s,l)=>{const u=t(l,r),c=u.length;let f=!1;if(i===null)i=new Float32Array(c),o=c,f=!0;else{mt(o===c,"Uniform length cannot change.");for(let h=0;h<c;++h)if(u[h]!==i[h]){f=!0;break}}return f&&(n(a,e,s,u),i.set(u)),f}}function Fr(e,t,r,n){e[t](r,n)}function Yo(e,t,r,n){e[t](r,!1,n)}const _1t=5120,y1t=5121,b1t=5122,w1t=5123,oL=0,_v=1,S1t=2,T1t=3,yv=4,k1t=5,P1t=6,ur=5126,E1t=35664,C1t=35665,A1t=35666,wh=5124,M1t=35667,x1t=35668,L1t=35669,Sh=5125,I1t=36294,O1t=36295,R1t=36296,D1t=35670,N1t=35671,F1t=35672,$1t=35673,B1t=35674,z1t=35675,V1t=35676,U1t=35685,W1t=35686,G1t=35687,j1t=35688,H1t=35689,X1t=35690,j3={[ur]:[ur,1,"float"],[E1t]:[ur,2,"vec2"],[C1t]:[ur,3,"vec3"],[A1t]:[ur,4,"vec4"],[wh]:[wh,1,"int"],[M1t]:[wh,2,"ivec2"],[x1t]:[wh,3,"ivec3"],[L1t]:[wh,4,"ivec4"],[Sh]:[Sh,1,"uint"],[I1t]:[Sh,2,"uvec2"],[O1t]:[Sh,3,"uvec3"],[R1t]:[Sh,4,"uvec4"],[D1t]:[ur,1,"bool"],[N1t]:[ur,2,"bvec2"],[F1t]:[ur,3,"bvec3"],[$1t]:[ur,4,"bvec4"],[B1t]:[ur,8,"mat2"],[U1t]:[ur,8,"mat2x3"],[W1t]:[ur,8,"mat2x4"],[z1t]:[ur,12,"mat3"],[G1t]:[ur,12,"mat3x2"],[j1t]:[ur,12,"mat3x4"],[V1t]:[ur,16,"mat4"],[H1t]:[ur,16,"mat4x2"],[X1t]:[ur,16,"mat4x3"]};function Y1t(e){switch(e){case oL:return oL;case _v:return _v;case T1t:return _v;case S1t:return _v;case yv:return yv;case k1t:return yv;case P1t:return yv;default:return mt(!1),0}}function aL(e){const t=j3[e];if(!t)return null;const[r,n]=t;return{type:r,components:n}}function cz(e,t){switch(e){case _1t:case y1t:case b1t:case w1t:e=ur;break}for(const r in j3){const[n,i,o]=j3[r];if(n===e&&i===t)return{glType:r,name:o}}return null}class q1t{constructor(t){this.id=t.id,this.attributeInfos=[],this.attributeInfosByName={},this.attributeInfosByLocation=[],this.varyingInfos=[],this.varyingInfosByName={},Object.seal(this),this._readAttributesFromProgram(t),this._readVaryingsFromProgram(t)}getAttributeInfo(t){const r=Number(t);return Number.isFinite(r)?this.attributeInfosByLocation[r]:this.attributeInfosByName[t]||null}getAttributeLocation(t){const r=this.getAttributeInfo(t);return r?r.location:-1}getAttributeAccessor(t){const r=this.getAttributeInfo(t);return r?r.accessor:null}getVaryingInfo(t){const r=Number(t);return Number.isFinite(r)?this.varyingInfos[r]:this.varyingInfosByName[t]||null}getVaryingIndex(t){const r=this.getVaryingInfo();return r?r.location:-1}getVaryingAccessor(t){const r=this.getVaryingInfo();return r?r.accessor:null}_readAttributesFromProgram(t){const{gl:r}=t,n=r.getProgramParameter(t.handle,35721);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getActiveAttrib(t.handle,i),l=r.getAttribLocation(t.handle,o);l>=0&&this._addAttribute(l,o,a,s)}this.attributeInfos.sort((i,o)=>i.location-o.location)}_readVaryingsFromProgram(t){const{gl:r}=t;if(!ee(r))return;const n=r.getProgramParameter(t.handle,35971);for(let i=0;i<n;i++){const{name:o,type:a,size:s}=r.getTransformFeedbackVarying(t.handle,i);this._addVarying(i,o,a,s)}this.varyingInfos.sort((i,o)=>i.location-o.location)}_addAttribute(t,r,n,i){const{type:o,components:a}=aL(n),s={type:o,size:i*a};this._inferProperties(t,r,s);const l={location:t,name:r,accessor:new Cn(s)};this.attributeInfos.push(l),this.attributeInfosByLocation[t]=l,this.attributeInfosByName[l.name]=l}_inferProperties(t,r,n){/instance/i.test(r)&&(n.divisor=1)}_addVarying(t,r,n,i){const{type:o,components:a}=aL(n),s=new Cn({type:o,size:i*a}),l={location:t,name:r,accessor:s};this.varyingInfos.push(l),this.varyingInfosByName[l.name]=l}}const sL=4,Z1t=35981,K1t=["setVertexArray","setAttributes","setBuffers","unsetBuffers","use","getUniformCount","getUniformInfo","getUniformLocation","getUniformValue","getVarying","getFragDataLocation","getAttachedShaders","getAttributeCount","getAttributeLocation","getAttributeInfo"];class fz extends La{get[Symbol.toStringTag](){return"Program"}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.stubRemovedMethods("Program","v6.0",K1t),this._isCached=!1,this.initialize(r),Object.seal(this),this._setId(r.id)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{hash:r,vs:n,fs:i,varyings:o,bufferMode:a=Z1t}=t;return this.hash=r||"",this.vs=typeof n=="string"?new db(this.gl,{id:"".concat(t.id,"-vs"),source:n}):n,this.fs=typeof i=="string"?new pb(this.gl,{id:"".concat(t.id,"-fs"),source:i}):i,mt(this.vs instanceof db),mt(this.fs instanceof pb),this.uniforms={},this._textureUniforms={},o&&o.length>0&&(Wr(this.gl),this.varyings=o,this.gl2.transformFeedbackVaryings(this.handle,o,a)),this._compileAndLink(),this._readUniformLocationsFromLinkedProgram(),this.configuration=new q1t(this),this.setProps(t)}delete(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._isCached?this:super.delete(t)}setProps(t){return"uniforms"in t&&this.setUniforms(t.uniforms),this}draw(t){let{logPriority:r,drawMode:n=4,vertexCount:i,offset:o=0,start:a,end:s,isIndexed:l=!1,indexType:u=5123,instanceCount:c=0,isInstanced:f=c>0,vertexArray:h=null,transformFeedback:d,framebuffer:p,parameters:v={},uniforms:m,samplers:g}=t;if((m||g)&&(Ot.deprecated("Program.draw({uniforms})","Program.setUniforms(uniforms)")(),this.setUniforms(m||{})),Ot.priority>=r){const _=p?p.id:"default",b="mode=".concat(ks(this.gl,n)," verts=").concat(i," ")+"instances=".concat(c," indexType=").concat(ks(this.gl,u)," ")+"isInstanced=".concat(f," isIndexed=").concat(l," ")+"Framebuffer=".concat(_);Ot.log(r,b)()}return mt(h),this.gl.useProgram(this.handle),!this._areTexturesRenderable()||i===0||f&&c===0?!1:(h.bindForDraw(i,c,()=>{if(p!==void 0&&(v=Object.assign({},v,{framebuffer:p})),d){const _=Y1t(n);d.begin(_)}this._bindTextures(),oi(this.gl,v,()=>{l&&f?this.gl2.drawElementsInstanced(n,i,u,o,c):l&&ee(this.gl)&&!isNaN(a)&&!isNaN(s)?this.gl2.drawRangeElements(n,a,s,i,u,o):l?this.gl.drawElements(n,i,u,o):f?this.gl2.drawArraysInstanced(n,o,i,c):this.gl.drawArrays(n,o,i)}),d&&d.end()}),!0)}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Ot.priority>=2&&p1t(t,this.id,this._uniformSetters),this.gl.useProgram(this.handle);for(const r in t){const n=t[r],i=this._uniformSetters[r];if(i){let o=n,a=!1;if(o instanceof lr&&(o=o.texture),o instanceof iu)if(a=this.uniforms[r]!==n,a){i.textureIndex===void 0&&(i.textureIndex=this._textureIndexCounter++);const s=o,{textureIndex:l}=i;s.bind(l),o=l,this._textureUniforms[r]=s}else o=i.textureIndex;else this._textureUniforms[r]&&delete this._textureUniforms[r];(i(o)||a)&&g1t(this.uniforms,r,n)}}return this}_areTexturesRenderable(){let t=!0;for(const r in this._textureUniforms){const n=this._textureUniforms[r];n.update(),t=t&&n.loaded}return t}_bindTextures(){for(const t in this._textureUniforms){const r=this._uniformSetters[t].textureIndex;this._textureUniforms[t].bind(r)}}_createHandle(){return this.gl.createProgram()}_deleteHandle(){this.gl.deleteProgram(this.handle)}_getOptionsFromHandle(t){const r=this.gl.getAttachedShaders(t),n={};for(const i of r)switch(this.gl.getShaderParameter(this.handle,35663)){case 35633:n.vs=new db({handle:i});break;case 35632:n.fs=new pb({handle:i});break}return n}_getParameter(t){return this.gl.getProgramParameter(this.handle,t)}_setId(t){if(!t){const r=this._getName();this.id=Rs(r)}}_getName(){let t=this.vs.getName()||this.fs.getName();return t=t.replace(/shader/i,""),t=t?"".concat(t,"-program"):"program",t}_compileAndLink(){const{gl:t}=this;if(t.attachShader(this.handle,this.vs.handle),t.attachShader(this.handle,this.fs.handle),Ot.time(sL,"linkProgram for ".concat(this._getName()))(),t.linkProgram(this.handle),Ot.timeEnd(sL,"linkProgram for ".concat(this._getName()))(),t.debug||Ot.level>0){if(!t.getProgramParameter(this.handle,35714))throw new Error("Error linking: ".concat(t.getProgramInfoLog(this.handle)));if(t.validateProgram(this.handle),!t.getProgramParameter(this.handle,35715))throw new Error("Error validating: ".concat(t.getProgramInfoLog(this.handle)))}}_readUniformLocationsFromLinkedProgram(){const{gl:t}=this;this._uniformSetters={},this._uniformCount=this._getParameter(35718);for(let r=0;r<this._uniformCount;r++){const n=this.gl.getActiveUniform(this.handle,r),{name:i}=d1t(n.name);let o=t.getUniformLocation(this.handle,i);if(this._uniformSetters[i]=iL(t,o,n),n.size>1)for(let a=0;a<n.size;a++)o=t.getUniformLocation(this.handle,"".concat(i,"[").concat(a,"]")),this._uniformSetters["".concat(i,"[").concat(a,"]")]=iL(t,o,n)}this._textureIndexCounter=0}getActiveUniforms(t,r){return this.gl2.getActiveUniforms(this.handle,t,r)}getUniformBlockIndex(t){return this.gl2.getUniformBlockIndex(this.handle,t)}getActiveUniformBlockParameter(t,r){return this.gl2.getActiveUniformBlockParameter(this.handle,t,r)}uniformBlockBinding(t,r){this.gl2.uniformBlockBinding(this.handle,t,r)}}const J1t=34918,Q1t=34919,t_t=35007,e_t=36795,r_t=35976,n_t=35887,i_t=36202;class a1 extends La{get[Symbol.toStringTag](){return"Query"}static isSupported(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];const n=ee(t),i=nE(t,Be.TIMER_QUERY);let o=n||i;for(const a of r)switch(a){case"queries":o=o&&n;break;case"timers":o=o&&i;break;default:mt(!1)}return o}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t,r),this.target=null,this._queryPending=!1,this._pollingPromise=null,Object.seal(this)}beginTimeElapsedQuery(){return this.begin(t_t)}beginOcclusionQuery(){let{conservative:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.begin(t?i_t:n_t)}beginTransformFeedbackQuery(){return this.begin(r_t)}begin(t){return this._queryPending?this:(this.target=t,this.gl2.beginQuery(this.target,this.handle),this)}end(){return this._queryPending?this:(this.target&&(this.gl2.endQuery(this.target),this.target=null,this._queryPending=!0),this)}isResultAvailable(){if(!this._queryPending)return!1;const t=this.gl2.getQueryParameter(this.handle,Q1t);return t&&(this._queryPending=!1),t}isTimerDisjoint(){return this.gl2.getParameter(e_t)}getResult(){return this.gl2.getQueryParameter(this.handle,J1t)}getTimerMilliseconds(){return this.getResult()/1e6}createPoll(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Number.POSITIVE_INFINITY;if(this._pollingPromise)return this._pollingPromise;let r=0;return this._pollingPromise=new Promise((n,i)=>{const o=()=>{this.isResultAvailable()?(n(this.getResult()),this._pollingPromise=null):r++>t?(i("Timed out"),this._pollingPromise=null):requestAnimationFrame(o)};requestAnimationFrame(o)}),this._pollingPromise}_createHandle(){return a1.isSupported(this.gl)?this.gl2.createQuery():null}_deleteHandle(){this.gl2.deleteQuery(this.handle)}}class hz extends La{get[Symbol.toStringTag](){return"TransformFeedback"}static isSupported(t){return ee(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Wr(t),super(t,r),this.initialize(r),this.stubRemovedMethods("TransformFeedback","v6.0",["pause","resume"]),Object.seal(this)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.buffers={},this.unused={},this.configuration=null,this.bindOnUse=!0,tf(this.buffers)||this.bind(()=>this._unbindBuffers()),this.setProps(t),this}setProps(t){"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"bindOnUse"in t&&(t=t.bindOnUse),"buffers"in t&&this.setBuffers(t.buffers)}setBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.bind(()=>{for(const r in t)this.setBuffer(r,t[r])}),this}setBuffer(t,r){const n=this._getVaryingIndex(t),{buffer:i,byteSize:o,byteOffset:a}=this._getBufferParams(r);return n<0?(this.unused[t]=i,Ot.warn("".concat(this.id," unused varying buffer ").concat(t))(),this):(this.buffers[n]=r,this.bindOnUse||this._bindBuffer(n,i,a,o),this)}begin(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0;return this.gl.bindTransformFeedback(36386,this.handle),this._bindBuffers(),this.gl.beginTransformFeedback(t),this}end(){return this.gl.endTransformFeedback(),this._unbindBuffers(),this.gl.bindTransformFeedback(36386,null),this}_getBufferParams(t){let r,n,i;return t instanceof Ee?i=t:(i=t.buffer,n=t.byteSize,r=t.byteOffset),(r!==void 0||n!==void 0)&&(r=r||0,n=n||i.byteLength-r),{buffer:i,byteOffset:r,byteSize:n}}_getVaryingInfo(t){return this.configuration&&this.configuration.getVaryingInfo(t)}_getVaryingIndex(t){if(this.configuration)return this.configuration.getVaryingInfo(t).location;const r=Number(t);return Number.isFinite(r)?r:-1}_bindBuffers(){if(this.bindOnUse)for(const t in this.buffers){const{buffer:r,byteSize:n,byteOffset:i}=this._getBufferParams(this.buffers[t]);this._bindBuffer(t,r,i,n)}}_unbindBuffers(){if(this.bindOnUse)for(const t in this.buffers)this._bindBuffer(t,null)}_bindBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3?arguments[3]:void 0;const o=r&&r.handle;return!o||i===void 0?this.gl.bindBufferBase(35982,t,o):this.gl.bindBufferRange(35982,t,o,n,i),this}_createHandle(){return this.gl.createTransformFeedback()}_deleteHandle(){this.gl.deleteTransformFeedback(this.handle)}_bindHandle(t){this.gl.bindTransformFeedback(36386,this.handle)}}let bv=null;function o_t(e){return(!bv||bv.byteLength<e)&&(bv=new ArrayBuffer(e)),bv}function a_t(e,t){const r=o_t(e.BYTES_PER_ELEMENT*t);return new e(r,0,t)}function s_t(e){let{target:t,source:r,start:n=0,count:i=1}=e;const o=r.length,a=i*o;let s=0;for(let l=n;s<o;s++)t[l++]=r[s];for(;s<a;)s<a-s?(t.copyWithin(n+s,n,n+s),s*=2):(t.copyWithin(n+s,n,n+a-s),s=a);return t}const l_t="elements must be GL.ELEMENT_ARRAY_BUFFER";class En extends La{get[Symbol.toStringTag](){return"VertexArrayObject"}static isSupported(t){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).constantAttributeZero?ee(t)||xB()==="Chrome":!0}static getDefaultArray(t){return t.luma=t.luma||{},t.luma.defaultVertexArray||(t.luma.defaultVertexArray=new En(t,{handle:null,isDefaultArray:!0})),t.luma.defaultVertexArray}static getMaxAttributes(t){return En.MAX_ATTRIBUTES=En.MAX_ATTRIBUTES||t.getParameter(34921),En.MAX_ATTRIBUTES}static setConstant(t,r,n){switch(n.constructor){case Float32Array:En._setConstantFloatArray(t,r,n);break;case Int32Array:En._setConstantIntArray(t,r,n);break;case Uint32Array:En._setConstantUintArray(t,r,n);break;default:mt(!1)}}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;super(t,Object.assign({},r,{id:n})),this.buffer=null,this.bufferValue=null,this.isDefaultArray=r.isDefaultArray||!1,this.gl2=t,this.initialize(r),Object.seal(this)}delete(){return super.delete(),this.buffer&&this.buffer.delete(),this}get MAX_ATTRIBUTES(){return En.getMaxAttributes(this.gl)}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.setProps(t)}setProps(t){return this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return mt(!t||t.target===34963,l_t),this.bind(()=>{this.gl.bindBuffer(34963,t?t.handle:null)}),this}setBuffer(t,r,n){if(r.target===34963)return this.setElementBuffer(r,n);const{size:i,type:o,stride:a,offset:s,normalized:l,integer:u,divisor:c}=n,{gl:f,gl2:h}=this;return t=Number(t),this.bind(()=>{f.bindBuffer(34962,r.handle),u?(mt(ee(f)),h.vertexAttribIPointer(t,i,o,a,s)):f.vertexAttribPointer(t,i,o,l,a,s),f.enableVertexAttribArray(t),h.vertexAttribDivisor(t,c||0)}),this}enable(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return!r&&t===0&&!En.isSupported(this.gl,{constantAttributeZero:!0})||(t=Number(t),this.bind(()=>r?this.gl.enableVertexAttribArray(t):this.gl.disableVertexAttribArray(t))),this}getConstantBuffer(t,r){const n=this._normalizeConstantArrayValue(r),i=n.byteLength*t,o=n.length*t;let a=!this.buffer;if(this.buffer=this.buffer||new Ee(this.gl,i),a=a||this.buffer.reallocate(i),a=a||!this._compareConstantArrayValues(n,this.bufferValue),a){const s=a_t(r.constructor,o);s_t({target:s,source:n,start:0,count:o}),this.buffer.subData(s),this.bufferValue=r}return this.buffer}_normalizeConstantArrayValue(t){return Array.isArray(t)?new Float32Array(t):t}_compareConstantArrayValues(t,r){if(!t||!r||t.length!==r.length||t.constructor!==r.constructor)return!1;for(let n=0;n<t.length;++n)if(t[n]!==r[n])return!1;return!0}static _setConstantFloatArray(t,r,n){switch(n.length){case 1:t.vertexAttrib1fv(r,n);break;case 2:t.vertexAttrib2fv(r,n);break;case 3:t.vertexAttrib3fv(r,n);break;case 4:t.vertexAttrib4fv(r,n);break;default:mt(!1)}}static _setConstantIntArray(t,r,n){switch(mt(ee(t)),n.length){case 1:t.vertexAttribI1iv(r,n);break;case 2:t.vertexAttribI2iv(r,n);break;case 3:t.vertexAttribI3iv(r,n);break;case 4:t.vertexAttribI4iv(r,n);break;default:mt(!1)}}static _setConstantUintArray(t,r,n){switch(mt(ee(t)),n.length){case 1:t.vertexAttribI1uiv(r,n);break;case 2:t.vertexAttribI2uiv(r,n);break;case 3:t.vertexAttribI3uiv(r,n);break;case 4:t.vertexAttribI4uiv(r,n);break;default:mt(!1)}}_createHandle(){return this.gl.createVertexArray()}_deleteHandle(t){return this.gl2.deleteVertexArray(t),[this.elements]}_bindHandle(t){this.gl2.bindVertexArray(t)}_getParameter(t,r){let{location:n}=r;return mt(Number.isFinite(n)),this.bind(()=>{switch(t){case 34373:return this.gl.getVertexAttribOffset(n,t);default:return this.gl.getVertexAttrib(n,t)}})}}const u_t="VertexArray: attributes must be Buffers or constants (i.e. typed array)",c_t=/^(.+)__LOCATION_([0-9]+)$/,f_t=["setBuffers","setGeneric","clearBindings","setLocations","setGenericValues","setDivisor","enable","disable"];class h_t{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=r.id||r.program&&r.program.id;this.id=n,this.gl=t,this.configuration=null,this.elements=null,this.elementsAccessor=null,this.values=null,this.accessors=null,this.unused=null,this.drawParams=null,this.buffer=null,this.attributes={},this.vertexArrayObject=new En(t),JB(this,"VertexArray","v6.0",f_t),this.initialize(r),Object.seal(this)}delete(){this.buffer&&this.buffer.delete(),this.vertexArrayObject.delete()}initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.reset(),this.configuration=null,this.bindOnUse=!1,this.setProps(t)}reset(){this.elements=null,this.elementsAccessor=null;const{MAX_ATTRIBUTES:t}=this.vertexArrayObject;return this.values=new Array(t).fill(null),this.accessors=new Array(t).fill(null),this.unused={},this.drawParams=null,this}setProps(t){return"program"in t&&(this.configuration=t.program&&t.program.configuration),"configuration"in t&&(this.configuration=t.configuration),"attributes"in t&&this.setAttributes(t.attributes),"elements"in t&&this.setElementBuffer(t.elements),"bindOnUse"in t&&(t=t.bindOnUse),this}clearDrawParams(){this.drawParams=null}getDrawParams(){return this.drawParams=this.drawParams||this._updateDrawParams(),this.drawParams}setAttributes(t){return Object.assign(this.attributes,t),this.vertexArrayObject.bind(()=>{for(const r in t){const n=t[r];this._setAttribute(r,n)}this.gl.bindBuffer(34962,null)}),this}setElementBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return this.elements=t,this.elementsAccessor=r,this.clearDrawParams(),this.vertexArrayObject.setElementBuffer(t,r),this}setBuffer(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(r.target===34963)return this.setElementBuffer(r,n);const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,r.accessor,n);return i>=0&&(this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.setBuffer(i,r,o)),this}setConstant(t,r){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{location:i,accessor:o}=this._resolveLocationAndAccessor(t,r,Object.assign({size:r.length},n));return i>=0&&(r=this.vertexArrayObject._normalizeConstantArrayValue(r),this.values[i]=r,this.accessors[i]=o,this.clearDrawParams(),this.vertexArrayObject.enable(i,!1)),this}unbindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.vertexArrayObject.setElementBuffer(null),this.buffer=this.buffer||new Ee(this.gl,{accessor:{size:4}});for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++)this.values[t]instanceof Ee&&(this.gl.disableVertexAttribArray(t),this.gl.bindBuffer(34962,this.buffer.handle),this.gl.vertexAttribPointer(t,1,5126,!1,0,0))}),this}bindBuffers(){return this.vertexArrayObject.bind(()=>{this.elements&&this.setElementBuffer(this.elements);for(let t=0;t<this.vertexArrayObject.MAX_ATTRIBUTES;t++){const r=this.values[t];r instanceof Ee&&this.setBuffer(t,r)}}),this}bindForDraw(t,r,n){let i;return this.vertexArrayObject.bind(()=>{this._setConstantAttributes(t,r),i=n()}),i}_resolveLocationAndAccessor(t,r,n,i){const o={location:-1,accessor:null},{location:a,name:s}=this._getAttributeIndex(t);if(!Number.isFinite(a)||a<0)return this.unused[t]=r,Ot.once(3,()=>"unused value ".concat(t," in ").concat(this.id))(),o;const l=this._getAttributeInfo(s||a);if(!l)return o;const u=this.accessors[a]||{},c=Cn.resolve(l.accessor,u,n,i),{size:f,type:h}=c;return mt(Number.isFinite(f)&&Number.isFinite(h)),{location:a,accessor:c}}_getAttributeInfo(t){return this.configuration&&this.configuration.getAttributeInfo(t)}_getAttributeIndex(t){const r=Number(t);if(Number.isFinite(r))return{location:r};const n=c_t.exec(t),i=n?n[1]:t,o=n?Number(n[2]):0;return this.configuration?{location:this.configuration.getAttributeLocation(i)+o,name:i}:{location:-1}}_setAttribute(t,r){if(r instanceof Ee)this.setBuffer(t,r);else if(Array.isArray(r)&&r.length&&r[0]instanceof Ee){const n=r[0],i=r[1];this.setBuffer(t,n,i)}else if(ArrayBuffer.isView(r)||Array.isArray(r)){const n=r;this.setConstant(t,n)}else if(r.buffer instanceof Ee){const n=r;this.setBuffer(t,n.buffer,n)}else throw new Error(u_t)}_setConstantAttributes(t,r){const n=Math.max(t|0,r|0);let i=this.values[0];ArrayBuffer.isView(i)&&this._setConstantAttributeZero(i,n);for(let o=1;o<this.vertexArrayObject.MAX_ATTRIBUTES;o++)i=this.values[o],ArrayBuffer.isView(i)&&this._setConstantAttribute(o,i)}_setConstantAttributeZero(t,r){if(En.isSupported(this.gl,{constantAttributeZero:!0})){this._setConstantAttribute(0,t);return}const n=this.vertexArrayObject.getConstantBuffer(r,t);this.vertexArrayObject.setBuffer(0,n,this.accessors[0])}_setConstantAttribute(t,r){En.setConstant(this.gl,t,r)}_updateDrawParams(){const t={isIndexed:!1,isInstanced:!1,indexCount:1/0,vertexCount:1/0,instanceCount:1/0};for(let r=0;r<this.vertexArrayObject.MAX_ATTRIBUTES;r++)this._updateDrawParamsForLocation(t,r);return this.elements&&(t.elementCount=this.elements.getElementCount(this.elements.accessor),t.isIndexed=!0,t.indexType=this.elementsAccessor.type||this.elements.accessor.type,t.indexOffset=this.elementsAccessor.offset||0),t.indexCount===1/0&&(t.indexCount=0),t.vertexCount===1/0&&(t.vertexCount=0),t.instanceCount===1/0&&(t.instanceCount=0),t}_updateDrawParamsForLocation(t,r){const n=this.values[r],i=this.accessors[r];if(!n)return;const{divisor:o}=i,a=o>0;if(t.isInstanced=t.isInstanced||a,n instanceof Ee){const s=n;if(a){const l=s.getVertexCount(i);t.instanceCount=Math.min(t.instanceCount,l)}else{const l=s.getVertexCount(i);t.vertexCount=Math.min(t.vertexCount,l)}}}setElements(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ot.deprecated("setElements","setElementBuffer")(),this.setElementBuffer(t,r)}}function d_t(e,t){const{maxElts:r=16,size:n=1}=t;let i="[";for(let a=0;a<e.length&&a<r;++a)a>0&&(i+=",".concat(a%n===0?" ":"")),i+=dp(e[a],t);const o=e.length>r?"...":"]";return"".concat(i).concat(o)}function dp(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=1e-16,{isInteger:n=!1}=t;if(Array.isArray(e)||ArrayBuffer.isView(e))return d_t(e,t);if(!Number.isFinite(e))return String(e);if(Math.abs(e)<r)return n?"0":"0.";if(n||Math.abs(e)>100&&Math.abs(e)<1e4)return e.toFixed(0);const i=e.toPrecision(2);return i.indexOf(".0")===i.length-2?i.slice(0,-1):i}function lL(e){let{header:t="Uniforms",program:r,uniforms:n,undefinedOnly:i=!1}=e;mt(r);const o=".*_.*",a=".*Matrix",s=r._uniformSetters,l={},u=Object.keys(s).sort();let c=0;for(const d of u)!d.match(o)&&!d.match(a)&&vb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)d.match(a)&&vb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;for(const d of u)l[d]||vb({table:l,header:t,uniforms:n,uniformName:d,undefinedOnly:i})&&c++;let f=0;const h={};if(!i)for(const d in n){const p=n[d];l[d]||(f++,h[d]={Type:"NOT USED: ".concat(p),[t]:dp(p)})}return{table:l,count:c,unusedTable:h,unusedCount:f}}function vb(e){let{table:t,header:r,uniforms:n,uniformName:i,undefinedOnly:o}=e;const a=n[i],s=p_t(a);return!o||!s?(t[i]={[r]:s?dp(a):"N/A","Uniform Type":s?a:"NOT PROVIDED"},!0):!1}function p_t(e){return e!=null}function v_t(e){let{vertexArray:t,header:r="Attributes"}=e;if(!t.configuration)return{};const n={};t.elements&&(n.ELEMENT_ARRAY_BUFFER=uL(t,t.elements,null,r));const i=t.values;for(const o in i){const a=t._getAttributeInfo(o);if(a){let s="".concat(o,": ").concat(a.name);const l=t.accessors[a.location];l&&(s="".concat(o,": ").concat(g_t(a.name,l))),n[s]=uL(t,i[o],l,r)}}return n}function uL(e,t,r,n){const{gl:i}=e;if(!t)return{[n]:"null","Format ":"N/A"};let o="NOT PROVIDED",a=1,s=0,l=0,u,c,f;if(r&&(o=r.type,a=r.size,o=String(o).replace("Array",""),u=o.indexOf("nt")!==-1),t instanceof Ee){const h=t,{data:d,changed:p}=h.getDebugData();c=p?"*":"",f=d,l=h.byteLength,s=l/d.BYTES_PER_ELEMENT/a;let v;if(r){const m=r.divisor>0;v="".concat(m?"I ":"P "," ").concat(s," (x").concat(a,"=").concat(l," bytes ").concat(ks(i,o),")")}else u=!0,v="".concat(l," bytes");return{[n]:"".concat(c).concat(dp(f,{size:a,isInteger:u})),"Format ":v}}return f=t,a=t.length,o=String(t.constructor.name).replace("Array",""),u=o.indexOf("nt")!==-1,{[n]:"".concat(dp(f,{size:a,isInteger:u})," (constant)"),"Format ":"".concat(a,"x").concat(o," (constant)")}}function g_t(e,t){const{type:r,size:n}=t,i=cz(r,n);return i?"".concat(e," (").concat(i.name,")"):e}function m_t(e){const t={},r="Accessors for ".concat(e.id);for(const n of e.attributeInfos)if(n){const i=cL(n);t["in ".concat(i)]={[r]:JSON.stringify(n.accessor)}}for(const n of e.varyingInfos)if(n){const i=cL(n);t["out ".concat(i)]={[r]:JSON.stringify(n.accessor)}}return t}function cL(e){const{type:t,size:r}=e.accessor,n=cz(t,r);return n?"".concat(n.name," ").concat(e.name):e.name}const fL=xa()&&typeof document<"u";let __t=0;class y_t{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{onCreateContext:r=m=>ZB(m),onAddHTML:n=null,onInitialize:i=()=>{},onRender:o=()=>{},onFinalize:a=()=>{},onError:s,gl:l=null,glOptions:u={},debug:c=!1,createFramebuffer:f=!1,autoResizeViewport:h=!0,autoResizeDrawingBuffer:d=!0,stats:p=Rl.get("animation-loop-".concat(__t++))}=t;let{useDevicePixels:v=!0}=t;"useDevicePixelRatio"in t&&(Ot.deprecated("useDevicePixelRatio","useDevicePixels")(),v=t.useDevicePixelRatio),this.props={onCreateContext:r,onAddHTML:n,onInitialize:i,onRender:o,onFinalize:a,onError:s,gl:l,glOptions:u,debug:c,createFramebuffer:f},this.gl=l,this.needsRedraw=null,this.timeline=null,this.stats=p,this.cpuTime=this.stats.get("CPU Time"),this.gpuTime=this.stats.get("GPU Time"),this.frameRate=this.stats.get("Frame Rate"),this._initialized=!1,this._running=!1,this._animationFrameId=null,this._nextFramePromise=null,this._resolveNextFrame=null,this._cpuStartTime=0,this.setProps({autoResizeViewport:h,autoResizeDrawingBuffer:d,useDevicePixels:v}),this.start=this.start.bind(this),this.stop=this.stop.bind(this),this._pageLoadPromise=null,this._onMousemove=this._onMousemove.bind(this),this._onMouseleave=this._onMouseleave.bind(this)}delete(){this.stop(),this._setDisplay(null)}setNeedsRedraw(t){return mt(typeof t=="string"),this.needsRedraw=this.needsRedraw||t,this}setProps(t){return"autoResizeViewport"in t&&(this.autoResizeViewport=t.autoResizeViewport),"autoResizeDrawingBuffer"in t&&(this.autoResizeDrawingBuffer=t.autoResizeDrawingBuffer),"useDevicePixels"in t&&(this.useDevicePixels=t.useDevicePixels),this}start(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this._running)return this;this._running=!0;const r=this._getPageLoadPromise().then(()=>!this._running||this._initialized?null:(this._createWebGLContext(t),this._createFramebuffer(),this._startEventHandling(),this._initializeCallbackData(),this._updateCallbackData(),this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._gpuTimeQuery=a1.isSupported(this.gl,["timers"])?new a1(this.gl):null,this._initialized=!0,this.onInitialize(this.animationProps))).then(n=>{this._running&&(this._addCallbackData(n||{}),n!==!1&&this._startLoop())});return this.props.onError&&r.catch(this.props.onError),this}redraw(){return this.isContextLost()?this:(this._beginTimers(),this._setupFrame(),this._updateCallbackData(),this._renderFrame(this.animationProps),this._clearNeedsRedraw(),this.offScreen&&this.gl.commit&&this.gl.commit(),this._resolveNextFrame&&(this._resolveNextFrame(this),this._nextFramePromise=null,this._resolveNextFrame=null),this._endTimers(),this)}stop(){return this._running&&(this._finalizeCallbackData(),this._cancelAnimationFrame(this._animationFrameId),this._nextFramePromise=null,this._resolveNextFrame=null,this._animationFrameId=null,this._running=!1),this}attachTimeline(t){return this.timeline=t,this.timeline}detachTimeline(){this.timeline=null}waitForRender(){return this.setNeedsRedraw("waitForRender"),this._nextFramePromise||(this._nextFramePromise=new Promise(t=>{this._resolveNextFrame=t})),this._nextFramePromise}async toDataURL(){return this.setNeedsRedraw("toDataURL"),await this.waitForRender(),this.gl.canvas.toDataURL()}isContextLost(){return this.gl.isContextLost()}onCreateContext(){return this.props.onCreateContext(...arguments)}onInitialize(){return this.props.onInitialize(...arguments)}onRender(){return this.props.onRender(...arguments)}onFinalize(){return this.props.onFinalize(...arguments)}getHTMLControlValue(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;const n=document.getElementById(t);return n?Number(n.value):r}setViewParameters(){return Ot.removed("AnimationLoop.setViewParameters","AnimationLoop.setProps")(),this}_startLoop(){const t=()=>{!this._running||(this.redraw(),this._animationFrameId=this._requestAnimationFrame(t))};this._cancelAnimationFrame(this._animationFrameId),this._animationFrameId=this._requestAnimationFrame(t)}_getPageLoadPromise(){return this._pageLoadPromise||(this._pageLoadPromise=fL?new Promise((t,r)=>{if(fL&&document.readyState==="complete"){t(document);return}window.addEventListener("load",()=>{t(document)})}):Promise.resolve({})),this._pageLoadPromise}_setDisplay(t){this.display&&(this.display.delete(),this.display.animationLoop=null),t&&(t.animationLoop=this),this.display=t}_cancelAnimationFrame(t){return this.display&&this.display.cancelAnimationFrame?this.display.cancelAnimationFrame(t):Emt(t)}_requestAnimationFrame(t){if(this._running)return this.display&&this.display.requestAnimationFrame?this.display.requestAnimationFrame(t):Pmt(t)}_renderFrame(){if(this.display){this.display._renderFrame(...arguments);return}this.onRender(...arguments)}_clearNeedsRedraw(){this.needsRedraw=null}_setupFrame(){this._resizeCanvasDrawingBuffer(),this._resizeViewport(),this._resizeFramebuffer()}_initializeCallbackData(){this.animationProps={gl:this.gl,stop:this.stop,canvas:this.gl.canvas,framebuffer:this.framebuffer,useDevicePixels:this.useDevicePixels,needsRedraw:null,startTime:Date.now(),engineTime:0,tick:0,tock:0,time:0,_timeline:this.timeline,_loop:this,_animationLoop:this,_mousePosition:null}}_updateCallbackData(){const{width:t,height:r,aspect:n}=this._getSizeAndAspect();(t!==this.animationProps.width||r!==this.animationProps.height)&&this.setNeedsRedraw("drawing buffer resized"),n!==this.animationProps.aspect&&this.setNeedsRedraw("drawing buffer aspect changed"),this.animationProps.width=t,this.animationProps.height=r,this.animationProps.aspect=n,this.animationProps.needsRedraw=this.needsRedraw,this.animationProps.engineTime=Date.now()-this.animationProps.startTime,this.timeline&&this.timeline.update(this.animationProps.engineTime),this.animationProps.tick=Math.floor(this.animationProps.time/1e3*60),this.animationProps.tock++,this.animationProps.time=this.timeline?this.timeline.getTime():this.animationProps.engineTime,this.animationProps._offScreen=this.offScreen}_finalizeCallbackData(){this.onFinalize(this.animationProps)}_addCallbackData(t){typeof t=="object"&&t!==null&&(this.animationProps=Object.assign({},this.animationProps,t))}_createWebGLContext(t){if(this.offScreen=t.canvas&&typeof OffscreenCanvas<"u"&&t.canvas instanceof OffscreenCanvas,t=Object.assign({},t,this.props.glOptions),this.gl=this.props.gl?tE(this.props.gl,t):this.onCreateContext(t),!k_(this.gl))throw new Error("AnimationLoop.onCreateContext - illegal context returned");dmt(this.gl),this._createInfoDiv()}_createInfoDiv(){if(this.gl.canvas&&this.props.onAddHTML){const t=document.createElement("div");document.body.appendChild(t),t.style.position="relative";const r=document.createElement("div");r.style.position="absolute",r.style.left="10px",r.style.bottom="10px",r.style.width="300px",r.style.background="white",t.appendChild(this.gl.canvas),t.appendChild(r);const n=this.props.onAddHTML(r);n&&(r.innerHTML=n)}}_getSizeAndAspect(){const t=this.gl.drawingBufferWidth,r=this.gl.drawingBufferHeight;let n=1;const{canvas:i}=this.gl;return i&&i.clientHeight?n=i.clientWidth/i.clientHeight:t>0&&r>0&&(n=t/r),{width:t,height:r,aspect:n}}_resizeViewport(){this.autoResizeViewport&&this.gl.viewport(0,0,this.gl.drawingBufferWidth,this.gl.drawingBufferHeight)}_resizeCanvasDrawingBuffer(){this.autoResizeDrawingBuffer&&_mt(this.gl,{useDevicePixels:this.useDevicePixels})}_createFramebuffer(){this.props.createFramebuffer&&(this.framebuffer=new lr(this.gl))}_resizeFramebuffer(){this.framebuffer&&this.framebuffer.resize({width:this.gl.drawingBufferWidth,height:this.gl.drawingBufferHeight})}_beginTimers(){this.frameRate.timeEnd(),this.frameRate.timeStart(),this._gpuTimeQuery&&this._gpuTimeQuery.isResultAvailable()&&!this._gpuTimeQuery.isTimerDisjoint()&&this.stats.get("GPU Time").addTime(this._gpuTimeQuery.getTimerMilliseconds()),this._gpuTimeQuery&&this._gpuTimeQuery.beginTimeElapsedQuery(),this.cpuTime.timeStart()}_endTimers(){this.cpuTime.timeEnd(),this._gpuTimeQuery&&this._gpuTimeQuery.end()}_startEventHandling(){const{canvas:t}=this.gl;t&&(t.addEventListener("mousemove",this._onMousemove),t.addEventListener("mouseleave",this._onMouseleave))}_onMousemove(t){this.animationProps._mousePosition=[t.offsetX,t.offsetY]}_onMouseleave(t){this.animationProps._mousePosition=null}}const Xp="vs",oE="fs";function In(e,t){if(!e)throw new Error(t||"shadertools: assertion failed.")}const gb={number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},array:{validate(e,t){return Array.isArray(e)||ArrayBuffer.isView(e)}}};function b_t(e){const t={};for(const r in e){const n=e[r],i=w_t(n);t[r]=i}return t}function w_t(e){let t=hL(e);return t==="object"?e?"type"in e?Object.assign({},e,gb[e.type]):"value"in e?(t=hL(e.value),Object.assign({type:t},e,gb[t])):{type:"object",value:e}:{type:"object",value:null}:Object.assign({type:t,value:e},gb[t])}function hL(e){return Array.isArray(e)||ArrayBuffer.isView(e)?"array":typeof e}const S_t="vs",T_t="fs";class dL{constructor(t){let{name:r,vs:n,fs:i,dependencies:o=[],uniforms:a,getUniforms:s,deprecations:l=[],defines:u={},inject:c={},vertexShader:f,fragmentShader:h}=t;In(typeof r=="string"),this.name=r,this.vs=n||f,this.fs=i||h,this.getModuleUniforms=s,this.dependencies=o,this.deprecations=this._parseDeprecationDefinitions(l),this.defines=u,this.injections=k_t(c),a&&(this.uniforms=b_t(a))}getModuleSource(t){let r;switch(t){case S_t:r=this.vs||"";break;case T_t:r=this.fs||"";break;default:In(!1)}return"#define MODULE_".concat(this.name.toUpperCase().replace(/[^0-9a-z]/gi,"_"),`
`).concat(r,"// END MODULE_").concat(this.name,`

`)}getUniforms(t,r){return this.getModuleUniforms?this.getModuleUniforms(t,r):this.uniforms?this._defaultGetUniforms(t):{}}getDefines(){return this.defines}checkDeprecations(t,r){this.deprecations.forEach(n=>{n.regex.test(t)&&(n.deprecated?r.deprecated(n.old,n.new)():r.removed(n.old,n.new)())})}_parseDeprecationDefinitions(t){return t.forEach(r=>{switch(r.type){case"function":r.regex=new RegExp("\\b".concat(r.old,"\\("));break;default:r.regex=new RegExp("".concat(r.type," ").concat(r.old,";"))}}),t}_defaultGetUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r={},n=this.uniforms;for(const i in n){const o=n[i];i in t&&!o.private?(o.validate&&In(o.validate(t[i],o),"".concat(this.name,": invalid ").concat(i)),r[i]=t[i]):r[i]=o.value}return r}}function k_t(e){const t={vs:{},fs:{}};for(const r in e){let n=e[r];const i=r.slice(0,2);typeof n=="string"&&(n={order:0,injection:n}),t[i][r]=n}return t}function P_t(e){return E_t(pz(e))}function E_t(e){const t={},r={};return dz({modules:e,level:0,moduleMap:t,moduleDepth:r}),Object.keys(r).sort((n,i)=>r[i]-r[n]).map(n=>t[n])}function dz(e){let{modules:t,level:r,moduleMap:n,moduleDepth:i}=e;if(r>=5)throw new Error("Possible loop in shader dependency graph");for(const o of t)n[o.name]=o,(i[o.name]===void 0||i[o.name]<r)&&(i[o.name]=r);for(const o of t)o.dependencies&&dz({modules:o.dependencies,level:r+1,moduleMap:n,moduleDepth:i})}function pz(e,t){return e.map(r=>(r instanceof dL||(In(typeof r!="string","Shader module use by name is deprecated. Import shader module '".concat(r,"' and use it directly.")),In(r.name,"shader module has no name"),r=new dL(r),r.dependencies=pz(r.dependencies)),r))}function C_t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=typeof window<"u"?window.navigator||{}:{},r=e.userAgent||t.userAgent||"",n=r.indexOf("MSIE ")!==-1,i=r.indexOf("Trident/")!==-1;return n||i}const A_t=7936,M_t=7937,x_t=7938,L_t=35724,aE={GLSL_FRAG_DATA:["WEBGL_draw_buffers",!0],GLSL_FRAG_DEPTH:["EXT_frag_depth",!0],GLSL_DERIVATIVES:["OES_standard_derivatives",!0],GLSL_TEXTURE_LOD:["EXT_shader_texture_lod",!0]},Pl={};Object.keys(aE).forEach(e=>{Pl[e]=e});function I_t(e){return typeof WebGL2RenderingContext<"u"&&e instanceof WebGL2RenderingContext?!0:Boolean(e&&e._version===2)}function O_t(e){const t=e.getExtension("WEBGL_debug_renderer_info"),r=e.getParameter(t&&t.UNMASKED_VENDOR_WEBGL||A_t),n=e.getParameter(t&&t.UNMASKED_RENDERER_WEBGL||M_t);return{gpuVendor:R_t(r,n),vendor:r,renderer:n,version:e.getParameter(x_t),shadingLanguageVersion:e.getParameter(L_t)}}function R_t(e,t){return e.match(/NVIDIA/i)||t.match(/NVIDIA/i)?"NVIDIA":e.match(/INTEL/i)||t.match(/INTEL/i)?"INTEL":e.match(/AMD/i)||t.match(/AMD/i)||e.match(/ATI/i)||t.match(/ATI/i)?"AMD":"UNKNOWN GPU"}const mb={};function pL(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=aE[t];if(In(n,t),!C_t(r))return!0;if(t in mb)return mb[t];const i=n[0],o=r.behavior||"enable",a="#extension GL_".concat(i," : ").concat(o,`
void main(void) {}`),s=e.createShader(35633);e.shaderSource(s,a),e.compileShader(s);const l=e.getShaderParameter(s,35713);return e.deleteShader(s),mb[t]=l,l}function D_t(e,t){const r=aE[t];In(r,t);const n=I_t(e)&&r[1]||r[0],i=typeof n=="string"?Boolean(e.getExtension(n)):n;return In(i===!1||i===!0),i}function wv(e,t){return t=Array.isArray(t)?t:[t],t.every(r=>D_t(e,r))}function N_t(e){switch(O_t(e).gpuVendor.toLowerCase()){case"nvidia":return`#define NVIDIA_GPU
// Nvidia optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
`;case"intel":return`#define INTEL_GPU
// Intel optimizes away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`;case"amd":return`#define AMD_GPU
`;default:return`#define DEFAULT_GPU
// Prevent driver from optimizing away the calculation necessary for emulated fp64
#define LUMA_FP64_CODE_ELIMINATION_WORKAROUND 1
// Intel's built-in 'tan' function doesn't have acceptable precision
#define LUMA_FP32_TAN_PRECISION_WORKAROUND 1
// Intel GPU doesn't have full 32 bits precision in same cases, causes overflow
#define LUMA_FP64_HIGH_BITS_OVERFLOW_WORKAROUND 1
`}}function F_t(e,t,r){let n=`#if (__VERSION__ > 120)

# define FEATURE_GLSL_DERIVATIVES
# define FEATURE_GLSL_DRAW_BUFFERS
# define FEATURE_GLSL_FRAG_DEPTH
# define FEATURE_GLSL_TEXTURE_LOD

// DEPRECATED FLAGS, remove in v9
# define FRAG_DEPTH
# define DERIVATIVES
# define DRAW_BUFFERS
# define TEXTURE_LOD

#endif // __VERSION
`;return wv(e,Pl.GLSL_FRAG_DEPTH)&&(n+=`
// FRAG_DEPTH => gl_FragDepth is available
#ifdef GL_EXT_frag_depth
#extension GL_EXT_frag_depth : enable
# define FEATURE_GLSL_FRAG_DEPTH
# define FRAG_DEPTH
# define gl_FragDepth gl_FragDepthEXT
#endif
`),wv(e,Pl.GLSL_DERIVATIVES)&&pL(e,Pl.GLSL_DERIVATIVES)&&(n+=`
// DERIVATIVES => dxdF, dxdY and fwidth are available
#ifdef GL_OES_standard_derivatives
#extension GL_OES_standard_derivatives : enable
# define FEATURE_GLSL_DERIVATIVES
# define DERIVATIVES
#endif
`),wv(e,Pl.GLSL_FRAG_DATA)&&pL(e,Pl.GLSL_FRAG_DATA,{behavior:"require"})&&(n+=`
// DRAW_BUFFERS => gl_FragData[] is available
#ifdef GL_EXT_draw_buffers
#extension GL_EXT_draw_buffers : require
#define FEATURE_GLSL_DRAW_BUFFERS
#define DRAW_BUFFERS
#endif
`),wv(e,Pl.GLSL_TEXTURE_LOD)&&(n+=`// TEXTURE_LOD => texture2DLod etc are available
#ifdef GL_EXT_shader_texture_lod
#extension GL_EXT_shader_texture_lod : enable

# define FEATURE_GLSL_TEXTURE_LOD
# define TEXTURE_LOD

#endif
`),n}const $_t=`#ifdef MODULE_LOGDEPTH
  logdepth_adjustPosition(gl_Position);
#endif
`,B_t=`#ifdef MODULE_MATERIAL
  gl_FragColor = material_filterColor(gl_FragColor);
#endif

#ifdef MODULE_LIGHTING
  gl_FragColor = lighting_filterColor(gl_FragColor);
#endif

#ifdef MODULE_FOG
  gl_FragColor = fog_filterColor(gl_FragColor);
#endif

#ifdef MODULE_PICKING
  gl_FragColor = picking_filterHighlightColor(gl_FragColor);
  gl_FragColor = picking_filterPickingColor(gl_FragColor);
#endif

#ifdef MODULE_LOGDEPTH
  logdepth_setFragDepth();
#endif
`,z_t={[Xp]:$_t,[oE]:B_t},rm="__LUMA_INJECT_DECLARATIONS__",vL=/void\s+main\s*\([^)]*\)\s*\{\n?/,gL=/}\n?[^{}]*$/,_b=[];function mL(e,t,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const i=t===Xp;for(const o in r){const a=r[o];a.sort((l,u)=>l.order-u.order),_b.length=a.length;for(let l=0,u=a.length;l<u;++l)_b[l]=a[l].injection;const s="".concat(_b.join(`
`),`
`);switch(o){case"vs:#decl":i&&(e=e.replace(rm,s));break;case"vs:#main-start":i&&(e=e.replace(vL,l=>l+s));break;case"vs:#main-end":i&&(e=e.replace(gL,l=>s+l));break;case"fs:#decl":i||(e=e.replace(rm,s));break;case"fs:#main-start":i||(e=e.replace(vL,l=>l+s));break;case"fs:#main-end":i||(e=e.replace(gL,l=>s+l));break;default:e=e.replace(o,l=>l+s)}}return e=e.replace(rm,""),n&&(e=e.replace(/\}\s*$/,o=>o+z_t[t])),e}function H3(e){const t={};return In(Array.isArray(e)&&e.length>1),e.forEach(r=>{for(const n in r)t[n]=t[n]?"".concat(t[n],`
`).concat(r[n]):r[n]}),t}function ef(e){return new RegExp("\\b".concat(e,"[ \\t]+(\\w+[ \\t]+\\w+(\\[\\w+\\])?;)"),"g")}const vz=[[/^(#version[ \t]+(100|300[ \t]+es))?[ \t]*\n/,`#version 300 es
`],[/\btexture(2D|2DProj|Cube)Lod(EXT)?\(/g,"textureLod("],[/\btexture(2D|2DProj|Cube)(EXT)?\(/g,"texture("]],V_t=[...vz,[ef("attribute"),"in $1"],[ef("varying"),"out $1"]],U_t=[...vz,[ef("varying"),"in $1"]],gz=[[/^#version[ \t]+300[ \t]+es/,"#version 100"],[/\btexture(2D|2DProj|Cube)Lod\(/g,"texture$1LodEXT("],[/\btexture\(/g,"texture2D("],[/\btextureLod\(/g,"texture2DLodEXT("]],W_t=[...gz,[ef("in"),"attribute $1"],[ef("out"),"varying $1"]],G_t=[...gz,[ef("in"),"varying $1"]],X3="gl_FragColor",Y3=/\bout[ \t]+vec4[ \t]+(\w+)[ \t]*;\n?/,j_t=/void\s+main\s*\([^)]*\)\s*\{\n?/;function H_t(e,t,r){switch(t){case 300:return r?s1(e,V_t):X_t(e);case 100:return r?s1(e,W_t):Y_t(e);default:throw new Error("unknown GLSL version ".concat(t))}}function s1(e,t){for(const[r,n]of t)e=e.replace(r,n);return e}function X_t(e){e=s1(e,U_t);const t=e.match(Y3);if(t){const r=t[1];e=e.replace(new RegExp("\\b".concat(X3,"\\b"),"g"),r)}else{const r="fragmentColor";e=e.replace(j_t,n=>"out vec4 ".concat(r,`;
`).concat(n)).replace(new RegExp("\\b".concat(X3,"\\b"),"g"),r)}return e}function Y_t(e){e=s1(e,G_t);const t=e.match(Y3);if(t){const r=t[1];e=e.replace(Y3,"").replace(new RegExp("\\b".concat(r,"\\b"),"g"),X3)}return e}const q_t=`

`.concat(rm,`

`),mz={[Xp]:"vertex",[oE]:"fragment"},Z_t=`precision highp float;

`;function K_t(e,t){const{vs:r,fs:n}=t,i=P_t(t.modules||[]);return{gl:e,vs:_L(e,Object.assign({},t,{source:r,type:Xp,modules:i})),fs:_L(e,Object.assign({},t,{source:n,type:oE,modules:i})),getUniforms:J_t(i)}}function _L(e,t){let{id:r,source:n,type:i,modules:o,defines:a={},hookFunctions:s=[],inject:l={},transpileToGLSL100:u=!1,prologue:c=!0,log:f}=t;In(typeof n=="string","shader source must be a string");const h=i===Xp,d=n.split(`
`);let p=100,v="",m=n;d[0].indexOf("#version ")===0?(p=300,v=d[0],m=d.slice(1).join(`
`)):v="#version ".concat(p);const g={};o.forEach(k=>{Object.assign(g,k.getDefines())}),Object.assign(g,a);let _=c?"".concat(v,`
`).concat(tyt({id:r,source:n,type:i}),`
`).concat(Q_t({type:i}),`
`).concat(N_t(e),`
`).concat(F_t(e),`
`).concat(eyt(g),`
`).concat(h?"":Z_t,`
`):"".concat(v,`
`);const b=nyt(s),w={},T={},S={};for(const k in l){const C=typeof l[k]=="string"?{injection:l[k],order:0}:l[k],E=k.match(/^(v|f)s:(#)?([\w-]+)$/);if(E){const M=E[2],x=E[3];M?x==="decl"?T[k]=[C]:S[k]=[C]:w[k]=[C]}else S[k]=[C]}for(const k of o){f&&k.checkDeprecations(m,f),_+=k.getModuleSource(i,p);const E=k.injections[i];for(const M in E){const x=M.match(/^(v|f)s:#([\w-]+)$/);if(x){const B=x[2]==="decl"?T:S;B[M]=B[M]||[],B[M].push(E[M])}else w[M]=w[M]||[],w[M].push(E[M])}}return _+=q_t,_=mL(_,i,T),_+=ryt(b[i],w),_+=m,_=mL(_,i,S),_=H_t(_,u?100:p,h),_}function J_t(e){return function(r){const n={};for(const i of e){const o=i.getUniforms(r,n);Object.assign(n,o)}return n}}function Q_t(e){let{type:t}=e;return`
#define SHADER_TYPE_`.concat(mz[t].toUpperCase(),`
`)}function tyt(e){let{id:t,source:r,type:n}=e;return t&&typeof t=="string"&&r.indexOf("SHADER_NAME")===-1?`
#define SHADER_NAME `.concat(t,"_").concat(mz[n],`

`):""}function eyt(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=0,r="";for(const n in e){t===0&&(r+=`
// APPLICATION DEFINES
`),t++;const i=e[n];(i||Number.isFinite(i))&&(r+="#define ".concat(n.toUpperCase()," ").concat(e[n],`
`))}return t===0&&(r+=`
`),r}function ryt(e,t){let r="";for(const n in e){const i=e[n];if(r+="void ".concat(i.signature,` {
`),i.header&&(r+="  ".concat(i.header)),t[n]){const o=t[n];o.sort((a,s)=>a.order-s.order);for(const a of o)r+="  ".concat(a.injection,`
`)}i.footer&&(r+="  ".concat(i.footer)),r+=`}
`}return r}function nyt(e){const t={vs:{},fs:{}};return e.forEach(r=>{let n;typeof r!="string"?(n=r,r=n.hook):n={},r=r.trim();const[i,o]=r.split(":"),a=r.replace(/\(.+/,"");t[i][a]=Object.assign(n,{signature:o})}),t}const iyt="void main() {gl_FragColor = vec4(0);}",_z=`out vec4 transform_output;
void main() {
  transform_output = vec4(0);
}`,oyt=`#version 300 es
`.concat(_z);function yz(e,t){t=Array.isArray(t)?t:[t];const r=e.replace(/^\s+/,"").split(/\s+/),[n,i,o]=r;if(!t.includes(n)||!i||!o)return null;const a=o.split(";")[0];return{qualifier:n,type:i,name:a}}function bz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{version:t=100,input:r,inputType:n,output:i}=e;if(!r)return t===300?oyt:t>300?"#version ".concat(t,`
`).concat(_z):iyt;const o=lyt(r,n);return t>=300?"#version ".concat(t," ").concat(t===300?"es":"",`
in `).concat(n," ").concat(r,`;
out vec4 `).concat(i,`;
void main() {
  `).concat(i," = ").concat(o,`;
}`):"varying ".concat(n," ").concat(r,`;
void main() {
  gl_FragColor = `).concat(o,`;
}`)}function ayt(e){switch(e){case"float":return"x";case"vec2":return"xy";case"vec3":return"xyz";case"vec4":return"xyzw";default:return In(!1),null}}function syt(e){switch(e){case"float":return 1;case"vec2":return 2;case"vec3":return 3;case"vec4":return 4;default:return In(!1),null}}function lyt(e,t){switch(t){case"float":return"vec4(".concat(e,", 0.0, 0.0, 1.0)");case"vec2":return"vec4(".concat(e,", 0.0, 1.0)");case"vec3":return"vec4(".concat(e,", 1.0)");case"vec4":return e;default:return In(!1),null}}const uyt=`#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
const float TWO_PI = 6.2831854820251465;
const float PI_2 = 1.5707963705062866;
const float PI_16 = 0.1963495463132858;

const float SIN_TABLE_0 = 0.19509032368659973;
const float SIN_TABLE_1 = 0.3826834261417389;
const float SIN_TABLE_2 = 0.5555702447891235;
const float SIN_TABLE_3 = 0.7071067690849304;

const float COS_TABLE_0 = 0.9807852506637573;
const float COS_TABLE_1 = 0.9238795042037964;
const float COS_TABLE_2 = 0.8314695954322815;
const float COS_TABLE_3 = 0.7071067690849304;

const float INVERSE_FACTORIAL_3 = 1.666666716337204e-01;
const float INVERSE_FACTORIAL_5 = 8.333333767950535e-03;
const float INVERSE_FACTORIAL_7 = 1.9841270113829523e-04;
const float INVERSE_FACTORIAL_9 = 2.75573188446287533e-06;

float sin_taylor_fp32(float a) {
  float r, s, t, x;

  if (a == 0.0) {
    return 0.0;
  }

  x = -a * a;
  s = a;
  r = a;

  r = r * x;
  t = r * INVERSE_FACTORIAL_3;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_5;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_7;
  s = s + t;

  r = r * x;
  t = r * INVERSE_FACTORIAL_9;
  s = s + t;

  return s;
}

void sincos_taylor_fp32(float a, out float sin_t, out float cos_t) {
  if (a == 0.0) {
    sin_t = 0.0;
    cos_t = 1.0;
  }
  sin_t = sin_taylor_fp32(a);
  cos_t = sqrt(1.0 - sin_t * sin_t);
}

float tan_taylor_fp32(float a) {
    float sin_a;
    float cos_a;

    if (a == 0.0) {
        return 0.0;
    }
    float z = floor(a / TWO_PI);
    float r = a - TWO_PI * z;

    float t;
    float q = floor(r / PI_2 + 0.5);
    int j = int(q);

    if (j < -2 || j > 2) {
        return 1.0 / 0.0;
    }

    t = r - PI_2 * q;

    q = floor(t / PI_16 + 0.5);
    int k = int(q);
    int abs_k = int(abs(float(k)));

    if (abs_k > 4) {
        return 1.0 / 0.0;
    } else {
        t = t - PI_16 * q;
    }

    float u = 0.0;
    float v = 0.0;

    float sin_t, cos_t;
    float s, c;
    sincos_taylor_fp32(t, sin_t, cos_t);

    if (k == 0) {
        s = sin_t;
        c = cos_t;
    } else {
        if (abs(float(abs_k) - 1.0) < 0.5) {
            u = COS_TABLE_0;
            v = SIN_TABLE_0;
        } else if (abs(float(abs_k) - 2.0) < 0.5) {
            u = COS_TABLE_1;
            v = SIN_TABLE_1;
        } else if (abs(float(abs_k) - 3.0) < 0.5) {
            u = COS_TABLE_2;
            v = SIN_TABLE_2;
        } else if (abs(float(abs_k) - 4.0) < 0.5) {
            u = COS_TABLE_3;
            v = SIN_TABLE_3;
        }
        if (k > 0) {
            s = u * sin_t + v * cos_t;
            c = u * cos_t - v * sin_t;
        } else {
            s = u * sin_t - v * cos_t;
            c = u * cos_t + v * sin_t;
        }
    }

    if (j == 0) {
        sin_a = s;
        cos_a = c;
    } else if (j == 1) {
        sin_a = c;
        cos_a = -s;
    } else if (j == -1) {
        sin_a = -c;
        cos_a = s;
    } else {
        sin_a = -s;
        cos_a = -c;
    }
    return sin_a / cos_a;
}
#endif

float tan_fp32(float a) {
#ifdef LUMA_FP32_TAN_PRECISION_WORKAROUND
  return tan_taylor_fp32(a);
#else
  return tan(a);
#endif
}
`,cyt={name:"fp32",vs:uyt,fs:null};function pp(e,t){if(!e)throw new Error("math.gl assertion ".concat(t))}const rn={EPSILON:1e-12,debug:!1,precision:4,printTypes:!1,printDegrees:!1,printRowMajor:!0};function fyt(e,{precision:t=rn.precision}={}){return e=hyt(e),"".concat(parseFloat(e.toPrecision(t)))}function ou(e){return Array.isArray(e)||ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Cr(e,t,r){return pyt(e,n=>Math.max(t,Math.min(r,n)))}function jl(e,t,r){return ou(e)?e.map((n,i)=>jl(n,t[i],r)):r*t+(1-r)*e}function Ao(e,t,r){const n=rn.EPSILON;r&&(rn.EPSILON=r);try{if(e===t)return!0;if(ou(e)&&ou(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(!Ao(e[i],t[i]))return!1;return!0}return e&&e.equals?e.equals(t):t&&t.equals?t.equals(e):typeof e=="number"&&typeof t=="number"?Math.abs(e-t)<=rn.EPSILON*Math.max(1,Math.abs(e),Math.abs(t)):!1}finally{rn.EPSILON=n}}function hyt(e){return Math.round(e/rn.EPSILON)*rn.EPSILON}function dyt(e){return e.clone?e.clone():new Array(e.length)}function pyt(e,t,r){if(ou(e)){const n=e;r=r||dyt(n);for(let i=0;i<r.length&&i<n.length;++i)r[i]=t(e[i],i,r);return r}return t(e)}function vyt(e){function t(){var r=Reflect.construct(e,Array.from(arguments));return Object.setPrototypeOf(r,Object.getPrototypeOf(this)),r}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}class sE extends vyt(Array){clone(){return new this.constructor().copy(this)}fromArray(t,r=0){for(let n=0;n<this.ELEMENTS;++n)this[n]=t[n+r];return this.check()}toArray(t=[],r=0){for(let n=0;n<this.ELEMENTS;++n)t[r+n]=this[n];return t}from(t){return Array.isArray(t)?this.copy(t):this.fromObject(t)}to(t){return t===this?this:ou(t)?this.toArray(t):this.toObject(t)}toTarget(t){return t?this.to(t):this}toFloat32Array(){return new Float32Array(this)}toString(){return this.formatString(rn)}formatString(t){let r="";for(let n=0;n<this.ELEMENTS;++n)r+=(n>0?", ":"")+fyt(this[n],t);return"".concat(t.printTypes?this.constructor.name:"","[").concat(r,"]")}equals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(!Ao(this[r],t[r]))return!1;return!0}exactEquals(t){if(!t||this.length!==t.length)return!1;for(let r=0;r<this.ELEMENTS;++r)if(this[r]!==t[r])return!1;return!0}negate(){for(let t=0;t<this.ELEMENTS;++t)this[t]=-this[t];return this.check()}lerp(t,r,n){if(n===void 0)return this.lerp(this,t,r);for(let i=0;i<this.ELEMENTS;++i){const o=t[i];this[i]=o+n*(r[i]-o)}return this.check()}min(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.min(t[r],this[r]);return this.check()}max(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=Math.max(t[r],this[r]);return this.check()}clamp(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t[n]),r[n]);return this.check()}add(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]+=r[n];return this.check()}subtract(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]-=r[n];return this.check()}scale(t){if(typeof t=="number")for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;else for(let r=0;r<this.ELEMENTS&&r<t.length;++r)this[r]*=t[r];return this.check()}multiplyByScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}check(){if(rn.debug&&!this.validate())throw new Error("math.gl: ".concat(this.constructor.name," some fields set to invalid numbers'"));return this}validate(){let t=this.length===this.ELEMENTS;for(let r=0;r<this.ELEMENTS;++r)t=t&&Number.isFinite(this[r]);return t}sub(t){return this.subtract(t)}setScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]=t;return this.check()}addScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]+=t;return this.check()}subScalar(t){return this.addScalar(-t)}multiplyScalar(t){for(let r=0;r<this.ELEMENTS;++r)this[r]*=t;return this.check()}divideScalar(t){return this.multiplyByScalar(1/t)}clampScalar(t,r){for(let n=0;n<this.ELEMENTS;++n)this[n]=Math.min(Math.max(this[n],t),r);return this.check()}get elements(){return this}}function gyt(e,t){if(e.length!==t)return!1;for(let r=0;r<e.length;++r)if(!Number.isFinite(e[r]))return!1;return!0}function xe(e){if(!Number.isFinite(e))throw new Error("Invalid number ".concat(e));return e}function Id(e,t,r=""){if(rn.debug&&!gyt(e,t))throw new Error("math.gl: ".concat(r," some fields set to invalid numbers'"));return e}class wz extends sE{get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}len(){return Math.sqrt(this.lengthSquared())}magnitude(){return this.len()}lengthSquared(){let t=0;for(let r=0;r<this.ELEMENTS;++r)t+=this[r]*this[r];return t}magnitudeSquared(){return this.lengthSquared()}distance(t){return Math.sqrt(this.distanceSquared(t))}distanceSquared(t){let r=0;for(let n=0;n<this.ELEMENTS;++n){const i=this[n]-t[n];r+=i*i}return xe(r)}dot(t){let r=0;for(let n=0;n<this.ELEMENTS;++n)r+=this[n]*t[n];return xe(r)}normalize(){const t=this.magnitude();if(t!==0)for(let r=0;r<this.ELEMENTS;++r)this[r]/=t;return this.check()}multiply(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]*=r[n];return this.check()}divide(...t){for(const r of t)for(let n=0;n<this.ELEMENTS;++n)this[n]/=r[n];return this.check()}lengthSq(){return this.lengthSquared()}distanceTo(t){return this.distance(t)}distanceToSquared(t){return this.distanceSquared(t)}getComponent(t){return pp(t>=0&&t<this.ELEMENTS,"index is out of range"),xe(this[t])}setComponent(t,r){return pp(t>=0&&t<this.ELEMENTS,"index is out of range"),this[t]=r,this.check()}addVectors(t,r){return this.copy(t).add(r)}subVectors(t,r){return this.copy(t).subtract(r)}multiplyVectors(t,r){return this.copy(t).multiply(r)}addScaledVector(t,r){return this.add(new this.constructor(t).multiplyScalar(r))}}var Od=1e-6,Vi=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});function myt(){var e=new Vi(2);return Vi!=Float32Array&&(e[0]=0,e[1]=0),e}function l1(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e}function Sz(e,t){return e[0]=-t[0],e[1]=-t[1],e}function Tz(e,t,r,n){var i=t[0],o=t[1];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e}function _yt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[3]*i+r[6],e[1]=r[1]*n+r[4]*i+r[7],e}function yyt(e,t,r){var n=t[0],i=t[1];return e[0]=r[0]*n+r[4]*i+r[12],e[1]=r[1]*n+r[5]*i+r[13],e}(function(){var e=myt();return function(t,r,n,i,o,a){var s,l;for(r||(r=2),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],o(e,e,a),t[s]=e[0],t[s+1]=e[1];return t}})();function byt(e,t,r){const n=t[0],i=t[1],o=r[3]*n+r[7]*i||1;return e[0]=(r[0]*n+r[4]*i)/o,e[1]=(r[1]*n+r[5]*i)/o,e}function kz(e,t,r){const n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o||1;return e[0]=(r[0]*n+r[4]*i+r[8]*o)/a,e[1]=(r[1]*n+r[5]*i+r[9]*o)/a,e[2]=(r[2]*n+r[6]*i+r[10]*o)/a,e}function wyt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e}function Syt(e,t,r){const n=t[0],i=t[1];return e[0]=r[0]*n+r[2]*i,e[1]=r[1]*n+r[3]*i,e[2]=t[2],e[3]=t[3],e}function Pz(e,t,r){const n=t[0],i=t[1],o=t[2];return e[0]=r[0]*n+r[3]*i+r[6]*o,e[1]=r[1]*n+r[4]*i+r[7]*o,e[2]=r[2]*n+r[5]*i+r[8]*o,e[3]=t[3],e}function Ez(){var e=new Vi(3);return Vi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function Tyt(e){var t=e[0],r=e[1],n=e[2];return Math.hypot(t,r,n)}function yL(e,t,r){var n=new Vi(3);return n[0]=e,n[1]=t,n[2]=r,n}function kyt(e,t,r){return e[0]=t[0]-r[0],e[1]=t[1]-r[1],e[2]=t[2]-r[2],e}function Pyt(e){var t=e[0],r=e[1],n=e[2];return t*t+r*r+n*n}function Eyt(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e}function Cyt(e,t){var r=t[0],n=t[1],i=t[2],o=r*r+n*n+i*i;return o>0&&(o=1/Math.sqrt(o)),e[0]=t[0]*o,e[1]=t[1]*o,e[2]=t[2]*o,e}function Cz(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function nm(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2];return e[0]=i*l-o*s,e[1]=o*a-n*l,e[2]=n*s-i*a,e}function Ayt(e,t,r,n){var i=t[0],o=t[1],a=t[2];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e}function lE(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[3]*n+r[7]*i+r[11]*o+r[15];return a=a||1,e[0]=(r[0]*n+r[4]*i+r[8]*o+r[12])/a,e[1]=(r[1]*n+r[5]*i+r[9]*o+r[13])/a,e[2]=(r[2]*n+r[6]*i+r[10]*o+r[14])/a,e}function Az(e,t,r){var n=t[0],i=t[1],o=t[2];return e[0]=n*r[0]+i*r[3]+o*r[6],e[1]=n*r[1]+i*r[4]+o*r[7],e[2]=n*r[2]+i*r[5]+o*r[8],e}function Mz(e,t,r){var n=r[0],i=r[1],o=r[2],a=r[3],s=t[0],l=t[1],u=t[2],c=i*u-o*l,f=o*s-n*u,h=n*l-i*s,d=i*h-o*f,p=o*c-n*h,v=n*f-i*c,m=a*2;return c*=m,f*=m,h*=m,d*=2,p*=2,v*=2,e[0]=s+c+d,e[1]=l+f+p,e[2]=u+h+v,e}function Myt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0],o[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),o[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function xyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),o[1]=i[1],o[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Lyt(e,t,r,n){var i=[],o=[];return i[0]=t[0]-r[0],i[1]=t[1]-r[1],i[2]=t[2]-r[2],o[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),o[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),o[2]=i[2],e[0]=o[0]+r[0],e[1]=o[1]+r[1],e[2]=o[2]+r[2],e}function Iyt(e,t){var r=e[0],n=e[1],i=e[2],o=t[0],a=t[1],s=t[2],l=Math.sqrt(r*r+n*n+i*i),u=Math.sqrt(o*o+a*a+s*s),c=l*u,f=c&&Cz(e,t)/c;return Math.acos(Math.min(Math.max(f,-1),1))}var xz=kyt,Lz=Tyt,yb=Pyt;(function(){var e=Ez();return function(t,r,n,i,o,a){var s,l;for(r||(r=3),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2];return t}})();const bb=[0,0,0];let Sv;class St extends wz{static get ZERO(){return Sv||(Sv=new St(0,0,0),Object.freeze(Sv)),Sv}constructor(t=0,r=0,n=0){super(-0,-0,-0),arguments.length===1&&ou(t)?this.copy(t):(rn.debug&&(xe(t),xe(r),xe(n)),this[0]=t,this[1]=r,this[2]=n)}set(t,r,n){return this[0]=t,this[1]=r,this[2]=n,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this.check()}fromObject(t){return rn.debug&&(xe(t.x),xe(t.y),xe(t.z)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this.check()}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t}get ELEMENTS(){return 3}get z(){return this[2]}set z(t){this[2]=xe(t)}angle(t){return Iyt(this,t)}cross(t){return nm(this,this,t),this.check()}rotateX({radians:t,origin:r=bb}){return Myt(this,this,r,t),this.check()}rotateY({radians:t,origin:r=bb}){return xyt(this,this,r,t),this.check()}rotateZ({radians:t,origin:r=bb}){return Lyt(this,this,r,t),this.check()}transform(t){return this.transformAsPoint(t)}transformAsPoint(t){return lE(this,this,t),this.check()}transformAsVector(t){return kz(this,this,t),this.check()}transformByMatrix3(t){return Az(this,this,t),this.check()}transformByMatrix2(t){return wyt(this,this,t),this.check()}transformByQuaternion(t){return Mz(this,this,t),this.check()}}let Tv;class uE extends wz{static get ZERO(){return Tv||(Tv=new uE(0,0,0,0),Object.freeze(Tv)),Tv}constructor(t=0,r=0,n=0,i=0){super(-0,-0,-0,-0),ou(t)&&arguments.length===1?this.copy(t):(rn.debug&&(xe(t),xe(r),xe(n),xe(i)),this[0]=t,this[1]=r,this[2]=n,this[3]=i)}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}fromObject(t){return rn.debug&&(xe(t.x),xe(t.y),xe(t.z),xe(t.w)),this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this}toObject(t){return t.x=this[0],t.y=this[1],t.z=this[2],t.w=this[3],t}get ELEMENTS(){return 4}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}transform(t){return lE(this,this,t),this.check()}transformByMatrix3(t){return Pz(this,this,t),this.check()}transformByMatrix2(t){return Syt(this,this,t),this.check()}transformByQuaternion(t){return Mz(this,this,t),this.check()}applyMatrix4(t){return t.transform(this,this),this}}class Iz extends sE{toString(){let t="[";if(rn.printRowMajor){t+="row-major:";for(let r=0;r<this.RANK;++r)for(let n=0;n<this.RANK;++n)t+=" ".concat(this[n*this.RANK+r])}else{t+="column-major:";for(let r=0;r<this.ELEMENTS;++r)t+=" ".concat(this[r])}return t+="]",t}getElementIndex(t,r){return r*this.RANK+t}getElement(t,r){return this[r*this.RANK+t]}setElement(t,r,n){return this[r*this.RANK+t]=xe(n),this}getColumn(t,r=new Array(this.RANK).fill(-0)){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)r[i]=this[n+i];return r}setColumn(t,r){const n=t*this.RANK;for(let i=0;i<this.RANK;++i)this[n+i]=r[i];return this}}function Oyt(){var e=new Vi(9);return Vi!=Float32Array&&(e[1]=0,e[2]=0,e[3]=0,e[5]=0,e[6]=0,e[7]=0),e[0]=1,e[4]=1,e[8]=1,e}function Ryt(e,t){if(e===t){var r=t[1],n=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=r,e[5]=t[7],e[6]=n,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8];return e}function Dyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=c*a-s*u,h=-c*o+s*l,d=u*o-a*l,p=r*f+n*h+i*d;return p?(p=1/p,e[0]=f*p,e[1]=(-c*n+i*u)*p,e[2]=(s*n-i*a)*p,e[3]=h*p,e[4]=(c*r-i*l)*p,e[5]=(-s*r+i*o)*p,e[6]=d*p,e[7]=(-u*r+n*l)*p,e[8]=(a*r-n*o)*p,e):null}function Nyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8];return t*(u*o-a*l)+r*(-u*i+a*s)+n*(l*i-o*s)}function bL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1],p=r[2],v=r[3],m=r[4],g=r[5],_=r[6],b=r[7],w=r[8];return e[0]=h*n+d*a+p*u,e[1]=h*i+d*s+p*c,e[2]=h*o+d*l+p*f,e[3]=v*n+m*a+g*u,e[4]=v*i+m*s+g*c,e[5]=v*o+m*l+g*f,e[6]=_*n+b*a+w*u,e[7]=_*i+b*s+w*c,e[8]=_*o+b*l+w*f,e}function Fyt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=r[0],d=r[1];return e[0]=n,e[1]=i,e[2]=o,e[3]=a,e[4]=s,e[5]=l,e[6]=h*n+d*a+u,e[7]=h*i+d*s+c,e[8]=h*o+d*l+f,e}function $yt(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=Math.sin(r),d=Math.cos(r);return e[0]=d*n+h*a,e[1]=d*i+h*s,e[2]=d*o+h*l,e[3]=d*a-h*n,e[4]=d*s-h*i,e[5]=d*l-h*o,e[6]=u,e[7]=c,e[8]=f,e}function wL(e,t,r){var n=r[0],i=r[1];return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=i*t[3],e[4]=i*t[4],e[5]=i*t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Byt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,m=o*s,g=o*l;return e[0]=1-f-p,e[3]=c-g,e[6]=h+m,e[1]=c+g,e[4]=1-u-p,e[7]=d-v,e[2]=h-m,e[5]=d+v,e[8]=1-u-f,e}var q3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL1ROW0=3]="COL1ROW0",e[e.COL1ROW1=4]="COL1ROW1",e[e.COL1ROW2=5]="COL1ROW2",e[e.COL2ROW0=6]="COL2ROW0",e[e.COL2ROW1=7]="COL2ROW1",e[e.COL2ROW2=8]="COL2ROW2"})(q3||(q3={}));const zyt=Object.freeze([1,0,0,0,1,0,0,0,1]);class Mr extends Iz{static get IDENTITY(){return Uyt()}static get ZERO(){return Vyt()}get ELEMENTS(){return 9}get RANK(){return 3}get INDICES(){return q3}constructor(t,...r){super(-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):r.length>0?this.copy([t,...r]):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this.check()}identity(){return this.copy(zyt)}fromObject(t){return this.check()}fromQuaternion(t){return Byt(this,t),this.check()}set(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u){return this[0]=t,this[1]=i,this[2]=s,this[3]=r,this[4]=o,this[5]=l,this[6]=n,this[7]=a,this[8]=u,this.check()}determinant(){return Nyt(this)}transpose(){return Ryt(this,this),this.check()}invert(){return Dyt(this,this),this.check()}multiplyLeft(t){return bL(this,t,this),this.check()}multiplyRight(t){return bL(this,this,t),this.check()}rotate(t){return $yt(this,this,t),this.check()}scale(t){return Array.isArray(t)?wL(this,this,t):wL(this,this,[t,t]),this.check()}translate(t){return Fyt(this,this,t),this.check()}transform(t,r){let n;switch(t.length){case 2:n=_yt(r||[-0,-0],t,this);break;case 3:n=Az(r||[-0,-0,-0],t,this);break;case 4:n=Pz(r||[-0,-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Id(n,t.length),n}transformVector(t,r){return this.transform(t,r)}transformVector2(t,r){return this.transform(t,r)}transformVector3(t,r){return this.transform(t,r)}}let kv,Pv;function Vyt(){return kv||(kv=new Mr([0,0,0,0,0,0,0,0,0]),Object.freeze(kv)),kv}function Uyt(){return Pv||(Pv=new Mr,Object.freeze(Pv)),Pv}function Wyt(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Gyt(e,t){if(e===t){var r=t[1],n=t[2],i=t[3],o=t[6],a=t[7],s=t[11];e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=r,e[6]=t[9],e[7]=t[13],e[8]=n,e[9]=o,e[11]=t[14],e[12]=i,e[13]=a,e[14]=s}else e[0]=t[0],e[1]=t[4],e[2]=t[8],e[3]=t[12],e[4]=t[1],e[5]=t[5],e[6]=t[9],e[7]=t[13],e[8]=t[2],e[9]=t[6],e[10]=t[10],e[11]=t[14],e[12]=t[3],e[13]=t[7],e[14]=t[11],e[15]=t[15];return e}function Z3(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],f=t[9],h=t[10],d=t[11],p=t[12],v=t[13],m=t[14],g=t[15],_=r*s-n*a,b=r*l-i*a,w=r*u-o*a,T=n*l-i*s,S=n*u-o*s,k=i*u-o*l,C=c*v-f*p,E=c*m-h*p,M=c*g-d*p,x=f*m-h*v,D=f*g-d*v,B=h*g-d*m,V=_*B-b*D+w*x+T*M-S*E+k*C;return V?(V=1/V,e[0]=(s*B-l*D+u*x)*V,e[1]=(i*D-n*B-o*x)*V,e[2]=(v*k-m*S+g*T)*V,e[3]=(h*S-f*k-d*T)*V,e[4]=(l*M-a*B-u*E)*V,e[5]=(r*B-i*M+o*E)*V,e[6]=(m*w-p*k-g*b)*V,e[7]=(c*k-h*w+d*b)*V,e[8]=(a*D-s*M+u*C)*V,e[9]=(n*M-r*D-o*C)*V,e[10]=(p*S-v*w+g*_)*V,e[11]=(f*w-c*S-d*_)*V,e[12]=(s*E-a*x-l*C)*V,e[13]=(r*x-n*E+i*C)*V,e[14]=(v*b-p*T-m*_)*V,e[15]=(c*T-f*b+h*_)*V,e):null}function jyt(e){var t=e[0],r=e[1],n=e[2],i=e[3],o=e[4],a=e[5],s=e[6],l=e[7],u=e[8],c=e[9],f=e[10],h=e[11],d=e[12],p=e[13],v=e[14],m=e[15],g=t*a-r*o,_=t*s-n*o,b=t*l-i*o,w=r*s-n*a,T=r*l-i*a,S=n*l-i*s,k=u*p-c*d,C=u*v-f*d,E=u*m-h*d,M=c*v-f*p,x=c*m-h*p,D=f*m-h*v;return g*D-_*x+b*M+w*E-T*C+S*k}function Hl(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],f=t[8],h=t[9],d=t[10],p=t[11],v=t[12],m=t[13],g=t[14],_=t[15],b=r[0],w=r[1],T=r[2],S=r[3];return e[0]=b*n+w*s+T*f+S*v,e[1]=b*i+w*l+T*h+S*m,e[2]=b*o+w*u+T*d+S*g,e[3]=b*a+w*c+T*p+S*_,b=r[4],w=r[5],T=r[6],S=r[7],e[4]=b*n+w*s+T*f+S*v,e[5]=b*i+w*l+T*h+S*m,e[6]=b*o+w*u+T*d+S*g,e[7]=b*a+w*c+T*p+S*_,b=r[8],w=r[9],T=r[10],S=r[11],e[8]=b*n+w*s+T*f+S*v,e[9]=b*i+w*l+T*h+S*m,e[10]=b*o+w*u+T*d+S*g,e[11]=b*a+w*c+T*p+S*_,b=r[12],w=r[13],T=r[14],S=r[15],e[12]=b*n+w*s+T*f+S*v,e[13]=b*i+w*l+T*h+S*m,e[14]=b*o+w*u+T*d+S*g,e[15]=b*a+w*c+T*p+S*_,e}function u1(e,t,r){var n=r[0],i=r[1],o=r[2],a,s,l,u,c,f,h,d,p,v,m,g;return t===e?(e[12]=t[0]*n+t[4]*i+t[8]*o+t[12],e[13]=t[1]*n+t[5]*i+t[9]*o+t[13],e[14]=t[2]*n+t[6]*i+t[10]*o+t[14],e[15]=t[3]*n+t[7]*i+t[11]*o+t[15]):(a=t[0],s=t[1],l=t[2],u=t[3],c=t[4],f=t[5],h=t[6],d=t[7],p=t[8],v=t[9],m=t[10],g=t[11],e[0]=a,e[1]=s,e[2]=l,e[3]=u,e[4]=c,e[5]=f,e[6]=h,e[7]=d,e[8]=p,e[9]=v,e[10]=m,e[11]=g,e[12]=a*n+c*i+p*o+t[12],e[13]=s*n+f*i+v*o+t[13],e[14]=l*n+h*i+m*o+t[14],e[15]=u*n+d*i+g*o+t[15]),e}function cE(e,t,r){var n=r[0],i=r[1],o=r[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*i,e[5]=t[5]*i,e[6]=t[6]*i,e[7]=t[7]*i,e[8]=t[8]*o,e[9]=t[9]*o,e[10]=t[10]*o,e[11]=t[11]*o,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function Hyt(e,t,r,n){var i=n[0],o=n[1],a=n[2],s=Math.hypot(i,o,a),l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,C,E,M,x,D,B,V,F;return s<Od?null:(s=1/s,i*=s,o*=s,a*=s,l=Math.sin(r),u=Math.cos(r),c=1-u,f=t[0],h=t[1],d=t[2],p=t[3],v=t[4],m=t[5],g=t[6],_=t[7],b=t[8],w=t[9],T=t[10],S=t[11],k=i*i*c+u,C=o*i*c+a*l,E=a*i*c-o*l,M=i*o*c-a*l,x=o*o*c+u,D=a*o*c+i*l,B=i*a*c+o*l,V=o*a*c-i*l,F=a*a*c+u,e[0]=f*k+v*C+b*E,e[1]=h*k+m*C+w*E,e[2]=d*k+g*C+T*E,e[3]=p*k+_*C+S*E,e[4]=f*M+v*x+b*D,e[5]=h*M+m*x+w*D,e[6]=d*M+g*x+T*D,e[7]=p*M+_*x+S*D,e[8]=f*B+v*V+b*F,e[9]=h*B+m*V+w*F,e[10]=d*B+g*V+T*F,e[11]=p*B+_*V+S*F,t!==e&&(e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e)}function Oz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=o*i+u*n,e[5]=a*i+c*n,e[6]=s*i+f*n,e[7]=l*i+h*n,e[8]=u*i-o*n,e[9]=c*i-a*n,e[10]=f*i-s*n,e[11]=h*i-l*n,e}function Xyt(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[8],c=t[9],f=t[10],h=t[11];return t!==e&&(e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i-u*n,e[1]=a*i-c*n,e[2]=s*i-f*n,e[3]=l*i-h*n,e[8]=o*n+u*i,e[9]=a*n+c*i,e[10]=s*n+f*i,e[11]=l*n+h*i,e}function Rz(e,t,r){var n=Math.sin(r),i=Math.cos(r),o=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],f=t[6],h=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=o*i+u*n,e[1]=a*i+c*n,e[2]=s*i+f*n,e[3]=l*i+h*n,e[4]=u*i-o*n,e[5]=c*i-a*n,e[6]=f*i-s*n,e[7]=h*i-l*n,e}function Yyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[4],a=t[5],s=t[6],l=t[8],u=t[9],c=t[10];return e[0]=Math.hypot(r,n,i),e[1]=Math.hypot(o,a,s),e[2]=Math.hypot(l,u,c),e}function qyt(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r+r,s=n+n,l=i+i,u=r*a,c=n*a,f=n*s,h=i*a,d=i*s,p=i*l,v=o*a,m=o*s,g=o*l;return e[0]=1-f-p,e[1]=c+g,e[2]=h-m,e[3]=0,e[4]=c-g,e[5]=1-u-p,e[6]=d+v,e[7]=0,e[8]=h+m,e[9]=d-v,e[10]=1-u-f,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function Zyt(e,t,r,n,i,o,a){var s=1/(r-t),l=1/(i-n),u=1/(o-a);return e[0]=o*2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o*2*l,e[6]=0,e[7]=0,e[8]=(r+t)*s,e[9]=(i+n)*l,e[10]=(a+o)*u,e[11]=-1,e[12]=0,e[13]=0,e[14]=a*o*2*u,e[15]=0,e}function Kyt(e,t,r,n,i){var o=1/Math.tan(t/2),a;return e[0]=o/r,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=o,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[11]=-1,e[12]=0,e[13]=0,e[15]=0,i!=null&&i!==1/0?(a=1/(n-i),e[10]=(i+n)*a,e[14]=2*i*n*a):(e[10]=-1,e[14]=-2*n),e}var Jyt=Kyt;function Qyt(e,t,r,n,i,o,a){var s=1/(t-r),l=1/(n-i),u=1/(o-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+r)*s,e[13]=(i+n)*l,e[14]=(a+o)*u,e[15]=1,e}var t2t=Qyt;function e2t(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p=t[0],v=t[1],m=t[2],g=n[0],_=n[1],b=n[2],w=r[0],T=r[1],S=r[2];return Math.abs(p-w)<Od&&Math.abs(v-T)<Od&&Math.abs(m-S)<Od?Wyt(e):(c=p-w,f=v-T,h=m-S,d=1/Math.hypot(c,f,h),c*=d,f*=d,h*=d,i=_*h-b*f,o=b*c-g*h,a=g*f-_*c,d=Math.hypot(i,o,a),d?(d=1/d,i*=d,o*=d,a*=d):(i=0,o=0,a=0),s=f*a-h*o,l=h*i-c*a,u=c*o-f*i,d=Math.hypot(s,l,u),d?(d=1/d,s*=d,l*=d,u*=d):(s=0,l=0,u=0),e[0]=i,e[1]=s,e[2]=c,e[3]=0,e[4]=o,e[5]=l,e[6]=f,e[7]=0,e[8]=a,e[9]=u,e[10]=h,e[11]=0,e[12]=-(i*p+o*v+a*m),e[13]=-(s*p+l*v+u*m),e[14]=-(c*p+f*v+h*m),e[15]=1,e)}function r2t(){var e=new Vi(4);return Vi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}function n2t(e,t,r){return e[0]=t[0]+r[0],e[1]=t[1]+r[1],e[2]=t[2]+r[2],e[3]=t[3]+r[3],e}function fE(e,t,r){return e[0]=t[0]*r,e[1]=t[1]*r,e[2]=t[2]*r,e[3]=t[3]*r,e}function i2t(e){var t=e[0],r=e[1],n=e[2],i=e[3];return Math.hypot(t,r,n,i)}function o2t(e){var t=e[0],r=e[1],n=e[2],i=e[3];return t*t+r*r+n*n+i*i}function a2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o;return a>0&&(a=1/Math.sqrt(a)),e[0]=r*a,e[1]=n*a,e[2]=i*a,e[3]=o*a,e}function s2t(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function l2t(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3];return e[0]=i+n*(r[0]-i),e[1]=o+n*(r[1]-o),e[2]=a+n*(r[2]-a),e[3]=s+n*(r[3]-s),e}function Ef(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3];return e[0]=r[0]*n+r[4]*i+r[8]*o+r[12]*a,e[1]=r[1]*n+r[5]*i+r[9]*o+r[13]*a,e[2]=r[2]*n+r[6]*i+r[10]*o+r[14]*a,e[3]=r[3]*n+r[7]*i+r[11]*o+r[15]*a,e}function u2t(e,t,r){var n=t[0],i=t[1],o=t[2],a=r[0],s=r[1],l=r[2],u=r[3],c=u*n+s*o-l*i,f=u*i+l*n-a*o,h=u*o+a*i-s*n,d=-a*n-s*i-l*o;return e[0]=c*u+d*-a+f*-l-h*-s,e[1]=f*u+d*-s+h*-a-c*-l,e[2]=h*u+d*-l+c*-s-f*-a,e[3]=t[3],e}(function(){var e=r2t();return function(t,r,n,i,o,a){var s,l;for(r||(r=4),n||(n=0),i?l=Math.min(i*r+n,t.length):l=t.length,s=n;s<l;s+=r)e[0]=t[s],e[1]=t[s+1],e[2]=t[s+2],e[3]=t[s+3],o(e,e,a),t[s]=e[0],t[s+1]=e[1],t[s+2]=e[2],t[s+3]=e[3];return t}})();var K3;(function(e){e[e.COL0ROW0=0]="COL0ROW0",e[e.COL0ROW1=1]="COL0ROW1",e[e.COL0ROW2=2]="COL0ROW2",e[e.COL0ROW3=3]="COL0ROW3",e[e.COL1ROW0=4]="COL1ROW0",e[e.COL1ROW1=5]="COL1ROW1",e[e.COL1ROW2=6]="COL1ROW2",e[e.COL1ROW3=7]="COL1ROW3",e[e.COL2ROW0=8]="COL2ROW0",e[e.COL2ROW1=9]="COL2ROW1",e[e.COL2ROW2=10]="COL2ROW2",e[e.COL2ROW3=11]="COL2ROW3",e[e.COL3ROW0=12]="COL3ROW0",e[e.COL3ROW1=13]="COL3ROW1",e[e.COL3ROW2=14]="COL3ROW2",e[e.COL3ROW3=15]="COL3ROW3"})(K3||(K3={}));const c2t=45*Math.PI/180,f2t=1,wb=.1,Sb=500,h2t=Object.freeze([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);class Hr extends Iz{static get IDENTITY(){return p2t()}static get ZERO(){return d2t()}get ELEMENTS(){return 16}get RANK(){return 4}get INDICES(){return K3}constructor(t){super(-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0),arguments.length===1&&Array.isArray(t)?this.copy(t):this.identity()}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this[4]=t[4],this[5]=t[5],this[6]=t[6],this[7]=t[7],this[8]=t[8],this[9]=t[9],this[10]=t[10],this[11]=t[11],this[12]=t[12],this[13]=t[13],this[14]=t[14],this[15]=t[15],this.check()}set(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this[4]=o,this[5]=a,this[6]=s,this[7]=l,this[8]=u,this[9]=c,this[10]=f,this[11]=h,this[12]=d,this[13]=p,this[14]=v,this[15]=m,this.check()}setRowMajor(t,r,n,i,o,a,s,l,u,c,f,h,d,p,v,m){return this[0]=t,this[1]=o,this[2]=u,this[3]=d,this[4]=r,this[5]=a,this[6]=c,this[7]=p,this[8]=n,this[9]=s,this[10]=f,this[11]=v,this[12]=i,this[13]=l,this[14]=h,this[15]=m,this.check()}toRowMajor(t){return t[0]=this[0],t[1]=this[4],t[2]=this[8],t[3]=this[12],t[4]=this[1],t[5]=this[5],t[6]=this[9],t[7]=this[13],t[8]=this[2],t[9]=this[6],t[10]=this[10],t[11]=this[14],t[12]=this[3],t[13]=this[7],t[14]=this[11],t[15]=this[15],t}identity(){return this.copy(h2t)}fromObject(t){return this.check()}fromQuaternion(t){return qyt(this,t),this.check()}frustum(t){const{left:r,right:n,bottom:i,top:o,near:a=wb,far:s=Sb}=t;return s===1/0?v2t(this,r,n,i,o,a):Zyt(this,r,n,i,o,a,s),this.check()}lookAt(t){const{eye:r,center:n=[0,0,0],up:i=[0,1,0]}=t;return e2t(this,r,n,i),this.check()}ortho(t){const{left:r,right:n,bottom:i,top:o,near:a=wb,far:s=Sb}=t;return t2t(this,r,n,i,o,a,s),this.check()}orthographic(t){const{fovy:r=c2t,aspect:n=f2t,focalDistance:i=1,near:o=wb,far:a=Sb}=t;SL(r);const s=r/2,l=i*Math.tan(s),u=l*n;return this.ortho({left:-u,right:u,bottom:-l,top:l,near:o,far:a})}perspective(t){const{fovy:r=45*Math.PI/180,aspect:n=1,near:i=.1,far:o=500}=t;return SL(r),Jyt(this,r,n,i,o),this.check()}determinant(){return jyt(this)}getScale(t=[-0,-0,-0]){return t[0]=Math.sqrt(this[0]*this[0]+this[1]*this[1]+this[2]*this[2]),t[1]=Math.sqrt(this[4]*this[4]+this[5]*this[5]+this[6]*this[6]),t[2]=Math.sqrt(this[8]*this[8]+this[9]*this[9]+this[10]*this[10]),t}getTranslation(t=[-0,-0,-0]){return t[0]=this[12],t[1]=this[13],t[2]=this[14],t}getRotation(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=0,t[4]=this[4]*i,t[5]=this[5]*o,t[6]=this[6]*a,t[7]=0,t[8]=this[8]*i,t[9]=this[9]*o,t[10]=this[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}getRotationMatrix3(t,r){t=t||[-0,-0,-0,-0,-0,-0,-0,-0,-0],r=r||[-0,-0,-0];const n=this.getScale(r),i=1/n[0],o=1/n[1],a=1/n[2];return t[0]=this[0]*i,t[1]=this[1]*o,t[2]=this[2]*a,t[3]=this[4]*i,t[4]=this[5]*o,t[5]=this[6]*a,t[6]=this[8]*i,t[7]=this[9]*o,t[8]=this[10]*a,t}transpose(){return Gyt(this,this),this.check()}invert(){return Z3(this,this),this.check()}multiplyLeft(t){return Hl(this,t,this),this.check()}multiplyRight(t){return Hl(this,this,t),this.check()}rotateX(t){return Oz(this,this,t),this.check()}rotateY(t){return Xyt(this,this,t),this.check()}rotateZ(t){return Rz(this,this,t),this.check()}rotateXYZ(t){return this.rotateX(t[0]).rotateY(t[1]).rotateZ(t[2])}rotateAxis(t,r){return Hyt(this,this,t,r),this.check()}scale(t){return cE(this,this,Array.isArray(t)?t:[t,t,t]),this.check()}translate(t){return u1(this,this,t),this.check()}transform(t,r){return t.length===4?(r=Ef(r||[-0,-0,-0,-0],t,this),Id(r,4),r):this.transformAsPoint(t,r)}transformAsPoint(t,r){const{length:n}=t;let i;switch(n){case 2:i=yyt(r||[-0,-0],t,this);break;case 3:i=lE(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Id(i,t.length),i}transformAsVector(t,r){let n;switch(t.length){case 2:n=byt(r||[-0,-0],t,this);break;case 3:n=kz(r||[-0,-0,-0],t,this);break;default:throw new Error("Illegal vector")}return Id(n,t.length),n}transformPoint(t,r){return this.transformAsPoint(t,r)}transformVector(t,r){return this.transformAsPoint(t,r)}transformDirection(t,r){return this.transformAsVector(t,r)}makeRotationX(t){return this.identity().rotateX(t)}makeTranslation(t,r,n){return this.identity().translate([t,r,n])}}let Ev,Cv;function d2t(){return Ev||(Ev=new Hr([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),Object.freeze(Ev)),Ev}function p2t(){return Cv||(Cv=new Hr,Object.freeze(Cv)),Cv}function SL(e){if(e>Math.PI*2)throw Error("expected radians")}function v2t(e,t,r,n,i,o){const a=2*o/(r-t),s=2*o/(i-n),l=(r+t)/(r-t),u=(i+n)/(i-n),c=-1,f=-1,h=-2*o;return e[0]=a,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=s,e[6]=0,e[7]=0,e[8]=l,e[9]=u,e[10]=c,e[11]=f,e[12]=0,e[13]=0,e[14]=h,e[15]=0,e}function TL(){var e=new Vi(4);return Vi!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e[3]=1,e}function g2t(e){return e[0]=0,e[1]=0,e[2]=0,e[3]=1,e}function Dz(e,t,r){r=r*.5;var n=Math.sin(r);return e[0]=n*t[0],e[1]=n*t[1],e[2]=n*t[2],e[3]=Math.cos(r),e}function kL(e,t,r){var n=t[0],i=t[1],o=t[2],a=t[3],s=r[0],l=r[1],u=r[2],c=r[3];return e[0]=n*c+a*s+i*u-o*l,e[1]=i*c+a*l+o*s-n*u,e[2]=o*c+a*u+n*l-i*s,e[3]=a*c-n*s-i*l-o*u,e}function m2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+a*s,e[1]=i*l+o*s,e[2]=o*l-i*s,e[3]=a*l-n*s,e}function _2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l-o*s,e[1]=i*l+a*s,e[2]=o*l+n*s,e[3]=a*l-i*s,e}function y2t(e,t,r){r*=.5;var n=t[0],i=t[1],o=t[2],a=t[3],s=Math.sin(r),l=Math.cos(r);return e[0]=n*l+i*s,e[1]=i*l-n*s,e[2]=o*l+a*s,e[3]=a*l-o*s,e}function b2t(e,t){var r=t[0],n=t[1],i=t[2];return e[0]=r,e[1]=n,e[2]=i,e[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),e}function im(e,t,r,n){var i=t[0],o=t[1],a=t[2],s=t[3],l=r[0],u=r[1],c=r[2],f=r[3],h,d,p,v,m;return d=i*l+o*u+a*c+s*f,d<0&&(d=-d,l=-l,u=-u,c=-c,f=-f),1-d>Od?(h=Math.acos(d),p=Math.sin(h),v=Math.sin((1-n)*h)/p,m=Math.sin(n*h)/p):(v=1-n,m=n),e[0]=v*i+m*l,e[1]=v*o+m*u,e[2]=v*a+m*c,e[3]=v*s+m*f,e}function w2t(e,t){var r=t[0],n=t[1],i=t[2],o=t[3],a=r*r+n*n+i*i+o*o,s=a?1/a:0;return e[0]=-r*s,e[1]=-n*s,e[2]=-i*s,e[3]=o*s,e}function S2t(e,t){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=t[3],e}function Nz(e,t){var r=t[0]+t[4]+t[8],n;if(r>0)n=Math.sqrt(r+1),e[3]=.5*n,n=.5/n,e[0]=(t[5]-t[7])*n,e[1]=(t[6]-t[2])*n,e[2]=(t[1]-t[3])*n;else{var i=0;t[4]>t[0]&&(i=1),t[8]>t[i*3+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;n=Math.sqrt(t[i*3+i]-t[o*3+o]-t[a*3+a]+1),e[i]=.5*n,n=.5/n,e[3]=(t[o*3+a]-t[a*3+o])*n,e[o]=(t[o*3+i]+t[i*3+o])*n,e[a]=(t[a*3+i]+t[i*3+a])*n}return e}var T2t=n2t,k2t=fE,P2t=s2t,E2t=l2t,C2t=i2t,A2t=o2t,Fz=a2t,M2t=function(){var e=Ez(),t=yL(1,0,0),r=yL(0,1,0);return function(n,i,o){var a=Cz(i,o);return a<-.999999?(nm(e,t,i),Lz(e)<1e-6&&nm(e,r,i),Cyt(e,e),Dz(n,e,Math.PI),n):a>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(nm(e,i,o),n[0]=e[0],n[1]=e[1],n[2]=e[2],n[3]=1+a,Fz(n,n))}}();(function(){var e=TL(),t=TL();return function(r,n,i,o,a,s){return im(e,n,a,s),im(t,i,o,s),im(r,e,t,2*s*(1-s)),r}})();(function(){var e=Oyt();return function(t,r,n,i){return e[0]=n[0],e[3]=n[1],e[6]=n[2],e[1]=i[0],e[4]=i[1],e[7]=i[2],e[2]=-r[0],e[5]=-r[1],e[8]=-r[2],Fz(t,Nz(t,e))}})();const x2t=[0,0,0,1];class PL extends sE{constructor(t=0,r=0,n=0,i=1){super(-0,-0,-0,-0),Array.isArray(t)&&arguments.length===1?this.copy(t):this.set(t,r,n,i)}copy(t){return this[0]=t[0],this[1]=t[1],this[2]=t[2],this[3]=t[3],this.check()}set(t,r,n,i){return this[0]=t,this[1]=r,this[2]=n,this[3]=i,this.check()}fromObject(t){return this[0]=t.x,this[1]=t.y,this[2]=t.z,this[3]=t.w,this.check()}fromMatrix3(t){return Nz(this,t),this.check()}fromAxisRotation(t,r){return Dz(this,t,r),this.check()}identity(){return g2t(this),this.check()}setAxisAngle(t,r){return this.fromAxisRotation(t,r)}get ELEMENTS(){return 4}get x(){return this[0]}set x(t){this[0]=xe(t)}get y(){return this[1]}set y(t){this[1]=xe(t)}get z(){return this[2]}set z(t){this[2]=xe(t)}get w(){return this[3]}set w(t){this[3]=xe(t)}len(){return C2t(this)}lengthSquared(){return A2t(this)}dot(t){return P2t(this,t)}rotationTo(t,r){return M2t(this,t,r),this.check()}add(t){return T2t(this,this,t),this.check()}calculateW(){return b2t(this,this),this.check()}conjugate(){return S2t(this,this),this.check()}invert(){return w2t(this,this),this.check()}lerp(t,r,n){return n===void 0?this.lerp(this,t,r):(E2t(this,t,r,n),this.check())}multiplyRight(t){return kL(this,this,t),this.check()}multiplyLeft(t){return kL(this,t,this),this.check()}normalize(){const t=this.len(),r=t>0?1/t:0;return this[0]=this[0]*r,this[1]=this[1]*r,this[2]=this[2]*r,this[3]=this[3]*r,t===0&&(this[3]=1),this.check()}rotateX(t){return m2t(this,this,t),this.check()}rotateY(t){return _2t(this,this,t),this.check()}rotateZ(t){return y2t(this,this,t),this.check()}scale(t){return k2t(this,this,t),this.check()}slerp(t,r,n){let i,o,a;switch(arguments.length){case 1:({start:i=x2t,target:o,ratio:a}=t);break;case 2:i=this,o=t,a=r;break;default:i=t,o=r,a=n}return im(this,i,o,a),this.check()}transformVector4(t,r=new uE){return u2t(r,t,this),Id(r,4)}lengthSq(){return this.lengthSquared()}setFromAxisAngle(t,r){return this.setAxisAngle(t,r)}premultiply(t){return this.multiplyLeft(t)}multiply(t){return this.multiplyRight(t)}}const $z={EPSILON1:.1,EPSILON2:.01,EPSILON3:.001,EPSILON4:1e-4,EPSILON5:1e-5,EPSILON6:1e-6,EPSILON7:1e-7,EPSILON8:1e-8,EPSILON9:1e-9,EPSILON10:1e-10,EPSILON11:1e-11,EPSILON12:1e-12,EPSILON13:1e-13,EPSILON14:1e-14,EPSILON15:1e-15,EPSILON16:1e-16,EPSILON17:1e-17,EPSILON18:1e-18,EPSILON19:1e-19,EPSILON20:1e-20,PI_OVER_TWO:Math.PI/2,PI_OVER_FOUR:Math.PI/4,PI_OVER_SIX:Math.PI/6,TWO_PI:Math.PI*2},EL=`#if (defined(SHADER_TYPE_FRAGMENT) && defined(LIGHTING_FRAGMENT)) || (defined(SHADER_TYPE_VERTEX) && defined(LIGHTING_VERTEX))

struct AmbientLight {
 vec3 color;
};

struct PointLight {
 vec3 color;
 vec3 position;
 vec3 attenuation;
};

struct DirectionalLight {
  vec3 color;
  vec3 direction;
};

uniform AmbientLight lighting_uAmbientLight;
uniform PointLight lighting_uPointLight[MAX_LIGHTS];
uniform DirectionalLight lighting_uDirectionalLight[MAX_LIGHTS];
uniform int lighting_uPointLightCount;
uniform int lighting_uDirectionalLightCount;

uniform bool lighting_uEnabled;

float getPointLightAttenuation(PointLight pointLight, float distance) {
  return pointLight.attenuation.x
       + pointLight.attenuation.y * distance
       + pointLight.attenuation.z * distance * distance;
}

#endif
`,L2t={lightSources:{}};function Tb(){let{color:e=[0,0,0],intensity:t=1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return e.map(r=>r*t/255)}function I2t(e){let{ambientLight:t,pointLights:r=[],directionalLights:n=[]}=e;const i={};return t?i["lighting_uAmbientLight.color"]=Tb(t):i["lighting_uAmbientLight.color"]=[0,0,0],r.forEach((o,a)=>{i["lighting_uPointLight[".concat(a,"].color")]=Tb(o),i["lighting_uPointLight[".concat(a,"].position")]=o.position,i["lighting_uPointLight[".concat(a,"].attenuation")]=o.attenuation||[1,0,0]}),i.lighting_uPointLightCount=r.length,n.forEach((o,a)=>{i["lighting_uDirectionalLight[".concat(a,"].color")]=Tb(o),i["lighting_uDirectionalLight[".concat(a,"].direction")]=o.direction}),i.lighting_uDirectionalLightCount=n.length,i}function Bz(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:L2t;if("lightSources"in e){const{ambientLight:t,pointLights:r,directionalLights:n}=e.lightSources||{};return t||r&&r.length>0||n&&n.length>0?Object.assign({},I2t({ambientLight:t,pointLights:r,directionalLights:n}),{lighting_uEnabled:!0}):{lighting_uEnabled:!1}}if("lights"in e){const t={pointLights:[],directionalLights:[]};for(const r of e.lights||[])switch(r.type){case"ambient":t.ambientLight=r;break;case"directional":t.directionalLights.push(r);break;case"point":t.pointLights.push(r);break}return Bz({lightSources:t})}return{}}const O2t={name:"lights",vs:EL,fs:EL,getUniforms:Bz,defines:{MAX_LIGHTS:3}},R2t=new Uint8Array([0,255,255,255]),D2t={pickingSelectedColor:null,pickingHighlightColor:R2t,pickingActive:!1,pickingAttribute:!1};function N2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:D2t;const t={};if(e.pickingSelectedColor!==void 0)if(!e.pickingSelectedColor)t.picking_uSelectedColorValid=0;else{const r=e.pickingSelectedColor.slice(0,3);t.picking_uSelectedColorValid=1,t.picking_uSelectedColor=r}if(e.pickingHighlightColor){const r=Array.from(e.pickingHighlightColor,n=>n/255);Number.isFinite(r[3])||(r[3]=1),t.picking_uHighlightColor=r}return e.pickingActive!==void 0&&(t.picking_uActive=Boolean(e.pickingActive),t.picking_uAttribute=Boolean(e.pickingAttribute)),t}const F2t=`uniform bool picking_uActive;
uniform bool picking_uAttribute;
uniform vec3 picking_uSelectedColor;
uniform bool picking_uSelectedColorValid;

out vec4 picking_vRGBcolor_Avalid;

const float COLOR_SCALE = 1. / 255.;

bool picking_isColorValid(vec3 color) {
  return dot(color, vec3(1.0)) > 0.001;
}

bool isVertexPicked(vec3 vertexColor) {
  return
    picking_uSelectedColorValid &&
    !picking_isColorValid(abs(vertexColor - picking_uSelectedColor));
}

void picking_setPickingColor(vec3 pickingColor) {
  if (picking_uActive) {
    picking_vRGBcolor_Avalid.a = float(picking_isColorValid(pickingColor));

    if (!picking_uAttribute) {
      picking_vRGBcolor_Avalid.rgb = pickingColor * COLOR_SCALE;
    }
  } else {
    picking_vRGBcolor_Avalid.a = float(isVertexPicked(pickingColor));
  }
}

void picking_setPickingAttribute(float value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.r = value;
  }
}
void picking_setPickingAttribute(vec2 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rg = value;
  }
}
void picking_setPickingAttribute(vec3 value) {
  if (picking_uAttribute) {
    picking_vRGBcolor_Avalid.rgb = value;
  }
}
`,$2t=`uniform bool picking_uActive;
uniform vec3 picking_uSelectedColor;
uniform vec4 picking_uHighlightColor;

in vec4 picking_vRGBcolor_Avalid;
vec4 picking_filterHighlightColor(vec4 color) {
  if (picking_uActive) {
    return color;
  }
  bool selected = bool(picking_vRGBcolor_Avalid.a);

  if (selected) {
    float highLightAlpha = picking_uHighlightColor.a;
    float blendedAlpha = highLightAlpha + color.a * (1.0 - highLightAlpha);
    float highLightRatio = highLightAlpha / blendedAlpha;

    vec3 blendedRGB = mix(color.rgb, picking_uHighlightColor.rgb, highLightRatio);
    return vec4(blendedRGB, blendedAlpha);
  } else {
    return color;
  }
}
vec4 picking_filterPickingColor(vec4 color) {
  if (picking_uActive) {
    if (picking_vRGBcolor_Avalid.a == 0.0) {
      discard;
    }
    return picking_vRGBcolor_Avalid;
  }
  return color;
}
vec4 picking_filterColor(vec4 color) {
  vec4 highightColor = picking_filterHighlightColor(color);
  return picking_filterPickingColor(highightColor);
}

`,B2t={name:"picking",vs:F2t,fs:$2t,getUniforms:N2t},z2t=`
uniform float lighting_uAmbient;
uniform float lighting_uDiffuse;
uniform float lighting_uShininess;
uniform vec3  lighting_uSpecularColor;

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 light_direction, vec3 view_direction, vec3 normal_worldspace, vec3 color) {
    vec3 halfway_direction = normalize(light_direction + view_direction);
    float lambertian = dot(light_direction, normal_worldspace);
    float specular = 0.0;
    if (lambertian > 0.0) {
      float specular_angle = max(dot(normal_worldspace, halfway_direction), 0.0);
      specular = pow(specular_angle, lighting_uShininess);
    }
    lambertian = max(lambertian, 0.0);
    return (lambertian * lighting_uDiffuse * surfaceColor + specular * lighting_uSpecularColor) * color;
}

vec3 lighting_getLightColor(vec3 surfaceColor, vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = surfaceColor;

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);
    lightColor = lighting_uAmbient * surfaceColor * lighting_uAmbientLight.color;

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}

vec3 lighting_getSpecularLightColor(vec3 cameraPosition, vec3 position_worldspace, vec3 normal_worldspace) {
  vec3 lightColor = vec3(0, 0, 0);
  vec3 surfaceColor = vec3(0, 0, 0);

  if (lighting_uEnabled) {
    vec3 view_direction = normalize(cameraPosition - position_worldspace);

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uPointLightCount) {
        break;
      }
      PointLight pointLight = lighting_uPointLight[i];
      vec3 light_position_worldspace = pointLight.position;
      vec3 light_direction = normalize(light_position_worldspace - position_worldspace);
      lightColor += lighting_getLightColor(surfaceColor, light_direction, view_direction, normal_worldspace, pointLight.color);
    }

    for (int i = 0; i < MAX_LIGHTS; i++) {
      if (i >= lighting_uDirectionalLightCount) {
        break;
      }
      DirectionalLight directionalLight = lighting_uDirectionalLight[i];
      lightColor += lighting_getLightColor(surfaceColor, -directionalLight.direction, view_direction, normal_worldspace, directionalLight.color);
    }
  }
  return lightColor;
}
`,V2t={};function U2t(e){const{ambient:t=.35,diffuse:r=.6,shininess:n=32,specularColor:i=[30,30,30]}=e;return{lighting_uAmbient:t,lighting_uDiffuse:r,lighting_uShininess:n,lighting_uSpecularColor:i.map(o=>o/255)}}function W2t(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:V2t;if(!("material"in e))return{};const{material:t}=e;return t?U2t(t):{lighting_uEnabled:!1}}const G2t={name:"gouraud-lighting",dependencies:[O2t],vs:z2t,defines:{LIGHTING_VERTEX:1},getUniforms:W2t},j2t=`attribute float transform_elementID;
vec2 transform_getPixelSizeHalf(vec2 size) {
  return vec2(1.) / (2. * size);
}

vec2 transform_getPixelIndices(vec2 texSize, vec2 pixelSizeHalf) {
  float yIndex = floor((transform_elementID / texSize[0]) + pixelSizeHalf[1]);
  float xIndex = transform_elementID - (yIndex * texSize[0]);
  return vec2(xIndex, yIndex);
}
vec2 transform_getTexCoord(vec2 size) {
  vec2 pixelSizeHalf = transform_getPixelSizeHalf(size);
  vec2 indices = transform_getPixelIndices(size, pixelSizeHalf);
  vec2 coord = indices / size + pixelSizeHalf;
  return coord;
}
vec2 transform_getPos(vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec2 pos = (texCoord * (2.0, 2.0)) - (1., 1.);
  return pos;
}
vec4 transform_getInput(sampler2D texSampler, vec2 size) {
  vec2 texCoord = transform_getTexCoord(size);
  vec4 textureColor = texture2D(texSampler, texCoord);
  return textureColor;
}
`,H2t={name:"transform",vs:j2t,fs:null};class Yp{static getDefaultProgramManager(t){return t.luma=t.luma||{},t.luma.defaultProgramManager=t.luma.defaultProgramManager||new Yp(t),t.luma.defaultProgramManager}constructor(t){this.gl=t,this._programCache={},this._getUniforms={},this._registeredModules={},this._hookFunctions=[],this._defaultModules=[],this._hashes={},this._hashCounter=0,this.stateHash=0,this._useCounts={}}addDefaultModule(t){this._defaultModules.find(r=>r.name===t.name)||this._defaultModules.push(t),this.stateHash++}removeDefaultModule(t){const r=typeof t=="string"?t:t.name;this._defaultModules=this._defaultModules.filter(n=>n.name!==r),this.stateHash++}addShaderHook(t,r){r&&(t=Object.assign(r,{hook:t})),this._hookFunctions.push(t),this.stateHash++}get(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{vs:r="",fs:n="",defines:i={},inject:o={},varyings:a=[],bufferMode:s=35981,transpileToGLSL100:l=!1}=t,u=this._getModuleList(t.modules),c=this._getHash(r),f=this._getHash(n),h=u.map(b=>this._getHash(b.name)).sort(),d=a.map(b=>this._getHash(b)),p=Object.keys(i).sort(),v=Object.keys(o).sort(),m=[],g=[];for(const b of p)m.push(this._getHash(b)),m.push(this._getHash(i[b]));for(const b of v)g.push(this._getHash(b)),g.push(this._getHash(o[b]));const _="".concat(c,"/").concat(f,"D").concat(m.join("/"),"M").concat(h.join("/"),"I").concat(g.join("/"),"V").concat(d.join("/"),"H").concat(this.stateHash,"B").concat(s).concat(l?"T":"");if(!this._programCache[_]){const b=K_t(this.gl,{vs:r,fs:n,modules:u,inject:o,defines:i,hookFunctions:this._hookFunctions,transpileToGLSL100:l});this._programCache[_]=new fz(this.gl,{hash:_,vs:b.vs,fs:b.fs,varyings:a,bufferMode:s}),this._getUniforms[_]=b.getUniforms||(w=>{}),this._useCounts[_]=0}return this._useCounts[_]++,this._programCache[_]}getUniforms(t){return this._getUniforms[t.hash]||null}release(t){const r=t.hash;this._useCounts[r]--,this._useCounts[r]===0&&(this._programCache[r].delete(),delete this._programCache[r],delete this._getUniforms[r],delete this._useCounts[r])}_getHash(t){return this._hashes[t]===void 0&&(this._hashes[t]=this._hashCounter++),this._hashes[t]}_getModuleList(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const r=new Array(this._defaultModules.length+t.length),n={};let i=0;for(let o=0,a=this._defaultModules.length;o<a;++o){const s=this._defaultModules[o],l=s.name;r[i++]=s,n[l]=!0}for(let o=0,a=t.length;o<a;++o){const s=t[o],l=s.name;n[l]||(r[i++]=s,n[l]=!0)}return r.length=i,r}}const X2t={POSITION:"positions",NORMAL:"normals",COLOR_0:"colors",TEXCOORD_0:"texCoords",TEXCOORD_1:"texCoords1",TEXCOORD_2:"texCoords2"};function Y2t(e,t,r){const n={};let i=t.indices;for(const o in t.attributes){const a=t.attributes[o],s=q2t(o,r);if(o==="indices")i=a;else if(a.constant)n[s]=a.value;else{const l=a.value,u={...a};delete u.value,n[s]=[new Ee(e,l),u],Z2t(o,u)}}if(i){const o=i.value||i;mt(o instanceof Uint16Array||o instanceof Uint32Array,'attribute array for "indices" must be of integer type');const a={size:1,isIndexed:i.isIndexed===void 0?!0:i.isIndexed};n.indices=[new Ee(e,{data:o,target:34963}),a]}return n}function q2t(e,t){const{attributeMap:r=X2t}=t||{};return r&&r[e]||e}function Z2t(e,t){let r;switch(e){case"texCoords":case"texCoord1":case"texCoord2":case"texCoord3":r="uvs";break;case"vertices":case"positions":case"normals":case"pickingColors":r="vectors";break}switch(r){case"vectors":t.size=t.size||3;break;case"uvs":t.size=t.size||2;break}mt(Number.isFinite(t.size),"attribute ".concat(e," needs size"))}const Ju=2,K2t=1e4,J2t="Model needs drawMode and vertexCount",CL=()=>{},Q2t={};class wa{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{id:n=Rs("model")}=r;mt(k_(t)),this.id=n,this.gl=t,this.id=r.id||Rs("Model"),this.lastLogTime=0,this.animated=!1,this.initialize(r)}initialize(t){this.props={},this.programManager=t.programManager||Yp.getDefaultProgramManager(this.gl),this._programManagerState=-1,this._managedProgram=!1;const{program:r=null,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this.program=null,this.vertexArray=null,this._programDirty=!0,this.userData={},this.needsRedraw=!0,this._attributes={},this.attributes={},this.uniforms={},this.pickable=!0,this._checkProgram(),this.setUniforms(Object.assign({},this.getModuleUniforms(t.moduleSettings))),this.drawMode=t.drawMode!==void 0?t.drawMode:4,this.vertexCount=t.vertexCount||0,this.geometryBuffers={},this.isInstanced=t.isInstanced||t.instanced||t.instanceCount>0,this._setModelProps(t),this.geometry={},mt(this.drawMode!==void 0&&Number.isFinite(this.vertexCount),J2t)}setProps(t){this._setModelProps(t)}delete(){for(const t in this._attributes)this._attributes[t]!==this.attributes[t]&&this._attributes[t].delete();this._managedProgram&&(this.programManager.release(this.program),this._managedProgram=!1),this.vertexArray.delete(),this._deleteGeometryBuffers()}getDrawMode(){return this.drawMode}getVertexCount(){return this.vertexCount}getInstanceCount(){return this.instanceCount}getAttributes(){return this.attributes}getProgram(){return this.program}setProgram(t){const{program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=t;this.programProps={program:r,vs:n,fs:i,modules:o,defines:a,inject:s,varyings:l,bufferMode:u,transpileToGLSL100:c},this._programDirty=!0}getUniforms(){return this.uniforms}setDrawMode(t){return this.drawMode=t,this}setVertexCount(t){return mt(Number.isFinite(t)),this.vertexCount=t,this}setInstanceCount(t){return mt(Number.isFinite(t)),this.instanceCount=t,this}setGeometry(t){return this.drawMode=t.drawMode,this.vertexCount=t.getVertexCount(),this._deleteGeometryBuffers(),this.geometryBuffers=Y2t(this.gl,t),this.vertexArray.setAttributes(this.geometryBuffers),this}setAttributes(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(tf(t))return this;const r={};for(const n in t){const i=t[n];r[n]=i.getValue?i.getValue():i}return this.vertexArray.setAttributes(r),this}setUniforms(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.assign(this.uniforms,t),this}getModuleUniforms(t){this._checkProgram();const r=this.programManager.getUniforms(this.program);return r?r(t):{}}updateModuleSettings(t){const r=this.getModuleUniforms(t||{});return this.setUniforms(r)}clear(t){return rE(this.program.gl,t),this}draw(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._checkProgram();const{moduleSettings:r=null,framebuffer:n,uniforms:i={},attributes:o={},transformFeedback:a=this.transformFeedback,parameters:s={},vertexArray:l=this.vertexArray}=t;this.setAttributes(o),this.updateModuleSettings(r),this.setUniforms(i);let u;Ot.priority>=Ju&&(u=this._logDrawCallStart(Ju));const c=this.vertexArray.getDrawParams(),{isIndexed:f=c.isIndexed,indexType:h=c.indexType,indexOffset:d=c.indexOffset,vertexArrayInstanced:p=c.isInstanced}=this.props;p&&!this.isInstanced&&Ot.warn("Found instanced attributes on non-instanced model",this.id)();const{isInstanced:v,instanceCount:m}=this,{onBeforeRender:g=CL,onAfterRender:_=CL}=this.props;g(),this.program.setUniforms(this.uniforms);const b=this.program.draw(Object.assign(Q2t,t,{logPriority:u,uniforms:null,framebuffer:n,parameters:s,drawMode:this.getDrawMode(),vertexCount:this.getVertexCount(),vertexArray:l,transformFeedback:a,isIndexed:f,indexType:h,isInstanced:v,instanceCount:m,offset:f?d:0}));return _(),Ot.priority>=Ju&&this._logDrawCallEnd(u,l,n),b}transform(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{discard:r=!0,feedbackBuffers:n,unbindModels:i=[]}=t;let{parameters:o}=t;n&&this._setFeedbackBuffers(n),r&&(o=Object.assign({},o,{[35977]:r})),i.forEach(a=>a.vertexArray.unbindBuffers());try{this.draw(Object.assign({},t,{parameters:o}))}finally{i.forEach(a=>a.vertexArray.bindBuffers())}return this}render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Ot.warn("Model.render() is deprecated. Use Model.setUniforms() and Model.draw()")(),this.setUniforms(t).draw()}_setModelProps(t){Object.assign(this.props,t),"uniforms"in t&&this.setUniforms(t.uniforms),"pickable"in t&&(this.pickable=t.pickable),"instanceCount"in t&&(this.instanceCount=t.instanceCount),"geometry"in t&&this.setGeometry(t.geometry),"attributes"in t&&this.setAttributes(t.attributes),"_feedbackBuffers"in t&&this._setFeedbackBuffers(t._feedbackBuffers)}_checkProgram(){if(!(this._programDirty||this.programManager.stateHash!==this._programManagerState))return;let{program:r}=this.programProps;if(r)this._managedProgram=!1;else{const{vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}=this.programProps;r=this.programManager.get({vs:n,fs:i,modules:o,inject:a,defines:s,varyings:l,bufferMode:u,transpileToGLSL100:c}),this.program&&this._managedProgram&&this.programManager.release(this.program),this._programManagerState=this.programManager.stateHash,this._managedProgram=!0}mt(r instanceof fz,"Model needs a program"),this._programDirty=!1,r!==this.program&&(this.program=r,this.vertexArray?this.vertexArray.setProps({program:this.program,attributes:this.vertexArray.attributes}):this.vertexArray=new h_t(this.gl,{program:this.program}),this.setUniforms(Object.assign({},this.getModuleUniforms())))}_deleteGeometryBuffers(){for(const t in this.geometryBuffers){const r=this.geometryBuffers[t][0]||this.geometryBuffers[t];r instanceof Ee&&r.delete()}}_setAnimationProps(t){this.animated&&mt(t,"Model.draw(): animated uniforms but no animationProps")}_setFeedbackBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(tf(t))return this;const{gl:r}=this.program;return this.transformFeedback=this.transformFeedback||new hz(r,{program:this.program}),this.transformFeedback.setBuffers(t),this}_logDrawCallStart(t){const r=t>3?0:K2t;if(!(Date.now()-this.lastLogTime<r))return this.lastLogTime=Date.now(),Ot.group(Ju,">>> DRAWING MODEL ".concat(this.id),{collapsed:Ot.level<=2})(),t}_logDrawCallEnd(t,r,n,i){if(t===void 0)return;const o=v_t({vertexArray:r,header:"".concat(this.id," attributes"),attributes:this._attributes}),{table:a,unusedTable:s,unusedCount:l}=lL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n)}),{table:u,count:c}=lL({header:"".concat(this.id," uniforms"),program:this.program,uniforms:Object.assign({},this.program.uniforms,n),undefinedOnly:!0});c>0&&Ot.log("MISSING UNIFORMS",Object.keys(u))(),l>0&&Ot.log("UNUSED UNIFORMS",Object.keys(s))();const f=m_t(this.vertexArray.configuration);Ot.table(t,o)(),Ot.table(t,a)(),Ot.table(t+1,f)(),i&&i.log({logLevel:Ju,message:"Rendered to ".concat(i.id)}),Ot.groupEnd(Ju)()}}class tbt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.currentIndex=0,this.feedbackMap={},this.varyings=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}setupResources(t){for(const r of this.bindings)this._setupTransformFeedback(r,t)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyings:r}=this;return r.length>0&&(t=Object.assign({},t,{varyings:r})),t}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this.bindings[this.currentIndex],{sourceBuffers:n,transformFeedback:i}=r;return{attributes:Object.assign({},n,t.attributes),transformFeedback:i}}swap(){return this.feedbackMap?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t)}getBuffer(t){const{feedbackBuffers:r}=this.bindings[this.currentIndex],n=t?r[t]:null;return n?n instanceof Ee?n:n.buffer:null}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{varyingName:r}=t,n=this.getBuffer(r);return n?n.getData():null}delete(){for(const t in this.resources)this.resources[t].delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupBuffers(t),this.varyings=t.varyings||Object.keys(this.bindings[this.currentIndex].feedbackBuffers),this.varyings.length>0&&mt(ee(this.gl))}_getFeedbackBuffers(t){const{sourceBuffers:r={}}=t,n={};if(this.bindings[this.currentIndex]&&Object.assign(n,this.bindings[this.currentIndex].feedbackBuffers),this.feedbackMap)for(const i in this.feedbackMap){const o=this.feedbackMap[i];i in r&&(n[o]=i)}Object.assign(n,t.feedbackBuffers);for(const i in n){const o=n[i];if(typeof o=="string"){const a=r[o],{byteLength:s,usage:l,accessor:u}=a;n[i]=this._createNewBuffer(i,{byteLength:s,usage:l,accessor:u})}}return n}_setupBuffers(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r=null}=t;Object.assign(this.feedbackMap,t.feedbackMap);const n=this._getFeedbackBuffers(t);this._updateBindings({sourceBuffers:r,feedbackBuffers:n})}_setupTransformFeedback(t,r){let{model:n}=r;const{program:i}=n;t.transformFeedback=new hz(this.gl,{program:i,buffers:t.feedbackBuffers})}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this.feedbackMap){const{sourceBuffers:r,feedbackBuffers:n}=this._swapBuffers(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceBuffers:r,feedbackBuffers:n})}}_updateBinding(t,r){return t?(Object.assign(t.sourceBuffers,r.sourceBuffers),Object.assign(t.feedbackBuffers,r.feedbackBuffers),t.transformFeedback&&t.transformFeedback.setBuffers(t.feedbackBuffers),t):{sourceBuffers:Object.assign({},r.sourceBuffers),feedbackBuffers:Object.assign({},r.feedbackBuffers)}}_swapBuffers(t){if(!this.feedbackMap)return null;const r=Object.assign({},t.sourceBuffers),n=Object.assign({},t.feedbackBuffers);for(const i in this.feedbackMap){const o=this.feedbackMap[i];r[i]=t.feedbackBuffers[o],n[o]=t.sourceBuffers[i],mt(n[o]instanceof Ee)}return{sourceBuffers:r,feedbackBuffers:n}}_createNewBuffer(t,r){const n=new Ee(this.gl,r);return this.resources[t]&&this.resources[t].delete(),this.resources[t]=n,n}_getNextIndex(){return(this.currentIndex+1)%2}}const ebt="transform_uSampler_",c1="transform_uSize_",AL="transform_position";function rbt(e){let{vs:t,sourceTextureMap:r,targetTextureVarying:n,targetTexture:i}=e,a=Object.keys(r).length,s=null;const l={};let u=t,c={};if(a>0||n){const f=u.split(`
`),h=f.slice();if(f.forEach((d,p,v)=>{if(a>0){const m=sbt(d,r);if(m){const{updatedLine:g,inject:_}=m;h[p]=g,c=H3([c,_]),Object.assign(l,m.samplerTextureMap),a--}}n&&!s&&(s=abt(d,n))}),n){mt(i);const d="".concat(c1).concat(n),p="uniform vec2 ".concat(d,`;
`),v="     vec2 ".concat(AL," = transform_getPos(").concat(d,`);
     gl_Position = vec4(`).concat(AL,`, 0, 1.);
`);c=H3([c,{"vs:#decl":p,"vs:#main-start":v}])}u=h.join(`
`)}return{vs:u,targetTextureType:s,inject:c,samplerTextureMap:l}}function nbt(e){let{sourceTextureMap:t,targetTextureVarying:r,targetTexture:n}=e;const i={};let o,a;r&&({width:o,height:a}=n,i["".concat(c1).concat(r)]=[o,a]);for(const s in t)({width:o,height:a}=t[s]),i["".concat(c1).concat(s)]=[o,a];return i}function ibt(e){return yz(e,["attribute","in"])}function obt(e){const t="".concat(ebt).concat(e),r="".concat(c1).concat(e),n="  uniform sampler2D ".concat(t,`;
  uniform vec2 `).concat(r,";");return{samplerName:t,sizeName:r,uniformDeclerations:n}}function abt(e,t){const r=yz(e,["varying","out"]);return r&&r.name===t?r.type:null}function sbt(e,t){const r={},n=ibt(e);if(!n)return null;const{type:i,name:o}=n;if(o&&t[o]){const a="// ".concat(e," => Replaced by Transform with a sampler"),{samplerName:s,sizeName:l,uniformDeclerations:u}=obt(o),c=ayt(i),f="  ".concat(i," ").concat(o," = transform_getInput(").concat(s,", ").concat(l,").").concat(c,`;
`);return r[s]=o,{updatedLine:a,inject:{"vs:#decl":u,"vs:#main-start":f},samplerTextureMap:r}}return null}const lbt={[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},ubt="transform_output";class cbt{constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.id=this.currentIndex=0,this._swapTexture=null,this.targetTextureVarying=null,this.targetTextureType=null,this.samplerTextureMap=null,this.bindings=[],this.resources={},this._initialize(r),Object.seal(this)}updateModelProps(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=this._processVertexShader(t);return Object.assign({},t,r)}getDrawOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,sourceTextures:n,framebuffer:i,targetTexture:o}=this.bindings[this.currentIndex],a=Object.assign({},r,t.attributes),s=Object.assign({},t.uniforms),l=Object.assign({},t.parameters);let u=t.discard;if(this.hasSourceTextures||this.hasTargetTexture){a.transform_elementID=this.elementIDBuffer;for(const f in this.samplerTextureMap){const h=this.samplerTextureMap[f];s[f]=n[h]}this._setSourceTextureParameters();const c=nbt({sourceTextureMap:n,targetTextureVarying:this.targetTextureVarying,targetTexture:o});Object.assign(s,c)}return this.hasTargetTexture&&(u=!1,l.viewport=[0,0,i.width,i.height]),{attributes:a,framebuffer:i,uniforms:s,discard:u,parameters:l}}swap(){return this._swapTexture?(this.currentIndex=this._getNextIndex(),!0):!1}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setupTextures(t)}getTargetTexture(){const{targetTexture:t}=this.bindings[this.currentIndex];return t}getData(){let{packed:t=!1}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{framebuffer:r}=this.bindings[this.currentIndex],n=E_(r);if(!t)return n;const i=n.constructor,o=syt(this.targetTextureType),a=new i(n.length*o/4);let s=0;for(let l=0;l<n.length;l+=4)for(let u=0;u<o;u++)a[s++]=n[l+u];return a}getFramebuffer(){return this.bindings[this.currentIndex].framebuffer}delete(){this.ownTexture&&this.ownTexture.delete(),this.elementIDBuffer&&this.elementIDBuffer.delete()}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{_targetTextureVarying:r,_swapTexture:n}=t;this._swapTexture=n,this.targetTextureVarying=r,this.hasTargetTexture=r,this._setupTextures(t)}_createTargetTexture(t){const{sourceTextures:r,textureOrReference:n}=t;if(n instanceof yn)return n;const i=r[n];return i?(this._targetRefTexName=n,this._createNewTexture(i)):null}_setupTextures(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceBuffers:r,_sourceTextures:n={},_targetTexture:i}=t,o=this._createTargetTexture({sourceTextures:n,textureOrReference:i});this.hasSourceTextures=this.hasSourceTextures||n&&Object.keys(n).length>0,this._updateBindings({sourceBuffers:r,sourceTextures:n,targetTexture:o}),"elementCount"in t&&this._updateElementIDBuffer(t.elementCount)}_updateElementIDBuffer(t){if(typeof t!="number"||this.elementCount>=t)return;const r=new Float32Array(t);r.forEach((n,i,o)=>{o[i]=i}),this.elementIDBuffer?this.elementIDBuffer.setData({data:r}):this.elementIDBuffer=new Ee(this.gl,{data:r,accessor:{size:1}}),this.elementCount=t}_updateBindings(t){if(this.bindings[this.currentIndex]=this._updateBinding(this.bindings[this.currentIndex],t),this._swapTexture){const{sourceTextures:r,targetTexture:n}=this._swapTextures(this.bindings[this.currentIndex]),i=this._getNextIndex();this.bindings[i]=this._updateBinding(this.bindings[i],{sourceTextures:r,targetTexture:n})}}_updateBinding(t,r){const{sourceBuffers:n,sourceTextures:i,targetTexture:o}=r;if(t||(t={sourceBuffers:{},sourceTextures:{},targetTexture:null}),Object.assign(t.sourceTextures,i),Object.assign(t.sourceBuffers,n),o){t.targetTexture=o;const{width:a,height:s}=o,{framebuffer:l}=t;l?(l.update({attachments:{[36064]:o},resizeAttachments:!1}),l.resize({width:a,height:s})):t.framebuffer=new lr(this.gl,{id:"transform-framebuffer",width:a,height:s,attachments:{[36064]:o}})}return t}_setSourceTextureParameters(){const t=this.currentIndex,{sourceTextures:r}=this.bindings[t];for(const n in r)r[n].setParameters(lbt)}_swapTextures(t){if(!this._swapTexture)return null;const r=Object.assign({},t.sourceTextures);r[this._swapTexture]=t.targetTexture;const n=t.sourceTextures[this._swapTexture];return{sourceTextures:r,targetTexture:n}}_createNewTexture(t){const r=sz(t,{parameters:{[10241]:9728,[10240]:9728,[10242]:33071,[10243]:33071},pixelStore:{[37440]:!1}});return this.ownTexture&&this.ownTexture.delete(),this.ownTexture=r,r}_getNextIndex(){return(this.currentIndex+1)%2}_processVertexShader(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{sourceTextures:r,targetTexture:n}=this.bindings[this.currentIndex],{vs:i,uniforms:o,targetTextureType:a,inject:s,samplerTextureMap:l}=rbt({vs:t.vs,sourceTextureMap:r,targetTextureVarying:this.targetTextureVarying,targetTexture:n}),u=H3([t.inject||{},s]);this.targetTextureType=a,this.samplerTextureMap=l;const c=t._fs||bz({version:uz(i),input:this.targetTextureVarying,inputType:a,output:ubt}),f=this.hasSourceTextures||this.targetTextureVarying?[H2t].concat(t.modules||[]):t.modules;return{vs:i,fs:c,modules:f,uniforms:o,inject:u}}}class hE{static isSupported(t){return ee(t)}constructor(t){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.gl=t,this.model=null,this.elementCount=0,this.bufferTransform=null,this.textureTransform=null,this.elementIDBuffer=null,this._initialize(r),Object.seal(this)}delete(){const{model:t,bufferTransform:r,textureTransform:n}=this;t&&t.delete(),r&&r.delete(),n&&n.delete()}run(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{clearRenderTarget:r=!0}=t,n=this._updateDrawOptions(t);r&&n.framebuffer&&n.framebuffer.clear({color:!0}),this.model.transform(n)}swap(){let t=!1;const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)t=t||n.swap();mt(t,"Nothing to swap")}getBuffer(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null;return this.bufferTransform&&this.bufferTransform.getBuffer(t)}getData(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r){const i=n.getData(t);if(i)return i}return null}getFramebuffer(){return this.textureTransform&&this.textureTransform.getFramebuffer()}update(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};"elementCount"in t&&this.model.setVertexCount(t.elementCount);const r=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const n of r)n.update(t)}_initialize(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{gl:r}=this;this._buildResourceTransforms(r,t),t=this._updateModelProps(t),this.model=new wa(r,Object.assign({},t,{fs:t.fs||bz({version:uz(t.vs)}),id:t.id||"transform-model",drawMode:t.drawMode||0,vertexCount:t.elementCount})),this.bufferTransform&&this.bufferTransform.setupResources({model:this.model})}_updateModelProps(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=i.updateModelProps(r);return r}_buildResourceTransforms(t,r){fbt(r)&&(this.bufferTransform=new tbt(t,r)),hbt(r)&&(this.textureTransform=new cbt(t,r)),mt(this.bufferTransform||this.textureTransform,"must provide source/feedback buffers or source/target textures")}_updateDrawOptions(t){let r=Object.assign({},t);const n=[this.bufferTransform,this.textureTransform].filter(Boolean);for(const i of n)r=Object.assign(r,i.getDrawOptions(r));return r}}function fbt(e){return!!(!tf(e.feedbackBuffers)||!tf(e.feedbackMap)||e.varyings&&e.varyings.length>0)}function hbt(e){return!!(!tf(e._sourceTextures)||e._targetTexture||e._targetTextureVarying)}const ML={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class bu{static get DRAW_MODE(){return ML}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{id:r=Rs("geometry"),drawMode:n=ML.TRIANGLES,attributes:i={},indices:o=null,vertexCount:a=null}=t;this.id=r,this.drawMode=n|0,this.attributes={},this.userData={},this._setAttributes(i,o),this.vertexCount=a||this._calculateVertexCount(this.attributes,this.indices)}get mode(){return this.drawMode}getVertexCount(){return this.vertexCount}getAttributes(){return this.indices?{indices:this.indices,...this.attributes}:this.attributes}_print(t){return"Geometry ".concat(this.id," attribute ").concat(t)}_setAttributes(t,r){r&&(this.indices=ArrayBuffer.isView(r)?{value:r,size:1}:r);for(const n in t){let i=t[n];i=ArrayBuffer.isView(i)?{value:i}:i,mt(ArrayBuffer.isView(i.value),"".concat(this._print(n),": must be typed array or object with value as typed array")),(n==="POSITION"||n==="positions")&&!i.size&&(i.size=3),n==="indices"?(mt(!this.indices),this.indices=i):this.attributes[n]=i}return this.indices&&this.indices.isIndexed!==void 0&&(this.indices=Object.assign({},this.indices),delete this.indices.isIndexed),this}_calculateVertexCount(t,r){if(r)return r.value.length;let n=1/0;for(const i in t){const o=t[i],{value:a,size:s,constant:l}=o;!l&&a&&s>=1&&(n=Math.min(n,a.length/s))}return mt(Number.isFinite(n)),n}}let dbt=1,pbt=1;class zz{constructor(){this.time=0,this.channels=new Map,this.animations=new Map,this.playing=!1,this.lastEngineTime=-1}addChannel(t){const{delay:r=0,duration:n=Number.POSITIVE_INFINITY,rate:i=1,repeat:o=1}=t,a=dbt++,s={time:0,delay:r,duration:n,rate:i,repeat:o};return this._setChannelTime(s,this.time),this.channels.set(a,s),a}removeChannel(t){this.channels.delete(t);for(const[r,n]of this.animations)n.channel===t&&this.detachAnimation(r)}isFinished(t){const r=this.channels.get(t);return r===void 0?!1:this.time>=r.delay+r.duration*r.repeat}getTime(t){if(t===void 0)return this.time;const r=this.channels.get(t);return r===void 0?-1:r.time}setTime(t){this.time=Math.max(0,t);const r=this.channels.values();for(const i of r)this._setChannelTime(i,this.time);const n=this.animations.values();for(const i of n){const{animation:o,channel:a}=i;o.setTime(this.getTime(a))}}play(){this.playing=!0}pause(){this.playing=!1,this.lastEngineTime=-1}reset(){this.setTime(0)}attachAnimation(t,r){const n=pbt++;return this.animations.set(n,{animation:t,channel:r}),t.setTime(this.getTime(r)),n}detachAnimation(t){this.animations.delete(t)}update(t){this.playing&&(this.lastEngineTime===-1&&(this.lastEngineTime=t),this.setTime(this.time+(t-this.lastEngineTime)),this.lastEngineTime=t)}_setChannelTime(t,r){const n=r-t.delay,i=t.duration*t.repeat;n>=i?t.time=t.duration*t.rate:(t.time=Math.max(0,n)%t.duration,t.time*=t.rate)}}const Vz="#define SMOOTH_EDGE_RADIUS 0.5",vbt=`
`.concat(Vz,`

struct VertexGeometry {
  vec4 position;
  vec3 worldPosition;
  vec3 worldPositionAlt;
  vec3 normal;
  vec2 uv;
  vec3 pickingColor;
} geometry = VertexGeometry(
  vec4(0.0, 0.0, 1.0, 0.0),
  vec3(0.0),
  vec3(0.0),
  vec3(0.0),
  vec2(0.0),
  vec3(0.0)
);
`),gbt=`
`.concat(Vz,`

struct FragmentGeometry {
  vec2 uv;
} geometry;

float smoothedge(float edge, float x) {
  return smoothstep(edge - SMOOTH_EDGE_RADIUS, edge + SMOOTH_EDGE_RADIUS, x);
}
`),mbt={name:"geometry",vs:vbt,fs:gbt},ce={DEFAULT:-1,LNGLAT:1,METER_OFFSETS:2,LNGLAT_OFFSETS:3,CARTESIAN:0};Object.defineProperty(ce,"IDENTITY",{get:()=>(Ht.deprecated("COORDINATE_SYSTEM.IDENTITY","COORDINATE_SYSTEM.CARTESIAN")(),0)});const xi={WEB_MERCATOR:1,GLOBE:2,WEB_MERCATOR_AUTO_OFFSET:4,IDENTITY:0},Ds={common:0,meters:1,pixels:2},xL={click:{handler:"onClick"},panstart:{handler:"onDragStart"},panmove:{handler:"onDrag"},panend:{handler:"onDragEnd"}},qp={DRAW:"draw",MASK:"mask"},_bt=Object.keys(ce).map(e=>"const int COORDINATE_SYSTEM_".concat(e," = ").concat(ce[e],";")).join(""),ybt=Object.keys(xi).map(e=>"const int PROJECTION_MODE_".concat(e," = ").concat(xi[e],";")).join(""),bbt=Object.keys(Ds).map(e=>"const int UNIT_".concat(e.toUpperCase()," = ").concat(Ds[e],";")).join(""),wbt="".concat(_bt,`
`).concat(ybt,`
`).concat(bbt,`

uniform int project_uCoordinateSystem;
uniform int project_uProjectionMode;
uniform float project_uScale;
uniform bool project_uWrapLongitude;
uniform vec3 project_uCommonUnitsPerMeter;
uniform vec3 project_uCommonUnitsPerWorldUnit;
uniform vec3 project_uCommonUnitsPerWorldUnit2;
uniform vec4 project_uCenter;
uniform mat4 project_uModelMatrix;
uniform mat4 project_uViewProjectionMatrix;
uniform vec2 project_uViewportSize;
uniform float project_uDevicePixelRatio;
uniform float project_uFocalDistance;
uniform vec3 project_uCameraPosition;
uniform vec3 project_uCoordinateOrigin;
uniform vec3 project_uCommonOrigin;
uniform bool project_uPseudoMeters;

const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / (PI * 2.0);
const vec3 ZERO_64_LOW = vec3(0.0);
const float EARTH_RADIUS = 6370972.0; // meters
const float GLOBE_RADIUS = 256.0;

// returns an adjustment factor for uCommonUnitsPerMeter
float project_size() {
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR &&
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT &&
    project_uPseudoMeters == false) {

    // uCommonUnitsPerMeter in low-zoom Web Mercator is non-linear
    // Adjust by 1 / cos(latitude)
    // If geometry.position (vertex in common space) is populated, use it
    // Otherwise use geometry.worldPosition (anchor in world space)
    
    if (geometry.position.w == 0.0) {
      float y = clamp(geometry.worldPosition.y, -89.9, 89.9);
      return 1.0 / cos(radians(y));
    }

    // latitude from common y: 2.0 * (atan(exp(y / TILE_SIZE * 2.0 * PI - PI)) - PI / 4.0)
    // Taylor series of 1 / cos(latitude)
    // Max error < 0.003
  
    float y = geometry.position.y / TILE_SIZE * 2.0 - 1.0;
    float y2 = y * y;
    float y4 = y2 * y2;
    float y6 = y4 * y2;
    return 1.0 + 4.9348 * y2 + 4.0587 * y4 + 1.5642 * y6;
  }
  return 1.0;
}
//
// Scaling offsets - scales meters to "world distance"
// Note the scalar version of project_size is for scaling the z component only
//
float project_size(float meters) {
  return meters * project_uCommonUnitsPerMeter.z * project_size();
}

vec2 project_size(vec2 meters) {
  return meters * project_uCommonUnitsPerMeter.xy * project_size();
}

vec3 project_size(vec3 meters) {
  return meters * project_uCommonUnitsPerMeter * project_size();
}

vec4 project_size(vec4 meters) {
  return vec4(meters.xyz * project_uCommonUnitsPerMeter, meters.w);
}

// Get rotation matrix that aligns the z axis with the given up vector
// Find 3 unit vectors ux, uy, uz that are perpendicular to each other and uz == up
mat3 project_get_orientation_matrix(vec3 up) {
  vec3 uz = normalize(up);
  // Tangent on XY plane
  vec3 ux = abs(uz.z) == 1.0 ? vec3(1.0, 0.0, 0.0) : normalize(vec3(uz.y, -uz.x, 0));
  vec3 uy = cross(uz, ux);
  return mat3(ux, uy, uz);
}

bool project_needs_rotation(vec3 commonPosition, out mat3 transform) {
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    transform = project_get_orientation_matrix(commonPosition);
    return true;
  }
  return false;
}

//
// Projecting normal - transform deltas from current coordinate system to
// normals in the worldspace
//
vec3 project_normal(vec3 vector) {
  // Apply model matrix
  vec4 normal_modelspace = project_uModelMatrix * vec4(vector, 0.0);
  vec3 n = normalize(normal_modelspace.xyz * project_uCommonUnitsPerMeter);
  mat3 rotation;
  if (project_needs_rotation(geometry.position.xyz, rotation)) {
    n = rotation * n;
  }
  return n;
}

vec4 project_offset_(vec4 offset) {
  float dy = offset.y;
  vec3 commonUnitsPerWorldUnit = project_uCommonUnitsPerWorldUnit + project_uCommonUnitsPerWorldUnit2 * dy;
  return vec4(offset.xyz * commonUnitsPerWorldUnit, offset.w);
}

//
// Projecting positions - non-linear projection: lnglats => unit tile [0-1, 0-1]
//
vec2 project_mercator_(vec2 lnglat) {
  float x = lnglat.x;
  if (project_uWrapLongitude) {
    x = mod(x + 180., 360.0) - 180.;
  }
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan_fp32(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

vec3 project_globe_(vec3 lnglatz) {
  float lambda = radians(lnglatz.x);
  float phi = radians(lnglatz.y);
  float cosPhi = cos(phi);
  float D = (lnglatz.z / EARTH_RADIUS + 1.0) * GLOBE_RADIUS;

  return vec3(
    sin(lambda) * cosPhi,
    -cos(lambda) * cosPhi,
    sin(phi)
  ) * D;
}

//
// Projects positions (defined by project_uCoordinateSystem) to common space (defined by project_uProjectionMode)
//
vec4 project_position(vec4 position, vec3 position64Low) {
  vec4 position_world = project_uModelMatrix * position;

  // Work around for a Mac+NVIDIA bug https://github.com/visgl/deck.gl/issues/4145
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_mercator_(position_world.xy),
        project_size(position_world.z),
        position_world.w
      );
    }
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN) {
      position_world.xyz += project_uCoordinateOrigin;
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_GLOBE) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      return vec4(
        project_globe_(position_world.xyz),
        position_world.w
      );
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET) {
    if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT) {
      if (abs(position_world.y - project_uCoordinateOrigin.y) > 0.25) {
        // Too far from the projection center for offset mode to be accurate
        // Only use high parts
        return vec4(
          project_mercator_(position_world.xy) - project_uCommonOrigin.xy,
          project_size(position_world.z),
          position_world.w
        );
      }
    }
  }
  if (project_uProjectionMode == PROJECTION_MODE_IDENTITY ||
    (project_uProjectionMode == PROJECTION_MODE_WEB_MERCATOR_AUTO_OFFSET &&
    (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
     project_uCoordinateSystem == COORDINATE_SYSTEM_CARTESIAN))) {
    // Subtract high part of 64 bit value. Convert remainder to float32, preserving precision.
    position_world.xyz -= project_uCoordinateOrigin;
  }

  // Translation is already added to the high parts
  return project_offset_(position_world + project_uModelMatrix * vec4(position64Low, 0.0));
}

vec4 project_position(vec4 position) {
  return project_position(position, ZERO_64_LOW);
}

vec3 project_position(vec3 position, vec3 position64Low) {
  vec4 projected_position = project_position(vec4(position, 1.0), position64Low);
  return projected_position.xyz;
}

vec3 project_position(vec3 position) {
  vec4 projected_position = project_position(vec4(position, 1.0), ZERO_64_LOW);
  return projected_position.xyz;
}

vec2 project_position(vec2 position) {
  vec4 projected_position = project_position(vec4(position, 0.0, 1.0), ZERO_64_LOW);
  return projected_position.xy;
}

vec4 project_common_position_to_clipspace(vec4 position, mat4 viewProjectionMatrix, vec4 center) {
  return viewProjectionMatrix * position + center;
}

//
// Projects from common space coordinates to clip space.
// Uses project_uViewProjectionMatrix
//
vec4 project_common_position_to_clipspace(vec4 position) {
  return project_common_position_to_clipspace(position, project_uViewProjectionMatrix, project_uCenter);
}

// Returns a clip space offset that corresponds to a given number of screen pixels
vec2 project_pixel_size_to_clipspace(vec2 pixels) {
  vec2 offset = pixels / project_uViewportSize * project_uDevicePixelRatio * 2.0;
  return offset * project_uFocalDistance;
}

float project_size_to_pixel(float meters) {
  return project_size(meters) * project_uScale;
}
float project_size_to_pixel(float size, int unit) {
  if (unit == UNIT_METERS) return project_size_to_pixel(size);
  if (unit == UNIT_COMMON) return size * project_uScale;
  // UNIT_PIXELS
  return size;
}
float project_pixel_size(float pixels) {
  return pixels / project_uScale;
}
vec2 project_pixel_size(vec2 pixels) {
  return pixels / project_uScale;
}
`);function Sbt(e,t){if(e===t)return!0;if(Array.isArray(e)){const r=e.length;if(!t||t.length!==r)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}return!1}function Zp(e){let t={},r;return n=>{for(const i in n)if(!Sbt(n[i],t[i])){r=e(n),t=n;break}return r}}const LL=[0,0,0,0],Tbt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0],Uz=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],kbt=[0,0,0],Wz=[0,0,0],Pbt=Zp(Abt);function Gz(e,t,r=Wz){r.length<3&&(r=[r[0],r[1],0]);let n=r,i,o=!0;switch(t===ce.LNGLAT_OFFSETS||t===ce.METER_OFFSETS?i=r:i=e.isGeospatial?[Math.fround(e.longitude),Math.fround(e.latitude),0]:null,e.projectionMode){case xi.WEB_MERCATOR:(t===ce.LNGLAT||t===ce.CARTESIAN)&&(i=[0,0,0],o=!1);break;case xi.WEB_MERCATOR_AUTO_OFFSET:t===ce.LNGLAT?n=i:t===ce.CARTESIAN&&(n=[Math.fround(e.center[0]),Math.fround(e.center[1]),0],i=e.unprojectPosition(n),n[0]-=r[0],n[1]-=r[1],n[2]-=r[2]);break;case xi.IDENTITY:n=e.position.map(Math.fround),n[2]=n[2]||0;break;case xi.GLOBE:o=!1,i=null;break;default:o=!1}return{geospatialOrigin:i,shaderCoordinateOrigin:n,offsetMode:o}}function Ebt(e,t,r){const{viewMatrixUncentered:n,projectionMatrix:i}=e;let{viewMatrix:o,viewProjectionMatrix:a}=e,s=LL,l=LL,u=e.cameraPosition;const{geospatialOrigin:c,shaderCoordinateOrigin:f,offsetMode:h}=Gz(e,t,r);return h&&(l=e.projectPosition(c||f),u=[u[0]-l[0],u[1]-l[1],u[2]-l[2]],l[3]=1,s=Ef([],l,a),o=n||o,a=Hl([],i,o),a=Hl([],a,Tbt)),{viewMatrix:o,viewProjectionMatrix:a,projectionCenter:s,originCommon:l,cameraPosCommon:u,shaderCoordinateOrigin:f,geospatialOrigin:c}}function Cbt({viewport:e,devicePixelRatio:t=1,modelMatrix:r=null,coordinateSystem:n=ce.DEFAULT,coordinateOrigin:i=Wz,autoWrapLongitude:o=!1}){n===ce.DEFAULT&&(n=e.isGeospatial?ce.LNGLAT:ce.CARTESIAN);const a=Pbt({viewport:e,devicePixelRatio:t,coordinateSystem:n,coordinateOrigin:i});return a.project_uWrapLongitude=o,a.project_uModelMatrix=r||Uz,a}function Abt({viewport:e,devicePixelRatio:t,coordinateSystem:r,coordinateOrigin:n}){const{projectionCenter:i,viewProjectionMatrix:o,originCommon:a,cameraPosCommon:s,shaderCoordinateOrigin:l,geospatialOrigin:u}=Ebt(e,r,n),c=e.getDistanceScales(),f=[e.width*t,e.height*t],h=Ef([],[0,0,-e.focalDistance,1],e.projectionMatrix)[3]||1,d={project_uCoordinateSystem:r,project_uProjectionMode:e.projectionMode,project_uCoordinateOrigin:l,project_uCommonOrigin:a.slice(0,3),project_uCenter:i,project_uPseudoMeters:Boolean(e._pseudoMeters),project_uViewportSize:f,project_uDevicePixelRatio:t,project_uFocalDistance:h,project_uCommonUnitsPerMeter:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit:c.unitsPerMeter,project_uCommonUnitsPerWorldUnit2:kbt,project_uScale:e.scale,project_uWrapLongitude:!1,project_uViewProjectionMatrix:o,project_uModelMatrix:Uz,project_uCameraPosition:s};if(u){const p=e.getDistanceScales(u);switch(r){case ce.METER_OFFSETS:d.project_uCommonUnitsPerWorldUnit=p.unitsPerMeter,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerMeter2;break;case ce.LNGLAT:case ce.LNGLAT_OFFSETS:e._pseudoMeters||(d.project_uCommonUnitsPerMeter=p.unitsPerMeter),d.project_uCommonUnitsPerWorldUnit=p.unitsPerDegree,d.project_uCommonUnitsPerWorldUnit2=p.unitsPerDegree2;break;case ce.CARTESIAN:d.project_uCommonUnitsPerWorldUnit=[1,1,p.unitsPerMeter[2]],d.project_uCommonUnitsPerWorldUnit2=[0,0,p.unitsPerMeter2[2]];break}}return d}const Mbt={};function xbt(e=Mbt){return"viewport"in e?Cbt(e):{}}const dE={name:"project",dependencies:[cyt,mbt],vs:wbt,getUniforms:xbt},Lbt=`
vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset, out vec4 commonPosition
) {
  vec3 projectedPosition = project_position(position, position64Low);
  mat3 rotation;
  if (project_needs_rotation(projectedPosition, rotation)) {
    // offset is specified as ENU
    // when in globe projection, rotate offset so that the ground alighs with the surface of the globe
    offset = rotation * offset;
  }
  commonPosition = vec4(projectedPosition + offset, 1.0);
  return project_common_position_to_clipspace(commonPosition);
}

vec4 project_position_to_clipspace(
  vec3 position, vec3 position64Low, vec3 offset
) {
  vec4 commonPosition;
  return project_position_to_clipspace(position, position64Low, offset, commonPosition);
}
`,wu={name:"project32",dependencies:[dE],vs:Lbt};function Ibt(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Bc(e,t){const r=Ef([],t,e);return fE(r,r,1/r[3]),r}function IL(e,t){const r=e%t;return r<0?t+r:r}function J3(e,t,r){return e<t?t:e>r?r:e}function Obt(e){return Math.log(e)*Math.LOG2E}const pE=Math.log2||Obt;function Sa(e,t){if(!e)throw new Error(t||"@math.gl/web-mercator: assertion failed.")}const Li=Math.PI,jz=Li/4,Ni=Li/180,Q3=180/Li,vp=512,tT=4003e4,Av=85.051129,Rbt=1.5;function Dbt(e){return pE(e)}function Ns(e){const[t,r]=e;Sa(Number.isFinite(t)),Sa(Number.isFinite(r)&&r>=-90&&r<=90,"invalid latitude");const n=t*Ni,i=r*Ni,o=vp*(n+Li)/(2*Li),a=vp*(Li+Math.log(Math.tan(jz+i*.5)))/(2*Li);return[o,a]}function rf(e){const[t,r]=e,n=t/vp*(2*Li)-Li,i=2*(Math.atan(Math.exp(r/vp*(2*Li)-Li))-jz);return[n*Q3,i*Q3]}function Nbt(e){const{latitude:t}=e;Sa(Number.isFinite(t));const r=Math.cos(t*Ni);return Dbt(tT*r)-9}function eT(e){const{latitude:t,longitude:r,highPrecision:n=!1}=e;Sa(Number.isFinite(t)&&Number.isFinite(r));const i=vp,o=Math.cos(t*Ni),a=i/360,s=a/o,l=i/tT/o,u={unitsPerMeter:[l,l,l],metersPerUnit:[1/l,1/l,1/l],unitsPerDegree:[a,s,l],degreesPerUnit:[1/a,1/s,1/l]};if(n){const c=Ni*Math.tan(t*Ni)/o,f=a*c/2,h=i/tT*c,d=h/s*l;u.unitsPerDegree2=[0,f,h],u.unitsPerMeter2=[d,0,d]}return u}function Hz(e,t){const[r,n,i]=e,[o,a,s]=t,{unitsPerMeter:l,unitsPerMeter2:u}=eT({longitude:r,latitude:n,highPrecision:!0}),c=Ns(e);c[0]+=o*(l[0]+u[0]*a),c[1]+=a*(l[1]+u[1]*a);const f=rf(c),h=(i||0)+(s||0);return Number.isFinite(i)||Number.isFinite(s)?[f[0],f[1],h]:f}function Fbt(e){const{height:t,pitch:r,bearing:n,altitude:i,scale:o,center:a}=e,s=Ibt();u1(s,s,[0,0,-i]),Oz(s,s,-r*Ni),Rz(s,s,n*Ni);const l=o/t;return cE(s,s,[l,l,l]),a&&u1(s,s,Eyt([],a)),s}function $bt(e){const{width:t,height:r,altitude:n,pitch:i=0,offset:o,center:a,scale:s,nearZMultiplier:l=1,farZMultiplier:u=1}=e;let{fovy:c=f1(Rbt)}=e;n!==void 0&&(c=f1(n));const f=c*Ni,h=i*Ni,d=Xz(c);let p=d;a&&(p+=a[2]*s/Math.cos(h)/r);const v=f*(.5+(o?o[1]:0)/r),m=Math.sin(v)*p/Math.sin(J3(Math.PI/2-h-v,.01,Math.PI-.01)),g=Math.sin(h)*m+p,_=p*10,b=Math.min(g*u,_);return{fov:f,aspect:t/r,focalDistance:d,near:l,far:b}}function f1(e){return 2*Math.atan(.5/e)*Q3}function Xz(e){return .5/Math.tan(.5*e*Ni)}function Yz(e,t){const[r,n,i=0]=e;return Sa(Number.isFinite(r)&&Number.isFinite(n)&&Number.isFinite(i)),Bc(t,[r,n,i,1])}function C_(e,t,r=0){const[n,i,o]=e;if(Sa(Number.isFinite(n)&&Number.isFinite(i),"invalid pixel coordinate"),Number.isFinite(o))return Bc(t,[n,i,o,1]);const a=Bc(t,[n,i,0,1]),s=Bc(t,[n,i,1,1]),l=a[2],u=s[2],c=l===u?0:((r||0)-l)/(u-l);return Tz([],a,s,c)}function qz(e){const{width:t,height:r,bounds:n,minExtent:i=0,maxZoom:o=24,offset:a=[0,0]}=e,[[s,l],[u,c]]=n,f=Bbt(e.padding),h=Ns([s,J3(c,-Av,Av)]),d=Ns([u,J3(l,-Av,Av)]),p=[Math.max(Math.abs(d[0]-h[0]),i),Math.max(Math.abs(d[1]-h[1]),i)],v=[t-f.left-f.right-Math.abs(a[0])*2,r-f.top-f.bottom-Math.abs(a[1])*2];Sa(v[0]>0&&v[1]>0);const m=v[0]/p[0],g=v[1]/p[1],_=(f.right-f.left)/2/m,b=(f.top-f.bottom)/2/g,w=[(d[0]+h[0])/2+_,(d[1]+h[1])/2+b],T=rf(w),S=Math.min(o,pE(Math.abs(Math.min(m,g))));return Sa(Number.isFinite(S)),{longitude:T[0],latitude:T[1],zoom:S}}function Bbt(e=0){return typeof e=="number"?{top:e,bottom:e,left:e,right:e}:(Sa(Number.isFinite(e.top)&&Number.isFinite(e.bottom)&&Number.isFinite(e.left)&&Number.isFinite(e.right)),e)}const OL=Math.PI/180;function zbt(e,t=0){const{width:r,height:n,unproject:i}=e,o={targetZ:t},a=i([0,n],o),s=i([r,n],o);let l,u;const c=e.fovy?.5*e.fovy*OL:Math.atan(.5/e.altitude),f=(90-e.pitch)*OL;return c>f-.01?(l=RL(e,0,t),u=RL(e,r,t)):(l=i([0,0],o),u=i([r,0],o)),[a,s,u,l]}function RL(e,t,r){const{pixelUnprojectionMatrix:n}=e,i=Bc(n,[t,0,1,1]),o=Bc(n,[t,e.height,1,1]),s=(r*e.distanceScales.unitsPerMeter[2]-i[2])/(o[2]-i[2]),l=Tz([],i,o,s),u=rf(l);return u.push(r),u}const DL=512;function Vbt(e){const{width:t,height:r,pitch:n=0}=e;let{longitude:i,latitude:o,zoom:a,bearing:s=0}=e;(i<-180||i>180)&&(i=IL(i+180,360)-180),(s<-180||s>180)&&(s=IL(s+180,360)-180);const l=pE(r/DL);if(a<=l)a=l,o=0;else{const u=r/2/Math.pow(2,a),c=rf([0,u])[1];if(o<c)o=c;else{const f=rf([0,DL-u])[1];o>f&&(o=f)}}return{width:t,height:r,longitude:i,latitude:o,zoom:a,pitch:n,bearing:s}}const Ubt=`
const int max_lights = 2;
uniform mat4 shadow_uViewProjectionMatrices[max_lights];
uniform vec4 shadow_uProjectCenters[max_lights];
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform int shadow_uLightId;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

vec4 shadow_setVertexPosition(vec4 position_commonspace) {
  if (shadow_uDrawShadowMap) {
    return project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[shadow_uLightId], shadow_uProjectCenters[shadow_uLightId]);
  }
  if (shadow_uUseShadowMap) {
    for (int i = 0; i < max_lights; i++) {
      if(i < int(shadow_uLightCount)) {
        vec4 shadowMap_position = project_common_position_to_clipspace(position_commonspace, shadow_uViewProjectionMatrices[i], shadow_uProjectCenters[i]);
        shadow_vPosition[i] = (shadowMap_position.xyz / shadowMap_position.w + 1.0) / 2.0;
      }
    }
  }
  return gl_Position;
}
`,Wbt=`
const int max_lights = 2;
uniform bool shadow_uDrawShadowMap;
uniform bool shadow_uUseShadowMap;
uniform sampler2D shadow_uShadowMap0;
uniform sampler2D shadow_uShadowMap1;
uniform vec4 shadow_uColor;
uniform float shadow_uLightCount;

varying vec3 shadow_vPosition[max_lights];

const vec4 bitPackShift = vec4(1.0, 255.0, 65025.0, 16581375.0);
const vec4 bitUnpackShift = 1.0 / bitPackShift;
const vec4 bitMask = vec4(1.0 / 255.0, 1.0 / 255.0, 1.0 / 255.0,  0.0);

float shadow_getShadowWeight(vec3 position, sampler2D shadowMap) {
  vec4 rgbaDepth = texture2D(shadowMap, position.xy);

  float z = dot(rgbaDepth, bitUnpackShift);
  return smoothstep(0.001, 0.01, position.z - z);
}

vec4 shadow_filterShadowColor(vec4 color) {
  if (shadow_uDrawShadowMap) {
    vec4 rgbaDepth = fract(gl_FragCoord.z * bitPackShift);
    rgbaDepth -= rgbaDepth.gbaa * bitMask;
    return rgbaDepth;
  }
  if (shadow_uUseShadowMap) {
    float shadowAlpha = 0.0;
    shadowAlpha += shadow_getShadowWeight(shadow_vPosition[0], shadow_uShadowMap0);
    if(shadow_uLightCount > 1.0) {
      shadowAlpha += shadow_getShadowWeight(shadow_vPosition[1], shadow_uShadowMap1);
    }
    shadowAlpha *= shadow_uColor.a / shadow_uLightCount;
    float blendedAlpha = shadowAlpha + color.a * (1.0 - shadowAlpha);

    return vec4(
      mix(color.rgb, shadow_uColor.rgb, shadowAlpha / blendedAlpha),
      blendedAlpha
    );
  }
  return color;
}
`,Gbt=Zp(qbt),jbt=Zp(Zbt),Hbt=[0,0,0,1],Xbt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0];function Ybt(e,t){const[r,n,i]=e,o=C_([r,n,i],t);return Number.isFinite(i)?o:[o[0],o[1],0]}function qbt({viewport:e,center:t}){return new Hr(e.viewProjectionMatrix).invert().transform(t)}function Zbt({viewport:e,shadowMatrices:t}){const r=[],n=e.pixelUnprojectionMatrix,i=e.isGeospatial?void 0:1,o=[[0,0,i],[e.width,0,i],[0,e.height,i],[e.width,e.height,i],[0,0,-1],[e.width,0,-1],[0,e.height,-1],[e.width,e.height,-1]].map(a=>Ybt(a,n));for(const a of t){const s=a.clone().translate(new St(e.center).negate()),l=o.map(c=>s.transform(c)),u=new Hr().ortho({left:Math.min(...l.map(c=>c[0])),right:Math.max(...l.map(c=>c[0])),bottom:Math.min(...l.map(c=>c[1])),top:Math.max(...l.map(c=>c[1])),near:Math.min(...l.map(c=>-c[2])),far:Math.max(...l.map(c=>-c[2]))});r.push(u.multiplyRight(a))}return r}function Kbt(e,t){const{shadowEnabled:r=!0}=e;if(!r||!e.shadowMatrices||!e.shadowMatrices.length)return{shadow_uDrawShadowMap:!1,shadow_uUseShadowMap:!1};const n={shadow_uDrawShadowMap:Boolean(e.drawToShadowMap),shadow_uUseShadowMap:e.shadowMaps?e.shadowMaps.length>0:!1,shadow_uColor:e.shadowColor||Hbt,shadow_uLightId:e.shadowLightId||0,shadow_uLightCount:e.shadowMatrices.length},i=Gbt({viewport:e.viewport,center:t.project_uCenter}),o=[],a=jbt({shadowMatrices:e.shadowMatrices,viewport:e.viewport}).slice();for(let s=0;s<e.shadowMatrices.length;s++){const l=a[s],u=l.clone().translate(new St(e.viewport.center).negate());t.project_uCoordinateSystem===ce.LNGLAT&&t.project_uProjectionMode===xi.WEB_MERCATOR?(a[s]=u,o[s]=i):(a[s]=l.clone().multiplyRight(Xbt),o[s]=u.transform(i))}for(let s=0;s<a.length;s++)n["shadow_uViewProjectionMatrices[".concat(s,"]")]=a[s],n["shadow_uProjectCenters[".concat(s,"]")]=o[s],e.shadowMaps&&e.shadowMaps.length>0?n["shadow_uShadowMap".concat(s)]=e.shadowMaps[s]:n["shadow_uShadowMap".concat(s)]=e.dummyShadowMap;return n}const kb={name:"shadow",dependencies:[dE],vs:Ubt,fs:Wbt,inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    position = shadow_setVertexPosition(geometry.position);
    `,"fs:DECKGL_FILTER_COLOR":`
    color = shadow_filterShadowColor(color);
    `},getUniforms:(e={},t={})=>"viewport"in e&&(e.drawToShadowMap||e.shadowMaps&&e.shadowMaps.length>0)?Kbt(e,t):{}},Su={inject:{"vs:DECKGL_FILTER_GL_POSITION":`
    // for picking depth values
    picking_setPickingAttribute(position.z / position.w);
  `,"vs:DECKGL_FILTER_COLOR":`
  picking_setPickingColor(geometry.pickingColor);
  `,"fs:DECKGL_FILTER_COLOR":{order:99,injection:`
  // use highlight color if this fragment belongs to the selected object.
  color = picking_filterHighlightColor(color);

  // use picking color if rendering to picking FBO.
  color = picking_filterPickingColor(color);
    `}},...B2t},Jbt=[dE],Qbt=["vs:DECKGL_FILTER_SIZE(inout vec3 size, VertexGeometry geometry)","vs:DECKGL_FILTER_GL_POSITION(inout vec4 position, VertexGeometry geometry)","vs:DECKGL_FILTER_COLOR(inout vec4 color, VertexGeometry geometry)","fs:DECKGL_FILTER_COLOR(inout vec4 color, FragmentGeometry geometry)"];function twt(e){const t=Yp.getDefaultProgramManager(e);for(const r of Jbt)t.addDefaultModule(r);for(const r of Qbt)t.addShaderHook(r);return t}const ewt=[255,255,255],rwt=1;let nwt=0;class iwt{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","ambient");const{color:r=ewt}=t,{intensity:n=rwt}=t;this.id=t.id||"ambient-".concat(nwt++),this.color=r,this.intensity=n}}const owt=[255,255,255],awt=1,swt=[0,0,-1];let lwt=0;class NL{constructor(t={}){P(this,"id",void 0),P(this,"color",void 0),P(this,"intensity",void 0),P(this,"type","directional"),P(this,"direction",void 0),P(this,"shadow",void 0);const{color:r=owt}=t,{intensity:n=awt}=t,{direction:i=swt}=t,{_shadow:o=!1}=t;this.id=t.id||"directional-".concat(lwt++),this.color=r,this.intensity=n,this.type="directional",this.direction=new St(i).normalize().toArray(),this.shadow=o}getProjectedLight(t){return this}}class uwt{constructor(t,r={id:"pass"}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"props",void 0);const{id:n}=r;this.id=n,this.gl=t,this.props={...r}}setProps(t){Object.assign(this.props,t)}render(t){}cleanup(){}}class A_ extends uwt{constructor(...t){super(...t),P(this,"_lastRenderIndex",-1)}render(t){const r=this.gl;return ba(r,{framebuffer:t.target}),this._drawLayers(t)}_drawLayers(t){const{target:r,moduleParameters:n,viewports:i,views:o,onViewportActive:a,clearStack:s=!0,clearCanvas:l=!0}=t;t.pass=t.pass||"unknown";const u=this.gl;l&&fwt(u),s&&(this._lastRenderIndex=-1);const c=[];for(const f of i){const h=o&&o[f.id];a(f);const d=this._getDrawLayerParams(f,t),p=f.subViewports||[f];for(const v of p){const m=this._drawLayersInViewport(u,{target:r,moduleParameters:n,viewport:v,view:h,pass:t.pass,layers:t.layers},d);c.push(m)}}return c}_getDrawLayerParams(t,{layers:r,pass:n,layerFilter:i,cullRect:o,effects:a,moduleParameters:s}){const l=[],u=Zz(this._lastRenderIndex+1),c={layer:r[0],viewport:t,isPicking:n.startsWith("picking"),renderPass:n,cullRect:o},f={};for(let h=0;h<r.length;h++){const d=r[h],p=this._shouldDrawLayer(d,c,i,f),v={shouldDrawLayer:p};p&&(v.layerRenderIndex=u(d,p),v.moduleParameters=this._getModuleParameters(d,a,n,s),v.layerParameters=this.getLayerParameters(d,h,t)),l[h]=v}return l}_drawLayersInViewport(t,{layers:r,moduleParameters:n,pass:i,target:o,viewport:a,view:s},l){const u=cwt(t,{moduleParameters:n,target:o,viewport:a});if(s&&s.props.clear){const f=s.props.clear===!0?{color:!0,depth:!0}:s.props.clear;oi(t,{scissorTest:!0,scissor:u},()=>rE(t,f))}const c={totalCount:r.length,visibleCount:0,compositeCount:0,pickableCount:0};ba(t,{viewport:u});for(let f=0;f<r.length;f++){const h=r[f],{shouldDrawLayer:d,layerRenderIndex:p,moduleParameters:v,layerParameters:m}=l[f];if(d&&h.props.pickable&&c.pickableCount++,h.isComposite)c.compositeCount++;else if(d){c.visibleCount++,this._lastRenderIndex=Math.max(this._lastRenderIndex,p),v.viewport=a;try{h._drawLayer({moduleParameters:v,uniforms:{layerIndex:p},parameters:m})}catch(g){h.raiseError(g,"drawing ".concat(h," to ").concat(i))}}}return c}shouldDrawLayer(t){return!0}getModuleParameters(t,r){return null}getLayerParameters(t,r,n){return t.props.parameters}_shouldDrawLayer(t,r,n,i){if(!(t.props.visible&&this.shouldDrawLayer(t)))return!1;r.layer=t;let a=t.parent;for(;a;){if(!a.props.visible||!a.filterSubLayer(r))return!1;r.layer=a,a=a.parent}if(n){const s=r.layer.id;if(s in i||(i[s]=n(r)),!i[s])return!1}return t.activateViewport(r.viewport),!0}_getModuleParameters(t,r,n,i){var o;const a=Object.assign(Object.create(((o=t.internalState)===null||o===void 0?void 0:o.propsInTransition)||t.props),{autoWrapLongitude:t.wrapLongitude,viewport:t.context.viewport,mousePosition:t.context.mousePosition,pickingActive:0,devicePixelRatio:Qc(this.gl)});if(r)for(const l of r){var s;Object.assign(a,(s=l.getModuleParameters)===null||s===void 0?void 0:s.call(l,t))}return Object.assign(a,this.getModuleParameters(t,r),i)}}function Zz(e=0,t={}){const r={},n=(i,o)=>{const a=i.props._offset,s=i.id,l=i.parent&&i.parent.id;let u;if(l&&!(l in t)&&n(i.parent,!1),l in r){const c=r[l]=r[l]||Zz(t[l],t);u=c(i,o),r[s]=c}else Number.isFinite(a)?(u=a+(t[l]||0),r[s]=null):u=e;return o&&u>=e&&(e=u+1),t[s]=u,u};return n}function cwt(e,{moduleParameters:t,target:r,viewport:n}){const i=r&&r.id!=="default-framebuffer",o=t&&t.devicePixelRatio||Qc(e),a=i?r.height:e.drawingBufferHeight,s=n;return[s.x*o,a-(s.y+s.height)*o,s.width*o,s.height*o]}function fwt(e){const t=e.drawingBufferWidth,r=e.drawingBufferHeight;ba(e,{viewport:[0,0,t,r]}),e.clear(16640)}class hwt extends A_{constructor(t,r){super(t,r),P(this,"shadowMap",void 0),P(this,"depthBuffer",void 0),P(this,"fbo",void 0),this.shadowMap=new yn(t,{width:1,height:1,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.depthBuffer=new Tc(t,{format:33189,width:1,height:1}),this.fbo=new lr(t,{id:"shadowmap",width:1,height:1,attachments:{[36064]:this.shadowMap,[36096]:this.depthBuffer}})}render(t){const r=this.fbo;oi(this.gl,{depthRange:[0,1],depthTest:!0,blend:!1,clearColor:[1,1,1,1]},()=>{const n=t.viewports[0],i=Qc(this.gl),o=n.width*i,a=n.height*i;(o!==r.width||a!==r.height)&&r.resize({width:o,height:a}),super.render({...t,target:r,pass:"shadow"})})}shouldDrawLayer(t){return t.props.shadowEnabled!==!1}getModuleParameters(){return{drawToShadowMap:!0}}delete(){this.fbo&&(this.fbo.delete(),this.fbo=null),this.shadowMap&&(this.shadowMap.delete(),this.shadowMap=null),this.depthBuffer&&(this.depthBuffer.delete(),this.depthBuffer=null)}}const dwt={color:[255,255,255],intensity:1},FL=[{color:[255,255,255],intensity:1,direction:[-1,3,-1]},{color:[255,255,255],intensity:.9,direction:[1,-8,-2.5]}],pwt=[0,0,0,200/255];class Kz{constructor(t={}){P(this,"id","lighting-effect"),P(this,"props",null),P(this,"shadowColor",pwt),P(this,"shadow",void 0),P(this,"ambientLight",null),P(this,"directionalLights",[]),P(this,"pointLights",[]),P(this,"shadowPasses",[]),P(this,"shadowMaps",[]),P(this,"dummyShadowMap",null),P(this,"programManager",void 0),P(this,"shadowMatrices",void 0);for(const r in t){const n=t[r];switch(n.type){case"ambient":this.ambientLight=n;break;case"directional":this.directionalLights.push(n);break;case"point":this.pointLights.push(n);break}}this._applyDefaultLights(),this.shadow=this.directionalLights.some(r=>r.shadow)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){if(!!this.shadow){this.shadowMatrices=this._calculateMatrices(),this.shadowPasses.length===0&&this._createShadowPasses(t),this.programManager||(this.programManager=Yp.getDefaultProgramManager(t),kb&&this.programManager.addDefaultModule(kb)),this.dummyShadowMap||(this.dummyShadowMap=new yn(t,{width:1,height:1}));for(let s=0;s<this.shadowPasses.length;s++)this.shadowPasses[s].render({layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a,moduleParameters:{shadowLightId:s,dummyShadowMap:this.dummyShadowMap,shadowMatrices:this.shadowMatrices}})}}getModuleParameters(t){const r=this.shadow?{shadowMaps:this.shadowMaps,dummyShadowMap:this.dummyShadowMap,shadowColor:this.shadowColor,shadowMatrices:this.shadowMatrices}:{};return r.lightSources={ambientLight:this.ambientLight,directionalLights:this.directionalLights.map(n=>n.getProjectedLight({layer:t})),pointLights:this.pointLights.map(n=>n.getProjectedLight({layer:t}))},r}cleanup(){for(const t of this.shadowPasses)t.delete();this.shadowPasses.length=0,this.shadowMaps.length=0,this.dummyShadowMap&&(this.dummyShadowMap.delete(),this.dummyShadowMap=null),this.shadow&&this.programManager&&(this.programManager.removeDefaultModule(kb),this.programManager=null)}_calculateMatrices(){const t=[];for(const r of this.directionalLights){const n=new Hr().lookAt({eye:new St(r.direction).negate()});t.push(n)}return t}_createShadowPasses(t){for(let r=0;r<this.directionalLights.length;r++){const n=new hwt(t);this.shadowPasses[r]=n,this.shadowMaps[r]=n.shadowMap}}_applyDefaultLights(){const{ambientLight:t,pointLights:r,directionalLights:n}=this;!t&&r.length===0&&n.length===0&&(this.ambientLight=new iwt(dwt),this.directionalLights.push(new NL(FL[0]),new NL(FL[1])))}}class vwt{constructor(t={}){P(this,"_pool",[]),P(this,"opts",{overAlloc:2,poolSize:100}),this.setOptions(t)}setOptions(t){Object.assign(this.opts,t)}allocate(t,r,{size:n=1,type:i,padding:o=0,copy:a=!1,initialize:s=!1,maxCount:l}){const u=i||t&&t.constructor||Float32Array,c=r*n+o;if(ArrayBuffer.isView(t)){if(c<=t.length)return t;if(c*t.BYTES_PER_ELEMENT<=t.buffer.byteLength)return new u(t.buffer,0,c)}let f=1/0;l&&(f=l*n+o);const h=this._allocate(u,c,s,f);return t&&a?h.set(t):s||h.fill(0,0,4),this._release(t),h}release(t){this._release(t)}_allocate(t,r,n,i){let o=Math.max(Math.ceil(r*this.opts.overAlloc),1);o>i&&(o=i);const a=this._pool,s=t.BYTES_PER_ELEMENT*o,l=a.findIndex(u=>u.byteLength>=s);if(l>=0){const u=new t(a.splice(l,1)[0],0,o);return n&&u.fill(0),u}return new t(o)}_release(t){if(!ArrayBuffer.isView(t))return;const r=this._pool,{buffer:n}=t,{byteLength:i}=n,o=r.findIndex(a=>a.byteLength>=i);o<0?r.push(n):(o>0||r.length<this.opts.poolSize)&&r.splice(o,0,n),r.length>this.opts.poolSize&&r.shift()}}const nf=new vwt;function rd(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function gwt(e,t){const r=e%t;return r<0?t+r:r}function mwt(e){return[e[12],e[13],e[14]]}function _wt(e){return{left:Qu(e[3]+e[0],e[7]+e[4],e[11]+e[8],e[15]+e[12]),right:Qu(e[3]-e[0],e[7]-e[4],e[11]-e[8],e[15]-e[12]),bottom:Qu(e[3]+e[1],e[7]+e[5],e[11]+e[9],e[15]+e[13]),top:Qu(e[3]-e[1],e[7]-e[5],e[11]-e[9],e[15]-e[13]),near:Qu(e[3]+e[2],e[7]+e[6],e[11]+e[10],e[15]+e[14]),far:Qu(e[3]-e[2],e[7]-e[6],e[11]-e[10],e[15]-e[14])}}const $L=new St;function Qu(e,t,r,n){$L.set(e,t,r);const i=$L.len();return{distance:n/i,normal:new St(-e/i,-t/i,-r/i)}}function ywt(e){return e-Math.fround(e)}let Th;function Pb(e,t){const{size:r=1,startIndex:n=0}=t,i=t.endIndex!==void 0?t.endIndex:e.length,o=(i-n)/r;Th=nf.allocate(Th,o,{type:Float32Array,size:r*2});let a=n,s=0;for(;a<i;){for(let l=0;l<r;l++){const u=e[a++];Th[s+l]=u,Th[s+l+r]=ywt(u)}s+=r*2}return Th.subarray(0,o*r*2)}const bwt=Math.PI/180,wwt=rd(),BL=[0,0,0],Swt={unitsPerMeter:[1,1,1],metersPerUnit:[1,1,1]};function Twt({width:e,height:t,orthographic:r,fovyRadians:n,focalDistance:i,padding:o,near:a,far:s}){const l=e/t,u=r?new Hr().orthographic({fovy:n,aspect:l,focalDistance:i,near:a,far:s}):new Hr().perspective({fovy:n,aspect:l,near:a,far:s});if(o){const{left:c=0,right:f=0,top:h=0,bottom:d=0}=o,p=Cr((c+e-f)/2,0,e)-e/2,v=Cr((h+t-d)/2,0,t)-t/2;u[8]-=p*2/e,u[9]+=v*2/t}return u}class Fs{constructor(t={}){P(this,"id",void 0),P(this,"x",void 0),P(this,"y",void 0),P(this,"width",void 0),P(this,"height",void 0),P(this,"isGeospatial",void 0),P(this,"zoom",void 0),P(this,"focalDistance",void 0),P(this,"position",void 0),P(this,"modelMatrix",void 0),P(this,"distanceScales",void 0),P(this,"scale",void 0),P(this,"center",void 0),P(this,"cameraPosition",void 0),P(this,"projectionMatrix",void 0),P(this,"viewMatrix",void 0),P(this,"viewMatrixUncentered",void 0),P(this,"viewMatrixInverse",void 0),P(this,"viewProjectionMatrix",void 0),P(this,"pixelProjectionMatrix",void 0),P(this,"pixelUnprojectionMatrix",void 0),P(this,"resolution",void 0),P(this,"_frustumPlanes",{}),this.id=t.id||this.constructor.displayName||"viewport",this.x=t.x||0,this.y=t.y||0,this.width=t.width||1,this.height=t.height||1,this.zoom=t.zoom||0,this.distanceScales=t.distanceScales||Swt,this.focalDistance=t.focalDistance||1,this.position=t.position||BL,this.modelMatrix=t.modelMatrix||null;const{longitude:r,latitude:n}=t;this.isGeospatial=Number.isFinite(n)&&Number.isFinite(r),this._initProps(t),this._initMatrices(t),this.equals=this.equals.bind(this),this.project=this.project.bind(this),this.unproject=this.unproject.bind(this),this.projectPosition=this.projectPosition.bind(this),this.unprojectPosition=this.unprojectPosition.bind(this),this.projectFlat=this.projectFlat.bind(this),this.unprojectFlat=this.unprojectFlat.bind(this)}get metersPerPixel(){return this.distanceScales.metersPerUnit[2]/this.scale}get projectionMode(){return this.isGeospatial?this.zoom<12?xi.WEB_MERCATOR:xi.WEB_MERCATOR_AUTO_OFFSET:xi.IDENTITY}equals(t){return t instanceof Fs?this===t?!0:t.width===this.width&&t.height===this.height&&t.scale===this.scale&&Ao(t.projectionMatrix,this.projectionMatrix)&&Ao(t.viewMatrix,this.viewMatrix):!1}project(t,{topLeft:r=!0}={}){const n=this.projectPosition(t),i=Yz(n,this.pixelProjectionMatrix),[o,a]=i,s=r?a:this.height-a;return t.length===2?[o,s]:[o,s,i[2]]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,l=n&&n*this.distanceScales.unitsPerMeter[2],u=C_([i,s,a],this.pixelUnprojectionMatrix,l),[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n]=this.projectFlat(t),i=(t[2]||0)*this.distanceScales.unitsPerMeter[2];return[r,n,i]}unprojectPosition(t){const[r,n]=this.unprojectFlat(t),i=(t[2]||0)*this.distanceScales.metersPerUnit[2];return[r,n,i]}projectFlat(t){if(this.isGeospatial){const r=Ns(t);return r[1]=Cr(r[1],-318,830),r}return t}unprojectFlat(t){return this.isGeospatial?rf(t):t}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,0],r),i=this.unproject([this.width,0],r),o=this.unproject([0,this.height],r),a=this.unproject([this.width,this.height],r);return[Math.min(n[0],i[0],o[0],a[0]),Math.min(n[1],i[1],o[1],a[1]),Math.max(n[0],i[0],o[0],a[0]),Math.max(n[1],i[1],o[1],a[1])]}getDistanceScales(t){return t?eT({longitude:t[0],latitude:t[1],highPrecision:!0}):this.distanceScales}containsPixel({x:t,y:r,width:n=1,height:i=1}){return t<this.x+this.width&&this.x<t+n&&r<this.y+this.height&&this.y<r+i}getFrustumPlanes(){return this._frustumPlanes.near?this._frustumPlanes:(Object.assign(this._frustumPlanes,_wt(this.viewProjectionMatrix)),this._frustumPlanes)}panByPosition(t,r){return null}_initProps(t){const r=t.longitude,n=t.latitude;this.isGeospatial&&(Number.isFinite(t.zoom)||(this.zoom=Nbt({latitude:n})+Math.log2(this.focalDistance)),this.distanceScales=t.distanceScales||eT({latitude:n,longitude:r}));const i=Math.pow(2,this.zoom);this.scale=i;const{position:o,modelMatrix:a}=t;let s=BL;if(o&&(s=a?new Hr(a).transformAsVector(o,[]):o),this.isGeospatial){const l=this.projectPosition([r,n,0]);this.center=new St(s).scale(this.distanceScales.unitsPerMeter).add(l)}else this.center=this.projectPosition(s)}_initMatrices(t){const{viewMatrix:r=wwt,projectionMatrix:n=null,orthographic:i=!1,fovyRadians:o,fovy:a=75,near:s=.1,far:l=1e3,padding:u=null,focalDistance:c=1}=t;this.viewMatrixUncentered=r,this.viewMatrix=new Hr().multiplyRight(r).translate(new St(this.center).negate()),this.projectionMatrix=n||Twt({width:this.width,height:this.height,orthographic:i,fovyRadians:o||a*bwt,focalDistance:c,padding:u,near:s,far:l});const f=rd();Hl(f,f,this.projectionMatrix),Hl(f,f,this.viewMatrix),this.viewProjectionMatrix=f,this.viewMatrixInverse=Z3([],this.viewMatrix)||this.viewMatrix,this.cameraPosition=mwt(this.viewMatrixInverse);const h=rd(),d=rd();cE(h,h,[this.width/2,-this.height/2,1]),u1(h,h,[1,-1,0]),Hl(d,h,this.viewProjectionMatrix),this.pixelProjectionMatrix=d,this.pixelUnprojectionMatrix=Z3(rd(),this.pixelProjectionMatrix),this.pixelUnprojectionMatrix||Ht.warn("Pixel project matrix not invertible")()}}P(Fs,"displayName","Viewport");const kwt=512,Pwt=4003e4,Ewt=Math.PI/180;function zL(e){const t=Math.cos(e*Ewt);return kwt/Pwt/t}class Ro extends Fs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,pitch:o=0,bearing:a=0,nearZMultiplier:s=.1,farZMultiplier:l=1.01,orthographic:u=!1,projectionMatrix:c,repeat:f=!1,worldOffset:h=0,legacyMeterSizes:d=!1}=t;let{width:p,height:v,altitude:m=1.5}=t;const g=Math.pow(2,i);p=p||1,v=v||1;let _,b=null;c?(m=c[5]/2,_=f1(m)):(t.fovy?(_=t.fovy,m=Xz(_)):_=f1(m),b=$bt({width:p,height:v,pitch:o,fovy:_,nearZMultiplier:s,farZMultiplier:l}));let w=Fbt({height:v,pitch:o,bearing:a,scale:g,altitude:m});h&&(w=new Hr().translate([512*h,0,0]).multiplyLeft(w)),super({...t,width:p,height:v,viewMatrix:w,longitude:n,latitude:r,zoom:i,...b,fovy:_,focalDistance:m}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"pitch",void 0),P(this,"bearing",void 0),P(this,"altitude",void 0),P(this,"fovy",void 0),P(this,"orthographic",void 0),P(this,"_subViewports",void 0),P(this,"_pseudoMeters",void 0),this.latitude=r,this.longitude=n,this.zoom=i,this.pitch=o,this.bearing=a,this.altitude=m,this.fovy=_,this.orthographic=u,this._subViewports=f?[]:null,this._pseudoMeters=d,Object.freeze(this)}get subViewports(){if(this._subViewports&&!this._subViewports.length){const t=this.getBounds(),r=Math.floor((t[0]+180)/360),n=Math.ceil((t[2]-180)/360);for(let i=r;i<=n;i++){const o=i?new Ro({...this,worldOffset:i}):this;this._subViewports.push(o)}}return this._subViewports}projectPosition(t){if(this._pseudoMeters)return super.projectPosition(t);const[r,n]=this.projectFlat(t),i=(t[2]||0)*zL(t[1]);return[r,n,i]}unprojectPosition(t){if(this._pseudoMeters)return super.unprojectPosition(t);const[r,n]=this.unprojectFlat(t),i=(t[2]||0)/zL(n);return[r,n,i]}addMetersToLngLat(t,r){return Hz(t,r)}panByPosition(t,r){const n=C_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=l1([],i,Sz([],n)),a=l1([],this.center,o),[s,l]=this.unprojectFlat(a);return{longitude:s,latitude:l}}getBounds(t={}){const r=zbt(this,t.z||0);return[Math.min(r[0][0],r[1][0],r[2][0],r[3][0]),Math.min(r[0][1],r[1][1],r[2][1],r[3][1]),Math.max(r[0][0],r[1][0],r[2][0],r[3][0]),Math.max(r[0][1],r[1][1],r[2][1],r[3][1])]}fitBounds(t,r={}){const{width:n,height:i}=this,{longitude:o,latitude:a,zoom:s}=qz({width:n,height:i,bounds:t,...r});return new Ro({width:n,height:i,longitude:o,latitude:a,zoom:s})}}P(Ro,"displayName","WebMercatorViewport");function Eb(e,t,r=!1){const n=t.projectPosition(e);if(r&&t instanceof Ro){const[i,o,a=0]=e,s=t.getDistanceScales([i,o]);n[2]=a*s.unitsPerMeter[2]}return n}function Cwt(e){const{viewport:t,modelMatrix:r,coordinateOrigin:n}=e;let{coordinateSystem:i,fromCoordinateSystem:o,fromCoordinateOrigin:a}=e;return i===ce.DEFAULT&&(i=t.isGeospatial?ce.LNGLAT:ce.CARTESIAN),o===void 0&&(o=i),a===void 0&&(a=n),{viewport:t,coordinateSystem:i,coordinateOrigin:n,modelMatrix:r,fromCoordinateSystem:o,fromCoordinateOrigin:a}}function Jz(e,{viewport:t,modelMatrix:r,coordinateSystem:n,coordinateOrigin:i,offsetMode:o}){let[a,s,l=0]=e;switch(r&&([a,s,l]=Ef([],[a,s,l,1],r)),n){case ce.LNGLAT:return Eb([a,s,l],t,o);case ce.LNGLAT_OFFSETS:return Eb([a+i[0],s+i[1],l+(i[2]||0)],t,o);case ce.METER_OFFSETS:return Eb(Hz(i,[a,s,l]),t,o);case ce.CARTESIAN:default:return t.isGeospatial?[a+i[0],s+i[1],l+i[2]]:t.projectPosition([a,s,l])}}function Awt(e,t){const{viewport:r,coordinateSystem:n,coordinateOrigin:i,modelMatrix:o,fromCoordinateSystem:a,fromCoordinateOrigin:s}=Cwt(t),{geospatialOrigin:l,shaderCoordinateOrigin:u,offsetMode:c}=Gz(r,n,i),f=Jz(e,{viewport:r,modelMatrix:o,coordinateSystem:a,coordinateOrigin:s,offsetMode:c});if(c){const h=r.projectPosition(l||u);xz(f,f,h)}return f}const gc={NO_STATE:"Awaiting state",MATCHED:"Matched. State transferred from previous layer",INITIALIZED:"Initialized",AWAITING_GC:"Discarded. Awaiting garbage collection",AWAITING_FINALIZATION:"No longer matched. Awaiting garbage collection",FINALIZED:"Finalized! Awaiting garbage collection"},h1=Symbol.for("component"),zc=Symbol.for("asyncPropDefaults"),au=Symbol.for("asyncPropOriginal"),ms=Symbol.for("asyncPropResolved");function M_(e,t=()=>!0){return Array.isArray(e)?Qz(e,t,[]):t(e)?[e]:[]}function Qz(e,t,r){let n=-1;for(;++n<e.length;){const i=e[n];Array.isArray(i)?Qz(i,t,r):t(i)&&r.push(i)}return r}function Mwt({target:e,source:t,start:r=0,count:n=1}){const i=t.length,o=n*i;let a=0;for(let s=r;a<i;a++)e[s++]=t[a];for(;a<o;)a<o-a?(e.copyWithin(r+a,r,r+a),a*=2):(e.copyWithin(r+a,r,r+o-a),a=o);return e}class xwt{constructor(t,r,n){P(this,"id",void 0),P(this,"context",void 0),P(this,"isLoaded",void 0),P(this,"persistent",void 0),P(this,"_loadCount",0),P(this,"_subscribers",new Set),P(this,"_data",void 0),P(this,"_loader",void 0),P(this,"_error",void 0),P(this,"_content",void 0),this.id=t,this.context=n,this.setData(r)}subscribe(t){this._subscribers.add(t)}unsubscribe(t){this._subscribers.delete(t)}inUse(){return this._subscribers.size>0}delete(){}getData(){return this.isLoaded?this._error?Promise.reject(this._error):this._content:this._loader.then(()=>this.getData())}setData(t,r){if(t===this._data&&!r)return;this._data=t;const n=++this._loadCount;let i=t;typeof t=="string"&&(i=o1(t)),i instanceof Promise?(this.isLoaded=!1,this._loader=i.then(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=void 0,this._content=o)}).catch(o=>{this._loadCount===n&&(this.isLoaded=!0,this._error=o||!0)})):(this.isLoaded=!0,this._error=void 0,this._content=t);for(const o of this._subscribers)o.onChange(this.getData())}}class Lwt{constructor({gl:t,protocol:r}){P(this,"protocol",void 0),P(this,"_context",void 0),P(this,"_resources",void 0),P(this,"_consumers",void 0),P(this,"_pruneRequest",void 0),this.protocol=r||"resource://",this._context={gl:t,resourceManager:this},this._resources={},this._consumers={},this._pruneRequest=null}contains(t){return t.startsWith(this.protocol)?!0:t in this._resources}add({resourceId:t,data:r,forceUpdate:n=!1,persistent:i=!0}){let o=this._resources[t];o?o.setData(r,n):(o=new xwt(t,r,this._context),this._resources[t]=o),o.persistent=i}remove(t){const r=this._resources[t];r&&(r.delete(),delete this._resources[t])}unsubscribe({consumerId:t}){const r=this._consumers[t];if(r){for(const n in r){const i=r[n],o=this._resources[i.resourceId];o&&o.unsubscribe(i)}delete this._consumers[t],this.prune()}}subscribe({resourceId:t,onChange:r,consumerId:n,requestId:i="default"}){const{_resources:o,protocol:a}=this;t.startsWith(a)&&(t=t.replace(a,""),o[t]||this.add({resourceId:t,data:null,persistent:!1}));const s=o[t];if(this._track(n,i,s,r),s)return s.getData()}prune(){this._pruneRequest||(this._pruneRequest=setTimeout(()=>this._prune(),0))}finalize(){for(const t in this._resources)this._resources[t].delete()}_track(t,r,n,i){const o=this._consumers,a=o[t]=o[t]||{},s=a[r]||{},l=s.resourceId&&this._resources[s.resourceId];l&&(l.unsubscribe(s),this.prune()),n&&(a[r]=s,s.onChange=i,s.resourceId=n.id,n.subscribe(s))}_prune(){this._pruneRequest=null;for(const t of Object.keys(this._resources)){const r=this._resources[t];!r.persistent&&!r.inUse()&&(r.delete(),delete this._resources[t])}}}const Iwt="layerManager.setLayers",Owt="layerManager.activateViewport";class Rwt{constructor(t,{deck:r,stats:n,viewport:i,timeline:o}={}){P(this,"layers",void 0),P(this,"context",void 0),P(this,"resourceManager",void 0),P(this,"_lastRenderedLayers",[]),P(this,"_needsRedraw",!1),P(this,"_needsUpdate",!1),P(this,"_nextLayers",null),P(this,"_debug",!1),P(this,"activateViewport",a=>{Vr(Owt,this,a),a&&(this.context.viewport=a)}),this.layers=[],this.resourceManager=new Lwt({gl:t,protocol:"deck://"}),this.context={mousePosition:null,userData:{},layerManager:this,gl:t,deck:r,programManager:t&&twt(t),stats:n||new S_({id:"deck.gl"}),viewport:i||new Fs({id:"DEFAULT-INITIAL-VIEWPORT"}),timeline:o||new zz,resourceManager:this.resourceManager,onError:void 0},Object.seal(this)}finalize(){this.resourceManager.finalize();for(const t of this.layers)this._finalizeLayer(t)}needsRedraw(t={clearRedrawFlags:!1}){let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);for(const n of this.layers){const i=n.getNeedsRedraw(t);r=r||i}return r}needsUpdate(){return this._nextLayers&&this._nextLayers!==this._lastRenderedLayers?"layers changed":this._needsUpdate}setNeedsRedraw(t){this._needsRedraw=this._needsRedraw||t}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t}getLayers({layerIds:t}={}){return t?this.layers.filter(r=>t.find(n=>r.id.indexOf(n)===0)):this.layers}setProps(t){"debug"in t&&(this._debug=t.debug),"userData"in t&&(this.context.userData=t.userData),"layers"in t&&(this._nextLayers=t.layers),"onError"in t&&(this.context.onError=t.onError)}setLayers(t,r){Vr(Iwt,this,r,t),this._lastRenderedLayers=t;const n=M_(t,Boolean);for(const i of n)i.context=this.context;this._updateLayers(this.layers,n)}updateLayers(){const t=this.needsUpdate();t&&(this.setNeedsRedraw("updating layers: ".concat(t)),this.setLayers(this._nextLayers||this._lastRenderedLayers,t)),this._nextLayers=null}_handleError(t,r,n){n.raiseError(r,"".concat(t," of ").concat(n))}_updateLayers(t,r){const n={};for(const a of t)n[a.id]?Ht.warn("Multiple old layers with same id ".concat(a.id))():n[a.id]=a;const i=[];this._updateSublayersRecursively(r,n,i),this._finalizeOldLayers(n);let o=!1;for(const a of i)if(a.hasUniformTransition()){o="Uniform transition in ".concat(a);break}this._needsUpdate=o,this.layers=i}_updateSublayersRecursively(t,r,n){for(const i of t){i.context=this.context;const o=r[i.id];o===null&&Ht.warn("Multiple new layers with same id ".concat(i.id))(),r[i.id]=null;let a=null;try{this._debug&&o!==i&&i.validateProps(),o?(this._transferLayerState(o,i),this._updateLayer(i)):this._initializeLayer(i),n.push(i),a=i.isComposite?i.getSubLayers():null}catch(s){this._handleError("matching",s,i)}a&&this._updateSublayersRecursively(a,r,n)}}_finalizeOldLayers(t){for(const r in t){const n=t[r];n&&this._finalizeLayer(n)}}_initializeLayer(t){try{t._initialize(),t.lifecycle=gc.INITIALIZED}catch(r){this._handleError("initialization",r,t)}}_transferLayerState(t,r){r._transferState(t),r.lifecycle=gc.MATCHED,r!==t&&(t.lifecycle=gc.AWAITING_GC)}_updateLayer(t){try{t._update()}catch(r){this._handleError("update",r,t)}}_finalizeLayer(t){this._needsRedraw=this._needsRedraw||"finalized ".concat(t),t.lifecycle=gc.AWAITING_FINALIZATION;try{t._finalize(),t.lifecycle=gc.FINALIZED}catch(r){this._handleError("finalization",r,t)}}}function Cf(e,t){if(e===t)return!0;if(!e||!t)return!1;for(const r in e){const n=e[r],i=t[r];if(!(n===i||Array.isArray(n)&&Array.isArray(i)&&Cf(n,i)))return!1}return!0}class Dwt{constructor(t){P(this,"width",void 0),P(this,"height",void 0),P(this,"views",void 0),P(this,"viewState",void 0),P(this,"controllers",void 0),P(this,"timeline",void 0),P(this,"_viewports",void 0),P(this,"_viewportMap",void 0),P(this,"_isUpdating",void 0),P(this,"_needsRedraw",void 0),P(this,"_needsUpdate",void 0),P(this,"_eventManager",void 0),P(this,"_eventCallbacks",void 0),this.views=[],this.width=100,this.height=100,this.viewState={},this.controllers={},this.timeline=t.timeline,this._viewports=[],this._viewportMap={},this._isUpdating=!1,this._needsRedraw="First render",this._needsUpdate="Initialize",this._eventManager=t.eventManager,this._eventCallbacks={onViewStateChange:t.onViewStateChange,onInteractionStateChange:t.onInteractionStateChange},Object.seal(this),this.setProps(t)}finalize(){for(const t in this.controllers){const r=this.controllers[t];r&&r.finalize()}this.controllers={}}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}setNeedsUpdate(t){this._needsUpdate=this._needsUpdate||t,this._needsRedraw=this._needsRedraw||t}updateViewStates(){for(const t in this.controllers){const r=this.controllers[t];r&&r.updateTransition()}}getViewports(t){return t?this._viewports.filter(r=>r.containsPixel(t)):this._viewports}getViews(){const t={};return this.views.forEach(r=>{t[r.id]=r}),t}getView(t){return this.views.find(r=>r.id===t)}getViewState(t){const r=typeof t=="string"?this.getView(t):t,n=r&&this.viewState[r.getViewStateId()]||this.viewState;return r?r.filterViewState(n):n}getViewport(t){return this._viewportMap[t]}unproject(t,r){const n=this.getViewports(),i={x:t[0],y:t[1]};for(let o=n.length-1;o>=0;--o){const a=n[o];if(a.containsPixel(i)){const s=t.slice();return s[0]-=a.x,s[1]-=a.y,a.unproject(s,r)}}return null}setProps(t){t.views&&this._setViews(t.views),t.viewState&&this._setViewState(t.viewState),("width"in t||"height"in t)&&this._setSize(t.width,t.height),this._isUpdating||this._update()}_update(){this._isUpdating=!0,this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._needsUpdate&&(this._needsUpdate=!1,this._rebuildViewports()),this._isUpdating=!1}_setSize(t,r){(t!==this.width||r!==this.height)&&(this.width=t,this.height=r,this.setNeedsUpdate("Size changed"))}_setViews(t){t=M_(t,Boolean),this._diffViews(t,this.views)&&this.setNeedsUpdate("views changed"),this.views=t}_setViewState(t){t?(!Cf(t,this.viewState)&&this.setNeedsUpdate("viewState changed"),this.viewState=t):Ht.warn("missing `viewState` or `initialViewState`")()}_onViewStateChange(t,r){this._eventCallbacks.onViewStateChange&&this._eventCallbacks.onViewStateChange({...r,viewId:t})}_createController(t,r){const n=r.type;return new n({timeline:this.timeline,eventManager:this._eventManager,onViewStateChange:this._onViewStateChange.bind(this,r.id),onStateChange:this._eventCallbacks.onInteractionStateChange,makeViewport:o=>t.makeViewport({viewState:o,width:this.width,height:this.height})})}_updateController(t,r,n,i){const o=t.controller;if(o){const a={...r,...o,id:t.id,x:n.x,y:n.y,width:n.width,height:n.height};return i||(i=this._createController(t,a)),i&&i.setProps(a),i}return null}_rebuildViewports(){const{views:t}=this,r=this.controllers;this._viewports=[],this.controllers={};let n=!1;for(let i=t.length;i--;){const o=t[i],a=this.getViewState(o),s=o.makeViewport({viewState:a,width:this.width,height:this.height});let l=r[o.id];const u=Boolean(o.controller);u&&!l&&(n=!0),(n||!u)&&l&&(l.finalize(),l=null),this.controllers[o.id]=this._updateController(o,a,s,l),this._viewports.unshift(s)}for(const i in r){const o=r[i];o&&!this.controllers[i]&&o.finalize()}this._buildViewportMap()}_buildViewportMap(){this._viewportMap={},this._viewports.forEach(t=>{t.id&&(this._viewportMap[t.id]=this._viewportMap[t.id]||t)})}_diffViews(t,r){return t.length!==r.length?!0:t.some((n,i)=>!t[i].equals(r[i]))}}const Nwt=/([0-9]+\.?[0-9]*)(%|px)/;function Ha(e){switch(typeof e){case"number":return{position:e,relative:!1};case"string":const t=Nwt.exec(e);if(t&&t.length>=3){const r=t[2]==="%",n=parseFloat(t[1]);return{position:r?n/100:n,relative:r}}default:throw new Error("Could not parse position string ".concat(e))}}function Xa(e,t){return e.relative?Math.round(e.position*t):e.position}function vr(e,t){if(!e)throw new Error(t||"deck.gl: assertion failed.")}class tV{constructor(t){P(this,"id",void 0),P(this,"viewportInstance",void 0),P(this,"_x",void 0),P(this,"_y",void 0),P(this,"_width",void 0),P(this,"_height",void 0),P(this,"_padding",void 0),P(this,"props",void 0);const{id:r,x:n=0,y:i=0,width:o="100%",height:a="100%",padding:s=null,viewportInstance:l}=t||{};vr(!l||l instanceof Fs),this.viewportInstance=l,this.id=r||this.constructor.displayName||"view",this.props={...t,id:this.id},this._x=Ha(n),this._y=Ha(i),this._width=Ha(o),this._height=Ha(a),this._padding=s&&{left:Ha(s.left||0),right:Ha(s.right||0),top:Ha(s.top||0),bottom:Ha(s.bottom||0)},this.equals=this.equals.bind(this),Object.seal(this)}equals(t){return this===t?!0:this.viewportInstance?t.viewportInstance?this.viewportInstance.equals(t.viewportInstance):!1:this.ViewportType===t.ViewportType&&Cf(this.props,t.props)}makeViewport({width:t,height:r,viewState:n}){if(this.viewportInstance)return this.viewportInstance;n=this.filterViewState(n);const i=this.getDimensions({width:t,height:r});return new this.ViewportType({...n,...this.props,...i})}getViewStateId(){const{viewState:t}=this.props;return typeof t=="string"?t:(t==null?void 0:t.id)||this.id}filterViewState(t){if(this.props.viewState&&typeof this.props.viewState=="object"){if(!this.props.viewState.id)return this.props.viewState;const r={...t};for(const n in this.props.viewState)n!=="id"&&(r[n]=this.props.viewState[n]);return r}return t}getDimensions({width:t,height:r}){const n={x:Xa(this._x,t),y:Xa(this._y,r),width:Xa(this._width,t),height:Xa(this._height,r)};return this._padding&&(n.padding={left:Xa(this._padding.left,t),top:Xa(this._padding.top,r),right:Xa(this._padding.right,t),bottom:Xa(this._padding.bottom,r)}),n}get controller(){const t=this.props.controller;return t?t===!0?{type:this.ControllerType}:typeof t=="function"?{type:t}:{type:this.ControllerType,...t}:null}}class Kp{constructor(t){P(this,"_inProgress",void 0),P(this,"_handle",void 0),P(this,"_timeline",void 0),P(this,"time",void 0),P(this,"settings",void 0),this._inProgress=!1,this._handle=null,this._timeline=t,this.time=0,this.settings={duration:0}}get inProgress(){return this._inProgress}start(t){var r,n;this.cancel(),this.settings=t,this._inProgress=!0,(r=(n=this.settings).onStart)===null||r===void 0||r.call(n,this)}end(){if(this._inProgress){var t,r;this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1,(t=(r=this.settings).onEnd)===null||t===void 0||t.call(r,this)}}cancel(){if(this._inProgress){var t,r;(t=(r=this.settings).onInterrupt)===null||t===void 0||t.call(r,this),this._timeline.removeChannel(this._handle),this._handle=null,this._inProgress=!1}}update(){var t,r;if(!this._inProgress)return!1;if(this._handle===null){const{_timeline:n,settings:i}=this;this._handle=n.addChannel({delay:n.getTime(),duration:i.duration})}return this.time=this._timeline.getTime(this._handle),this._onUpdate(),(t=(r=this.settings).onUpdate)===null||t===void 0||t.call(r,this),this._timeline.isFinished(this._handle)&&this.end(),!0}_onUpdate(){}}const VL=()=>{},rT={BREAK:1,SNAP_TO_END:2,IGNORE:3},Fwt=e=>e,$wt=rT.BREAK;class Bwt{constructor(t){P(this,"getControllerState",void 0),P(this,"props",void 0),P(this,"propsInTransition",void 0),P(this,"transition",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"_onTransitionUpdate",r=>{const{time:n,settings:{interpolator:i,startProps:o,endProps:a,duration:s,easing:l}}=r,u=l(n/s),c=i.interpolateProps(o,a,u);this.propsInTransition=this.getControllerState({...this.props,...c}).getViewportProps(),this.onViewStateChange({viewState:this.propsInTransition,oldViewState:this.props})}),this.getControllerState=t.getControllerState,this.propsInTransition=null,this.transition=new Kp(t.timeline),this.onViewStateChange=t.onViewStateChange||VL,this.onStateChange=t.onStateChange||VL}finalize(){this.transition.cancel()}getViewportInTransition(){return this.propsInTransition}processViewStateChange(t){let r=!1;const n=this.props;if(this.props=t,!n||this._shouldIgnoreViewportChange(n,t))return!1;if(this._isTransitionEnabled(t)){let i=n;if(this.transition.inProgress){const{interruption:o,endProps:a}=this.transition.settings;i={...n,...o===rT.SNAP_TO_END?a:this.propsInTransition||n}}this._triggerTransition(i,t),r=!0}else this.transition.cancel();return r}updateTransition(){this.transition.update()}_isTransitionEnabled(t){const{transitionDuration:r,transitionInterpolator:n}=t;return(r>0||r==="auto")&&Boolean(n)}_isUpdateDueToCurrentTransition(t){return this.transition.inProgress&&this.propsInTransition?this.transition.settings.interpolator.arePropsEqual(t,this.propsInTransition):!1}_shouldIgnoreViewportChange(t,r){return this.transition.inProgress?this.transition.settings.interruption===rT.IGNORE||this._isUpdateDueToCurrentTransition(r):this._isTransitionEnabled(r)?r.transitionInterpolator.arePropsEqual(t,r):!0}_triggerTransition(t,r){const n=this.getControllerState(t),i=this.getControllerState(r).shortestPathFrom(n),o=r.transitionInterpolator,a=o.getDuration?o.getDuration(t,r):r.transitionDuration;if(a===0)return;const s=o.initializeProps(t,i);this.propsInTransition={};const l={duration:a,easing:r.transitionEasing||Fwt,interpolator:o,interruption:r.transitionInterruption||$wt,startProps:s.start,endProps:s.end,onStart:r.onTransitionStart,onUpdate:this._onTransitionUpdate,onInterrupt:this._onTransitionEnd(r.onTransitionInterrupt),onEnd:this._onTransitionEnd(r.onTransitionEnd)};this.transition.start(l),this.onStateChange({inTransition:!0}),this.updateTransition()}_onTransitionEnd(t){return r=>{this.propsInTransition=null,this.onStateChange({inTransition:!1,isZooming:!1,isPanning:!1,isRotating:!1}),t==null||t(r)}}}class zwt{constructor(t){P(this,"_propsToCompare",void 0),P(this,"_propsToExtract",void 0),P(this,"_requiredProps",void 0);const{compare:r,extract:n,required:i}=t;this._propsToCompare=r,this._propsToExtract=n||r,this._requiredProps=i}arePropsEqual(t,r){for(const n of this._propsToCompare)if(!(n in t)||!(n in r)||!Ao(t[n],r[n]))return!1;return!0}initializeProps(t,r){const n={},i={};for(const o of this._propsToExtract)(o in t||o in r)&&(n[o]=t[o],i[o]=r[o]);return this._checkRequiredProps(n),this._checkRequiredProps(i),{start:n,end:i}}getDuration(t,r){return r.transitionDuration}_checkRequiredProps(t){!this._requiredProps||this._requiredProps.forEach(r=>{const n=t[r];vr(Number.isFinite(n)||Array.isArray(n),"".concat(r," is required for transition"))})}}const Vwt=["longitude","latitude","zoom","bearing","pitch"],Uwt=["longitude","latitude","zoom"];class x_ extends zwt{constructor(t={}){const r=Array.isArray(t)?t:t.transitionProps,n=Array.isArray(t)?{}:t;n.transitionProps=Array.isArray(r)?{compare:r,required:r}:r||{compare:Vwt,required:Uwt},super(n.transitionProps),P(this,"opts",void 0),this.opts=n}initializeProps(t,r){const n=super.initializeProps(t,r),{makeViewport:i,around:o}=this.opts;if(i&&o){const a=i(t),s=i(r),l=a.unproject(o);n.start.around=o,Object.assign(n.end,{around:s.project(l),aroundPosition:l,width:r.width,height:r.height})}return n}interpolateProps(t,r,n){const i={};for(const o of this._propsToExtract)i[o]=jl(t[o]||0,r[o]||0,n);if(r.aroundPosition&&this.opts.makeViewport){const o=this.opts.makeViewport({...r,...i});Object.assign(i,o.panByPosition(r.aroundPosition,jl(t.around,r.around,n)))}return i}}const Ya={transitionDuration:0},Wwt=300,Mv=e=>1-(1-e)*(1-e),tc={WHEEL:["wheel"],PAN:["panstart","panmove","panend"],PINCH:["pinchstart","pinchmove","pinchend"],TRIPLE_PAN:["tripanstart","tripanmove","tripanend"],DOUBLE_TAP:["doubletap"],KEYBOARD:["keydown"]},ml={};class eV{constructor(t){P(this,"props",void 0),P(this,"state",{}),P(this,"transitionManager",void 0),P(this,"eventManager",void 0),P(this,"onViewStateChange",void 0),P(this,"onStateChange",void 0),P(this,"makeViewport",void 0),P(this,"_controllerState",void 0),P(this,"_events",{}),P(this,"_interactionState",{isDragging:!1}),P(this,"_customEvents",[]),P(this,"_eventStartBlocked",null),P(this,"_panMove",!1),P(this,"invertPan",!1),P(this,"dragMode","rotate"),P(this,"inertia",0),P(this,"scrollZoom",!0),P(this,"dragPan",!0),P(this,"dragRotate",!0),P(this,"doubleClickZoom",!0),P(this,"touchZoom",!0),P(this,"touchRotate",!1),P(this,"keyboard",!0),this.transitionManager=new Bwt({...t,getControllerState:r=>new this.ControllerState(r),onViewStateChange:this._onTransition.bind(this),onStateChange:this._setInteractionState.bind(this)}),this.handleEvent=this.handleEvent.bind(this),this.eventManager=t.eventManager,this.onViewStateChange=t.onViewStateChange||(()=>{}),this.onStateChange=t.onStateChange||(()=>{}),this.makeViewport=t.makeViewport}set events(t){this.toggleEvents(this._customEvents,!1),this.toggleEvents(t,!0),this._customEvents=t,this.props&&this.setProps(this.props)}finalize(){for(const r in this._events)if(this._events[r]){var t;(t=this.eventManager)===null||t===void 0||t.off(r,this.handleEvent)}this.transitionManager.finalize()}handleEvent(t){this._controllerState=void 0;const r=this._eventStartBlocked;switch(t.type){case"panstart":return r?!1:this._onPanStart(t);case"panmove":return this._onPan(t);case"panend":return this._onPanEnd(t);case"pinchstart":return r?!1:this._onPinchStart(t);case"pinchmove":return this._onPinch(t);case"pinchend":return this._onPinchEnd(t);case"tripanstart":return r?!1:this._onTriplePanStart(t);case"tripanmove":return this._onTriplePan(t);case"tripanend":return this._onTriplePanEnd(t);case"doubletap":return this._onDoubleTap(t);case"wheel":return this._onWheel(t);case"keydown":return this._onKeyDown(t);default:return!1}}get controllerState(){return this._controllerState=this._controllerState||new this.ControllerState({makeViewport:this.makeViewport,...this.props,...this.state}),this._controllerState}getCenter(t){const{x:r,y:n}=this.props,{offsetCenter:i}=t;return[i.x-r,i.y-n]}isPointInBounds(t,r){const{width:n,height:i}=this.props;if(r&&r.handled)return!1;const o=t[0]>=0&&t[0]<=n&&t[1]>=0&&t[1]<=i;return o&&r&&r.stopPropagation(),o}isFunctionKeyPressed(t){const{srcEvent:r}=t;return Boolean(r.metaKey||r.altKey||r.ctrlKey||r.shiftKey)}isDragging(){return this._interactionState.isDragging||!1}blockEvents(t){const r=setTimeout(()=>{this._eventStartBlocked===r&&(this._eventStartBlocked=null)},t);this._eventStartBlocked=r}setProps(t){t.dragMode&&(this.dragMode=t.dragMode),this.props=t,"transitionInterpolator"in t||(t.transitionInterpolator=this._getTransitionProps().transitionInterpolator),this.transitionManager.processViewStateChange(t);const{inertia:r}=t;this.inertia=Number.isFinite(r)?r:r===!0?Wwt:0;const{scrollZoom:n=!0,dragPan:i=!0,dragRotate:o=!0,doubleClickZoom:a=!0,touchZoom:s=!0,touchRotate:l=!1,keyboard:u=!0}=t,c=Boolean(this.onViewStateChange);this.toggleEvents(tc.WHEEL,c&&n),this.toggleEvents(tc.PAN,c&&(i||o)),this.toggleEvents(tc.PINCH,c&&(s||l)),this.toggleEvents(tc.TRIPLE_PAN,c&&l),this.toggleEvents(tc.DOUBLE_TAP,c&&a),this.toggleEvents(tc.KEYBOARD,c&&u),this.scrollZoom=n,this.dragPan=i,this.dragRotate=o,this.doubleClickZoom=a,this.touchZoom=s,this.touchRotate=l,this.keyboard=u}updateTransition(){this.transitionManager.updateTransition()}toggleEvents(t,r){this.eventManager&&t.forEach(n=>{this._events[n]!==r&&(this._events[n]=r,r?this.eventManager.on(n,this.handleEvent):this.eventManager.off(n,this.handleEvent))})}updateViewport(t,r=null,n={}){const i={...t.getViewportProps(),...r},o=this.controllerState!==t;if(this.state=t.getState(),this._setInteractionState(n),o){const a=this.controllerState&&this.controllerState.getViewportProps();this.onViewStateChange&&this.onViewStateChange({viewState:i,interactionState:this._interactionState,oldViewState:a})}}_onTransition(t){this.onViewStateChange({...t,interactionState:this._interactionState})}_setInteractionState(t){Object.assign(this._interactionState,t),this.onStateChange(this._interactionState)}_onPanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;let n=this.isFunctionKeyPressed(t)||t.rightButton||!1;(this.invertPan||this.dragMode==="pan")&&(n=!n);const i=this.controllerState[n?"panStart":"rotateStart"]({pos:r});return this._panMove=n,this.updateViewport(i,Ya,{isDragging:!0}),!0}_onPan(t){return this.isDragging()?this._panMove?this._onPanMove(t):this._onPanRotate(t):!1}_onPanEnd(t){return this.isDragging()?this._panMove?this._onPanMoveEnd(t):this._onPanRotateEnd(t):!1}_onPanMove(t){if(!this.dragPan)return!1;const r=this.getCenter(t),n=this.controllerState.pan({pos:r});return this.updateViewport(n,Ya,{isDragging:!0,isPanning:!0}),!0}_onPanMoveEnd(t){const{inertia:r}=this;if(this.dragPan&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.pan({pos:i}).panEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Mv},{isDragging:!1,isPanning:!0})}else{const n=this.controllerState.panEnd();this.updateViewport(n,null,{isDragging:!1,isPanning:!1})}return!0}_onPanRotate(t){if(!this.dragRotate)return!1;const r=this.getCenter(t),n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ya,{isDragging:!0,isRotating:!0}),!0}_onPanRotateEnd(t){const{inertia:r}=this;if(this.dragRotate&&r&&t.velocity){const n=this.getCenter(t),i=[n[0]+t.velocityX*r/2,n[1]+t.velocityY*r/2],o=this.controllerState.rotate({pos:i}).rotateEnd();this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Mv},{isDragging:!1,isRotating:!0})}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onWheel(t){if(!this.scrollZoom)return!1;t.srcEvent.preventDefault();const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const{speed:n=.01,smooth:i=!1}=this.scrollZoom===!0?{}:this.scrollZoom,{delta:o}=t;let a=2/(1+Math.exp(-Math.abs(o*n)));o<0&&a!==0&&(a=1/a);const s=this.controllerState.zoom({pos:r,scale:a});return this.updateViewport(s,{...this._getTransitionProps({around:r}),transitionDuration:i?250:1},{isZooming:!0,isPanning:!0}),!0}_onTriplePanStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.rotateStart({pos:r});return this.updateViewport(n,Ya,{isDragging:!0}),!0}_onTriplePan(t){if(!this.touchRotate||!this.isDragging())return!1;const r=this.getCenter(t);r[0]-=t.deltaX;const n=this.controllerState.rotate({pos:r});return this.updateViewport(n,Ya,{isDragging:!0,isRotating:!0}),!0}_onTriplePanEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this;if(this.touchRotate&&r&&t.velocityY){const n=this.getCenter(t),i=[n[0],n[1]+=t.velocityY*r/2],o=this.controllerState.rotate({pos:i});this.updateViewport(o,{...this._getTransitionProps(),transitionDuration:r,transitionEasing:Mv},{isDragging:!1,isRotating:!0}),this.blockEvents(r)}else{const n=this.controllerState.rotateEnd();this.updateViewport(n,null,{isDragging:!1,isRotating:!1})}return!0}_onPinchStart(t){const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.controllerState.zoomStart({pos:r}).rotateStart({pos:r});return ml._startPinchRotation=t.rotation,ml._lastPinchEvent=t,this.updateViewport(n,Ya,{isDragging:!0}),!0}_onPinch(t){if(!this.touchZoom&&!this.touchRotate||!this.isDragging())return!1;let r=this.controllerState;if(this.touchZoom){const{scale:n}=t,i=this.getCenter(t);r=r.zoom({pos:i,scale:n})}if(this.touchRotate){const{rotation:n}=t;r=r.rotate({deltaAngleX:ml._startPinchRotation-n})}return this.updateViewport(r,Ya,{isDragging:!0,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:this.touchRotate}),ml._lastPinchEvent=t,!0}_onPinchEnd(t){if(!this.isDragging())return!1;const{inertia:r}=this,{_lastPinchEvent:n}=ml;if(this.touchZoom&&r&&n&&t.scale!==n.scale){const i=this.getCenter(t);let o=this.controllerState.rotateEnd();const a=Math.log2(t.scale),s=(a-Math.log2(n.scale))/(t.deltaTime-n.deltaTime),l=Math.pow(2,a+s*r/2);o=o.zoom({pos:i,scale:l}).zoomEnd(),this.updateViewport(o,{...this._getTransitionProps({around:i}),transitionDuration:r,transitionEasing:Mv},{isDragging:!1,isPanning:this.touchZoom,isZooming:this.touchZoom,isRotating:!1}),this.blockEvents(r)}else{const i=this.controllerState.zoomEnd().rotateEnd();this.updateViewport(i,null,{isDragging:!1,isPanning:!1,isZooming:!1,isRotating:!1})}return ml._startPinchRotation=null,ml._lastPinchEvent=null,!0}_onDoubleTap(t){if(!this.doubleClickZoom)return!1;const r=this.getCenter(t);if(!this.isPointInBounds(r,t))return!1;const n=this.isFunctionKeyPressed(t),i=this.controllerState.zoom({pos:r,scale:n?.5:2});return this.updateViewport(i,this._getTransitionProps({around:r}),{isZooming:!0,isPanning:!0}),this.blockEvents(100),!0}_onKeyDown(t){if(!this.keyboard)return!1;const r=this.isFunctionKeyPressed(t),{zoomSpeed:n,moveSpeed:i,rotateSpeedX:o,rotateSpeedY:a}=this.keyboard===!0?{}:this.keyboard,{controllerState:s}=this;let l;const u={};switch(t.srcEvent.code){case"Minus":l=r?s.zoomOut(n).zoomOut(n):s.zoomOut(n),u.isZooming=!0;break;case"Equal":l=r?s.zoomIn(n).zoomIn(n):s.zoomIn(n),u.isZooming=!0;break;case"ArrowLeft":r?(l=s.rotateLeft(o),u.isRotating=!0):(l=s.moveLeft(i),u.isPanning=!0);break;case"ArrowRight":r?(l=s.rotateRight(o),u.isRotating=!0):(l=s.moveRight(i),u.isPanning=!0);break;case"ArrowUp":r?(l=s.rotateUp(a),u.isRotating=!0):(l=s.moveUp(i),u.isPanning=!0);break;case"ArrowDown":r?(l=s.rotateDown(a),u.isRotating=!0):(l=s.moveDown(i),u.isPanning=!0);break;default:return!1}return this.updateViewport(l,this._getTransitionProps(),u),!0}_getTransitionProps(t){const{transition:r}=this;return!r||!r.transitionInterpolator?Ya:t?{...r,transitionInterpolator:new x_({...t,...r.transitionInterpolator.opts,makeViewport:this.controllerState.makeViewport})}:r}}class rV{constructor(t,r){P(this,"_viewportProps",void 0),P(this,"_state",void 0),this._viewportProps=this.applyConstraints(t),this._state=r}getViewportProps(){return this._viewportProps}getState(){return this._state}}const UL=5,Gwt=1.2;class jwt extends rV{constructor(t){const{width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s=0,pitch:l=0,altitude:u=1.5,position:c=[0,0,0],maxZoom:f=20,minZoom:h=0,maxPitch:d=60,minPitch:p=0,startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:_,startPitch:b,startZoom:w,normalize:T=!0}=t;vr(Number.isFinite(o)),vr(Number.isFinite(i)),vr(Number.isFinite(a)),super({width:r,height:n,latitude:i,longitude:o,zoom:a,bearing:s,pitch:l,altitude:u,maxZoom:f,minZoom:h,maxPitch:d,minPitch:p,normalize:T,position:c},{startPanLngLat:v,startZoomLngLat:m,startRotatePos:g,startBearing:_,startPitch:b,startZoom:w}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanLngLat:this._unproject(t)})}pan({pos:t,startPos:r}){const n=this.getState().startPanLngLat||this._unproject(r);if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanLngLat:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startBearing:this.getViewportProps().bearing,startPitch:this.getViewportProps().pitch})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startBearing:o,startPitch:a}=this.getState();if(!i||o===void 0||a===void 0)return this;let s;return t?s=this._getNewRotation(t,i,a,o):s={bearing:o+r,pitch:a+n},this._getUpdatedState(s)}rotateEnd(){return this._getUpdatedState({startBearing:null,startPitch:null})}zoomStart({pos:t}){return this._getUpdatedState({startZoomLngLat:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomLngLat:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const{maxZoom:a,minZoom:s}=this.getViewportProps();let l=i+Math.log2(n);l=Cr(l,s,a);const u=this.makeViewport({...this.getViewportProps(),zoom:l});return this._getUpdatedState({zoom:l,...u.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomLngLat:null,startZoom:null})}zoomIn(t=2){return this._zoomFromCenter(t)}zoomOut(t=2){return this._zoomFromCenter(1/t)}moveLeft(t=100){return this._panFromCenter([t,0])}moveRight(t=100){return this._panFromCenter([-t,0])}moveUp(t=100){return this._panFromCenter([0,t])}moveDown(t=100){return this._panFromCenter([0,-t])}rotateLeft(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing-t})}rotateRight(t=15){return this._getUpdatedState({bearing:this.getViewportProps().bearing+t})}rotateUp(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch+t})}rotateDown(t=10){return this._getUpdatedState({pitch:this.getViewportProps().pitch-t})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{bearing:i,longitude:o}=n;return Math.abs(i-r.bearing)>180&&(n.bearing=i<0?i+360:i-360),Math.abs(o-r.longitude)>180&&(n.longitude=o<0?o+360:o-360),n}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i}=t;t.zoom=Cr(i,n,r);const{maxPitch:o,minPitch:a,pitch:s}=t;t.pitch=Cr(s,a,o);const{normalize:l=!0}=t;return l&&Object.assign(t,Vbt(t)),t}_zoomFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.zoom({pos:[r/2,n/2],scale:t})}_panFromCenter(t){const{width:r,height:n}=this.getViewportProps();return this.pan({startPos:[r/2,n/2],pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_getNewRotation(t,r,n,i){const o=t[0]-r[0],a=t[1]-r[1],s=t[1],l=r[1],{width:u,height:c}=this.getViewportProps(),f=o/u;let h=0;a>0?Math.abs(c-l)>UL&&(h=a/(l-c)*Gwt):a<0&&l>UL&&(h=1-s/l),h=Cr(h,-1,1);const{minPitch:d,maxPitch:p}=this.getViewportProps(),v=i+180*f;let m=n;return h>0?m=n+h*(p-n):h<0&&(m=n-h*(d-n)),{pitch:m,bearing:v}}}class Hwt extends eV{constructor(...t){super(...t),P(this,"ControllerState",jwt),P(this,"transition",{transitionDuration:300,transitionInterpolator:new x_({transitionProps:{compare:["longitude","latitude","zoom","bearing","pitch","position"],required:["longitude","latitude","zoom"]}})}),P(this,"dragMode","pan")}setProps(t){t.position=t.position||[0,0,0];const r=this.props;super.setProps(t),(!r||r.height!==t.height)&&this.updateViewport(new this.ControllerState({makeViewport:this.makeViewport,...t,...this.state}))}}class nV extends tV{get ViewportType(){return Ro}get ControllerType(){return Hwt}}P(nV,"displayName","MapView");class Xwt extends A_{constructor(t,r){super(t,r),P(this,"maskMap",void 0),P(this,"fbo",void 0);const{mapSize:n=2048}=r;this.maskMap=new yn(t,{width:n,height:n,parameters:{[10241]:9729,[10240]:9729,[10242]:33071,[10243]:33071}}),this.fbo=new lr(t,{id:"maskmap",width:n,height:n,attachments:{[36064]:this.maskMap}})}render(t){const r=this.gl,n=[!1,!1,!1,!1];return n[t.channel]=!0,oi(r,{clearColor:[255,255,255,255],blend:!0,blendFunc:[0,1],blendEquation:32778,colorMask:n,depthTest:!1},()=>super.render({...t,target:this.fbo,pass:"mask"}))}shouldDrawLayer(t){return t.props.operation===qp.MASK}delete(){this.fbo.delete(),this.maskMap.delete()}}const Ywt=new Hr().lookAt({eye:[0,0,1]});function qwt({width:e,height:t,near:r,far:n,padding:i}){let o=-e/2,a=e/2,s=-t/2,l=t/2;if(i){const{left:u=0,right:c=0,top:f=0,bottom:h=0}=i,d=Cr((u+e-c)/2,0,e)-e/2,p=Cr((f+t-h)/2,0,t)-t/2;o-=d,a-=d,s+=p,l+=p}return new Hr().ortho({left:o,right:a,bottom:s,top:l,near:r,far:n})}class Zwt extends Fs{constructor(t){const{width:r,height:n,near:i=.1,far:o=1e3,zoom:a=0,target:s=[0,0,0],padding:l=null,flipY:u=!0}=t,c=Array.isArray(a)?a[0]:a,f=Array.isArray(a)?a[1]:a,h=Math.min(c,f),d=Math.pow(2,h);let p;if(c!==f){const v=Math.pow(2,c),m=Math.pow(2,f);p={unitsPerMeter:[v/d,m/d,1],metersPerUnit:[d/v,d/m,1]}}super({...t,longitude:void 0,position:s,viewMatrix:Ywt.clone().scale([d,d*(u?-1:1),d]),projectionMatrix:qwt({width:r||1,height:n||1,padding:l,near:i,far:o}),zoom:h,distanceScales:p})}projectFlat([t,r]){const{unitsPerMeter:n}=this.distanceScales;return[t*n[0],r*n[1]]}unprojectFlat([t,r]){const{metersPerUnit:n}=this.distanceScales;return[t*n[0],r*n[1]]}panByPosition(t,r){const n=C_(r,this.pixelUnprojectionMatrix),i=this.projectFlat(t),o=l1([],i,Sz([],n)),a=l1([],this.center,o);return{target:this.unprojectFlat(a)}}}class Kwt extends rV{constructor(t){const{width:r,height:n,rotationX:i=0,rotationOrbit:o=0,target:a=[0,0,0],zoom:s=0,minRotationX:l=-90,maxRotationX:u=90,minZoom:c=-1/0,maxZoom:f=1/0,startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}=t;super({width:r,height:n,rotationX:i,rotationOrbit:o,target:a,zoom:s,minRotationX:l,maxRotationX:u,minZoom:c,maxZoom:f},{startPanPosition:h,startRotatePos:d,startRotationX:p,startRotationOrbit:v,startZoomPosition:m,startZoom:g}),P(this,"makeViewport",void 0),this.makeViewport=t.makeViewport}panStart({pos:t}){return this._getUpdatedState({startPanPosition:this._unproject(t)})}pan({pos:t,startPosition:r}){const n=this.getState().startPanPosition||r;if(!n)return this;const o=this.makeViewport(this.getViewportProps()).panByPosition(n,t);return this._getUpdatedState(o)}panEnd(){return this._getUpdatedState({startPanPosition:null})}rotateStart({pos:t}){return this._getUpdatedState({startRotatePos:t,startRotationX:this.getViewportProps().rotationX,startRotationOrbit:this.getViewportProps().rotationOrbit})}rotate({pos:t,deltaAngleX:r=0,deltaAngleY:n=0}){const{startRotatePos:i,startRotationX:o,startRotationOrbit:a}=this.getState(),{width:s,height:l}=this.getViewportProps();if(!i||o===void 0||a===void 0)return this;let u;if(t){let c=(t[0]-i[0])/s;const f=(t[1]-i[1])/l;(o<-90||o>90)&&(c*=-1),u={rotationX:o+f*180,rotationOrbit:a+c*180}}else u={rotationX:o+n,rotationOrbit:a+r};return this._getUpdatedState(u)}rotateEnd(){return this._getUpdatedState({startRotationX:null,startRotationOrbit:null})}shortestPathFrom(t){const r=t.getViewportProps(),n={...this.getViewportProps()},{rotationOrbit:i}=n;return Math.abs(i-r.rotationOrbit)>180&&(n.rotationOrbit=i<0?i+360:i-360),n}zoomStart({pos:t}){return this._getUpdatedState({startZoomPosition:this._unproject(t),startZoom:this.getViewportProps().zoom})}zoom({pos:t,startPos:r,scale:n}){let{startZoom:i,startZoomPosition:o}=this.getState();if(o||(i=this.getViewportProps().zoom,o=this._unproject(r)||this._unproject(t)),!o)return this;const a=this._calculateNewZoom({scale:n,startZoom:i}),s=this.makeViewport({...this.getViewportProps(),zoom:a});return this._getUpdatedState({zoom:a,...s.panByPosition(o,t)})}zoomEnd(){return this._getUpdatedState({startZoomPosition:null,startZoom:null})}zoomIn(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:t})})}zoomOut(t=2){return this._getUpdatedState({zoom:this._calculateNewZoom({scale:1/t})})}moveLeft(t=50){return this._panFromCenter([-t,0])}moveRight(t=50){return this._panFromCenter([t,0])}moveUp(t=50){return this._panFromCenter([0,-t])}moveDown(t=50){return this._panFromCenter([0,t])}rotateLeft(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit-t})}rotateRight(t=15){return this._getUpdatedState({rotationOrbit:this.getViewportProps().rotationOrbit+t})}rotateUp(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX-t})}rotateDown(t=10){return this._getUpdatedState({rotationX:this.getViewportProps().rotationX+t})}_unproject(t){const r=this.makeViewport(this.getViewportProps());return t&&r.unproject(t)}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);const o=r+Math.log2(t);return Cr(o,i,n)}_panFromCenter(t){const{width:r,height:n,target:i}=this.getViewportProps();return this.pan({startPosition:i,pos:[r/2+t[0],n/2+t[1]]})}_getUpdatedState(t){return new this.constructor({makeViewport:this.makeViewport,...this.getViewportProps(),...this.getState(),...t})}applyConstraints(t){const{maxZoom:r,minZoom:n,zoom:i,maxRotationX:o,minRotationX:a,rotationOrbit:s}=t;return t.zoom=Array.isArray(i)?[Cr(i[0],n,r),Cr(i[1],n,r)]:Cr(i,n,r),t.rotationX=Cr(t.rotationX,a,o),(s<-180||s>180)&&(t.rotationOrbit=gwt(s+180,360)-180),t}}class Jwt extends Kwt{constructor(t){super(t),P(this,"zoomAxis",void 0),this.zoomAxis=t.zoomAxis||"all"}_calculateNewZoom({scale:t,startZoom:r}){const{maxZoom:n,minZoom:i}=this.getViewportProps();r===void 0&&(r=this.getViewportProps().zoom);let o=Math.log2(t);if(Array.isArray(r)){let[a,s]=r;switch(this.zoomAxis){case"X":a=Cr(a+o,i,n);break;case"Y":s=Cr(s+o,i,n);break;default:let l=Math.min(a+o,s+o);l<i&&(o+=i-l),l=Math.max(a+o,s+o),l>n&&(o+=n-l),a+=o,s+=o}return[a,s]}return Cr(r+o,i,n)}}class Qwt extends eV{constructor(...t){super(...t),P(this,"ControllerState",Jwt),P(this,"transition",{transitionDuration:300,transitionInterpolator:new x_(["target","zoom"])}),P(this,"dragMode","pan")}_onPanRotate(){return!1}}class vE extends tV{get ViewportType(){return Zwt}get ControllerType(){return Qwt}}P(vE,"displayName","OrthographicView");function tSt({layers:e,viewport:t}){let r=null;for(const o of e){const a=o.getBounds();a&&(r?(r[0]=Math.min(r[0],a[0][0]),r[1]=Math.min(r[1],a[0][1]),r[2]=Math.max(r[2],a[1][0]),r[3]=Math.max(r[3],a[1][1])):r=[a[0][0],a[0][1],a[1][0],a[1][1]])}const n=t.getBounds();if(!r)return n;const i=rSt(n);return r[2]-r[0]<i[2]-i[0]||r[3]-r[1]<i[3]-i[1]||(r[0]=Math.max(r[0],i[0]),r[1]=Math.max(r[1],i[1]),r[2]=Math.min(r[2],i[2]),r[3]=Math.min(r[3],i[3])),r}function eSt({bounds:e,viewport:t,width:r,height:n}){if(e[2]<=e[0]||e[3]<=e[1])return null;const i=1;if(r-=i*2,n-=i*2,t instanceof Ro){const{longitude:s,latitude:l,zoom:u}=qz({width:r,height:n,bounds:[[e[0],e[1]],[e[2],e[3]]],maxZoom:20});return new Ro({longitude:s,latitude:l,zoom:u,x:i,y:i,width:r,height:n})}const o=[(e[0]+e[2])/2,(e[1]+e[3])/2,0],a=Math.min(20,r/(e[2]-e[0]),n/(e[3]-e[1]));return new vE({x:i,y:i}).makeViewport({width:r,height:n,viewState:{target:o,zoom:Math.log2(a)}})}function rSt(e){const t={x:e[2]-e[0],y:e[3]-e[1]},r={x:e[0]+.5*t.x,y:e[1]+.5*t.y};return[r.x-t.x,r.y-t.y,r.x+t.x,r.y+t.y]}class nSt{constructor(){P(this,"id","mask-effect"),P(this,"props",null),P(this,"useInPicking",!0),P(this,"dummyMaskMap",void 0),P(this,"channels",[]),P(this,"masks",null),P(this,"maskPass",void 0),P(this,"maskMap",void 0),P(this,"lastViewport",void 0)}preRender(t,{layers:r,layerFilter:n,viewports:i,onViewportActive:o,views:a}){this.dummyMaskMap||(this.dummyMaskMap=new yn(t,{width:1,height:1}));const s=r.filter(f=>f.props.visible&&f.props.operation===qp.MASK);if(s.length===0){this.masks=null,this.channels.length=0;return}this.masks={},this.maskPass||(this.maskPass=new Xwt(t,{id:"default-mask"}),this.maskMap=this.maskPass.maskMap);const l=this._sortMaskChannels(s),u=i[0],c=!this.lastViewport||!this.lastViewport.equals(u);for(const f in l)this._renderChannel(l[f],{layerFilter:n,onViewportActive:o,views:a,viewport:u,viewportChanged:c})}_renderChannel(t,{layerFilter:r,onViewportActive:n,views:i,viewport:o,viewportChanged:a}){const s=this.channels[t.index];if(!s)return;const l=t===s||s.layers.length!==t.layers.length||t.layerBounds.some((u,c)=>u!==s.layerBounds[c]);if(t.bounds=s.bounds,t.maskBounds=s.maskBounds,this.channels[t.index]=t,(l||a)&&(this.lastViewport=o,t.bounds=tSt({layers:t.layers,viewport:o}),l||!Ao(t.bounds,s.bounds))){const{maskPass:u,maskMap:c}=this,f=eSt({bounds:t.bounds,viewport:o,width:c.width,height:c.height});t.maskBounds=f?f.getBounds():[0,0,1,1],u.render({pass:"mask",channel:t.index,layers:t.layers,layerFilter:r,viewports:f?[f]:[],onViewportActive:n,views:i,moduleParameters:{devicePixelRatio:1}})}this.masks[t.id]={index:t.index,bounds:t.maskBounds,coordinateOrigin:t.coordinateOrigin,coordinateSystem:t.coordinateSystem}}_sortMaskChannels(t){const r={};let n=0;for(const i of t){const{id:o}=i.root;let a=r[o];if(!a){if(++n>4){Ht.warn("Too many mask layers. The max supported is 4")();continue}a={id:o,index:this.channels.findIndex(s=>(s==null?void 0:s.id)===o),layers:[],layerBounds:[],coordinateOrigin:i.root.props.coordinateOrigin,coordinateSystem:i.root.props.coordinateSystem},r[o]=a}a.layers.push(i),a.layerBounds.push(i.getBounds())}for(let i=0;i<4;i++){const o=this.channels[i];(!o||!(o.id in r))&&(this.channels[i]=null)}for(const i in r){const o=r[i];o.index<0&&(o.index=this.channels.findIndex(a=>!a),this.channels[o.index]=o)}return r}getModuleParameters(){return{maskMap:this.masks?this.maskMap:this.dummyMaskMap,maskChannels:this.masks}}cleanup(){this.dummyMaskMap&&(this.dummyMaskMap.delete(),this.dummyMaskMap=void 0),this.maskPass&&(this.maskPass.delete(),this.maskPass=void 0,this.maskMap=void 0),this.lastViewport=void 0,this.masks=null,this.channels.length=0}}const iSt=new Kz;class oSt{constructor(){P(this,"effects",void 0),P(this,"_internalEffects",void 0),P(this,"_needsRedraw",void 0),this.effects=[],this._internalEffects=[],this._needsRedraw="Initial render",this.setEffects()}setProps(t){"effects"in t&&(t.effects.length!==this.effects.length||!Cf(t.effects,this.effects))&&(this.setEffects(t.effects),this._needsRedraw="effects changed")}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}getEffects(){return this._internalEffects}finalize(){this.cleanup()}setEffects(t=[]){this.cleanup(),this.effects=t,this._internalEffects=t.slice(),this._internalEffects.push(new nSt),t.some(r=>r instanceof Kz)||this._internalEffects.push(iSt)}cleanup(){for(const t of this.effects)t.cleanup();for(const t of this._internalEffects)t.cleanup();this.effects.length=0,this._internalEffects.length=0}}class aSt extends A_{shouldDrawLayer(t){return t.props.operation===qp.DRAW}}const WL={blendFunc:[1,0,32771,0],blendEquation:32774};class iV extends A_{constructor(...t){super(...t),P(this,"pickZ",void 0),P(this,"_colors",null)}render(t){return t.pickingFBO?this._drawPickingBuffer(t):super.render(t)}_drawPickingBuffer({layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,pickingFBO:a,deviceRect:{x:s,y:l,width:u,height:c},cullRect:f,effects:h,pass:d="picking",pickZ:p}){const v=this.gl;this.pickZ=p;const m=p?null:{byLayer:new Map,byAlpha:[]};this._colors=m;const g=oi(v,{scissorTest:!0,scissor:[s,l,u,c],clearColor:[0,0,0,0],depthMask:!0,depthTest:!0,depthRange:[0,1],colorMask:[!0,!0,!0,!0],...WL,blend:!p},()=>super.render({target:a,layers:t,layerFilter:r,views:n,viewports:i,onViewportActive:o,cullRect:f,effects:h==null?void 0:h.filter(b=>b.useInPicking),pass:d}));return this._colors=null,{decodePickingColor:m&&lSt.bind(null,m),stats:g}}shouldDrawLayer(t){return t.props.pickable&&t.props.operation===qp.DRAW}getModuleParameters(){return{pickingActive:1,pickingAttribute:this.pickZ,lightSources:{}}}getLayerParameters(t,r,n){const i={...t.props.parameters};return this._colors?(Object.assign(i,WL),i.blend=!0,i.blendColor=sSt(this._colors,t,n)):i.blend=!1,i}}function sSt(e,t,r){const{byLayer:n,byAlpha:i}=e;let o,a=n.get(t);return a?(a.viewports.push(r),o=a.a):(o=n.size+1,o<=255?(a={a:o,layer:t,viewports:[r]},n.set(t,a),i[o]=a):(Ht.warn("Too many pickable layers, only picking the first 255")(),o=0)),[0,0,0,o/255]}function lSt(e,t){const r=e.byAlpha[t[3]];return r&&{pickedLayer:r.layer,pickedViewports:r.viewports,pickedObjectIndex:r.layer.decodePickingColor(t)}}const uSt="deckRenderer.renderLayers";class cSt{constructor(t){this.gl=t,this.layerFilter=null,this.drawPickingColors=!1,this.drawLayersPass=new aSt(t),this.pickLayersPass=new iV(t),this.renderCount=0,this._needsRedraw="Initial render",this.renderBuffers=[],this.lastPostProcessEffect=null}setProps(t){"layerFilter"in t&&this.layerFilter!==t.layerFilter&&(this.layerFilter=t.layerFilter,this._needsRedraw="layerFilter changed"),"drawPickingColors"in t&&this.drawPickingColors!==t.drawPickingColors&&(this.drawPickingColors=t.drawPickingColors,this._needsRedraw="drawPickingColors changed")}renderLayers(t){const r=this.drawPickingColors?this.pickLayersPass:this.drawLayersPass;t.layerFilter=t.layerFilter||this.layerFilter,t.effects=t.effects||[],t.target=t.target||lr.getDefaultFramebuffer(this.gl),this._preRender(t.effects,t);const n=this.lastPostProcessEffect?this.renderBuffers[0]:t.target,i=r.render({...t,target:n});this._postRender(t.effects,t),this.renderCount++,Vr(uSt,this,i,t)}needsRedraw(t={clearRedrawFlags:!1}){const r=this._needsRedraw;return t.clearRedrawFlags&&(this._needsRedraw=!1),r}finalize(){const{renderBuffers:t}=this;for(const r of t)r.delete();t.length=0}_preRender(t,r){let n=null;for(const i of t)i.preRender(this.gl,r),i.postRender&&(n=i);n&&this._resizeRenderBuffers(),this.lastPostProcessEffect=n}_resizeRenderBuffers(){const{renderBuffers:t}=this;t.length===0&&t.push(new lr(this.gl),new lr(this.gl));for(const r of t)r.resize()}_postRender(t,r){const{renderBuffers:n}=this,i={inputBuffer:n[0],swapBuffer:n[1],target:null};for(const o of t)if(o.postRender){if(o===this.lastPostProcessEffect){i.target=r.target,o.postRender(this.gl,i);break}const a=o.postRender(this.gl,i);i.inputBuffer=a,i.swapBuffer=a===n[0]?n[1]:n[0]}}}const fSt={pickedColor:null,pickedObjectIndex:-1};function hSt({pickedColors:e,decodePickingColor:t,deviceX:r,deviceY:n,deviceRadius:i,deviceRect:o}){const{x:a,y:s,width:l,height:u}=o;let c=i*i,f=-1,h=0;for(let d=0;d<u;d++){const p=d+s-n,v=p*p;if(v>c)h+=4*l;else for(let m=0;m<l;m++){if(e[h+3]-1>=0){const _=m+a-r,b=_*_+v;b<=c&&(c=b,f=h)}h+=4}}if(f>=0){const d=e.slice(f,f+4),p=t(d);if(p){const v=Math.floor(f/4/l),m=f/4-v*l;return{...p,pickedColor:d,pickedX:a+m,pickedY:s+v}}Ht.error("Picked non-existent layer. Is picking buffer corrupt?")()}return fSt}function dSt({pickedColors:e,decodePickingColor:t}){const r=new Map;if(e){for(let n=0;n<e.length;n+=4)if(e[n+3]-1>=0){const o=e.slice(n,n+4),a=o.join(",");if(!r.has(a)){const s=t(o);s?r.set(a,{...s,color:o}):Ht.error("Picked non-existent layer. Is picking buffer corrupt?")()}}}return Array.from(r.values())}function oV({pickInfo:e,viewports:t,pixelRatio:r,x:n,y:i,z:o}){let a=t[0];t.length>1&&(a=vSt((e==null?void 0:e.pickedViewports)||t,{x:n,y:i}));let s;if(a){const l=[n-a.x,i-a.y];o!==void 0&&(l[2]=o),s=a.unproject(l)}return{color:null,layer:null,viewport:a,index:-1,picked:!1,x:n,y:i,pixel:[n,i],coordinate:s,devicePixel:e&&"pickedX"in e?[e.pickedX,e.pickedY]:void 0,pixelRatio:r}}function pSt(e){const{pickInfo:t,lastPickedInfo:r,mode:n,layers:i}=e,{pickedColor:o,pickedLayer:a,pickedObjectIndex:s}=t,l=a?[a]:[];if(n==="hover"){const f=r.index,h=r.layerId,d=a?a.props.id:null;if(d!==h||s!==f){if(d!==h){const p=i.find(v=>v.props.id===h);p&&l.unshift(p)}r.layerId=d,r.index=s,r.info=null}}const u=oV(e),c=new Map;return c.set(null,u),l.forEach(f=>{let h={...u};f===a&&(h.color=o,h.index=s,h.picked=!0),h=aV({layer:f,info:h,mode:n});const d=h.layer;f===a&&n==="hover"&&(r.info=h),c.set(d.id,h),n==="hover"&&d.updateAutoHighlight(h)}),c}function aV({layer:e,info:t,mode:r}){for(;e&&t;){const n=t.layer||null;t.sourceLayer=n,t.layer=e,t=e.getPickingInfo({info:t,mode:r,sourceLayer:n}),e=e.parent}return t}function vSt(e,t){for(let r=e.length-1;r>=0;r--){const n=e[r];if(n.containsPixel(t))return n}return e[0]}class gSt{constructor(t){P(this,"gl",void 0),P(this,"pickingFBO",void 0),P(this,"depthFBO",void 0),P(this,"pickLayersPass",void 0),P(this,"layerFilter",void 0),P(this,"lastPickedInfo",void 0),P(this,"_pickable",!0),this.gl=t,this.pickLayersPass=new iV(t),this.lastPickedInfo={index:-1,layerId:null,info:null}}setProps(t){"layerFilter"in t&&(this.layerFilter=t.layerFilter),"_pickable"in t&&(this._pickable=t._pickable)}finalize(){this.pickingFBO&&this.pickingFBO.delete(),this.depthFBO&&(this.depthFBO.color.delete(),this.depthFBO.delete())}pickObject(t){return this._pickClosestObject(t)}pickObjects(t){return this._pickVisibleObjects(t)}getLastPickedObject({x:t,y:r,layers:n,viewports:i},o=this.lastPickedInfo.info){const a=o&&o.layer&&o.layer.id,s=o&&o.viewport&&o.viewport.id,l=a?n.find(h=>h.id===a):null,u=s&&i.find(h=>h.id===s)||i[0],c=u&&u.unproject([t-u.x,r-u.y]);return{...o,...{x:t,y:r,viewport:u,coordinate:c,layer:l}}}_resizeBuffer(){var t,r;const{gl:n}=this;if(!this.pickingFBO&&(this.pickingFBO=new lr(n),lr.isSupported(n,{colorBufferFloat:!0}))){const i=new lr(n);i.attach({[36064]:new yn(n,{format:ee(n)?34836:6408,type:5126})}),this.depthFBO=i}(t=this.pickingFBO)===null||t===void 0||t.resize({width:n.canvas.width,height:n.canvas.height}),(r=this.depthFBO)===null||r===void 0||r.resize({width:n.canvas.width,height:n.canvas.height})}_getPickable(t){if(this._pickable===!1)return null;const r=t.filter(n=>n.isPickable()&&!n.isComposite);return r.length?r:null}_pickClosestObject({layers:t,views:r,viewports:n,x:i,y:o,radius:a=0,depth:s=1,mode:l="query",unproject3D:u,onViewportActive:c,effects:f}){const h=this._getPickable(t),d=Qc(this.gl);if(!h)return{result:[],emptyInfo:oV({viewports:n,x:i,y:o,pixelRatio:d})};this._resizeBuffer();const p=cb(this.gl,[i,o],!0),v=[p.x+Math.floor(p.width/2),p.y+Math.floor(p.height/2)],m=Math.round(a*d),{width:g,height:_}=this.pickingFBO,b=this._getPickingRect({deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceWidth:g,deviceHeight:_}),w={x:i-a,y:o-a,width:a*2+1,height:a*2+1};let T;const S=[],k=new Set;for(let C=0;C<s;C++){let E;if(b){const x=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:b,cullRect:w,effects:f,pass:"picking:".concat(l)});E=hSt({...x,deviceX:v[0],deviceY:v[1],deviceRadius:m,deviceRect:b})}else E={pickedColor:null,pickedObjectIndex:-1};let M;E.pickedLayer&&u&&this.depthFBO&&(M=this._drawAndSample({layers:[E.pickedLayer],views:r,viewports:n,onViewportActive:c,deviceRect:{x:E.pickedX,y:E.pickedY,width:1,height:1},cullRect:w,effects:f,pass:"picking:".concat(l,":z")},!0).pickedColors[0]),E.pickedLayer&&C+1<s&&(k.add(E.pickedLayer),E.pickedLayer.disablePickingIndex(E.pickedObjectIndex)),T=pSt({pickInfo:E,lastPickedInfo:this.lastPickedInfo,mode:l,layers:h,viewports:n,x:i,y:o,z:M,pixelRatio:d});for(const x of T.values())x.layer&&S.push(x);if(!E.pickedColor)break}for(const C of k)C.restorePickingColors();return{result:S,emptyInfo:T.get(null)}}_pickVisibleObjects({layers:t,views:r,viewports:n,x:i,y:o,width:a=1,height:s=1,mode:l="query",maxObjects:u=null,onViewportActive:c,effects:f}){const h=this._getPickable(t);if(!h)return[];this._resizeBuffer();const d=Qc(this.gl),p=cb(this.gl,[i,o],!0),v=p.x,m=p.y+p.height,g=cb(this.gl,[i+a,o+s],!0),_=g.x+g.width,b=g.y,w={x:v,y:b,width:_-v,height:m-b},T=this._drawAndSample({layers:h,views:r,viewports:n,onViewportActive:c,deviceRect:w,cullRect:{x:i,y:o,width:a,height:s},effects:f,pass:"picking:".concat(l)}),S=dSt(T),k=new Map,C=Number.isFinite(u);for(let E=0;E<S.length&&!(C&&u&&k.size>=u);E++){const M=S[E];let x={color:M.pickedColor,layer:null,index:M.pickedObjectIndex,picked:!0,x:i,y:o,pixelRatio:d};x=aV({layer:M.pickedLayer,info:x,mode:l}),k.has(x.object)||k.set(x.object,x)}return Array.from(k.values())}_drawAndSample({layers:t,views:r,viewports:n,onViewportActive:i,deviceRect:o,cullRect:a,effects:s,pass:l},u=!1){const c=u?this.depthFBO:this.pickingFBO,{decodePickingColor:f}=this.pickLayersPass.render({layers:t,layerFilter:this.layerFilter,views:r,viewports:n,onViewportActive:i,pickingFBO:c,deviceRect:o,cullRect:a,effects:s,pass:l,pickZ:u}),{x:h,y:d,width:p,height:v}=o,m=new(u?Float32Array:Uint8Array)(p*v*4);return E_(c,{sourceX:h,sourceY:d,sourceWidth:p,sourceHeight:v,target:m}),{pickedColors:m,decodePickingColor:f}}_getPickingRect({deviceX:t,deviceY:r,deviceRadius:n,deviceWidth:i,deviceHeight:o}){const a=Math.max(0,t-n),s=Math.max(0,r-n),l=Math.min(i,t+n+1)-a,u=Math.min(o,r+n+1)-s;return l<=0||u<=0?null:{x:a,y:s,width:l,height:u}}}const mSt={zIndex:"1",position:"absolute",pointerEvents:"none",color:"#a0a7b4",backgroundColor:"#29323c",padding:"10px",top:"0",left:"0",display:"none"};class _St{constructor(t){P(this,"el",null),P(this,"isVisible",!1);const r=t.parentElement;r&&(this.el=document.createElement("div"),this.el.className="deck-tooltip",Object.assign(this.el.style,mSt),r.appendChild(this.el))}setTooltip(t,r,n){const i=this.el;if(!!i){if(typeof t=="string")i.innerText=t;else if(t)t.text&&(i.innerText=t.text),t.html&&(i.innerHTML=t.html),t.className&&(i.className=t.className),Object.assign(i.style,t.style);else{this.isVisible=!1,i.style.display="none";return}this.isVisible=!0,i.style.display="block",i.style.transform="translate(".concat(r,"px, ").concat(n,"px)")}}remove(){this.el&&(this.el.remove(),this.el=null)}}var Af={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(e){(function(t,r,n,i){var o=["","webkit","Moz","MS","ms","o"],a=r.createElement("div"),s="function",l=Math.round,u=Math.abs,c=Date.now;function f(L,R,U){return setTimeout(b(L,U),R)}function h(L,R,U){return Array.isArray(L)?(d(L,U[R],U),!0):!1}function d(L,R,U){var H;if(!!L)if(L.forEach)L.forEach(R,U);else if(L.length!==i)for(H=0;H<L.length;)R.call(U,L[H],H,L),H++;else for(H in L)L.hasOwnProperty(H)&&R.call(U,L[H],H,L)}function p(L,R,U){var H="DEPRECATED METHOD: "+R+`
`+U+` AT 
`;return function(){var rt=new Error("get-stack-trace"),bt=rt&&rt.stack?rt.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",qt=t.console&&(t.console.warn||t.console.log);return qt&&qt.call(t.console,H,bt),L.apply(this,arguments)}}var v;typeof Object.assign!="function"?v=function(R){if(R===i||R===null)throw new TypeError("Cannot convert undefined or null to object");for(var U=Object(R),H=1;H<arguments.length;H++){var rt=arguments[H];if(rt!==i&&rt!==null)for(var bt in rt)rt.hasOwnProperty(bt)&&(U[bt]=rt[bt])}return U}:v=Object.assign;var m=p(function(R,U,H){for(var rt=Object.keys(U),bt=0;bt<rt.length;)(!H||H&&R[rt[bt]]===i)&&(R[rt[bt]]=U[rt[bt]]),bt++;return R},"extend","Use `assign`."),g=p(function(R,U){return m(R,U,!0)},"merge","Use `assign`.");function _(L,R,U){var H=R.prototype,rt;rt=L.prototype=Object.create(H),rt.constructor=L,rt._super=H,U&&v(rt,U)}function b(L,R){return function(){return L.apply(R,arguments)}}function w(L,R){return typeof L==s?L.apply(R&&R[0]||i,R):L}function T(L,R){return L===i?R:L}function S(L,R,U){d(M(R),function(H){L.addEventListener(H,U,!1)})}function k(L,R,U){d(M(R),function(H){L.removeEventListener(H,U,!1)})}function C(L,R){for(;L;){if(L==R)return!0;L=L.parentNode}return!1}function E(L,R){return L.indexOf(R)>-1}function M(L){return L.trim().split(/\s+/g)}function x(L,R,U){if(L.indexOf&&!U)return L.indexOf(R);for(var H=0;H<L.length;){if(U&&L[H][U]==R||!U&&L[H]===R)return H;H++}return-1}function D(L){return Array.prototype.slice.call(L,0)}function B(L,R,U){for(var H=[],rt=[],bt=0;bt<L.length;){var qt=R?L[bt][R]:L[bt];x(rt,qt)<0&&H.push(L[bt]),rt[bt]=qt,bt++}return U&&(R?H=H.sort(function(Sr,Kr){return Sr[R]>Kr[R]}):H=H.sort()),H}function V(L,R){for(var U,H,rt=R[0].toUpperCase()+R.slice(1),bt=0;bt<o.length;){if(U=o[bt],H=U?U+rt:R,H in L)return H;bt++}return i}var F=1;function G(){return F++}function Z(L){var R=L.ownerDocument||L;return R.defaultView||R.parentWindow||t}var q=/mobile|tablet|ip(ad|hone|od)|android/i,et="ontouchstart"in t,At=V(t,"PointerEvent")!==i,Dt=et&&q.test(navigator.userAgent),Tt="touch",kt="pen",Xt="mouse",Y="kinect",it=25,K=1,vt=2,Pt=4,xt=8,lt=1,ft=2,z=4,W=8,X=16,J=ft|z,Q=W|X,ut=J|Q,gt=["x","y"],st=["clientX","clientY"];function ot(L,R){var U=this;this.manager=L,this.callback=R,this.element=L.element,this.target=L.options.inputTarget,this.domHandler=function(H){w(L.options.enable,[L])&&U.handler(H)},this.init()}ot.prototype={handler:function(){},init:function(){this.evEl&&S(this.element,this.evEl,this.domHandler),this.evTarget&&S(this.target,this.evTarget,this.domHandler),this.evWin&&S(Z(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&k(this.element,this.evEl,this.domHandler),this.evTarget&&k(this.target,this.evTarget,this.domHandler),this.evWin&&k(Z(this.element),this.evWin,this.domHandler)}};function nt(L){var R,U=L.options.inputClass;return U?R=U:At?R=ry:Dt?R=c0:et?R=ny:R=Ws,new R(L,Nt)}function Nt(L,R,U){var H=U.pointers.length,rt=U.changedPointers.length,bt=R&K&&H-rt===0,qt=R&(Pt|xt)&&H-rt===0;U.isFirst=!!bt,U.isFinal=!!qt,bt&&(L.session={}),U.eventType=R,It(L,U),L.emit("hammer.input",U),L.recognize(U),L.session.prevInput=U}function It(L,R){var U=L.session,H=R.pointers,rt=H.length;U.firstInput||(U.firstInput=Jt(R)),rt>1&&!U.firstMultiple?U.firstMultiple=Jt(R):rt===1&&(U.firstMultiple=!1);var bt=U.firstInput,qt=U.firstMultiple,dr=qt?qt.center:bt.center,Sr=R.center=ge(H);R.timeStamp=c(),R.deltaTime=R.timeStamp-bt.timeStamp,R.angle=Zi(dr,Sr),R.distance=Rr(dr,Sr),Ft(U,R),R.offsetDirection=Pe(R.deltaX,R.deltaY);var Kr=me(R.deltaTime,R.deltaX,R.deltaY);R.overallVelocityX=Kr.x,R.overallVelocityY=Kr.y,R.overallVelocity=u(Kr.x)>u(Kr.y)?Kr.x:Kr.y,R.scale=qt?Us(qt.pointers,H):1,R.rotation=qt?l0(qt.pointers,H):0,R.maxPointers=U.prevInput?R.pointers.length>U.prevInput.maxPointers?R.pointers.length:U.prevInput.maxPointers:R.pointers.length,Bt(U,R);var Ji=L.element;C(R.srcEvent.target,Ji)&&(Ji=R.srcEvent.target),R.target=Ji}function Ft(L,R){var U=R.center,H=L.offsetDelta||{},rt=L.prevDelta||{},bt=L.prevInput||{};(R.eventType===K||bt.eventType===Pt)&&(rt=L.prevDelta={x:bt.deltaX||0,y:bt.deltaY||0},H=L.offsetDelta={x:U.x,y:U.y}),R.deltaX=rt.x+(U.x-H.x),R.deltaY=rt.y+(U.y-H.y)}function Bt(L,R){var U=L.lastInterval||R,H=R.timeStamp-U.timeStamp,rt,bt,qt,dr;if(R.eventType!=xt&&(H>it||U.velocity===i)){var Sr=R.deltaX-U.deltaX,Kr=R.deltaY-U.deltaY,Ji=me(H,Sr,Kr);bt=Ji.x,qt=Ji.y,rt=u(Ji.x)>u(Ji.y)?Ji.x:Ji.y,dr=Pe(Sr,Kr),L.lastInterval=R}else rt=U.velocity,bt=U.velocityX,qt=U.velocityY,dr=U.direction;R.velocity=rt,R.velocityX=bt,R.velocityY=qt,R.direction=dr}function Jt(L){for(var R=[],U=0;U<L.pointers.length;)R[U]={clientX:l(L.pointers[U].clientX),clientY:l(L.pointers[U].clientY)},U++;return{timeStamp:c(),pointers:R,center:ge(R),deltaX:L.deltaX,deltaY:L.deltaY}}function ge(L){var R=L.length;if(R===1)return{x:l(L[0].clientX),y:l(L[0].clientY)};for(var U=0,H=0,rt=0;rt<R;)U+=L[rt].clientX,H+=L[rt].clientY,rt++;return{x:l(U/R),y:l(H/R)}}function me(L,R,U){return{x:R/L||0,y:U/L||0}}function Pe(L,R){return L===R?lt:u(L)>=u(R)?L<0?ft:z:R<0?W:X}function Rr(L,R,U){U||(U=gt);var H=R[U[0]]-L[U[0]],rt=R[U[1]]-L[U[1]];return Math.sqrt(H*H+rt*rt)}function Zi(L,R,U){U||(U=gt);var H=R[U[0]]-L[U[0]],rt=R[U[1]]-L[U[1]];return Math.atan2(rt,H)*180/Math.PI}function l0(L,R){return Zi(R[1],R[0],st)+Zi(L[1],L[0],st)}function Us(L,R){return Rr(R[0],R[1],st)/Rr(L[0],L[1],st)}var u0={mousedown:K,mousemove:vt,mouseup:Pt},Zr="mousedown",$n="mousemove mouseup";function Ws(){this.evEl=Zr,this.evWin=$n,this.pressed=!1,ot.apply(this,arguments)}_(Ws,ot,{handler:function(R){var U=u0[R.type];U&K&&R.button===0&&(this.pressed=!0),U&vt&&R.which!==1&&(U=Pt),this.pressed&&(U&Pt&&(this.pressed=!1),this.callback(this.manager,U,{pointers:[R],changedPointers:[R],pointerType:Xt,srcEvent:R}))}});var nG={pointerdown:K,pointermove:vt,pointerup:Pt,pointercancel:xt,pointerout:xt},iG={2:Tt,3:kt,4:Xt,5:Y},EC="pointerdown",CC="pointermove pointerup pointercancel";t.MSPointerEvent&&!t.PointerEvent&&(EC="MSPointerDown",CC="MSPointerMove MSPointerUp MSPointerCancel");function ry(){this.evEl=EC,this.evWin=CC,ot.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}_(ry,ot,{handler:function(R){var U=this.store,H=!1,rt=R.type.toLowerCase().replace("ms",""),bt=nG[rt],qt=iG[R.pointerType]||R.pointerType,dr=qt==Tt,Sr=x(U,R.pointerId,"pointerId");bt&K&&(R.button===0||dr)?Sr<0&&(U.push(R),Sr=U.length-1):bt&(Pt|xt)&&(H=!0),!(Sr<0)&&(U[Sr]=R,this.callback(this.manager,bt,{pointers:U,changedPointers:[R],pointerType:qt,srcEvent:R}),H&&U.splice(Sr,1))}});var oG={touchstart:K,touchmove:vt,touchend:Pt,touchcancel:xt},aG="touchstart",sG="touchstart touchmove touchend touchcancel";function AC(){this.evTarget=aG,this.evWin=sG,this.started=!1,ot.apply(this,arguments)}_(AC,ot,{handler:function(R){var U=oG[R.type];if(U===K&&(this.started=!0),!!this.started){var H=lG.call(this,R,U);U&(Pt|xt)&&H[0].length-H[1].length===0&&(this.started=!1),this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Tt,srcEvent:R})}}});function lG(L,R){var U=D(L.touches),H=D(L.changedTouches);return R&(Pt|xt)&&(U=B(U.concat(H),"identifier",!0)),[U,H]}var uG={touchstart:K,touchmove:vt,touchend:Pt,touchcancel:xt},cG="touchstart touchmove touchend touchcancel";function c0(){this.evTarget=cG,this.targetIds={},ot.apply(this,arguments)}_(c0,ot,{handler:function(R){var U=uG[R.type],H=fG.call(this,R,U);!H||this.callback(this.manager,U,{pointers:H[0],changedPointers:H[1],pointerType:Tt,srcEvent:R})}});function fG(L,R){var U=D(L.touches),H=this.targetIds;if(R&(K|vt)&&U.length===1)return H[U[0].identifier]=!0,[U,U];var rt,bt,qt=D(L.changedTouches),dr=[],Sr=this.target;if(bt=U.filter(function(Kr){return C(Kr.target,Sr)}),R===K)for(rt=0;rt<bt.length;)H[bt[rt].identifier]=!0,rt++;for(rt=0;rt<qt.length;)H[qt[rt].identifier]&&dr.push(qt[rt]),R&(Pt|xt)&&delete H[qt[rt].identifier],rt++;if(!!dr.length)return[B(bt.concat(dr),"identifier",!0),dr]}var hG=2500,MC=25;function ny(){ot.apply(this,arguments);var L=b(this.handler,this);this.touch=new c0(this.manager,L),this.mouse=new Ws(this.manager,L),this.primaryTouch=null,this.lastTouches=[]}_(ny,ot,{handler:function(R,U,H){var rt=H.pointerType==Tt,bt=H.pointerType==Xt;if(!(bt&&H.sourceCapabilities&&H.sourceCapabilities.firesTouchEvents)){if(rt)dG.call(this,U,H);else if(bt&&pG.call(this,H))return;this.callback(R,U,H)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function dG(L,R){L&K?(this.primaryTouch=R.changedPointers[0].identifier,xC.call(this,R)):L&(Pt|xt)&&xC.call(this,R)}function xC(L){var R=L.changedPointers[0];if(R.identifier===this.primaryTouch){var U={x:R.clientX,y:R.clientY};this.lastTouches.push(U);var H=this.lastTouches,rt=function(){var bt=H.indexOf(U);bt>-1&&H.splice(bt,1)};setTimeout(rt,hG)}}function pG(L){for(var R=L.srcEvent.clientX,U=L.srcEvent.clientY,H=0;H<this.lastTouches.length;H++){var rt=this.lastTouches[H],bt=Math.abs(R-rt.x),qt=Math.abs(U-rt.y);if(bt<=MC&&qt<=MC)return!0}return!1}var LC=V(a.style,"touchAction"),IC=LC!==i,OC="compute",RC="auto",iy="manipulation",Gs="none",Gf="pan-x",jf="pan-y",f0=gG();function oy(L,R){this.manager=L,this.set(R)}oy.prototype={set:function(L){L==OC&&(L=this.compute()),IC&&this.manager.element.style&&f0[L]&&(this.manager.element.style[LC]=L),this.actions=L.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var L=[];return d(this.manager.recognizers,function(R){w(R.options.enable,[R])&&(L=L.concat(R.getTouchAction()))}),vG(L.join(" "))},preventDefaults:function(L){var R=L.srcEvent,U=L.offsetDirection;if(this.manager.session.prevented){R.preventDefault();return}var H=this.actions,rt=E(H,Gs)&&!f0[Gs],bt=E(H,jf)&&!f0[jf],qt=E(H,Gf)&&!f0[Gf];if(rt){var dr=L.pointers.length===1,Sr=L.distance<2,Kr=L.deltaTime<250;if(dr&&Sr&&Kr)return}if(!(qt&&bt)&&(rt||bt&&U&J||qt&&U&Q))return this.preventSrc(R)},preventSrc:function(L){this.manager.session.prevented=!0,L.preventDefault()}};function vG(L){if(E(L,Gs))return Gs;var R=E(L,Gf),U=E(L,jf);return R&&U?Gs:R||U?R?Gf:jf:E(L,iy)?iy:RC}function gG(){if(!IC)return!1;var L={},R=t.CSS&&t.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(U){L[U]=R?t.CSS.supports("touch-action",U):!0}),L}var h0=1,Bn=2,Mu=4,Oa=8,Vo=Oa,Hf=16,Ki=32;function Uo(L){this.options=v({},this.defaults,L||{}),this.id=G(),this.manager=null,this.options.enable=T(this.options.enable,!0),this.state=h0,this.simultaneous={},this.requireFail=[]}Uo.prototype={defaults:{},set:function(L){return v(this.options,L),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(L){if(h(L,"recognizeWith",this))return this;var R=this.simultaneous;return L=d0(L,this),R[L.id]||(R[L.id]=L,L.recognizeWith(this)),this},dropRecognizeWith:function(L){return h(L,"dropRecognizeWith",this)?this:(L=d0(L,this),delete this.simultaneous[L.id],this)},requireFailure:function(L){if(h(L,"requireFailure",this))return this;var R=this.requireFail;return L=d0(L,this),x(R,L)===-1&&(R.push(L),L.requireFailure(this)),this},dropRequireFailure:function(L){if(h(L,"dropRequireFailure",this))return this;L=d0(L,this);var R=x(this.requireFail,L);return R>-1&&this.requireFail.splice(R,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(L){return!!this.simultaneous[L.id]},emit:function(L){var R=this,U=this.state;function H(rt){R.manager.emit(rt,L)}U<Oa&&H(R.options.event+DC(U)),H(R.options.event),L.additionalEvent&&H(L.additionalEvent),U>=Oa&&H(R.options.event+DC(U))},tryEmit:function(L){if(this.canEmit())return this.emit(L);this.state=Ki},canEmit:function(){for(var L=0;L<this.requireFail.length;){if(!(this.requireFail[L].state&(Ki|h0)))return!1;L++}return!0},recognize:function(L){var R=v({},L);if(!w(this.options.enable,[this,R])){this.reset(),this.state=Ki;return}this.state&(Vo|Hf|Ki)&&(this.state=h0),this.state=this.process(R),this.state&(Bn|Mu|Oa|Hf)&&this.tryEmit(R)},process:function(L){},getTouchAction:function(){},reset:function(){}};function DC(L){return L&Hf?"cancel":L&Oa?"end":L&Mu?"move":L&Bn?"start":""}function NC(L){return L==X?"down":L==W?"up":L==ft?"left":L==z?"right":""}function d0(L,R){var U=R.manager;return U?U.get(L):L}function hi(){Uo.apply(this,arguments)}_(hi,Uo,{defaults:{pointers:1},attrTest:function(L){var R=this.options.pointers;return R===0||L.pointers.length===R},process:function(L){var R=this.state,U=L.eventType,H=R&(Bn|Mu),rt=this.attrTest(L);return H&&(U&xt||!rt)?R|Hf:H||rt?U&Pt?R|Oa:R&Bn?R|Mu:Bn:Ki}});function p0(){hi.apply(this,arguments),this.pX=null,this.pY=null}_(p0,hi,{defaults:{event:"pan",threshold:10,pointers:1,direction:ut},getTouchAction:function(){var L=this.options.direction,R=[];return L&J&&R.push(jf),L&Q&&R.push(Gf),R},directionTest:function(L){var R=this.options,U=!0,H=L.distance,rt=L.direction,bt=L.deltaX,qt=L.deltaY;return rt&R.direction||(R.direction&J?(rt=bt===0?lt:bt<0?ft:z,U=bt!=this.pX,H=Math.abs(L.deltaX)):(rt=qt===0?lt:qt<0?W:X,U=qt!=this.pY,H=Math.abs(L.deltaY))),L.direction=rt,U&&H>R.threshold&&rt&R.direction},attrTest:function(L){return hi.prototype.attrTest.call(this,L)&&(this.state&Bn||!(this.state&Bn)&&this.directionTest(L))},emit:function(L){this.pX=L.deltaX,this.pY=L.deltaY;var R=NC(L.direction);R&&(L.additionalEvent=this.options.event+R),this._super.emit.call(this,L)}});function ay(){hi.apply(this,arguments)}_(ay,hi,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Gs]},attrTest:function(L){return this._super.attrTest.call(this,L)&&(Math.abs(L.scale-1)>this.options.threshold||this.state&Bn)},emit:function(L){if(L.scale!==1){var R=L.scale<1?"in":"out";L.additionalEvent=this.options.event+R}this._super.emit.call(this,L)}});function sy(){Uo.apply(this,arguments),this._timer=null,this._input=null}_(sy,Uo,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[RC]},process:function(L){var R=this.options,U=L.pointers.length===R.pointers,H=L.distance<R.threshold,rt=L.deltaTime>R.time;if(this._input=L,!H||!U||L.eventType&(Pt|xt)&&!rt)this.reset();else if(L.eventType&K)this.reset(),this._timer=f(function(){this.state=Vo,this.tryEmit()},R.time,this);else if(L.eventType&Pt)return Vo;return Ki},reset:function(){clearTimeout(this._timer)},emit:function(L){this.state===Vo&&(L&&L.eventType&Pt?this.manager.emit(this.options.event+"up",L):(this._input.timeStamp=c(),this.manager.emit(this.options.event,this._input)))}});function ly(){hi.apply(this,arguments)}_(ly,hi,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Gs]},attrTest:function(L){return this._super.attrTest.call(this,L)&&(Math.abs(L.rotation)>this.options.threshold||this.state&Bn)}});function uy(){hi.apply(this,arguments)}_(uy,hi,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:J|Q,pointers:1},getTouchAction:function(){return p0.prototype.getTouchAction.call(this)},attrTest:function(L){var R=this.options.direction,U;return R&(J|Q)?U=L.overallVelocity:R&J?U=L.overallVelocityX:R&Q&&(U=L.overallVelocityY),this._super.attrTest.call(this,L)&&R&L.offsetDirection&&L.distance>this.options.threshold&&L.maxPointers==this.options.pointers&&u(U)>this.options.velocity&&L.eventType&Pt},emit:function(L){var R=NC(L.offsetDirection);R&&this.manager.emit(this.options.event+R,L),this.manager.emit(this.options.event,L)}});function v0(){Uo.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}_(v0,Uo,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[iy]},process:function(L){var R=this.options,U=L.pointers.length===R.pointers,H=L.distance<R.threshold,rt=L.deltaTime<R.time;if(this.reset(),L.eventType&K&&this.count===0)return this.failTimeout();if(H&&rt&&U){if(L.eventType!=Pt)return this.failTimeout();var bt=this.pTime?L.timeStamp-this.pTime<R.interval:!0,qt=!this.pCenter||Rr(this.pCenter,L.center)<R.posThreshold;this.pTime=L.timeStamp,this.pCenter=L.center,!qt||!bt?this.count=1:this.count+=1,this._input=L;var dr=this.count%R.taps;if(dr===0)return this.hasRequireFailures()?(this._timer=f(function(){this.state=Vo,this.tryEmit()},R.interval,this),Bn):Vo}return Ki},failTimeout:function(){return this._timer=f(function(){this.state=Ki},this.options.interval,this),Ki},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Vo&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Wo(L,R){return R=R||{},R.recognizers=T(R.recognizers,Wo.defaults.preset),new cy(L,R)}Wo.VERSION="2.0.7",Wo.defaults={domEvents:!1,touchAction:OC,enable:!0,inputTarget:null,inputClass:null,preset:[[ly,{enable:!1}],[ay,{enable:!1},["rotate"]],[uy,{direction:J}],[p0,{direction:J},["swipe"]],[v0],[v0,{event:"doubletap",taps:2},["tap"]],[sy]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var mG=1,FC=2;function cy(L,R){this.options=v({},Wo.defaults,R||{}),this.options.inputTarget=this.options.inputTarget||L,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=L,this.input=nt(this),this.touchAction=new oy(this,this.options.touchAction),$C(this,!0),d(this.options.recognizers,function(U){var H=this.add(new U[0](U[1]));U[2]&&H.recognizeWith(U[2]),U[3]&&H.requireFailure(U[3])},this)}cy.prototype={set:function(L){return v(this.options,L),L.touchAction&&this.touchAction.update(),L.inputTarget&&(this.input.destroy(),this.input.target=L.inputTarget,this.input.init()),this},stop:function(L){this.session.stopped=L?FC:mG},recognize:function(L){var R=this.session;if(!R.stopped){this.touchAction.preventDefaults(L);var U,H=this.recognizers,rt=R.curRecognizer;(!rt||rt&&rt.state&Vo)&&(rt=R.curRecognizer=null);for(var bt=0;bt<H.length;)U=H[bt],R.stopped!==FC&&(!rt||U==rt||U.canRecognizeWith(rt))?U.recognize(L):U.reset(),!rt&&U.state&(Bn|Mu|Oa)&&(rt=R.curRecognizer=U),bt++}},get:function(L){if(L instanceof Uo)return L;for(var R=this.recognizers,U=0;U<R.length;U++)if(R[U].options.event==L)return R[U];return null},add:function(L){if(h(L,"add",this))return this;var R=this.get(L.options.event);return R&&this.remove(R),this.recognizers.push(L),L.manager=this,this.touchAction.update(),L},remove:function(L){if(h(L,"remove",this))return this;if(L=this.get(L),L){var R=this.recognizers,U=x(R,L);U!==-1&&(R.splice(U,1),this.touchAction.update())}return this},on:function(L,R){if(L!==i&&R!==i){var U=this.handlers;return d(M(L),function(H){U[H]=U[H]||[],U[H].push(R)}),this}},off:function(L,R){if(L!==i){var U=this.handlers;return d(M(L),function(H){R?U[H]&&U[H].splice(x(U[H],R),1):delete U[H]}),this}},emit:function(L,R){this.options.domEvents&&_G(L,R);var U=this.handlers[L]&&this.handlers[L].slice();if(!(!U||!U.length)){R.type=L,R.preventDefault=function(){R.srcEvent.preventDefault()};for(var H=0;H<U.length;)U[H](R),H++}},destroy:function(){this.element&&$C(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function $C(L,R){var U=L.element;if(!!U.style){var H;d(L.options.cssProps,function(rt,bt){H=V(U.style,bt),R?(L.oldCssProps[H]=U.style[H],U.style[H]=rt):U.style[H]=L.oldCssProps[H]||""}),R||(L.oldCssProps={})}}function _G(L,R){var U=r.createEvent("Event");U.initEvent(L,!0,!0),U.gesture=R,R.target.dispatchEvent(U)}v(Wo,{INPUT_START:K,INPUT_MOVE:vt,INPUT_END:Pt,INPUT_CANCEL:xt,STATE_POSSIBLE:h0,STATE_BEGAN:Bn,STATE_CHANGED:Mu,STATE_ENDED:Oa,STATE_RECOGNIZED:Vo,STATE_CANCELLED:Hf,STATE_FAILED:Ki,DIRECTION_NONE:lt,DIRECTION_LEFT:ft,DIRECTION_RIGHT:z,DIRECTION_UP:W,DIRECTION_DOWN:X,DIRECTION_HORIZONTAL:J,DIRECTION_VERTICAL:Q,DIRECTION_ALL:ut,Manager:cy,Input:ot,TouchAction:oy,TouchInput:c0,MouseInput:Ws,PointerEventInput:ry,TouchMouseInput:ny,SingleTouchInput:AC,Recognizer:Uo,AttrRecognizer:hi,Tap:v0,Pan:p0,Swipe:uy,Pinch:ay,Rotate:ly,Press:sy,on:S,off:k,each:d,merge:g,extend:m,assign:v,inherit:_,bindFn:b,prefixed:V});var yG=typeof t<"u"?t:typeof self<"u"?self:{};yG.Hammer=Wo,typeof i=="function"&&i.amd?i(function(){return Wo}):e.exports?e.exports=Wo:t[n]=Wo})(window,document,"Hammer")})(Af);const ySt=Af.exports,oo=bG({__proto__:null,default:ySt},[Af.exports]),sV=1,lV=2,nT=4,bSt={mousedown:sV,mousemove:lV,mouseup:nT};function wSt(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return!0;return!1}function SSt(e){const t=e.prototype.handler;e.prototype.handler=function(n){const i=this.store;n.button>0&&n.type==="pointerdown"&&(wSt(i,o=>o.pointerId===n.pointerId)||i.push(n)),t.call(this,n)}}function TSt(e){e.prototype.handler=function(r){let n=bSt[r.type];n&sV&&r.button>=0&&(this.pressed=!0),n&lV&&r.which===0&&(n=nT),this.pressed&&(n&nT&&(this.pressed=!1),this.callback(this.manager,n,{pointers:[r],changedPointers:[r],pointerType:"mouse",srcEvent:r}))}}SSt(Af.exports.PointerEventInput);TSt(Af.exports.MouseInput);const kSt=Af.exports.Manager;class L_{constructor(t,r,n){this.element=t,this.callback=r,this.options={enable:!0,...n}}}const PSt=oo?[[oo.Pan,{event:"tripan",pointers:3,threshold:0,enable:!1}],[oo.Rotate,{enable:!1}],[oo.Pinch,{enable:!1}],[oo.Swipe,{enable:!1}],[oo.Pan,{threshold:0,enable:!1}],[oo.Press,{enable:!1}],[oo.Tap,{event:"doubletap",taps:2,enable:!1}],[oo.Tap,{event:"anytap",enable:!1}],[oo.Tap,{enable:!1}]]:null,GL={tripan:["rotate","pinch","pan"],rotate:["pinch"],pinch:["pan"],pan:["press","doubletap","anytap","tap"],doubletap:["anytap"],anytap:["tap"]},ESt={doubletap:["tap"]},CSt={pointerdown:"pointerdown",pointermove:"pointermove",pointerup:"pointerup",touchstart:"pointerdown",touchmove:"pointermove",touchend:"pointerup",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup"},gE={KEY_EVENTS:["keydown","keyup"],MOUSE_EVENTS:["mousedown","mousemove","mouseup","mouseover","mouseout","mouseleave"],WHEEL_EVENTS:["wheel","mousewheel"]},ASt={tap:"tap",anytap:"anytap",doubletap:"doubletap",press:"press",pinch:"pinch",pinchin:"pinch",pinchout:"pinch",pinchstart:"pinch",pinchmove:"pinch",pinchend:"pinch",pinchcancel:"pinch",rotate:"rotate",rotatestart:"rotate",rotatemove:"rotate",rotateend:"rotate",rotatecancel:"rotate",tripan:"tripan",tripanstart:"tripan",tripanmove:"tripan",tripanup:"tripan",tripandown:"tripan",tripanleft:"tripan",tripanright:"tripan",tripanend:"tripan",tripancancel:"tripan",pan:"pan",panstart:"pan",panmove:"pan",panup:"pan",pandown:"pan",panleft:"pan",panright:"pan",panend:"pan",pancancel:"pan",swipe:"swipe",swipeleft:"swipe",swiperight:"swipe",swipeup:"swipe",swipedown:"swipe"},jL={click:"tap",anyclick:"anytap",dblclick:"doubletap",mousedown:"pointerdown",mousemove:"pointermove",mouseup:"pointerup",mouseover:"pointerover",mouseout:"pointerout",mouseleave:"pointerleave"},MSt=typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.toLowerCase():"",kc=typeof window<"u"?window:global;let iT=!1;try{const e={get passive(){return iT=!0,!0}};kc.addEventListener("test",null,e),kc.removeEventListener("test",null)}catch{iT=!1}const xSt=MSt.indexOf("firefox")!==-1,{WHEEL_EVENTS:LSt}=gE,HL="wheel",XL=4.000244140625,ISt=40,OSt=.25;class RSt extends L_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{if(!this.options.enable)return;let o=i.deltaY;kc.WheelEvent&&(xSt&&i.deltaMode===kc.WheelEvent.DOM_DELTA_PIXEL&&(o/=kc.devicePixelRatio),i.deltaMode===kc.WheelEvent.DOM_DELTA_LINE&&(o*=ISt)),o!==0&&o%XL===0&&(o=Math.floor(o/XL)),i.shiftKey&&o&&(o=o*OSt),this.callback({type:HL,center:{x:i.clientX,y:i.clientY},delta:-o,srcEvent:i,pointerType:"mouse",target:i.target})},this.events=(this.options.events||[]).concat(LSt),this.events.forEach(i=>t.addEventListener(i,this.handleEvent,iT?{passive:!1}:!1))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===HL&&(this.options.enable=r)}}const{MOUSE_EVENTS:DSt}=gE,YL="pointermove",qL="pointerover",ZL="pointerout",KL="pointerenter",JL="pointerleave";class NSt extends L_{constructor(t,r,n){super(t,r,n),this.handleEvent=o=>{this.handleOverEvent(o),this.handleOutEvent(o),this.handleEnterEvent(o),this.handleLeaveEvent(o),this.handleMoveEvent(o)},this.pressed=!1;const{enable:i}=this.options;this.enableMoveEvent=i,this.enableLeaveEvent=i,this.enableEnterEvent=i,this.enableOutEvent=i,this.enableOverEvent=i,this.events=(this.options.events||[]).concat(DSt),this.events.forEach(o=>t.addEventListener(o,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===YL&&(this.enableMoveEvent=r),t===qL&&(this.enableOverEvent=r),t===ZL&&(this.enableOutEvent=r),t===KL&&(this.enableEnterEvent=r),t===JL&&(this.enableLeaveEvent=r)}handleOverEvent(t){this.enableOverEvent&&t.type==="mouseover"&&this._emit(qL,t)}handleOutEvent(t){this.enableOutEvent&&t.type==="mouseout"&&this._emit(ZL,t)}handleEnterEvent(t){this.enableEnterEvent&&t.type==="mouseenter"&&this._emit(KL,t)}handleLeaveEvent(t){this.enableLeaveEvent&&t.type==="mouseleave"&&this._emit(JL,t)}handleMoveEvent(t){if(this.enableMoveEvent)switch(t.type){case"mousedown":t.button>=0&&(this.pressed=!0);break;case"mousemove":t.which===0&&(this.pressed=!1),this.pressed||this._emit(YL,t);break;case"mouseup":this.pressed=!1;break}}_emit(t,r){this.callback({type:t,center:{x:r.clientX,y:r.clientY},srcEvent:r,pointerType:"mouse",target:r.target})}}const{KEY_EVENTS:FSt}=gE,QL="keydown",tI="keyup";class $St extends L_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{const o=i.target||i.srcElement;o.tagName==="INPUT"&&o.type==="text"||o.tagName==="TEXTAREA"||(this.enableDownEvent&&i.type==="keydown"&&this.callback({type:QL,srcEvent:i,key:i.key,target:i.target}),this.enableUpEvent&&i.type==="keyup"&&this.callback({type:tI,srcEvent:i,key:i.key,target:i.target}))},this.enableDownEvent=this.options.enable,this.enableUpEvent=this.options.enable,this.events=(this.options.events||[]).concat(FSt),t.tabIndex=this.options.tabIndex||0,t.style.outline="none",this.events.forEach(i=>t.addEventListener(i,this.handleEvent))}destroy(){this.events.forEach(t=>this.element.removeEventListener(t,this.handleEvent))}enableEventType(t,r){t===QL&&(this.enableDownEvent=r),t===tI&&(this.enableUpEvent=r)}}const eI="contextmenu";class BSt extends L_{constructor(t,r,n){super(t,r,n),this.handleEvent=i=>{!this.options.enable||this.callback({type:eI,center:{x:i.clientX,y:i.clientY},srcEvent:i,pointerType:"mouse",target:i.target})},t.addEventListener("contextmenu",this.handleEvent)}destroy(){this.element.removeEventListener("contextmenu",this.handleEvent)}enableEventType(t,r){t===eI&&(this.options.enable=r)}}const oT=1,d1=2,aT=4,zSt={pointerdown:oT,pointermove:d1,pointerup:aT,mousedown:oT,mousemove:d1,mouseup:aT},VSt=1,USt=2,WSt=3,GSt=0,jSt=1,HSt=2,XSt=1,YSt=2,qSt=4;function ZSt(e){const t=zSt[e.srcEvent.type];if(!t)return null;const{buttons:r,button:n,which:i}=e.srcEvent;let o=!1,a=!1,s=!1;return t===aT||t===d1&&!Number.isFinite(r)?(o=i===VSt,a=i===USt,s=i===WSt):t===d1?(o=Boolean(r&XSt),a=Boolean(r&qSt),s=Boolean(r&YSt)):t===oT&&(o=n===GSt,a=n===jSt,s=n===HSt),{leftButton:o,middleButton:a,rightButton:s}}function KSt(e,t){const r=e.center;if(!r)return null;const n=t.getBoundingClientRect(),i=n.width/t.offsetWidth||1,o=n.height/t.offsetHeight||1,a={x:(r.x-n.left-t.clientLeft)/i,y:(r.y-n.top-t.clientTop)/o};return{center:r,offsetCenter:a}}const Cb={srcElement:"root",priority:0};class JSt{constructor(t){this.handleEvent=r=>{if(this.isEmpty())return;const n=this._normalizeEvent(r);let i=r.srcEvent.target;for(;i&&i!==n.rootElement;){if(this._emit(n,i),n.handled)return;i=i.parentNode}this._emit(n,"root")},this.eventManager=t,this.handlers=[],this.handlersByElement=new Map,this._active=!1}isEmpty(){return!this._active}add(t,r,n,i=!1,o=!1){const{handlers:a,handlersByElement:s}=this;let l=Cb;typeof n=="string"||n&&n.addEventListener?l={...Cb,srcElement:n}:n&&(l={...Cb,...n});let u=s.get(l.srcElement);u||(u=[],s.set(l.srcElement,u));const c={type:t,handler:r,srcElement:l.srcElement,priority:l.priority};i&&(c.once=!0),o&&(c.passive=!0),a.push(c),this._active=this._active||!c.passive;let f=u.length-1;for(;f>=0&&!(u[f].priority>=c.priority);)f--;u.splice(f+1,0,c)}remove(t,r){const{handlers:n,handlersByElement:i}=this;for(let o=n.length-1;o>=0;o--){const a=n[o];if(a.type===t&&a.handler===r){n.splice(o,1);const s=i.get(a.srcElement);s.splice(s.indexOf(a),1),s.length===0&&i.delete(a.srcElement)}}this._active=n.some(o=>!o.passive)}_emit(t,r){const n=this.handlersByElement.get(r);if(n){let i=!1;const o=()=>{t.handled=!0},a=()=>{t.handled=!0,i=!0},s=[];for(let l=0;l<n.length;l++){const{type:u,handler:c,once:f}=n[l];if(c({...t,type:u,stopPropagation:o,stopImmediatePropagation:a}),f&&s.push(n[l]),i)break}for(let l=0;l<s.length;l++){const{type:u,handler:c}=s[l];this.remove(u,c)}}}_normalizeEvent(t){const r=this.eventManager.getElement();return{...t,...ZSt(t),...KSt(t,r),preventDefault:()=>{t.srcEvent.preventDefault()},stopImmediatePropagation:null,stopPropagation:null,handled:!1,rootElement:r}}}const QSt={events:null,recognizers:null,recognizerOptions:{},Manager:kSt,touchAction:"none",tabIndex:0};class t3t{constructor(t=null,r){this._onBasicInput=i=>{const{srcEvent:o}=i,a=CSt[o.type];a&&this.manager.emit(a,i)},this._onOtherEvent=i=>{this.manager.emit(i.type,i)},this.options={...QSt,...r},this.events=new Map,this.setElement(t);const{events:n}=this.options;n&&this.on(n)}getElement(){return this.element}setElement(t){if(this.element&&this.destroy(),this.element=t,!t)return;const{options:r}=this,n=r.Manager;this.manager=new n(t,{touchAction:r.touchAction,recognizers:r.recognizers||PSt}).on("hammer.input",this._onBasicInput),r.recognizers||Object.keys(GL).forEach(i=>{const o=this.manager.get(i);o&&GL[i].forEach(a=>{o.recognizeWith(a)})});for(const i in r.recognizerOptions){const o=this.manager.get(i);if(o){const a=r.recognizerOptions[i];delete a.enable,o.set(a)}}this.wheelInput=new RSt(t,this._onOtherEvent,{enable:!1}),this.moveInput=new NSt(t,this._onOtherEvent,{enable:!1}),this.keyInput=new $St(t,this._onOtherEvent,{enable:!1,tabIndex:r.tabIndex}),this.contextmenuInput=new BSt(t,this._onOtherEvent,{enable:!1});for(const[i,o]of this.events)o.isEmpty()||(this._toggleRecognizer(o.recognizerName,!0),this.manager.on(i,o.handleEvent))}destroy(){this.element&&(this.wheelInput.destroy(),this.moveInput.destroy(),this.keyInput.destroy(),this.contextmenuInput.destroy(),this.manager.destroy(),this.wheelInput=null,this.moveInput=null,this.keyInput=null,this.contextmenuInput=null,this.manager=null,this.element=null)}on(t,r,n){this._addEventHandler(t,r,n,!1)}once(t,r,n){this._addEventHandler(t,r,n,!0)}watch(t,r,n){this._addEventHandler(t,r,n,!1,!0)}off(t,r){this._removeEventHandler(t,r)}_toggleRecognizer(t,r){const{manager:n}=this;if(!n)return;const i=n.get(t);if(i&&i.options.enable!==r){i.set({enable:r});const o=ESt[t];o&&!this.options.recognizers&&o.forEach(a=>{const s=n.get(a);r?(s.requireFailure(t),i.dropRequireFailure(a)):s.dropRequireFailure(t)})}this.wheelInput.enableEventType(t,r),this.moveInput.enableEventType(t,r),this.keyInput.enableEventType(t,r),this.contextmenuInput.enableEventType(t,r)}_addEventHandler(t,r,n,i,o){if(typeof t!="string"){n=r;for(const c in t)this._addEventHandler(c,t[c],n,i,o);return}const{manager:a,events:s}=this,l=jL[t]||t;let u=s.get(l);u||(u=new JSt(this),s.set(l,u),u.recognizerName=ASt[l]||l,a&&a.on(l,u.handleEvent)),u.add(t,r,n,i,o),u.isEmpty()||this._toggleRecognizer(u.recognizerName,!0)}_removeEventHandler(t,r){if(typeof t!="string"){for(const a in t)this._removeEventHandler(a,t[a]);return}const{events:n}=this,i=jL[t]||t,o=n.get(i);if(!!o&&(o.remove(t,r),o.isEmpty())){const{recognizerName:a}=o;let s=!1;for(const l of n.values())if(l.recognizerName===a&&!l.isEmpty()){s=!0;break}s||this._toggleRecognizer(a,!1)}}}function _l(){}const e3t=({isDragging:e})=>e?"grabbing":"grab",uV={id:"",width:"100%",height:"100%",style:null,viewState:null,initialViewState:null,pickingRadius:0,layerFilter:null,glOptions:{},parameters:{},parent:null,gl:null,canvas:null,layers:[],effects:[],views:null,controller:null,useDevicePixels:!0,touchAction:"none",eventRecognizerOptions:{},_framebuffer:null,_animate:!1,_pickable:!0,_typedArrayManagerProps:{},_customRender:null,onWebGLInitialized:_l,onResize:_l,onViewStateChange:_l,onInteractionStateChange:_l,onBeforeRender:_l,onAfterRender:_l,onLoad:_l,onError:e=>Ht.error(e.message)(),onHover:null,onClick:null,onDragStart:null,onDrag:null,onDragEnd:null,_onMetrics:null,getCursor:e3t,getTooltip:null,debug:!1,drawPickingColors:!1};class mE{constructor(t){P(this,"props",void 0),P(this,"width",0),P(this,"height",0),P(this,"userData",{}),P(this,"canvas",null),P(this,"viewManager",null),P(this,"layerManager",null),P(this,"effectManager",null),P(this,"deckRenderer",null),P(this,"deckPicker",null),P(this,"eventManager",null),P(this,"tooltip",null),P(this,"metrics",void 0),P(this,"animationLoop",void 0),P(this,"stats",void 0),P(this,"viewState",void 0),P(this,"cursorState",void 0),P(this,"_needsRedraw",void 0),P(this,"_pickRequest",void 0),P(this,"_lastPointerDownInfo",null),P(this,"_metricsCounter",void 0),P(this,"_onPointerMove",r=>{const{_pickRequest:n}=this;if(r.type==="pointerleave")n.x=-1,n.y=-1,n.radius=0;else{if(r.leftButton||r.rightButton)return;{const i=r.offsetCenter;if(!i)return;n.x=i.x,n.y=i.y,n.radius=this.props.pickingRadius}}this.layerManager&&(this.layerManager.context.mousePosition={x:n.x,y:n.y}),n.event=r}),P(this,"_onEvent",r=>{const n=xL[r.type],i=r.offsetCenter;if(!n||!i||!this.layerManager)return;const o=this.layerManager.getLayers(),a=this.deckPicker.getLastPickedObject({x:i.x,y:i.y,layers:o,viewports:this.getViewports(i)},this._lastPointerDownInfo),{layer:s}=a,l=s&&(s[n.handler]||s.props[n.handler]),u=this.props[n.handler];let c=!1;l&&(c=l.call(s,a,r)),!c&&u&&u(a,r)}),P(this,"_onPointerDown",r=>{const n=r.offsetCenter,i=this._pick("pickObject","pickObject Time",{x:n.x,y:n.y,radius:this.props.pickingRadius});this._lastPointerDownInfo=i.result[0]||i.emptyInfo}),this.props={...uV,...t},t=this.props,this._needsRedraw="Initial render",this._pickRequest={mode:"hover",x:-1,y:-1,radius:0,event:null},this.cursorState={isHovering:!1,isDragging:!1},t.viewState&&t.initialViewState&&Ht.warn("View state tracking is disabled. Use either `initialViewState` for auto update or `viewState` for manual update.")(),xB()==="IE"&&Ht.warn("IE 11 is not supported")(),this.viewState=t.initialViewState,t.gl||typeof document<"u"&&(this.canvas=this._createCanvas(t)),this.animationLoop=this._createAnimationLoop(t),this.stats=new S_({id:"deck.gl"}),this.metrics={fps:0,setPropsTime:0,updateAttributesTime:0,framesRedrawn:0,pickTime:0,pickCount:0,gpuTime:0,gpuTimePerFrame:0,cpuTime:0,cpuTimePerFrame:0,bufferMemory:0,textureMemory:0,renderbufferMemory:0,gpuMemory:0},this._metricsCounter=0,this.setProps(t),t._typedArrayManagerProps&&nf.setOptions(t._typedArrayManagerProps),this.animationLoop.start()}finalize(){var t,r,n,i,o,a,s;if(this.animationLoop.stop(),this.animationLoop=null,this._lastPointerDownInfo=null,(t=this.layerManager)===null||t===void 0||t.finalize(),this.layerManager=null,(r=this.viewManager)===null||r===void 0||r.finalize(),this.viewManager=null,(n=this.effectManager)===null||n===void 0||n.finalize(),this.effectManager=null,(i=this.deckRenderer)===null||i===void 0||i.finalize(),this.deckRenderer=null,(o=this.deckPicker)===null||o===void 0||o.finalize(),this.deckPicker=null,(a=this.eventManager)===null||a===void 0||a.destroy(),this.eventManager=null,(s=this.tooltip)===null||s===void 0||s.remove(),this.tooltip=null,!this.props.canvas&&!this.props.gl&&this.canvas){var l;(l=this.canvas.parentElement)===null||l===void 0||l.removeChild(this.canvas),this.canvas=null}}setProps(t){this.stats.get("setProps Time").timeStart(),"onLayerHover"in t&&Ht.removed("onLayerHover","onHover")(),"onLayerClick"in t&&Ht.removed("onLayerClick","onClick")(),t.initialViewState&&!Cf(this.props.initialViewState,t.initialViewState)&&(this.viewState=t.initialViewState),Object.assign(this.props,t),this._setCanvasSize(this.props);const r=Object.create(this.props);Object.assign(r,{views:this._getViews(),width:this.width,height:this.height,viewState:this._getViewState()}),this.animationLoop.setProps(r),this.layerManager&&(this.viewManager.setProps(r),this.layerManager.activateViewport(this.getViewports()[0]),this.layerManager.setProps(r),this.effectManager.setProps(r),this.deckRenderer.setProps(r),this.deckPicker.setProps(r)),this.stats.get("setProps Time").timeEnd()}needsRedraw(t={clearRedrawFlags:!1}){if(!this.layerManager)return!1;if(this.props._animate)return"Deck._animate";let r=this._needsRedraw;t.clearRedrawFlags&&(this._needsRedraw=!1);const n=this.viewManager.needsRedraw(t),i=this.layerManager.needsRedraw(t),o=this.effectManager.needsRedraw(t),a=this.deckRenderer.needsRedraw(t);return r=r||n||i||o||a,r}redraw(t){if(!this.layerManager)return;let r=this.needsRedraw({clearRedrawFlags:!0});r=t||r,r&&(this.stats.get("Redraw Count").incrementCount(),this.props._customRender?this.props._customRender(r):this._drawLayers(r))}get isInitialized(){return this.viewManager!==null}getViews(){return vr(this.viewManager),this.viewManager.views}getViewports(t){return vr(this.viewManager),this.viewManager.getViewports(t)}pickObject(t){const r=this._pick("pickObject","pickObject Time",t).result;return r.length?r[0]:null}pickMultipleObjects(t){return t.depth=t.depth||10,this._pick("pickObject","pickMultipleObjects Time",t).result}pickObjects(t){return this._pick("pickObjects","pickObjects Time",t)}_addResources(t,r=!1){for(const n in t)this.layerManager.resourceManager.add({resourceId:n,data:t[n],forceUpdate:r})}_removeResources(t){for(const r of t)this.layerManager.resourceManager.remove(r)}_pick(t,r,n){vr(this.deckPicker);const{stats:i}=this;i.get("Pick Count").incrementCount(),i.get(r).timeStart();const o=this.deckPicker[t]({layers:this.layerManager.getLayers(n),views:this.viewManager.getViews(),viewports:this.getViewports(n),onViewportActive:this.layerManager.activateViewport,effects:this.effectManager.getEffects(),...n});return i.get(r).timeEnd(),o}_createCanvas(t){let r=t.canvas;return typeof r=="string"&&(r=document.getElementById(r),vr(r)),r||(r=document.createElement("canvas"),r.id=t.id||"deckgl-overlay",(t.parent||document.body).appendChild(r)),Object.assign(r.style,t.style),r}_setCanvasSize(t){if(!this.canvas)return;const{width:r,height:n}=t;if(r||r===0){const o=Number.isFinite(r)?"".concat(r,"px"):r;this.canvas.style.width=o}if(n||n===0){var i;const o=Number.isFinite(n)?"".concat(n,"px"):n;this.canvas.style.position=((i=t.style)===null||i===void 0?void 0:i.position)||"absolute",this.canvas.style.height=o}}_updateCanvasSize(){const{canvas:t}=this;if(!t)return;const r=t.clientWidth||t.width,n=t.clientHeight||t.height;if(r!==this.width||n!==this.height){var i;this.width=r,this.height=n,(i=this.viewManager)===null||i===void 0||i.setProps({width:r,height:n}),this.props.onResize({width:r,height:n})}}_createAnimationLoop(t){const{width:r,height:n,gl:i,glOptions:o,debug:a,onError:s,onBeforeRender:l,onAfterRender:u,useDevicePixels:c}=t;return new y_t({width:r,height:n,useDevicePixels:c,autoResizeViewport:!1,gl:i,onCreateContext:f=>ZB({...o,...f,canvas:this.canvas,debug:a,onContextLost:()=>this._onContextLost()}),onInitialize:f=>this._setGLContext(f.gl),onRender:this._onRenderFrame.bind(this),onBeforeRender:l,onAfterRender:u,onError:s})}_getViewState(){return this.props.viewState||this.viewState}_getViews(){let t=this.props.views||[new nV({id:"default-view"})];return t=Array.isArray(t)?t:[t],t.length&&this.props.controller&&(t[0].props.controller=this.props.controller),t}_onContextLost(){const{onError:t}=this.props;this.animationLoop&&t&&t(new Error("WebGL context is lost"))}_pickAndCallback(){const{_pickRequest:t}=this;if(t.event){const{result:n,emptyInfo:i}=this._pick("pickObject","pickObject Time",t);this.cursorState.isHovering=n.length>0;let o=i,a=!1;for(const s of n){var r;o=s,a=((r=s.layer)===null||r===void 0?void 0:r.onHover(s,t.event))||a}if(!a&&this.props.onHover&&this.props.onHover(o,t.event),this.props.getTooltip&&this.tooltip){const s=this.props.getTooltip(o);this.tooltip.setTooltip(s,o.x,o.y)}t.event=null}}_updateCursor(){const t=this.props.parent||this.canvas;t&&(t.style.cursor=this.props.getCursor(this.cursorState))}_setGLContext(t){if(this.layerManager)return;this.canvas||(this.canvas=t.canvas,tE(t,{enable:!0,copyState:!0})),this.tooltip=new _St(this.canvas),ba(t,{blend:!0,blendFunc:[770,771,1,771],polygonOffsetFill:!0,depthTest:!0,depthFunc:515}),this.props.onWebGLInitialized(t);const r=new zz;r.play(),this.animationLoop.attachTimeline(r),this.eventManager=new t3t(this.props.parent||t.canvas,{touchAction:this.props.touchAction,recognizerOptions:this.props.eventRecognizerOptions,events:{pointerdown:this._onPointerDown,pointermove:this._onPointerMove,pointerleave:this._onPointerMove}});for(const i in xL)this.eventManager.on(i,this._onEvent);this.viewManager=new Dwt({timeline:r,eventManager:this.eventManager,onViewStateChange:this._onViewStateChange.bind(this),onInteractionStateChange:this._onInteractionStateChange.bind(this),views:this._getViews(),viewState:this._getViewState(),width:this.width,height:this.height});const n=this.viewManager.getViewports()[0];this.layerManager=new Rwt(t,{deck:this,stats:this.stats,viewport:n,timeline:r}),this.effectManager=new oSt,this.deckRenderer=new cSt(t),this.deckPicker=new gSt(t),this.setProps(this.props),this._updateCanvasSize(),this.props.onLoad()}_drawLayers(t,r){const{gl:n}=this.layerManager.context;ba(n,this.props.parameters),this.props.onBeforeRender({gl:n}),this.deckRenderer.renderLayers({target:this.props._framebuffer,layers:this.layerManager.getLayers(),viewports:this.viewManager.getViewports(),onViewportActive:this.layerManager.activateViewport,views:this.viewManager.getViews(),pass:"screen",redrawReason:t,effects:this.effectManager.getEffects(),...r}),this.props.onAfterRender({gl:n})}_onRenderFrame(t){this._getFrameStats(),this._metricsCounter++%60===0&&(this._getMetrics(),this.stats.reset(),Ht.table(4,this.metrics)(),this.props._onMetrics&&this.props._onMetrics(this.metrics)),this._updateCanvasSize(),this._updateCursor(),this.tooltip.isVisible&&this.viewManager.needsRedraw()&&this.tooltip.setTooltip(null),this.layerManager.updateLayers(),this._pickAndCallback(),this.redraw(),this.viewManager&&this.viewManager.updateViewStates()}_onViewStateChange(t){const r=this.props.onViewStateChange(t)||t.viewState;this.viewState&&(this.viewState={...this.viewState,[t.viewId]:r},this.props.viewState||this.viewManager&&this.viewManager.setProps({viewState:this.viewState}))}_onInteractionStateChange(t){this.cursorState.isDragging=t.isDragging||!1,this.props.onInteractionStateChange(t)}_getFrameStats(){const{stats:t}=this;t.get("frameRate").timeEnd(),t.get("frameRate").timeStart();const r=this.animationLoop.stats;t.get("GPU Time").addTime(r.get("GPU Time").lastTiming),t.get("CPU Time").addTime(r.get("CPU Time").lastTiming)}_getMetrics(){const{metrics:t,stats:r}=this;t.fps=r.get("frameRate").getHz(),t.setPropsTime=r.get("setProps Time").time,t.updateAttributesTime=r.get("Update Attributes").time,t.framesRedrawn=r.get("Redraw Count").count,t.pickTime=r.get("pickObject Time").time+r.get("pickMultipleObjects Time").time+r.get("pickObjects Time").time,t.pickCount=r.get("Pick Count").count,t.gpuTime=r.get("GPU Time").time,t.cpuTime=r.get("CPU Time").time,t.gpuTimePerFrame=r.get("GPU Time").getAverageTime(),t.cpuTimePerFrame=r.get("CPU Time").getAverageTime();const n=Rl.get("Memory Usage");t.bufferMemory=n.get("Buffer Memory").count,t.textureMemory=n.get("Texture Memory").count,t.renderbufferMemory=n.get("Renderbuffer Memory").count,t.gpuMemory=n.get("GPU Memory").count}}P(mE,"defaultProps",uV);P(mE,"VERSION",Egt.VERSION);class Ab{constructor(t,r){P(this,"opts",void 0),P(this,"source",void 0),this.opts=r,this.source=t}get value(){return this.source.value}getValue(){const t=this.source.getBuffer(),r=this.getAccessor();if(t)return[t,r];const{value:n}=this.source,{size:i}=r;let o=n;if(n&&n.length!==i){o=new Float32Array(i);const a=r.elementOffset||0;for(let s=0;s<i;++s)o[s]=n[a+s]}return o}getAccessor(){return{...this.source.getAccessor(),...this.opts}}}function r3t(e){switch(e){case 5126:return Float32Array;case 5130:return Float64Array;case 5123:case 33635:case 32819:case 32820:return Uint16Array;case 5125:return Uint32Array;case 5121:return Uint8ClampedArray;case 5120:return Int8Array;case 5122:return Int16Array;case 5124:return Int32Array;default:throw new Error("Unknown GL type")}}function om(e){return e.stride||e.size*e.bytesPerElement}function cV(e,t){t.offset&&Ht.removed("shaderAttribute.offset","vertexOffset, elementOffset")();const r=om(e),n=t.vertexOffset!==void 0?t.vertexOffset:e.vertexOffset||0,i=t.elementOffset||0,o=n*r+i*e.bytesPerElement+(e.offset||0);return{...t,offset:o,stride:r}}function n3t(e,t){const r=cV(e,t);return{high:r,low:{...r,offset:r.offset+e.size*4}}}class i3t{constructor(t,r,n){P(this,"gl",void 0),P(this,"id",void 0),P(this,"size",void 0),P(this,"settings",void 0),P(this,"value",void 0),P(this,"doublePrecision",void 0),P(this,"_buffer",void 0),P(this,"state",void 0),this.gl=t,this.id=r.id||"",this.size=r.size||1;const i=r.logicalType||r.type,o=i===5130;let{defaultValue:a}=r;a=Number.isFinite(a)?[a]:a||new Array(this.size).fill(0);let s;o?s=5126:!i&&r.isIndexed?s=t&&Zmt(t,Be.ELEMENT_INDEX_UINT32)?5125:5123:s=i||5126;let l=r3t(i||s||5126);this.doublePrecision=o,o&&r.fp64===!1&&(l=Float32Array),this.value=null,this.settings={...r,defaultType:l,defaultValue:a,logicalType:i,type:s,size:this.size,bytesPerElement:l.BYTES_PER_ELEMENT},this.state={...n,externalBuffer:null,bufferAccessor:this.settings,allocatedValue:null,numInstances:0,bounds:null,constant:!1},this._buffer=null}get isConstant(){return this.state.constant}get buffer(){if(!this._buffer){const{isIndexed:t,type:r}=this.settings;this._buffer=new Ee(this.gl,{id:this.id,target:t?34963:34962,accessor:{type:r}})}return this._buffer}get byteOffset(){const t=this.getAccessor();return t.vertexOffset?t.vertexOffset*om(t):0}get numInstances(){return this.state.numInstances}set numInstances(t){this.state.numInstances=t}delete(){this._buffer&&(this._buffer.delete(),this._buffer=null),nf.release(this.state.allocatedValue)}getShaderAttributes(t,r){if(this.doublePrecision){const n={},i=this.value instanceof Float64Array,o=n3t(this.getAccessor(),r||{});return n[t]=new Ab(this,o.high),n["".concat(t,"64Low")]=i?new Ab(this,o.low):new Float32Array(this.size),n}if(r){const n=cV(this.getAccessor(),r);return{[t]:new Ab(this,n)}}return{[t]:this}}getBuffer(){return this.state.constant?null:this.state.externalBuffer||this._buffer}getValue(){return this.state.constant?this.value:[this.getBuffer(),this.getAccessor()]}getAccessor(){return this.state.bufferAccessor}getBounds(){if(this.state.bounds)return this.state.bounds;let t=null;if(this.state.constant&&this.value){const r=Array.from(this.value);t=[r,r]}else{const{value:r,numInstances:n,size:i}=this,o=n*i;if(r&&o&&r.length>=o){const a=new Array(i).fill(1/0),s=new Array(i).fill(-1/0);for(let l=0;l<o;)for(let u=0;u<i;u++){const c=r[l++];c<a[u]&&(a[u]=c),c>s[u]&&(s[u]=c)}t=[a,s]}}return this.state.bounds=t,t}setData(t){const{state:r}=this;let n;ArrayBuffer.isView(t)?n={value:t}:t instanceof Ee?n={buffer:t}:n=t;const i={...this.settings,...n};if(r.bufferAccessor=i,r.bounds=null,n.constant){let o=n.value;if(o=this._normalizeValue(o,[],0),this.settings.normalized&&(o=this.normalizeConstant(o)),!(!r.constant||!this._areValuesEqual(o,this.value)))return!1;r.externalBuffer=null,r.constant=!0,this.value=o}else if(n.buffer){const o=n.buffer;r.externalBuffer=o,r.constant=!1,this.value=n.value||null;const a=n.value instanceof Float64Array;i.type=n.type||o.accessor.type,i.bytesPerElement=o.accessor.BYTES_PER_ELEMENT*(a?2:1),i.stride=om(i)}else if(n.value){this._checkExternalBuffer(n);let o=n.value;r.externalBuffer=null,r.constant=!1,this.value=o,i.bytesPerElement=o.BYTES_PER_ELEMENT,i.stride=om(i);const{buffer:a,byteOffset:s}=this;this.doublePrecision&&o instanceof Float64Array&&(o=Pb(o,i));const l=o.byteLength+s+i.stride*2;a.byteLength<l&&a.reallocate(l),a.setAccessor(null),a.subData({data:o,offset:s}),i.type=n.type||a.accessor.type}return!0}updateSubBuffer(t={}){this.state.bounds=null;const r=this.value,{startOffset:n=0,endOffset:i}=t;this.buffer.subData({data:this.doublePrecision&&r instanceof Float64Array?Pb(r,{size:this.size,startIndex:n,endIndex:i}):r.subarray(n,i),offset:n*r.BYTES_PER_ELEMENT+this.byteOffset})}allocate(t,r=!1){const{state:n}=this,i=n.allocatedValue,o=nf.allocate(i,t+1,{size:this.size,type:this.settings.defaultType,copy:r});this.value=o;const{buffer:a,byteOffset:s}=this;return a.byteLength<o.byteLength+s&&(a.reallocate(o.byteLength+s),r&&i&&a.subData({data:i instanceof Float64Array?Pb(i,this):i,offset:s})),n.allocatedValue=o,n.constant=!1,n.externalBuffer=null,n.bufferAccessor=this.settings,!0}_checkExternalBuffer(t){const{value:r}=t;if(!ArrayBuffer.isView(r))throw new Error("Attribute ".concat(this.id," value is not TypedArray"));const n=this.settings.defaultType;let i=!1;if(this.doublePrecision&&(i=r.BYTES_PER_ELEMENT<4),i)throw new Error("Attribute ".concat(this.id," does not support ").concat(r.constructor.name));!(r instanceof n)&&this.settings.normalized&&!("normalized"in t)&&Ht.warn("Attribute ".concat(this.id," is normalized"))()}normalizeConstant(t){switch(this.settings.type){case 5120:return new Float32Array(t).map(r=>(r+128)/255*2-1);case 5122:return new Float32Array(t).map(r=>(r+32768)/65535*2-1);case 5121:return new Float32Array(t).map(r=>r/255);case 5123:return new Float32Array(t).map(r=>r/65535);default:return t}}_normalizeValue(t,r,n){const{defaultValue:i,size:o}=this.settings;if(Number.isFinite(t))return r[n]=t,r;if(!t)return r[n]=i[0],r;switch(o){case 4:r[n+3]=Number.isFinite(t[3])?t[3]:i[3];case 3:r[n+2]=Number.isFinite(t[2])?t[2]:i[2];case 2:r[n+1]=Number.isFinite(t[1])?t[1]:i[1];case 1:r[n+0]=Number.isFinite(t[0])?t[0]:i[0];break;default:let a=o;for(;--a>=0;)r[n+a]=Number.isFinite(t[a])?t[a]:i[a]}return r}_areValuesEqual(t,r){if(!t||!r)return!1;const{size:n}=this;for(let i=0;i<n;i++)if(t[i]!==r[i])return!1;return!0}}const rI=[],nI=[];function I_(e,t=0,r=1/0){let n=rI;const i={index:-1,data:e,target:[]};return e?typeof e[Symbol.iterator]=="function"?n=e:e.length>0&&(nI.length=e.length,n=nI):n=rI,(t>0||Number.isFinite(r))&&(n=(Array.isArray(n)?n:Array.from(n)).slice(t,r),i.index=t-1),{iterable:n,objectInfo:i}}function fV(e){return e&&e[Symbol.asyncIterator]}function hV(e,t){const{size:r,stride:n,offset:i,startIndices:o,nested:a}=t,s=e.BYTES_PER_ELEMENT,l=n?n/s:r,u=i?i/s:0,c=Math.floor((e.length-u)/l);return(f,{index:h,target:d})=>{if(!o){const g=h*l+u;for(let _=0;_<r;_++)d[_]=e[g+_];return d}const p=o[h],v=o[h+1]||c;let m;if(a){m=new Array(v-p);for(let g=p;g<v;g++){const _=g*l+u;d=new Array(r);for(let b=0;b<r;b++)d[b]=e[_+b];m[g-p]=d}}else if(l===r)m=e.subarray(p*r+u,v*r+u);else{m=new e.constructor((v-p)*r);let g=0;for(let _=p;_<v;_++){const b=_*l+u;for(let w=0;w<r;w++)m[g++]=e[b+w]}}return m}}const o3t=[],am=[[0,1/0]];function a3t(e,t){if(e===am||(t[0]<0&&(t[0]=0),t[0]>=t[1]))return e;const r=[],n=e.length;let i=0;for(let o=0;o<n;o++){const a=e[o];a[1]<t[0]?(r.push(a),i=o+1):a[0]>t[1]?r.push(a):t=[Math.min(a[0],t[0]),Math.max(a[1],t[1])]}return r.splice(i,0,t),r}function Mb(e){const{source:t,target:r,start:n=0,size:i,getData:o}=e,a=e.end||r.length,s=t.length,l=a-n;if(s>l){r.set(t.subarray(0,l),n);return}if(r.set(t,n),!o)return;let u=s;for(;u<l;){const c=o(u,t);for(let f=0;f<i;f++)r[n+u]=c[f]||0,u++}}function s3t({source:e,target:t,size:r,getData:n,sourceStartIndices:i,targetStartIndices:o}){if(!Array.isArray(o))return Mb({source:e,target:t,size:r,getData:n}),t;let a=0,s=0;const l=n&&((c,f)=>n(c+s,f)),u=Math.min(i.length,o.length);for(let c=1;c<u;c++){const f=i[c]*r,h=o[c]*r;Mb({source:e.subarray(a,f),target:t,start:s,end:h,size:r,getData:l}),a=f,s=h}return s<t.length&&Mb({source:[],target:t,start:s,size:r,getData:l}),t}const l3t={interpolation:{duration:0,easing:e=>e},spring:{stiffness:.05,damping:.5}};function dV(e,t){if(!e)return null;Number.isFinite(e)&&(e={type:"interpolation",duration:e});const r=e.type||"interpolation";return{...l3t[r],...t,...e,type:r}}function pV(e,t){const r=t.getBuffer();return r?[r,{divisor:0,size:t.size,normalized:t.settings.normalized}]:t.value}function vV(e){switch(e){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4";default:throw new Error('No defined attribute type for size "'.concat(e,'"'))}}function gV(e){e.push(e.shift())}function _E(e,t){const{doublePrecision:r,settings:n,value:i,size:o}=e,a=r&&i instanceof Float64Array?2:1;return(n.noAlloc?i.length:t*o)*a}function mV({buffer:e,numInstances:t,attribute:r,fromLength:n,fromStartIndices:i,getData:o=a=>a}){const a=r.doublePrecision&&r.value instanceof Float64Array?2:1,s=r.size*a,l=r.byteOffset,u=r.startIndices,c=i&&u,f=_E(r,t),h=r.isConstant;if(!c&&n>=f)return;const d=h?r.value:r.getBuffer().getData({srcByteOffset:l});if(r.settings.normalized&&!h){const g=o;o=(_,b)=>r.normalizeConstant(g(_,b))}const p=h?(g,_)=>o(d,_):(g,_)=>o(d.subarray(g,g+s),_),v=e.getData({length:n}),m=new Float32Array(f);s3t({source:v,target:m,sourceStartIndices:i,targetStartIndices:u,size:s,getData:p}),e.byteLength<m.byteLength+l&&e.reallocate(m.byteLength+l),e.subData({data:m,offset:l})}class yE extends i3t{constructor(t,r){super(t,r,{startIndices:null,lastExternalBuffer:null,binaryValue:null,binaryAccessor:null,needsUpdate:!0,needsRedraw:!1,updateRanges:am}),P(this,"constant",!1),this.settings.update=r.update||(r.accessor?this._autoUpdater:void 0),Object.seal(this.settings),Object.seal(this.state),this._validateAttributeUpdaters()}get startIndices(){return this.state.startIndices}set startIndices(t){this.state.startIndices=t}needsUpdate(){return this.state.needsUpdate}needsRedraw({clearChangedFlags:t=!1}={}){const r=this.state.needsRedraw;return this.state.needsRedraw=r&&!t,r}getUpdateTriggers(){const{accessor:t}=this.settings;return[this.id].concat(typeof t!="function"&&t||[])}supportsTransition(){return Boolean(this.settings.transition)}getTransitionSetting(t){if(!t||!this.supportsTransition())return null;const{accessor:r}=this.settings,n=this.settings.transition,i=Array.isArray(r)?t[r.find(o=>t[o])]:t[r];return dV(i,n)}setNeedsUpdate(t=this.id,r){if(this.state.needsUpdate=this.state.needsUpdate||t,this.setNeedsRedraw(t),r){const{startRow:n=0,endRow:i=1/0}=r;this.state.updateRanges=a3t(this.state.updateRanges,[n,i])}else this.state.updateRanges=am}clearNeedsUpdate(){this.state.needsUpdate=!1,this.state.updateRanges=o3t}setNeedsRedraw(t=this.id){this.state.needsRedraw=this.state.needsRedraw||t}allocate(t){const{state:r,settings:n}=this;return n.noAlloc?!1:n.update?(super.allocate(t,r.updateRanges!==am),!0):!1}updateBuffer({numInstances:t,data:r,props:n,context:i}){if(!this.needsUpdate())return!1;const{state:{updateRanges:o},settings:{update:a,noAlloc:s}}=this;let l=!0;if(a){for(const[u,c]of o)a.call(i,this,{data:r,startRow:u,endRow:c,props:n,numInstances:t});if(this.value)if(this.constant||this.buffer.byteLength<this.value.byteLength+this.byteOffset)this.setData({value:this.value,constant:this.constant}),this.constant=!1;else for(const[u,c]of o){const f=Number.isFinite(u)?this.getVertexOffset(u):0,h=Number.isFinite(c)?this.getVertexOffset(c):s||!Number.isFinite(t)?this.value.length:t*this.size;super.updateSubBuffer({startOffset:f,endOffset:h})}this._checkAttributeArray()}else l=!1;return this.clearNeedsUpdate(),this.setNeedsRedraw(),l}setConstantValue(t){return t===void 0||typeof t=="function"?!1:(this.setData({constant:!0,value:t})&&this.setNeedsRedraw(),this.clearNeedsUpdate(),!0)}setExternalBuffer(t){const{state:r}=this;return t?(this.clearNeedsUpdate(),r.lastExternalBuffer===t||(r.lastExternalBuffer=t,this.setNeedsRedraw(),this.setData(t)),!0):(r.lastExternalBuffer=null,!1)}setBinaryValue(t,r=null){const{state:n,settings:i}=this;if(!t)return n.binaryValue=null,n.binaryAccessor=null,!1;if(i.noAlloc)return!1;if(n.binaryValue===t)return this.clearNeedsUpdate(),!0;if(n.binaryValue=t,this.setNeedsRedraw(),i.transform||r!==this.startIndices){ArrayBuffer.isView(t)&&(t={value:t});const a=t;vr(ArrayBuffer.isView(a.value),"invalid ".concat(i.accessor));const s=Boolean(a.size)&&a.size!==this.size;return n.binaryAccessor=hV(a.value,{size:a.size||this.size,stride:a.stride,offset:a.offset,startIndices:r,nested:s}),!1}return this.clearNeedsUpdate(),this.setData(t),!0}getVertexOffset(t){const{startIndices:r}=this;return(r?r[t]:t)*this.size}getShaderAttributes(){const t=this.settings.shaderAttributes||{[this.id]:null},r={};for(const n in t)Object.assign(r,super.getShaderAttributes(n,t[n]));return r}_autoUpdater(t,{data:r,startRow:n,endRow:i,props:o,numInstances:a}){if(t.constant)return;const{settings:s,state:l,value:u,size:c,startIndices:f}=t,{accessor:h,transform:d}=s,p=l.binaryAccessor||(typeof h=="function"?h:o[h]);vr(typeof p=="function",'accessor "'.concat(h,'" is not a function'));let v=t.getVertexOffset(n);const{iterable:m,objectInfo:g}=I_(r,n,i);for(const _ of m){g.index++;let b=p(_,g);if(d&&(b=d.call(this,b)),f){const w=(g.index<f.length-1?f[g.index+1]:a)-f[g.index];if(b&&Array.isArray(b[0])){let T=v;for(const S of b)t._normalizeValue(S,u,T),T+=c}else b&&b.length>c?u.set(b,v):(t._normalizeValue(b,g.target,0),Mwt({target:u,source:g.target,start:v,count:w}));v+=w*c}else t._normalizeValue(b,u,v),v+=c}}_validateAttributeUpdaters(){const{settings:t}=this;if(!(t.noAlloc||typeof t.update=="function"))throw new Error("Attribute ".concat(this.id," missing update or accessor"))}_checkAttributeArray(){const{value:t}=this,r=Math.min(4,this.size);if(t&&t.length>=r){let n=!0;switch(r){case 4:n=n&&Number.isFinite(t[3]);case 3:n=n&&Number.isFinite(t[2]);case 2:n=n&&Number.isFinite(t[1]);case 1:n=n&&Number.isFinite(t[0]);break;default:n=!1}if(!n)throw new Error("Illegal attribute generated for ".concat(this.id))}}}class u3t{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","interpolation"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.transition=new Kp(n),this.attribute=r,this.attributeInTransition=new yE(t,r.settings),this.currentStartIndices=r.startIndices,this.currentLength=0,this.transform=f3t(t,r);const i={byteLength:0,usage:35050};this.buffers=[new Ee(t,i),new Ee(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){if(t.duration<=0){this.transition.cancel();return}this.settings=t;const{gl:n,buffers:i,attribute:o}=this;gV(i);const a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)mV({buffer:s,...a});this.currentStartIndices=o.startIndices,this.currentLength=_E(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start(t),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aFrom:i[0],aTo:pV(n,o)},feedbackBuffers:{vCurrent:i[1]}})}update(){const t=this.transition.update();if(t){const{duration:r,easing:n}=this.settings,{time:i}=this.transition;let o=i/r;n&&(o=n(o)),this.transform.run({uniforms:{time:o}})}return t}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0}}const c3t=`
#define SHADER_NAME interpolation-transition-vertex-shader

uniform float time;
attribute ATTRIBUTE_TYPE aFrom;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vCurrent;

void main(void) {
  vCurrent = mix(aFrom, aTo, time);
  gl_Position = vec4(0.0);
}
`;function f3t(e,t){const r=vV(t.size);return new hE(e,{vs:c3t,defines:{ATTRIBUTE_TYPE:r},varyings:["vCurrent"]})}class h3t{constructor({gl:t,attribute:r,timeline:n}){P(this,"gl",void 0),P(this,"type","spring"),P(this,"attributeInTransition",void 0),P(this,"settings",void 0),P(this,"attribute",void 0),P(this,"transition",void 0),P(this,"currentStartIndices",void 0),P(this,"currentLength",void 0),P(this,"texture",void 0),P(this,"framebuffer",void 0),P(this,"transform",void 0),P(this,"buffers",void 0),this.gl=t,this.type="spring",this.transition=new Kp(n),this.attribute=r,this.attributeInTransition=new yE(t,{...r.settings,normalized:!1}),this.currentStartIndices=r.startIndices,this.currentLength=0,this.texture=p3t(t),this.framebuffer=v3t(t,this.texture),this.transform=d3t(t,r,this.framebuffer);const i={byteLength:0,usage:35050};this.buffers=[new Ee(t,i),new Ee(t,i),new Ee(t,i)]}get inProgress(){return this.transition.inProgress}start(t,r){const{gl:n,buffers:i,attribute:o}=this,a={numInstances:r,attribute:o,fromLength:this.currentLength,fromStartIndices:this.currentStartIndices,getData:t.enter};for(const s of i)mV({buffer:s,...a});this.settings=t,this.currentStartIndices=o.startIndices,this.currentLength=_E(o,r),this.attributeInTransition.setData({buffer:i[1],value:o.value}),this.transition.start({...t,duration:1/0}),this.transform.update({elementCount:Math.floor(this.currentLength/o.size),sourceBuffers:{aTo:pV(n,o)}})}update(){const{buffers:t,transform:r,framebuffer:n,transition:i}=this;if(!i.update())return!1;const a=this.settings;return r.update({sourceBuffers:{aPrev:t[0],aCur:t[1]},feedbackBuffers:{vNext:t[2]}}),r.run({framebuffer:n,discard:!1,clearRenderTarget:!0,uniforms:{stiffness:a.stiffness,damping:a.damping},parameters:{depthTest:!1,blend:!0,viewport:[0,0,1,1],blendFunc:[1,1],blendEquation:[32776,32776]}}),gV(t),this.attributeInTransition.setData({buffer:t[1],value:this.attribute.value}),E_(n)[0]>0||i.end(),!0}cancel(){this.transition.cancel(),this.transform.delete();for(const t of this.buffers)t.delete();this.buffers.length=0,this.texture.delete(),this.framebuffer.delete()}}function d3t(e,t,r){const n=vV(t.size);return new hE(e,{framebuffer:r,vs:`
#define SHADER_NAME spring-transition-vertex-shader

#define EPSILON 0.00001

uniform float stiffness;
uniform float damping;
attribute ATTRIBUTE_TYPE aPrev;
attribute ATTRIBUTE_TYPE aCur;
attribute ATTRIBUTE_TYPE aTo;
varying ATTRIBUTE_TYPE vNext;
varying float vIsTransitioningFlag;

ATTRIBUTE_TYPE getNextValue(ATTRIBUTE_TYPE cur, ATTRIBUTE_TYPE prev, ATTRIBUTE_TYPE dest) {
  ATTRIBUTE_TYPE velocity = cur - prev;
  ATTRIBUTE_TYPE delta = dest - cur;
  ATTRIBUTE_TYPE spring = delta * stiffness;
  ATTRIBUTE_TYPE damper = velocity * -1.0 * damping;
  return spring + damper + velocity + cur;
}

void main(void) {
  bool isTransitioning = length(aCur - aPrev) > EPSILON || length(aTo - aCur) > EPSILON;
  vIsTransitioningFlag = isTransitioning ? 1.0 : 0.0;

  vNext = getNextValue(aCur, aPrev, aTo);
  gl_Position = vec4(0, 0, 0, 1);
  gl_PointSize = 100.0;
}
`,fs:`
#define SHADER_NAME spring-transition-is-transitioning-fragment-shader

varying float vIsTransitioningFlag;

void main(void) {
  if (vIsTransitioningFlag == 0.0) {
    discard;
  }
  gl_FragColor = vec4(1.0);
}`,defines:{ATTRIBUTE_TYPE:n},varyings:["vNext"]})}function p3t(e){return new yn(e,{data:new Uint8Array(4),format:6408,type:5121,border:0,mipmaps:!1,dataFormat:6408,width:1,height:1})}function v3t(e,t){return new lr(e,{id:"spring-transition-is-transitioning-framebuffer",width:1,height:1,attachments:{[36064]:t}})}const g3t={interpolation:u3t,spring:h3t};class m3t{constructor(t,{id:r,timeline:n}){P(this,"id",void 0),P(this,"isSupported",void 0),P(this,"gl",void 0),P(this,"timeline",void 0),P(this,"transitions",void 0),P(this,"needsRedraw",void 0),P(this,"numInstances",void 0),this.id=r,this.gl=t,this.timeline=n,this.transitions={},this.needsRedraw=!1,this.numInstances=1,this.isSupported=hE.isSupported(t)}finalize(){for(const t in this.transitions)this._removeTransition(t)}update({attributes:t,transitions:r,numInstances:n}){this.numInstances=n||1;for(const i in t){const o=t[i],a=o.getTransitionSetting(r);!a||this._updateAttribute(i,o,a)}for(const i in this.transitions){const o=t[i];(!o||!o.getTransitionSetting(r))&&this._removeTransition(i)}}hasAttribute(t){const r=this.transitions[t];return r&&r.inProgress}getAttributes(){const t={};for(const r in this.transitions){const n=this.transitions[r];n.inProgress&&(t[r]=n.attributeInTransition)}return t}run(){if(!this.isSupported||this.numInstances===0)return!1;for(const r in this.transitions)this.transitions[r].update()&&(this.needsRedraw=!0);const t=this.needsRedraw;return this.needsRedraw=!1,t}_removeTransition(t){this.transitions[t].cancel(),delete this.transitions[t]}_updateAttribute(t,r,n){const i=this.transitions[t];let o=!i||i.type!==n.type;if(o){if(!this.isSupported){Ht.warn("WebGL2 not supported by this browser. Transition for ".concat(t," is disabled."))();return}i&&this._removeTransition(t);const a=g3t[n.type];a?this.transitions[t]=new a({attribute:r,timeline:this.timeline,gl:this.gl}):(Ht.error("unsupported transition type '".concat(n.type,"'"))(),o=!1)}(o||r.needsRedraw())&&(this.needsRedraw=!0,this.transitions[t].start(n,this.numInstances))}}const iI="attributeManager.invalidate",_3t="attributeManager.updateStart",y3t="attributeManager.updateEnd",b3t="attribute.updateStart",w3t="attribute.allocate",S3t="attribute.updateEnd";class T3t{constructor(t,{id:r="attribute-manager",stats:n,timeline:i}={}){P(this,"id",void 0),P(this,"gl",void 0),P(this,"attributes",void 0),P(this,"updateTriggers",void 0),P(this,"needsRedraw",void 0),P(this,"userData",void 0),P(this,"stats",void 0),P(this,"attributeTransitionManager",void 0),this.id=r,this.gl=t,this.attributes={},this.updateTriggers={},this.needsRedraw=!0,this.userData={},this.stats=n,this.attributeTransitionManager=new m3t(t,{id:"".concat(r,"-transitions"),timeline:i}),Object.seal(this)}finalize(){for(const t in this.attributes)this.attributes[t].delete();this.attributeTransitionManager.finalize()}getNeedsRedraw(t={clearRedrawFlags:!1}){const r=this.needsRedraw;return this.needsRedraw=this.needsRedraw&&!t.clearRedrawFlags,r&&this.id}setNeedsRedraw(){this.needsRedraw=!0}add(t){this._add(t)}addInstanced(t){this._add(t,{instanced:1})}remove(t){for(const r of t)this.attributes[r]!==void 0&&(this.attributes[r].delete(),delete this.attributes[r])}invalidate(t,r){const n=this._invalidateTrigger(t,r);Vr(iI,this,t,n)}invalidateAll(t){for(const r in this.attributes)this.attributes[r].setNeedsUpdate(r,t);Vr(iI,this,"all")}update({data:t,numInstances:r,startIndices:n=null,transitions:i,props:o={},buffers:a={},context:s={}}){let l=!1;Vr(_3t,this),this.stats&&this.stats.get("Update Attributes").timeStart();for(const u in this.attributes){const c=this.attributes[u],f=c.settings.accessor;c.startIndices=n,c.numInstances=r,o[u]&&Ht.removed("props.".concat(u),"data.attributes.".concat(u))(),c.setExternalBuffer(a[u])||c.setBinaryValue(typeof f=="string"?a[f]:void 0,t.startIndices)||typeof f=="string"&&!a[f]&&c.setConstantValue(o[f])||c.needsUpdate()&&(l=!0,this._updateAttribute({attribute:c,numInstances:r,data:t,props:o,context:s})),this.needsRedraw=this.needsRedraw||c.needsRedraw()}l&&Vr(y3t,this,r),this.stats&&this.stats.get("Update Attributes").timeEnd(),this.attributeTransitionManager.update({attributes:this.attributes,numInstances:r,transitions:i})}updateTransition(){const{attributeTransitionManager:t}=this,r=t.run();return this.needsRedraw=this.needsRedraw||r,r}getAttributes(){return this.attributes}getChangedAttributes(t={clearChangedFlags:!1}){const{attributes:r,attributeTransitionManager:n}=this,i={...n.getAttributes()};for(const o in r){const a=r[o];a.needsRedraw(t)&&!n.hasAttribute(o)&&(i[o]=a)}return i}getShaderAttributes(t,r={}){t||(t=this.getAttributes());const n={};for(const i in t)r[i]||Object.assign(n,t[i].getShaderAttributes());return n}_add(t,r={}){for(const n in t){const i=t[n];this.attributes[n]=this._createAttribute(n,i,r)}this._mapUpdateTriggersToAttributes()}_createAttribute(t,r,n){const i={...r,id:t,size:r.isIndexed&&1||r.size||1,divisor:n.instanced?1:r.divisor||0};return new yE(this.gl,i)}_mapUpdateTriggersToAttributes(){const t={};for(const r in this.attributes)this.attributes[r].getUpdateTriggers().forEach(i=>{t[i]||(t[i]=[]),t[i].push(r)});this.updateTriggers=t}_invalidateTrigger(t,r){const{attributes:n,updateTriggers:i}=this,o=i[t];return o&&o.forEach(a=>{const s=n[a];s&&s.setNeedsUpdate(s.id,r)}),o}_updateAttribute(t){const{attribute:r,numInstances:n}=t;if(Vr(b3t,r),r.constant){r.setConstantValue(r.value);return}r.allocate(n)&&Vr(w3t,r,n),r.updateBuffer(t)&&(this.needsRedraw=!0,Vr(S3t,r,n))}}class k3t extends Kp{get value(){return this._value}_onUpdate(){const{time:t,settings:{fromValue:r,toValue:n,duration:i,easing:o}}=this,a=o(t/i);this._value=jl(r,n,a)}}const oI=1e-5;function aI(e,t,r,n,i){const o=t-e,s=(r-t)*i,l=-o*n;return s+l+o+t}function P3t(e,t,r,n,i){if(Array.isArray(r)){const o=[];for(let a=0;a<r.length;a++)o[a]=aI(e[a],t[a],r[a],n,i);return o}return aI(e,t,r,n,i)}function sI(e,t){if(Array.isArray(e)){let r=0;for(let n=0;n<e.length;n++){const i=e[n]-t[n];r+=i*i}return Math.sqrt(r)}return Math.abs(e-t)}class E3t extends Kp{get value(){return this._currValue}_onUpdate(){const{fromValue:t,toValue:r,damping:n,stiffness:i}=this.settings,{_prevValue:o=t,_currValue:a=t}=this;let s=P3t(o,a,r,n,i);const l=sI(s,r),u=sI(s,a);l<oI&&u<oI&&(s=r,this.end()),this._prevValue=a,this._currValue=s}}const C3t={interpolation:k3t,spring:E3t};class A3t{constructor(t){this.transitions=new Map,this.timeline=t}get active(){return this.transitions.size>0}add(t,r,n,i){const{transitions:o}=this;if(o.has(t)){const l=o.get(t),{value:u=l.settings.fromValue}=l;r=u,this.remove(t)}if(i=dV(i),!i)return;const a=C3t[i.type];if(!a){Ht.error("unsupported transition type '".concat(i.type,"'"))();return}const s=new a(this.timeline);s.start({...i,fromValue:r,toValue:n}),o.set(t,s)}remove(t){const{transitions:r}=this;r.has(t)&&(r.get(t).cancel(),r.delete(t))}update(){const t={};for(const[r,n]of this.transitions)n.update(),t[r]=n.value,n.inProgress||this.remove(r);return t}clear(){for(const t of this.transitions.keys())this.remove(t)}}function M3t(e){const t=bE(e);for(const r in t){const n=t[r],{validate:i}=n;if(i&&!i(e[r],n))throw new Error("Invalid prop ".concat(r,": ").concat(e[r]))}}function x3t(e,t){const r=_V({newProps:e,oldProps:t,propTypes:bE(e),ignoreProps:{data:null,updateTriggers:null,extensions:null,transitions:null}}),n=I3t(e,t);let i=!1;return n||(i=O3t(e,t)),{dataChanged:n,propsChanged:r,updateTriggersChanged:i,extensionsChanged:R3t(e,t),transitionsChanged:L3t(e,t)}}function L3t(e,t){if(!e.transitions)return!1;const r={},n=bE(e);let i=!1;for(const o in e.transitions){const a=n[o],s=a&&a.type;(s==="number"||s==="color"||s==="array")&&sT(e[o],t[o],a)&&(r[o]=!0,i=!0)}return i?r:!1}function _V({newProps:e,oldProps:t,ignoreProps:r={},propTypes:n={},triggerName:i="props"}){if(t===e)return!1;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return"".concat(i," changed shallowly");for(const o of Object.keys(e))if(!(o in r)){if(!(o in t))return"".concat(i,".").concat(o," added");const a=sT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}for(const o of Object.keys(t))if(!(o in r)){if(!(o in e))return"".concat(i,".").concat(o," dropped");if(!Object.hasOwnProperty.call(e,o)){const a=sT(e[o],t[o],n[o]);if(a)return"".concat(i,".").concat(o," ").concat(a)}}return!1}function sT(e,t,r){let n=r&&r.equal;return n&&!n(e,t,r)||!n&&(n=e&&t&&e.equals,n&&!n.call(e,t))?"changed deeply":!n&&t!==e?"changed shallowly":null}function I3t(e,t){if(t===null)return"oldProps is null, initial diff";let r=!1;const{dataComparator:n,_dataDiff:i}=e;return n?n(e.data,t.data)||(r="Data comparator detected a change"):e.data!==t.data&&(r="A new data container was supplied"),r&&i&&(r=i(e.data,t.data)||r),r}function O3t(e,t){if(t===null)return{all:!0};if("all"in e.updateTriggers&&lI(e,t,"all"))return{all:!0};const r={};let n=!1;for(const i in e.updateTriggers)i!=="all"&&lI(e,t,i)&&(r[i]=!0,n=!0);return n?r:!1}function R3t(e,t){if(t===null)return!0;const r=t.extensions,{extensions:n}=e;if(n===r)return!1;if(!r||!n||n.length!==r.length)return!0;for(let i=0;i<n.length;i++)if(!n[i].equals(r[i]))return!0;return!1}function lI(e,t,r){let n=e.updateTriggers[r];n=n==null?{}:n;let i=t.updateTriggers[r];return i=i==null?{}:i,_V({oldProps:i,newProps:n,triggerName:r})}function bE(e){const t=e[h1],r=t&&t.constructor;return r?r._propTypes:{}}const D3t="count(): argument not an object",N3t="count(): argument not a container";function F3t(e){if(!B3t(e))throw new Error(D3t);if(typeof e.count=="function")return e.count();if(Number.isFinite(e.size))return e.size;if(Number.isFinite(e.length))return e.length;if($3t(e))return Object.keys(e).length;throw new Error(N3t)}function $3t(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function B3t(e){return e!==null&&typeof e=="object"}function z3t(e,t){if(!t)return e;const r={...e,...t};if("defines"in t&&(r.defines={...e.defines,...t.defines}),"modules"in t&&(r.modules=(e.modules||[]).concat(t.modules),t.modules.some(n=>n.name==="project64"))){const n=r.modules.findIndex(i=>i.name==="project32");n>=0&&r.modules.splice(n,1)}if("inject"in t)if(!e.inject)r.inject=t.inject;else{const n={...e.inject};for(const i in t.inject)n[i]=(n[i]||"")+t.inject[i];r.inject=n}return r}const V3t={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071},lT={};function U3t(e,t){const r=e.context&&e.context.gl;if(!r||!t)return null;if(t instanceof yn)return t;t.constructor&&t.constructor.name!=="Object"&&(t={data:t});let n=null;t.compressed&&(n={[10241]:t.data.length>1?9985:9729});const i=new yn(r,{...t,parameters:{...V3t,...n,...e.props.textureParameters}});return lT[i.id]=!0,i}function W3t(e){!e||!(e instanceof yn)||lT[e.id]&&(e.delete(),delete lT[e.id])}const G3t={boolean:{validate(e,t){return!0},equal(e,t,r){return Boolean(e)===Boolean(t)}},number:{validate(e,t){return Number.isFinite(e)&&(!("max"in t)||e<=t.max)&&(!("min"in t)||e>=t.min)}},color:{validate(e,t){return t.optional&&!e||gp(e)&&(e.length===3||e.length===4)},equal(e,t,r){return xb(e,t)}},accessor:{validate(e,t){const r=p1(e);return r==="function"||r===p1(t.value)},equal(e,t,r){return typeof t=="function"?!0:xb(e,t)}},array:{validate(e,t){return t.optional&&!e||gp(e)},equal(e,t,r){return r.compare?xb(e,t):e===t}},object:{equal(e,t,r){return r.compare?Cf(e,t):e===t}},function:{validate(e,t){return t.optional&&!e||typeof e=="function"},equal(e,t,r){return!r.compare||e===t}},data:{transform:(e,t,r)=>{const{dataTransform:n}=r.props;return n&&e?n(e):e}},image:{transform:(e,t,r)=>U3t(r,e),release:e=>{W3t(e)}}};function xb(e,t){if(e===t)return!0;if(!gp(e)||!gp(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}function j3t(e){const t={},r={},n={};for(const[i,o]of Object.entries(e)){const a=o==null?void 0:o.deprecatedFor;if(a)n[i]=Array.isArray(a)?a:[a];else{const s=H3t(i,o);t[i]=s,r[i]=s.value}}return{propTypes:t,defaultProps:r,deprecatedProps:n}}function H3t(e,t){switch(p1(t)){case"object":return kh(e,t);case"array":return kh(e,{type:"array",value:t,compare:!1});case"boolean":return kh(e,{type:"boolean",value:t});case"number":return kh(e,{type:"number",value:t});case"function":return kh(e,{type:"function",value:t,compare:!0});default:return{name:e,type:"unknown",value:t}}}function kh(e,t){return"type"in t?{name:e,...G3t[t.type],...t}:"value"in t?{name:e,type:p1(t.value),...t}:{name:e,type:"object",value:t}}function gp(e){return Array.isArray(e)||ArrayBuffer.isView(e)}function p1(e){return gp(e)?"array":e===null?"null":typeof e}function X3t(e,t){const r=yV(e.constructor),n=Object.create(r);n[h1]=e,n[au]={},n[ms]={};for(let i=0;i<t.length;++i){const o=t[i];for(const a in o)n[a]=o[a]}return Object.freeze(n),n}function yV(e){const t=v1(e,"_mergedDefaultProps");return t||(Y3t(e),e._mergedDefaultProps)}function Y3t(e){if(!e.prototype)return;const r=Object.getPrototypeOf(e),n=yV(r),i=v1(e,"defaultProps")||{},o=j3t(i),a=q3t(o.defaultProps,n,e),s={...r._propTypes,...o.propTypes};K3t(a,s);const l={...r._deprecatedProps,...o.deprecatedProps};Z3t(a,l),e._mergedDefaultProps=a,e._propTypes=s,e._deprecatedProps=l}function q3t(e,t,r){const n=Object.create(null);Object.assign(n,t,e);const i=Q3t(r);return delete e.id,Object.defineProperties(n,{id:{writable:!0,value:i}}),n}function Z3t(e,t){for(const r in t)Object.defineProperty(e,r,{enumerable:!1,set(n){const i="".concat(this.id,": ").concat(r);for(const o of t[r])bV(this,o)||(this[o]=n);Ht.deprecated(i,t[r].join("/"))()}})}function K3t(e,t){const r={},n={};for(const i in t){const o=t[i],{name:a,value:s}=o;o.async&&(r[a]=s,n[a]=J3t(a))}e[zc]=r,e[au]={},Object.defineProperties(e,n)}function J3t(e){return{enumerable:!0,set(t){typeof t=="string"||t instanceof Promise||fV(t)?this[au][e]=t:this[ms][e]=t},get(){if(this[ms]){if(e in this[ms])return this[ms][e]||this[zc][e];if(e in this[au]){const t=this[h1]&&this[h1].internalState;if(t&&t.hasAsyncProp(e))return t.getAsyncProp(e)||this[zc][e]}}return this[zc][e]}}}function bV(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function v1(e,t){return bV(e,t)&&e[t]}function Q3t(e){const t=v1(e,"layerName")||v1(e,"componentName");return t||Ht.once(0,"".concat(e.name,".componentName not specified"))(),t||e.name}let tTt=0;class wE{constructor(...t){P(this,"id",void 0),P(this,"props",void 0),P(this,"count",void 0),this.props=X3t(this,t),this.id=this.props.id,this.count=tTt++}clone(t){const{props:r}=this,n={};for(const i in r[zc])i in r[ms]?n[i]=r[ms][i]:i in r[au]&&(n[i]=r[au][i]);return new this.constructor({...r,...n,...t})}}P(wE,"componentName","Component");P(wE,"defaultProps",{});const eTt=Object.freeze({});class rTt{constructor(t){P(this,"component",void 0),P(this,"onAsyncPropUpdated",void 0),P(this,"asyncProps",void 0),P(this,"oldProps",void 0),P(this,"oldAsyncProps",void 0),this.component=t,this.asyncProps={},this.onAsyncPropUpdated=()=>{},this.oldProps=null,this.oldAsyncProps=null}finalize(){for(const t in this.asyncProps){const r=this.asyncProps[t];r&&r.type&&r.type.release&&r.type.release(r.resolvedValue,r.type,this.component)}}getOldProps(){return this.oldAsyncProps||this.oldProps||eTt}resetOldProps(){this.oldAsyncProps=null,this.oldProps=this.component.props}hasAsyncProp(t){return t in this.asyncProps}getAsyncProp(t){const r=this.asyncProps[t];return r&&r.resolvedValue}isAsyncPropLoading(t){if(t){const r=this.asyncProps[t];return Boolean(r&&r.pendingLoadCount>0&&r.pendingLoadCount!==r.resolvedLoadCount)}for(const r in this.asyncProps)if(this.isAsyncPropLoading(r))return!0;return!1}reloadAsyncProp(t,r){this._watchPromise(t,Promise.resolve(r))}setAsyncProps(t){const r=t[ms]||{},n=t[au]||t,i=t[zc]||{};for(const o in r){const a=r[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a),r[o]=this.getAsyncProp(o)}for(const o in n){const a=n[o];this._createAsyncPropData(o,i[o]),this._updateAsyncProp(o,a)}}_fetch(t,r){return null}_onResolve(t,r){}_onError(t,r){}_updateAsyncProp(t,r){if(!!this._didAsyncInputValueChange(t,r)){if(typeof r=="string"&&(r=this._fetch(t,r)),r instanceof Promise){this._watchPromise(t,r);return}if(fV(r)){this._resolveAsyncIterable(t,r);return}this._setPropValue(t,r)}}_freezeAsyncOldProps(){if(!this.oldAsyncProps&&this.oldProps){this.oldAsyncProps=Object.create(this.oldProps);for(const t in this.asyncProps)Object.defineProperty(this.oldAsyncProps,t,{enumerable:!0,value:this.oldProps[t]})}}_didAsyncInputValueChange(t,r){const n=this.asyncProps[t];return r===n.resolvedValue||r===n.lastValue?!1:(n.lastValue=r,!0)}_setPropValue(t,r){this._freezeAsyncOldProps();const n=this.asyncProps[t];n&&(r=this._postProcessValue(n,r),n.resolvedValue=r,n.pendingLoadCount++,n.resolvedLoadCount=n.pendingLoadCount)}_setAsyncPropValue(t,r,n){const i=this.asyncProps[t];i&&n>=i.resolvedLoadCount&&r!==void 0&&(this._freezeAsyncOldProps(),i.resolvedValue=r,i.resolvedLoadCount=n,this.onAsyncPropUpdated(t,r))}_watchPromise(t,r){const n=this.asyncProps[t];if(n){n.pendingLoadCount++;const i=n.pendingLoadCount;r.then(o=>{o=this._postProcessValue(n,o),this._setAsyncPropValue(t,o,i),this._onResolve(t,o)}).catch(o=>{this._onError(t,o)})}}async _resolveAsyncIterable(t,r){if(t!=="data"){this._setPropValue(t,r);return}const n=this.asyncProps[t];if(!n)return;n.pendingLoadCount++;const i=n.pendingLoadCount;let o=[],a=0;for await(const s of r){const{dataTransform:l}=this.component.props;l?o=l(s,o):o=o.concat(s),Object.defineProperty(o,"__diff",{enumerable:!1,value:[{startRow:a,endRow:o.length}]}),a=o.length,this._setAsyncPropValue(t,o,i)}this._onResolve(t,o)}_postProcessValue(t,r){const n=t.type;return n&&(n.release&&n.release(t.resolvedValue,n,this.component),n.transform)?n.transform(r,n,this.component):r}_createAsyncPropData(t,r){if(!this.asyncProps[t]){const i=this.component&&this.component.constructor._propTypes;this.asyncProps[t]={type:i&&i[t],lastValue:null,resolvedValue:r,pendingLoadCount:0,resolvedLoadCount:0}}}}class nTt extends rTt{constructor({attributeManager:t,layer:r}){super(r),P(this,"attributeManager",void 0),P(this,"needsRedraw",void 0),P(this,"needsUpdate",void 0),P(this,"subLayers",void 0),P(this,"usesPickingColorCache",void 0),P(this,"changeFlags",void 0),P(this,"viewport",void 0),P(this,"uniformTransitions",void 0),P(this,"propsInTransition",void 0),this.attributeManager=t,this.needsRedraw=!0,this.needsUpdate=!0,this.subLayers=null,this.usesPickingColorCache=!1}get layer(){return this.component}set layer(t){this.component=t}_fetch(t,r){const n=this.component.props.fetch;return n?n(r,{propName:t,layer:this.layer}):super._fetch(t,r)}_onResolve(t,r){const n=this.component.props.onDataLoad;t==="data"&&n&&n(r,{propName:t,layer:this.layer})}_onError(t,r){this.layer.raiseError(r,"loading ".concat(t," of ").concat(this.layer))}}const iTt="layer.changeFlag",oTt="layer.initialize",aTt="layer.update",sTt="layer.finalize",lTt="layer.matched",uI=2**24-1,uTt=Object.freeze([]),cTt=Zp(({oldViewport:e,viewport:t})=>e.equals(t));let ao=new Uint8ClampedArray(0);const fTt={data:{type:"data",value:uTt,async:!0},dataComparator:{type:"function",value:null,compare:!1,optional:!0},_dataDiff:{type:"function",value:e=>e&&e.__diff,compare:!1,optional:!0},dataTransform:{type:"function",value:null,compare:!1,optional:!0},onDataLoad:{type:"function",value:null,compare:!1,optional:!0},onError:{type:"function",value:null,compare:!1,optional:!0},fetch:{type:"function",value:(e,{propName:t,layer:r,loaders:n,loadOptions:i,signal:o})=>{const{resourceManager:a}=r.context;if(i=i||r.getLoadOptions(),n=n||r.props.loaders,o){var s;i={...i,fetch:{...(s=i)===null||s===void 0?void 0:s.fetch,signal:o}}}let l=a.contains(e);return!l&&!i&&(a.add({resourceId:e,data:o1(e,n),persistent:!1}),l=!0),l?a.subscribe({resourceId:e,onChange:u=>{var c;return(c=r.internalState)===null||c===void 0?void 0:c.reloadAsyncProp(t,u)},consumerId:r.id,requestId:t}):o1(e,n,i)},compare:!1},updateTriggers:{},visible:!0,pickable:!1,opacity:{type:"number",min:0,max:1,value:1},operation:qp.DRAW,onHover:{type:"function",value:null,compare:!1,optional:!0},onClick:{type:"function",value:null,compare:!1,optional:!0},onDragStart:{type:"function",value:null,compare:!1,optional:!0},onDrag:{type:"function",value:null,compare:!1,optional:!0},onDragEnd:{type:"function",value:null,compare:!1,optional:!0},coordinateSystem:ce.DEFAULT,coordinateOrigin:{type:"array",value:[0,0,0],compare:!0},modelMatrix:{type:"array",value:null,compare:!0,optional:!0},wrapLongitude:!1,positionFormat:"XYZ",colorFormat:"RGBA",parameters:{type:"object",value:{},optional:!0,compare:!0},transitions:null,extensions:[],loaders:{type:"array",value:[],optional:!0,compare:!0},getPolygonOffset:{type:"function",value:({layerIndex:e})=>[0,-e*100],compare:!1},highlightedObjectIndex:null,autoHighlight:!1,highlightColor:{type:"accessor",value:[0,0,128,128]}};class $o extends wE{constructor(...t){super(...t),P(this,"internalState",null),P(this,"lifecycle",gc.NO_STATE),P(this,"context",void 0),P(this,"state",void 0),P(this,"parent",null)}get root(){let t=this;for(;t.parent;)t=t.parent;return t}toString(){const t=this.constructor.layerName||this.constructor.name;return"".concat(t,"({id: '").concat(this.props.id,"'})")}project(t){vr(this.internalState);const r=this.internalState.viewport||this.context.viewport,n=Jz(t,{viewport:r,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem}),[i,o,a]=Yz(n,r.pixelProjectionMatrix);return t.length===2?[i,o]:[i,o,a]}unproject(t){return vr(this.internalState),(this.internalState.viewport||this.context.viewport).unproject(t)}projectPosition(t,r){vr(this.internalState);const n=this.internalState.viewport||this.context.viewport;return Awt(t,{viewport:n,modelMatrix:this.props.modelMatrix,coordinateOrigin:this.props.coordinateOrigin,coordinateSystem:this.props.coordinateSystem,...r})}get isComposite(){return!1}setState(t){this.setChangeFlags({stateChanged:!0}),Object.assign(this.state,t),this.setNeedsRedraw()}setNeedsRedraw(){this.internalState&&(this.internalState.needsRedraw=!0)}setNeedsUpdate(){this.internalState&&(this.context.layerManager.setNeedsUpdate(String(this)),this.internalState.needsUpdate=!0)}get isLoaded(){return this.internalState?!this.internalState.isAsyncPropLoading():!1}get wrapLongitude(){return this.props.wrapLongitude}isPickable(){return this.props.pickable&&this.props.visible}getModels(){return this.state&&(this.state.models||this.state.model&&[this.state.model])||[]}setModuleParameters(t){for(const r of this.getModels())r.updateModuleSettings(t)}getAttributeManager(){return this.internalState&&this.internalState.attributeManager}getCurrentLayer(){return this.internalState&&this.internalState.layer}getLoadOptions(){return this.props.loadOptions}use64bitPositions(){const{coordinateSystem:t}=this.props;return t===ce.DEFAULT||t===ce.LNGLAT||t===ce.CARTESIAN}onHover(t,r){return this.props.onHover&&this.props.onHover(t,r)||!1}onClick(t,r){return this.props.onClick&&this.props.onClick(t,r)||!1}nullPickingColor(){return[0,0,0]}encodePickingColor(t,r=[]){return r[0]=t+1&255,r[1]=t+1>>8&255,r[2]=t+1>>8>>8&255,r}decodePickingColor(t){vr(t instanceof Uint8Array);const[r,n,i]=t;return r+n*256+i*65536-1}getNumInstances(){return Number.isFinite(this.props.numInstances)?this.props.numInstances:this.state&&this.state.numInstances!==void 0?this.state.numInstances:F3t(this.props.data)}getStartIndices(){return this.props.startIndices?this.props.startIndices:this.state&&this.state.startIndices?this.state.startIndices:null}getBounds(){var t;const r=this.getAttributeManager();if(!r)return null;const{positions:n,instancePositions:i}=r.attributes;return(t=n||i)===null||t===void 0?void 0:t.getBounds()}getShaders(t){for(const r of this.props.extensions)t=z3t(t,r.getShaders.call(this,r));return t}shouldUpdateState(t){return t.changeFlags.propsOrDataChanged}updateState(t){const r=this.getAttributeManager(),{dataChanged:n}=t.changeFlags;if(n&&r)if(Array.isArray(n))for(const l of n)r.invalidateAll(l);else r.invalidateAll();const{props:i,oldProps:o}=t,a=Number.isInteger(o.highlightedObjectIndex)||o.pickable,s=Number.isInteger(i.highlightedObjectIndex)||i.pickable;if(a!==s&&r){const{pickingColors:l,instancePickingColors:u}=r.attributes,c=l||u;c&&(s&&c.constant&&(c.constant=!1,r.invalidate(c.id)),!c.value&&!s&&(c.constant=!0,c.value=[0,0,0]))}}finalizeState(t){for(const n of this.getModels())n.delete();const r=this.getAttributeManager();r&&r.finalize(),this.context&&this.context.resourceManager.unsubscribe({consumerId:this.id}),this.internalState&&(this.internalState.uniformTransitions.clear(),this.internalState.finalize())}draw(t){for(const r of this.getModels())r.draw(t)}getPickingInfo({info:t,mode:r,sourceLayer:n}){const{index:i}=t;return i>=0&&Array.isArray(this.props.data)&&(t.object=this.props.data[i]),t}raiseError(t,r){var n,i;if(r&&(t.message="".concat(r,": ").concat(t.message)),!((n=(i=this.props).onError)!==null&&n!==void 0&&n.call(i,t))){var o,a;(o=this.context)===null||o===void 0||(a=o.onError)===null||a===void 0||a.call(o,t,this)}}getNeedsRedraw(t={clearRedrawFlags:!1}){return this._getNeedsRedraw(t)}needsUpdate(){return this.internalState?this.internalState.needsUpdate||this.hasUniformTransition()||this.shouldUpdateState(this._getUpdateParams()):!1}hasUniformTransition(){var t;return((t=this.internalState)===null||t===void 0?void 0:t.uniformTransitions.active)||!1}activateViewport(t){if(!this.internalState)return;const r=this.internalState.viewport;this.internalState.viewport=t,(!r||!cTt({oldViewport:r,viewport:t}))&&(this.setChangeFlags({viewportChanged:!0}),this.isComposite?this.needsUpdate()&&this.setNeedsUpdate():this._update())}invalidateAttribute(t="all"){const r=this.getAttributeManager();!r||(t==="all"?r.invalidateAll():r.invalidate(t))}updateAttributes(t){for(const r of this.getModels())this._setModelAttributes(r,t)}_updateAttributes(){const t=this.getAttributeManager();if(!t)return;const r=this.props,n=this.getNumInstances(),i=this.getStartIndices();t.update({data:r.data,numInstances:n,startIndices:i,props:r,transitions:r.transitions,buffers:r.data.attributes,context:this});const o=t.getChangedAttributes({clearChangedFlags:!0});this.updateAttributes(o)}_updateAttributeTransition(){const t=this.getAttributeManager();t&&t.updateTransition()}_updateUniformTransition(){const{uniformTransitions:t}=this.internalState;if(t.active){const r=t.update(),n=Object.create(this.props);for(const i in r)Object.defineProperty(n,i,{value:r[i]});return n}return this.props}calculateInstancePickingColors(t,{numInstances:r}){if(t.constant)return;const n=Math.floor(ao.length/3);if(this.internalState.usesPickingColorCache=!0,n<r){r>uI&&Ht.warn("Layer has too many data objects. Picking might not be able to distinguish all objects.")(),ao=nf.allocate(ao,r,{size:3,copy:!0,maxCount:Math.max(r,uI)});const i=Math.floor(ao.length/3),o=[];for(let a=n;a<i;a++)this.encodePickingColor(a,o),ao[a*3+0]=o[0],ao[a*3+1]=o[1],ao[a*3+2]=o[2]}t.value=ao.subarray(0,r*3)}_setModelAttributes(t,r){const n=this.getAttributeManager(),i=t.userData.excludeAttributes||{},o=n.getShaderAttributes(r,i);t.setAttributes(o)}disablePickingIndex(t){this._disablePickingIndex(t)}_disablePickingIndex(t){const{pickingColors:r,instancePickingColors:n}=this.getAttributeManager().attributes,i=r||n;if(!i)return;const o=i.getVertexOffset(t),a=i.getVertexOffset(t+1);i.buffer.subData({data:new Uint8Array(a-o),offset:o})}restorePickingColors(){const{pickingColors:t,instancePickingColors:r}=this.getAttributeManager().attributes,n=t||r;!n||(this.internalState.usesPickingColorCache&&n.value.buffer!==ao.buffer&&(n.value=ao.subarray(0,n.value.length)),n.updateSubBuffer({startOffset:0}))}_initialize(){vr(!this.internalState),vr(Number.isFinite(this.props.coordinateSystem)),Vr(oTt,this);const t=this._getAttributeManager();t&&t.addInstanced({instancePickingColors:{type:5121,size:3,noAlloc:!0,update:this.calculateInstancePickingColors}}),this.internalState=new nTt({attributeManager:t,layer:this}),this._clearChangeFlags(),this.state={},Object.defineProperty(this.state,"attributeManager",{get:()=>(Ht.deprecated("layer.state.attributeManager","layer.getAttributeManager()")(),t)}),this.internalState.layer=this,this.internalState.uniformTransitions=new A3t(this.context.timeline),this.internalState.onAsyncPropUpdated=this._onAsyncPropUpdated.bind(this),this.internalState.setAsyncProps(this.props),this.initializeState(this.context);for(const r of this.props.extensions)r.initializeState.call(this,this.context,r);this.setChangeFlags({dataChanged:"init",propsChanged:"init",viewportChanged:!0,extensionsChanged:!0}),this._update()}_transferState(t){Vr(lTt,this,this===t);const{state:r,internalState:n}=t;this!==t&&(this.internalState=n,this.internalState.layer=this,this.state=r,this.internalState.setAsyncProps(this.props),this._diffProps(this.props,this.internalState.getOldProps()))}_update(){const t=this.needsUpdate();if(Vr(aTt,this,t),!t)return;const r=this.props,n=this.context,i=this.internalState,o=n.viewport,a=this._updateUniformTransition();i.propsInTransition=a,n.viewport=i.viewport||o,this.props=a;try{const s=this._getUpdateParams(),l=this.getModels();if(n.gl)this.updateState(s);else try{this.updateState(s)}catch{}for(const c of this.props.extensions)c.updateState.call(this,s,c);const u=this.getModels()[0]!==l[0];this._postUpdate(s,u)}finally{n.viewport=o,this.props=r,this._clearChangeFlags(),i.needsUpdate=!1,i.resetOldProps()}}_finalize(){Vr(sTt,this),this.finalizeState(this.context);for(const t of this.props.extensions)t.finalizeState.call(this,t)}_drawLayer({moduleParameters:t=null,uniforms:r={},parameters:n={}}){this._updateAttributeTransition();const i=this.props,o=this.context;this.props=this.internalState.propsInTransition||i;const a=this.props.opacity;r.opacity=Math.pow(a,1/2.2);try{t&&this.setModuleParameters(t);const{getPolygonOffset:s}=this.props,l=s&&s(r)||[0,0];ba(o.gl,{polygonOffset:l}),oi(o.gl,n,()=>{const u={moduleParameters:t,uniforms:r,parameters:n,context:o};for(const c of this.props.extensions)c.draw.call(this,u,c);this.draw(u)})}finally{this.props=i}}getChangeFlags(){var t;return(t=this.internalState)===null||t===void 0?void 0:t.changeFlags}setChangeFlags(t){if(!this.internalState)return;const{changeFlags:r}=this.internalState;for(const i in t)if(t[i]){let o=!1;switch(i){case"dataChanged":const a=t[i],s=r[i];a&&Array.isArray(s)&&(r.dataChanged=Array.isArray(a)?s.concat(a):a,o=!0);default:r[i]||(r[i]=t[i],o=!0)}o&&Vr(iTt,this,i,t)}const n=Boolean(r.dataChanged||r.updateTriggersChanged||r.propsChanged||r.extensionsChanged);r.propsOrDataChanged=n,r.somethingChanged=n||r.viewportChanged||r.stateChanged}_clearChangeFlags(){this.internalState.changeFlags={dataChanged:!1,propsChanged:!1,updateTriggersChanged:!1,viewportChanged:!1,stateChanged:!1,extensionsChanged:!1,propsOrDataChanged:!1,somethingChanged:!1}}_diffProps(t,r){const n=x3t(t,r);if(n.updateTriggersChanged)for(const o in n.updateTriggersChanged)n.updateTriggersChanged[o]&&this.invalidateAttribute(o);if(n.transitionsChanged)for(const o in n.transitionsChanged){var i;this.internalState.uniformTransitions.add(o,r[o],t[o],(i=t.transitions)===null||i===void 0?void 0:i[o])}return this.setChangeFlags(n)}validateProps(){M3t(this.props)}updateAutoHighlight(t){this.props.autoHighlight&&!Number.isInteger(this.props.highlightedObjectIndex)&&this._updateAutoHighlight(t)}_updateAutoHighlight(t){const r={pickingSelectedColor:t.picked?t.color:null},{highlightColor:n}=this.props;t.picked&&typeof n=="function"&&(r.pickingHighlightColor=n(t)),this.setModuleParameters(r),this.setNeedsRedraw()}_getAttributeManager(){const t=this.context;return new T3t(t.gl,{id:this.props.id,stats:t.stats,timeline:t.timeline})}_postUpdate(t,r){const{props:n,oldProps:i}=t;this.setNeedsRedraw(),this._updateAttributes();const{model:o}=this.state;o==null||o.setInstanceCount(this.getNumInstances());const{autoHighlight:a,highlightedObjectIndex:s,highlightColor:l}=n;if(r||i.autoHighlight!==a||i.highlightedObjectIndex!==s||i.highlightColor!==l){const u={};a||(u.pickingSelectedColor=null),Array.isArray(l)&&(u.pickingHighlightColor=l),Number.isInteger(s)&&(u.pickingSelectedColor=Number.isFinite(s)&&s>=0?this.encodePickingColor(s):null),this.setModuleParameters(u)}}_getUpdateParams(){return{props:this.props,oldProps:this.internalState.getOldProps(),context:this.context,changeFlags:this.internalState.changeFlags}}_getNeedsRedraw(t){if(!this.internalState)return!1;let r=!1;r=r||this.internalState.needsRedraw&&this.id,this.internalState.needsRedraw=this.internalState.needsRedraw&&!t.clearRedrawFlags;const n=this.getAttributeManager(),i=n?n.getNeedsRedraw(t):!1;return r=r||i,r}_onAsyncPropUpdated(){this._diffProps(this.props,this.internalState.getOldProps()),this.setNeedsUpdate()}}P($o,"defaultProps",fTt);P($o,"layerName","Layer");const hTt="compositeLayer.renderLayers";class O_ extends $o{get isComposite(){return!0}get isLoaded(){return super.isLoaded&&this.getSubLayers().every(t=>t.isLoaded)}getSubLayers(){return this.internalState&&this.internalState.subLayers||[]}initializeState(t){}setState(t){super.setState(t),this.setNeedsUpdate()}getPickingInfo({info:t}){const{object:r}=t;return r&&r.__source&&r.__source.parent&&r.__source.parent.id===this.id&&(t.object=r.__source.object,t.index=r.__source.index),t}filterSubLayer(t){return!0}shouldRenderSubLayer(t,r){return r&&r.length}getSubLayerClass(t,r){const{_subLayerProps:n}=this.props;return n&&n[t]&&n[t].type||r}getSubLayerRow(t,r,n){return t.__source={parent:this,object:r,index:n},t}getSubLayerAccessor(t){if(typeof t=="function"){const r={index:-1,data:this.props.data,target:[]};return(n,i)=>n&&n.__source?(r.index=n.__source.index,t(n.__source.object,r)):t(n,i)}return t}getSubLayerProps(t={}){var r;const{opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:_,_subLayerProps:b}=this.props,w={id:"",updateTriggers:{},opacity:n,pickable:i,visible:o,parameters:a,getPolygonOffset:s,highlightedObjectIndex:l,autoHighlight:u,highlightColor:c,coordinateSystem:f,coordinateOrigin:h,wrapLongitude:d,positionFormat:p,modelMatrix:v,extensions:m,fetch:g,operation:_},T=b&&t.id&&b[t.id],S=T&&T.updateTriggers,k=t.id||"sublayer";if(T){const C=this.constructor._propTypes,E=t.type?t.type._propTypes:{};for(const M in T){const x=E[M]||C[M];x&&x.type==="accessor"&&(T[M]=this.getSubLayerAccessor(T[M]))}}Object.assign(w,t,T),w.id="".concat(this.props.id,"-").concat(k),w.updateTriggers={all:(r=this.props.updateTriggers)===null||r===void 0?void 0:r.all,...t.updateTriggers,...S};for(const C of m){const E=C.getSubLayerProps.call(this,C);E&&Object.assign(w,E,{updateTriggers:Object.assign(w.updateTriggers,E.updateTriggers)})}return w}_updateAutoHighlight(t){for(const r of this.getSubLayers())r.updateAutoHighlight(t)}_getAttributeManager(){return null}_postUpdate(t,r){let n=this.internalState.subLayers;const i=!n||this.needsUpdate();if(i){const o=this.renderLayers();n=M_(o,Boolean),this.internalState.subLayers=n}Vr(hTt,this,i,n);for(const o of n)o.parent=this}}P(O_,"layerName","CompositeLayer");const xv=Math.PI/180,cI=180/Math.PI,sm=6370972,Pc=256;function dTt(){const e=Pc/sm,t=Math.PI/180*Pc;return{unitsPerMeter:[e,e,e],unitsPerMeter2:[0,0,0],metersPerUnit:[1/e,1/e,1/e],unitsPerDegree:[t,t,e],unitsPerDegree2:[0,0,0],degreesPerUnit:[1/t,1/t,1/e]}}class pTt extends Fs{constructor(t={}){const{latitude:r=0,longitude:n=0,zoom:i=0,nearZMultiplier:o=.1,farZMultiplier:a=2,resolution:s=10}=t;let{height:l,altitude:u=1.5}=t;l=l||1,u=Math.max(.75,u);const c=new Hr().lookAt({eye:[0,-u,0],up:[0,0,1]}),f=Math.pow(2,i);c.rotateX(r*xv),c.rotateZ(-n*xv),c.scale(f/l);const h=Math.atan(.5/u),d=Pc*2*f/l;super({...t,height:l,viewMatrix:c,longitude:n,latitude:r,zoom:i,distanceScales:dTt(),fovyRadians:h*2,focalDistance:u,near:o,far:Math.min(2,1/d+1)*u*a}),P(this,"longitude",void 0),P(this,"latitude",void 0),P(this,"resolution",void 0),this.latitude=r,this.longitude=n,this.resolution=s}get projectionMode(){return xi.GLOBE}getDistanceScales(){return this.distanceScales}getBounds(t={}){const r={targetZ:t.z||0},n=this.unproject([0,this.height/2],r),i=this.unproject([this.width/2,0],r),o=this.unproject([this.width,this.height/2],r),a=this.unproject([this.width/2,this.height],r);return o[0]<this.longitude&&(o[0]+=360),n[0]>this.longitude&&(n[0]-=360),[Math.min(n[0],o[0],i[0],a[0]),Math.min(n[1],o[1],i[1],a[1]),Math.max(n[0],o[0],i[0],a[0]),Math.max(n[1],o[1],i[1],a[1])]}unproject(t,{topLeft:r=!0,targetZ:n}={}){const[i,o,a]=t,s=r?o:this.height-o,{pixelUnprojectionMatrix:l}=this;let u;if(Number.isFinite(a))u=Lb(l,[i,s,a,1]);else{const d=Lb(l,[i,s,-1,1]),p=Lb(l,[i,s,1,1]),v=((n||0)/sm+1)*Pc,m=yb(xz([],d,p)),g=yb(d),_=yb(p),b=(4*g*_-(m-g-_)**2)/16,w=4*b/m,T=Math.sqrt(g-w),S=Math.sqrt(Math.max(0,v*v-w)),k=(T-S)/Math.sqrt(m);u=Ayt([],d,p,k)}const[c,f,h]=this.unprojectPosition(u);return Number.isFinite(a)?[c,f,h]:Number.isFinite(n)?[c,f,n]:[c,f]}projectPosition(t){const[r,n,i=0]=t,o=r*xv,a=n*xv,s=Math.cos(a),l=(i/sm+1)*Pc;return[Math.sin(o)*s*l,-Math.cos(o)*s*l,Math.sin(a)*l]}unprojectPosition(t){const[r,n,i]=t,o=Lz(t),a=Math.asin(i/o),l=Math.atan2(r,-n)*cI,u=a*cI,c=(o/Pc-1)*sm;return[l,u,c]}projectFlat(t){return t}unprojectFlat(t){return t}panByPosition(t,r){const n=this.unproject(r);return{longitude:t[0]-n[0]+this.longitude,latitude:t[1]-n[1]+this.latitude}}}function Lb(e,t){const r=Ef([],t,e);return fE(r,r,1/r[3]),r}class wV{constructor(t){P(this,"opts",void 0),P(this,"typedArrayManager",void 0),P(this,"indexStarts",[0]),P(this,"vertexStarts",[0]),P(this,"vertexCount",0),P(this,"instanceCount",0),P(this,"attributes",void 0),P(this,"_attributeDefs",void 0),P(this,"data",void 0),P(this,"getGeometry",void 0),P(this,"geometryBuffer",void 0),P(this,"buffers",void 0),P(this,"positionSize",void 0),P(this,"normalize",void 0);const{attributes:r={}}=t;this.typedArrayManager=nf,this.attributes={},this._attributeDefs=r,this.opts=t,this.updateGeometry(t)}updateGeometry(t){Object.assign(this.opts,t);const{data:r,buffers:n={},getGeometry:i,geometryBuffer:o,positionFormat:a,dataChanged:s,normalize:l=!0}=this.opts;if(this.data=r,this.getGeometry=i,this.positionSize=o&&o.size||(a==="XY"?2:3),this.buffers=n,this.normalize=l,o&&(vr(r.startIndices),this.getGeometry=this.getGeometryFromBuffer(o),l||(n.positions=o)),this.geometryBuffer=n.positions,Array.isArray(s))for(const u of s)this._rebuildGeometry(u);else this._rebuildGeometry()}updatePartialGeometry({startRow:t,endRow:r}){this._rebuildGeometry({startRow:t,endRow:r})}getGeometryFromBuffer(t){const r=t.value||t;return ArrayBuffer.isView(r)?hV(r,{size:this.positionSize,offset:t.offset,stride:t.stride,startIndices:this.data.startIndices}):null}_allocate(t,r){const{attributes:n,buffers:i,_attributeDefs:o,typedArrayManager:a}=this;for(const s in o)if(s in i)a.release(n[s]),n[s]=null;else{const l=o[s];l.copy=r,n[s]=a.allocate(n[s],t,l)}}_forEachGeometry(t,r,n){const{data:i,getGeometry:o}=this,{iterable:a,objectInfo:s}=I_(i,r,n);for(const l of a){s.index++;const u=o?o(l,s):null;t(u,s.index)}}_rebuildGeometry(t){if(!this.data)return;let{indexStarts:r,vertexStarts:n,instanceCount:i}=this;const{data:o,geometryBuffer:a}=this,{startRow:s=0,endRow:l=1/0}=t||{},u={};if(t||(r=[0],n=[0]),this.normalize||!a)this._forEachGeometry((f,h)=>{const d=f&&this.normalizeGeometry(f);u[h]=d,n[h+1]=n[h]+(d?this.getGeometrySize(d):0)},s,l),i=n[n.length-1];else if(n=o.startIndices,i=n[o.length]||0,ArrayBuffer.isView(a))i=i||a.length/this.positionSize;else if(a instanceof Ee){const f=a.accessor.stride||this.positionSize*4;i=i||a.byteLength/f}else if(a.buffer){const f=a.stride||this.positionSize*4;i=i||a.buffer.byteLength/f}else if(a.value){const f=a.value,h=a.stride/f.BYTES_PER_ELEMENT||this.positionSize;i=i||f.length/h}this._allocate(i,Boolean(t)),this.indexStarts=r,this.vertexStarts=n,this.instanceCount=i;const c={};this._forEachGeometry((f,h)=>{const d=u[h]||f;c.vertexStart=n[h],c.indexStart=r[h];const p=h<n.length-1?n[h+1]:i;c.geometrySize=p-n[h],c.geometryIndex=h,this.updateGeometryAttributes(d,c)},s,l),this.vertexCount=r[r.length-1]}}const vTt=new Uint16Array([0,2,1,0,3,2]),gTt=new Float32Array([0,1,0,0,1,0,1,1]);function mTt(e,t){if(!t)return _Tt(e);const r=Math.max(Math.abs(e[0][0]-e[3][0]),Math.abs(e[1][0]-e[2][0])),n=Math.max(Math.abs(e[1][1]-e[0][1]),Math.abs(e[2][1]-e[3][1])),i=Math.ceil(r/t)+1,o=Math.ceil(n/t)+1,a=(i-1)*(o-1)*6,s=new Uint32Array(a),l=new Float32Array(i*o*2),u=new Float64Array(i*o*3);let c=0,f=0;for(let h=0;h<i;h++){const d=h/(i-1);for(let p=0;p<o;p++){const v=p/(o-1),m=yTt(e,d,v);u[c*3+0]=m[0],u[c*3+1]=m[1],u[c*3+2]=m[2]||0,l[c*2+0]=d,l[c*2+1]=1-v,h>0&&p>0&&(s[f++]=c-o,s[f++]=c-o-1,s[f++]=c-1,s[f++]=c-o,s[f++]=c-1,s[f++]=c),c++}}return{vertexCount:a,positions:u,indices:s,texCoords:l}}function _Tt(e){const t=new Float64Array(12);for(let r=0;r<e.length;r++)t[r*3+0]=e[r][0],t[r*3+1]=e[r][1],t[r*3+2]=e[r][2]||0;return{vertexCount:6,positions:t,indices:vTt,texCoords:gTt}}function yTt(e,t,r){return jl(jl(e[0],e[1],r),jl(e[3],e[2],r),t)}const bTt=`
#define SHADER_NAME bitmap-layer-vertex-shader

attribute vec2 texCoords;
attribute vec3 positions;
attribute vec3 positions64Low;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float coordinateConversion;

const vec3 pickingColor = vec3(1.0, 0.0, 0.0);

void main(void) {
  geometry.worldPosition = positions;
  geometry.uv = texCoords;
  geometry.pickingColor = pickingColor;

  gl_Position = project_position_to_clipspace(positions, positions64Low, vec3(0.0), geometry.position);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTexCoord = texCoords;

  if (coordinateConversion < -0.5) {
    vTexPos = geometry.position.xy + project_uCommonOrigin.xy;
  } else if (coordinateConversion > 0.5) {
    vTexPos = geometry.worldPosition.xy;
  }

  vec4 color = vec4(0.0);
  DECKGL_FILTER_COLOR(color, geometry);
}
`,wTt=`
vec3 packUVsIntoRGB(vec2 uv) {
  // Extract the top 8 bits. We want values to be truncated down so we can add a fraction
  vec2 uv8bit = floor(uv * 256.);

  // Calculate the normalized remainders of u and v parts that do not fit into 8 bits
  // Scale and clamp to 0-1 range
  vec2 uvFraction = fract(uv * 256.);
  vec2 uvFraction4bit = floor(uvFraction * 16.);

  // Remainder can be encoded in blue channel, encode as 4 bits for pixel coordinates
  float fractions = uvFraction4bit.x + uvFraction4bit.y * 16.;

  return vec3(uv8bit, fractions) / 255.;
}
`,STt=`
#define SHADER_NAME bitmap-layer-fragment-shader

#ifdef GL_ES
precision highp float;
#endif

uniform sampler2D bitmapTexture;

varying vec2 vTexCoord;
varying vec2 vTexPos;

uniform float desaturate;
uniform vec4 transparentColor;
uniform vec3 tintColor;
uniform float opacity;

uniform float coordinateConversion;
uniform vec4 bounds;

/* projection utils */
const float TILE_SIZE = 512.0;
const float PI = 3.1415926536;
const float WORLD_SCALE = TILE_SIZE / PI / 2.0;

// from degrees to Web Mercator
vec2 lnglat_to_mercator(vec2 lnglat) {
  float x = lnglat.x;
  float y = clamp(lnglat.y, -89.9, 89.9);
  return vec2(
    radians(x) + PI,
    PI + log(tan(PI * 0.25 + radians(y) * 0.5))
  ) * WORLD_SCALE;
}

// from Web Mercator to degrees
vec2 mercator_to_lnglat(vec2 xy) {
  xy /= WORLD_SCALE;
  return degrees(vec2(
    xy.x - PI,
    atan(exp(xy.y - PI)) * 2.0 - PI * 0.5
  ));
}
/* End projection utils */

// apply desaturation
vec3 color_desaturate(vec3 color) {
  float luminance = (color.r + color.g + color.b) * 0.333333333;
  return mix(color, vec3(luminance), desaturate);
}

// apply tint
vec3 color_tint(vec3 color) {
  return color * tintColor;
}

// blend with background color
vec4 apply_opacity(vec3 color, float alpha) {
  return mix(transparentColor, vec4(color, 1.0), alpha);
}

vec2 getUV(vec2 pos) {
  return vec2(
    (pos.x - bounds[0]) / (bounds[2] - bounds[0]),
    (pos.y - bounds[3]) / (bounds[1] - bounds[3])
  );
}

`.concat(wTt,`

void main(void) {
  vec2 uv = vTexCoord;
  if (coordinateConversion < -0.5) {
    vec2 lnglat = mercator_to_lnglat(vTexPos);
    uv = getUV(lnglat);
  } else if (coordinateConversion > 0.5) {
    vec2 commonPos = lnglat_to_mercator(vTexPos);
    uv = getUV(commonPos);
  }
  vec4 bitmapColor = texture2D(bitmapTexture, uv);

  gl_FragColor = apply_opacity(color_tint(color_desaturate(bitmapColor.rgb)), bitmapColor.a * opacity);

  geometry.uv = uv;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);

  if (picking_uActive) {
    // Since instance information is not used, we can use picking color for pixel index
    gl_FragColor.rgb = packUVsIntoRGB(uv);
  }
}
`),TTt={image:{type:"image",value:null,async:!0},bounds:{type:"array",value:[1,0,0,1],compare:!0},_imageCoordinateSystem:ce.DEFAULT,desaturate:{type:"number",min:0,max:1,value:0},transparentColor:{type:"color",value:[0,0,0,0]},tintColor:{type:"color",value:[255,255,255]}};class SE extends $o{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:bTt,fs:STt,modules:[wu,Su]})}initializeState(){const t=this.getAttributeManager();t.remove(["instancePickingColors"]);const r=!0;t.add({indices:{size:1,isIndexed:!0,update:n=>n.value=this.state.mesh.indices,noAlloc:r},positions:{size:3,type:5130,fp64:this.use64bitPositions(),update:n=>n.value=this.state.mesh.positions,noAlloc:r},texCoords:{size:2,update:n=>n.value=this.state.mesh.texCoords,noAlloc:r}})}updateState({props:t,oldProps:r,changeFlags:n}){const i=this.getAttributeManager();if(n.extensionsChanged){var o;const{gl:a}=this.context;(o=this.state.model)===null||o===void 0||o.delete(),this.state.model=this._getModel(a),i.invalidateAll()}if(t.bounds!==r.bounds){const a=this.state.mesh,s=this._createMesh();this.state.model.setVertexCount(s.vertexCount);for(const l in s)a&&a[l]!==s[l]&&i.invalidate(l);this.setState({mesh:s,...this._getCoordinateUniforms()})}else t._imageCoordinateSystem!==r._imageCoordinateSystem&&this.setState(this._getCoordinateUniforms())}getPickingInfo(t){const{image:r}=this.props,n=t.info;if(!n.color||!r)return n.bitmap=null,n;const{width:i,height:o}=r;n.index=0;const a=kTt(n.color),s=[Math.floor(a[0]*i),Math.floor(a[1]*o)];return n.bitmap={size:{width:i,height:o},uv:a,pixel:s},n}disablePickingIndex(){this.setState({disablePicking:!0})}restorePickingColors(){this.setState({disablePicking:!1})}_updateAutoHighlight(t){super._updateAutoHighlight({...t,color:this.encodePickingColor(0)})}_createMesh(){const{bounds:t}=this.props;let r=t;return fI(t)&&(r=[[t[0],t[1]],[t[0],t[3]],[t[2],t[3]],[t[2],t[1]]]),mTt(r,this.context.viewport.resolution)}_getModel(t){return t?new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:4,vertexCount:6}),isInstanced:!1}):null}draw(t){const{uniforms:r,moduleParameters:n}=t,{model:i,coordinateConversion:o,bounds:a,disablePicking:s}=this.state,{image:l,desaturate:u,transparentColor:c,tintColor:f}=this.props;n.pickingActive&&s||l&&i&&i.setUniforms(r).setUniforms({bitmapTexture:l,desaturate:u,transparentColor:c.map(h=>h/255),tintColor:f.slice(0,3).map(h=>h/255),coordinateConversion:o,bounds:a}).draw()}_getCoordinateUniforms(){const{LNGLAT:t,CARTESIAN:r,DEFAULT:n}=ce;let{_imageCoordinateSystem:i}=this.props;if(i!==n){const{bounds:o}=this.props;if(!fI(o))throw new Error("_imageCoordinateSystem only supports rectangular bounds");const a=this.context.viewport.resolution?t:r;if(i=i===t?t:r,i===t&&a===r)return{coordinateConversion:-1,bounds:o};if(i===r&&a===t){const s=Ns([o[0],o[1]]),l=Ns([o[2],o[3]]);return{coordinateConversion:1,bounds:[s[0],s[1],l[0],l[1]]}}}return{coordinateConversion:0,bounds:[0,0,0,0]}}}P(SE,"layerName","BitmapLayer");P(SE,"defaultProps",TTt);function kTt(e){const[t,r,n]=e,i=(n&240)/256,o=(n&15)/16;return[(t+o)/256,(r+i)/256]}function fI(e){return Number.isFinite(e[0])}const PTt=`#define SHADER_NAME icon-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute vec4 instanceIconFrames;
attribute float instanceColorModes;
attribute vec2 instanceOffsets;
attribute vec2 instancePixelOffset;

uniform float sizeScale;
uniform vec2 iconsTextureDim;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform bool billboard;
uniform int sizeUnits;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = angle * PI / 180.0;
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;

  vec2 iconSize = instanceIconFrames.zw;
  // convert size in meters to pixels, then scaled and clamp
 
  // project meters to pixels and clamp to limits 
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits), 
    sizeMinPixels, sizeMaxPixels
  );

  // scale icon height to match instanceSize
  float instanceScale = iconSize.y == 0.0 ? 0.0 : sizePixels / iconSize.y;

  // scale and rotate vertex in "pixel" value and convert back to fraction in clipspace
  vec2 pixelOffset = positions / 2.0 * iconSize + instanceOffsets;
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles) * instanceScale;
  pixelOffset += instancePixelOffset;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);

  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position); 
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  vTextureCoords = mix(
    instanceIconFrames.xy,
    instanceIconFrames.xy + iconSize,
    (positions.xy + 1.0) / 2.0
  ) / iconsTextureDim;

  vColor = instanceColors;
  DECKGL_FILTER_COLOR(vColor, geometry);

  vColorMode = instanceColorModes;
}
`,ETt=`#define SHADER_NAME icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float alphaCutoff;

varying float vColorMode;
varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  vec4 texColor = texture2D(iconsTexture, vTextureCoords);

  // if colorMode == 0, use pixel color from the texture
  // if colorMode == 1 or rendering picking buffer, use texture as transparency mask
  vec3 color = mix(texColor.rgb, vColor.rgb, vColorMode);
  // Take the global opacity and the alpha from vColor into account for the alpha component
  float a = texColor.a * opacity * vColor.a;

  if (a < alphaCutoff) {
    discard;
  }

  gl_FragColor = vec4(color, a);
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,CTt=1024,ATt=4,hI=()=>{},MTt={[10241]:9987,[10240]:9729,[10242]:33071,[10243]:33071};function xTt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function LTt(e,t,r,n){return r===t.width&&n===t.height?t:(e.canvas.height=n,e.canvas.width=r,e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t,0,0,t.width,t.height,0,0,r,n),e.canvas)}function mp(e){return e&&(e.id||e.url)}function ITt(e,t,r){const n=e.width,i=e.height,o=sz(e,{width:t,height:r});return Hmt(e,o,{targetY:0,width:n,height:i}),e.delete(),o}function dI(e,t,r){for(let n=0;n<t.length;n++){const{icon:i,xOffset:o}=t[n],a=mp(i);e[a]={...i,x:o,y:r}}}function OTt({icons:e,buffer:t,mapping:r={},xOffset:n=0,yOffset:i=0,rowHeight:o=0,canvasWidth:a}){let s=[];for(let l=0;l<e.length;l++){const u=e[l],c=mp(u);if(!r[c]){const{height:f,width:h}=u;n+h+t>a&&(dI(r,s,i),n=0,i=o+i+t,o=0,s=[]),s.push({icon:u,xOffset:n}),n=n+h+t,o=Math.max(o,f)}}return s.length>0&&dI(r,s,i),{mapping:r,rowHeight:o,xOffset:n,yOffset:i,canvasWidth:a,canvasHeight:xTt(o+i+t)}}function RTt(e,t,r){if(!e||!t)return null;r=r||{};const n={},{iterable:i,objectInfo:o}=I_(e);for(const a of i){o.index++;const s=t(a,o),l=mp(s);if(!s)throw new Error("Icon is missing.");if(!s.url)throw new Error("Icon url is missing.");!n[l]&&(!r[l]||s.url!==r[l].url)&&(n[l]={...s,source:a,sourceIndex:o.index})}return n}class DTt{constructor(t,{onUpdate:r=hI,onError:n=hI}){P(this,"gl",void 0),P(this,"onUpdate",void 0),P(this,"onError",void 0),P(this,"_loadOptions",null),P(this,"_texture",null),P(this,"_externalTexture",null),P(this,"_mapping",{}),P(this,"_textureParameters",null),P(this,"_pendingCount",0),P(this,"_autoPacking",!1),P(this,"_xOffset",0),P(this,"_yOffset",0),P(this,"_rowHeight",0),P(this,"_buffer",ATt),P(this,"_canvasWidth",CTt),P(this,"_canvasHeight",0),P(this,"_canvas",null),this.gl=t,this.onUpdate=r,this.onError=n}finalize(){var t;(t=this._texture)===null||t===void 0||t.delete()}getTexture(){return this._texture||this._externalTexture}getIconMapping(t){const r=this._autoPacking?mp(t):t;return this._mapping[r]||{}}setProps({loadOptions:t,autoPacking:r,iconAtlas:n,iconMapping:i,textureParameters:o}){if(t&&(this._loadOptions=t),r!==void 0&&(this._autoPacking=r),i&&(this._mapping=i),n){var a;(a=this._texture)===null||a===void 0||a.delete(),this._texture=null,this._externalTexture=n}o&&(this._textureParameters=o)}get isLoaded(){return this._pendingCount===0}packIcons(t,r){if(!this._autoPacking||typeof document>"u")return;const n=Object.values(RTt(t,r,this._mapping)||{});if(n.length>0){const{mapping:i,xOffset:o,yOffset:a,rowHeight:s,canvasHeight:l}=OTt({icons:n,buffer:this._buffer,canvasWidth:this._canvasWidth,mapping:this._mapping,rowHeight:this._rowHeight,xOffset:this._xOffset,yOffset:this._yOffset});this._rowHeight=s,this._mapping=i,this._xOffset=o,this._yOffset=a,this._canvasHeight=l,this._texture||(this._texture=new yn(this.gl,{width:this._canvasWidth,height:this._canvasHeight,parameters:this._textureParameters||MTt})),this._texture.height!==this._canvasHeight&&(this._texture=ITt(this._texture,this._canvasWidth,this._canvasHeight)),this.onUpdate(),this._canvas=this._canvas||document.createElement("canvas"),this._loadIcons(n)}}_loadIcons(t){const r=this._canvas.getContext("2d");for(const n of t)this._pendingCount++,o1(n.url,GB,this._loadOptions).then(i=>{const o=mp(n),{x:a,y:s,width:l,height:u}=this._mapping[o],c=LTt(r,i,l,u);this._texture.setSubImageData({data:c,x:a,y:s,width:l,height:u}),this._texture.generateMipmap(),this.onUpdate()}).catch(i=>{this.onError({url:n.url,source:n.source,sourceIndex:n.sourceIndex,loadOptions:this._loadOptions,error:i})}).finally(()=>{this._pendingCount--})}}const SV=[0,0,0,255],NTt={iconAtlas:{type:"image",value:null,async:!0},iconMapping:{type:"object",value:{},async:!0},sizeScale:{type:"number",value:1,min:0},billboard:!0,sizeUnits:"pixels",sizeMinPixels:{type:"number",min:0,value:0},sizeMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},alphaCutoff:{type:"number",value:.05,min:0,max:1},getPosition:{type:"accessor",value:e=>e.position},getIcon:{type:"accessor",value:e=>e.icon},getColor:{type:"accessor",value:SV},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},onIconError:{type:"function",value:null,compare:!1,optional:!0}};class Jp extends $o{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:PTt,fs:ETt,modules:[wu,Su]})}initializeState(){this.state={iconManager:new DTt(this.context.gl,{onUpdate:this._onUpdate.bind(this),onError:this._onError.bind(this)})},this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceOffsets:{size:2,accessor:"getIcon",transform:this.getInstanceOffset},instanceIconFrames:{size:4,accessor:"getIcon",transform:this.getInstanceIconFrame},instanceColorModes:{size:1,type:5121,accessor:"getIcon",transform:this.getInstanceColorMode},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:SV},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instancePixelOffset:{size:2,transition:!0,accessor:"getPixelOffset"}})}updateState(t){super.updateState(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager(),{iconAtlas:a,iconMapping:s,data:l,getIcon:u,textureParameters:c}=r,{iconManager:f}=this.state,h=a||this.internalState.isAsyncPropLoading("iconAtlas");if(f.setProps({loadOptions:r.loadOptions,autoPacking:!h,iconAtlas:a,iconMapping:h?s:null,textureParameters:c}),h?n.iconMapping!==r.iconMapping&&o.invalidate("getIcon"):(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getIcon))&&f.packIcons(l,u),i.extensionsChanged){var d;const{gl:p}=this.context;(d=this.state.model)===null||d===void 0||d.delete(),this.state.model=this._getModel(p),o.invalidateAll()}}get isLoaded(){return super.isLoaded&&this.state.iconManager.isLoaded}finalizeState(t){super.finalizeState(t),this.state.iconManager.finalize()}draw({uniforms:t}){const{sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,sizeUnits:o,billboard:a,alphaCutoff:s}=this.props,{iconManager:l}=this.state,u=l.getTexture();u&&this.state.model.setUniforms(t).setUniforms({iconsTexture:u,iconsTextureDim:[u.width,u.height],sizeUnits:Ds[o],sizeScale:r,sizeMinPixels:n,sizeMaxPixels:i,billboard:a,alphaCutoff:s}).draw()}_getModel(t){const r=[-1,-1,-1,1,1,1,1,-1];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:6,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}_onUpdate(){this.setNeedsRedraw()}_onError(t){var r;const n=(r=this.getCurrentLayer())===null||r===void 0?void 0:r.props.onIconError;n?n(t):Ht.error(t.error.message)()}getInstanceOffset(t){const{width:r,height:n,anchorX:i=r/2,anchorY:o=n/2}=this.state.iconManager.getIconMapping(t);return[r/2-i,n/2-o]}getInstanceColorMode(t){return this.state.iconManager.getIconMapping(t).mask?1:0}getInstanceIconFrame(t){const{x:r,y:n,width:i,height:o}=this.state.iconManager.getIconMapping(t);return[r,n,i,o]}}P(Jp,"defaultProps",NTt);P(Jp,"layerName","IconLayer");const FTt=`#define SHADER_NAME line-layer-vertex-shader

attribute vec3 positions;
attribute vec3 instanceSourcePositions;
attribute vec3 instanceTargetPositions;
attribute vec3 instanceSourcePositions64Low;
attribute vec3 instanceTargetPositions64Low;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;
attribute float instanceWidths;

uniform float opacity;
uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float useShortestPath;
uniform int widthUnits;

varying vec4 vColor;
varying vec2 uv;

// offset vector by strokeWidth pixels
// offset_direction is -1 (left) or 1 (right)
vec2 getExtrusionOffset(vec2 line_clipspace, float offset_direction, float width) {
  // normalized direction of the line
  vec2 dir_screenspace = normalize(line_clipspace * project_uViewportSize);
  // rotate by 90 degrees
  dir_screenspace = vec2(-dir_screenspace.y, dir_screenspace.x);

  return dir_screenspace * offset_direction * width / 2.0;
}

vec3 splitLine(vec3 a, vec3 b, float x) {
  float t = (x - a.x) / (b.x - a.x);
  return vec3(x, mix(a.yz, b.yz, t));
}

void main(void) {
  geometry.worldPosition = instanceSourcePositions;
  geometry.worldPositionAlt = instanceTargetPositions;

  vec3 source_world = instanceSourcePositions;
  vec3 target_world = instanceTargetPositions;
  vec3 source_world_64low = instanceSourcePositions64Low;
  vec3 target_world_64low = instanceTargetPositions64Low;

  if (useShortestPath > 0.5 || useShortestPath < -0.5) {
    source_world.x = mod(source_world.x + 180., 360.0) - 180.;
    target_world.x = mod(target_world.x + 180., 360.0) - 180.;
    float deltaLng = target_world.x - source_world.x;

    if (deltaLng * useShortestPath > 180.) {
      source_world.x += 360. * useShortestPath;
      source_world = splitLine(source_world, target_world, 180. * useShortestPath);
      source_world_64low = vec3(0.0);
    } else if (deltaLng * useShortestPath < -180.) {
      target_world.x += 360. * useShortestPath;
      target_world = splitLine(source_world, target_world, 180. * useShortestPath);
      target_world_64low = vec3(0.0);
    } else if (useShortestPath < 0.) {
      // Line is not split, abort
      gl_Position = vec4(0.);
      return;
    }
  }

  // Position
  vec4 source_commonspace;
  vec4 target_commonspace;
  vec4 source = project_position_to_clipspace(source_world, source_world_64low, vec3(0.), source_commonspace);
  vec4 target = project_position_to_clipspace(target_world, target_world_64low, vec3(0.), target_commonspace);
  
  // linear interpolation of source & target to pick right coord
  float segmentIndex = positions.x;
  vec4 p = mix(source, target, segmentIndex);
  geometry.position = mix(source_commonspace, target_commonspace, segmentIndex);
  uv = positions.xy;
  geometry.uv = uv;
  geometry.pickingColor = instancePickingColors;

  // Multiply out width and clamp to limits
  float widthPixels = clamp(
    project_size_to_pixel(instanceWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels
  );

  // extrude
  vec3 offset = vec3(
    getExtrusionOffset(target.xy - source.xy, positions.y, widthPixels),
    0.0);
  DECKGL_FILTER_SIZE(offset, geometry);
  gl_Position = p + vec4(project_pixel_size_to_clipspace(offset.xy), 0.0, 0.0);
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Color
  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,$Tt=`#define SHADER_NAME line-layer-fragment-shader

precision highp float;

varying vec4 vColor;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,BTt=[0,0,0,255],zTt={getSourcePosition:{type:"accessor",value:e=>e.sourcePosition},getTargetPosition:{type:"accessor",value:e=>e.targetPosition},getColor:{type:"accessor",value:BTt},getWidth:{type:"accessor",value:1},widthUnits:"pixels",widthScale:{type:"number",value:1,min:0},widthMinPixels:{type:"number",value:0,min:0},widthMaxPixels:{type:"number",value:Number.MAX_SAFE_INTEGER,min:0}};class TE extends $o{getShaders(){return super.getShaders({vs:FTt,fs:$Tt,modules:[wu,Su]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({instanceSourcePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getSourcePosition"},instanceTargetPositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getTargetPosition"},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:!0,accessor:"getColor",defaultValue:[0,0,0,255]},instanceWidths:{size:1,transition:!0,accessor:"getWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{widthUnits:r,widthScale:n,widthMinPixels:i,widthMaxPixels:o,wrapLongitude:a}=this.props;this.state.model.setUniforms(t).setUniforms({widthUnits:Ds[r],widthScale:n,widthMinPixels:i,widthMaxPixels:o,useShortestPath:a?1:0}).draw(),a&&this.state.model.setUniforms({useShortestPath:-1}).draw()}_getModel(t){const r=[0,-1,0,0,1,0,1,-1,0,1,1,0];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:5,attributes:{positions:new Float32Array(r)}}),isInstanced:!0})}}P(TE,"layerName","LineLayer");P(TE,"defaultProps",zTt);const VTt=`#define SHADER_NAME scatterplot-layer-vertex-shader

attribute vec3 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute float instanceRadius;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform float opacity;
uniform float radiusScale;
uniform float radiusMinPixels;
uniform float radiusMaxPixels;
uniform float lineWidthScale;
uniform float lineWidthMinPixels;
uniform float lineWidthMaxPixels;
uniform float stroked;
uniform bool filled;
uniform bool antialiasing;
uniform bool billboard;
uniform int radiusUnits;
uniform int lineWidthUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;


void main(void) {
  geometry.worldPosition = instancePositions;

  // Multiply out radius and clamp to limits
  outerRadiusPixels = clamp(
    project_size_to_pixel(radiusScale * instanceRadius, radiusUnits),
    radiusMinPixels, radiusMaxPixels
  );
  
  // Multiply out line width and clamp to limits
  float lineWidthPixels = clamp(
    project_size_to_pixel(lineWidthScale * instanceLineWidths, lineWidthUnits),
    lineWidthMinPixels, lineWidthMaxPixels
  );

  // outer radius needs to offset by half stroke width
  outerRadiusPixels += stroked * lineWidthPixels / 2.0;

  // Expand geometry to accomodate edge smoothing
  float edgePadding = antialiasing ? (outerRadiusPixels + SMOOTH_EDGE_RADIUS) / outerRadiusPixels : 1.0;

  // position on the containing square in [-1, 1] space
  unitPosition = edgePadding * positions.xy;
  geometry.uv = unitPosition;
  geometry.pickingColor = instancePickingColors;

  innerUnitRadius = 1.0 - stroked * lineWidthPixels / outerRadiusPixels;
  
  if (billboard) {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = edgePadding * positions * outerRadiusPixels;
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset = edgePadding * positions * project_pixel_size(outerRadiusPixels);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset, geometry.position);
  }

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,UTt=`#define SHADER_NAME scatterplot-layer-fragment-shader

precision highp float;

uniform bool filled;
uniform float stroked;
uniform bool antialiasing;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying vec2 unitPosition;
varying float innerUnitRadius;
varying float outerRadiusPixels;

void main(void) {
  geometry.uv = unitPosition;

  float distToCenter = length(unitPosition) * outerRadiusPixels;
  float inCircle = antialiasing ? 
    smoothedge(distToCenter, outerRadiusPixels) : 
    step(distToCenter, outerRadiusPixels);

  if (inCircle == 0.0) {
    discard;
  }

  if (stroked > 0.5) {
    float isLine = antialiasing ? 
      smoothedge(innerUnitRadius * outerRadiusPixels, distToCenter) :
      step(innerUnitRadius * outerRadiusPixels, distToCenter);

    if (filled) {
      gl_FragColor = mix(vFillColor, vLineColor, isLine);
    } else {
      if (isLine == 0.0) {
        discard;
      }
      gl_FragColor = vec4(vLineColor.rgb, vLineColor.a * isLine);
    }
  } else if (filled) {
    gl_FragColor = vFillColor;
  } else {
    discard;
  }

  gl_FragColor.a *= inCircle;
  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,pI=[0,0,0,255],WTt={radiusUnits:"meters",radiusScale:{type:"number",min:0,value:1},radiusMinPixels:{type:"number",min:0,value:0},radiusMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},lineWidthUnits:"meters",lineWidthScale:{type:"number",min:0,value:1},lineWidthMinPixels:{type:"number",min:0,value:0},lineWidthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},stroked:!1,filled:!0,billboard:!1,antialiasing:!0,getPosition:{type:"accessor",value:e=>e.position},getRadius:{type:"accessor",value:1},getFillColor:{type:"accessor",value:pI},getLineColor:{type:"accessor",value:pI},getLineWidth:{type:"accessor",value:1},strokeWidth:{deprecatedFor:"getLineWidth"},outline:{deprecatedFor:"stroked"},getColor:{deprecatedFor:["getFillColor","getLineColor"]}};class kE extends $o{getShaders(){return super.getShaders({vs:VTt,fs:UTt,modules:[wu,Su]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceRadius:{size:1,transition:!0,accessor:"getRadius",defaultValue:1},instanceFillColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:this.props.colorFormat.length,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){if(super.updateState(t),t.changeFlags.extensionsChanged){var r;const{gl:n}=this.context;(r=this.state.model)===null||r===void 0||r.delete(),this.state.model=this._getModel(n),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{radiusUnits:r,radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,stroked:a,filled:s,billboard:l,antialiasing:u,lineWidthUnits:c,lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}=this.props;this.state.model.setUniforms(t).setUniforms({stroked:a?1:0,filled:s,billboard:l,antialiasing:u,radiusUnits:Ds[r],radiusScale:n,radiusMinPixels:i,radiusMaxPixels:o,lineWidthUnits:Ds[c],lineWidthScale:f,lineWidthMinPixels:h,lineWidthMaxPixels:d}).draw()}_getModel(t){const r=[-1,-1,0,1,-1,0,1,1,0,-1,1,0];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:6,vertexCount:4,attributes:{positions:{size:3,value:new Float32Array(r)}}}),isInstanced:!0})}}P(kE,"defaultProps",WTt);P(kE,"layerName","ScatterplotLayer");const TV={CLOCKWISE:1,COUNTER_CLOCKWISE:-1};function kV(e,t,r={}){return GTt(e,r)!==t?(HTt(e,r),!0):!1}function GTt(e,t={}){return Math.sign(jTt(e,t))}function jTt(e,t={}){const{start:r=0,end:n=e.length}=t,i=t.size||2;let o=0;for(let a=r,s=n-i;a<n;a+=i)o+=(e[a]-e[s])*(e[a+1]+e[s+1]),s=a;return o/2}function HTt(e,t){const{start:r=0,end:n=e.length,size:i=2}=t,o=(n-r)/i,a=Math.floor(o/2);for(let s=0;s<a;++s){const l=r+s*i,u=r+(o-1-s)*i;for(let c=0;c<i;++c){const f=e[l+c];e[l+c]=e[u+c],e[u+c]=f}}}function Ii(e,t){const r=t.length,n=e.length;if(n>0){let i=!0;for(let o=0;o<r;o++)if(e[n-r+o]!==t[o]){i=!1;break}if(i)return!1}for(let i=0;i<r;i++)e[n+i]=t[i];return!0}function uT(e,t){const r=t.length;for(let n=0;n<r;n++)e[n]=t[n]}function _p(e,t,r,n,i=[]){const o=n+t*r;for(let a=0;a<r;a++)i[a]=e[o+a];return i}function cT(e,t,r,n,i=[]){let o,a;if(r&8)o=(n[3]-e[1])/(t[1]-e[1]),a=3;else if(r&4)o=(n[1]-e[1])/(t[1]-e[1]),a=1;else if(r&2)o=(n[2]-e[0])/(t[0]-e[0]),a=2;else if(r&1)o=(n[0]-e[0])/(t[0]-e[0]),a=0;else return null;for(let s=0;s<e.length;s++)i[s]=(a&1)===s?n[a]:o*(t[s]-e[s])+e[s];return i}function lm(e,t){let r=0;return e[0]<t[0]?r|=1:e[0]>t[2]&&(r|=2),e[1]<t[1]?r|=4:e[1]>t[3]&&(r|=8),r}function PV(e,t){const{size:r=2,broken:n=!1,gridResolution:i=10,gridOffset:o=[0,0],startIndex:a=0,endIndex:s=e.length}=t||{},l=(s-a)/r;let u=[];const c=[u],f=_p(e,0,r,a);let h,d;const p=CV(f,i,o,[]),v=[];Ii(u,f);for(let m=1;m<l;m++){for(h=_p(e,m,r,a,h),d=lm(h,p);d;){cT(f,h,d,p,v);const g=lm(v,p);g&&(cT(f,v,g,p,v),d=g),Ii(u,v),uT(f,v),YTt(p,i,d),n&&u.length>r&&(u=[],c.push(u),Ii(u,f)),d=lm(h,p)}Ii(u,h),uT(f,h)}return n?c:c[0]}const vI=0,XTt=1;function Lv(e,t){for(let r=0;r<t.length;r++)e.push(t[r]);return e}function EV(e,t=null,r){if(!e.length)return[];const{size:n=2,gridResolution:i=10,gridOffset:o=[0,0],edgeTypes:a=!1}=r||{},s=[],l=[{pos:e,types:a?new Array(e.length/n).fill(XTt):null,holes:t||[]}],u=[[],[]];let c=[];for(;l.length;){const{pos:f,types:h,holes:d}=l.shift();qTt(f,n,d[0]||f.length,u),c=CV(u[0],i,o,c);const p=lm(u[1],c);if(p){let v=gI(f,h,n,0,d[0]||f.length,c,p);const m={pos:v[0].pos,types:v[0].types,holes:[]},g={pos:v[1].pos,types:v[1].types,holes:[]};l.push(m,g);for(let _=0;_<d.length;_++)v=gI(f,h,n,d[_],d[_+1]||f.length,c,p),v[0]&&(m.holes.push(m.pos.length),m.pos=Lv(m.pos,v[0].pos),a&&(m.types=Lv(m.types,v[0].types))),v[1]&&(g.holes.push(g.pos.length),g.pos=Lv(g.pos,v[1].pos),a&&(g.types=Lv(g.types,v[1].types)))}else{const v={positions:f};a&&(v.edgeTypes=h),d.length&&(v.holeIndices=d),s.push(v)}}return s}function gI(e,t,r,n,i,o,a){const s=(i-n)/r,l=[],u=[],c=[],f=[],h=[];let d,p,v;const m=_p(e,s-1,r,n);let g=Math.sign(a&8?m[1]-o[3]:m[0]-o[2]),_=t&&t[s-1],b=0,w=0;for(let T=0;T<s;T++)d=_p(e,T,r,n,d),p=Math.sign(a&8?d[1]-o[3]:d[0]-o[2]),v=t&&t[n/r+T],p&&g&&g!==p&&(cT(m,d,a,o,h),Ii(l,h)&&c.push(_),Ii(u,h)&&f.push(_)),p<=0?(Ii(l,d)&&c.push(v),b-=p):c.length&&(c[c.length-1]=vI),p>=0?(Ii(u,d)&&f.push(v),w+=p):f.length&&(f[f.length-1]=vI),uT(m,d),g=p,_=v;return[b?{pos:l,types:t&&c}:null,w?{pos:u,types:t&&f}:null]}function CV(e,t,r,n){const i=Math.floor((e[0]-r[0])/t)*t+r[0],o=Math.floor((e[1]-r[1])/t)*t+r[1];return n[0]=i,n[1]=o,n[2]=i+t,n[3]=o+t,n}function YTt(e,t,r){r&8?(e[1]+=t,e[3]+=t):r&4?(e[1]-=t,e[3]-=t):r&2?(e[0]+=t,e[2]+=t):r&1&&(e[0]-=t,e[2]-=t)}function qTt(e,t,r,n){let i=1/0,o=-1/0,a=1/0,s=-1/0;for(let l=0;l<r;l+=t){const u=e[l],c=e[l+1];i=u<i?u:i,o=u>o?u:o,a=c<a?c:a,s=c>s?c:s}return n[0][0]=i,n[0][1]=a,n[1][0]=o,n[1][1]=s,n}const ZTt=85.051129;function KTt(e,t){const{size:r=2,startIndex:n=0,endIndex:i=e.length,normalize:o=!0}=t||{},a=e.slice(n,i);AV(a,r,0,i-n);const s=PV(a,{size:r,broken:!0,gridResolution:360,gridOffset:[-180,-180]});if(o)for(const l of s)MV(l,r);return s}function JTt(e,t=null,r){const{size:n=2,normalize:i=!0,edgeTypes:o=!1}=r||{};t=t||[];const a=[],s=[];let l=0,u=0;for(let f=0;f<=t.length;f++){const h=t[f]||e.length,d=u,p=QTt(e,n,l,h);for(let v=p;v<h;v++)a[u++]=e[v];for(let v=l;v<p;v++)a[u++]=e[v];AV(a,n,d,u),tkt(a,n,d,u,r==null?void 0:r.maxLatitude),l=h,s[f]=u}s.pop();const c=EV(a,s,{size:n,gridResolution:360,gridOffset:[-180,-180],edgeTypes:o});if(i)for(const f of c)MV(f.positions,n);return c}function QTt(e,t,r,n){let i=-1,o=-1;for(let a=r+1;a<n;a+=t){const s=Math.abs(e[a]);s>i&&(i=s,o=a-1)}return o}function tkt(e,t,r,n,i=ZTt){const o=e[r],a=e[n-t];if(Math.abs(o-a)>180){const s=_p(e,0,t,r);s[0]+=Math.round((a-o)/360)*360,Ii(e,s),s[1]=Math.sign(s[1])*i,Ii(e,s),s[0]=o,Ii(e,s)}}function AV(e,t,r,n){let i=e[0],o;for(let a=r;a<n;a+=t){o=e[a];const s=o-i;(s>180||s<-180)&&(o-=Math.round(s/360)*360),e[a]=i=o}}function MV(e,t){let r;const n=e.length/t;for(let o=0;o<n&&(r=e[o*t],(r+180)%360===0);o++);const i=-Math.round(r/360)*360;if(i!==0)for(let o=0;o<n;o++)e[o*t]+=i}function ekt(e,t,r,n){let i;if(Array.isArray(e[0])){const o=e.length*t;i=new Array(o);for(let a=0;a<e.length;a++)for(let s=0;s<t;s++)i[a*t+s]=e[a][s]||0}else i=e;return r?PV(i,{size:t,gridResolution:r}):n?KTt(i,{size:t}):i}const rkt=1,nkt=2,Ib=4;class ikt extends wV{constructor(t){super({...t,attributes:{positions:{size:3,padding:18,initialize:!0,type:t.fp64?Float64Array:Float32Array},segmentTypes:{size:1,type:Uint8ClampedArray}}})}get(t){return this.attributes[t]}getGeometryFromBuffer(t){return this.normalize?super.getGeometryFromBuffer(t):null}normalizeGeometry(t){return this.normalize?ekt(t,this.positionSize,this.opts.resolution,this.opts.wrapLongitude):t}getGeometrySize(t){if(mI(t)){let n=0;for(const i of t)n+=this.getGeometrySize(i);return n}const r=this.getPathLength(t);return r<2?0:this.isClosed(t)?r<3?0:r+2:r}updateGeometryAttributes(t,r){if(r.geometrySize!==0)if(t&&mI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i}else this._updateSegmentTypes(t,r),this._updatePositions(t,r)}_updateSegmentTypes(t,r){const n=this.attributes.segmentTypes,i=t?this.isClosed(t):!1,{vertexStart:o,geometrySize:a}=r;n.fill(0,o,o+a),i?(n[o]=Ib,n[o+a-2]=Ib):(n[o]+=rkt,n[o+a-2]+=nkt),n[o+a-1]=Ib}_updatePositions(t,r){const{positions:n}=this.attributes;if(!n||!t)return;const{vertexStart:i,geometrySize:o}=r,a=new Array(3);for(let s=i,l=0;l<o;s++,l++)this.getPointOnPath(t,l,a),n[s*3]=a[0],n[s*3+1]=a[1],n[s*3+2]=a[2]}getPathLength(t){return t.length/this.positionSize}getPointOnPath(t,r,n=[]){const{positionSize:i}=this;r*i>=t.length&&(r+=1-t.length/i);const o=r*i;return n[0]=t[o],n[1]=t[o+1],n[2]=i===3&&t[o+2]||0,n}isClosed(t){if(!this.normalize)return Boolean(this.opts.loop);const{positionSize:r}=this,n=t.length-r;return t[0]===t[n]&&t[1]===t[n+1]&&(r===2||t[2]===t[n+2])}}function mI(e){return Array.isArray(e[0])}const okt=`#define SHADER_NAME path-layer-vertex-shader

attribute vec2 positions;

attribute float instanceTypes;
attribute vec3 instanceStartPositions;
attribute vec3 instanceEndPositions;
attribute vec3 instanceLeftPositions;
attribute vec3 instanceRightPositions;
attribute vec3 instanceLeftPositions64Low;
attribute vec3 instanceStartPositions64Low;
attribute vec3 instanceEndPositions64Low;
attribute vec3 instanceRightPositions64Low;
attribute float instanceStrokeWidths;
attribute vec4 instanceColors;
attribute vec3 instancePickingColors;

uniform float widthScale;
uniform float widthMinPixels;
uniform float widthMaxPixels;
uniform float jointType;
uniform float capType;
uniform float miterLimit;
uniform bool billboard;
uniform int widthUnits;

uniform float opacity;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

const float EPSILON = 0.001;
const vec3 ZERO_OFFSET = vec3(0.0);

float flipIfTrue(bool flag) {
  return -(float(flag) * 2. - 1.);
}

// calculate line join positions
vec3 lineJoin(
  vec3 prevPoint, vec3 currPoint, vec3 nextPoint,
  vec2 width
) {
  bool isEnd = positions.x > 0.0;
  // side of the segment - -1: left, 0: center, 1: right
  float sideOfPath = positions.y;
  float isJoint = float(sideOfPath == 0.0);

  vec3 deltaA3 = (currPoint - prevPoint);
  vec3 deltaB3 = (nextPoint - currPoint);

  mat3 rotationMatrix;
  bool needsRotation = !billboard && project_needs_rotation(currPoint, rotationMatrix);
  if (needsRotation) {
    deltaA3 = deltaA3 * rotationMatrix;
    deltaB3 = deltaB3 * rotationMatrix;
  }
  vec2 deltaA = deltaA3.xy / width;
  vec2 deltaB = deltaB3.xy / width;

  float lenA = length(deltaA);
  float lenB = length(deltaB);

  vec2 dirA = lenA > 0. ? normalize(deltaA) : vec2(0.0, 0.0);
  vec2 dirB = lenB > 0. ? normalize(deltaB) : vec2(0.0, 0.0);

  vec2 perpA = vec2(-dirA.y, dirA.x);
  vec2 perpB = vec2(-dirB.y, dirB.x);

  // tangent of the corner
  vec2 tangent = dirA + dirB;
  tangent = length(tangent) > 0. ? normalize(tangent) : perpA;
  // direction of the corner
  vec2 miterVec = vec2(-tangent.y, tangent.x);
  // direction of the segment
  vec2 dir = isEnd ? dirA : dirB;
  // direction of the extrusion
  vec2 perp = isEnd ? perpA : perpB;
  // length of the segment
  float L = isEnd ? lenA : lenB;

  // A = angle of the corner
  float sinHalfA = abs(dot(miterVec, perp));
  float cosHalfA = abs(dot(dirA, miterVec));

  // -1: right, 1: left
  float turnDirection = flipIfTrue(dirA.x * dirB.y >= dirA.y * dirB.x);

  // relative position to the corner:
  // -1: inside (smaller side of the angle)
  // 0: center
  // 1: outside (bigger side of the angle)
  float cornerPosition = sideOfPath * turnDirection;

  float miterSize = 1.0 / max(sinHalfA, EPSILON);
  // trim if inside corner extends further than the line segment
  miterSize = mix(
    min(miterSize, max(lenA, lenB) / max(cosHalfA, EPSILON)),
    miterSize,
    step(0.0, cornerPosition)
  );

  vec2 offsetVec = mix(miterVec * miterSize, perp, step(0.5, cornerPosition))
    * (sideOfPath + isJoint * turnDirection);

  // special treatment for start cap and end cap
  bool isStartCap = lenA == 0.0 || (!isEnd && (instanceTypes == 1.0 || instanceTypes == 3.0));
  bool isEndCap = lenB == 0.0 || (isEnd && (instanceTypes == 2.0 || instanceTypes == 3.0));
  bool isCap = isStartCap || isEndCap;

  // extend out a triangle to envelope the round cap
  if (isCap) {
    offsetVec = mix(perp * sideOfPath, dir * capType * 4.0 * flipIfTrue(isStartCap), isJoint);
    vJointType = capType;
  } else {
    vJointType = jointType;
  }

  // Generate variables for fragment shader
  vPathLength = L;
  vCornerOffset = offsetVec;
  vMiterLength = dot(vCornerOffset, miterVec * turnDirection);
  vMiterLength = isCap ? isJoint : vMiterLength;

  vec2 offsetFromStartOfPath = vCornerOffset + deltaA * float(isEnd);
  vPathPosition = vec2(
    dot(offsetFromStartOfPath, perp),
    dot(offsetFromStartOfPath, dir)
  );
  geometry.uv = vPathPosition;

  float isValid = step(instanceTypes, 3.5);
  vec3 offset = vec3(offsetVec * width * isValid, 0.0);

  if (needsRotation) {
    offset = rotationMatrix * offset;
  }
  return currPoint + offset;
}

// In clipspace extrusion, if a line extends behind the camera, clip it to avoid visual artifacts
void clipLine(inout vec4 position, vec4 refPosition) {
  if (position.w < EPSILON) {
    float r = (EPSILON - refPosition.w) / (position.w - refPosition.w);
    position = refPosition + (position - refPosition) * r;
  }
}

void main() {
  geometry.pickingColor = instancePickingColors;

  vColor = vec4(instanceColors.rgb, instanceColors.a * opacity);

  float isEnd = positions.x;

  vec3 prevPosition = mix(instanceLeftPositions, instanceStartPositions, isEnd);
  vec3 prevPosition64Low = mix(instanceLeftPositions64Low, instanceStartPositions64Low, isEnd);

  vec3 currPosition = mix(instanceStartPositions, instanceEndPositions, isEnd);
  vec3 currPosition64Low = mix(instanceStartPositions64Low, instanceEndPositions64Low, isEnd);

  vec3 nextPosition = mix(instanceEndPositions, instanceRightPositions, isEnd);
  vec3 nextPosition64Low = mix(instanceEndPositions64Low, instanceRightPositions64Low, isEnd);

  geometry.worldPosition = currPosition;
  vec2 widthPixels = vec2(clamp(
    project_size_to_pixel(instanceStrokeWidths * widthScale, widthUnits),
    widthMinPixels, widthMaxPixels) / 2.0);
  vec3 width;

  if (billboard) {
    // Extrude in clipspace
    vec4 prevPositionScreen = project_position_to_clipspace(prevPosition, prevPosition64Low, ZERO_OFFSET);
    vec4 currPositionScreen = project_position_to_clipspace(currPosition, currPosition64Low, ZERO_OFFSET, geometry.position);
    vec4 nextPositionScreen = project_position_to_clipspace(nextPosition, nextPosition64Low, ZERO_OFFSET);

    clipLine(prevPositionScreen, currPositionScreen);
    clipLine(nextPositionScreen, currPositionScreen);
    clipLine(currPositionScreen, mix(nextPositionScreen, prevPositionScreen, isEnd));

    width = vec3(widthPixels, 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec3 pos = lineJoin(
      prevPositionScreen.xyz / prevPositionScreen.w,
      currPositionScreen.xyz / currPositionScreen.w,
      nextPositionScreen.xyz / nextPositionScreen.w,
      project_pixel_size_to_clipspace(width.xy)
    );

    gl_Position = vec4(pos * currPositionScreen.w, currPositionScreen.w);
  } else {
    // Extrude in commonspace
    prevPosition = project_position(prevPosition, prevPosition64Low);
    currPosition = project_position(currPosition, currPosition64Low);
    nextPosition = project_position(nextPosition, nextPosition64Low);

    width = vec3(project_pixel_size(widthPixels), 0.0);
    DECKGL_FILTER_SIZE(width, geometry);

    vec4 pos = vec4(
      lineJoin(prevPosition, currPosition, nextPosition, width.xy),
      1.0);
    geometry.position = pos;
    gl_Position = project_common_position_to_clipspace(pos);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,akt=`#define SHADER_NAME path-layer-fragment-shader

precision highp float;

uniform float miterLimit;

varying vec4 vColor;
varying vec2 vCornerOffset;
varying float vMiterLength;
/*
 * vPathPosition represents the relative coordinates of the current fragment on the path segment.
 * vPathPosition.x - position along the width of the path, between [-1, 1]. 0 is the center line.
 * vPathPosition.y - position along the length of the path, between [0, L / width].
 */
varying vec2 vPathPosition;
varying float vPathLength;
varying float vJointType;

void main(void) {
  geometry.uv = vPathPosition;

  if (vPathPosition.y < 0.0 || vPathPosition.y > vPathLength) {
    // if joint is rounded, test distance from the corner
    if (vJointType > 0.5 && length(vCornerOffset) > 1.0) {
      discard;
    }
    // trim miter
    if (vJointType < 0.5 && vMiterLength > miterLimit + 1.0) {
      discard;
    }
  }
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,xV=[0,0,0,255],skt={widthUnits:"meters",widthScale:{type:"number",min:0,value:1},widthMinPixels:{type:"number",min:0,value:0},widthMaxPixels:{type:"number",min:0,value:Number.MAX_SAFE_INTEGER},jointRounded:!1,capRounded:!1,miterLimit:{type:"number",min:0,value:4},billboard:!1,_pathType:null,getPath:{type:"accessor",value:e=>e.path},getColor:{type:"accessor",value:xV},getWidth:{type:"accessor",value:1},rounded:{deprecatedFor:["jointRounded","capRounded"]}},Ob={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class PE extends $o{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:okt,fs:akt,modules:[wu,Su]})}get wrapLongitude(){return!1}initializeState(){this.getAttributeManager().addInstanced({positions:{size:3,vertexOffset:1,type:5130,fp64:this.use64bitPositions(),transition:Ob,accessor:"getPath",update:this.calculatePositions,noAlloc:!0,shaderAttributes:{instanceLeftPositions:{vertexOffset:0},instanceStartPositions:{vertexOffset:1},instanceEndPositions:{vertexOffset:2},instanceRightPositions:{vertexOffset:3}}},instanceTypes:{size:1,type:5121,update:this.calculateSegmentTypes,noAlloc:!0},instanceStrokeWidths:{size:1,accessor:"getWidth",transition:Ob,defaultValue:1},instanceColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,accessor:"getColor",transition:Ob,defaultValue:xV},instancePickingColors:{size:3,type:5121,accessor:(n,{index:i,target:o})=>this.encodePickingColor(n&&n.__source?n.__source.index:i,o)}}),this.setState({pathTesselator:new ikt({fp64:this.use64bitPositions()})})}updateState(t){super.updateState(t);const{props:r,changeFlags:n}=t,i=this.getAttributeManager();if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPath)){const{pathTesselator:s}=this.state,l=r.data.attributes||{};s.updateGeometry({data:r.data,geometryBuffer:l.getPath,buffers:l,normalize:!r._pathType,loop:r._pathType==="loop",getGeometry:r.getPath,positionFormat:r.positionFormat,wrapLongitude:r.wrapLongitude,resolution:this.context.viewport.resolution,dataChanged:n.dataChanged}),this.setState({numInstances:s.instanceCount,startIndices:s.vertexStarts}),n.dataChanged||i.invalidateAll()}if(n.extensionsChanged){var a;const{gl:s}=this.context;(a=this.state.model)===null||a===void 0||a.delete(),this.state.model=this._getModel(s),i.invalidateAll()}}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{jointRounded:r,capRounded:n,billboard:i,miterLimit:o,widthUnits:a,widthScale:s,widthMinPixels:l,widthMaxPixels:u}=this.props;this.state.model.setUniforms(t).setUniforms({jointType:Number(r),capType:Number(n),billboard:i,widthUnits:Ds[a],widthScale:s,miterLimit:o,widthMinPixels:l,widthMaxPixels:u}).draw()}_getModel(t){const r=[0,1,2,1,4,2,1,3,4,3,5,4],n=[0,0,0,-1,0,1,1,-1,1,1,1,0];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:4,attributes:{indices:new Uint16Array(r),positions:{value:new Float32Array(n),size:2}}}),isInstanced:!0})}calculatePositions(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateSegmentTypes(t){const{pathTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("segmentTypes")}}P(PE,"defaultProps",skt);P(PE,"layerName","PathLayer");var EE={exports:{}};EE.exports=R_;EE.exports.default=R_;function R_(e,t,r){r=r||2;var n=t&&t.length,i=n?t[0]*r:e.length,o=LV(e,0,i,r,!0),a=[];if(!o||o.next===o.prev)return a;var s,l,u,c,f,h,d;if(n&&(o=hkt(e,t,o,r)),e.length>80*r){s=u=e[0],l=c=e[1];for(var p=r;p<i;p+=r)f=e[p],h=e[p+1],f<s&&(s=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);d=Math.max(u-s,c-l),d=d!==0?32767/d:0}return yp(o,a,r,s,l,d,0),a}function LV(e,t,r,n,i){var o,a;if(i===dT(e,t,r,n)>0)for(o=t;o<r;o+=n)a=_I(o,e[o],e[o+1],a);else for(o=r-n;o>=t;o-=n)a=_I(o,e[o],e[o+1],a);return a&&D_(a,a.next)&&(wp(a),a=a.next),a}function su(e,t){if(!e)return e;t||(t=e);var r=e,n;do if(n=!1,!r.steiner&&(D_(r,r.next)||Ue(r.prev,r,r.next)===0)){if(wp(r),r=t=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==t);return t}function yp(e,t,r,n,i,o,a){if(!!e){!a&&o&&mkt(e,n,i,o);for(var s=e,l,u;e.prev!==e.next;){if(l=e.prev,u=e.next,o?ukt(e,n,i,o):lkt(e)){t.push(l.i/r|0),t.push(e.i/r|0),t.push(u.i/r|0),wp(e),e=u.next,s=u.next;continue}if(e=u,e===s){a?a===1?(e=ckt(su(e),t,r),yp(e,t,r,n,i,o,2)):a===2&&fkt(e,t,r,n,i,o):yp(su(e),t,r,n,i,o,1);break}}}}function lkt(e){var t=e.prev,r=e,n=e.next;if(Ue(t,r,n)>=0)return!1;for(var i=t.x,o=r.x,a=n.x,s=t.y,l=r.y,u=n.y,c=i<o?i<a?i:a:o<a?o:a,f=s<l?s<u?s:u:l<u?l:u,h=i>o?i>a?i:a:o>a?o:a,d=s>l?s>u?s:u:l>u?l:u,p=n.next;p!==t;){if(p.x>=c&&p.x<=h&&p.y>=f&&p.y<=d&&Ec(i,s,o,l,a,u,p.x,p.y)&&Ue(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function ukt(e,t,r,n){var i=e.prev,o=e,a=e.next;if(Ue(i,o,a)>=0)return!1;for(var s=i.x,l=o.x,u=a.x,c=i.y,f=o.y,h=a.y,d=s<l?s<u?s:u:l<u?l:u,p=c<f?c<h?c:h:f<h?f:h,v=s>l?s>u?s:u:l>u?l:u,m=c>f?c>h?c:h:f>h?f:h,g=fT(d,p,t,r,n),_=fT(v,m,t,r,n),b=e.prevZ,w=e.nextZ;b&&b.z>=g&&w&&w.z<=_;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&Ec(s,c,l,f,u,h,b.x,b.y)&&Ue(b.prev,b,b.next)>=0||(b=b.prevZ,w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==a&&Ec(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0))return!1;w=w.nextZ}for(;b&&b.z>=g;){if(b.x>=d&&b.x<=v&&b.y>=p&&b.y<=m&&b!==i&&b!==a&&Ec(s,c,l,f,u,h,b.x,b.y)&&Ue(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;w&&w.z<=_;){if(w.x>=d&&w.x<=v&&w.y>=p&&w.y<=m&&w!==i&&w!==a&&Ec(s,c,l,f,u,h,w.x,w.y)&&Ue(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function ckt(e,t,r){var n=e;do{var i=n.prev,o=n.next.next;!D_(i,o)&&IV(i,n,n.next,o)&&bp(i,o)&&bp(o,i)&&(t.push(i.i/r|0),t.push(n.i/r|0),t.push(o.i/r|0),wp(n),wp(n.next),n=e=o),n=n.next}while(n!==e);return su(n)}function fkt(e,t,r,n,i,o){var a=e;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&bkt(a,s)){var l=OV(a,s);a=su(a,a.next),l=su(l,l.next),yp(a,t,r,n,i,o,0),yp(l,t,r,n,i,o,0);return}s=s.next}a=a.next}while(a!==e)}function hkt(e,t,r,n){var i=[],o,a,s,l,u;for(o=0,a=t.length;o<a;o++)s=t[o]*n,l=o<a-1?t[o+1]*n:e.length,u=LV(e,s,l,n,!1),u===u.next&&(u.steiner=!0),i.push(ykt(u));for(i.sort(dkt),o=0;o<i.length;o++)r=pkt(i[o],r);return r}function dkt(e,t){return e.x-t.x}function pkt(e,t){var r=vkt(e,t);if(!r)return t;var n=OV(r,e);return su(n,n.next),su(r,r.next)}function vkt(e,t){var r=t,n=e.x,i=e.y,o=-1/0,a;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var s=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(s<=n&&s>o&&(o=s,a=r.x<r.next.x?r:r.next,s===n))return a}r=r.next}while(r!==t);if(!a)return null;var l=a,u=a.x,c=a.y,f=1/0,h;r=a;do n>=r.x&&r.x>=u&&n!==r.x&&Ec(i<c?n:o,i,u,c,i<c?o:n,i,r.x,r.y)&&(h=Math.abs(i-r.y)/(n-r.x),bp(r,e)&&(h<f||h===f&&(r.x>a.x||r.x===a.x&&gkt(a,r)))&&(a=r,f=h)),r=r.next;while(r!==l);return a}function gkt(e,t){return Ue(e.prev,e,t.prev)<0&&Ue(t.next,e,e.next)<0}function mkt(e,t,r,n){var i=e;do i.z===0&&(i.z=fT(i.x,i.y,t,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,_kt(i)}function _kt(e){var t,r,n,i,o,a,s,l,u=1;do{for(r=e,e=null,o=null,a=0;r;){for(a++,n=r,s=0,t=0;t<u&&(s++,n=n.nextZ,!!n);t++);for(l=u;s>0||l>0&&n;)s!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,s--):(i=n,n=n.nextZ,l--),o?o.nextZ=i:e=i,i.prevZ=o,o=i;r=n}o.nextZ=null,u*=2}while(a>1);return e}function fT(e,t,r,n,i){return e=(e-r)*i|0,t=(t-n)*i|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function ykt(e){var t=e,r=e;do(t.x<r.x||t.x===r.x&&t.y<r.y)&&(r=t),t=t.next;while(t!==e);return r}function Ec(e,t,r,n,i,o,a,s){return(i-a)*(t-s)>=(e-a)*(o-s)&&(e-a)*(n-s)>=(r-a)*(t-s)&&(r-a)*(o-s)>=(i-a)*(n-s)}function bkt(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!wkt(e,t)&&(bp(e,t)&&bp(t,e)&&Skt(e,t)&&(Ue(e.prev,e,t.prev)||Ue(e,t.prev,t))||D_(e,t)&&Ue(e.prev,e,e.next)>0&&Ue(t.prev,t,t.next)>0)}function Ue(e,t,r){return(t.y-e.y)*(r.x-t.x)-(t.x-e.x)*(r.y-t.y)}function D_(e,t){return e.x===t.x&&e.y===t.y}function IV(e,t,r,n){var i=Ov(Ue(e,t,r)),o=Ov(Ue(e,t,n)),a=Ov(Ue(r,n,e)),s=Ov(Ue(r,n,t));return!!(i!==o&&a!==s||i===0&&Iv(e,r,t)||o===0&&Iv(e,n,t)||a===0&&Iv(r,e,n)||s===0&&Iv(r,t,n))}function Iv(e,t,r){return t.x<=Math.max(e.x,r.x)&&t.x>=Math.min(e.x,r.x)&&t.y<=Math.max(e.y,r.y)&&t.y>=Math.min(e.y,r.y)}function Ov(e){return e>0?1:e<0?-1:0}function wkt(e,t){var r=e;do{if(r.i!==e.i&&r.next.i!==e.i&&r.i!==t.i&&r.next.i!==t.i&&IV(r,r.next,e,t))return!0;r=r.next}while(r!==e);return!1}function bp(e,t){return Ue(e.prev,e,e.next)<0?Ue(e,t,e.next)>=0&&Ue(e,e.prev,t)>=0:Ue(e,t,e.prev)<0||Ue(e,e.next,t)<0}function Skt(e,t){var r=e,n=!1,i=(e.x+t.x)/2,o=(e.y+t.y)/2;do r.y>o!=r.next.y>o&&r.next.y!==r.y&&i<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==e);return n}function OV(e,t){var r=new hT(e.i,e.x,e.y),n=new hT(t.i,t.x,t.y),i=e.next,o=t.prev;return e.next=t,t.prev=e,r.next=i,i.prev=r,n.next=r,r.prev=n,o.next=n,n.prev=o,n}function _I(e,t,r,n){var i=new hT(e,t,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function wp(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function hT(e,t,r){this.i=e,this.x=t,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}R_.deviation=function(e,t,r,n){var i=t&&t.length,o=i?t[0]*r:e.length,a=Math.abs(dT(e,0,o,r));if(i)for(var s=0,l=t.length;s<l;s++){var u=t[s]*r,c=s<l-1?t[s+1]*r:e.length;a-=Math.abs(dT(e,u,c,r))}var f=0;for(s=0;s<n.length;s+=3){var h=n[s]*r,d=n[s+1]*r,p=n[s+2]*r;f+=Math.abs((e[h]-e[p])*(e[d+1]-e[h+1])-(e[h]-e[d])*(e[p+1]-e[h+1]))}return a===0&&f===0?0:Math.abs((f-a)/a)};function dT(e,t,r,n){for(var i=0,o=t,a=r-n;o<r;o+=n)i+=(e[a]-e[o])*(e[o+1]+e[a+1]),a=o;return i}R_.flatten=function(e){for(var t=e[0][0].length,r={vertices:[],holes:[],dimensions:t},n=0,i=0;i<e.length;i++){for(var o=0;o<e[i].length;o++)for(var a=0;a<t;a++)r.vertices.push(e[i][o][a]);i>0&&(n+=e[i-1].length,r.holes.push(n))}return r};const Rv=TV.CLOCKWISE,yI=TV.COUNTER_CLOCKWISE,_s={isClosed:!0};function Tkt(e){if(e=e&&e.positions||e,!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error("invalid polygon")}function nd(e){return"positions"in e?e.positions:e}function um(e){return"holeIndices"in e?e.holeIndices:null}function kkt(e){return Array.isArray(e[0])}function Pkt(e){return e.length>=1&&e[0].length>=2&&Number.isFinite(e[0][0])}function Ekt(e){const t=e[0],r=e[e.length-1];return t[0]===r[0]&&t[1]===r[1]&&t[2]===r[2]}function Ckt(e,t,r,n){for(let i=0;i<t;i++)if(e[r+i]!==e[n-t+i])return!1;return!0}function bI(e,t,r,n,i){let o=t;const a=r.length;for(let s=0;s<a;s++)for(let l=0;l<n;l++)e[o++]=r[s][l]||0;if(!Ekt(r))for(let s=0;s<n;s++)e[o++]=r[0][s]||0;return _s.start=t,_s.end=o,_s.size=n,kV(e,i,_s),o}function wI(e,t,r,n,i=0,o,a){o=o||r.length;const s=o-i;if(s<=0)return t;let l=t;for(let u=0;u<s;u++)e[l++]=r[i+u];if(!Ckt(r,n,i,o))for(let u=0;u<n;u++)e[l++]=r[i+u];return _s.start=t,_s.end=l,_s.size=n,kV(e,a,_s),l}function Akt(e,t){Tkt(e);const r=[],n=[];if("positions"in e){const{positions:i,holeIndices:o}=e;if(o){let a=0;for(let s=0;s<=o.length;s++)a=wI(r,a,i,t,o[s-1],o[s],s===0?Rv:yI),n.push(a);return n.pop(),{positions:r,holeIndices:n}}e=i}if(!kkt(e))return wI(r,0,e,t,0,r.length,Rv),r;if(!Pkt(e)){let i=0;for(const[o,a]of e.entries())i=bI(r,i,a,t,o===0?Rv:yI),n.push(i);return n.pop(),{positions:r,holeIndices:n}}return bI(r,0,e,t,Rv),r}function Mkt(e,t,r){let n=um(e);n&&(n=n.map(o=>o/t));let i=nd(e);if(r){const o=i.length;i=i.slice();const a=[];for(let s=0;s<o;s+=t){a[0]=i[s],a[1]=i[s+1];const l=r(a);i[s]=l[0],i[s+1]=l[1]}}return EE.exports(i,n,t)}class xkt extends wV{constructor(t){const{fp64:r,IndexType:n=Uint32Array}=t;super({...t,attributes:{positions:{size:3,type:r?Float64Array:Float32Array},vertexValid:{type:Uint8ClampedArray,size:1},indices:{type:n,size:1}}})}get(t){const{attributes:r}=this;return t==="indices"?r.indices&&r.indices.subarray(0,this.vertexCount):r[t]}updateGeometry(t){super.updateGeometry(t);const r=this.buffers.indices;if(r)this.vertexCount=(r.value||r).length;else if(this.data&&!this.getGeometry)throw new Error("missing indices buffer")}normalizeGeometry(t){if(this.normalize){const r=Akt(t,this.positionSize);return this.opts.resolution?EV(nd(r),um(r),{size:this.positionSize,gridResolution:this.opts.resolution,edgeTypes:!0}):this.opts.wrapLongitude?JTt(nd(r),um(r),{size:this.positionSize,maxLatitude:86,edgeTypes:!0}):r}return t}getGeometrySize(t){if(SI(t)){let r=0;for(const n of t)r+=this.getGeometrySize(n);return r}return nd(t).length/this.positionSize}getGeometryFromBuffer(t){return this.normalize||!this.buffers.indices?super.getGeometryFromBuffer(t):null}updateGeometryAttributes(t,r){if(t&&SI(t))for(const n of t){const i=this.getGeometrySize(n);r.geometrySize=i,this.updateGeometryAttributes(n,r),r.vertexStart+=i,r.indexStart=this.indexStarts[r.geometryIndex+1]}else this._updateIndices(t,r),this._updatePositions(t,r),this._updateVertexValid(t,r)}_updateIndices(t,{geometryIndex:r,vertexStart:n,indexStart:i}){const{attributes:o,indexStarts:a,typedArrayManager:s}=this;let l=o.indices;if(!l||!t)return;let u=i;const c=Mkt(t,this.positionSize,this.opts.preproject);l=s.allocate(l,i+c.length,{copy:!0});for(let f=0;f<c.length;f++)l[u++]=c[f]+n;a[r+1]=i+c.length,o.indices=l}_updatePositions(t,{vertexStart:r,geometrySize:n}){const{attributes:{positions:i},positionSize:o}=this;if(!i||!t)return;const a=nd(t);for(let s=r,l=0;l<n;s++,l++){const u=a[l*o],c=a[l*o+1],f=o>2?a[l*o+2]:0;i[s*3]=u,i[s*3+1]=c,i[s*3+2]=f}}_updateVertexValid(t,{vertexStart:r,geometrySize:n}){const{positionSize:i}=this,o=this.attributes.vertexValid,a=t&&um(t);if(t&&t.edgeTypes?o.set(t.edgeTypes,r):o.fill(1,r,r+n),a)for(let s=0;s<a.length;s++)o[r+a[s]/i-1]=0;o[r+n-1]=0}}function SI(e){return Array.isArray(e)&&e.length>0&&!Number.isFinite(e[0])}const RV=`
attribute vec2 vertexPositions;
attribute float vertexValid;

uniform bool extruded;
uniform bool isWireframe;
uniform float elevationScale;
uniform float opacity;

varying vec4 vColor;

struct PolygonProps {
  vec4 fillColors;
  vec4 lineColors;
  vec3 positions;
  vec3 nextPositions;
  vec3 pickingColors;
  vec3 positions64Low;
  vec3 nextPositions64Low;
  float elevations;
};

vec3 project_offset_normal(vec3 vector) {
  if (project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT ||
    project_uCoordinateSystem == COORDINATE_SYSTEM_LNGLAT_OFFSETS) {
    // normals generated by the polygon tesselator are in lnglat offsets instead of meters
    return normalize(vector * project_uCommonUnitsPerWorldUnit);
  }
  return project_normal(vector);
}

void calculatePosition(PolygonProps props) {
#ifdef IS_SIDE_VERTEX
  if(vertexValid < 0.5){
    gl_Position = vec4(0.);
    return;
  }
#endif

  vec3 pos;
  vec3 pos64Low;
  vec3 normal;
  vec4 colors = isWireframe ? props.lineColors : props.fillColors;

  geometry.worldPosition = props.positions;
  geometry.worldPositionAlt = props.nextPositions;
  geometry.pickingColor = props.pickingColors;

#ifdef IS_SIDE_VERTEX
  pos = mix(props.positions, props.nextPositions, vertexPositions.x);
  pos64Low = mix(props.positions64Low, props.nextPositions64Low, vertexPositions.x);
#else
  pos = props.positions;
  pos64Low = props.positions64Low;
#endif

  if (extruded) {
    pos.z += props.elevations * vertexPositions.y * elevationScale;
  }
  gl_Position = project_position_to_clipspace(pos, pos64Low, vec3(0.), geometry.position);

  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  if (extruded) {
  #ifdef IS_SIDE_VERTEX
    normal = vec3(
      props.positions.y - props.nextPositions.y + (props.positions64Low.y - props.nextPositions64Low.y),
      props.nextPositions.x - props.positions.x + (props.nextPositions64Low.x - props.positions64Low.x),
      0.0);
    normal = project_offset_normal(normal);
  #else
    normal = project_normal(vec3(0.0, 0.0, 1.0));
  #endif
    geometry.normal = normal;
    vec3 lightColor = lighting_getLightColor(colors.rgb, project_uCameraPosition, geometry.position.xyz, normal);
    vColor = vec4(lightColor, colors.a * opacity);
  } else {
    vColor = vec4(colors.rgb, colors.a * opacity);
  }
  DECKGL_FILTER_COLOR(vColor, geometry);
}
`,Lkt=`#define SHADER_NAME solid-polygon-layer-vertex-shader

attribute vec3 positions;
attribute vec3 positions64Low;
attribute float elevations;
attribute vec4 fillColors;
attribute vec4 lineColors;
attribute vec3 pickingColors;

`.concat(RV,`

void main(void) {
  PolygonProps props;

  props.positions = positions;
  props.positions64Low = positions64Low;
  props.elevations = elevations;
  props.fillColors = fillColors;
  props.lineColors = lineColors;
  props.pickingColors = pickingColors;

  calculatePosition(props);
}
`),Ikt=`#define SHADER_NAME solid-polygon-layer-vertex-shader-side
#define IS_SIDE_VERTEX


attribute vec3 instancePositions;
attribute vec3 nextPositions;
attribute vec3 instancePositions64Low;
attribute vec3 nextPositions64Low;
attribute float instanceElevations;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

`.concat(RV,`

void main(void) {
  PolygonProps props;

  #if RING_WINDING_ORDER_CW == 1
    props.positions = instancePositions;
    props.positions64Low = instancePositions64Low;
    props.nextPositions = nextPositions;
    props.nextPositions64Low = nextPositions64Low;
  #else
    props.positions = nextPositions;
    props.positions64Low = nextPositions64Low;
    props.nextPositions = instancePositions;
    props.nextPositions64Low = instancePositions64Low;
  #endif
  props.elevations = instanceElevations;
  props.fillColors = instanceFillColors;
  props.lineColors = instanceLineColors;
  props.pickingColors = instancePickingColors;

  calculatePosition(props);
}
`),Okt=`#define SHADER_NAME solid-polygon-layer-fragment-shader

precision highp float;

varying vec4 vColor;

void main(void) {
  gl_FragColor = vColor;

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,g1=[0,0,0,255],Rkt={filled:!0,extruded:!1,wireframe:!1,_normalize:!0,_windingOrder:"CW",elevationScale:{type:"number",min:0,value:1},getPolygon:{type:"accessor",value:e=>e.polygon},getElevation:{type:"accessor",value:1e3},getFillColor:{type:"accessor",value:g1},getLineColor:{type:"accessor",value:g1},material:!0},Dv={enter:(e,t)=>t.length?t.subarray(t.length-e.length):e};class CE extends $o{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(t){return super.getShaders({vs:t==="top"?Lkt:Ikt,fs:Okt,defines:{RING_WINDING_ORDER_CW:!this.props._normalize&&this.props._windingOrder==="CCW"?0:1},modules:[wu,G2t,Su]})}get wrapLongitude(){return!1}initializeState(){const{gl:t,viewport:r}=this.context;let{coordinateSystem:n}=this.props;r.isGeospatial&&n===ce.DEFAULT&&(n=ce.LNGLAT),this.setState({numInstances:0,polygonTesselator:new xkt({preproject:n===ce.LNGLAT&&r.projectFlat.bind(r),fp64:this.use64bitPositions(),IndexType:!t||nE(t,Be.ELEMENT_INDEX_UINT32)?Uint32Array:Uint16Array})});const i=this.getAttributeManager(),o=!0;i.remove(["instancePickingColors"]),i.add({indices:{size:1,isIndexed:!0,update:this.calculateIndices,noAlloc:o},positions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:Dv,accessor:"getPolygon",update:this.calculatePositions,noAlloc:o,shaderAttributes:{positions:{vertexOffset:0,divisor:0},instancePositions:{vertexOffset:0,divisor:1},nextPositions:{vertexOffset:1,divisor:1}}},vertexValid:{size:1,divisor:1,type:5121,update:this.calculateVertexValid,noAlloc:o},elevations:{size:1,transition:Dv,accessor:"getElevation",shaderAttributes:{elevations:{divisor:0},instanceElevations:{divisor:1}}},fillColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Dv,accessor:"getFillColor",defaultValue:g1,shaderAttributes:{fillColors:{divisor:0},instanceFillColors:{divisor:1}}},lineColors:{size:this.props.colorFormat.length,type:5121,normalized:!0,transition:Dv,accessor:"getLineColor",defaultValue:g1,shaderAttributes:{lineColors:{divisor:0},instanceLineColors:{divisor:1}}},pickingColors:{size:3,type:5121,accessor:(a,{index:s,target:l})=>this.encodePickingColor(a&&a.__source?a.__source.index:s,l),shaderAttributes:{pickingColors:{divisor:0},instancePickingColors:{divisor:1}}}})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n}=r,{data:i}=this.props;return i[0]&&i[0].__source&&(r.object=i.find(o=>o.__source.index===n)),r}disablePickingIndex(t){const{data:r}=this.props;if(r[0]&&r[0].__source)for(let n=0;n<r.length;n++)r[n].__source.index===t&&this._disablePickingIndex(n);else this._disablePickingIndex(t)}draw({uniforms:t}){const{extruded:r,filled:n,wireframe:i,elevationScale:o}=this.props,{topModel:a,sideModel:s,polygonTesselator:l}=this.state,u={...t,extruded:Boolean(r),elevationScale:o};s&&(s.setInstanceCount(l.instanceCount-1),s.setUniforms(u),i&&(s.setDrawMode(3),s.setUniforms({isWireframe:!0}).draw()),n&&(s.setDrawMode(6),s.setUniforms({isWireframe:!1}).draw())),a&&(a.setVertexCount(l.vertexCount),a.setUniforms(u).draw())}updateState(t){super.updateState(t),this.updateGeometry(t);const{props:r,oldProps:n,changeFlags:i}=t,o=this.getAttributeManager();if(i.extensionsChanged||r.filled!==n.filled||r.extruded!==n.extruded){var s;(s=this.state.models)===null||s===void 0||s.forEach(l=>l.delete()),this.setState(this._getModels(this.context.gl)),o.invalidateAll()}}updateGeometry({props:t,oldProps:r,changeFlags:n}){if(n.dataChanged||n.updateTriggersChanged&&(n.updateTriggersChanged.all||n.updateTriggersChanged.getPolygon)){const{polygonTesselator:o}=this.state,a=t.data.attributes||{};o.updateGeometry({data:t.data,normalize:t._normalize,geometryBuffer:a.getPolygon,buffers:a,getGeometry:t.getPolygon,positionFormat:t.positionFormat,wrapLongitude:t.wrapLongitude,resolution:this.context.viewport.resolution,fp64:this.use64bitPositions(),dataChanged:n.dataChanged}),this.setState({numInstances:o.instanceCount,startIndices:o.vertexStarts}),n.dataChanged||this.getAttributeManager().invalidateAll()}}_getModels(t){const{id:r,filled:n,extruded:i}=this.props;let o,a;if(n){const s=this.getShaders("top");s.defines.NON_INSTANCED_MODEL=1,o=new wa(t,{...s,id:"".concat(r,"-top"),drawMode:4,attributes:{vertexPositions:new Float32Array([0,1])},uniforms:{isWireframe:!1,isSideVertex:!1},vertexCount:0,isIndexed:!0})}return i&&(a=new wa(t,{...this.getShaders("side"),id:"".concat(r,"-side"),geometry:new bu({drawMode:1,vertexCount:4,attributes:{vertexPositions:{size:2,value:new Float32Array([1,0,0,0,0,1,1,1])}}}),instanceCount:0,isInstanced:1}),a.userData.excludeAttributes={indices:!0}),{models:[a,o].filter(Boolean),topModel:o,sideModel:a}}calculateIndices(t){const{polygonTesselator:r}=this.state;t.startIndices=r.indexStarts,t.value=r.get("indices")}calculatePositions(t){const{polygonTesselator:r}=this.state;t.startIndices=r.vertexStarts,t.value=r.get("positions")}calculateVertexValid(t){t.value=this.state.polygonTesselator.get("vertexValid")}}P(CE,"defaultProps",Rkt);P(CE,"layerName","SolidPolygonLayer");function Dkt({data:e,getIndex:t,dataRange:r,replace:n}){const{startRow:i=0,endRow:o=1/0}=r,a=e.length;let s=a,l=a;for(let h=0;h<a;h++){const d=t(e[h]);if(s>h&&d>=i&&(s=h),d>=o){l=h;break}}let u=s;const f=l-s!==n.length?e.slice(l):void 0;for(let h=0;h<n.length;h++)e[u++]=n[h];if(f){for(let h=0;h<f.length;h++)e[u++]=f[h];e.length=u}return{startRow:s,endRow:s+n.length}}function Nkt(e,t){if(!e)return null;const r="startIndices"in e?e.startIndices[t]:t,n=e.featureIds.value[r];return r!==-1?Fkt(e,n,r):null}function Fkt(e,t,r){const n={properties:{...e.properties[t]}};for(const i in e.numericProps)n.properties[i]=e.numericProps[i].value[r];return n}function $kt(e,t){const r={points:null,lines:null,polygons:null};for(const n in r){const i=e[n].globalFeatureIds.value;r[n]=new Uint8ClampedArray(i.length*3);const o=[];for(let a=0;a<i.length;a++)t(i[a],o),r[n][a*3+0]=o[0],r[n][a*3+1]=o[1],r[n][a*3+2]=o[2]}return r}const Bkt=`#define SHADER_NAME multi-icon-layer-fragment-shader

precision highp float;

uniform float opacity;
uniform sampler2D iconsTexture;
uniform float gamma;
uniform bool sdf;
uniform float alphaCutoff;
uniform float buffer;
uniform float outlineBuffer;
uniform vec4 outlineColor;

varying vec4 vColor;
varying vec2 vTextureCoords;
varying vec2 uv;

void main(void) {
  geometry.uv = uv;

  if (!picking_uActive) {
    float alpha = texture2D(iconsTexture, vTextureCoords).a;
    vec4 color = vColor;

    // if enable sdf (signed distance fields)
    if (sdf) {
      float distance = alpha;
      alpha = smoothstep(buffer - gamma, buffer + gamma, distance);

      if (outlineBuffer > 0.0) {
        float inFill = alpha;
        float inBorder = smoothstep(outlineBuffer - gamma, outlineBuffer + gamma, distance);
        color = mix(outlineColor, vColor, inFill);
        alpha = inBorder;
      }
    }

    // Take the global opacity and the alpha from color into account for the alpha component
    float a = alpha * color.a;
    
    if (a < alphaCutoff) {
      discard;
    }

    gl_FragColor = vec4(color.rgb, a * opacity);
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,TI=192/256,kI=[],zkt={getIconOffsets:{type:"accessor",value:e=>e.offsets},alphaCutoff:.001,smoothing:.1,outlineWidth:0,outlineColor:{type:"color",value:[0,0,0,255]}};class AE extends Jp{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return{...super.getShaders(),fs:Bkt}}initializeState(){super.initializeState(),this.getAttributeManager().addInstanced({instanceOffsets:{size:2,accessor:"getIconOffsets"},instancePickingColors:{type:5121,size:3,accessor:(r,{index:n,target:i})=>this.encodePickingColor(n,i)}})}updateState(t){super.updateState(t);const{props:r,oldProps:n}=t;let{outlineColor:i}=r;i!==n.outlineColor&&(i=i.map(o=>o/255),i[3]=Number.isFinite(i[3])?i[3]:1,this.setState({outlineColor:i})),!r.sdf&&r.outlineWidth&&Ht.warn("".concat(this.id,": fontSettings.sdf is required to render outline"))()}draw(t){const{sdf:r,smoothing:n,outlineWidth:i}=this.props,{outlineColor:o}=this.state;t.uniforms={...t.uniforms,buffer:TI,outlineBuffer:i?Math.max(n,TI*(1-i)):-1,gamma:n,sdf:Boolean(r),outlineColor:o},super.draw(t)}getInstanceOffset(t){return t?Array.from(t).flatMap(r=>super.getInstanceOffset(r)):kI}getInstanceColorMode(t){return 1}getInstanceIconFrame(t){return t?Array.from(t).flatMap(r=>super.getInstanceIconFrame(r)):kI}}P(AE,"defaultProps",zkt);P(AE,"layerName","MultiIconLayer");var ME={exports:{}};ME.exports=Qp;ME.exports.default=Qp;var Vc=1e20;function Qp(e,t,r,n,i,o){this.fontSize=e||24,this.buffer=t===void 0?3:t,this.cutoff=n||.25,this.fontFamily=i||"sans-serif",this.fontWeight=o||"normal",this.radius=r||8;var a=this.size=this.fontSize+this.buffer*2,s=a+this.buffer*2;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textAlign="left",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(s*s),this.gridInner=new Float64Array(s*s),this.f=new Float64Array(s),this.z=new Float64Array(s+1),this.v=new Uint16Array(s),this.useMetrics=this.ctx.measureText("A").actualBoundingBoxLeft!==void 0,this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function Vkt(e,t,r,n,i,o,a){o.fill(Vc,0,t*r),a.fill(0,0,t*r);for(var s=(t-n)/2,l=0;l<i;l++)for(var u=0;u<n;u++){var c=(l+s)*t+u+s,f=e.data[4*(l*n+u)+3]/255;if(f===1)o[c]=0,a[c]=Vc;else if(f===0)o[c]=Vc,a[c]=0;else{var h=Math.max(0,.5-f),d=Math.max(0,f-.5);o[c]=h*h,a[c]=d*d}}}function Ukt(e,t,r,n,i,o,a){for(var s=0;s<t*r;s++){var l=Math.sqrt(n[s])-Math.sqrt(i[s]);e[s]=Math.round(255-255*(l/o+a))}}Qp.prototype._draw=function(e,t){var r=this.ctx.measureText(e),n=r.width,i=2*this.buffer,o,a,s,l,u,c,f,h;t&&this.useMetrics?(u=Math.floor(r.actualBoundingBoxAscent),h=this.buffer+Math.ceil(r.actualBoundingBoxAscent),c=this.buffer,f=this.buffer,a=Math.min(this.size,Math.ceil(r.actualBoundingBoxRight-r.actualBoundingBoxLeft)),l=Math.min(this.size-c,Math.ceil(r.actualBoundingBoxAscent+r.actualBoundingBoxDescent)),o=a+i,s=l+i,this.ctx.textBaseline="alphabetic"):(o=a=this.size,s=l=this.size,u=19*this.fontSize/24,c=f=0,h=this.middle,this.ctx.textBaseline="middle");var d;a&&l&&(this.ctx.clearRect(f,c,a,l),this.ctx.fillText(e,this.buffer,h),d=this.ctx.getImageData(f,c,a,l));var p=new Uint8ClampedArray(o*s);return Vkt(d,o,s,a,l,this.gridOuter,this.gridInner),PI(this.gridOuter,o,s,this.f,this.v,this.z),PI(this.gridInner,o,s,this.f,this.v,this.z),Ukt(p,o,s,this.gridOuter,this.gridInner,this.radius,this.cutoff),{data:p,metrics:{width:a,height:l,sdfWidth:o,sdfHeight:s,top:u,left:0,advance:n}}};Qp.prototype.draw=function(e){return this._draw(e,!1).data};Qp.prototype.drawWithMetrics=function(e){return this._draw(e,!0)};function PI(e,t,r,n,i,o){for(var a=0;a<t;a++)EI(e,a,t,r,n,i,o);for(var s=0;s<r;s++)EI(e,s*t,1,t,n,i,o)}function EI(e,t,r,n,i,o,a){var s,l,u,c;for(o[0]=0,a[0]=-Vc,a[1]=Vc,s=0;s<n;s++)i[s]=e[t+s*r];for(s=1,l=0,u=0;s<n;s++){do c=o[l],u=(i[s]-i[c]+s*s-c*c)/(s-c)/2;while(u<=a[l]&&--l>-1);l++,o[l]=s,a[l]=u,a[l+1]=Vc}for(s=0,l=0;s<n;s++){for(;a[l+1]<s;)l++;c=o[l],e[t+s*r]=i[c]+(s-c)*(s-c)}}const Wkt=32,Gkt=[];function jkt(e){return Math.pow(2,Math.ceil(Math.log2(e)))}function Hkt({characterSet:e,getFontWidth:t,fontHeight:r,buffer:n,maxCanvasWidth:i,mapping:o={},xOffset:a=0,yOffset:s=0}){let l=0,u=a;for(const f of e)if(!o[f]){const h=t(f);u+h+n*2>i&&(u=0,l++),o[f]={x:u+n,y:s+l*(r+n*2)+n,width:h,height:r},u+=h+n*2}const c=r+n*2;return{mapping:o,xOffset:u,yOffset:s+l*c,canvasHeight:jkt(s+(l+1)*c)}}function DV(e,t,r,n){let i=0;for(let a=t;a<r;a++){var o;const s=e[a];i+=((o=n[s])===null||o===void 0?void 0:o.width)||0}return i}function NV(e,t,r,n,i,o){let a=t,s=0;for(let l=t;l<r;l++){const u=DV(e,l,l+1,i);s+u>n&&(a<l&&o.push(l),a=l,s=0),s+=u}return s}function Xkt(e,t,r,n,i,o){let a=t,s=t,l=t,u=0;for(let c=t;c<r;c++)if((e[c]===" "||e[c+1]===" "||c+1===r)&&(l=c+1),l>s){let f=DV(e,s,l,i);u+f>n&&(a<s&&(o.push(s),a=s,u=0),f>n&&(f=NV(e,s,l,n,i,o),a=o[o.length-1])),s=l,u+=f}return u}function Ykt(e,t,r,n,i=0,o){o===void 0&&(o=e.length);const a=[];return t==="break-all"?NV(e,i,o,r,n,a):Xkt(e,i,o,r,n,a),a}function qkt(e,t,r,n,i,o){let a=0,s=0;for(let l=t;l<r;l++){const u=e[l],c=n[u];c?(s||(s=c.height),i[l]=a+c.width/2,a+=c.width):(Ht.warn("Missing character: ".concat(u," (").concat(u.codePointAt(0),")"))(),i[l]=a,a+=Wkt)}o[0]=a,o[1]=s}function CI(e,t,r,n,i){const o=Array.from(e),a=o.length,s=new Array(a),l=new Array(a),u=new Array(a),c=(r==="break-word"||r==="break-all")&&isFinite(n)&&n>0,f=[0,0],h=[0,0];let d=0,p=0,v=0;for(let m=0;m<=a;m++){const g=o[m];if((g===`
`||m===a)&&(v=m),v>p){const _=c?Ykt(o,r,n,i,p,v):Gkt;for(let b=0;b<=_.length;b++){const w=b===0?p:_[b-1],T=b<_.length?_[b]:v;qkt(o,w,T,i,s,h);for(let S=w;S<T;S++)l[S]=d+h[1]/2,u[S]=h[0];d=d+h[1]*t,f[0]=Math.max(f[0],h[0])}p=v}g===`
`&&(s[p]=0,l[p]=0,u[p]=0,p++)}return f[1]=d,{x:s,y:l,rowWidth:u,size:f}}function Zkt({value:e,length:t,stride:r,offset:n,startIndices:i,characterSet:o}){const a=e.BYTES_PER_ELEMENT,s=r?r/a:1,l=n?n/a:0,u=i[t]||Math.ceil((e.length-l)/s),c=o&&new Set,f=new Array(t);let h=e;if(s>1||l>0){const d=e.constructor;h=new d(u);for(let p=0;p<u;p++)h[p]=e[p*s+l]}for(let d=0;d<t;d++){const p=i[d],v=i[d+1]||u,m=h.subarray(p,v);f[d]=String.fromCodePoint.apply(null,m),c&&m.forEach(c.add,c)}if(c)for(const d of c)o.add(String.fromCodePoint(d));return{texts:f,characterCount:u}}class FV{constructor(t=5){P(this,"limit",void 0),P(this,"_cache",{}),P(this,"_order",[]),this.limit=t}get(t){const r=this._cache[t];return r&&(this._deleteOrder(t),this._appendOrder(t)),r}set(t,r){this._cache[t]?(this.delete(t),this._cache[t]=r,this._appendOrder(t)):(Object.keys(this._cache).length===this.limit&&this.delete(this._order[0]),this._cache[t]=r,this._appendOrder(t))}delete(t){this._cache[t]&&(delete this._cache[t],this._deleteOrder(t))}_deleteOrder(t){const r=this._order.indexOf(t);r>=0&&this._order.splice(r,1)}_appendOrder(t){this._order.push(t)}}function Kkt(){const e=[];for(let t=32;t<128;t++)e.push(String.fromCharCode(t));return e}const Rd={fontFamily:"Monaco, monospace",fontWeight:"normal",characterSet:Kkt(),fontSize:64,buffer:4,sdf:!1,cutoff:.25,radius:12,smoothing:.1},AI=1024,Jkt=.9,MI=1.2,$V=3;let m1=new FV($V);function Qkt(e,t){let r;typeof t=="string"?r=new Set(Array.from(t)):r=new Set(t);const n=m1.get(e);if(!n)return r;for(const i in n.mapping)r.has(i)&&r.delete(i);return r}function tPt(e,t){for(let r=0;r<e.length;r++)t.data[4*r+3]=e[r]}function xI(e,t,r,n){e.font="".concat(n," ").concat(r,"px ").concat(t),e.fillStyle="#000",e.textBaseline="alphabetic",e.textAlign="left"}function ePt(e){Ht.assert(Number.isFinite(e)&&e>=$V,"Invalid cache limit"),m1=new FV(e)}class rPt{constructor(){P(this,"props",{...Rd}),P(this,"_key",void 0),P(this,"_atlas",void 0)}get texture(){return this._atlas}get mapping(){return this._atlas&&this._atlas.mapping}get scale(){return MI}setProps(t={}){Object.assign(this.props,t);const r=this._key;this._key=this._getKey();const n=Qkt(this._key,this.props.characterSet),i=m1.get(this._key);if(i&&n.size===0){this._key!==r&&(this._atlas=i);return}const o=this._generateFontAtlas(this._key,n,i);this._atlas=o,m1.set(this._key,o)}_generateFontAtlas(t,r,n){const{fontFamily:i,fontWeight:o,fontSize:a,buffer:s,sdf:l,radius:u,cutoff:c}=this.props;let f=n&&n.data;f||(f=document.createElement("canvas"),f.width=AI);const h=f.getContext("2d");xI(h,i,a,o);const{mapping:d,canvasHeight:p,xOffset:v,yOffset:m}=Hkt({getFontWidth:g=>h.measureText(g).width,fontHeight:a*MI,buffer:s,characterSet:r,maxCanvasWidth:AI,...n&&{mapping:n.mapping,xOffset:n.xOffset,yOffset:n.yOffset}});if(f.height!==p){const g=h.getImageData(0,0,f.width,f.height);f.height=p,h.putImageData(g,0,0)}if(xI(h,i,a,o),l){const g=new ME.exports(a,s,u,c,i,o),_=h.getImageData(0,0,g.size,g.size);for(const b of r)tPt(g.draw(b),_),h.putImageData(_,d[b].x-s,d[b].y+s)}else for(const g of r)h.fillText(g,d[g].x,d[g].y+a*Jkt);return{xOffset:v,yOffset:m,mapping:d,data:f,width:f.width,height:f.height}}_getKey(){const{fontFamily:t,fontWeight:r,fontSize:n,buffer:i,sdf:o,radius:a,cutoff:s}=this.props;return o?"".concat(t," ").concat(r," ").concat(n," ").concat(i," ").concat(a," ").concat(s):"".concat(t," ").concat(r," ").concat(n," ").concat(i)}}const nPt=`#define SHADER_NAME text-background-layer-vertex-shader

attribute vec2 positions;

attribute vec3 instancePositions;
attribute vec3 instancePositions64Low;
attribute vec4 instanceRects;
attribute float instanceSizes;
attribute float instanceAngles;
attribute vec2 instancePixelOffsets;
attribute float instanceLineWidths;
attribute vec4 instanceFillColors;
attribute vec4 instanceLineColors;
attribute vec3 instancePickingColors;

uniform bool billboard;
uniform float opacity;
uniform float sizeScale;
uniform float sizeMinPixels;
uniform float sizeMaxPixels;
uniform vec4 padding;
uniform int sizeUnits;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

vec2 rotate_by_angle(vec2 vertex, float angle) {
  float angle_radian = radians(angle);
  float cos_angle = cos(angle_radian);
  float sin_angle = sin(angle_radian);
  mat2 rotationMatrix = mat2(cos_angle, -sin_angle, sin_angle, cos_angle);
  return rotationMatrix * vertex;
}

void main(void) {
  geometry.worldPosition = instancePositions;
  geometry.uv = positions;
  geometry.pickingColor = instancePickingColors;
  uv = positions;
  vLineWidth = instanceLineWidths;

  // convert size in meters to pixels, then scaled and clamp

  // project meters to pixels and clamp to limits
  float sizePixels = clamp(
    project_size_to_pixel(instanceSizes * sizeScale, sizeUnits),
    sizeMinPixels, sizeMaxPixels
  );

  dimensions = instanceRects.zw * sizePixels + padding.xy + padding.zw;

  vec2 pixelOffset = (positions * instanceRects.zw + instanceRects.xy) * sizePixels + mix(-padding.xy, padding.zw, positions);
  pixelOffset = rotate_by_angle(pixelOffset, instanceAngles);
  pixelOffset += instancePixelOffsets;
  pixelOffset.y *= -1.0;

  if (billboard)  {
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, vec3(0.0), geometry.position);
    vec3 offset = vec3(pixelOffset, 0.0);
    DECKGL_FILTER_SIZE(offset, geometry);
    gl_Position.xy += project_pixel_size_to_clipspace(offset.xy);
  } else {
    vec3 offset_common = vec3(project_pixel_size(pixelOffset), 0.0);
    DECKGL_FILTER_SIZE(offset_common, geometry);
    gl_Position = project_position_to_clipspace(instancePositions, instancePositions64Low, offset_common, geometry.position);
  }
  DECKGL_FILTER_GL_POSITION(gl_Position, geometry);

  // Apply opacity to instance color, or return instance picking color
  vFillColor = vec4(instanceFillColors.rgb, instanceFillColors.a * opacity);
  DECKGL_FILTER_COLOR(vFillColor, geometry);
  vLineColor = vec4(instanceLineColors.rgb, instanceLineColors.a * opacity);
  DECKGL_FILTER_COLOR(vLineColor, geometry);
}
`,iPt=`#define SHADER_NAME text-background-layer-fragment-shader

precision highp float;

uniform bool stroked;

varying vec4 vFillColor;
varying vec4 vLineColor;
varying float vLineWidth;
varying vec2 uv;
varying vec2 dimensions;

void main(void) {
  geometry.uv = uv;

  vec2 pixelPosition = uv * dimensions;
  if (stroked) {
    float distToEdge = min(
      min(pixelPosition.x, dimensions.x - pixelPosition.x),
      min(pixelPosition.y, dimensions.y - pixelPosition.y)
    );
    float isBorder = smoothedge(distToEdge, vLineWidth);
    gl_FragColor = mix(vFillColor, vLineColor, isBorder);
  } else {
    gl_FragColor = vFillColor;
  }

  DECKGL_FILTER_COLOR(gl_FragColor, geometry);
}
`,oPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,padding:{type:"array",value:[0,0,0,0]},getPosition:{type:"accessor",value:e=>e.position},getSize:{type:"accessor",value:1},getAngle:{type:"accessor",value:0},getPixelOffset:{type:"accessor",value:[0,0]},getBoundingRect:{type:"accessor",value:[0,0,0,0]},getFillColor:{type:"accessor",value:[0,0,0,255]},getLineColor:{type:"accessor",value:[0,0,0,255]},getLineWidth:{type:"accessor",value:1}};class xE extends $o{constructor(...t){super(...t),P(this,"state",void 0)}getShaders(){return super.getShaders({vs:nPt,fs:iPt,modules:[wu,Su]})}initializeState(){this.getAttributeManager().addInstanced({instancePositions:{size:3,type:5130,fp64:this.use64bitPositions(),transition:!0,accessor:"getPosition"},instanceSizes:{size:1,transition:!0,accessor:"getSize",defaultValue:1},instanceAngles:{size:1,transition:!0,accessor:"getAngle"},instanceRects:{size:4,accessor:"getBoundingRect"},instancePixelOffsets:{size:2,transition:!0,accessor:"getPixelOffset"},instanceFillColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getFillColor",defaultValue:[0,0,0,255]},instanceLineColors:{size:4,transition:!0,normalized:!0,type:5121,accessor:"getLineColor",defaultValue:[0,0,0,255]},instanceLineWidths:{size:1,transition:!0,accessor:"getLineWidth",defaultValue:1}})}updateState(t){super.updateState(t);const{changeFlags:r}=t;if(r.extensionsChanged){var n;const{gl:i}=this.context;(n=this.state.model)===null||n===void 0||n.delete(),this.state.model=this._getModel(i),this.getAttributeManager().invalidateAll()}}draw({uniforms:t}){const{billboard:r,sizeScale:n,sizeUnits:i,sizeMinPixels:o,sizeMaxPixels:a,getLineWidth:s}=this.props;let{padding:l}=this.props;l.length<4&&(l=[l[0],l[1],l[0],l[1]]),this.state.model.setUniforms(t).setUniforms({billboard:r,stroked:Boolean(s),padding:l,sizeUnits:Ds[i],sizeScale:n,sizeMinPixels:o,sizeMaxPixels:a}).draw()}_getModel(t){const r=[0,0,1,0,1,1,0,1];return new wa(t,{...this.getShaders(),id:this.props.id,geometry:new bu({drawMode:6,vertexCount:4,attributes:{positions:{size:2,value:new Float32Array(r)}}}),isInstanced:!0})}}P(xE,"defaultProps",oPt);P(xE,"layerName","TextBackgroundLayer");const LI={start:1,middle:0,end:-1},II={top:1,center:0,bottom:-1},Rb=[0,0,0,255],aPt=1,sPt={billboard:!0,sizeScale:1,sizeUnits:"pixels",sizeMinPixels:0,sizeMaxPixels:Number.MAX_SAFE_INTEGER,background:!1,getBackgroundColor:{type:"accessor",value:[255,255,255,255]},getBorderColor:{type:"accessor",value:Rb},getBorderWidth:{type:"accessor",value:0},backgroundPadding:{type:"array",value:[0,0,0,0]},characterSet:{type:"object",value:Rd.characterSet},fontFamily:Rd.fontFamily,fontWeight:Rd.fontWeight,lineHeight:aPt,outlineWidth:{type:"number",value:0,min:0},outlineColor:{type:"color",value:Rb},fontSettings:{},wordBreak:"break-word",maxWidth:{type:"number",value:-1},getText:{type:"accessor",value:e=>e.text},getPosition:{type:"accessor",value:e=>e.position},getColor:{type:"accessor",value:Rb},getSize:{type:"accessor",value:32},getAngle:{type:"accessor",value:0},getTextAnchor:{type:"accessor",value:"middle"},getAlignmentBaseline:{type:"accessor",value:"center"},getPixelOffset:{type:"accessor",value:[0,0]},backgroundColor:{deprecatedFor:["background","getBackgroundColor"]}};class LE extends O_{constructor(...t){super(...t),P(this,"state",void 0),P(this,"getBoundingRect",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{size:[h,d]}=CI(f,l,a,s,i),p=LI[typeof u=="function"?u(r,n):u],v=II[typeof c=="function"?c(r,n):c];return[(p-1)*h/2,(v-1)*d/2,h,d]}),P(this,"getIconOffsets",(r,n)=>{const i=this.state.fontAtlasManager.mapping,o=this.state.getText,{wordBreak:a,maxWidth:s,lineHeight:l,getTextAnchor:u,getAlignmentBaseline:c}=this.props,f=o(r,n)||"",{x:h,y:d,rowWidth:p,size:[v,m]}=CI(f,l,a,s,i),g=LI[typeof u=="function"?u(r,n):u],_=II[typeof c=="function"?c(r,n):c],b=h.length,w=new Array(b*2);let T=0;for(let S=0;S<b;S++){const k=(1-g)*(v-p[S])/2;w[T++]=(g-1)*v/2+k+h[S],w[T++]=(_-1)*m/2+d[S]}return w})}initializeState(){this.state={styleVersion:0,fontAtlasManager:new rPt}}updateState(t){const{props:r,oldProps:n,changeFlags:i}=t;(i.dataChanged||i.updateTriggersChanged&&(i.updateTriggersChanged.all||i.updateTriggersChanged.getText))&&this._updateText(),(this._updateFontAtlas()||r.lineHeight!==n.lineHeight||r.wordBreak!==n.wordBreak||r.maxWidth!==n.maxWidth)&&this.setState({styleVersion:this.state.styleVersion+1})}getPickingInfo({info:t}){return t.object=t.index>=0?this.props.data[t.index]:null,t}_updateFontAtlas(){const{fontSettings:t,fontFamily:r,fontWeight:n}=this.props,{fontAtlasManager:i,characterSet:o}=this.state,a={...t,characterSet:o,fontFamily:r,fontWeight:n};if(!i.mapping)return i.setProps(a),!0;for(const s in a)if(a[s]!==i.props[s])return i.setProps(a),!0;return!1}_updateText(){var t;const{data:r,characterSet:n}=this.props,i=(t=r.attributes)===null||t===void 0?void 0:t.getText;let{getText:o}=this.props,a=r.startIndices,s;const l=n==="auto"&&new Set;if(i&&a){const{texts:u,characterCount:c}=Zkt({...ArrayBuffer.isView(i)?{value:i}:i,length:r.length,startIndices:a,characterSet:l});s=c,o=(f,{index:h})=>u[h]}else{const{iterable:u,objectInfo:c}=I_(r);a=[0],s=0;for(const f of u){c.index++;const h=Array.from(o(f,c)||"");l&&h.forEach(l.add,l),s+=h.length,a.push(s)}}this.setState({getText:o,startIndices:a,numInstances:s,characterSet:l||n})}renderLayers(){const{startIndices:t,numInstances:r,getText:n,fontAtlasManager:{scale:i,texture:o,mapping:a},styleVersion:s}=this.state,{data:l,_dataDiff:u,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,getBackgroundColor:v,getBorderColor:m,getBorderWidth:g,backgroundPadding:_,background:b,billboard:w,fontSettings:T,outlineWidth:S,outlineColor:k,sizeScale:C,sizeUnits:E,sizeMinPixels:M,sizeMaxPixels:x,transitions:D,updateTriggers:B}=this.props,V=this.getSubLayerClass("characters",AE),F=this.getSubLayerClass("background",xE);return[b&&new F({getFillColor:v,getLineColor:m,getLineWidth:g,padding:_,getPosition:c,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:C/this.state.fontAtlasManager.props.fontSize,sizeUnits:E,sizeMinPixels:M,sizeMaxPixels:x,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getSize:D.getSize,getFillColor:D.getBackgroundColor,getLineColor:D.getBorderColor,getLineWidth:D.getBorderWidth,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"background",updateTriggers:{getPosition:B.getPosition,getAngle:B.getAngle,getSize:B.getSize,getFillColor:B.getBackgroundColor,getLineColor:B.getBorderColor,getLineWidth:B.getBorderWidth,getPixelOffset:B.getPixelOffset,getBoundingRect:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l.attributes&&l.attributes.background?{length:l.length,attributes:l.attributes.background}:l,_dataDiff:u,autoHighlight:!1,getBoundingRect:this.getBoundingRect}),new V({sdf:T.sdf,smoothing:Number.isFinite(T.smoothing)?T.smoothing:Rd.smoothing,outlineWidth:S,outlineColor:k,iconAtlas:o,iconMapping:a,getPosition:c,getColor:f,getSize:h,getAngle:d,getPixelOffset:p,billboard:w,sizeScale:C*i,sizeUnits:E,sizeMinPixels:M*i,sizeMaxPixels:x*i,transitions:D&&{getPosition:D.getPosition,getAngle:D.getAngle,getColor:D.getColor,getSize:D.getSize,getPixelOffset:D.getPixelOffset}},this.getSubLayerProps({id:"characters",updateTriggers:{getIcon:B.getText,getPosition:B.getPosition,getAngle:B.getAngle,getColor:B.getColor,getSize:B.getSize,getPixelOffset:B.getPixelOffset,getIconOffsets:{getText:B.getText,getTextAnchor:B.getTextAnchor,getAlignmentBaseline:B.getAlignmentBaseline,styleVersion:s}}}),{data:l,_dataDiff:u,startIndices:t,numInstances:r,getIconOffsets:this.getIconOffsets,getIcon:n})]}static set fontAtlasCacheLimit(t){ePt(t)}}P(LE,"defaultProps",sPt);P(LE,"layerName","TextLayer");const cm={circle:{type:kE,props:{filled:"filled",stroked:"stroked",lineWidthMaxPixels:"lineWidthMaxPixels",lineWidthMinPixels:"lineWidthMinPixels",lineWidthScale:"lineWidthScale",lineWidthUnits:"lineWidthUnits",pointRadiusMaxPixels:"radiusMaxPixels",pointRadiusMinPixels:"radiusMinPixels",pointRadiusScale:"radiusScale",pointRadiusUnits:"radiusUnits",pointAntialiasing:"antialiasing",pointBillboard:"billboard",getFillColor:"getFillColor",getLineColor:"getLineColor",getLineWidth:"getLineWidth",getPointRadius:"getRadius"}},icon:{type:Jp,props:{iconAtlas:"iconAtlas",iconMapping:"iconMapping",iconSizeMaxPixels:"sizeMaxPixels",iconSizeMinPixels:"sizeMinPixels",iconSizeScale:"sizeScale",iconSizeUnits:"sizeUnits",iconAlphaCutoff:"alphaCutoff",iconBillboard:"billboard",getIcon:"getIcon",getIconAngle:"getAngle",getIconColor:"getColor",getIconPixelOffset:"getPixelOffset",getIconSize:"getSize"}},text:{type:LE,props:{textSizeMaxPixels:"sizeMaxPixels",textSizeMinPixels:"sizeMinPixels",textSizeScale:"sizeScale",textSizeUnits:"sizeUnits",textBackground:"background",textBackgroundPadding:"backgroundPadding",textFontFamily:"fontFamily",textFontWeight:"fontWeight",textLineHeight:"lineHeight",textMaxWidth:"maxWidth",textOutlineColor:"outlineColor",textOutlineWidth:"outlineWidth",textWordBreak:"wordBreak",textCharacterSet:"characterSet",textBillboard:"billboard",textFontSettings:"fontSettings",getText:"getText",getTextAngle:"getAngle",getTextColor:"getColor",getTextPixelOffset:"getPixelOffset",getTextSize:"getSize",getTextAnchor:"getTextAnchor",getTextAlignmentBaseline:"getAlignmentBaseline",getTextBackgroundColor:"getBackgroundColor",getTextBorderColor:"getBorderColor",getTextBorderWidth:"getBorderWidth"}}},fm={type:PE,props:{lineWidthUnits:"widthUnits",lineWidthScale:"widthScale",lineWidthMinPixels:"widthMinPixels",lineWidthMaxPixels:"widthMaxPixels",lineJointRounded:"jointRounded",lineCapRounded:"capRounded",lineMiterLimit:"miterLimit",lineBillboard:"billboard",getLineColor:"getColor",getLineWidth:"getWidth"}},pT={type:CE,props:{extruded:"extruded",filled:"filled",wireframe:"wireframe",elevationScale:"elevationScale",material:"material",getElevation:"getElevation",getFillColor:"getFillColor",getLineColor:"getLineColor"}};function Ph({type:e,props:t}){const r={};for(const n in t)r[n]=e.defaultProps[t[n]];return r}function Db(e,t){const{transitions:r,updateTriggers:n}=e.props,i={updateTriggers:{},transitions:r&&{getPosition:r.geometry}};for(const o in t){const a=t[o];let s=e.props[o];o.startsWith("get")&&(s=e.getSubLayerAccessor(s),i.updateTriggers[a]=n[o],r&&(i.transitions[a]=r[o])),i[a]=s}return i}function lPt(e){if(Array.isArray(e))return e;switch(Ht.assert(e.type,"GeoJSON does not have type"),e.type){case"Feature":return[e];case"FeatureCollection":return Ht.assert(Array.isArray(e.features),"GeoJSON does not have features array"),e.features;default:return[{geometry:e}]}}function OI(e,t,r={}){const n={pointFeatures:[],lineFeatures:[],polygonFeatures:[],polygonOutlineFeatures:[]},{startRow:i=0,endRow:o=e.length}=r;for(let a=i;a<o;a++){const s=e[a];Ht.assert(s&&s.geometry,"GeoJSON does not have geometry");const{geometry:l}=s;if(l.type==="GeometryCollection"){Ht.assert(Array.isArray(l.geometries),"GeoJSON does not have geometries array");const{geometries:u}=l;for(let c=0;c<u.length;c++){const f=u[c];RI(f,n,t,s,a)}}else RI(l,n,t,s,a)}return n}function RI(e,t,r,n,i){const{type:o,coordinates:a}=e,{pointFeatures:s,lineFeatures:l,polygonFeatures:u,polygonOutlineFeatures:c}=t;if(!cPt(o,a)){Ht.warn("".concat(o," coordinates are malformed"))();return}switch(o){case"Point":s.push(r({geometry:e},n,i));break;case"MultiPoint":a.forEach(f=>{s.push(r({geometry:{type:"Point",coordinates:f}},n,i))});break;case"LineString":l.push(r({geometry:e},n,i));break;case"MultiLineString":a.forEach(f=>{l.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"Polygon":u.push(r({geometry:e},n,i)),a.forEach(f=>{c.push(r({geometry:{type:"LineString",coordinates:f}},n,i))});break;case"MultiPolygon":a.forEach(f=>{u.push(r({geometry:{type:"Polygon",coordinates:f}},n,i)),f.forEach(h=>{c.push(r({geometry:{type:"LineString",coordinates:h}},n,i))})});break}}const uPt={Point:1,MultiPoint:2,LineString:2,MultiLineString:3,Polygon:3,MultiPolygon:4};function cPt(e,t){let r=uPt[e];for(Ht.assert(r,"Unknown GeoJSON type ".concat(e));t&&--r>0;)t=t[0];return t&&Number.isFinite(t[0])}function BV(){return{points:{},lines:{},polygons:{},polygonsOutline:{}}}function Nv(e){return e.geometry.coordinates}function fPt(e,t){const r=BV(),{pointFeatures:n,lineFeatures:i,polygonFeatures:o,polygonOutlineFeatures:a}=e;return r.points.data=n,r.points._dataDiff=t.pointFeatures&&(()=>t.pointFeatures),r.points.getPosition=Nv,r.lines.data=i,r.lines._dataDiff=t.lineFeatures&&(()=>t.lineFeatures),r.lines.getPath=Nv,r.polygons.data=o,r.polygons._dataDiff=t.polygonFeatures&&(()=>t.polygonFeatures),r.polygons.getPolygon=Nv,r.polygonsOutline.data=a,r.polygonsOutline._dataDiff=t.polygonOutlineFeatures&&(()=>t.polygonOutlineFeatures),r.polygonsOutline.getPath=Nv,r}function hPt(e,t){const r=BV(),{points:n,lines:i,polygons:o}=e,a=$kt(e,t);return r.points.data={length:n.positions.value.length/n.positions.size,attributes:{...n.attributes,getPosition:n.positions,instancePickingColors:{size:3,value:a.points}},properties:n.properties,numericProps:n.numericProps,featureIds:n.featureIds},r.lines.data={length:i.pathIndices.value.length-1,startIndices:i.pathIndices.value,attributes:{...i.attributes,getPath:i.positions,instancePickingColors:{size:3,value:a.lines}},properties:i.properties,numericProps:i.numericProps,featureIds:i.featureIds},r.lines._pathType="open",r.polygons.data={length:o.polygonIndices.value.length-1,startIndices:o.polygonIndices.value,attributes:{...o.attributes,getPolygon:o.positions,pickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygons._normalize=!1,o.triangles&&(r.polygons.data.attributes.indices=o.triangles.value),r.polygonsOutline.data={length:o.primitivePolygonIndices.value.length-1,startIndices:o.primitivePolygonIndices.value,attributes:{...o.attributes,getPath:o.positions,instancePickingColors:{size:3,value:a.polygons}},properties:o.properties,numericProps:o.numericProps,featureIds:o.featureIds},r.polygonsOutline._pathType="open",r}const dPt=["points","linestrings","polygons"],pPt={...Ph(cm.circle),...Ph(cm.icon),...Ph(cm.text),...Ph(fm),...Ph(pT),stroked:!0,filled:!0,extruded:!1,wireframe:!1,iconAtlas:{type:"object",value:null},iconMapping:{type:"object",value:{}},getIcon:{type:"accessor",value:e=>e.properties.icon},getText:{type:"accessor",value:e=>e.properties.text},pointType:"circle",getRadius:{deprecatedFor:"getPointRadius"}};class IE extends O_{initializeState(){this.state={layerProps:{},features:{}}}updateState({props:t,changeFlags:r}){if(!r.dataChanged)return;const{data:n}=this.props,i=n&&"points"in n&&"polygons"in n&&"lines"in n;this.setState({binary:i}),i?this._updateStateBinary({props:t,changeFlags:r}):this._updateStateJSON({props:t,changeFlags:r})}_updateStateBinary({props:t,changeFlags:r}){const n=hPt(t.data,this.encodePickingColor);this.setState({layerProps:n})}_updateStateJSON({props:t,changeFlags:r}){const n=lPt(t.data),i=this.getSubLayerRow.bind(this);let o={};const a={};if(Array.isArray(r.dataChanged)){const l=this.state.features;for(const u in l)o[u]=l[u].slice(),a[u]=[];for(const u of r.dataChanged){const c=OI(n,i,u);for(const f in l)a[f].push(Dkt({data:o[f],getIndex:h=>h.__source.index,dataRange:u,replace:c[f]}))}}else o=OI(n,i);const s=fPt(o,a);this.setState({features:o,featuresDiff:a,layerProps:s})}getPickingInfo(t){const r=super.getPickingInfo(t),{index:n,sourceLayer:i}=r;return r.featureType=dPt.find(o=>i.id.startsWith("".concat(this.id,"-").concat(o,"-"))),n>=0&&i.id.startsWith("".concat(this.id,"-points-text"))&&this.state.binary&&(r.index=this.props.data.points.globalFeatureIds.value[n]),r}_updateAutoHighlight(t){const r="".concat(this.id,"-points-"),n=t.featureType==="points";for(const i of this.getSubLayers())i.id.startsWith(r)===n&&i.updateAutoHighlight(t)}_renderPolygonLayer(){const{extruded:t,wireframe:r}=this.props,{layerProps:n}=this.state,i="polygons-fill",o=this.shouldRenderSubLayer(i,n.polygons.data)&&this.getSubLayerClass(i,pT.type);if(o){const a=Db(this,pT.props),s=t&&r;return s||delete a.getLineColor,a.updateTriggers.lineColors=s,new o(a,this.getSubLayerProps({id:i,updateTriggers:a.updateTriggers}),n.polygons)}return null}_renderLineLayers(){const{extruded:t,stroked:r}=this.props,{layerProps:n}=this.state,i="polygons-stroke",o="linestrings",a=!t&&r&&this.shouldRenderSubLayer(i,n.polygonsOutline.data)&&this.getSubLayerClass(i,fm.type),s=this.shouldRenderSubLayer(o,n.lines.data)&&this.getSubLayerClass(o,fm.type);if(a||s){const l=Db(this,fm.props);return[a&&new a(l,this.getSubLayerProps({id:i,updateTriggers:l.updateTriggers}),n.polygonsOutline),s&&new s(l,this.getSubLayerProps({id:o,updateTriggers:l.updateTriggers}),n.lines)]}return null}_renderPointLayers(){const{pointType:t}=this.props,{layerProps:r,binary:n}=this.state;let{highlightedObjectIndex:i}=this.props;!n&&Number.isFinite(i)&&(i=r.points.data.findIndex(s=>s.__source.index===i));const o=new Set(t.split("+")),a=[];for(const s of o){const l="points-".concat(s),u=cm[s],c=u&&this.shouldRenderSubLayer(l,r.points.data)&&this.getSubLayerClass(l,u.type);if(c){const f=Db(this,u.props);let h=r.points;if(s==="text"&&n){const{instancePickingColors:d,...p}=h.data.attributes;h={...h,data:{...h.data,attributes:p}}}a.push(new c(f,this.getSubLayerProps({id:l,updateTriggers:f.updateTriggers,highlightedObjectIndex:i}),h))}}return a}renderLayers(){const{extruded:t}=this.props,r=this._renderPolygonLayer(),n=this._renderLineLayers(),i=this._renderPointLayers();return[!t&&r,n,i,t&&r]}getSubLayerAccessor(t){const{binary:r}=this.state;return!r||typeof t!="function"?super.getSubLayerAccessor(t):(n,i)=>{const{data:o,index:a}=i,s=Nkt(o,a);return t(s,i)}}}P(IE,"layerName","GeoJsonLayer");P(IE,"defaultProps",pPt);class vPt{constructor(t){P(this,"index",void 0),P(this,"isVisible",void 0),P(this,"isSelected",void 0),P(this,"parent",void 0),P(this,"children",void 0),P(this,"content",void 0),P(this,"state",void 0),P(this,"layers",void 0),P(this,"id",void 0),P(this,"bbox",void 0),P(this,"zoom",void 0),P(this,"userData",void 0),P(this,"_abortController",void 0),P(this,"_loader",void 0),P(this,"_loaderId",void 0),P(this,"_isLoaded",void 0),P(this,"_isCancelled",void 0),P(this,"_needsReload",void 0),this.index=t,this.isVisible=!1,this.isSelected=!1,this.parent=null,this.children=[],this.content=null,this._loader=void 0,this._abortController=null,this._loaderId=0,this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1}get data(){return this.isLoading&&this._loader?this._loader.then(()=>this.data):this.content}get isLoaded(){return this._isLoaded&&!this._needsReload}get isLoading(){return Boolean(this._loader)&&!this._isCancelled}get needsReload(){return this._needsReload||this._isCancelled}get byteLength(){const t=this.content?this.content.byteLength:0;return Number.isFinite(t)||Ht.error("byteLength not defined in tile data")(),t}async _loadData({getData:t,requestScheduler:r,onLoad:n,onError:i}){const{index:o,id:a,bbox:s,userData:l,zoom:u}=this,c=this._loaderId;this._abortController=new AbortController;const{signal:f}=this._abortController,h=await r.scheduleRequest(this,v=>v.isSelected?1:-1);if(!h){this._isCancelled=!0;return}if(this._isCancelled){h.done();return}let d=null,p;try{d=await t({index:o,id:a,bbox:s,userData:l,zoom:u,signal:f})}catch(v){p=v||!0}finally{h.done()}if(c===this._loaderId){if(this._loader=void 0,this.content=d,this._isCancelled&&!d){this._isLoaded=!1;return}this._isLoaded=!0,this._isCancelled=!1,p?i(p,this):n(this)}}loadData(t){return this._isLoaded=!1,this._isCancelled=!1,this._needsReload=!1,this._loaderId++,this._loader=this._loadData(t),this._loader}setNeedsReload(){this.isLoading&&(this.abort(),this._loader=void 0),this._needsReload=!0}abort(){var t;this.isLoaded||(this._isCancelled=!0,(t=this._abortController)===null||t===void 0||t.abort())}}const Ur={OUTSIDE:-1,INTERSECTING:0,INSIDE:1},DI=new St,gPt=new St;class OE{constructor(t=[0,0,0],r=[0,0,0],n){P(this,"center",void 0),P(this,"halfDiagonal",void 0),P(this,"minimum",void 0),P(this,"maximum",void 0),n=n||DI.copy(t).add(r).scale(.5),this.center=new St(n),this.halfDiagonal=new St(r).subtract(this.center),this.minimum=new St(t),this.maximum=new St(r)}clone(){return new OE(this.minimum,this.maximum,this.center)}equals(t){return this===t||Boolean(t)&&this.minimum.equals(t.minimum)&&this.maximum.equals(t.maximum)}transform(t){return this.center.transformAsPoint(t),this.halfDiagonal.transform(t),this.minimum.transform(t),this.maximum.transform(t),this}intersectPlane(t){const{halfDiagonal:r}=this,n=gPt.from(t.normal),i=r.x*Math.abs(n.x)+r.y*Math.abs(n.y)+r.z*Math.abs(n.z),o=this.center.dot(n)+t.distance;return o-i>0?Ur.INSIDE:o+i<0?Ur.OUTSIDE:Ur.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=DI.from(t).subtract(this.center),{halfDiagonal:n}=this;let i=0,o;return o=Math.abs(r.x)-n.x,o>0&&(i+=o*o),o=Math.abs(r.y)-n.y,o>0&&(i+=o*o),o=Math.abs(r.z)-n.z,o>0&&(i+=o*o),i}}const Eh=new St,NI=new St;class RE{constructor(t=[0,0,0],r=0){P(this,"center",void 0),P(this,"radius",void 0),this.radius=-0,this.center=new St,this.fromCenterRadius(t,r)}fromCenterRadius(t,r){return this.center.from(t),this.radius=r,this}fromCornerPoints(t,r){return r=Eh.from(r),this.center=new St().from(t).add(r).scale(.5),this.radius=this.center.distance(r),this}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.radius===t.radius}clone(){return new RE(this.center,this.radius)}union(t){const r=this.center,n=this.radius,i=t.center,o=t.radius,a=Eh.copy(i).subtract(r),s=a.magnitude();if(n>=s+o)return this.clone();if(o>=s+n)return t.clone();const l=(n+s+o)*.5;return NI.copy(a).scale((-n+l)/s).add(r),this.center.copy(NI),this.radius=l,this}expand(t){const n=Eh.from(t).subtract(this.center).magnitude();return n>this.radius&&(this.radius=n),this}transform(t){this.center.transform(t);const r=Yyt(Eh,t);return this.radius=Math.max(r[0],Math.max(r[1],r[2]))*this.radius,this}distanceSquaredTo(t){const r=this.distanceTo(t);return r*r}distanceTo(t){const n=Eh.from(t).subtract(this.center);return Math.max(0,n.len()-this.radius)}intersectPlane(t){const r=this.center,n=this.radius,o=t.normal.dot(r)+t.distance;return o<-n?Ur.OUTSIDE:o<n?Ur.INTERSECTING:Ur.INSIDE}}const mPt=new St,_Pt=new St,Fv=new St,$v=new St,Bv=new St,yPt=new St,bPt=new St,qo={COLUMN0ROW0:0,COLUMN0ROW1:1,COLUMN0ROW2:2,COLUMN1ROW0:3,COLUMN1ROW1:4,COLUMN1ROW2:5,COLUMN2ROW0:6,COLUMN2ROW1:7,COLUMN2ROW2:8};class DE{constructor(t=[0,0,0],r=[0,0,0,0,0,0,0,0,0]){P(this,"center",void 0),P(this,"halfAxes",void 0),this.center=new St().from(t),this.halfAxes=new Mr(r)}get halfSize(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2);return[new St(t).len(),new St(r).len(),new St(n).len()]}get quaternion(){const t=this.halfAxes.getColumn(0),r=this.halfAxes.getColumn(1),n=this.halfAxes.getColumn(2),i=new St(t).normalize(),o=new St(r).normalize(),a=new St(n).normalize();return new PL().fromMatrix3(new Mr([...i,...o,...a]))}fromCenterHalfSizeQuaternion(t,r,n){const i=new PL(n),o=new Mr().fromQuaternion(i);return o[0]=o[0]*r[0],o[1]=o[1]*r[0],o[2]=o[2]*r[0],o[3]=o[3]*r[1],o[4]=o[4]*r[1],o[5]=o[5]*r[1],o[6]=o[6]*r[2],o[7]=o[7]*r[2],o[8]=o[8]*r[2],this.center=new St().from(t),this.halfAxes=o,this}clone(){return new DE(this.center,this.halfAxes)}equals(t){return this===t||Boolean(t)&&this.center.equals(t.center)&&this.halfAxes.equals(t.halfAxes)}getBoundingSphere(t=new RE){const r=this.halfAxes,n=r.getColumn(0,Fv),i=r.getColumn(1,$v),o=r.getColumn(2,Bv),a=mPt.copy(n).add(i).add(o);return t.center.copy(this.center),t.radius=a.magnitude(),t}intersectPlane(t){const r=this.center,n=t.normal,i=this.halfAxes,o=n.x,a=n.y,s=n.z,l=Math.abs(o*i[qo.COLUMN0ROW0]+a*i[qo.COLUMN0ROW1]+s*i[qo.COLUMN0ROW2])+Math.abs(o*i[qo.COLUMN1ROW0]+a*i[qo.COLUMN1ROW1]+s*i[qo.COLUMN1ROW2])+Math.abs(o*i[qo.COLUMN2ROW0]+a*i[qo.COLUMN2ROW1]+s*i[qo.COLUMN2ROW2]),u=n.dot(r)+t.distance;return u<=-l?Ur.OUTSIDE:u>=l?Ur.INSIDE:Ur.INTERSECTING}distanceTo(t){return Math.sqrt(this.distanceSquaredTo(t))}distanceSquaredTo(t){const r=_Pt.from(t).subtract(this.center),n=this.halfAxes,i=n.getColumn(0,Fv),o=n.getColumn(1,$v),a=n.getColumn(2,Bv),s=i.magnitude(),l=o.magnitude(),u=a.magnitude();i.normalize(),o.normalize(),a.normalize();let c=0,f;return f=Math.abs(r.dot(i))-s,f>0&&(c+=f*f),f=Math.abs(r.dot(o))-l,f>0&&(c+=f*f),f=Math.abs(r.dot(a))-u,f>0&&(c+=f*f),c}computePlaneDistances(t,r,n=[-0,-0]){let i=Number.POSITIVE_INFINITY,o=Number.NEGATIVE_INFINITY;const a=this.center,s=this.halfAxes,l=s.getColumn(0,Fv),u=s.getColumn(1,$v),c=s.getColumn(2,Bv),f=yPt.copy(l).add(u).add(c).add(a),h=bPt.copy(f).subtract(t);let d=r.dot(h);return i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),f.copy(a).add(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).add(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).add(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),a.copy(f).subtract(l).subtract(u).subtract(c),h.copy(f).subtract(t),d=r.dot(h),i=Math.min(d,i),o=Math.max(d,o),n[0]=i,n[1]=o,n}transform(t){this.center.transformAsPoint(t);const r=this.halfAxes.getColumn(0,Fv);r.transformAsPoint(t);const n=this.halfAxes.getColumn(1,$v);n.transformAsPoint(t);const i=this.halfAxes.getColumn(2,Bv);return i.transformAsPoint(t),this.halfAxes=new Mr([...r,...n,...i]),this}getTransform(){throw new Error("not implemented")}}const FI=new St,$I=new St;class of{constructor(t=[0,0,1],r=0){P(this,"normal",void 0),P(this,"distance",void 0),this.normal=new St,this.distance=-0,this.fromNormalDistance(t,r)}fromNormalDistance(t,r){return pp(Number.isFinite(r)),this.normal.from(t).normalize(),this.distance=r,this}fromPointNormal(t,r){t=FI.from(t),this.normal.from(r).normalize();const n=-this.normal.dot(t);return this.distance=n,this}fromCoefficients(t,r,n,i){return this.normal.set(t,r,n),pp(Ao(this.normal.len(),1)),this.distance=i,this}clone(){return new of(this.normal,this.distance)}equals(t){return Ao(this.distance,t.distance)&&Ao(this.normal,t.normal)}getPointDistance(t){return this.normal.dot(t)+this.distance}transform(t){const r=$I.copy(this.normal).transformAsVector(t).normalize(),n=this.normal.scale(-this.distance).transform(t);return this.fromPointNormal(n,r)}projectPointOntoPlane(t,r=[0,0,0]){t=FI.from(t);const n=this.getPointDistance(t),i=$I.copy(this.normal).scale(n);return t.subtract(i).to(r)}}const BI=[new St([1,0,0]),new St([0,1,0]),new St([0,0,1])],zI=new St,wPt=new St;new of(new St(1,0,0),0);class ca{constructor(t=[]){P(this,"planes",void 0),this.planes=t}fromBoundingSphere(t){this.planes.length=2*BI.length;const r=t.center,n=t.radius;let i=0;for(const o of BI){let a=this.planes[i],s=this.planes[i+1];a||(a=this.planes[i]=new of),s||(s=this.planes[i+1]=new of);const l=zI.copy(o).scale(-n).add(r);-o.dot(l),a.fromPointNormal(l,o);const u=zI.copy(o).scale(n).add(r),c=wPt.copy(o).negate();-c.dot(u),s.fromPointNormal(u,c),i+=2}return this}computeVisibility(t){let r=Ur.INSIDE;for(const n of this.planes)switch(t.intersectPlane(n)){case Ur.OUTSIDE:return Ur.OUTSIDE;case Ur.INTERSECTING:r=Ur.INTERSECTING;break}return r}computeVisibilityWithPlaneMask(t,r){if(pp(Number.isFinite(r),"parentPlaneMask is required."),r===ca.MASK_OUTSIDE||r===ca.MASK_INSIDE)return r;let n=ca.MASK_INSIDE;const i=this.planes;for(let o=0;o<this.planes.length;++o){const a=o<31?1<<o:0;if(o<31&&(r&a)===0)continue;const s=i[o],l=t.intersectPlane(s);if(l===Ur.OUTSIDE)return ca.MASK_OUTSIDE;l===Ur.INTERSECTING&&(n|=a)}return n}}P(ca,"MASK_OUTSIDE",4294967295);P(ca,"MASK_INSIDE",0);P(ca,"MASK_INDETERMINATE",2147483647);new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;new St;const mo=new Mr,SPt=new Mr,TPt=new Mr,zv=new Mr,VI=new Mr;function kPt(e,t={}){const r=$z.EPSILON20,n=10;let i=0,o=0;const a=SPt,s=TPt;a.identity(),s.copy(e);const l=r*PPt(s);for(;o<n&&EPt(s)>l;)CPt(s,zv),VI.copy(zv).transpose(),s.multiplyRight(zv),s.multiplyLeft(VI),a.multiplyRight(zv),++i>2&&(++o,i=0);return t.unitary=a.toTarget(t.unitary),t.diagonal=s.toTarget(t.diagonal),t}function PPt(e){let t=0;for(let r=0;r<9;++r){const n=e[r];t+=n*n}return Math.sqrt(t)}const vT=[1,0,0],gT=[2,2,1];function EPt(e){let t=0;for(let r=0;r<3;++r){const n=e[mo.getElementIndex(gT[r],vT[r])];t+=2*n*n}return Math.sqrt(t)}function CPt(e,t){const r=$z.EPSILON15;let n=0,i=1;for(let u=0;u<3;++u){const c=Math.abs(e[mo.getElementIndex(gT[u],vT[u])]);c>n&&(i=u,n=c)}const o=vT[i],a=gT[i];let s=1,l=0;if(Math.abs(e[mo.getElementIndex(a,o)])>r){const u=e[mo.getElementIndex(a,a)],c=e[mo.getElementIndex(o,o)],f=e[mo.getElementIndex(a,o)],h=(u-c)/2/f;let d;h<0?d=-1/(-h+Math.sqrt(1+h*h)):d=1/(h+Math.sqrt(1+h*h)),s=1/Math.sqrt(1+d*d),l=d*s}return Mr.IDENTITY.to(t),t[mo.getElementIndex(o,o)]=t[mo.getElementIndex(a,a)]=s,t[mo.getElementIndex(a,o)]=l,t[mo.getElementIndex(o,a)]=-l,t}const qa=new St,APt=new St,MPt=new St,xPt=new St,LPt=new St,IPt=new Mr,OPt={diagonal:new Mr,unitary:new Mr};function RPt(e,t=new DE){if(!e||e.length===0)return t.halfAxes=new Mr([0,0,0,0,0,0,0,0,0]),t.center=new St,t;const r=e.length,n=new St(0,0,0);for(const E of e)n.add(E);const i=1/r;n.multiplyByScalar(i);let o=0,a=0,s=0,l=0,u=0,c=0;for(const E of e){const M=qa.copy(E).subtract(n);o+=M.x*M.x,a+=M.x*M.y,s+=M.x*M.z,l+=M.y*M.y,u+=M.y*M.z,c+=M.z*M.z}o*=i,a*=i,s*=i,l*=i,u*=i,c*=i;const f=IPt;f[0]=o,f[1]=a,f[2]=s,f[3]=a,f[4]=l,f[5]=u,f[6]=s,f[7]=u,f[8]=c;const{unitary:h}=kPt(f,OPt),d=t.halfAxes.copy(h);let p=d.getColumn(0,MPt),v=d.getColumn(1,xPt),m=d.getColumn(2,LPt),g=-Number.MAX_VALUE,_=-Number.MAX_VALUE,b=-Number.MAX_VALUE,w=Number.MAX_VALUE,T=Number.MAX_VALUE,S=Number.MAX_VALUE;for(const E of e)qa.copy(E),g=Math.max(qa.dot(p),g),_=Math.max(qa.dot(v),_),b=Math.max(qa.dot(m),b),w=Math.min(qa.dot(p),w),T=Math.min(qa.dot(v),T),S=Math.min(qa.dot(m),S);p=p.multiplyByScalar(.5*(w+g)),v=v.multiplyByScalar(.5*(T+_)),m=m.multiplyByScalar(.5*(S+b)),t.center.copy(p).add(v).add(m);const k=APt.set(g-w,_-T,b-S).multiplyByScalar(.5),C=new Mr([k[0],0,0,0,k[1],0,0,0,k[2]]);return t.halfAxes.multiplyRight(C),t}const Cc=512,UI=3,zV=[[.5,.5],[0,0],[0,1],[1,0],[1,1]],VV=zV.concat([[0,.5],[.5,0],[1,.5],[.5,1]]),DPt=VV.concat([[.25,.5],[.75,.5]]);class Ac{constructor(t,r,n){P(this,"x",void 0),P(this,"y",void 0),P(this,"z",void 0),P(this,"childVisible",void 0),P(this,"selected",void 0),P(this,"_children",void 0),this.x=t,this.y=r,this.z=n}get children(){if(!this._children){const t=this.x*2,r=this.y*2,n=this.z+1;this._children=[new Ac(t,r,n),new Ac(t,r+1,n),new Ac(t+1,r,n),new Ac(t+1,r+1,n)]}return this._children}update(t){const{viewport:r,cullingVolume:n,elevationBounds:i,minZ:o,maxZ:a,bounds:s,offset:l,project:u}=t,c=this.getBoundingVolume(i,l,u);if(s&&!this.insideBounds(s)||n.computeVisibility(c)<0)return!1;if(!this.childVisible){let{z:h}=this;if(h<a&&h>=o){const d=c.distanceTo(r.cameraPosition)*r.scale/r.height;h+=Math.floor(Math.log2(d))}if(h>=a)return this.selected=!0,!0}this.selected=!1,this.childVisible=!0;for(const h of this.children)h.update(t);return!0}getSelected(t=[]){if(this.selected&&t.push(this),this._children)for(const r of this._children)r.getSelected(t);return t}insideBounds([t,r,n,i]){const o=Math.pow(2,this.z),a=Cc/o;return this.x*a<n&&this.y*a<i&&(this.x+1)*a>t&&(this.y+1)*a>r}getBoundingVolume(t,r,n){if(n){const l=this.z<1?DPt:this.z<2?VV:zV,u=[];for(const c of l){const f=mT(this.x+c[0],this.y+c[1],this.z);f[2]=t[0],u.push(n(f)),t[0]!==t[1]&&(f[2]=t[1],u.push(n(f)))}return RPt(u)}const i=Math.pow(2,this.z),o=Cc/i,a=this.x*o+r*Cc,s=Cc-(this.y+1)*o;return new OE([a,s,t[0]],[a+o,s+o,t[1]])}}function NPt(e,t,r,n){const i=e instanceof pTt&&e.resolution?e.projectPosition:null,o=Object.values(e.getFrustumPlanes()).map(({normal:d,distance:p})=>new of(d.clone().negate(),p)),a=new ca(o),s=e.distanceScales.unitsPerMeter[2],l=r&&r[0]*s||0,u=r&&r[1]*s||0,c=e instanceof Ro&&e.pitch<=60?t:0;if(n){const[d,p,v,m]=n,g=Ns([d,m]),_=Ns([v,p]);n=[g[0],Cc-g[1],_[0],Cc-_[1]]}const f=new Ac(0,0,0),h={viewport:e,project:i,cullingVolume:a,elevationBounds:[l,u],minZ:c,maxZ:t,bounds:n,offset:0};if(f.update(h),e instanceof Ro&&e.subViewports&&e.subViewports.length>1){for(h.offset=-1;f.update(h)&&!(--h.offset<-UI););for(h.offset=1;f.update(h)&&!(++h.offset>UI););}return f.getSelected()}const Ta=512,FPt=[-1/0,-1/0,1/0,1/0],$Pt={type:"url",value:null,validate:(e,t)=>t.optional&&e===null||typeof e=="string"||Array.isArray(e)&&e.every(r=>typeof r=="string"),equals:(e,t)=>{if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}};function UV(e,t){const r=[t.transformAsPoint([e[0],e[1]]),t.transformAsPoint([e[2],e[1]]),t.transformAsPoint([e[0],e[3]]),t.transformAsPoint([e[2],e[3]])];return[Math.min(...r.map(i=>i[0])),Math.min(...r.map(i=>i[1])),Math.max(...r.map(i=>i[0])),Math.max(...r.map(i=>i[1]))]}function BPt(e){return Math.abs(e.split("").reduce((t,r)=>(t<<5)-t+r.charCodeAt(0)|0,0))}function zPt(e,t){if(!e||!e.length)return null;const{index:r,id:n}=t;if(Array.isArray(e)){const o=BPt(n)%e.length;e=e[o]}let i=e;for(const o of Object.keys(r)){const a=new RegExp("{".concat(o,"}"),"g");i=i.replace(a,String(r[o]))}return Number.isInteger(r.y)&&Number.isInteger(r.z)&&(i=i.replace(/\{-y\}/g,String(Math.pow(2,r.z)-r.y-1))),i}function VPt(e,t,r){let n;if(t&&t.length===2){const[i,o]=t,a=e.getBounds({z:i}),s=e.getBounds({z:o});n=[Math.min(a[0],s[0]),Math.min(a[1],s[1]),Math.max(a[2],s[2]),Math.max(a[3],s[3])]}else n=e.getBounds();return e.isGeospatial?[Math.max(n[0],r[0]),Math.max(n[1],r[1]),Math.min(n[2],r[2]),Math.min(n[3],r[3])]:[Math.max(Math.min(n[0],r[2]),r[0]),Math.max(Math.min(n[1],r[3]),r[1]),Math.min(Math.max(n[2],r[0]),r[2]),Math.min(Math.max(n[3],r[1]),r[3])]}function _1({viewport:e,z:t,cullRect:r}){const n=r.x-e.x,i=r.y-e.y,{width:o,height:a}=r;if(!Array.isArray(t)){const u={targetZ:t||0},c=e.unproject([n,i],u),f=e.unproject([n+o,i],u),h=e.unproject([n,i+a],u),d=e.unproject([n+o,i+a],u);return[Math.min(c[0],f[0],h[0],d[0]),Math.min(c[1],f[1],h[1],d[1]),Math.max(c[0],f[0],h[0],d[0]),Math.max(c[1],f[1],h[1],d[1])]}const s=_1({viewport:e,z:t[0],cullRect:r}),l=_1({viewport:e,z:t[1],cullRect:r});return[Math.min(s[0],l[0]),Math.min(s[1],l[1]),Math.max(s[2],l[2]),Math.max(s[3],l[3])]}function UPt(e,t,r){return r?UV(e,r).map(i=>i*t/Ta):e.map(n=>n*t/Ta)}function NE(e,t){return Math.pow(2,e)*Ta/t}function mT(e,t,r){const n=NE(r,Ta),i=e/n*360-180,o=Math.PI-2*Math.PI*t/n,a=180/Math.PI*Math.atan(.5*(Math.exp(o)-Math.exp(-o)));return[i,a]}function WI(e,t,r,n){const i=NE(r,n);return[e/i*Ta,t/i*Ta]}function WPt(e,t,r,n,i=Ta){if(e.isGeospatial){const[u,c]=mT(t,r,n),[f,h]=mT(t+1,r+1,n);return{west:u,north:c,east:f,south:h}}const[o,a]=WI(t,r,n,i),[s,l]=WI(t+1,r+1,n,i);return{left:o,top:a,right:s,bottom:l}}function GPt(e,t,r,n,i){const o=VPt(e,null,n),a=NE(t,r),[s,l,u,c]=UPt(o,a,i),f=[];for(let h=Math.floor(s);h<u;h++)for(let d=Math.floor(l);d<c;d++)f.push({x:h,y:d,z:t});return f}function jPt({viewport:e,maxZoom:t,minZoom:r,zRange:n,extent:i,tileSize:o=Ta,modelMatrix:a,modelMatrixInverse:s,zoomOffset:l=0}){let u=e.isGeospatial?Math.round(e.zoom+Math.log2(Ta/o))+l:Math.ceil(e.zoom)+l;if(typeof r=="number"&&Number.isFinite(r)&&u<r){if(!i)return[];u=r}typeof t=="number"&&Number.isFinite(t)&&u>t&&(u=t);let c=i;return a&&s&&i&&!e.isGeospatial&&(c=UV(i,a)),e.isGeospatial?NPt(e,u,n,i):GPt(e,u,o,c||FPt,s)}const GI=1,N_=2,HPt="never",XPt="no-overlap",FE="best-available",YPt=5,qPt={[FE]:KPt,[XPt]:JPt,[HPt]:()=>{}};class ZPt{constructor(t){P(this,"opts",void 0),P(this,"_requestScheduler",void 0),P(this,"_cache",void 0),P(this,"_dirty",void 0),P(this,"_tiles",void 0),P(this,"_cacheByteSize",void 0),P(this,"_viewport",void 0),P(this,"_zRange",void 0),P(this,"_selectedTiles",void 0),P(this,"_frameNumber",void 0),P(this,"_modelMatrix",void 0),P(this,"_modelMatrixInverse",void 0),P(this,"_maxZoom",void 0),P(this,"_minZoom",void 0),P(this,"onTileLoad",void 0),P(this,"_getCullBounds",Zp(_1)),this.opts=t,this.onTileLoad=r=>{this.opts.onTileLoad(r),this.opts.maxCacheByteSize&&(this._cacheByteSize+=r.byteLength,this._resizeCache())},this._requestScheduler=new z0t({maxRequests:t.maxRequests,throttleRequests:t.maxRequests>0}),this._cache=new Map,this._tiles=[],this._dirty=!1,this._cacheByteSize=0,this._viewport=null,this._selectedTiles=null,this._frameNumber=0,this._modelMatrix=new Hr,this._modelMatrixInverse=new Hr,this.setOptions(t)}get tiles(){return this._tiles}get selectedTiles(){return this._selectedTiles}get isLoaded(){return this._selectedTiles!==null&&this._selectedTiles.every(t=>t.isLoaded)}get needsReload(){return this._selectedTiles!==null&&this._selectedTiles.some(t=>t.needsReload)}setOptions(t){Object.assign(this.opts,t),Number.isFinite(t.maxZoom)&&(this._maxZoom=Math.floor(t.maxZoom)),Number.isFinite(t.minZoom)&&(this._minZoom=Math.ceil(t.minZoom))}finalize(){for(const t of this._cache.values())t.isLoading&&t.abort();this._cache.clear(),this._tiles=[],this._selectedTiles=null}reloadAll(){for(const t of this._cache.keys()){const r=this._cache.get(t);!this._selectedTiles||!this._selectedTiles.includes(r)?this._cache.delete(t):r.setNeedsReload()}}update(t,{zRange:r,modelMatrix:n}={}){const i=new Hr(n),o=!i.equals(this._modelMatrix);if(!this._viewport||!t.equals(this._viewport)||!Ao(this._zRange,r)||o){o&&(this._modelMatrixInverse=i.clone().invert(),this._modelMatrix=i),this._viewport=t,this._zRange=r;const s=this.getTileIndices({viewport:t,maxZoom:this._maxZoom,minZoom:this._minZoom,zRange:r,modelMatrix:this._modelMatrix,modelMatrixInverse:this._modelMatrixInverse});this._selectedTiles=s.map(l=>this._getTile(l,!0)),this._dirty&&this._rebuildTree()}else this.needsReload&&(this._selectedTiles=this._selectedTiles.map(s=>this._getTile(s.index,!0)));const a=this.updateTileStates();return this._pruneRequests(),this._dirty&&this._resizeCache(),a&&this._frameNumber++,this._frameNumber}isTileVisible(t,r){if(!t.isVisible)return!1;if(r&&this._viewport){const[n,i,o,a]=_1({viewport:this._viewport,z:this._zRange,cullRect:r}),{bbox:s}=t;if("west"in s)return s.west<o&&s.east>n&&s.south<a&&s.north>i;const l=Math.min(s.top,s.bottom),u=Math.max(s.top,s.bottom);return s.left<o&&s.right>n&&l<a&&u>i}return!0}getTileIndices({viewport:t,maxZoom:r,minZoom:n,zRange:i,modelMatrix:o,modelMatrixInverse:a}){const{tileSize:s,extent:l,zoomOffset:u}=this.opts;return jPt({viewport:t,maxZoom:r,minZoom:n,zRange:i,tileSize:s,extent:l,modelMatrix:o,modelMatrixInverse:a,zoomOffset:u})}getTileId(t){return"".concat(t.x,"-").concat(t.y,"-").concat(t.z)}getTileZoom(t){return t.z}getTileMetadata(t){const{tileSize:r}=this.opts;return{bbox:WPt(this._viewport,t.x,t.y,t.z,r)}}getParentIndex(t){const r=Math.floor(t.x/2),n=Math.floor(t.y/2),i=t.z-1;return{x:r,y:n,z:i}}updateTileStates(){const t=this.opts.refinementStrategy||FE,r=new Array(this._cache.size);let n=0;for(const i of this._cache.values())r[n++]=i.isVisible,i.isSelected=!1,i.isVisible=!1;for(const i of this._selectedTiles)i.isSelected=!0,i.isVisible=!0;(typeof t=="function"?t:qPt[t])(Array.from(this._cache.values())),n=0;for(const i of this._cache.values())if(r[n++]!==i.isVisible)return!0;return!1}_pruneRequests(){const{maxRequests:t}=this.opts,r=[];let n=0;for(const i of this._cache.values())i.isLoading&&(n++,!i.isSelected&&!i.isVisible&&r.push(i));for(;t>0&&n>t&&r.length>0;)r.shift().abort(),n--}_rebuildTree(){const{_cache:t}=this;for(const r of t.values())r.parent=null,r.children&&(r.children.length=0);for(const r of t.values()){const n=this._getNearestAncestor(r);r.parent=n,n!=null&&n.children&&n.children.push(r)}}_resizeCache(){const{_cache:t,opts:r}=this,n=r.maxCacheSize||(r.maxCacheByteSize?1/0:YPt*this.selectedTiles.length),i=r.maxCacheByteSize||1/0;if(t.size>n||this._cacheByteSize>i){for(const[a,s]of t)if(s.isVisible||(this._cacheByteSize-=r.maxCacheByteSize?s.byteLength:0,t.delete(a),this.opts.onTileUnload(s)),t.size<=n&&this._cacheByteSize<=i)break;this._rebuildTree(),this._dirty=!0}this._dirty&&(this._tiles=Array.from(this._cache.values()).sort((a,s)=>a.zoom-s.zoom),this._dirty=!1)}_getTile(t,r){const n=this.getTileId(t);let i=this._cache.get(n),o=!1;return!i&&r?(i=new vPt(t),Object.assign(i,this.getTileMetadata(i.index)),Object.assign(i,{id:n,zoom:this.getTileZoom(i.index)}),o=!0,this._cache.set(n,i),this._dirty=!0):i&&i.needsReload&&(o=!0),i&&o&&i.loadData({getData:this.opts.getTileData,requestScheduler:this._requestScheduler,onLoad:this.onTileLoad,onError:this.opts.onTileError}),i}_getNearestAncestor(t){const{_minZoom:r=0}=this;let n=t.index;for(;this.getTileZoom(n)>r;){n=this.getParentIndex(n);const i=this._getTile(n);if(i)return i}return null}}function KPt(e){for(const t of e)t.state=0;for(const t of e)t.isSelected&&!WV(t)&&$E(t);for(const t of e)t.isVisible=Boolean(t.state&N_)}function JPt(e){for(const r of e)r.state=0;for(const r of e)r.isSelected&&WV(r);const t=Array.from(e).sort((r,n)=>r.zoom-n.zoom);for(const r of t)if(r.isVisible=Boolean(r.state&N_),r.children&&(r.isVisible||r.state&GI))for(const n of r.children)n.state=GI;else r.isSelected&&$E(r)}function WV(e){let t=e;for(;t;){if(t.isLoaded||t.content)return t.state|=N_,!0;t=t.parent}return!1}function $E(e){for(const t of e.children)t.isLoaded||t.content?t.state|=N_:$E(t)}const QPt={TilesetClass:ZPt,data:{type:"data",value:[]},dataComparator:$Pt.equals,renderSubLayers:{type:"function",value:e=>new IE(e),compare:!1},getTileData:{type:"function",optional:!0,value:null,compare:!1},onViewportLoad:{type:"function",optional:!0,value:null,compare:!1},onTileLoad:{type:"function",value:e=>{},compare:!1},onTileUnload:{type:"function",value:e=>{},compare:!1},onTileError:{type:"function",value:e=>console.error(e),compare:!1},extent:{type:"array",optional:!0,value:null,compare:!0},tileSize:512,maxZoom:null,minZoom:0,maxCacheSize:null,maxCacheByteSize:null,refinementStrategy:FE,zRange:null,maxRequests:6,zoomOffset:0};class BE extends O_{initializeState(){this.state={tileset:null,isLoaded:!1}}finalizeState(){var t,r;(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0||r.finalize()}get isLoaded(){var t,r;return(t=this.state)===null||t===void 0||(r=t.tileset)===null||r===void 0?void 0:r.selectedTiles.every(n=>n.isLoaded&&n.layers&&n.layers.every(i=>i.isLoaded))}shouldUpdateState({changeFlags:t}){return t.somethingChanged}updateState({changeFlags:t}){let{tileset:r}=this.state;const n=t.propsOrDataChanged||t.updateTriggersChanged,i=t.dataChanged||t.updateTriggersChanged&&(t.updateTriggersChanged.all||t.updateTriggersChanged.getTileData);r?n&&(r.setOptions(this._getTilesetOptions()),i?r.reloadAll():this.state.tileset.tiles.forEach(o=>{o.layers=null})):(r=new this.props.TilesetClass(this._getTilesetOptions()),this.setState({tileset:r})),this._updateTileset()}_getTilesetOptions(){const{tileSize:t,maxCacheSize:r,maxCacheByteSize:n,refinementStrategy:i,extent:o,maxZoom:a,minZoom:s,maxRequests:l,zoomOffset:u}=this.props;return{maxCacheSize:r,maxCacheByteSize:n,maxZoom:a,minZoom:s,tileSize:t,refinementStrategy:i,extent:o,maxRequests:l,zoomOffset:u,getTileData:this.getTileData.bind(this),onTileLoad:this._onTileLoad.bind(this),onTileError:this._onTileError.bind(this),onTileUnload:this._onTileUnload.bind(this)}}_updateTileset(){const{tileset:t}=this.state,{zRange:r,modelMatrix:n}=this.props,i=t.update(this.context.viewport,{zRange:r,modelMatrix:n}),{isLoaded:o}=t,a=this.state.isLoaded!==o,s=this.state.frameNumber!==i;o&&(a||s)&&this._onViewportLoad(),s&&this.setState({frameNumber:i}),this.state.isLoaded=o}_onViewportLoad(){const{tileset:t}=this.state,{onViewportLoad:r}=this.props;r&&r(t.selectedTiles)}_onTileLoad(t){this.props.onTileLoad(t),t.layers=null,this.setNeedsUpdate()}_onTileError(t,r){this.props.onTileError(t),r.layers=null,this.setNeedsUpdate()}_onTileUnload(t){this.props.onTileUnload(t)}getTileData(t){const{data:r,getTileData:n,fetch:i}=this.props,{signal:o}=t;return t.url=typeof r=="string"||Array.isArray(r)?zPt(r,t):null,n?n(t):i&&t.url?i(t.url,{propName:"data",layer:this,signal:o}):null}renderSubLayers(t){return this.props.renderSubLayers(t)}getSubLayerPropsByTile(t){return null}getPickingInfo({info:t,sourceLayer:r}){return t.tile=r.props.tile,t}_updateAutoHighlight(t){t.sourceLayer&&t.sourceLayer.updateAutoHighlight(t)}renderLayers(){return this.state.tileset.tiles.map(t=>{const r=this.getSubLayerPropsByTile(t);if(!(!t.isLoaded&&!t.content))if(t.layers)r&&t.layers[0]&&Object.keys(r).some(n=>t.layers[0].props[n]!==r[n])&&(t.layers=t.layers.map(n=>n.clone(r)));else{const n=this.renderSubLayers({...this.props,id:"".concat(this.id,"-").concat(t.id),data:t.content,_offset:0,tile:t});t.layers=M_(n,Boolean).map(i=>i.clone({tile:t,...r}))}return t.layers})}filterSubLayer({layer:t,cullRect:r}){const{tile:n}=t.props;return this.state.tileset.isTileVisible(n,r)}}P(BE,"defaultProps",QPt);P(BE,"layerName","TileLayer");const tEt={setup(){const e=_t(),t=Wt(),r=ai(),n=Mp();return t.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),{gameStore:e,userStore:t,marketStore:r,mapStore:n}},props:{clickedObj:Object,hoverInfo:Object,panToPzk:String,panPaPos:Object},emits:["update:hoverInfo","update:clickedObj","update:panToPzk","update:panPaPos","panAnywhere"],data:()=>({deck:null,tileLayer:null,iconData:[],iconPositions:{},iconLayer:null,lineData:[],lineLayer:null,clickedObject:null,scores:{needTakes:{},pathCosts:{}},pzkSelectedTown:{},initialViewState:{target:[0,0],zoom:-8,minZoom:-12,maxZoom:-5},mapStateSavedTimestamp:0,hiddenNodesCount:0}),created(){},async mounted(){function e(t){const r=n=>{t()?n():setTimeout(i=>r(n),100)};return new Promise(r)}if(console.log("NodeMap mounted, sleeping"),await e(t=>this.gameStore.ready==!0&&this.iconsCalc),console.log("resuming"),this.iconData=await(await fetch("data/deck_icons.json")).json(),this.iconPositions=await(await fetch("data/deck_icon_positions.json")).json(),this.lineData=await(await fetch("data/deck_links.json")).json(),this.panToPzk in this.gameStore.nodes){console.log("panning to node",this.panToPzk);const t=this.gameStore.nodes[this.panToPzk].pos;this.mapStore.target=[t.x,-t.z],this.mapStore.zoom=-7}this.initialViewState.target=[...this.mapStore.target],this.initialViewState.zoom=this.mapStore.zoom,this.deck=this.initializeDeck(),this.scores=this.dijkstraScoreAll(),this.updateDeck()},watch:{"userStore.autotakenNodes"(e){this.updateLayers()},"userStore.mapHideInactive"(e){this.updateLayers()},linesCalc(e){this.updateLayers()},panPaPos(e){if(e){const t={...this.initialViewState};t.target=[e.x,-e.z],t.zoom=-7,t.transitionDuration=100,t.transitionInterpolator=new x_({transitionProps:["target","zoom"]}),this.deck.setProps({initialViewState:t})}}},computed:{iconsCalc(){let e=[];return this.hiddenNodesCount=0,this.iconData&&(this.iconData.forEach(([t,r])=>{t in this.scores.pathCosts&&(this.userStore.mapHideInactive&&this.userStore.autotakenNodes.has(t)==!1&&(this.hiddenNodesCount+=1),e.push({key:t,kind:r,pos:this.iconPositions[t],taken:this.userStore.autotakenNodes.has(t),thisCpCost:this.gameStore.nodes[t].CP,fromTown:this.scores.needTakes[t][0],fromTownCpCost:this.scores.pathCosts[t],fromTownPath:this.scores.needTakes[t]}))}),console.log("iconsCalc",this.hiddenNodesCount,"hidden")),e},linesCalc(){let e=[];if(this.lineData.forEach(([t,r])=>{const n=this.userStore.autotakenNodes.has(t)&&this.userStore.autotakenNodes.has(r),i=this.userStore.autotakenGrindNodes.has(t)&&this.userStore.autotakenGrindNodes.has(r);e.push({start:this.iconPositions[t],end:this.iconPositions[r],color:n?i?[255,109,0,255]:[255,179,0,255]:[172,172,172,255]})}),this.clickedObject){if(this.clickedObject.key in this.userStore.pzJobs){const t=this.userStore.pzJobs[this.clickedObject.key];let r;for(const n of t.usedPath)r&&e.push({start:this.iconPositions[r],end:this.iconPositions[n],color:[64,255,0,255]}),r=n}if(this.gameStore.isLodgingTown(this.clickedObject.key)){const t=this.gameStore.tnk2tk(this.clickedObject.key);this.userStore.townWorkers(t).forEach(r=>{if(this.gameStore.jobIsPz(r.job)){const n=this.userStore.pzJobs[r.job.pzk];let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,0,255]}),i=o}if(this.gameStore.jobIsWorkshop(r.job)){const n=this.userStore.wsJobs.find(o=>o.worker.tnk==this.clickedObject.key&&o.hk==r.job.hk);let i;for(const o of n.usedPath)i&&e.push({start:this.iconPositions[i],end:this.iconPositions[o],color:[64,255,128,255]}),i=o}})}}return e}},methods:{makeIconImg:_Y,formatFixed:wt,onMoveEvent(e){const t=Date.now();t-this.mapStateSavedTimestamp>100&&(this.mapStore.target=[...e.viewState.target],this.mapStateSavedTimestamp=t),this.$emit("panAnywhere")},dijkstraScoreAll(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=this.gameStore.townsWithLodging;let i=new Ng((l,u)=>o[l]-o[u]);i.push(n);let o={[n]:0},a={[n]:[]};for(var s;i.size();)s=i.pop(),r[s].forEach(l=>{if(!(l in t))return;const u=o[s]+t[l].CP;l in o?u<o[l]&&(o[l]=u,a[l]=[...a[s],l]):(i.push(l),o[l]=u,a[l]=[...a[s],l])});return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:a,pathCosts:o}},dijkstraScoreAllProfitPerCp(){const e=Date.now(),t=this.gameStore.nodes,r=this.gameStore.links,n=0;r[n]=[1,301,302,601,61,602,604,608,1002,1101,1141,1301,1314,1319,1343,1380,1623,1649,1691,1750];let i=new Set(Object.keys(t)),o={0:[]},a={0:0},s={0:0};for(const u of Object.keys(t))a[u]=1/0,s[u]=0,o[u]=[];let l=n;for(;r[l].forEach(f=>{const h=a[l]+t[f].CP,d=this.gameStore.profitData(f,o[l][0],150,10,10),p=h==0?0:-d.priceDaily/h;console.log(l,f,h,d.priceDaily,p),p<s[f]&&(a[f]=h,s[f]=p,o[f]=[...o[l],f])}),i.delete(l),i.length!=0;){let u=[];i.forEach(f=>{u.push([f,a[f]])}),u.sort((f,h)=>f[1]-h[1]);let c=-1;if([l,c]=u[0],c==1/0)break}return console.log("scoreAll took",Date.now()-e,"ms"),{needTakes:o,pathCosts:a}},makeIconsLayer(){return new Jp({data:this.iconsCalc,pickable:!0,onClick:(e,t)=>this.objectClicked(e.object),onHover:e=>this.$emit("update:hoverInfo",e),getPosition:e=>e.pos,getColor:e=>this.userStore.mapHideInactive&&!e.taken?[0,0,0,0]:[0,0,0,255],getIcon:function(e){return{url:e.taken?`data/icons/node/${e.kind}.png`:`data/icons/node/gray/${e.kind}.png`,width:256,height:256,anchorX:128,anchorY:128}},updateTriggers:{getColor:this.userStore.mapHideInactive},transitions:{getColor:100},modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1],getSize:30,autoHighlight:!0})},makeLineLayer(){return new TE({data:this.linesCalc,getSourcePosition:e=>e.start,getTargetPosition:e=>e.end,getColor:e=>e.color,modelMatrix:[1,0,0,0,0,-1,0,0,0,0,1,0,0,0,0,1]})},initializeDeck(){return console.log("initializeDeck",this.initialViewState),console.log("initializeDeck",this.mapStore.target),this.tileLayer=new BE({data:"data/maptiles/{z}/{x}_{y}.webp",minZoom:0,maxZoom:7,tileSize:256*12800,zoomOffset:14,extent:[-67*2*12800,-71*2*12800,58*2*12800,35*2*12800],renderSubLayers:e=>{const{bbox:{left:t,bottom:r,right:n,top:i}}=e.tile;return new SE(e,{data:null,image:e.data,bounds:[t,r,n,i]})}}),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),new mE({canvas:"deck-canvas",mapbox:!1,onViewStateChange:this.onMoveEvent,initialViewState:this.initialViewState,layers:[this.tileLayer,this.lineLayer,this.iconLayer],controller:{doubleClickZoom:!1},views:[new vE({controller:!0})]})},updateLayers(){!this.deck||(console.log("updateLayers"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer]}))},updateDeck(){!this.deck||(console.log("updateDeck"),this.lineLayer=this.makeLineLayer(),this.iconLayer=this.makeIconsLayer(),this.deck.setProps({layers:[this.tileLayer,this.lineLayer,this.iconLayer],initialViewState:this.initialViewState}))},objectClicked(e){this.clickedObject=e,this.$emit("update:clickedObj",e)},move(e){this.initialViewState.target=[e,0],console.log("trying to move to",e),console.log(this.deck.viewState)}}},eEt={id:"deck-canvas",ref:"canvas"},rEt={id:"hack"},nEt={key:0,id:"topcenter"},iEt=N(") ");function oEt(e,t,r,n,i,o){return I(),O(j,null,[y("canvas",eEt,null,512),y("div",rEt,A(o.iconsCalc.length)+" icons",1),n.userStore.mapHideInactive?(I(),O("div",nEt,[N(A(e.hiddenNodesCount)+" inactive nodes hidden (",1),y("a",{href:"#",onClick:t[0]||(t[0]=a=>n.userStore.mapHideInactive=!1)},"show"),iEt])):tt("",!0)],64)}const aEt=be(tEt,[["render",oEt],["__scopeId","data-v-cb8c2498"]]);const sEt={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},props:{tk:Number},emits:["selectWorker","editWorker"],components:{},data:()=>({}),computed:{filteredHouses(){const e={};for(const[t,r]of Object.entries(this.userStore.userWorkshops))this.gameStore.houseInfo[t].affTown==this.tk&&(r.industry in e?e[r.industry][t]=r:e[r.industry]={[t]:r});return e},filteredWorkers(){return this.userStore.userWorkers.filter(e=>e.job&&this.gameStore.jobIsWorkshop(e.job)&&e.job.hk in this.gameStore.houseInfo&&this.gameStore.houseInfo[e.job.hk].affTown==this.tk)}},methods:{formatFixed:wt}},GV=e=>(Xe("data-v-e4743909"),e=e(),Ye(),e),lEt={key:0},uEt=GV(()=>y("summary",null,"Workshops",-1)),cEt=GV(()=>y("tr",null,[y("td",null,"house"),y("td",null,"type"),y("td",null,"workload"),y("td",null,"$/cycle"),y("td",null,"CP"),y("td",{colspan:"3"},"worker")],-1)),fEt=["onUpdate:modelValue"],hEt=["value"],dEt=["onUpdate:modelValue"],pEt=["onUpdate:modelValue"],vEt=["onUpdate:modelValue"],gEt=["onClick"],mEt=["onClick"],_Et={key:0},yEt=["onClick"],bEt={key:1},wEt=["onClick"];function SEt(e,t,r,n,i,o){return Object.keys(o.filteredHouses).length?(I(),O("details",lEt,[uEt,y("table",null,[cEt,(I(!0),O(j,null,Ct(o.filteredHouses,(a,s)=>(I(),O(j,null,[(I(!0),O(j,null,Ct(a,(l,u)=>(I(),O("tr",null,[y("td",null,A(n.gameStore.uloc.char[u])+" "+A(l.label),1),y("td",null,[ht(y("select",{"onUpdate:modelValue":c=>l.industry=c},[(I(!0),O(j,null,Ct(n.gameStore.industries,(c,f)=>(I(),O("option",{value:f},A(c),9,hEt))),256))],8,fEt),[[ar,l.industry]])]),y("td",null,[ht(y("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualWorkload=c},null,8,dEt),[[ie,l.manualWorkload,void 0,{number:!0}]])]),y("td",null,[ht(y("input",{type:"number",class:"w5em","onUpdate:modelValue":c=>l.manualCycleIncome=c},null,8,pEt),[[ie,l.manualCycleIncome,void 0,{number:!0}]])]),y("td",null,[ht(y("input",{type:"number",class:"float4","onUpdate:modelValue":c=>l.manualCp=c},null,8,vEt),[[ie,l.manualCp,void 0,{number:!0}]])]),y("td",null,[(I(!0),O(j,null,Ct(o.filteredWorkers.filter(c=>c.job.hk==u),c=>(I(),O("div",null,[y("button",{onClick:f=>this.$emit("editWorker",c)},"edit",8,gEt),N(" "+A(n.userStore.workerLabel(c))+" @ ",1),n.userStore.displayProfitPerCp?(I(),O(j,{key:0},[N(A(o.formatFixed(n.userStore.workerIncomePerCp(c),2))+" M$/day/CP ",1)],64)):(I(),O(j,{key:1},[N(A(o.formatFixed(n.userStore.workerIncome(c),2))+" M$/day ",1)],64)),y("button",{onClick:f=>c.job=null},"stop",8,mEt)]))),256)),l.industry=="mass"?(I(),O("div",_Et,[y("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"add",8,yEt)])):o.filteredWorkers.filter(c=>c.job.hk==u).length==0?(I(),O("div",bEt,[y("button",{onClick:c=>this.$emit("selectWorker",Number(u))},"send",8,wEt)])):tt("",!0)])]))),256))],64))),256))])])):tt("",!0)}const TEt=be(sEt,[["render",SEt],["__scopeId","data-v-e4743909"]]);const kEt={setup(){const e=Wt(),t=_t(),r=ai(),n=Mp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},components:{Worker:Sk,TownWorkers:N7,TownWorkshops:TEt,Plantzone:$7},props:{clickedNode:Object},emits:["selectLodging","selectHouses","hireWorker","editWorker","sendWorker","panToPaPos","showModifierDialog","setClickedNode","selectWorker"],data:()=>({}),methods:{makeIconSrc:Dn,formatFixed:wt,jobCashFlowPercent(e){return e.profit.priceDaily/this.userStore.currentNodesCashflow[this.clickedNode.key]},selectLodging(e){this.$emit("selectLodging",e)},selectHouses(e){this.$emit("selectHouses",e)},hireWorker(e){this.$emit("hireWorker",e)},editWorker(e){this.$emit("editWorker",e)},sendWorker(e){this.$emit("sendWorker",e)},panToPaPos(e){this.$emit("panToPaPos",e)},showModifierDialog(e){this.$emit("showModifierDialog",e)},setClickedNode(e){this.$emit("setClickedNode",e)},selectWorker(e){this.$emit("selectWorker",e)}},computed:{activeNodeJobs_sorted(){const e=this.userStore.currentNodesJobs[this.clickedNode.key];return e.sort((t,r)=>this.jobCashFlowPercent(r)-this.jobCashFlowPercent(t)),e}},mounted(){},updated(){}},jV=e=>(Xe("data-v-153c95c6"),e=e(),Ye(),e),PEt={key:0,id:"mapObjDetail"},EEt=jV(()=>y("div",null,"\u02C5",-1)),CEt=[EEt],AEt={key:0,id:"clickedTownInfo",class:"vscrollable"},MEt={key:1,id:"clickedTownInfo",class:"vscrollable"},xEt={key:2,id:"clickedNodeName"},LEt=N(),IEt=jV(()=>y("abbr",{class:"tooltip",title:"is involved in a zero-cost path"},"\u2139\uFE0F",-1)),OEt={key:0,class:"fsxs"},REt=N(" shared by active nodejobs: "),DEt=["onClick"],NEt={key:1},FEt=["checked"],$Et=N(" zero-cost connection to nearest town (invested for droprate) "),BEt={key:3,id:"clickedPlantzoneInfo"};function zEt(e,t,r,n,i,o){const a=Qt("TownWorkers"),s=Qt("TownWorkshops"),l=Qt("Plantzone");return r.clickedNode?(I(),O("div",PEt,[y("div",{class:"rolldown",onClick:t[0]||(t[0]=u=>o.setClickedNode(null))},CEt),n.gameStore.isLodgingTown(r.clickedNode.key)?(I(),O("div",AEt,[y("table",null,[Et(a,{o:n.gameStore.lodgingPerTown[n.gameStore.tnk2tk(r.clickedNode.key)],tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"])]),n.userStore.userWorkshops?(I(),xo(s,{key:0,tk:n.gameStore.tnk2tk(r.clickedNode.key),onSelectWorker:o.selectWorker,onEditWorker:o.editWorker},null,8,["tk","onSelectWorker","onEditWorker"])):tt("",!0)])):n.gameStore.townsWithRentableStorageSet.has(r.clickedNode.key)?(I(),O("div",MEt,[y("button",{onClick:t[1]||(t[1]=u=>this.$emit("selectHouses",n.gameStore.tnk2tk(r.clickedNode.key))),class:xr({unresolved:n.gameStore.ready&&n.userStore.townsInfra[n.gameStore.tnk2tk(r.clickedNode.key)].success==!1})}," config ",2)])):tt("",!0),n.gameStore.isConnectionNode(r.clickedNode.key)?(I(),O("div",xEt,[y("p",null,[N(A(n.gameStore.uloc.node[r.clickedNode.key])+" ",1),n.userStore.autotakenGrindNodes.has(r.clickedNode.key)?(I(),O(j,{key:0},[y("s",null,A(r.clickedNode.thisCpCost)+"CP",1),LEt,IEt],64)):(I(),O(j,{key:1},[N(A(r.clickedNode.thisCpCost)+"CP ",1)],64))]),r.clickedNode.key in n.userStore.currentNodesJobs?(I(),O("p",OEt,[REt,(I(!0),O(j,null,Ct(o.activeNodeJobs_sorted,u=>(I(),O("p",null,[N(A(o.formatFixed(o.jobCashFlowPercent(u)*100))+"% - ",1),this.gameStore.jobIsPz(u.worker.job)?(I(),O("span",{key:0,onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[u.pzk].pos),class:"clickable"},A(n.gameStore.plantzoneName(u.pzk)),9,DEt)):(I(),O("span",NEt,A(n.gameStore.uloc.char[u.worker.job.hk])+" "+A(n.userStore.userWorkshops[u.worker.job.hk].label),1)),N(" @ "+A(o.formatFixed(u.profit.priceDaily,2))+" M$/day ",1)]))),256))])):tt("",!0),y("input",{type:"checkbox",onChange:t[2]||(t[2]=u=>n.userStore.modifyGrindTakens(u,r.clickedNode.key)),checked:n.userStore.grindTakenSet.has(r.clickedNode.key)},null,40,FEt),$Et])):tt("",!0),n.gameStore.isPlantzone(r.clickedNode.key)?(I(),O("div",BEt,[Et(l,{pzk:r.clickedNode.key,onShowModifierDialog:o.showModifierDialog,onEditWorker:o.editWorker},null,8,["pzk","onShowModifierDialog","onEditWorker"])])):tt("",!0)])):tt("",!0)}const VEt=be(kEt,[["render",zEt],["__scopeId","data-v-153c95c6"]]);const UEt={setup(){const e=Wt(),t=_t(),r=ai();return{gameStore:t,userStore:e,marketStore:r}},emits:["panToPaPos"],data:()=>({activeTab:"daily"}),methods:{makeIconSrc:Dn,formatFixed:wt,strShortenLeft:SY},computed:{untakenPlantzonesNearestCpTownProfit(){const e=Date.now(),t=Wt(),r=_t();let n=[];this.gameStore.townsWithLodging.forEach(o=>{const a=this.gameStore.dijDiscountedNearestPlantzones(o,10);n[o]=a});let i=[];for(const[o,a]of Object.entries(n))a.forEach(([s,l,u])=>{if(this.userStore.workedPlantzones.has(s.toString()))return;const c=r.profitPzTownArtisans(s,o,l);if(!c.connected)return;c.path=u;const f=r.tnk2tk(o),h=t.townInfraAddCost(f,1,r.plantzones[s].itemkeys);c.townCp=h.cost,c.townCpTooltip=h.tooltip,c.dailyPerCp=c.priceDaily/(c.cp+c.townCp),!isNaN(c.dailyPerCp)&&i.push(c)});return i.sort((o,a)=>a.dailyPerCp-o.dailyPerCp),console.log("cpt: untakenPlantzonesNearestCpTownProfit took",Date.now()-e,"ms"),i}}},un=e=>(Xe("data-v-03dbbe1d"),e=e(),Ye(),e),WEt={style:{"margin-top":"0.5rem","margin-bottom":"0.5rem"}},GEt={key:0},jEt=un(()=>y("tr",null,[y("th",null,"Item"),y("th",null,"Qty"),y("th",null,"M$")],-1)),HEt=["href"],XEt=["src","data-key"],YEt={class:"right"},qEt={class:"right"},ZEt=N(" Cycles total:"),KEt=un(()=>y("br",null,null,-1)),JEt=un(()=>y("br",null,null,-1)),QEt=un(()=>y("br",null,null,-1)),tCt=N(" \u{1F33B}farming: "),eCt=un(()=>y("abbr",{class:"tooltip",title:"no idea, depends on weather"},"0",-1)),rCt=un(()=>y("br",null,null,-1)),nCt={key:1},iCt=un(()=>y("tr",null,[y("th",{rowspan:"2"},"town"),y("th",{rowspan:"2"},"job"),y("th",{rowspan:"2"},"M$/day"),y("th",{colspan:"2"},"CP"),y("th",{rowspan:"2"},"M$/day/CP")],-1)),oCt=un(()=>y("tr",null,[y("th",null,[N(" \xA0job "),y("abbr",{class:"tooltip",title:"cost of the node (for plantzones) OR cost of the house (for workshops)"},"\u2139\uFE0F")]),y("th",null,[N(" town "),y("abbr",{class:"tooltip",title:"worker lodging + material storage"},"\u2139\uFE0F")])],-1)),aCt=["onClick"],sCt={class:""},lCt={class:"hlim parent"},uCt=["onClick"],cCt={class:"hlim right"},fCt=["src"],hCt={key:1,class:"hlim left"},dCt={class:"tac"},pCt={class:"tac"},vCt={class:"tac"},gCt={class:"tac"},mCt=un(()=>y("span",{class:"fsxs"},"Compares 10 nearest (by CP) untaken nodes of each town. Uses stats of median 40lvl artisans. Stash at worker hometown (maybe not ideal)",-1)),_Ct=un(()=>y("th",null,"town",-1)),yCt=un(()=>y("th",null,"job",-1)),bCt=un(()=>y("th",null,"worker",-1)),wCt=un(()=>y("th",null,"+M$/day",-1)),SCt=un(()=>y("th",null,"+CP",-1)),TCt=un(()=>y("th",null,"M$/day/CP",-1)),kCt=["onClick"],PCt={class:"hlim parent"},ECt=["onClick"],CCt={class:"hlim right"},ACt=["src"],MCt={class:"tac"},xCt=["title"],LCt={class:"tac"},ICt={class:"tac"},OCt=["title"],RCt=N("+"),DCt=["title"],NCt={class:"tac"};function FCt(e,t,r,n,i,o){const a=Qt("RouterLink");return I(),O(j,null,[y("nav",WEt,[y("span",{onClick:t[0]||(t[0]=s=>e.activeTab="daily"),class:xr({tab:1,green:e.activeTab!="daily"})},"Daily Yields",2),y("span",{onClick:t[1]||(t[1]=s=>e.activeTab="worst"),class:xr({tab:1,green:e.activeTab!="worst"})},"Worst Taken",2),y("span",{onClick:t[2]||(t[2]=s=>e.activeTab="best"),class:xr({tab:1,green:e.activeTab!="best"})},"Best Untaken",2)]),e.activeTab=="daily"?(I(),O("div",GEt,[y("table",null,[jEt,(I(!0),O(j,null,Ct(n.userStore.jobsTally,(s,l)=>(I(),O("tr",null,[y("td",null,[y("a",{href:this.userStore.itemUrl+l},[y("img",{src:o.makeIconSrc(l),class:"iconitem","data-key":l},null,8,XEt),N(" "+A(n.gameStore.uloc.item[l]),1)],8,HEt)]),y("td",YEt,A(o.formatFixed(s,s<1?2:s<10?1:0)),1),y("td",qEt,A(o.formatFixed(this.marketStore.priceBunch({[l]:s})/1e6,2)),1)]))),256))]),ZEt,KEt,N(" \u{1F5FA}\uFE0Fplantzones: "+A(o.formatFixed(n.userStore.cyclesTally.pz)),1),JEt,n.userStore.cyclesTally.workshop>0?(I(),O(j,{key:0},[N(" \u{1F3ED}workshops: "+A(o.formatFixed(n.userStore.cyclesTally.workshop)),1),QEt],64)):tt("",!0),tCt,eCt,rCt,N(" = "+A(o.formatFixed(n.userStore.cyclesTally.chicken))+" chicken/day ",1)])):tt("",!0),e.activeTab=="worst"?(I(),O("table",nCt,[iCt,oCt,(I(!0),O(j,null,Ct(n.userStore.workersSortedByIncomePerCp,({w:s,i:l,ipc:u})=>(I(),O("tr",null,[y("td",null,[y("span",{onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},A(n.gameStore.uloc.town[n.gameStore.tnk2tk(s.tnk)]),9,aCt)]),y("td",sCt,[y("div",lCt,[this.gameStore.jobIsPz(s.job)?(I(),O(j,{key:0},[y("span",{class:"hlim left clickable",onClick:c=>e.$emit("panToPaPos",this.gameStore.nodes[s.job.pzk].pos)},A(n.gameStore.parentNodeName(s.job.pzk)),9,uCt),y("span",cCt,[(I(!0),O(j,null,Ct(n.gameStore.plantzones[s.job.pzk].itemkeys,c=>(I(),xo(a,{tag:"a",to:{path:"./settings",hash:"#item"+c}},{default:we(()=>[y("img",{src:o.makeIconSrc(c),class:"iconitem"},null,8,fCt)]),_:2},1032,["to"]))),256))])],64)):(I(),O("span",hCt,A(n.gameStore.workerJobDescription(s)),1))])]),y("td",dCt,A(o.formatFixed(l,2)),1),y("td",pCt,A(o.formatFixed(n.userStore.workerSharedConnectionCP(s),2)),1),y("td",vCt,A(o.formatFixed(n.userStore.workerSharedLodgageCP(s).value,2)),1),y("td",gCt,A(o.formatFixed(u,2)),1)]))),256))])):tt("",!0),e.activeTab=="best"?(I(),O(j,{key:2},[mCt,y("table",null,[y("tr",null,[_Ct,yCt,bCt,wCt,SCt,TCt,tt("",!0)]),(I(!0),O(j,null,Ct(o.untakenPlantzonesNearestCpTownProfit,s=>(I(),O("tr",null,[y("td",null,[y("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.tnk].pos),class:"clickable"},A(n.gameStore.nodeName(s.tnk)),9,kCt)]),y("td",null,[y("div",PCt,[y("span",{onClick:l=>e.$emit("panToPaPos",this.gameStore.nodes[s.key].pos),class:"hlim left clickable"},A(n.gameStore.parentNodeName(s.key)),9,ECt),y("span",CCt,[(I(!0),O(j,null,Ct(s.itemkeys,l=>(I(),xo(a,{tag:"a",to:{path:"./settings",hash:"#item"+l}},{default:we(()=>[y("img",{src:o.makeIconSrc(l),class:"iconitem"},null,8,ACt)]),_:2},1032,["to"]))),256))])])]),y("td",MCt,[s.alt_workers?(I(),O("abbr",{key:0,class:"tooltip nound",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day = ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},A({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,xCt)):tt("",!0)]),y("td",LCt,A(o.formatFixed(s.priceDaily,2)),1),y("td",ICt,[y("abbr",{title:Array.from(s.path,l=>`${n.userStore.autotakenNodes.has(l)?0:n.gameStore.nodes[l].CP} ${n.gameStore.uloc.node[l]}`).join(`
`),class:"tooltip"},A(o.formatFixed(s.cp)),9,OCt),RCt,y("abbr",{title:s.townCpTooltip,class:"tooltip"},A(o.formatFixed(s.townCp)),9,DCt),N("="+A(o.formatFixed(s.cp+s.townCp)),1)]),y("td",NCt,A(o.formatFixed(s.dailyPerCp,2)),1),tt("",!0)]))),256))])],64)):tt("",!0)],64)}const $Ct=be(UEt,[["render",FCt],["__scopeId","data-v-03dbbe1d"]]);const BCt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{tk:Number,hk:Number,show:{type:Boolean,default:!1}},data:()=>({}),watch:{},methods:{makeIconSrc:Dn,formatFixed:wt,workshopNearestTownsFreeWorkersProfits(e){const t=this.gameStore.houseInfo[this.hk].affTown,r=this.gameStore.tk2tnk(t),n=this.userStore.userWorkshops[this.hk].manualCp,i=[];return this.gameStore.dijkstraNearestTowns(r,e,this.userStore.autotakenNodes).forEach(([a,s,l])=>{const u=this.gameStore._tnk2tk[a];this.userStore.getFreeWorkers(u).forEach(f=>{i.push(this.gameStore.workshopSelectionEntry(this.hk,u,a,l,f,s,n))})}),i.sort((a,s)=>s.dailyPerCp-a.dailyPerCp),i},assign(e,t){this.userStore.assignWorker(e,{kind:"workshop",hk:Number(t),recipe:void 0}),this.$emit("update:show",!1)}},computed:{freeWorkers(){return this.workshopNearestTownsFreeWorkersProfits(99)},workshop(){return this.userStore.userWorkshops[this.hk]}}},HV=e=>(Xe("data-v-7e236e89"),e=e(),Ye(),e),zCt=HV(()=>y("abbr",{class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},"\u2139\uFE0F",-1)),VCt=N("): "),UCt=N(" None "),WCt={key:0},GCt=HV(()=>y("tr",null,[y("th",null,"town"),y("th",null,"worker"),y("th",null,"walk"),y("th",null,"cycles/day"),y("th",null,"+M$/day"),y("th",null,"+CP"),y("th",null,"M$/day/CP"),y("th",null,"action")],-1)),jCt={key:0},HCt={class:"fsxs"},XCt={class:"center"},YCt=["title"],qCt=N("+"),ZCt={class:"tooltip",title:"see Settings > \u{1F3ED}Workshops"},KCt=N("+"),JCt=["title"],QCt={class:"center"},tAt=["onClick"];function eAt(e,t,r,n,i,o){return r.hk?(I(),O(j,{key:0},[y("div",null,[N("Nearest idle workers for "+A(n.gameStore.uloc.char[r.hk])+" "+A(o.workshop.label?'"'+o.workshop.label+'"':"")+" ("+A(o.workshop.manualWorkload)+" workload, "+A(o.workshop.manualCycleIncome)+" $/cycle, type: "+A(o.workshop.industry)+" ",1),zCt,VCt,o.freeWorkers.length==0?(I(),O(j,{key:0},[UCt],64)):tt("",!0)]),o.freeWorkers.length?(I(),O("table",WCt,[GCt,(I(!0),O(j,null,Ct(o.freeWorkers,a=>(I(),O(j,null,[a.profit.distance<1e6?(I(),O("tr",jCt,[y("td",null,A(n.gameStore.nodeName(a.tnk)),1),y("td",null,[N(A(a.w.label)+" ",1),y("span",HCt,A(o.formatFixed(a.profit.statsOnWs.wspd,2))+"\u{1F528} "+A(o.formatFixed(a.profit.statsOnWs.mspd,2))+"\u{1F9B6} "+A(o.formatFixed(a.profit.statsOnWs.luck,2))+"\u{1F340} ",1)]),y("td",null,A(o.formatFixed(a.profit.distance)),1),y("td",null,A(o.formatFixed(a.profit.cyclesDaily,1)),1),y("td",XCt,A(o.formatFixed(a.profit.priceDaily,2)),1),y("td",null,[y("abbr",{class:"tooltip",title:`connection cost:
`+Array.from(a.path,s=>`${n.userStore.autotakenNodes.has(s)?0:n.gameStore.nodes[s].CP} ${n.gameStore.uloc.node[s]}`).join(`
`)},A(a.mapCp),9,YCt),qCt,y("abbr",ZCt,A(a.houseCp),1),KCt,y("abbr",{class:"tooltip",title:a.infraTooltip},A(a.townCp),9,JCt),N("="+A(a.cp),1)]),y("td",QCt,A(o.formatFixed(a.dailyPerCp,3)),1),y("td",null,[y("button",{onClick:s=>o.assign(a.w,r.hk)}," assign ",8,tAt)])])):tt("",!0)],64))),256))])):tt("",!0)],64)):tt("",!0)}const rAt=be(BCt,[["render",eAt],["__scopeId","data-v-7e236e89"]]);const nAt={setup(){const e=_t(),t=Wt(),r=ai(),n=Mp();return{gameStore:e,userStore:t,marketStore:r,mapStore:n}},components:{Worker:Sk,TownWorkers:N7,Plantzone:$7,ModalDialog:kk,WorkerEdit:wB,WorkerSendSelection:dpt,LodgingSelection:Tpt,HousesSelection:v0t,NodeMap:aEt,MapSelectedInfo:VEt,EmpireOverview:$Ct,FloatingModifierEdit:HP,WorkerSelection:rAt},data:()=>({workerEditing:null,workerEditingInitial:null,workerEditingInitialProfit:0,workerDialogVisible:!1,sendDialogWorker:null,sendDialogVisible:!1,lodgingDialogTown:"0",lodgingDialogData:null,lodgingDialogVisible:!1,housesDialogTown:0,housesDialogVisible:!1,importDialogVisible:!1,clickedNode:null,hoverInfo:null,modifierDialogWspd:150,modifierDialogRgroup:1,modifierDialogWkld:400,modifierDialogVisible:!1,panToPzk:null,panPaPos:null,selectWorkerDialogVisible:!1,selectWorkerHouseKey:0,importData:null,importSkipSections:{},prerelease_zerocost:!0,prerelease_colorGoblins:!1}),created(){},watch:{},computed:{},methods:{makeIconSrc:Dn,formatFixed:wt,randBetween:hs,levelup:pd,hireWorker(e){const t=this.userStore.useDefaultWorker?{...this.userStore.defaultWorker,tnk:this.gameStore.tk2tnk(e)}:this.hireRandomArtGob(e);console.log("w",t),this.userStore.userWorkers.push(t)},hireRandomArtGob(e){const t=this.userStore.newWorkerName(e),r=7572;let n={tk:e,tnk:this.gameStore.tk2tnk(e),charkey:r,label:t,level:1,wspdSheet:this.gameStore.workerStatic[r].wspd/1e6,mspdSheet:this.gameStore.workerStatic[r].mspd/100,luckSheet:this.gameStore.workerStatic[r].luck/1e4,skills:[],job:null};return n.skills.push(this.gameStore.randomSkill(n.skills)),pd(this.gameStore,n,40),n.wspdSheet=Math.round(n.wspdSheet*100)/100,n.mspdSheet=Math.round(n.mspdSheet*100)/100,n.luckSheet=Math.round(n.luckSheet*100)/100,n},fireWorker(e){this.userStore.userWorkers=this.userStore.userWorkers.filter(t=>t!=e)},sendWorker(e){this.gameStore.workerStatsOnPlantzone(e),this.sendDialogWorker=e,this.sendDialogVisible=!0},unsendWorker(e){e.job=null},editWorker(e){this.workerEditing=e,this.workerEditingInitial=JSON.parse(JSON.stringify(e)),this.workerEditingInitialProfit=e&&e.job&&typeof e.job=="number"?this.userStore.pzJobs[this.workerEditing.job].profit.priceDaily:0,this.workerDialogVisible=!0},hireAll(){for(const e of Object.keys(this.gameStore.lodgingPerTown)){const t=this.userStore.townFreeLodgingCount(e);for(let r=0;r<t;r++)this.hireWorker(e)}},fireAll(){this.userStore.userWorkers=[]},selectLodging(e){this.lodgingDialogTown=e,this.lodgingDialogData=this.gameStore.lodgingPerTown[e],this.lodgingDialogVisible=!0},selectHouses(e){this.housesDialogTown=e,this.housesDialogVisible=!0,console.log("housesDialogVisible")},selectWorker(e){this.selectWorkerHouseKey=e,this.selectWorkerDialogVisible=!0,console.log("selectWorkerDialogVisible")},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);const n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileParse(e){let t=e.target.result,r=JSON.parse(t);r.userWorkers.forEach(n=>{delete n.tk;const i=this.gameStore.workerStatic[n.charkey];if(!i)throw Error(`unknown charkey ${n.charkey}`);if("wspdLvlup"in n){const o=(i.wspd+n.wspdLvlup)/1e6;n.wspdSheet=Math.round(o*100)/100,delete n.wspdLvlup}if("mspdLvlup"in n){const o=i.mspd/100*(1+n.mspdLvlup/1e6);n.mspdSheet=Math.round(o*100)/100,delete n.mspdLvlup}if("mspdBase"in n&&delete n.mspdBase,"luckLvlup"in n){const o=(i.luck+n.luckLvlup)/1e4;n.luckSheet=Math.round(o*100)/100,delete n.luckLvlup}if(this.gameStore.jobIsWorkshop(n.job)&&(n.job.hk in this.userStore.userWorkshops||(this.userStore.userWorkshops[n.job.hk]={...this.userStore.defaultUserWorkshop},console.log(`userWorkshop #${n.job.hk} not set, using default`))),typeof n.job=="number"){const o=n.job;n.job={kind:"plantzone",pzk:o,storage:n.tnk}}this.gameStore.jobIsPz(n.job)&&!(n.job.pzk in this.gameStore.plantzones)&&(console.log(`removing plantzone job of worker ${n.label}: unknown pzk`,n.job),n.job=null)}),console.log("import parsed"),this.userStore.$patch(r),r.lodgingTaken&&Object.keys(r.lodgingTaken).length>0?(console.log("overwriting lodgingTaken"),this.userStore.lodgingTaken=r.lodgingTaken):console.log("keeping lodgingTaken"),r.lodgingP2W&&Object.keys(r.lodgingP2W).length>0?(console.log("overwriting lodgingP2W"),this.userStore.lodgingP2W=r.lodgingP2W):console.log("keeping lodgingP2W"),console.log("import done"),this.importDialogVisible=!1},fileExport(){var e=document.createElement("a");let t={activateAncado:this.userStore.activateAncado,lodgingP2W:this.userStore.lodgingP2W,lodgingTaken:this.userStore.lodgingTaken,userWorkers:this.userStore.userWorkers,farmingEnable:this.userStore.farmingEnable,farmingProfit:this.userStore.farmingProfit,farmingBareProfit:this.userStore.farmingBareProfit,grindTakenList:this.userStore.grindTakenList};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="user.json",e.click()},log(e){console.log(e)},showModifierDialog(e){this.modifierDialogVisible=!0,this.modifierDialogRgroup=this.gameStore.plantzoneStatic[e].regiongroup,this.modifierDialogWkld=this.gameStore.plantzones[e].peg.time,this.modifierDialogWspd=this.userStore.workedPlantzones.has(String(e))?this.userStore.pzJobs[e].worker.wspdSheet+this.gameStore.wspdBonus(this.userStore.pzJobs[e].worker,"farm"):150},panToHash(){this.$route.hash&&(this.panToPzk=this.$route.hash.replace("#node",""))},panToPaPos(e){this.panPaPos=e},setClickedNode(e){this.clickedNode=e}},mounted(){this.panToHash()}},Te=e=>(Xe("data-v-f3b35f3b"),e=e(),Ye(),e),iAt=Te(()=>y("button",null,"import",-1)),oAt=Te(()=>y("br",null,null,-1)),aAt={style:{width:"24em"}},sAt=N("Test with workspeed: "),lAt={id:"canvas-limiter"},uAt={key:0},cAt=["src"],fAt={key:1},hAt=Te(()=>y("br",null,null,-1)),dAt=Te(()=>y("br",null,null,-1)),pAt={id:"topleft"},vAt=Te(()=>y("summary",null,"Empire",-1)),gAt={id:"leftside"},mAt={id:"rightside"},_At={id:"totals"},yAt={class:"fsxs"},bAt=Te(()=>y("br",null,null,-1)),wAt={key:0,title:"CP not allocated for fences, enable Farming on Settings page"},SAt={key:1,title:"not all fences being worked, for best results either send 10 workers or none at all"},TAt=Te(()=>y("br",null,null,-1)),kAt=Te(()=>y("br",null,null,-1)),PAt=Te(()=>y("br",null,null,-1)),EAt={class:"fsxs"},CAt=N(" invested for droprate: "),AAt=["title"],MAt=Te(()=>y("br",null,null,-1)),xAt=Te(()=>y("br",null,null,-1)),LAt=Te(()=>y("br",null,null,-1)),IAt=Te(()=>y("br",null,null,-1)),OAt=Te(()=>y("br",null,null,-1)),RAt=Te(()=>y("br",null,null,-1)),DAt={class:"fsxs"},NAt=Te(()=>y("br",null,null,-1)),FAt=Te(()=>y("br",null,null,-1)),$At=Te(()=>y("br",null,null,-1)),BAt=Te(()=>y("br",null,null,-1)),zAt=N(" (M$/day/CP) "),VAt={class:"fsxs"},UAt=Te(()=>y("br",null,null,-1)),WAt=Te(()=>y("br",null,null,-1)),GAt=Te(()=>y("br",null,null,-1)),jAt=Te(()=>y("br",null,null,-1)),HAt=Te(()=>y("div",{style:{clear:"both"}},null,-1)),XAt={id:"workerlist"},YAt=Te(()=>y("summary",null,"All towns/workers list",-1)),qAt=N(" show: "),ZAt={class:"switch mauto"},KAt=Te(()=>y("span",{class:"slider"},null,-1)),JAt=N(" names "),QAt={class:"switch mauto"},tMt=["disabled"],eMt=Te(()=>y("span",{class:"slider"},null,-1)),rMt=N(" stat ranks "),nMt={class:"switch mauto"},iMt=["disabled"],oMt=Te(()=>y("span",{class:"slider"},null,-1)),aMt=N(" stats after skills "),sMt={class:"switch mauto"},lMt=Te(()=>y("span",{class:"slider"},null,-1)),uMt=N(" efficiency ");function cMt(e,t,r,n,i,o){const a=Qt("WorkerEdit"),s=Qt("ModalDialog"),l=Qt("WorkerSendSelection"),u=Qt("LodgingSelection"),c=Qt("HousesSelection"),f=Qt("WorkerSelection"),h=Qt("FloatingModifierEdit"),d=Qt("NodeMap"),p=Qt("EmpireOverview"),v=Qt("MapSelectedInfo"),m=Qt("TownWorkers");return I(),O(j,null,[Et(s,{show:e.workerDialogVisible,"onUpdate:show":t[1]||(t[1]=g=>e.workerDialogVisible=g)},{default:we(()=>[Et(a,{workerEditing:e.workerEditing,workerInitial:e.workerEditingInitial,initialProfit:e.workerEditingInitialProfit,show:e.workerDialogVisible,"onUpdate:show":t[0]||(t[0]=g=>e.workerDialogVisible=g)},null,8,["workerEditing","workerInitial","initialProfit","show"])]),_:1},8,["show"]),Et(s,{show:e.sendDialogVisible,"onUpdate:show":t[3]||(t[3]=g=>e.sendDialogVisible=g)},{default:we(()=>[Et(l,{w:e.sendDialogWorker,show:e.sendDialogVisible,"onUpdate:show":t[2]||(t[2]=g=>e.sendDialogVisible=g)},null,8,["w","show"])]),_:1},8,["show"]),Et(s,{show:e.lodgingDialogVisible,"onUpdate:show":t[5]||(t[5]=g=>e.lodgingDialogVisible=g)},{default:we(()=>[Et(u,{tk:e.lodgingDialogTown,o:e.lodgingDialogData,show:e.lodgingDialogVisible,"onUpdate:show":t[4]||(t[4]=g=>e.lodgingDialogVisible=g)},null,8,["tk","o","show"])]),_:1},8,["show"]),Et(s,{show:e.housesDialogVisible,"onUpdate:show":t[7]||(t[7]=g=>e.housesDialogVisible=g)},{default:we(()=>[Et(c,{tk:e.housesDialogTown,show:e.housesDialogVisible,"onUpdate:show":t[6]||(t[6]=g=>e.housesDialogVisible=g)},null,8,["tk","show"])]),_:1},8,["show"]),Et(s,{show:e.selectWorkerDialogVisible,"onUpdate:show":t[9]||(t[9]=g=>e.selectWorkerDialogVisible=g)},{default:we(()=>[Et(f,{hk:e.selectWorkerHouseKey,show:e.selectWorkerDialogVisible,"onUpdate:show":t[8]||(t[8]=g=>e.selectWorkerDialogVisible=g)},null,8,["hk","show"])]),_:1},8,["show"]),Et(s,{show:e.importDialogVisible,"onUpdate:show":t[12]||(t[12]=g=>e.importDialogVisible=g)},{default:we(()=>[y("form",{onSubmit:t[11]||(t[11]=Gd(g=>o.fileImport(g),["prevent"]))},[y("input",{type:"file",accept:".json",onClick:t[10]||(t[10]=g=>o.fileImport())}),iAt,oAt],32)]),_:1},8,["show"]),Et(s,{show:e.modifierDialogVisible,"onUpdate:show":t[15]||(t[15]=g=>e.modifierDialogVisible=g)},{default:we(()=>[Et(h,{rgk:e.modifierDialogRgroup,wspd:e.modifierDialogWspd,workload:e.modifierDialogWkld,show:e.modifierDialogVisible,"onUpdate:show":t[13]||(t[13]=g=>e.modifierDialogVisible=g)},null,8,["rgk","wspd","workload","show"]),y("div",aAt,[sAt,ht(y("input",{type:"range",class:"vmid","onUpdate:modelValue":t[14]||(t[14]=g=>e.modifierDialogWspd=g),min:"40",max:"200",step:"0.01"},null,512),[[ie,e.modifierDialogWspd,void 0,{number:!0}]]),N(" "+A(e.modifierDialogWspd),1)])]),_:1},8,["show"]),y("main",null,[y("div",lAt,[Et(d,{clickedObj:e.clickedNode,"onUpdate:clickedObj":t[16]||(t[16]=g=>e.clickedNode=g),hoverInfo:e.hoverInfo,"onUpdate:hoverInfo":t[17]||(t[17]=g=>e.hoverInfo=g),panToPzk:e.panToPzk,"onUpdate:panToPzk":t[18]||(t[18]=g=>e.panToPzk=g),panPaPos:e.panPaPos,"onUpdate:panPaPos":t[19]||(t[19]=g=>e.panPaPos=g),onPanAnywhere:t[20]||(t[20]=g=>e.panPaPos=null)},null,8,["clickedObj","hoverInfo","panToPzk","panPaPos"]),e.hoverInfo&&e.hoverInfo.object?(I(),O("div",{key:0,id:"tooltip",style:Nl({left:e.hoverInfo.x+"px",top:e.hoverInfo.y+"px"})},[N(A(e.hoverInfo.object.key)+" "+A(n.gameStore.uloc.node[e.hoverInfo.object.key])+" "+A(e.hoverInfo.object.thisCpCost)+"CP ",1),e.hoverInfo.object.key in this.gameStore.plantzones?(I(),O("span",uAt,[(I(!0),O(j,null,Ct(this.gameStore.plantzones[e.hoverInfo.object.key].itemkeys,g=>(I(),O("img",{src:o.makeIconSrc(g),class:"iconitem"},null,8,cAt))),256))])):tt("",!0),e.hoverInfo.object.key in this.gameStore._tnk2tk?(I(),O("span",fAt,[hAt,N("[town "+A(this.gameStore._tnk2tk[e.hoverInfo.object.key])+"] ",1)])):tt("",!0),dAt],4)):tt("",!0),y("div",pAt,[y("details",null,[vAt,Et(p,{onPanToPaPos:o.panToPaPos},null,8,["onPanToPaPos"])])]),y("div",gAt,[Et(v,{clickedNode:e.clickedNode,onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos,onShowModifierDialog:o.showModifierDialog,onSetClickedNode:o.setClickedNode,onSelectWorker:o.selectWorker},null,8,["clickedNode","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos","onShowModifierDialog","onSetClickedNode","onSelectWorker"])]),y("div",mAt,[y("div",_At,[y("details",null,[y("summary",null,"Total workers: "+A(n.userStore.countWorkers),1),y("p",yAt,[N(" nodes: "+A(n.userStore.workedPlantzones.size)+" ",1),bAt,n.userStore.workersFarmingCount?(I(),O(j,{key:0},[n.userStore.farmingEnable?n.userStore.workersFarmingCount&&n.userStore.workersFarmingCount<10?(I(),O("abbr",SAt,"\u26A0\uFE0F")):tt("",!0):(I(),O("abbr",wAt,"\u26A0\uFE0F")),N(" farming: "+A(n.userStore.workersFarmingCount)+" ",1),TAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),O(j,{key:1},[N(" workshop: "+A(n.userStore.workersWorkshopCount)+" ",1),kAt],64)):tt("",!0),n.userStore.workersCustomCount?(I(),O(j,{key:2},[N(" custom: "+A(n.userStore.workersCustomCount)+" ",1),PAt],64)):tt("",!0),n.userStore.workersIdleCount?(I(),O(j,{key:3},[N(" \u26A0\uFE0F idle: "+A(n.userStore.workersIdleCount),1)],64)):tt("",!0)])]),y("details",null,[y("summary",null,"Total CP: "+A(o.formatFixed(n.userStore.totalCP+n.userStore.autotakenGrindNodesCP)),1),y("p",EAt,[n.userStore.autotakenGrindNodesCP?(I(),O(j,{key:0},[CAt,y("abbr",{class:"tooltip",title:n.userStore.grindTakenDesc},A(n.userStore.autotakenGrindNodesCP),9,AAt),MAt],64)):tt("",!0),N(" nodes: "+A(n.userStore.autotakenNodesCP)+" ",1),xAt,N(" lodging/storage: "+A(n.userStore.lodgage)+" ",1),LAt,n.userStore.farmingEnable?(I(),O(j,{key:1},[N(" farming: "+A(n.userStore.farmingCP)+" ",1),IAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),O(j,{key:2},[N(" workshops: "+A(o.formatFixed(n.userStore.workshopTotalCP))+" ",1),OAt],64)):tt("",!0),n.userStore.workersCustomCount?(I(),O(j,{key:3},[N(" custom: "+A(o.formatFixed(n.userStore.customTotalCP))+" ",1),RAt],64)):tt("",!0)])]),y("details",null,[y("summary",null,"Total M$/day: "+A(o.formatFixed(n.userStore.allJobsTotalDailyProfit,2)),1),y("p",DAt,[N(" nodes: "+A(o.formatFixed(n.userStore.pzJobsTotalDailyProfit,2))+" ",1),NAt,n.userStore.workersFarmingCount?(I(),O(j,{key:0},[N(" farming: "+A(o.formatFixed(n.userStore.farmingTotalProfit,2))+" ",1),FAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),O(j,{key:1},[N(" workshops: "+A(o.formatFixed(n.userStore.workshopTotalProfit,2))+" ",1),$At],64)):tt("",!0),n.userStore.workersCustomCount?(I(),O(j,{key:2},[N(" custom: "+A(o.formatFixed(n.userStore.customTotalProfit,2))+" ",1),BAt],64)):tt("",!0)])]),y("details",null,[y("summary",null,"Total efficiency: "+A(o.formatFixed(n.userStore.allJobsDailyProfitPerCp,3)),1),zAt,y("p",VAt,[N(" nodes: "+A(o.formatFixed(n.userStore.pzJobsDailyProfitPerCp,3))+" ",1),UAt,n.userStore.farmingEnable?(I(),O(j,{key:0},[N(" farming: "+A(o.formatFixed(n.userStore.farmingJobsDailyProfitPerCp,3))+" ",1),WAt],64)):tt("",!0),n.userStore.workersWorkshopCount?(I(),O(j,{key:1},[N(" workshop: "+A(o.formatFixed(n.userStore.workshopJobsDailyProfitPerCp,3))+" ",1),GAt],64)):tt("",!0),n.userStore.workersCustomCount?(I(),O(j,{key:2},[N(" custom: "+A(o.formatFixed(n.userStore.customJobsDailyProfitPerCp,3))+" ",1),jAt],64)):tt("",!0)])])]),HAt,y("div",XAt,[y("details",null,[YAt,qAt,y("label",ZAt,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[21]||(t[21]=g=>n.userStore.displayWorkerNames=g)},null,512),[[sr,n.userStore.displayWorkerNames]]),KAt,JAt]),y("label",QAt,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[22]||(t[22]=g=>n.userStore.displayWorkerStatsRank=g),disabled:n.userStore.displayWorkerStatsForPz},null,8,tMt),[[sr,n.userStore.displayWorkerStatsRank]]),eMt,rMt]),y("label",nMt,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[23]||(t[23]=g=>n.userStore.displayWorkerStatsForPz=g),disabled:n.userStore.displayWorkerStatsRank},null,8,iMt),[[sr,n.userStore.displayWorkerStatsForPz]]),oMt,aMt]),y("label",sMt,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[24]||(t[24]=g=>n.userStore.displayProfitPerCp=g)},null,512),[[sr,n.userStore.displayProfitPerCp]]),lMt,uMt]),y("button",{onClick:t[25]||(t[25]=g=>e.importDialogVisible=!0)},"import"),y("button",{onClick:t[26]||(t[26]=g=>o.fileExport())},"export"),tt("",!0),y("button",{onClick:t[28]||(t[28]=g=>o.fireAll())},"fire all"),y("table",null,[(I(!0),O(j,null,Ct(n.gameStore.lodgingPerTown,(g,_)=>(I(),xo(m,{o:g,tk:Number(_),onSelectLodging:o.selectLodging,onSelectHouses:o.selectHouses,onHireWorker:o.hireWorker,onEditWorker:o.editWorker,onSendWorker:o.sendWorker,onPanToPaPos:o.panToPaPos},null,8,["o","tk","onSelectLodging","onSelectHouses","onHireWorker","onEditWorker","onSendWorker","onPanToPaPos"]))),256))])])])])])])],64)}const fMt=be(nAt,[["render",cMt],["__scopeId","data-v-f3b35f3b"]]);const hMt={setup(){const e=Wt(),t=_t(),r=ai(),n=Mp();return n.$subscribe((i,o)=>{localStorage.setItem("map",JSON.stringify(o))}),e.$subscribe((i,o)=>{const a=Date.now();localStorage.setItem("user",JSON.stringify(o)),console.log("userStore subscription took",Date.now()-a,"ms")}),{marketStore:r,userStore:e,gameStore:t,mapStore:n}},data:()=>({wspd:150,mspd:10,luck:10,isGiant:!1,mediahNodes:new Set([1210,1212,1215,1216,1219,1217,1213,1220,1205,1218]),towns:[-1],filterTown:-1}),methods:{makeIconSrc:Dn,formatFixed:wt,formatDropQty(e){return e<.1?wt(e,3):wt(e,2)},highlightHash(){if(this.$route.hash){const e=document.querySelector(this.$route.hash);e&&(e.scrollIntoView(),e.classList.add("anim"))}},setMedianChar(e){if(!e)return;const t=this.gameStore.workerStatic[e];let r=t.wspd,n=0,i=t.luck;for(let a=2;a<=40;a++)r+=(t.wspd_lo+t.wspd_hi)/2,n+=(t.mspd_lo+t.mspd_hi)/2,i+=(t.luck_lo+t.luck_hi)/2;let o=t.mspd*(1+n/1e6);this.wspd=Math.round(r/1e6*100)/100,this.mspd=Math.round(o)/100,this.luck=Math.round(i/1e4*100)/100,this.isGiant=this.gameStore.isGiant(e)}},computed:{allPlantzonesNearestCpTownProfit(){const e=Date.now(),t=[];for(const r of Object.values(this.gameStore.plantzones)){const n=r.key,i=this.mediahNodes.has(n)?3:2;let o=this.gameStore.dijkstraNearestTowns(n,i,void 0,void 0,!0);o.sort((u,c)=>u[1]-c[1]);let a={},s={};for(let u=0;u<o.length;u++){const[c,f]=o[u],h=this.gameStore.profitPzTownArtisans(n,c,f);if(c!=1343&&h.connected){if(s[h.tnk]=h.dailyPerCp,!("priceDaily"in a)){a=h;continue}h.dailyPerCp>a.dailyPerCp&&(a=h)}}if(!("alt_workers"in a))throw new Error(`Failed to calc alt_workers for pzk=${n}`);const l=Object.entries(s).map(([u,c])=>({tnk:u,dailyPerCp:c}));l.sort((u,c)=>c.dailyPerCp-u.dailyPerCp),a.alt_towns_dict=s,a.alt_towns=l,t.push(a)}return console.log("cpt: plantzonesNearestCpTownProfit took",Date.now()-e,"ms"),t},allPlantzonesNearestCpTownProfit_sorted(){const e=this.allPlantzonesNearestCpTownProfit.filter(t=>this.filterTown==-1||t.tnk==this.filterTown);return e.sort((t,r)=>isFinite(r.dailyPerCp-t.dailyPerCp)?r.dailyPerCp-t.dailyPerCp:isFinite(t.dailyPerCp)?-1:1),e},townsFilter(){return this.gameStore.townsWithLodging.map(e=>e==1343?-1:e)}},mounted(){this.highlightHash()},updated(){this.$nextTick(()=>this.highlightHash())}},rr=e=>(Xe("data-v-3eece027"),e=e(),Ye(),e),dMt={id:"toptext"},pMt=rr(()=>y("p",null," Profits here are calculated using average level 40 stats for artisan workers at corresponding town (papu/dokkebi/etc), with only one skill - Farm Knowledge (+5\u{1F528}). Home page has more tiers, levels, and skills. ",-1)),vMt=rr(()=>y("p",null," Note that CP costs shown here are independent for each node. In practice however, multiple resource nodes can reuse the same town connection, resulting in higher combined $/CP. ",-1)),gMt=rr(()=>y("p",null," For example, taking both Shakatu Fig nodes is not 3+3 but 3+1 CP. Use worker management on Home page to take this (and also lodging/storage costs) into account. ",-1)),mMt=rr(()=>y("p",null," Don't forget to set up your server and prices on Settings page and maybe take a look at Modifiers as well. \u{1F47A}=goblin, \u{1F468}=human, \u{1F422}=giant, hover for more info ",-1)),_Mt=N(" Only show entries with best town = "),yMt=["value"],bMt={class:"scroll"},wMt=rr(()=>y("th",{rowspan:"2"},"Node",-1)),SMt=rr(()=>y("th",{colspan:"3"},"cycle drops",-1)),TMt=rr(()=>y("th",{colspan:"3"},"best town",-1)),kMt=rr(()=>y("th",{colspan:"2"},"best worker",-1)),PMt=rr(()=>y("th",{rowspan:"2"},"workload",-1)),EMt=rr(()=>y("th",{colspan:"3"},"daily",-1)),CMt={key:0,rowspan:"2"},AMt=rr(()=>y("abbr",{class:"tooltip nound",title:"assigned on Home page?"},"\u{1F3E0}",-1)),MMt=[AMt],xMt=N("unlucky "),LMt={class:"fss"},IMt=N("["),OMt=N(" with giant bonus]"),RMt=rr(()=>y("th",null,"lucky",-1)),DMt=rr(()=>y("th",null,"$ value",-1)),NMt=rr(()=>y("th",null,"name",-1)),FMt=rr(()=>y("th",null,"walk",-1)),$Mt=rr(()=>y("th",null,"CP",-1)),BMt=rr(()=>y("th",null,"type",-1)),zMt=rr(()=>y("th",null,"wspd",-1)),VMt=rr(()=>y("th",null,"cycles",-1)),UMt=rr(()=>y("th",null,"M$",-1)),WMt=rr(()=>y("th",null,"M$/CP",-1)),GMt=["id"],jMt=["src"],HMt={key:0,class:"fss"},XMt={class:"tac"},YMt=["src"],qMt={class:"tac"},ZMt={class:"tac"},KMt=["title"],JMt={class:"tac"},QMt={class:"tac"},t4t={class:"tac"},e4t=["title"],r4t={class:"tac"},n4t={class:"tac"},i4t={class:"tac"},o4t={class:"tac"},a4t={class:"tac"},s4t={key:0,class:"tac"},l4t={key:0,class:"tooltip nound",title:"all good"},u4t=["title"],c4t=N(" \u26A0\uFE0F "),f4t=N(" \u2714\uFE0F "),h4t=["title"],d4t={key:1,class:"tooltip nound",title:"not assigned"};function p4t(e,t,r,n,i,o){const a=Qt("RouterLink");return I(),O("main",null,[y("div",dMt,[pMt,vMt,gMt,mMt,_Mt,ht(y("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>e.filterTown=s)},[(I(!0),O(j,null,Ct(o.townsFilter,s=>(I(),O("option",{value:s},A(s>=0?n.gameStore.nodeName(s):"any"),9,yMt))),256))],512),[[ar,e.filterTown]])]),y("div",bMt,[y("table",null,[y("tr",null,[wMt,SMt,TMt,kMt,PMt,EMt,n.userStore.workedPlantzones.size?(I(),O("th",CMt,MMt)):tt("",!0)]),y("tr",null,[y("th",null,[xMt,y("span",LMt,[IMt,ht(y("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>e.isGiant=s)},null,512),[[sr,e.isGiant]]),OMt])]),RMt,DMt,NMt,FMt,$Mt,BMt,zMt,VMt,UMt,WMt]),(I(!0),O(j,null,Ct(o.allPlantzonesNearestCpTownProfit_sorted,s=>(I(),O("tr",{id:"drops"+s.key},[y("td",null,[Et(a,{tag:"a",to:{path:"./",hash:"#node"+s.key}},{default:we(()=>[N(A(n.gameStore.plantzoneName(s.key)),1)]),_:2},1032,["to"])]),y("td",null,[(I(!0),O(j,null,Ct(s.unlucky,(l,u)=>(I(),O("div",null,[Et(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:we(()=>[y("span",null,[N(A(o.formatDropQty(l))+" ",1),y("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,jMt),N(" "+A(n.gameStore.uloc.item[u]),1)])]),_:2},1032,["to"]),e.isGiant?(I(),O("span",HMt," ["+A(o.formatDropQty(s.unlucky_gi[u]))+"] ",1)):tt("",!0)]))),256))]),y("td",XMt,[(I(!0),O(j,null,Ct(s.lucky,(l,u)=>(I(),O("div",null,[Et(a,{tag:"a",to:{path:"./settings",hash:"#item"+u}},{default:we(()=>[N(A(o.formatDropQty(l))+"\xA0",1),y("img",{src:o.makeIconSrc(u),class:"iconitem"},null,8,YMt)]),_:2},1032,["to"])]))),256))]),y("td",qMt,A(o.formatFixed(s.cycleValue,0)),1),y("td",ZMt,[y("abbr",{class:"tooltip nound",title:s.alt_towns.map(l=>`${n.gameStore.nodeName(l.tnk)}: ${o.formatFixed(l.dailyPerCp,2)} M$/day/CP \u2192 ${o.formatFixed(100*l.dailyPerCp/s.dailyPerCp)}%`).join(`
`)},A(n.gameStore.nodeName(s.tnk)),9,KMt)]),y("td",JMt,A(o.formatFixed(s.dist,0)),1),y("td",QMt,A(s.cp),1),y("td",t4t,[y("abbr",{class:"tooltip nound",title:s.alt_workers.map(l=>`${n.gameStore.uloc.char[l.charkey]}: ${o.formatFixed(l.priceDaily,2)} M$/day \u2192 ${o.formatFixed(100*l.priceDaily/s.priceDaily)}%`).join(`
`)},A({goblin:"\u{1F47A}",giant:"\u{1F422}",human:"\u{1F468}"}[s.kind]),9,e4t)]),y("td",r4t,A(o.formatFixed(s.wspd+5,1)),1),y("td",n4t,[n.userStore.allowFloating&&n.userStore.useFloatingModifiers[s.regiongroup]?(I(),O(j,{key:0},[N(" ~"+A(o.formatFixed(n.userStore.medianWorkloads[s.key],2)),1)],64)):(I(),O(j,{key:1},[N(A(o.formatFixed(s.activeWorkload,2)),1)],64))]),y("td",i4t,A(o.formatFixed(s.cyclesDaily,1)),1),y("td",o4t,A(o.formatFixed(s.priceDaily,2)),1),y("td",a4t,A(o.formatFixed(s.dailyPerCp,3)),1),n.userStore.workedPlantzones.size?(I(),O("td",s4t,[n.userStore.workedPlantzones.has(s.key.toString())?(I(),O(j,{key:0},[n.userStore.pzJobs[s.key].worker.tnk==s.tnk?(I(),O(j,{key:0},[n.userStore.pzJobs[s.key].worker.charkey==s.charkey?(I(),O("abbr",l4t,"\u2714\uFE0F")):(I(),O("abbr",{key:1,class:"tooltip nound",title:`worker used: ${n.gameStore.uloc.char[n.userStore.pzJobs[s.key].worker.charkey]}
suggested: ${n.gameStore.uloc.char[s.charkey]}`+(n.userStore.pzJobs[s.key].worker.charkey in s.alt_workers_dict?` (${o.formatFixed(s.priceDaily/s.alt_workers_dict[n.userStore.pzJobs[s.key].worker.charkey]*100-100)}% better)`:"")},[n.userStore.pzJobs[s.key].worker.charkey in s.alt_workers_dict&&s.priceDaily/s.alt_workers_dict[n.userStore.pzJobs[s.key].worker.charkey]>1.1?(I(),O(j,{key:0},[c4t],64)):(I(),O(j,{key:1},[f4t],64))],8,u4t))],64)):(I(),O("abbr",{key:1,class:"tooltip nound",title:`town used: ${n.gameStore.nodeName(n.userStore.pzJobs[s.key].worker.tnk)}
suggested: ${n.gameStore.nodeName(s.tnk)}`+(n.userStore.pzJobs[s.key].worker.tnk in s.alt_towns_dict?` (${o.formatFixed(s.dailyPerCp/s.alt_towns_dict[n.userStore.pzJobs[s.key].worker.tnk]*100-100)}% better)`:"")}," \u26A0\uFE0F ",8,h4t))],64)):(I(),O("abbr",d4t,"\u274C"))])):tt("",!0)],8,GMt))),256))])])])}const v4t=be(hMt,[["render",p4t],["__scopeId","data-v-3eece027"]]),g4t={setup(){const e=_t(),t=Wt(),r=ai();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),created(){},mounted(){},watch:{},methods:{}},m4t=y("br",null,null,-1),_4t=y("br",null,null,-1),y4t=y("tr",null,[y("th"),y("th",null,"Town / House"),y("th",null,"Lodging"),y("th",null,"CP")],-1),b4t=y("td",null,null,-1),w4t={class:"header"},S4t=N(" P2W: "),T4t=["onUpdate:modelValue"],k4t=["onUpdate:modelValue"],P4t=["href"];function E4t(e,t,r,n,i,o){return I(),O("main",null,[N(" Total lodging slots: "+A(n.userStore.haveLodging.slots.total),1),m4t,N(" Total CP spent: "+A(n.userStore.haveLodging.cp.total),1),_4t,y("table",null,[y4t,(I(!0),O(j,null,Ct(n.gameStore.lodgingPerTown,(a,s)=>(I(),O(j,null,[y("tr",null,[b4t,y("td",null,[y("span",w4t,A(n.gameStore.uloc.town[s]),1),S4t,ht(y("input",{type:"number","onUpdate:modelValue":l=>n.userStore.lodgingP2W[s]=l,class:"short"},null,8,T4t),[[ie,n.userStore.lodgingP2W[s],void 0,{number:!0}]])]),y("td",null,A(n.userStore.haveLodging.slots.perTown[s]),1),y("td",null,A(n.userStore.haveLodging.cp.perTown[s]),1)]),(I(!0),O(j,null,Ct(a.houses,l=>(I(),O("tr",null,[y("td",null,[ht(y("input",{type:"checkbox","onUpdate:modelValue":u=>n.userStore.lodgingTaken[l.key]=u},null,8,k4t),[[sr,n.userStore.lodgingTaken[l.key]]])]),y("td",null,[y("a",{href:"https://bdocodex.com/us/npc/"+l.key},A(n.gameStore.uloc.char[l.key]),9,P4t)]),y("td",null,A(l.lodgingSpaces),1),y("td",null,A(l.CP),1)]))),256))],64))),256))])])}const C4t=be(g4t,[["render",E4t]]);const A4t={setup(){const e=_t(),t=Wt(),r=ai();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:kk,FloatingModifierEdit:HP},data:()=>({floatingDialogWspd:150,floatingDialogRgroup:1,floatingDialogWkld:400,floatingDialogVisible:!1,importDialogVisible:!1}),watch:{"userStore.useFloatingModifiers":{handler(e,t){},deep:!0}},methods:{formatFixed:wt,fileParse(e){let t=e.target.result,r=JSON.parse(t);this.userStore.$patch(r),this.setAllFloating(!0),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},showDialog(e){this.floatingDialogVisible=!0,this.floatingDialogRgroup=Number(e);for(let t of this.gameStore.regionGroups[e]){this.floatingDialogWkld=this.gameStore.plantzones[t].peg.time;break}},fileExport(){var e=document.createElement("a");let t={regionModifiers:this.userStore.regionModifiers,regionModifiers2:this.userStore.regionModifiers2};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="modifiers.json",e.click()},clear(){this.userStore.regionModifiers={},this.userStore.regionModifiers2={}},setAllFloating(e){const t={};for(const r of Object.keys(this.gameStore.regionGroups))t[r]=e;this.userStore.useFloatingModifiers=t}}},Xi=e=>(Xe("data-v-72ed98b5"),e=e(),Ye(),e),M4t=Xi(()=>y("button",null,"import",-1)),x4t=Xi(()=>y("br",null,null,-1)),L4t=N(" Test on node: "),I4t=["value"],O4t=Xi(()=>y("br",null,null,-1)),R4t=N(" With workspeed: "),D4t={id:"toptext"},N4t=Xi(()=>y("p",null,"Productivity modifiers are shown ingame as green bars at world map > resource view. Some green bars are hidden though, for those you can see the current workload for a specific node in ingame worker assignment panel and calculate the modifier off that.",-1)),F4t=Xi(()=>y("p",null,"Low modifier means lots of players are working in the area and workloads are increased (up to 2x of base).",-1)),$4t=Xi(()=>y("p",null,"If unspecified, 0% modifier will be used (= max workload = longest cycle = min cycles per day = min profit)",-1)),B4t=Xi(()=>y("summary",null,"Advanced",-1)),z4t=N("allow floating modifiers "),V4t={key:0},U4t=Xi(()=>y("tr",null,[y("th",null,"#"),y("th",null,"Modifier%"),y("th",null,"Contains nodes")],-1)),W4t={class:"center"},G4t={class:"center"},j4t={key:0,class:"switch mauto"},H4t=["onUpdate:modelValue"],X4t=Xi(()=>y("span",{class:"slider"},null,-1)),Y4t=N(" floating"),q4t=Xi(()=>y("br",null,null,-1)),Z4t=["onClick"],K4t=N(" constant"),J4t=Xi(()=>y("br",null,null,-1)),Q4t=["onUpdate:modelValue"];function t5t(e,t,r,n,i,o){const a=Qt("ModalDialog"),s=Qt("FloatingModifierEdit"),l=Qt("RouterLink");return I(),O(j,null,[Et(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:we(()=>[y("form",{onSubmit:t[1]||(t[1]=Gd(u=>o.fileImport(u),["prevent"]))},[y("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),M4t],32)]),_:1},8,["show"]),Et(a,{show:e.floatingDialogVisible,"onUpdate:show":t[6]||(t[6]=u=>e.floatingDialogVisible=u)},{default:we(()=>[Et(s,{rgk:e.floatingDialogRgroup,wspd:e.floatingDialogWspd,workload:e.floatingDialogWkld,show:e.floatingDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.floatingDialogVisible=u)},null,8,["rgk","wspd","workload","show"]),x4t,L4t,ht(y("select",{"onUpdate:modelValue":t[4]||(t[4]=u=>e.floatingDialogWkld=u)},[(I(!0),O(j,null,Ct(n.gameStore.regionGroups[e.floatingDialogRgroup],u=>(I(),O("option",{value:n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time},A(n.gameStore.plantzoneName(u))+" - "+A(n.gameStore.plantzones[u]&&n.gameStore.plantzones[u].peg.time)+" base ",9,I4t))),256))],512),[[ar,e.floatingDialogWkld]]),O4t,R4t,ht(y("input",{type:"range",class:"vmid","onUpdate:modelValue":t[5]||(t[5]=u=>e.floatingDialogWspd=u),min:"40",max:"200",step:"0.01"},null,512),[[ie,e.floatingDialogWspd,void 0,{number:!0}]]),N(" "+A(e.floatingDialogWspd),1)]),_:1},8,["show"]),y("div",D4t,[N4t,F4t,$4t,y("details",null,[B4t,y("button",{onClick:t[7]||(t[7]=u=>e.importDialogVisible=!0)},"import"),y("button",{onClick:t[8]||(t[8]=u=>o.fileExport())},"export"),y("button",{onClick:t[9]||(t[9]=u=>o.clear())},"clear"),y("label",null,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.allowFloating=u)},null,512),[[sr,n.userStore.allowFloating]]),z4t]),n.userStore.allowFloating?(I(),O("span",V4t,[y("button",{onClick:t[11]||(t[11]=u=>o.setAllFloating(!0))},"all floating"),y("button",{onClick:t[12]||(t[12]=u=>o.setAllFloating(!1))},"all constant")])):tt("",!0)])]),y("table",null,[U4t,(I(!0),O(j,null,Ct(n.gameStore.regionGroups,(u,c)=>(I(),O("tr",null,[y("td",W4t,A(c),1),y("td",G4t,[n.userStore.allowFloating?(I(),O("label",j4t,[ht(y("input",{type:"checkbox","onUpdate:modelValue":f=>n.userStore.useFloatingModifiers[c]=f},null,8,H4t),[[sr,n.userStore.useFloatingModifiers[c]]]),X4t])):tt("",!0),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(I(),O(j,{key:1},[Y4t,q4t,N(" ~"+A(o.formatFixed(n.userStore.medianModifiers[c],2))+" ",1),y("button",{onClick:f=>o.showDialog(c)},"edit",8,Z4t)],64)):(I(),O(j,{key:2},[K4t,J4t,ht(y("input",{type:"number","onUpdate:modelValue":f=>n.userStore.regionModifiers[c]=f,min:"0",max:"100",step:"0.01",class:"w42em"},null,8,Q4t),[[ie,n.userStore.regionModifiers[c],void 0,{number:!0}]])],64))]),y("td",null,[(I(!0),O(j,null,Ct(u,f=>(I(),O("div",null,[Et(l,{tag:"a",to:{path:"./",hash:"#node"+f}},{default:we(()=>[N(A(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"]),N(" "+A(n.gameStore.ready&&n.gameStore.plantzones[f].peg.time)+" ",1),n.userStore.allowFloating&&n.userStore.useFloatingModifiers[c]?(I(),O(j,{key:0},[N(" \u2933 "+A(o.formatFixed(n.userStore.medianWorkloads[f],2)),1)],64)):(I(),O(j,{key:1},[N(" \u2192 "+A(n.gameStore.ready?o.formatFixed(n.gameStore.plantzones[f].activeWorkload,2):""),1)],64))]))),256))])]))),256))])],64)}const e5t=be(A4t,[["render",t5t],["__scopeId","data-v-72ed98b5"]]);const r5t={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},props:{show:{type:Boolean,default:!1}},created(){this.fetchData()},data:()=>({houses:{},towns:[-1],usages:[-1],levels:[-1],filterTown:-1,filterUsage:-1,filterLevel:-1,selectedHouse:-1}),computed:{filteredTowns(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&r.affTown!=694&&e.add(r.affTown);return[...e].sort((t,r)=>t-r)},filteredUsages(){const e=new Set([-1]);for(const[t,r]of Object.entries(this.houses))if(this.filterTown==-1||r.affTown==this.filterTown)for(const[n,i]of Object.entries(r.CraftList))n>10&&e.add(n);return[...e].sort((t,r)=>t-r)},filteredLevels(){const e=new Set([-1]);if(this.filterUsage!=-1)for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&this.filterUsage in r.CraftList&&e.add(r.CraftList[this.filterUsage]);return[...e].sort((t,r)=>t-r)},filteredHouses(){const e=[];for(const[t,r]of Object.entries(this.houses))(this.filterTown==-1||r.affTown==this.filterTown)&&(this.filterUsage==-1||this.filterUsage in r.CraftList)&&(this.filterLevel==-1||this.filterLevel<=r.CraftList[this.filterUsage])&&e.push(Number(t));return e}},methods:{formatFixed:wt,async fetchData(){this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))o>10&&t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)},addWorkshop(e){this.userStore.userWorkshops[e]={...this.userStore.defaultUserWorkshop}},deleteWorkshop(e){delete this.userStore.userWorkshops[e]}}},Tu=e=>(Xe("data-v-fb28c05a"),e=e(),Ye(),e),n5t=Tu(()=>y("h3",null,"\u{1F3ED}Workshops config",-1)),i5t={class:"sa"},o5t=Tu(()=>y("tr",null,[y("th",null,"House"),y("th",null,[N(" label "),y("abbr",{class:"tooltip",title:"for display only"},"\u2139\uFE0F")]),y("th",null,[N(" worktype "),y("abbr",{class:"tooltip",title:`used to factor in some worker skills.
also, only Mass Production can employ multiple workers at once.`},"\u2139\uFE0F")]),y("th",null," workload "),y("th",null,[N(" $/cycle "),y("abbr",{title:`use Sho's Workshop Profitability Calculator & gpw Trading/Crates Calculator to find out.
DO NOT include +1/+3 packing skill, since it's a worker attribute and not a workshop attribute.`,class:"tooltip"},"\u2139\uFE0F")]),y("th",null,[N(" CP "),y("abbr",{title:`Full cost of operating the workshop, including:
1) the workshop itself;
2) house chain to connect the workshop (*after* autoassigned houses shown in Home > town config > Found cost spoiler);
3) storage for input/output mats, if not provided by (2).
The only thing to not include here is lodging for the worker who is going to occupy the workshop.
However, if your workshop house chain does provide lodging, reduce (2) accordingly. 
The house chain can potentially provide storage and lodging not only for this workshop, but for other workshops of this town. 
In this case, use average CP value (sum up all workshop-related CP costs and divide by active workshop count).`,class:"tooltip"},"\u2139\uFE0F")]),y("th",null,"action")],-1)),a5t=["onUpdate:modelValue"],s5t=["onUpdate:modelValue"],l5t=$1('<option value="unk" data-v-fb28c05a>unknown</option><option value="jewelry" data-v-fb28c05a>jewelry</option><option value="mass" data-v-fb28c05a>mass</option><option value="weap" data-v-fb28c05a>weapon</option><option value="tool" data-v-fb28c05a>tool</option><option value="furn" data-v-fb28c05a>furniture</option><option value="costume" data-v-fb28c05a>costume</option><option value="refine" data-v-fb28c05a>refine</option><option value="siege" data-v-fb28c05a>siege</option><option value="mount" data-v-fb28c05a>mount</option><option value="exclus" data-v-fb28c05a>exclusive</option><option value="pack_produce" data-v-fb28c05a>pack_produce</option><option value="pack_herb" data-v-fb28c05a>pack_herb</option><option value="pack_mushr" data-v-fb28c05a>pack_mushr</option><option value="pack_fish" data-v-fb28c05a>pack_fish</option><option value="pack_timber" data-v-fb28c05a>pack_timber</option><option value="pack_ore" data-v-fb28c05a>pack_ore</option>',17),u5t=[l5t],c5t=["onUpdate:modelValue"],f5t=["onUpdate:modelValue"],h5t=["onUpdate:modelValue"],d5t=["onClick"],p5t=N(" new entry:"),v5t=Tu(()=>y("br",null,null,-1)),g5t={class:"borderless"},m5t=Tu(()=>y("td",null,"town",-1)),_5t=["value"],y5t=Tu(()=>y("td",null,"usage",-1)),b5t=["value"],w5t=Tu(()=>y("td",null,"level",-1)),S5t=["value"],T5t=Tu(()=>y("td",null,"house",-1)),k5t=["value"],P5t=["disabled"],E5t={key:0,class:"fsxs"};function C5t(e,t,r,n,i,o){return I(),O(j,null,[n5t,y("table",i5t,[o5t,(I(!0),O(j,null,Ct(n.userStore.userWorkshops,(a,s)=>(I(),O("tr",null,[y("td",null,A(n.gameStore.uloc.char[s]),1),y("td",null,[ht(y("input",{class:"w5em","onUpdate:modelValue":l=>a.label=l},null,8,a5t),[[ie,a.label,void 0,{number:!0}]])]),y("td",null,[ht(y("select",{"onUpdate:modelValue":l=>a.industry=l},u5t,8,s5t),[[ar,a.industry]])]),y("td",null,[ht(y("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualWorkload=l},null,8,c5t),[[ie,a.manualWorkload,void 0,{number:!0}]])]),y("td",null,[ht(y("input",{type:"number",class:"w5em","onUpdate:modelValue":l=>a.manualCycleIncome=l},null,8,f5t),[[ie,a.manualCycleIncome,void 0,{number:!0}]])]),y("td",null,[ht(y("input",{type:"number",class:"float4","onUpdate:modelValue":l=>a.manualCp=l},null,8,h5t),[[ie,a.manualCp,void 0,{number:!0}]])]),y("td",null,[y("button",{onClick:l=>o.deleteWorkshop(s)},"delete",8,d5t)])]))),256))]),p5t,v5t,y("table",g5t,[y("tr",null,[m5t,y("td",null,[ht(y("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(I(!0),O(j,null,Ct(o.filteredTowns,a=>(I(),O("option",{value:a},A(a>=0?n.gameStore.uloc.town[a]:"any"),9,_5t))),256))],512),[[ar,e.filterTown]])])]),y("tr",null,[y5t,y("td",null,[ht(y("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(I(!0),O(j,null,Ct(o.filteredUsages,a=>(I(),O("option",{value:a},A(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,b5t))),256))],512),[[ar,e.filterUsage]])])]),y("tr",null,[w5t,y("td",null,[ht(y("select",{"onUpdate:modelValue":t[2]||(t[2]=a=>e.filterLevel=a)},[(I(!0),O(j,null,Ct(o.filteredLevels,a=>(I(),O("option",{value:a},A(a>=0?a+"+":"any"),9,S5t))),256))],512),[[ar,e.filterLevel]])])]),y("tr",null,[T5t,y("td",null,[ht(y("select",{"onUpdate:modelValue":t[3]||(t[3]=a=>e.selectedHouse=a)},[(I(!0),O(j,null,Ct(o.filteredHouses,a=>(I(),O("option",{value:a},A(a)+" "+A(n.gameStore.uloc.char[a])+" "+A(a in n.userStore.userWorkshops?"\u2714\uFE0F":""),9,k5t))),256))],512),[[ar,e.selectedHouse]])])])]),y("button",{disabled:e.selectedHouse==-1||e.selectedHouse in n.userStore.userWorkshops,onClick:t[4]||(t[4]=a=>o.addWorkshop(e.selectedHouse))},"add",8,P5t),e.selectedHouse in n.userStore.userWorkshops?(I(),O("span",E5t," already in list! ")):tt("",!0)],64)}const A5t=be(r5t,[["render",C5t],["__scopeId","data-v-fb28c05a"]]);const M5t={setup(){const e=_t(),t=Wt(),r=ai();return t.$subscribe((n,i)=>{const o=Date.now();localStorage.setItem("user",JSON.stringify(i)),console.log("userStore subscription took",Date.now()-o,"ms")}),{gameStore:e,userStore:t,marketStore:r}},components:{ModalDialog:kk,WorkerEdit:wB,WorkshopsConfig:A5t},data:()=>({workerDialogVisible:!1,workshopsConfigVisible:!1,highlightPending:!1,importDialogVisible:!1}),watch:{"userStore.marketUrl":{handler(e,t){this.marketStore.fetchData()}}},methods:{makeIconSrc:Dn,formatFixed:wt,reload(){this.marketStore.ready=!1,this.marketStore.fetchData()},highlightHash(){if(!!this.highlightPending&&(console.log("highlighting",this.$route.hash,this.highlightPending),this.$route.hash)){const e=document.querySelector(this.$route.hash);e&&(this.highlightPending=!1,e.scrollIntoView(),e.classList.add("anim"))}},fileParse(e){let t=e.target.result,r=JSON.parse(t);this.userStore.$patch(r),this.importDialogVisible=!1},fileImport(e){if(!e)return;const t=e.target[0].files;if(t.length<1)return;const r=t[0];console.log("fileImport",r);let n=new FileReader;n.onload=this.fileParse,n.readAsText(r)},fileExport(){var e=document.createElement("a");let t={customPrices:this.userStore.customPrices,keepItems:this.userStore.keepItems};const r=JSON.stringify(t);var n=new Blob([r],{type:"text/plain"});e.href=URL.createObjectURL(n),e.download="custom_prices.json",e.click()}},mounted(){this.highlightPending=!0,this.highlightHash()},updated(){this.$nextTick(()=>{this.highlightHash()})}},hr=e=>(Xe("data-v-c8b4ebb0"),e=e(),Ye(),e),x5t=hr(()=>y("button",null,"import",-1)),L5t={id:"toptext"},I5t={class:"settings-tiles"},O5t={class:"settings-tile"},R5t=N(" Server: "),D5t=$1("<option data-v-c8b4ebb0>NA</option><option data-v-c8b4ebb0>EU</option><option data-v-c8b4ebb0>RU</option><option data-v-c8b4ebb0>KR</option><option data-v-c8b4ebb0>JP</option><option data-v-c8b4ebb0>TH</option><option data-v-c8b4ebb0>TW</option><option data-v-c8b4ebb0>SA</option><option data-v-c8b4ebb0>SEA</option><option data-v-c8b4ebb0>MENA</option><option data-v-c8b4ebb0>CEU</option><option data-v-c8b4ebb0>CNA</option>",12),N5t=[D5t],F5t=hr(()=>y("br",null,null,-1)),$5t=hr(()=>y("label",{for:"vp_t"},"VP always on",-1)),B5t=N(") "),z5t=N(" Tax: "),V5t=$1('<option value="0.65" data-v-c8b4ebb0>0.65 (0)</option><option value="0.65325" data-v-c8b4ebb0>0.65325 (1000)</option><option value="0.6565" data-v-c8b4ebb0>0.6565 (4000)</option><option value="0.65975" data-v-c8b4ebb0>0.65975 (7000)</option><option value="0.65975" data-v-c8b4ebb0>0.69225 (7000 + ring)</option><option value="0.845" data-v-c8b4ebb0>0.845 (0 + VP)</option><option value="0.84825" data-v-c8b4ebb0>0.84825 (1000 + VP)</option><option value="0.8515" data-v-c8b4ebb0>0.8515 (4000 + VP)</option><option value="0.85475" data-v-c8b4ebb0>0.85475 (7000 + VP)</option><option value="0.88725" data-v-c8b4ebb0>0.88725 (7000 + ring + VP)</option><option value="1" data-v-c8b4ebb0>1 (ironman)</option>',11),U5t=[V5t],W5t=N(" Language: "),G5t=hr(()=>y("option",null,"en",-1)),j5t=hr(()=>y("option",null,"ru",-1)),H5t=hr(()=>y("option",null,"ko",-1)),X5t=hr(()=>y("option",null,"jp",-1)),Y5t=hr(()=>y("option",null,"tw",-1)),q5t=[G5t,j5t,H5t,X5t,Y5t],Z5t={class:"settings-tile"},K5t=hr(()=>y("div",null,"Default worker for hire:",-1)),J5t=hr(()=>y("label",{for:"dw_f"},"Random Artisan Goblin",-1)),Q5t={for:"dw_t"},t6t={class:"settings-tile"},e6t=N(" \u{1F33B}Farming "),r6t=hr(()=>y("label",{for:"fe_t"},"enable",-1)),n6t={key:0},i6t={class:"slider-container"},o6t=hr(()=>y("span",null,"F2P",-1)),a6t=hr(()=>y("span",null,"P2W",-1)),s6t={style:{display:"flex"}},l6t=N(" Total profit from 10 large fences (use "),u6t=hr(()=>y("a",{href:"https://bit.ly/MagicalFarmingProfit"},"MFP",-1)),c6t=N(" to estimate):"),f6t=hr(()=>y("br",null,null,-1)),h6t=N(" M$/day with 10 workers "),d6t=hr(()=>y("br",null,null,-1)),p6t=N(" M$/day with 0 workers (half growth speed) "),v6t={class:"settings-tile"},g6t=N(" \u{1F3ED}Workshops "),m6t={class:"settings-tile"},_6t=N(" \u{1F5FA}\uFE0F Map "),y6t=N(" hide inactive "),b6t=hr(()=>y("div",{class:"spacer"},null,-1)),w6t=N(" Market API status: "),S6t={key:0},T6t={key:1},k6t=N(" \xA0"),P6t=hr(()=>y("p",null,"By default everything marketable is supposed to be sold on Central Market (with tax).",-1)),E6t=N("If the item is for self use, select Keep (=untax) and/or enter Custom price: "),C6t={class:"scrollable"},A6t=hr(()=>y("tr",null,[y("th",null,"Item"),y("th",null,"Market"),y("th",null,"Custom"),y("th",null,"Keep"),y("th",null,"Value")],-1)),M6t=["id"],x6t=["href"],L6t=["src","data-key"],I6t=N(" "+A(" ")+" "),O6t={key:0},R6t=["title"],D6t={class:"right"},N6t=["href"],F6t=["onUpdate:modelValue"],$6t={class:"center"},B6t=["disabled","onUpdate:modelValue"],z6t={class:"right"};function V6t(e,t,r,n,i,o){const a=Qt("ModalDialog"),s=Qt("WorkerEdit"),l=Qt("WorkshopsConfig");return I(),O(j,null,[Et(a,{show:e.importDialogVisible,"onUpdate:show":t[2]||(t[2]=u=>e.importDialogVisible=u)},{default:we(()=>[y("form",{onSubmit:t[1]||(t[1]=Gd(u=>o.fileImport(u),["prevent"]))},[y("input",{type:"file",accept:".json",onClick:t[0]||(t[0]=u=>o.fileImport())}),x5t],32)]),_:1},8,["show"]),Et(a,{show:e.workerDialogVisible,"onUpdate:show":t[4]||(t[4]=u=>e.workerDialogVisible=u)},{default:we(()=>[Et(s,{workerEditing:n.userStore.defaultWorker,initialProfit:0,show:e.workerDialogVisible,"onUpdate:show":t[3]||(t[3]=u=>e.workerDialogVisible=u)},null,8,["workerEditing","show"])]),_:1},8,["show"]),Et(a,{show:e.workshopsConfigVisible,"onUpdate:show":t[5]||(t[5]=u=>e.workshopsConfigVisible=u)},{default:we(()=>[Et(l)]),_:1},8,["show"]),y("main",null,[y("div",L5t,[y("div",I5t,[y("div",O5t,[y("div",null,[R5t,ht(y("select",{"onUpdate:modelValue":t[6]||(t[6]=u=>n.userStore.selectedRegion=u),onChange:t[7]||(t[7]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},N5t,544),[[ar,n.userStore.selectedRegion]]),F5t,N(" \u2937 base storage: "+A(n.userStore.baseStorage)+" (",1),ht(y("input",{type:"checkbox",id:"vp_t","onUpdate:modelValue":t[8]||(t[8]=u=>n.userStore.storageVP=u)},null,512),[[sr,n.userStore.storageVP]]),$5t,B5t]),y("div",null,[z5t,ht(y("select",{"onUpdate:modelValue":t[9]||(t[9]=u=>n.userStore.selectedTax=u)},U5t,512),[[ar,n.userStore.selectedTax]])]),y("div",null,[W5t,ht(y("select",{"onUpdate:modelValue":t[10]||(t[10]=u=>n.userStore.selectedLang=u),onChange:t[11]||(t[11]=(...u)=>e.fetchMarket&&e.fetchMarket(...u))},q5t,544),[[ar,n.userStore.selectedLang]])])]),y("div",Z5t,[K5t,y("div",null,[ht(y("input",{type:"radio",name:"dw",id:"dw_f",value:!1,"onUpdate:modelValue":t[12]||(t[12]=u=>n.userStore.useDefaultWorker=u)},null,512),[[fd,n.userStore.useDefaultWorker]]),J5t]),y("div",null,[ht(y("input",{type:"radio",name:"dw",id:"dw_t",value:!0,"onUpdate:modelValue":t[13]||(t[13]=u=>n.userStore.useDefaultWorker=u)},null,512),[[fd,n.userStore.useDefaultWorker]]),y("label",Q5t,[N("Custom ("+A(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).wspd,2))+"\u{1F528} "+A(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).mspd,2))+"\u{1F9B6} "+A(o.formatFixed(n.gameStore.workerStatsOnPlantzone(n.userStore.defaultWorker).luck,2))+"\u{1F340}) ",1),y("button",{onClick:t[14]||(t[14]=u=>e.workerDialogVisible=!0)},"edit")])])]),y("div",t6t,[e6t,ht(y("input",{type:"checkbox",id:"fe_t","onUpdate:modelValue":t[15]||(t[15]=u=>n.userStore.farmingEnable=u)},null,512),[[sr,n.userStore.farmingEnable]]),r6t,n.userStore.farmingEnable?(I(),O("span",n6t,[y("div",i6t,[o6t,ht(y("input",{type:"range",style:{width:"4em"},"onUpdate:modelValue":t[16]||(t[16]=u=>n.userStore.farmingP2WShare=u),min:"0",max:"80",step:"10"},null,512),[[ie,n.userStore.farmingP2WShare,void 0,{number:!0}]]),a6t]),N(" (using "+A(80-n.userStore.farmingP2WShare)+"CP) ",1),y("div",s6t,[y("div",null,[l6t,u6t,c6t,f6t,ht(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[17]||(t[17]=u=>n.userStore.farmingProfit=u)},null,512),[[ie,n.userStore.farmingProfit,void 0,{number:!0}]]),h6t,d6t,ht(y("input",{type:"number",class:"float4","onUpdate:modelValue":t[18]||(t[18]=u=>n.userStore.farmingBareProfit=u)},null,512),[[ie,n.userStore.farmingBareProfit,void 0,{number:!0}]]),p6t])])])):tt("",!0)]),y("div",v6t,[g6t,y("div",null,[y("button",{onClick:t[19]||(t[19]=u=>e.workshopsConfigVisible=!0)},"config")])]),y("div",m6t,[_6t,y("div",null,[ht(y("input",{type:"checkbox",id:"vi_hie","onUpdate:modelValue":t[20]||(t[20]=u=>n.userStore.mapHideInactive=u)},null,512),[[sr,n.userStore.mapHideInactive]]),y6t])])]),b6t,w6t,n.marketStore.apiAlive?(I(),O("span",S6t,"\u2713")):(I(),O("span",T6t,"\u274C")),k6t,y("button",{onClick:t[21]||(t[21]=u=>o.reload())},"reload"),P6t,y("p",null,[E6t,y("button",{onClick:t[22]||(t[22]=u=>e.importDialogVisible=!0)},"import"),y("button",{onClick:t[23]||(t[23]=u=>o.fileExport())},"export")])]),y("div",C6t,[y("table",null,[A6t,(I(!0),O(j,null,Ct(n.gameStore.itemKeys,u=>(I(),O("tr",{id:"item"+u},[y("td",null,[y("a",{href:this.userStore.itemUrl+u},[y("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,L6t),N(" "+A(n.gameStore.uloc.item[u]),1)],8,x6t),I6t,u in n.marketStore.calculatedPrices?(I(),O("span",O6t,[y("abbr",{class:"tooltip",title:`contains:
`+Object.entries(n.marketStore.calculatedPrices[u]).map(([c,f])=>o.formatFixed(f,3)+" "+n.gameStore.uloc.item[c]).join(`
`)},"\u2139\uFE0F",8,R6t)])):tt("",!0)]),y("td",D6t,[u in n.marketStore.apiPrices?(I(),O("a",{key:0,href:this.marketStore.itemPriceUrl(u)},A(o.formatFixed(n.marketStore.apiPrices[u])),9,N6t)):(I(),O(j,{key:1},[N(A(o.formatFixed(n.gameStore.vendorPrices[u])),1)],64))]),y("td",null,[ht(y("input",{type:"number",class:"price right","onUpdate:modelValue":c=>n.userStore.customPrices[u]=c},null,8,F6t),[[ie,n.userStore.customPrices[u],void 0,{number:!0}]])]),y("td",$6t,[ht(y("input",{type:"checkbox",disabled:u in n.gameStore.vendorPrices,"onUpdate:modelValue":c=>n.userStore.keepItems[u]=c},null,8,B6t),[[sr,n.userStore.keepItems[u]]])]),y("td",z6t,A(o.formatFixed(n.marketStore.prices[u])),1)],8,M6t))),256))])])])],64)}const U6t=be(M5t,[["render",V6t],["__scopeId","data-v-c8b4ebb0"]]);const W6t={setup(){const e=_t(),t=Wt(),r=ai();return{gameStore:e,userStore:t,marketStore:r}},data:()=>({}),watch:{},methods:{formatFixed:wt},computed:{plantzonesNearestCpTownsProfits150(){const e=Date.now();let t={};for(const r of Object.keys(this.gameStore.plantzones))t[r]=this.gameStore.plantzoneNearestCpTownsProfits150(r,3);return console.log("cpt: plantzonesNearestCpTownsProfits took",Date.now()-e,"ms"),t}}},G6t=y("div",{id:"toptext"},[y("p",null,"Using 150/10/10 worker")],-1),j6t=y("tr",null,[y("th",null,"Node/Town"),y("th",null,"connect"),y("th",null,"distance"),y("th",null,"M$/day"),y("th",null,"M$/day/CP")],-1),H6t={colspan:"5"};function X6t(e,t,r,n,i,o){return I(),O(j,null,[G6t,y("table",null,[j6t,(I(!0),O(j,null,Ct(n.gameStore.plantzones,(a,s)=>(I(),O(j,null,[y("tr",null,[y("td",H6t,[y("h3",null,A(s)+" "+A(a.name),1)])]),(I(!0),O(j,null,Ct(o.plantzonesNearestCpTownsProfits150[s],l=>(I(),O("tr",null,[y("td",null,A(n.gameStore.nodeName(l.tnk)),1),y("td",null,A(l.cp)+"CP ",1),y("td",null,A(o.formatFixed(l.dist,0)),1),y("td",null,A(o.formatFixed(l.priceDaily,2)),1),y("td",null,A(o.formatFixed(l.dailyPerCp,3)),1)]))),256))],64))),256))])],64)}const Y6t=be(W6t,[["render",X6t]]),q6t={setup(){const e=_t(),t=Wt();return{gameStore:e,userStore:t}},data:()=>({houses:{},houseCrafts:{},towns:new Set([-1]),usages:[-1],filterTown:-1,filterUsage:-1}),created(){this.fetchData()},mounted(){},watch:{},methods:{makeIconSrc:Dn,async fetchData(){this.houseCrafts=await(await fetch("data/houseinforeceipe.json")).json(),this.craftItems=await(await fetch("data/house_craft_outputs.json")).json(),this.houses=await(await fetch("data/houseinfo.json")).json();const e=new Set([-1]),t=new Set([-1]);for(const[r,n]of Object.entries(this.houses)){e.add(n.affTown);for(const[o,a]of Object.entries(n.CraftList))t.add(o);this.houses[r].CPfull=this.houses[r].CP;let i=n.needHouseKey;for(;i;)this.houses[r].CPfull+=this.houses[i].CP,i=this.houses[i].needHouseKey}this.towns=e,this.usages=[...t].sort((r,n)=>r-n)}}},Z6t={id:"toptext"},K6t=N(" Town: "),J6t=["value"],Q6t=N(" Usage: "),txt=["value"],ext={key:0},rxt=y("summary",null,"Craftables",-1),nxt=["href"],ixt=["src","data-key"],oxt=y("tr",null,[y("th",null,"town"),y("th",null,"node"),y("th",null,"name"),y("th",null,"CP"),y("th",null,"usage/level")],-1),axt={key:0},sxt=["href"],lxt=N(A(" "));function uxt(e,t,r,n,i,o){return I(),O("main",null,[y("div",Z6t,[K6t,ht(y("select",{"onUpdate:modelValue":t[0]||(t[0]=a=>e.filterTown=a)},[(I(!0),O(j,null,Ct(e.towns,a=>(I(),O("option",{value:a},A(a>=0?n.gameStore.uloc.town[a]:"any"),9,J6t))),256))],512),[[ar,e.filterTown]]),Q6t,ht(y("select",{"onUpdate:modelValue":t[1]||(t[1]=a=>e.filterUsage=a)},[(I(!0),O(j,null,Ct(e.usages,a=>(I(),O("option",{value:a},A(a>=0?n.gameStore.uloc.housetype[a]+" "+a:"any"),9,txt))),256))],512),[[ar,e.filterUsage]]),e.filterUsage!=-1?(I(),O("details",ext,[rxt,(I(!0),O(j,null,Ct(this.houseCrafts[e.filterUsage].groups,(a,s)=>(I(),O("div",null,[N(" level "+A(s+1)+": ",1),y("table",null,[(I(!0),O(j,null,Ct(a,l=>(I(),O("tr",null,[(I(!0),O(j,null,Ct(this.craftItems[l],u=>(I(),O("a",{href:this.userStore.itemUrl+u},[y("img",{src:o.makeIconSrc(u),class:"iconitem","data-key":u},null,8,ixt),N(" "+A(n.gameStore.uloc.item[u]),1)],8,nxt))),256))]))),256))])]))),256))])):tt("",!0)]),y("table",null,[oxt,(I(!0),O(j,null,Ct(e.houses,(a,s)=>(I(),O(j,null,[(e.filterTown==-1||a.affTown==e.filterTown)&&(e.filterUsage==-1||e.filterUsage in a.CraftList)?(I(),O("tr",axt,[y("td",null,A(a.affTown),1),y("td",null,A(a.parentNode),1),y("td",null,[y("a",{href:"https://bdocodex.com/us/npc/"+a.key},A(n.gameStore.uloc.char[a.key]),9,sxt)]),y("td",null,A(a.CP)+" ("+A(a.CPfull)+")",1),y("td",null,[(I(!0),O(j,null,Ct(a.CraftList,(l,u)=>(I(),O("span",null,[N(A(n.gameStore.uloc.housetype[u]),1),y("sup",null,A(l),1),lxt]))),256))])])):tt("",!0)],64))),256))])])}const cxt=be(q6t,[["render",uxt]]);Yr([_f,nlt,wf,bf,Sf]);const fxt={setup(){const e=Wt();return{gameStore:_t(),userStore:e}},components:{VChart:Tf},props:{show:{type:Boolean,default:!1}},data:()=>({tk:5,wantLodging:0,wantStorage:0}),computed:{townsWithHouses(){const e=[];if(!this.gameStore.ready)return e;for(const t of this.gameStore.townsWithLodging){const r=this.gameStore.tnk2tk(t);r in this.gameStore.uloc.town&&e.push(r)}return e},bestLookup(){return this.gameStore.lsLookup(this.tk,this.wantLodging,this.wantStorage)},sortedResult(){const e=[],t=this.bestLookup;if(t&&t.success){for(let r=0;r<t.indices.length;r++){const n=t.indices[r],i=this.gameStore.uloc.char[n],o=t.states[r];e.push({hk:n,name:i,state:o})}e.sort((r,n)=>r.hk-n.hk)}return e},storageCost(){let e=0;for(const t of this.sortedResult)t.state==1&&(e+=this.gameStore.houseCost(t.hk));return e},lodgingCost(){let e=0;for(const t of this.sortedResult)t.state==2&&(e+=this.gameStore.houseCost(t.hk));return e},townChains(){const e={};for(const t of this.gameStore.housesPerTown[this.tk]){e[t]=[];let r=Number(t);for(;r!=0;)e[t].unshift(r),r=this.gameStore.houseInfo[r].needHouseKey}return e},townTree(){const e={name:"",value:this.gameStore.uloc.town[this.tk],children:[]};if(!this.gameStore.ready)return e;if(!this.bestLookup.success)return console.log("bestlookup failed for tk",this.tk),e;for(const t of this.gameStore.housesPerTown[this.tk]){let r=e;for(const n of this.townChains[t]){const i=r.children.findIndex(o=>o.name==n);if(i>=0)r=r.children[i];else{let o=0;if(this.bestLookup){const s=this.bestLookup.indices.indexOf(n);s!==-1&&(o=this.bestLookup.states[s])}const a={name:n,value:{label:this.gameStore.uloc.char[n],lodging:this.gameStore.houseLodging(n),storage:this.gameStore.houseStorage(n),cp:this.gameStore.houseCost(n)},lineStyle:r.name==0?{color:"transparent"}:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},itemStyle:o>0?o==2?{color:"#fe6"}:{color:"#a5f"}:{},children:[]};r.children.push(a),r=a}}}return e},chartOption(){return{tooltip:{trigger:"item",triggerOn:"mousemove",formatter:function(e){const t=e.value;return e.name==0?t:`${e.name} ${t.label}<br/>${t.lodging}\u{1F6CF}\uFE0F ${t.storage}\u{1F4E6} ${t.cp}CP`}},series:[{type:"tree",layout:"radial",roam:!0,data:[this.townTree],top:"1%",left:"1%",bottom:"1%",right:"1%",symbolSize:6,initialTreeDepth:9,label:{fontSize:9,color:"gray",position:"top",formatter:function(e){const t=e.value;return e.name==0?"":`{r|${t.lodging}} {o|${t.storage}} ${t.cp}`},rich:{r:{fontSize:9},o:{fontSize:9}}},leaves:{label:{}},emphasis:{focus:"descendant"}}]}}},methods:{formatFixed:wt}},t0=e=>(Xe("data-v-7990062d"),e=e(),Ye(),e),hxt={class:"limit"},dxt={id:"controls"},pxt=t0(()=>y("p",null,[N("data from "),y("a",{href:"https://github.com/Thell/bdo-housecraft"},"Thell/bdo-housecraft")],-1)),vxt={id:"fluid"},gxt={id:"sliders"},mxt={key:0},_xt=t0(()=>y("tr",null,[y("th"),y("th",null,"wanted"),y("th",null,"found"),y("th",null,"cost"),y("th",null,"per CP")],-1)),yxt=t0(()=>y("th",{class:"lodging"},"lodging ",-1)),bxt=["max"],wxt=t0(()=>y("th",{class:"storage"},"storage",-1)),Sxt=["max"],Txt={colspan:"3"},kxt=N(" town "),Pxt=["value"],Ext={colspan:"2"},Cxt=t0(()=>y("div",{style:{clear:"both"}},null,-1)),Axt={key:0,id:"houselist"};function Mxt(e,t,r,n,i,o){const a=Qt("v-chart");return I(),O("main",null,[y("div",hxt,[y("div",dxt,[pxt,y("div",vxt,[y("div",gxt,[this.gameStore.ready?(I(),O("table",mxt,[_xt,y("tr",null,[yxt,y("th",null,[ht(y("input",{type:"range",class:"wlong","onUpdate:modelValue":t[0]||(t[0]=s=>e.wantLodging=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].lodging:999,100)},null,8,bxt),[[ie,e.wantLodging,void 0,{number:!0}]]),N(A(e.wantLodging),1)]),y("th",null,A(o.bestLookup?o.bestLookup.lodging:"?"),1),y("th",null,A(o.lodgingCost)+" CP",1),y("th",null,A(o.bestLookup?o.formatFixed(o.bestLookup.lodging/o.lodgingCost,3):"?"),1)]),y("tr",null,[wxt,y("th",null,[ht(y("input",{type:"range",class:"wlong","onUpdate:modelValue":t[1]||(t[1]=s=>e.wantStorage=s),min:"0",max:Math.min(n.gameStore.ready?n.gameStore.townUpperLimits[e.tk].storage:999,192-8)},null,8,Sxt),[[ie,e.wantStorage,void 0,{number:!0}]]),N(A(e.wantStorage),1)]),y("th",null,A(o.bestLookup?o.bestLookup.storage:"?"),1),y("th",null,A(o.storageCost)+" CP",1),y("th",null,A(o.bestLookup?o.formatFixed(o.bestLookup.storage/o.storageCost,3):"?"),1)]),y("tr",null,[y("th",Txt,[kxt,ht(y("select",{"onUpdate:modelValue":t[2]||(t[2]=s=>e.tk=s)},[(I(!0),O(j,null,Ct(this.townsWithHouses,s=>(I(),O("option",{value:s},A(n.gameStore.uloc.town[s]),9,Pxt))),256))],512),[[ar,e.tk]])]),y("th",Ext,A(o.bestLookup?o.bestLookup.cost:"?")+" CP total",1)])])):tt("",!0)])])]),Cxt,o.bestLookup?(I(),O("div",Axt,[(I(!0),O(j,null,Ct(o.sortedResult,s=>(I(),O(j,null,[s.state>0?(I(),O("p",{key:0,class:xr({storage:s.state==1,lodging:s.state==2})},A(s.name),3)):tt("",!0)],64))),256))])):tt("",!0),Et(a,{class:"chart",option:o.chartOption},null,8,["option"])])])}const xxt=be(fxt,[["render",Mxt],["__scopeId","data-v-7990062d"]]);/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Lxt=typeof Object.defineProperty=="function"?Object.defineProperty:null,Ixt=Lxt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Oxt=Ixt;function Rxt(){try{return Oxt({},"x",{}),!0}catch{return!1}}var Dxt=Rxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nxt=Object.defineProperty,Fxt=Nxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mf=Object.prototype,jI=Mf.toString,HI=Mf.__defineGetter__,XI=Mf.__defineSetter__,$xt=Mf.__lookupGetter__,Bxt=Mf.__lookupSetter__;function zxt(e,t,r){var n,i,o,a;if(typeof e!="object"||e===null||jI.call(e)==="[object Array]")throw new TypeError("invalid argument. First argument must be an object. Value: `"+e+"`.");if(typeof r!="object"||r===null||jI.call(r)==="[object Array]")throw new TypeError("invalid argument. Property descriptor must be an object. Value: `"+r+"`.");if(i="value"in r,i&&($xt.call(e,t)||Bxt.call(e,t)?(n=e.__proto__,e.__proto__=Mf,delete e[t],e[t]=r.value,e.__proto__=n):e[t]=r.value),o="get"in r,a="set"in r,i&&(o||a))throw new Error("invalid argument. Cannot specify one or more accessors and a value or writable attribute in the property descriptor.");return o&&HI&&HI.call(e,t,r.get),a&&XI&&XI.call(e,t,r.set),e}var Vxt=zxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uxt=Dxt,Wxt=Fxt,Gxt=Vxt,_T;Uxt()?_T=Wxt:_T=Gxt;var XV=_T;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jxt=XV;function Hxt(e,t,r){jxt(e,t,{configurable:!1,enumerable:!0,writable:!1,value:r})}var Xxt=Hxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Yxt=Xxt,qxt=Yxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zxt=XV;function Kxt(e,t,r){Zxt(e,t,{configurable:!1,enumerable:!1,writable:!1,value:r})}var Jxt=Kxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qxt=Jxt,br=Qxt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tLt=Math.floor,eLt=tLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rLt=eLt,Nn=rLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nLt=Nn;function iLt(e){return nLt(e)===e}var oLt=iLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aLt=oLt,$s=aLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sLt=4294967295>>>0,lLt=sLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uLt=$s,cLt=lLt;function fLt(e){return e!=null&&typeof e!="function"&&typeof e.length=="number"&&uLt(e.length)&&e.length>=0&&e.length<=cLt}var hLt=fLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dLt=hLt,pLt=dLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vLt=pLt;function gLt(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!vLt(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var mLt=gLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Lt=mLt,yLt=_Lt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function bLt(e){return typeof e=="number"}var YV=bLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wLt(){return typeof Symbol=="function"&&typeof Symbol("foo")=="symbol"}var SLt=wLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TLt=SLt,kLt=TLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PLt=kLt,ELt=PLt();function CLt(){return ELt&&typeof Symbol.toStringTag=="symbol"}var ALt=CLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MLt=ALt,F_=MLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xLt=Object.prototype.toString,qV=xLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LLt=qV;function ILt(e){return LLt.call(e)}var OLt=ILt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RLt=Object.prototype.hasOwnProperty;function DLt(e,t){return e==null?!1:RLt.call(e,t)}var NLt=DLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FLt=NLt,$_=FLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Lt=typeof Symbol=="function"?Symbol.toStringTag:"",BLt=$Lt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zLt=$_,Ch=BLt,Nb=qV;function VLt(e){var t,r,n;if(e==null)return Nb.call(e);r=e[Ch],t=zLt(e,Ch);try{e[Ch]=void 0}catch{return Nb.call(e)}return n=Nb.call(e),t?e[Ch]=r:delete e[Ch],n}var ULt=VLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WLt=F_,GLt=OLt,jLt=ULt,yT;WLt()?yT=jLt:yT=GLt;var Yi=yT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HLt=Number;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XLt=HLt,zE=XLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YLt=zE,qLt=YLt.prototype.toString,ZLt=qLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KLt=ZLt;function JLt(e){try{return KLt.call(e),!0}catch{return!1}}var QLt=JLt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tIt=F_,eIt=Yi,rIt=zE,nIt=QLt,iIt=tIt();function oIt(e){return typeof e=="object"?e instanceof rIt?!0:iIt?nIt(e):eIt(e)==="[object Number]":!1}var ZV=oIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aIt=YV,sIt=ZV;function lIt(e){return aIt(e)||sIt(e)}var uIt=lIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KV=br,VE=uIt,cIt=YV,fIt=ZV;KV(VE,"isPrimitive",cIt);KV(VE,"isObject",fIt);var xf=VE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JV=br,UE=yLt,WE=xf,hIt=UE(WE.isPrimitive),dIt=UE(WE.isObject),GE=UE(WE);JV(GE,"primitives",hIt);JV(GE,"objects",dIt);var pIt=GE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vIt=Number.POSITIVE_INFINITY,Fe=vIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gIt=zE,mIt=gIt.NEGATIVE_INFINITY,Ir=mIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _It=Fe,yIt=Ir,bIt=$s;function wIt(e){return e<_It&&e>yIt&&bIt(e)}var QV=wIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SIt=xf.isPrimitive,TIt=QV;function kIt(e){return SIt(e)&&TIt(e)}var tU=kIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PIt=xf.isObject,EIt=QV;function CIt(e){return PIt(e)&&EIt(e.valueOf())}var eU=CIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AIt=tU,MIt=eU;function xIt(e){return AIt(e)||MIt(e)}var LIt=xIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rU=br,jE=LIt,IIt=tU,OIt=eU;rU(jE,"isPrimitive",IIt);rU(jE,"isObject",OIt);var B_=jE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RIt=B_.isPrimitive;function DIt(e){return RIt(e)&&e>=0}var nU=DIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NIt=B_.isObject;function FIt(e){return NIt(e)&&e.valueOf()>=0}var iU=FIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $It=nU,BIt=iU;function zIt(e){return $It(e)||BIt(e)}var VIt=zIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oU=br,HE=VIt,UIt=nU,WIt=iU;oU(HE,"isPrimitive",UIt);oU(HE,"isObject",WIt);var GIt=HE;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jIt(e){return e!==e}var HIt=jIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XIt=HIt,Kt=XIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YIt(e,t){var r,n;if(n=e.length,n<2||t===0)return n===0?0:e[0];for(n-=1,r=e[n]*t+e[n-1],n-=2;n>=0;)r=r*t+e[n],n-=1;return r}var aU=YIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qIt=aU;function ZIt(e){var t,r,n,i;if(e.length>500)return o;if(t="return function evalpoly(x){",r=e.length,r===0)t+="return 0.0;";else if(r===1)t+="return "+e[0]+";";else{for(t+="if(x===0.0){return "+e[0]+";}",t+="return "+e[0],n=r-1,i=1;i<r;i++)t+="+x*",i<n&&(t+="("),t+=e[i];for(i=0;i<n-1;i++)t+=")";t+=";"}return t+="}",t+="//# sourceURL=evalpoly.factory.js",new Function(t)();function o(a){return qIt(e,a)}}var KIt=ZIt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JIt=br,sU=aU,QIt=KIt;JIt(sU,"factory",QIt);var Bs=sU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tOt=Yi,eOt=typeof Uint32Array=="function";function rOt(e){return eOt&&e instanceof Uint32Array||tOt(e)==="[object Uint32Array]"}var nOt=rOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iOt=nOt,oOt=iOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aOt=4294967295,sOt=aOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lOt=typeof Uint32Array=="function"?Uint32Array:null,uOt=lOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cOt=oOt,Fb=sOt,YI=uOt;function fOt(){var e,t;if(typeof YI!="function")return!1;try{t=[1,3.14,-3.14,Fb+1,Fb+2],t=new YI(t),e=cOt(t)&&t[0]===1&&t[1]===3&&t[2]===Fb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var hOt=fOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dOt=hOt,pOt=dOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vOt=typeof Uint32Array=="function"?Uint32Array:void 0,gOt=vOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function mOt(){throw new Error("not implemented")}var _Ot=mOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yOt=pOt,bOt=gOt,wOt=_Ot,bT;yOt()?bT=bOt:bT=wOt;var Lf=bT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SOt=Yi,TOt=typeof Float64Array=="function";function kOt(e){return TOt&&e instanceof Float64Array||SOt(e)==="[object Float64Array]"}var POt=kOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var EOt=POt,COt=EOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AOt=typeof Float64Array=="function"?Float64Array:null,MOt=AOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xOt=COt,qI=MOt;function LOt(){var e,t;if(typeof qI!="function")return!1;try{t=new qI([1,3.14,-3.14,NaN]),e=xOt(t)&&t[0]===1&&t[1]===3.14&&t[2]===-3.14&&t[3]!==t[3]}catch{e=!1}return e}var IOt=LOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OOt=IOt,ROt=OOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DOt=typeof Float64Array=="function"?Float64Array:void 0,NOt=DOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FOt(){throw new Error("not implemented")}var $Ot=FOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BOt=ROt,zOt=NOt,VOt=$Ot,wT;BOt()?wT=zOt:wT=VOt;var If=wT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UOt=Yi,WOt=typeof Uint8Array=="function";function GOt(e){return WOt&&e instanceof Uint8Array||UOt(e)==="[object Uint8Array]"}var jOt=GOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HOt=jOt,XOt=HOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var YOt=255,qOt=YOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ZOt=typeof Uint8Array=="function"?Uint8Array:null,KOt=ZOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JOt=XOt,$b=qOt,ZI=KOt;function QOt(){var e,t;if(typeof ZI!="function")return!1;try{t=[1,3.14,-3.14,$b+1,$b+2],t=new ZI(t),e=JOt(t)&&t[0]===1&&t[1]===3&&t[2]===$b-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var t8t=QOt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e8t=t8t,r8t=e8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var n8t=typeof Uint8Array=="function"?Uint8Array:void 0,i8t=n8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function o8t(){throw new Error("not implemented")}var a8t=o8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var s8t=r8t,l8t=i8t,u8t=a8t,ST;s8t()?ST=l8t:ST=u8t;var c8t=ST;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f8t=Yi,h8t=typeof Uint16Array=="function";function d8t(e){return h8t&&e instanceof Uint16Array||f8t(e)==="[object Uint16Array]"}var p8t=d8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var v8t=p8t,g8t=v8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m8t=65535,_8t=m8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y8t=typeof Uint16Array=="function"?Uint16Array:null,b8t=y8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var w8t=g8t,Bb=_8t,KI=b8t;function S8t(){var e,t;if(typeof KI!="function")return!1;try{t=[1,3.14,-3.14,Bb+1,Bb+2],t=new KI(t),e=w8t(t)&&t[0]===1&&t[1]===3&&t[2]===Bb-2&&t[3]===0&&t[4]===1}catch{e=!1}return e}var T8t=S8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var k8t=T8t,P8t=k8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var E8t=typeof Uint16Array=="function"?Uint16Array:void 0,C8t=E8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function A8t(){throw new Error("not implemented")}var M8t=A8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x8t=P8t,L8t=C8t,I8t=M8t,TT;x8t()?TT=L8t:TT=I8t;var O8t=TT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var R8t=c8t,D8t=O8t,N8t={uint16:D8t,uint8:R8t},F8t=N8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JI=F8t,lU;function $8t(){var e,t;return e=new JI.uint16(1),e[0]=4660,t=new JI.uint8(e.buffer),t[0]===52}lU=$8t();var B8t=lU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var z8t=B8t,Of=z8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var V8t=Of,kT;V8t===!0?kT=1:kT=0;var U8t=kT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W8t=Lf,G8t=If,j8t=U8t,uU=new G8t(1),H8t=new W8t(uU.buffer);function X8t(e){return uU[0]=e,H8t[j8t]}var Y8t=X8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var q8t=Y8t,fi=q8t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Z8t=Of,PT;Z8t===!0?PT=1:PT=0;var K8t=PT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J8t=Lf,Q8t=If,tRt=K8t,ET=new Q8t(1),eRt=new J8t(ET.buffer);function rRt(e,t){return ET[0]=e,eRt[tRt]=t>>>0,ET[0]}var nRt=rRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iRt=nRt,e0=iRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oRt=1023,ku=oRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var aRt=.34657359027997264,sRt=aRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lRt(e){return e===0?-.03333333333333313:-.03333333333333313+e*(.0015873015872548146+e*(-793650757867488e-19+e*(4008217827329362e-21+e*-20109921818362437e-23)))}var uRt=lRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_expm1.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var cRt=Kt,zb=fi,Vv=e0,QI=Fe,fRt=Ir,hRt=ku,dRt=sRt,pRt=uRt,vRt=709.782712893384,Vb=.6931471803691238,Ub=19082149292705877e-26,tO=1.4426950408889634,gRt=38.816242111356935,mRt=1.0397207708399179;function _Rt(e){var t,r,n,i,o,a,s,l,u,c,f,h;if(e===QI||cRt(e))return e;if(e===fRt)return-1;if(e===0)return e;if(e<0?(r=!0,s=-e):(r=!1,s=e),s>=gRt){if(r)return-1;if(s>=vRt)return QI}if(o=zb(s)|0,s>dRt)s<mRt?r?(n=e+Vb,i=-Ub,h=-1):(n=e-Vb,i=Ub,h=1):(r?h=tO*e-.5:h=tO*e+.5,h|=0,c=h,n=e-c*Vb,i=c*Ub),e=n-i,u=n-e-i;else{if(o<1016070144)return e;h=0}return t=.5*e,l=e*t,a=1+l*pRt(l),c=3-a*t,f=l*((a-c)/(6-e*c)),h===0?e-(e*f-l):(f=e*(f-u)-u,f-=l,h===-1?.5*(e-f)-.5:h===1?e<-.25?-2*(f-(e+.5)):1+2*(e-f):h<=-2||h>56?(s=1-(f-e),n=zb(s)+(h<<20)|0,s=Vv(s,n),s-1):(c=1,h<20?(n=1072693248-(2097152>>h)|0,c=Vv(c,n),s=c-(f-e)):(n=hRt-h<<20|0,c=Vv(c,n),s=e-(f+c),s+=1),n=zb(s)+(h<<20)|0,Vv(s,n)))}var yRt=_Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bRt=yRt,Rf=bRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function wRt(e){return e===0?.6666666666666735:.6666666666666735+e*(.3999999999940942+e*(.2857142874366239+e*(.22222198432149784+e*(.1818357216161805+e*(.15313837699209373+e*.14798198605116586)))))}var SRt=wRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FDLIBM]{@link http://www.netlib.org/fdlibm/s_log1p.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var TRt=Kt,eO=fi,rO=e0,kRt=Fe,PRt=Ir,nO=ku,ERt=SRt,Wb=.6931471803691238,Gb=19082149292705877e-26,CRt=.41421356237309503,ARt=-.2928932188134525,MRt=1862645149230957e-24,xRt=5551115123125783e-32,LRt=9007199254740992,IRt=.6666666666666666;function ORt(e){var t,r,n,i,o,a,s,l,u,c;if(e<-1||TRt(e))return NaN;if(e===-1)return PRt;if(e===kRt||e===0)return e;if(e<0?n=-e:n=e,c=1,n<CRt){if(n<MRt)return n<xRt?e:e-e*e*.5;e>ARt&&(c=0,i=e,r=1)}return c!==0&&(n<LRt?(u=1+e,r=eO(u),c=(r>>20)-nO,c>0?o=1-(u-e):o=e-(u-1),o/=u):(u=e,r=eO(u),c=(r>>20)-nO,o=0),r&=1048575,r<434334?u=rO(u,r|1072693248):(c+=1,u=rO(u,r|1071644672),r=1048576-r>>2),i=u-1),t=.5*i*i,r===0?i===0?(o+=c*Gb,c*Wb+o):(l=t*(1-IRt*i),c*Wb-(l-(c*Gb+o)-i)):(a=i/(2+i),s=a*a,l=s*ERt(s),c===0?i-(t-a*(t+l)):c*Wb-(t-(a*(t+l)+(c*Gb+o))-i))}var RRt=ORt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DRt=RRt,Fn=DRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var NRt=Math.sqrt,FRt=NRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Rt=FRt,nr=$Rt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BRt=.7853981633974483,cU=BRt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zRt(e){var t,r,n;return e===0?.16666666666666713:(e<0?t=-e:t=e,t<=1?(r=-8.198089802484825+e*(19.562619833175948+e*(-16.262479672107002+e*(5.444622390564711+e*(-.6019598008014124+e*.004253011369004428)))),n=-49.18853881490881+e*(139.51056146574857+e*(-147.1791292232726+e*(70.49610280856842+e*(-14.740913729888538+e*1))))):(e=1/e,r=.004253011369004428+e*(-.6019598008014124+e*(5.444622390564711+e*(-16.262479672107002+e*(19.562619833175948+e*-8.198089802484825)))),n=1+e*(-14.740913729888538+e*(70.49610280856842+e*(-147.1791292232726+e*(139.51056146574857+e*-49.18853881490881))))),r/n)}var VRt=zRt;/**
* @license Apache-2.0
*
* Copyright (c) 2020 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function URt(e){var t,r,n;return e===0?.08333333333333809:(e<0?t=-e:t=e,t<=1?(r=28.536655482610616+e*(-25.56901049652825+e*(6.968710824104713+e*(-.5634242780008963+e*.002967721961301243))),n=342.43986579130785+e*(-383.8770957603691+e*(147.0656354026815+e*(-21.947795316429207+e*1)))):(e=1/e,r=.002967721961301243+e*(-.5634242780008963+e*(6.968710824104713+e*(-25.56901049652825+e*28.536655482610616))),n=1+e*(-21.947795316429207+e*(147.0656354026815+e*(-383.8770957603691+e*342.43986579130785)))),r/n)}var WRt=URt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var GRt=Kt,jRt=nr,iO=cU,HRt=VRt,XRt=WRt,YRt=6123233995736766e-32;function qRt(e){var t,r,n,i,o;if(GRt(e))return NaN;if(e>0?n=e:(t=!0,n=-e),n>1)return NaN;if(n>.625)r=1-n,i=r*XRt(r),r=jRt(r+r),o=iO-r,r=r*i-YRt,o-=r,o+=iO;else{if(n<1e-8)return e;r=n*n,o=r*HRt(r),o=n*o+n}return t?-o:o}var ZRt=qRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KRt=ZRt,XE=KRt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JRt(e){return Math.abs(e)}var QRt=JRt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tDt=QRt,pe=tDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eDt=Math.ceil,rDt=eDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nDt=rDt,fU=nDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iDt=Nn,oDt=fU;function aDt(e){return e<0?oDt(e):iDt(e)}var sDt=aDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lDt=sDt,YE=lDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uDt=1023,cDt=uDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fDt=-1023,hDt=fDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dDt=-1074,pDt=dDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vDt=Fe,gDt=Ir;function mDt(e){return e===vDt||e===gDt}var _Dt=mDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yDt=_Dt,Df=yDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bDt=2147483648>>>0,wDt=bDt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SDt=2147483647>>>0,z_=SDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TDt=Of,hU,CT,AT;TDt===!0?(CT=1,AT=0):(CT=0,AT=1);hU={HIGH:CT,LOW:AT};var kDt=hU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PDt=Lf,EDt=If,dU=kDt,pU=new EDt(1),oO=new PDt(pU.buffer),CDt=dU.HIGH,ADt=dU.LOW;function MDt(e,t,r,n){return pU[0]=e,t[n]=oO[CDt],t[n+r]=oO[ADt],t}var vU=MDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xDt=vU;function LDt(e){return xDt(e,[0>>>0,0>>>0],1,0)}var IDt=LDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ODt=br,gU=IDt,RDt=vU;ODt(gU,"assign",RDt);var qE=gU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DDt=Of,mU,MT,xT;DDt===!0?(MT=1,xT=0):(MT=0,xT=1);mU={HIGH:MT,LOW:xT};var NDt=mU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FDt=Lf,$Dt=If,_U=NDt,yU=new $Dt(1),aO=new FDt(yU.buffer),BDt=_U.HIGH,zDt=_U.LOW;function VDt(e,t){return aO[BDt]=e,aO[zDt]=t,yU[0]}var UDt=VDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WDt=UDt,ZE=WDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GDt=wDt,jDt=z_,HDt=qE,XDt=fi,YDt=ZE,jb=[0,0];function qDt(e,t){var r,n;return HDt.assign(e,jb,1,0),r=jb[0],r&=jDt,n=XDt(t),n&=GDt,r|=n,YDt(r,jb[1])}var ZDt=qDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KDt=ZDt,KE=KDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JDt=22250738585072014e-324,Pu=JDt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QDt=Pu,t7t=Df,e7t=Kt,r7t=pe,n7t=4503599627370496;function i7t(e,t,r,n){return e7t(e)||t7t(e)?(t[n]=e,t[n+r]=0,t):e!==0&&r7t(e)<QDt?(t[n]=e*n7t,t[n+r]=-52,t):(t[n]=e,t[n+r]=0,t)}var bU=i7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var o7t=bU;function a7t(e){return o7t(e,[0,0],1,0)}var s7t=a7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l7t=br,wU=s7t,u7t=bU;l7t(wU,"assign",u7t);var c7t=wU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f7t=2146435072,h7t=f7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var d7t=fi,p7t=h7t,v7t=ku;function g7t(e){var t=d7t(e);return t=(t&p7t)>>>20,t-v7t|0}var m7t=g7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _7t=m7t,y7t=_7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b7t=Fe,w7t=Ir,S7t=ku,T7t=cDt,k7t=hDt,P7t=pDt,E7t=Kt,C7t=Df,A7t=KE,M7t=c7t.assign,x7t=y7t,L7t=qE,I7t=ZE,O7t=2220446049250313e-31,R7t=2148532223>>>0,Hb=[0,0],Xb=[0,0];function D7t(e,t){var r,n;return t===0||e===0||E7t(e)||C7t(e)?e:(M7t(e,Hb,1,0),e=Hb[0],t+=Hb[1],t+=x7t(e),t<P7t?A7t(0,e):t>T7t?e<0?w7t:b7t:(t<=k7t?(t+=52,n=O7t):n=1,L7t.assign(e,Xb,1,0),r=Xb[0],r&=R7t,r|=t+S7t<<20,n*I7t(r,Xb[1])))}var N7t=D7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var F7t=N7t,Nf=F7t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $7t(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var B7t=$7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var z7t=Nf,V7t=B7t;function U7t(e,t,r){var n,i,o,a;return n=e-t,i=n*n,o=n-i*V7t(i),a=1-(t-n*o/(2-o)-e),z7t(a,r)}var W7t=U7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_exp.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var G7t=Kt,sO=YE,j7t=Ir,lO=Fe,H7t=W7t,X7t=.6931471803691238,Y7t=19082149292705877e-26,uO=1.4426950408889634,q7t=709.782712893384,Z7t=-745.1332191019411,SU=1/(1<<28),K7t=-SU;function J7t(e){var t,r,n;return G7t(e)||e===lO?e:e===j7t?0:e>q7t?lO:e<Z7t?0:e>K7t&&e<SU?1+e:(e<0?n=sO(uO*e-.5):n=sO(uO*e+.5),t=e-n*X7t,r=n*Y7t,H7t(t,r,n))}var Q7t=J7t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var t9t=Q7t,Ve=t9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e9t=$s;function r9t(e){return e9t(e/2)}var n9t=r9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i9t=n9t,o9t=i9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cO=o9t;function a9t(e){return e>0?cO(e-1):cO(e+1)}var s9t=a9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var l9t=s9t,JE=l9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u9t=Of,LT;u9t===!0?LT=0:LT=1;var c9t=LT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var f9t=Lf,h9t=If,d9t=c9t,IT=new h9t(1),p9t=new f9t(IT.buffer);function v9t(e,t){return IT[0]=e,p9t[d9t]=t>>>0,IT[0]}var g9t=v9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var m9t=g9t,r0=m9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _9t(e){return e|0}var y9t=_9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var b9t=y9t,TU=b9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var fO=JE,w9t=KE,S9t=Ir,Uv=Fe;function T9t(e,t){return t===S9t?Uv:t===Uv?0:t>0?fO(t)?e:0:fO(t)?w9t(Uv,e):Uv}var k9t=T9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var P9t=z_,E9t=fi,C9t=1072693247,Wv=1e300,Gv=1e-300;function A9t(e,t){var r,n;return n=E9t(e),r=n&P9t,r<=C9t?t<0?Wv*Wv:Gv*Gv:t>0?Wv*Wv:Gv*Gv}var M9t=A9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var x9t=pe,hO=Fe;function L9t(e,t){return e===-1?(e-e)/(e-e):e===1?1:x9t(e)<1==(t===hO)?0:hO}var I9t=L9t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function O9t(e){return e===0?.5999999999999946:.5999999999999946+e*(.4285714285785502+e*(.33333332981837743+e*(.272728123808534+e*(.23066074577556175+e*.20697501780033842))))}var R9t=O9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var D9t=fi,jv=r0,dO=e0,N9t=ku,F9t=R9t,$9t=1048575,pO=1048576,B9t=1072693248,z9t=536870912,V9t=524288,U9t=20,W9t=9007199254740992,G9t=.9617966939259756,j9t=.9617967009544373,H9t=-7028461650952758e-24,X9t=[1,1.5],Y9t=[0,.5849624872207642],q9t=[0,1350039202129749e-23];function Z9t(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,C;return S=0,r<pO&&(t*=W9t,S-=53,r=D9t(t)),S+=(r>>U9t)-N9t|0,k=r&$9t|0,r=k|B9t|0,k<=235662?C=0:k<767610?C=1:(C=0,S+=1,r-=pO),t=dO(t,r),c=X9t[C],w=t-c,T=1/(t+c),i=w*T,a=jv(i,0),n=(r>>1|z9t)+V9t,n+=C<<18,l=dO(0,n),u=t-(l-c),s=T*(w-a*l-a*u),o=i*i,b=o*o*F9t(o),b+=s*(a+i),o=a*a,l=3+o+b,l=jv(l,0),u=b-(l-3-o),w=a*l,T=s*l+u*i,h=w+T,h=jv(h,0),d=T-(h-w),p=j9t*h,v=H9t*h+d*G9t+q9t[C],f=Y9t[C],_=S,m=p+v+f+_,m=jv(m,0),g=v-(m-_-f-p),e[0]=m,e[1]=g,e}var K9t=Z9t;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function J9t(e){return e===0?.5:.5+e*(-.3333333333333333+e*.25)}var Q9t=J9t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var tNt=r0,eNt=Q9t,rNt=1.4426950408889634,nNt=1.4426950216293335,iNt=19259629911266175e-24;function oNt(e,t){var r,n,i,o,a,s;return i=t-1,o=i*i*eNt(i),a=nNt*i,s=i*iNt-o*rNt,n=a+s,n=tNt(n,0),r=s-(n-a),e[0]=n,e[1]=r,e}var aNt=oNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sNt=.6931471805599453,lNt=sNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uNt=1048575,cNt=uNt;/**
* @license Apache-2.0
*
* Copyright (c) 2022 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function fNt(e){return e===0?.16666666666666602:.16666666666666602+e*(-.0027777777777015593+e*(6613756321437934e-20+e*(-16533902205465252e-22+e*41381367970572385e-24)))}var hNt=fNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var dNt=fi,vO=e0,pNt=r0,vNt=TU,gNt=Nf,mNt=lNt,gO=ku,mO=z_,_O=cNt,_Nt=hNt,yO=1048576,yNt=1071644672,Ah=20,bNt=.6931471824645996,wNt=-1904654299957768e-24;function SNt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d;return h=e&mO|0,d=(h>>Ah)-gO|0,f=0,h>yNt&&(f=e+(yO>>d+1)>>>0,d=((f&mO)>>Ah)-gO|0,n=(f&~(_O>>d))>>>0,o=vO(0,n),f=(f&_O|yO)>>Ah-d>>>0,e<0&&(f=-f),t-=o),o=r+t,o=pNt(o,0),s=o*bNt,l=(r-(o-t))*mNt+o*wNt,c=s+l,u=l-(c-s),o=c*c,i=c-o*_Nt(o),a=c*i/(i-2)-(u+c*u),c=1-(a-c),e=dNt(c),e=vNt(e),e+=f<<Ah>>>0,e>>Ah<=0?c=gNt(c,f):c=vO(c,e),c}var TNt=SNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_pow.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 2004 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var bO=Kt,wO=JE,SO=Df,kNt=$s,TO=nr,PNt=pe,Yb=qE,ENt=r0,kO=TU,CNt=Ir,ANt=Fe,qb=z_,MNt=k9t,xNt=M9t,LNt=I9t,INt=K9t,ONt=aNt,RNt=TNt,DNt=1072693247,NNt=1105199104,FNt=1139802112,PO=1083179008,$Nt=1072693248,BNt=1083231232,zNt=3230714880>>>0,EO=31,Za=1e300,Ka=1e-300,VNt=8008566259537294e-32,Zo=[0,0],CO=[0,0];function kU(e,t){var r,n,i,o,a,s,l,u,c,f,h,d,p,v,m,g;if(bO(e)||bO(t))return NaN;if(Yb.assign(t,Zo,1,0),s=Zo[0],l=Zo[1],l===0){if(t===0)return 1;if(t===1)return e;if(t===-1)return 1/e;if(t===.5)return TO(e);if(t===-.5)return 1/TO(e);if(t===2)return e*e;if(t===3)return e*e*e;if(t===4)return e*=e,e*e;if(SO(t))return LNt(e,t)}if(Yb.assign(e,Zo,1,0),o=Zo[0],a=Zo[1],a===0){if(o===0)return MNt(e,t);if(e===1)return 1;if(e===-1&&wO(t))return-1;if(SO(e))return e===CNt?kU(-0,-t):t<0?0:ANt}if(e<0&&kNt(t)===!1)return(e-e)/(e-e);if(i=PNt(e),r=o&qb|0,n=s&qb|0,u=o>>>EO|0,c=s>>>EO|0,u&&wO(t)?u=-1:u=1,n>NNt){if(n>FNt)return xNt(e,t);if(r<DNt)return c===1?u*Za*Za:u*Ka*Ka;if(r>$Nt)return c===0?u*Za*Za:u*Ka*Ka;p=ONt(CO,i)}else p=INt(CO,i,r);if(f=ENt(t,0),d=(t-f)*p[0]+t*p[1],h=f*p[0],v=d+h,Yb.assign(v,Zo,1,0),m=kO(Zo[0]),g=kO(Zo[1]),m>=PO){if((m-PO|g)!==0||d+VNt>v-h)return u*Za*Za}else if((m&qb)>=BNt&&((m-zNt|g)!==0||d<=v-h))return u*Ka*Ka;return v=RNt(m,h,d),u*v}var UNt=kU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WNt=UNt,ir=WNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var GNt=2.718281828459045,Ff=GNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jNt=2220446049250313e-31,Ia=jNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HNt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var XNt=HNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AO=Kt,YNt=Fn,qNt=nr,ZNt=pe,KNt=Ve,Zb=ir,JNt=Ff,Kb=Ia,Jb=XNt,Qb=10.900511;function QNt(e,t){var r,n,i,o,a,s,l;return AO(e)||AO(t)?NaN:e<0||t<0?NaN:t===1?1/e:e===1?1/t:(l=e+t,l<Kb?(a=l/e,a/=t,a):l===e&&t<Kb?1/t:l===t&&e<Kb?1/e:(e<t&&(s=t,t=e,e=s),n=e+Qb-.5,i=t+Qb-.5,o=l+Qb-.5,a=Jb(e)*(Jb(t)/Jb(l)),r=e-.5-t,ZNt(t*r)<o*100&&e>100?a*=KNt(r*YNt(-t/o)):a*=Zb(n/o,r),o>1e10?a*=Zb(n/o*(i/o),t):a*=Zb(n*i/(o*o),t),a*=qNt(JNt/i),a))}var tFt=QNt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var eFt=tFt,PU=eFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rFt=Fe;function nFt(e){return e===0&&1/e===rFt}var iFt=nFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oFt=iFt,aFt=oFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MO=aFt,tw=Kt,sFt=Ir,Hv=Fe;function lFt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return tw(e)||tw(t)?NaN:e===Hv||t===Hv?Hv:e===t&&e===0?MO(e)?e:t:e>t?e:t;for(n=sFt,o=0;o<r;o++){if(i=arguments[o],tw(i)||i===Hv)return i;(i>n||i===n&&i===0&&MO(i))&&(n=i)}return n}var uFt=lFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cFt=uFt,Eu=cFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var fFt=Ir;function hFt(e){return e===0&&1/e===fFt}var dFt=hFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pFt=dFt,EU=pFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xO=EU,ew=Kt,Xv=Ir,vFt=Fe;function gFt(e,t){var r,n,i,o;if(r=arguments.length,r===2)return ew(e)||ew(t)?NaN:e===Xv||t===Xv?Xv:e===t&&e===0?xO(e)?e:t:e<t?e:t;for(n=vFt,o=0;o<r;o++){if(i=arguments[o],ew(i)||i===Xv)return i;(i<n||i===n&&i===0&&xO(i))&&(n=i)}return n}var mFt=gFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _Ft=mFt,zs=_Ft;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yFt=17976931348623157e292,$f=yFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bFt=2147483647,wFt=bFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SFt=1.5707963267948966,QE=SFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TFt=3.141592653589793,Vs=TFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function kFt(e){return e===0?.0416666666666666:.0416666666666666+e*(-.001388888888887411+e*2480158728947673e-20)}var PFt=kFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function EFt(e){return e===0?-27557314351390663e-23:-27557314351390663e-23+e*(2087572321298175e-24+e*-11359647557788195e-27)}var CFt=EFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var AFt=PFt,MFt=CFt;function xFt(e,t){var r,n,i,o;return o=e*e,i=o*o,n=o*AFt(o),n+=i*i*MFt(o),r=.5*o,i=1-r,i+(1-i-r+(o*n-e*t))}var LFt=xFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IFt=LFt,CU=IFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var LO=-.16666666666666632,OFt=.00833333333332249,RFt=-.0001984126982985795,DFt=27557313707070068e-22,NFt=-25050760253406863e-24,FFt=158969099521155e-24;function $Ft(e,t){var r,n,i,o;return o=e*e,i=o*o,r=OFt+o*(RFt+o*DFt)+o*i*(NFt+o*FFt),n=o*e,t===0?e+n*(LO+o*r):e-(o*(.5*t-n*r)-t-n*LO)}var BFt=$Ft;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zFt=BFt,AU=zFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VFt=Of,OT;VFt===!0?OT=0:OT=1;var UFt=OT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WFt=Lf,GFt=If,jFt=UFt,MU=new GFt(1),HFt=new WFt(MU.buffer);function XFt(e){return MU[0]=e,HFt[jFt]}var YFt=XFt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qFt=YFt,ZFt=qFt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KFt(e,t){var r,n;for(r=[],n=0;n<t;n++)r.push(e);return r}var JFt=KFt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var QFt=JFt,t$t=QFt;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var e$t=t$t;function r$t(e){return e$t(0,e)}var n$t=r$t;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var i$t=n$t,o$t=i$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var a$t=Nn,Yv=Nf,V_=o$t,xU=[10680707,7228996,1387004,2578385,16069853,12639074,9804092,4427841,16666979,11263675,12935607,2387514,4345298,14681673,3074569,13734428,16653803,1880361,10960616,8533493,3062596,8710556,7349940,6258241,3772886,3769171,3798172,8675211,12450088,3874808,9961438,366607,15675153,9132554,7151469,3571407,2607881,12013382,4155038,6285869,7677882,13102053,15825725,473591,9065106,15363067,6271263,9264392,5636912,4652155,7056368,13614112,10155062,1944035,9527646,15080200,6658437,6231200,6832269,16767104,5075751,3212806,1398474,7579849,6349435,12618859],s$t=[1.570796251296997,7549789415861596e-23,5390302529957765e-30,3282003415807913e-37,1270655753080676e-44,12293330898111133e-52,27337005381646456e-60,21674168387780482e-67],rw=16777216,nw=5960464477539063e-23,qv=V_(20),IO=V_(20),Zv=V_(20),kr=V_(20);function LU(e,t,r,n,i,o,a,s,l){var u,c,f,h,d,p,v,m,g;for(h=o,g=n[r],m=r,d=0;m>0;d++)c=nw*g|0,kr[d]=g-rw*c|0,g=n[m-1]+c,m-=1;if(g=Yv(g,i),g-=8*a$t(g*.125),v=g|0,g-=v,f=0,i>0?(d=kr[r-1]>>24-i,v+=d,kr[r-1]-=d<<24-i,f=kr[r-1]>>23-i):i===0?f=kr[r-1]>>23:g>=.5&&(f=2),f>0){for(v+=1,u=0,d=0;d<r;d++)m=kr[d],u===0?m!==0&&(u=1,kr[d]=16777216-m):kr[d]=16777215-m;if(i>0)switch(i){case 1:kr[r-1]&=8388607;break;case 2:kr[r-1]&=4194303;break}f===2&&(g=1-g,u!==0&&(g-=Yv(1,i)))}if(g===0){for(m=0,d=r-1;d>=o;d--)m|=kr[d];if(m===0){for(p=1;kr[o-p]===0;p++);for(d=r+1;d<=r+p;d++){for(l[s+d]=xU[a+d],c=0,m=0;m<=s;m++)c+=e[m]*l[s+(d-m)];n[d]=c}return r+=p,LU(e,t,r,n,i,o,a,s,l)}}if(g===0)for(r-=1,i-=24;kr[r]===0;)r-=1,i-=24;else g=Yv(g,-i),g>=rw?(c=nw*g|0,kr[r]=g-rw*c|0,r+=1,i+=24,kr[r]=c):kr[r]=g|0;for(c=Yv(1,i),d=r;d>=0;d--)n[d]=c*kr[d],c*=nw;for(d=r;d>=0;d--){for(c=0,p=0;p<=h&&p<=r-d;p++)c+=s$t[p]*n[d+p];Zv[r-d]=c}for(c=0,d=r;d>=0;d--)c+=Zv[d];for(f===0?t[0]=c:t[0]=-c,c=Zv[0]-c,d=1;d<=r;d++)c+=Zv[d];return f===0?t[1]=c:t[1]=-c,v&7}function l$t(e,t,r,n){var i,o,a,s,l,u,c,f,h;for(o=4,s=n-1,a=(r-3)/24|0,a<0&&(a=0),u=r-24*(a+1),f=a-s,h=s+o,c=0;c<=h;c++)f<0?qv[c]=0:qv[c]=xU[f],f+=1;for(c=0;c<=o;c++){for(i=0,f=0;f<=s;f++)i+=e[f]*qv[s+(c-f)];IO[c]=i}return l=o,LU(e,t,l,IO,u,o,a,s,qv)}var u$t=l$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var c$t=Math.round,f$t=c$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var h$t=f$t,U_=h$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/k_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var d$t=U_,OO=fi,p$t=.6366197723675814,v$t=1.5707963267341256,g$t=6077100506506192e-26,m$t=6077100506303966e-26,_$t=20222662487959506e-37,y$t=20222662487111665e-37,b$t=84784276603689e-45,RO=2047;function w$t(e,t,r){var n,i,o,a,s,l,u;return i=d$t(e*p$t),a=e-i*v$t,s=i*g$t,u=t>>20|0,r[0]=a-s,n=OO(r[0]),l=u-(n>>20&RO),l>16&&(o=a,s=i*m$t,a=o-s,s=i*_$t-(o-a-s),r[0]=a-s,n=OO(r[0]),l=u-(n>>20&RO),l>49&&(o=a,s=i*y$t,a=o-s,s=i*b$t-(o-a-s),r[0]=a-s)),r[1]=a-r[0]-s,i}var S$t=w$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_rem_pio2.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
*
* Optimized by Bruce D. Evans.
* ```
*/var T$t=fi,k$t=ZFt,P$t=ZE,E$t=u$t,Kv=S$t,C$t=0,A$t=16777216,Ja=1.5707963267341256,Dl=6077100506506192e-26,Jv=2*Dl,Qv=3*Dl,tg=4*Dl,M$t=2147483647,x$t=2146435072,L$t=1048575,I$t=598523,O$t=1072243195,R$t=1073928572,D$t=1074752122,N$t=1074977148,F$t=1075183036,$$t=1075388923,B$t=1075594811,z$t=1094263291,Mh=[0,0,0],xh=[0,0];function V$t(e,t){var r,n,i,o,a,s,l,u;if(i=T$t(e),o=i&M$t|0,o<=O$t)return t[0]=e,t[1]=0,0;if(o<=D$t)return(o&L$t)===I$t?Kv(e,o,t):o<=R$t?e>0?(u=e-Ja,t[0]=u-Dl,t[1]=u-t[0]-Dl,1):(u=e+Ja,t[0]=u+Dl,t[1]=u-t[0]+Dl,-1):e>0?(u=e-2*Ja,t[0]=u-Jv,t[1]=u-t[0]-Jv,2):(u=e+2*Ja,t[0]=u+Jv,t[1]=u-t[0]+Jv,-2);if(o<=B$t)return o<=F$t?o===N$t?Kv(e,o,t):e>0?(u=e-3*Ja,t[0]=u-Qv,t[1]=u-t[0]-Qv,3):(u=e+3*Ja,t[0]=u+Qv,t[1]=u-t[0]+Qv,-3):o===$$t?Kv(e,o,t):e>0?(u=e-4*Ja,t[0]=u-tg,t[1]=u-t[0]-tg,4):(u=e+4*Ja,t[0]=u+tg,t[1]=u-t[0]+tg,-4);if(o<z$t)return Kv(e,o,t);if(o>=x$t)return t[0]=NaN,t[1]=NaN,0;for(r=k$t(e),n=(o>>20)-1046,u=P$t(o-(n<<20|0),r),s=0;s<2;s++)Mh[s]=u|0,u=(u-Mh[s])*A$t;for(Mh[2]=u,a=3;Mh[a-1]===C$t;)a-=1;return l=E$t(Mh,xh,n,a),e<0?(t[0]=-xh[0],t[1]=-xh[1],-l):(t[0]=xh[0],t[1]=xh[1],l)}var U$t=V$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var W$t=U$t,IU=W$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_sin.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var G$t=fi,DO=CU,iw=AU,j$t=IU,H$t=2147483647,X$t=2146435072,Y$t=1072243195,q$t=1045430272,Ko=[0,0];function Z$t(e){var t,r;if(t=G$t(e),t&=H$t,t<=Y$t)return t<q$t?e:iw(e,0);if(t>=X$t)return NaN;switch(r=j$t(e,Ko),r&3){case 0:return iw(Ko[0],Ko[1]);case 1:return DO(Ko[0],Ko[1]);case 2:return-iw(Ko[0],Ko[1]);default:return-DO(Ko[0],Ko[1])}}var K$t=Z$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var J$t=K$t,n0=J$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Q$t=2.5066282746310007,W_=Q$t;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tBt(e){return e===0?.08333333333334822:.08333333333334822+e*(.0034722222160545866+e*(-.0026813261780578124+e*(-.00022954996161337813+e*.0007873113957930937)))}var eBt=tBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var rBt=W_,NO=ir,nBt=Ve,iBt=eBt,oBt=143.01608;function aBt(e){var t,r,n;return t=1/e,t=1+t*iBt(t),r=nBt(e),e>oBt?(n=NO(e,.5*e-.25),r=n*(n/r)):r=NO(e,e-.5)/r,rBt*r*t}var sBt=aBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lBt=.5772156649015329,uBt=lBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var cBt=uBt;function fBt(e,t){return t/((1+cBt*e)*e)}var hBt=fBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function dBt(e){var t,r,n;return e===0?1:(e<0?t=-e:t=e,t<=1?(r=1+e*(.4942148268014971+e*(.20744822764843598+e*(.04763678004571372+e*(.010421379756176158+e*(.0011913514700658638+e*(.00016011952247675185+e*0)))))),n=1+e*(.0714304917030273+e*(-.23459179571824335+e*(.035823639860549865+e*(.011813978522206043+e*(-.004456419138517973+e*(.0005396055804933034+e*-23158187332412014e-21))))))):(e=1/e,r=0+e*(.00016011952247675185+e*(.0011913514700658638+e*(.010421379756176158+e*(.04763678004571372+e*(.20744822764843598+e*(.4942148268014971+e*1)))))),n=-23158187332412014e-21+e*(.0005396055804933034+e*(-.004456419138517973+e*(.011813978522206043+e*(.035823639860549865+e*(-.23459179571824335+e*(.0714304917030273+e*1))))))),r/n)}var pBt=dBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1987, 1989, 1992, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var vBt=Kt,gBt=$s,mBt=EU,FO=pe,_Bt=Nn,yBt=n0,$O=Fe,BO=Ir,zO=Vs,VO=sBt,UO=hBt,bBt=pBt;function wBt(e){var t,r,n,i;if(gBt(e)&&e<0||e===BO||vBt(e))return NaN;if(e===0)return mBt(e)?BO:$O;if(e>171.61447887182297)return $O;if(e<-170.5674972726612)return 0;if(r=FO(e),r>33)return e>=0?VO(e):(n=_Bt(r),(n&1)===0?t=-1:t=1,i=r-n,i>.5&&(n+=1,i=r-n),i=r*yBt(zO*i),t*zO/(FO(i)*VO(r)));for(i=1;e>=3;)e-=1,i*=e;for(;e<0;){if(e>-1e-9)return UO(e,i);i/=e,e+=1}for(;e<2;){if(e<1e-9)return UO(e,i);i/=e,e+=1}return e===2?i:(e-=2,i*bBt(e))}var SBt=wBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TBt=SBt,Bo=TBt;const kBt=[1,1,2,6,24,120,720,5040,40320,362880,3628800,39916800,479001600,6227020800,87178291200,1307674368e3,20922789888e3,355687428096e3,6402373705728e3,121645100408832e3,243290200817664e4,5109094217170944e4,11240007277776077e5,2585201673888498e7,6204484017332394e8,15511210043330986e9,40329146112660565e10,10888869450418352e12,30488834461171387e13,8841761993739702e15,26525285981219107e16,8222838654177922e18,2631308369336935e20,8683317618811886e21,29523279903960416e22,10333147966386145e24,37199332678990125e25,13763753091226346e27,5230226174666011e29,20397882081197444e30,8159152832478977e32,3345252661316381e34,140500611775288e37,6041526306337383e37,2658271574788449e39,11962222086548019e40,5502622159812089e42,25862324151116818e43,12413915592536073e45,6082818640342675e47,30414093201713376e48,15511187532873822e50,8065817517094388e52,42748832840600255e53,2308436973392414e56,12696403353658276e57,7109985878048635e59,40526919504877214e60,23505613312828785e62,13868311854568984e64,832098711274139e67,5075802138772248e68,3146997326038794e70,198260831540444e73,12688693218588417e73,8247650592082472e75,5443449390774431e77,3647111091818868e79,24800355424368305e80,1711224524281413e83,11978571669969892e84,8504785885678623e86,61234458376886085e87,44701154615126844e89,3307885441519386e92,248091408113954e95,18854947016660504e95,14518309202828587e97,11324281178206297e99,8946182130782976e101,7156945704626381e103,5797126020747368e105,4753643337012842e107,3945523969720659e109,3314240134565353e111,281710411438055e114,24227095383672734e114,2107757298379528e117,18548264225739844e118,1650795516090846e121,14857159644817615e122,1352001527678403e125,12438414054641308e126,11567725070816416e128,1087366156656743e131,1032997848823906e133,9916779348709496e134,9619275968248212e136,9426890448883248e138,9332621544394415e140,9332621544394415e142,942594775983836e145,9614466715035127e146,990290071648618e149,10299016745145628e150,1081396758240291e153,11462805637347084e154,1226520203196138e157,1324641819451829e159,14438595832024937e160,1588245541522743e163,17629525510902446e164,1974506857221074e167,22311927486598138e168,25435597334721877e170,2925093693493016e173,3393108684451898e175,3969937160808721e177,4684525849754291e179,5574585761207606e181,6689502913449127e183,8094298525273444e185,9875044200833601e187,1214630436702533e190,1506141741511141e192,1882677176888926e194,2372173242880047e196,30126600184576594e197,3856204823625804e200,4974504222477287e202,6466855489220474e204,847158069087882e207,11182486511960043e208,14872707060906857e210,19929427461615188e212,26904727073180504e214,3659042881952549e217,5012888748274992e219,6917786472619489e221,9615723196941089e223,13462012475717526e225,1898143759076171e228,2695364137888163e230,3854370717180073e232,55502938327393044e233,8047926057471992e236,11749972043909107e238,1727245890454639e241,25563239178728654e242,380892263763057e246,5713383956445855e247,862720977423324e250,13113358856834524e251,20063439050956823e253,30897696138473508e255,4789142901463394e258,7471062926282894e260,11729568794264145e262,1853271869493735e265,29467022724950384e266,47147236359920616e268,7590705053947219e271,12296942187394494e273,20044015765453026e275,3287218585534296e278,5423910666131589e280,9003691705778438e282,1503616514864999e285,25260757449731984e286,4269068009004705e289,7257415615307999e291];/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PBt=Kt,EBt=$s,CBt=Bo,ABt=Fe,MBt=kBt,xBt=170;function LBt(e){return PBt(e)?NaN:EBt(e)?e<0?NaN:e<=xBt?MBt[e]:ABt:CBt(e+1)}var IBt=LBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OBt=IBt,OU=OBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RBt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=3847467039331777e-5+e*(3685766504351951e-5+e*(1588920245372942e-5+e*(4059208354298835e-6+e*(6805476611834733e-7+e*(7823975500312005e-8+e*(6246580776401795e-9+e*(341986.3488721347+e*(12287.194511824551+e*(261.61404416416684+e*2.5066282746310007))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=2.5066282746310007+e*(261.61404416416684+e*(12287.194511824551+e*(341986.3488721347+e*(6246580776401795e-9+e*(7823975500312005e-8+e*(6805476611834733e-7+e*(4059208354298835e-6+e*(1588920245372942e-5+e*(3685766504351951e-5+e*3847467039331777e-5))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var DBt=RBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var NBt=DBt,FBt=NBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Bt=FBt,BBt=$Bt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zBt=10.900511,i0=zBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var WO=BBt,VBt=Bo,GO=Fn,jO=pe,HO=Ve,XO=ir,UBt=Ia,WBt=Ff,GBt=i0,YO=170,jBt=4269068009004705e289;function RU(e,t){var r,n,i;return e<UBt?t>YO?(n=RU(t,YO-t),n*=e,n*=jBt,1/n):1/(e*VBt(e+t)):(i=e+GBt-.5,e+t===e?jO(t)<10?r=HO((.5-e)*GO(t/i)):r=1:(jO(t)<10?r=HO((.5-e)*GO(t/i)):r=XO(i/(i+t),e-.5),r*=WO(e)/WO(e+t)),r*=XO(WBt/(i+t),t),r)}var HBt=RU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var XBt=pe,qO=Nn,ZO=Bo,KO=OU,YBt=HBt,JO=170;function qBt(e,t){var r,n,i;if(e<=0||e+t<=0)return ZO(e)/ZO(e+t);if(n=qO(t),n===t){if(i=qO(e),i===e&&e<=JO&&e+t<=JO)return KO(i-1)/KO(n+i-1);if(XBt(t)<20){if(t===0)return 1;if(t<0){for(e-=1,r=e,t+=1;t!==0;)e-=1,r*=e,t+=1;return r}for(r=1/e,t-=1;t!==0;)e+=1,r/=e,t-=1;return r}}return YBt(e,t)}var ZBt=qBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KBt=ZBt,tC=KBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JBt(e){return e===0?.3999999999940942:.3999999999940942+e*(.22222198432149784+e*.15313837699209373)}var QBt=JBt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tzt(e){return e===0?.6666666666666735:.6666666666666735+e*(.2857142874366239+e*(.1818357216161805+e*.14798198605116586))}var ezt=tzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright and license were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_log.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var QO=fi,rzt=e0,nzt=Kt,izt=ku,ozt=Ir,azt=QBt,szt=ezt,eg=.6931471803691238,rg=19082149292705877e-26,lzt=0x40000000000000,uzt=.3333333333333333,t8=1048575,czt=2146435072,fzt=1048576,hzt=1072693248;function dzt(e){var t,r,n,i,o,a,s,l,u,c,f,h;return e===0?ozt:nzt(e)||e<0?NaN:(r=QO(e),o=0,r<fzt&&(o-=54,e*=lzt,r=QO(e)),r>=czt?e+e:(o+=(r>>20)-izt|0,r&=t8,l=r+614244&1048576|0,e=rzt(e,r|l^hzt),o+=l>>20|0,s=e-1,(t8&2+r)<3?s===0?o===0?0:o*eg+o*rg:(a=s*s*(.5-uzt*s),o===0?s-a:o*eg-(a-o*rg-s)):(c=s/(2+s),h=c*c,l=r-398458|0,f=h*h,u=440401-r|0,i=f*azt(f),n=h*szt(f),l|=u,a=n+i,l>0?(t=.5*s*s,o===0?s-(t-c*(t+a)):o*eg-(t-(c*(t+a)+o*rg)-s)):o===0?s-c*(s-a):o*eg-(c*(s-a)-o*rg-s))))}var pzt=dzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vzt=pzt,ke=vzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_cos.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var gzt=fi,ow=CU,e8=AU,mzt=IU,Jo=[0,0],_zt=2147483647,yzt=1072243195,bzt=1044381696,wzt=2146435072;function Szt(e){var t,r;if(t=gzt(e),t&=_zt,t<=yzt)return t<bzt?1:ow(e,0);if(t>=wzt)return NaN;switch(r=mzt(e,Jo),r&3){case 0:return ow(Jo[0],Jo[1]);case 1:return-e8(Jo[0],Jo[1]);case 2:return-ow(Jo[0],Jo[1]);default:return e8(Jo[0],Jo[1])}}var Tzt=Szt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kzt=Tzt,eC=kzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pzt=Kt,Ezt=Df,r8=eC,aw=n0,Czt=pe,Lh=KE,Ih=Vs;function Azt(e){var t,r;return Pzt(e)?NaN:Ezt(e)?NaN:(r=e%2,t=Czt(r),t===0||t===1?Lh(0,r):t<.25?aw(Ih*r):t<.75?(t=.5-t,Lh(r8(Ih*t),r)):t<1.25?(r=Lh(1,r)-r,aw(Ih*r)):t<1.75?(t-=1.5,-Lh(r8(Ih*t),r)):(r-=Lh(2,r),aw(Ih*r)))}var Mzt=Azt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xzt=Mzt,Lzt=xzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Izt(e){return e===0?.06735230105312927:.06735230105312927+e*(.007385550860814029+e*(.0011927076318336207+e*(.00022086279071390839+e*25214456545125733e-21)))}var Ozt=Izt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Rzt(e){return e===0?.020580808432516733:.020580808432516733+e*(.0028905138367341563+e*(.0005100697921535113+e*(.00010801156724758394+e*44864094961891516e-21)))}var Dzt=Rzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Nzt(e){return e===0?1.3920053346762105:1.3920053346762105+e*(.7219355475671381+e*(.17193386563280308+e*(.01864591917156529+e*(.0007779424963818936+e*7326684307446256e-21))))}var Fzt=Nzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $zt(e){return e===0?.21498241596060885:.21498241596060885+e*(.325778796408931+e*(.14635047265246445+e*(.02664227030336386+e*(.0018402845140733772+e*3194753265841009e-20))))}var Bzt=$zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zzt(e){return e===0?-.032788541075985965:-.032788541075985965+e*(.006100538702462913+e*(-.0014034646998923284+e*.00031563207090362595))}var Vzt=zzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Uzt(e){return e===0?.01797067508118204:.01797067508118204+e*(-.0036845201678113826+e*(.000881081882437654+e*-.00031275416837512086))}var Wzt=Uzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Gzt(e){return e===0?-.010314224129834144:-.010314224129834144+e*(.0022596478090061247+e*(-.0005385953053567405+e*.0003355291926355191))}var jzt=Gzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Hzt(e){return e===0?.6328270640250934:.6328270640250934+e*(1.4549225013723477+e*(.9777175279633727+e*(.22896372806469245+e*.013381091853678766)))}var Xzt=Hzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Yzt(e){return e===0?2.4559779371304113:2.4559779371304113+e*(2.128489763798934+e*(.7692851504566728+e*(.10422264559336913+e*.003217092422824239)))}var qzt=Yzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Zzt(e){return e===0?.08333333333333297:.08333333333333297+e*(-.0027777777772877554+e*(.0007936505586430196+e*(-.00059518755745034+e*(.0008363399189962821+e*-.0016309293409657527))))}var Kzt=Zzt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/e_lgamma_r.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var Jzt=Kt,Qzt=Df,tVt=pe,ec=ke,eVt=YE,rVt=Lzt,nVt=Vs,sw=Fe,iVt=Ozt,oVt=Dzt,aVt=Fzt,sVt=Bzt,lVt=Vzt,uVt=Wzt,cVt=jzt,fVt=Xzt,hVt=qzt,dVt=Kzt,pVt=.07721566490153287,vVt=.3224670334241136,gVt=1,mVt=-.07721566490153287,_Vt=.48383612272381005,yVt=-.1475877229945939,bVt=.06462494023913339,wVt=-.07721566490153287,SVt=1,TVt=.4189385332046727,ng=1.4616321449683622,kVt=4503599627370496,PVt=0x400000000000000,EVt=8470329472543003e-37,n8=1.4616321449683622,CVt=-.12148629053584961,AVt=-3638676997039505e-33;function MVt(e){var t,r,n,i,o,a,s,l,u,c,f,h,d;if(Jzt(e)||Qzt(e))return e;if(e===0)return sw;if(e<0?(t=!0,e=-e):t=!1,e<EVt)return-ec(e);if(t){if(e>=kVt||(u=rVt(e),u===0))return sw;r=ec(nVt/tVt(u*e))}if(e===1||e===2)return 0;if(e<2)switch(e<=.9?(d=-ec(e),e>=ng-1+.27?(f=1-e,n=0):e>=ng-1-.27?(f=e-(n8-1),n=1):(f=e,n=2)):(d=0,e>=ng+.27?(f=2-e,n=0):e>=ng-.27?(f=e-n8,n=1):(f=e-1,n=2)),n){case 0:h=f*f,a=pVt+h*iVt(h),o=h*(vVt+h*oVt(h)),s=f*a+o,d+=s-.5*f;break;case 1:h=f*f,c=h*f,a=_Vt+c*lVt(c),o=yVt+c*uVt(c),i=bVt+c*cVt(c),s=h*a-(AVt-c*(o+f*i)),d+=CVt+s;break;case 2:a=f*(wVt+f*fVt(f)),o=SVt+f*hVt(f),d+=-.5*f+a/o;break}else if(e<8)switch(n=eVt(e),f=e-n,s=f*(mVt+f*sVt(f)),l=gVt+f*aVt(f),d=.5*f+s/l,h=1,n){case 7:h*=f+6;case 6:h*=f+5;case 5:h*=f+4;case 4:h*=f+3;case 3:h*=f+2,d+=ec(h)}else e<PVt?(u=ec(e),h=1/e,f=h*h,c=TVt+h*dVt(f),d=(e-.5)*(u-1)+c):d=e*(ec(e)-1);return t&&(d=r-d),d}var xVt=MVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LVt=xVt,Bf=LVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IVt=14901161193847656e-24,OVt=IVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RVt=709.782712893384,Cu=RVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var DVt=Ve;function NVt(e,t){var r,n,i,o;if(i=DVt(-t),n=i,n!==0)for(r=n,o=1;o<e;++o)r/=o,r*=t,n+=r;return n}var FVt=NVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Vt(e){return e===0?-.3250421072470015:-.3250421072470015+e*(-.02848174957559851+e*(-.005770270296489442+e*-23763016656650163e-21))}var BVt=$Vt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zVt(e){return e===0?.39791722395915535:.39791722395915535+e*(.0650222499887673+e*(.005081306281875766+e*(.00013249473800432164+e*-3960228278775368e-21)))}var VVt=zVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UVt(e){return e===0?.41485611868374833:.41485611868374833+e*(-.3722078760357013+e*(.31834661990116175+e*(-.11089469428239668+e*(.035478304325618236+e*-.002166375594868791))))}var WVt=UVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GVt(e){return e===0?.10642088040084423:.10642088040084423+e*(.540397917702171+e*(.07182865441419627+e*(.12617121980876164+e*(.01363708391202905+e*.011984499846799107))))}var jVt=GVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HVt(e){return e===0?-.6938585727071818:-.6938585727071818+e*(-10.558626225323291+e*(-62.375332450326006+e*(-162.39666946257347+e*(-184.60509290671104+e*(-81.2874355063066+e*-9.814329344169145)))))}var XVt=HVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YVt(e){return e===0?19.651271667439257:19.651271667439257+e*(137.65775414351904+e*(434.56587747522923+e*(645.3872717332679+e*(429.00814002756783+e*(108.63500554177944+e*(6.570249770319282+e*-.0604244152148581))))))}var qVt=YVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZVt(e){return e===0?-.799283237680523:-.799283237680523+e*(-17.757954917754752+e*(-160.63638485582192+e*(-637.5664433683896+e*(-1025.0951316110772+e*-483.5191916086514))))}var KVt=ZVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JVt(e){return e===0?30.33806074348246:30.33806074348246+e*(325.7925129965739+e*(1536.729586084437+e*(3199.8582195085955+e*(2553.0504064331644+e*(474.52854120695537+e*-22.44095244658582)))))}var QVt=JVt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The following copyright, license, and long comment were part of the original implementation available as part of [FreeBSD]{@link https://svnweb.freebsd.org/base/release/9.3.0/lib/msun/src/s_erf.c}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.
*
* Developed at SunPro, a Sun Microsystems, Inc. business.
* Permission to use, copy, modify, and distribute this
* software is freely granted, provided that this notice
* is preserved.
* ```
*/var tUt=Kt,i8=Ve,eUt=r0,rUt=Fe,nUt=Ir,iUt=BVt,oUt=VVt,aUt=WVt,sUt=jVt,lUt=XVt,uUt=qVt,cUt=KVt,fUt=QVt,ig=1e-300,hUt=13877787807814457e-33,o8=.8450629115104675,dUt=.12837916709551256,pUt=1,vUt=-.0023621185607526594,gUt=1,mUt=-.009864944034847148,_Ut=1,yUt=-.0098649429247001,bUt=1;function wUt(e){var t,r,n,i,o,a,s,l;if(tUt(e))return NaN;if(e===rUt)return 0;if(e===nUt)return 2;if(e===0)return 1;if(e<0?(t=!0,r=-e):(t=!1,r=e),r<.84375)return r<hUt?1-e:(n=e*e,i=dUt+n*iUt(n),o=pUt+n*oUt(n),a=i/o,e<.25?1-(e+e*a):(i=e*a,i+=e-.5,.5-i));if(r<1.25)return o=r-1,s=vUt+o*aUt(o),l=gUt+o*sUt(o),t?1+o8+s/l:1-o8-s/l;if(r<28){if(o=1/(r*r),r<2.857142857142857)i=mUt+o*lUt(o),o=_Ut+o*uUt(o);else{if(e<-6)return 2-ig;i=yUt+o*cUt(o),o=bUt+o*fUt(o)}return n=eUt(r,0),i=i8(-(n*n)-.5625)*i8((n-r)*(n+r)+i/o),t?2-i/r:i/r}return t?2-ig:ig*ig}var SUt=wUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TUt=SUt,DU=TUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var kUt=DU,a8=nr,PUt=Ve,EUt=Vs;function CUt(e,t){var r,n,i,o,a;if(o=kUt(a8(t)),o!==0&&e>1){for(n=PUt(-t)/a8(EUt*t),n*=t,r=.5,n/=r,i=n,a=2;a<e;++a)n/=a-r,n*=t,i+=n;o+=i}return o}var AUt=CUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MUt=-708.3964185322641,zf=MUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rc=Ve,og=ir,xUt=ke,s8=Cu,l8=zf;function LUt(e,t){var r,n;return n=e*xUt(t),t>=1?n<s8&&-t>l8?r=og(t,e)*rc(-t):e>=1?r=og(t/rc(t/e),e):r=rc(n-t):n>l8?r=og(t,e)*rc(-t):t/e<s8?r=og(t/rc(t/e),e):r=rc(n-t),r}var IUt=LUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var OUt=6.283185307179586,NU=OUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function RUt(e){return e===0?-.3333333333333333:-.3333333333333333+e*(.08333333333333333+e*(-.014814814814814815+e*(.0011574074074074073+e*(.0003527336860670194+e*(-.0001787551440329218+e*(3919263178522438e-20+e*(-21854485106799924e-22+e*(-185406221071516e-20+e*(8296711340953087e-22+e*(-17665952736826078e-23+e*(6707853543401498e-24+e*(10261809784240309e-24+e*(-4382036018453353e-24+e*914769958223679e-24)))))))))))))}var DUt=RUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function NUt(e){return e===0?-.001851851851851852:-.001851851851851852+e*(-.003472222222222222+e*(.0026455026455026454+e*(-.0009902263374485596+e*(.00020576131687242798+e*(-4018775720164609e-22+e*(-18098550334489977e-21+e*(764916091608111e-20+e*(-16120900894563446e-22+e*(4647127802807434e-24+e*(1378633446915721e-22+e*(-5752545603517705e-23+e*11951628599778148e-24)))))))))))}var FUt=NUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Ut(e){return e===0?.004133597883597883:.004133597883597883+e*(-.0026813271604938273+e*(.0007716049382716049+e*(20093878600823047e-22+e*(-.00010736653226365161+e*(52923448829120125e-21+e*(-12760635188618728e-21+e*(3423578734096138e-23+e*(13721957309062932e-22+e*(-6298992138380055e-22+e*14280614206064242e-23)))))))))}var BUt=$Ut;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zUt(e){return e===0?.0006494341563786008:.0006494341563786008+e*(.00022947209362139917+e*(-.0004691894943952557+e*(.00026772063206283885+e*(-7561801671883977e-20+e*(-2396505113867297e-22+e*(11082654115347302e-21+e*(-56749528269915965e-22+e*14230900732435883e-22)))))))}var VUt=zUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UUt(e){return e===0?-.0008618882909167117:-.0008618882909167117+e*(.0007840392217200666+e*(-.0002990724803031902+e*(-14638452578843418e-22+e*(6641498215465122e-20+e*(-3968365047179435e-20+e*11375726970678419e-21)))))}var WUt=UUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GUt(e){return e===0?-.00033679855336635813:-.00033679855336635813+e*(-6972813758365858e-20+e*(.0002772753244959392+e*(-.00019932570516188847+e*(6797780477937208e-20+e*(1419062920643967e-22+e*(-13594048189768693e-21+e*(8018470256334202e-21+e*-2291481176508095e-21)))))))}var jUt=GUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HUt(e){return e===0?.0005313079364639922:.0005313079364639922+e*(-.0005921664373536939+e*(.0002708782096718045+e*(7902353232660328e-22+e*(-8153969367561969e-20+e*(561168275310625e-19+e*-18329116582843375e-21)))))}var XUt=HUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YUt(e){return e===0?.00034436760689237765:.00034436760689237765+e*(5171790908260592e-20+e*(-.00033493161081142234+e*(.0002812695154763237+e*-.00010976582244684731)))}var qUt=YUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZUt(e){return e===0?-.0006526239185953094:-.0006526239185953094+e*(.0008394987206720873+e*-.000438297098541721)}var KUt=ZUt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var JUt=Bs,QUt=DU,lw=nr,tWt=Ve,eWt=ke,rWt=NU,nWt=DUt,iWt=FUt,oWt=BUt,aWt=VUt,sWt=WUt,lWt=jUt,uWt=XUt,cWt=qUt,fWt=KUt,vi=[0,0,0,0,0,0,0,0,0,0];function hWt(e,t){var r,n,i,o,a;return n=(t-e)/e,i=-eWt(1+n)+n,o=e*i,a=lw(2*i),t<e&&(a=-a),vi[0]=nWt(a),vi[1]=iWt(a),vi[2]=oWt(a),vi[3]=aWt(a),vi[4]=sWt(a),vi[5]=lWt(a),vi[6]=uWt(a),vi[7]=cWt(a),vi[8]=fWt(a),vi[9]=-.0005967612901927463,r=JUt(vi,1/e),r*=tWt(-o)/lw(rWt*e),t<e&&(r=-r),r+=QUt(lw(o))/2,r}var dWt=hWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pWt=eval,vWt=pWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var gWt=vWt;function mWt(){var e;try{gWt('"use strict"; (function* () {})'),e=!0}catch{e=!1}return e}var _Wt=mWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yWt=_Wt,FU=yWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ag=pe,bWt=Ia,wWt=1e6;function SWt(e,t){var r,n,i,o,a,s;if(s={},arguments.length>1&&(s=t),n=s.tolerance||bWt,o=s.maxTerms||wWt,a=s.initialValue||0,r=typeof e.next=="function",r===!0){for(i of e)if(a+=i,ag(n*a)>=ag(i)||--o===0)break}else do i=e(),a+=i;while(ag(n*a)<ag(i)&&--o);return a}var TWt=SWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var u8=pe,kWt=Ia,PWt=1e6;function EWt(e,t){var r,n,i,o,a;a={},arguments.length>1&&(a=t),r=a.tolerance||kWt,i=a.maxTerms||PWt,o=a.initialValue||0;do n=e(),o+=n;while(u8(r*o)<u8(n)&&--i);return o}var CWt=EWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AWt=FU,MWt=TWt,xWt=CWt,RT;AWt()?RT=MWt:RT=xWt;var rC=RT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function LWt(e,t){var r=1,n=e,i=t;return o;function o(){var a=r;return n+=1,r*=i/n,a}}var IWt=LWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var OWt=rC,RWt=IWt;function DWt(e,t,r){var n,i;return r=r||0,i=RWt(e,t),n=OWt(i,{initialValue:r}),n}var NWt=DWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FWt(e){var t,r,n;return e===0?1/0:(e<0?t=-e:t=e,t<=1?(r=709811.662581658+e*(679979.8474157227+e*(293136.7857211597+e*(74887.54032914672+e*(12555.290582413863+e*(1443.4299244417066+e*(115.24194596137347+e*(6.309239205732627+e*(.22668404630224365+e*(.004826466289237662+e*4624429436045379e-20))))))))),n=0+e*(362880+e*(1026576+e*(1172700+e*(723680+e*(269325+e*(63273+e*(9450+e*(870+e*(45+e*1)))))))))):(e=1/e,r=4624429436045379e-20+e*(.004826466289237662+e*(.22668404630224365+e*(6.309239205732627+e*(115.24194596137347+e*(1443.4299244417066+e*(12555.290582413863+e*(74887.54032914672+e*(293136.7857211597+e*(679979.8474157227+e*709811.662581658))))))))),n=1+e*(45+e*(870+e*(9450+e*(63273+e*(269325+e*(723680+e*(1172700+e*(1026576+e*(362880+e*0)))))))))),r/n)}var $Wt=FWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/lanczos.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var BWt=$Wt,zWt=BWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VWt=zWt,G_=VWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var UWt=G_,WWt=Bf,GWt=Bo,jWt=Fn,HWt=nr,XWt=pe,Qa=Ve,Oh=ir,uw=Eu,cw=zs,c8=ke,sg=Cu,Rh=zf,fw=i0,YWt=Ff;function qWt(e,t){var r,n,i,o,a,s,l;return i=e+fw-.5,l=(t-e-fw+.5)/i,e<1?t<=Rh?Qa(e*c8(t)-t-WWt(e)):Oh(t,e)*Qa(-t)/GWt(e):(XWt(l*l*e)<=100&&e>150?(r=e*(jWt(l)-l)+t*(.5-fw)/i,r=Qa(r)):(o=e*c8(t/i),a=e-t,cw(o,a)<=Rh||uw(o,a)>=sg?(n=a/e,cw(o,a)/2>Rh&&uw(o,a)/2<sg?(s=Oh(t/i,e/2)*Qa(a/2),r=s*s):cw(o,a)/4>Rh&&uw(o,a)/4<sg&&t>e?(s=Oh(t/i,e/4)*Qa(a/4),r=s*s,r*=r):n>Rh&&n<sg?r=Oh(t*Qa(n)/i,e):r=Qa(o+a)):r=Oh(t/i,e)*Qa(a)),r*=HWt(i/YWt)/UWt(e),r)}var ZWt=qWt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_60_0/boost/math/special_functions/powm1.hpp}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var f8=Kt,h8=pe,KWt=Rf,JWt=ke,QWt=ir,tGt=YE;function eGt(e,t){var r;if(f8(e)||f8(t))return NaN;if(t===0)return 0;if(e===0)return-1;if(e<0&&t%2===0&&(e=-e),e>0){if((h8(t*(e-1))<.5||h8(t)<.2)&&(r=JWt(e)*t,r<.5))return KWt(r)}else if(tGt(t)!==t)return NaN;return QWt(e,t)-1}var rGt=eGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var nGt=rGt,iGt=nGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function oGt(e){var t,r,n;return e===0?-.01803556856784494:(e<0?t=-e:t=e,t<=1?(r=-.01803556856784494+e*(.02512664961998968+e*(.049410315156753225+e*(.0172491608709614+e*(-.0002594535632054381+e*(-.0005410098692152044+e*(-3245886498259485e-20+e*0)))))),n=1+e*(1.962029871977952+e*(1.4801966942423133+e*(.5413914320717209+e*(.09885042511280101+e*(.008213096746488934+e*(.00022493629192211576+e*-22335276320861708e-23))))))):(e=1/e,r=0+e*(-3245886498259485e-20+e*(-.0005410098692152044+e*(-.0002594535632054381+e*(.0172491608709614+e*(.049410315156753225+e*(.02512664961998968+e*-.01803556856784494)))))),n=-22335276320861708e-23+e*(.00022493629192211576+e*(.008213096746488934+e*(.09885042511280101+e*(.5413914320717209+e*(1.4801966942423133+e*(1.962029871977952+e*1))))))),r/n)}var aGt=oGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function sGt(e){var t,r,n;return e===0?.04906224540690395:(e<0?t=-e:t=e,t<=1?(r=.04906224540690395+e*(-.09691175301595212+e*(-.4149833583594954+e*(-.4065671242119384+e*(-.1584135863906922+e*(-.024014982064857155+e*-.0010034668769627955))))),n=1+e*(3.0234982984646304+e*(3.4873958536072385+e*(1.9141558827442668+e*(.5071377386143635+e*(.05770397226904519+e*.001957681026011072)))))):(e=1/e,r=-.0010034668769627955+e*(-.024014982064857155+e*(-.1584135863906922+e*(-.4065671242119384+e*(-.4149833583594954+e*(-.09691175301595212+e*.04906224540690395))))),n=.001957681026011072+e*(.05770397226904519+e*(.5071377386143635+e*(1.9141558827442668+e*(3.4873958536072385+e*(3.0234982984646304+e*1)))))),r/n)}var lGt=sGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function uGt(e){var t,r,n;return e===0?-.029232972183027003:(e<0?t=-e:t=e,t<=1?(r=-.029232972183027003+e*(.14421626775719232+e*(-.14244039073863127+e*(.05428096940550536+e*(-.008505359768683364+e*(.0004311713426792973+e*0))))),n=1+e*(-1.5016935605448505+e*(.846973248876495+e*(-.22009515181499575+e*(.02558279715597587+e*(-.0010066679553914337+e*-8271935218912905e-22)))))):(e=1/e,r=0+e*(.0004311713426792973+e*(-.008505359768683364+e*(.05428096940550536+e*(-.14244039073863127+e*(.14421626775719232+e*-.029232972183027003))))),n=-8271935218912905e-22+e*(-.0010066679553914337+e*(.02558279715597587+e*(-.22009515181499575+e*(.846973248876495+e*(-1.5016935605448505+e*1)))))),r/n)}var cGt=uGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/lgamma_small.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var hw=ke,fGt=Ia,hGt=aGt,dGt=lGt,pGt=cGt,vGt=.15896368026733398,gGt=.5281534194946289,mGt=.45201730728149414;function _Gt(e,t,r){var n,i,o,a;if(e<fGt)return-hw(e);if(t===0||r===0)return 0;if(i=0,e>2){if(e>=3){do e-=1,r-=1,i+=hw(e);while(e>=3);r=e-2}return o=r*(e+1),a=hGt(r),i+=o*vGt+o*a,i}return e<1&&(i+=-hw(e),r=t,t=e,e+=1),e<=1.5?(o=dGt(t),n=t*r,i+=n*gGt+n*o,i):(o=r*t,a=pGt(-r),i+=o*mGt+o*a,i)}var yGt=_Gt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var d8=Bo,p8=Rf,bGt=Fn,wGt=Kt,v8=yGt;function SGt(e){return wGt(e)?NaN:e<0?e<-.5?d8(1+e)-1:p8(-bGt(e)+v8(e+2,e+1,e)):e<2?p8(v8(e+1,e,e-1)):d8(1+e)-1}var TGt=SGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kGt=TGt,PGt=kGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function EGt(e,t){var r,n,i,o;return r=-t,t=-t,n=e+1,i=1,a;function a(){return o=r/n,r*=t,i+=1,r/=i,n+=1,o}}var CGt=EGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var AGt=iGt,MGt=rC,xGt=PGt,LGt=CGt;function IGt(e,t,r){var n,i,o,a,s;return i=xGt(e),o=(i+1)/e,a=AGt(t,e),i-=a,i/=e,s=LGt(e,t),a+=1,n=r?o:0,i=-a*MGt(s,{initialValue:(n-i)/a}),r&&(i=-i),[i,o]}var OGt=IGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RGt=11754943508222875e-54,j_=RGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var y1=pe,wo=j_,DGt=Ia,NGt=1e6;function FGt(e,t,r){var n,i,o,a,s,l,u;if(n=typeof e.next=="function",u=n?e.next().value:e(),a=u[1],o=u[0],a===0&&(a=wo),s=a,l=0,n===!0)do u=e.next().value,u&&(l=u[1]+u[0]*l,l===0&&(l=wo),s=u[1]+u[0]/s,s===0&&(s=wo),l=1/l,i=s*l,a*=i);while(y1(i-1)>t&&--r);else do u=e(),u&&(l=u[1]+u[0]*l,l===0&&(l=wo),s=u[1]+u[0]/s,s===0&&(s=wo),l=1/l,i=s*l,a*=i);while(u&&y1(i-1)>t&&--r);return o/a}function $Gt(e,t,r){var n,i,o,a,s,l;if(n=typeof e.next=="function",l=n?e.next().value:e(),o=l[1],o===0&&(o=wo),a=o,s=0,n===!0)do l=e.next().value,l&&(s=l[1]+l[0]*s,s===0&&(s=wo),a=l[1]+l[0]/a,a===0&&(a=wo),s=1/s,i=a*s,o*=i);while(l&&y1(i-1)>t&&--r);else do l=e(),l&&(s=l[1]+l[0]*s,s===0&&(s=wo),a=l[1]+l[0]/a,a===0&&(a=wo),s=1/s,i=a*s,o*=i);while(l&&y1(i-1)>t&&--r);return o}function BGt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),r=n.maxIter||NGt,i=n.tolerance||DGt,n.keep?$Gt(e,i,r):FGt(e,i,r)}var zGt=BGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $U=pe,VGt=Ia,Uc=j_,UGt=1e6;function WGt(e,t,r){var n,i,o,a,s,l;l=e(),s=l[1],i=l[0],s===0&&(s=Uc),o=s,a=0;do l=e(),l&&(a=l[1]+l[0]*a,a===0&&(a=Uc),o=l[1]+l[0]/o,o===0&&(o=Uc),a=1/a,n=o*a,s*=n);while(l&&$U(n-1)>t&&--r);return i/s}function GGt(e,t,r){var n,i,o,a,s;s=e(),a=s[1],a===0&&(a=Uc),i=a,o=0;do s=e(),s&&(o=s[1]+s[0]*o,o===0&&(o=Uc),i=s[1]+s[0]/i,i===0&&(i=Uc),o=1/o,n=i*o,a*=n);while(s&&$U(n-1)>t&&--r);return a}function jGt(e,t){var r,n,i;return n={},arguments.length>1&&(n=t),i=n.tolerance||VGt,r=n.maxIter||UGt,n.keep?GGt(e,i,r):WGt(e,i,r)}var HGt=jGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var XGt=FU,YGt=zGt,qGt=HGt,DT;XGt()?DT=YGt:DT=qGt;var BU=DT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function ZGt(e,t){var r=t-e+1,n=e,i=0;return o;function o(){return i+=1,r+=2,[i*(n-i),r]}}var KGt=ZGt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var JGt=BU,QGt=KGt;function tjt(e,t){var r=QGt(e,t);return 1/(t-e+1+JGt(r))}var ejt=tjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006-7, 2013-14.
* (C) Copyright Paul A. Bristow 2007, 2013-14.
* (C) Copyright Nikhar Agrawal 2013-14.
* (C) Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var rjt=Bf,njt=Nn,Dh=Bo,g8=pe,ijt=Ve,m8=ir,gi=ke,ojt=OVt,_8=$f,ajt=W_,y8=Cu,sjt=Fe,ljt=FVt,ujt=AUt,b8=IUt,cjt=dWt,dw=NWt,w8=ZWt,fjt=OGt,S8=ejt,hjt=170;function zU(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,m,g,_;if(e<0||t<=0)return NaN;if(o=r===void 0?!0:r,f=n,h=0,t>=hjt&&!o)return f&&t*4<e?(h=t*gi(e)-e,h+=gi(S8(t,e))):!f&&t>4*e?(h=t*gi(e)-e,s=0,h+=gi(dw(t,e,s)/t)):(h=zU(t,e,!0,f),h===0?f?(h=1+1/(12*t)+1/(288*t*t),h=gi(h)-t+(t-.5)*gi(t),h+=gi(ajt)):(h=t*gi(e)-e,s=0,h+=gi(dw(t,e,s)/t)):h=gi(h)+rjt(t)),h>y8?sjt:ijt(h);switch(c=t<30&&t<=e+1&&e<y8,c?(g=njt(t),d=g===t,l=d?!1:g8(g-t)===.5):d=l=!1,d&&e>.6?(f=!f,a=0):l&&e>.2?(f=!f,a=1):e<ojt&&t>1?a=6:e<.5?-.4/gi(e)<t?a=2:a=3:e<1.1?e*.75<t?a=2:a=3:(u=!1,o&&t>20&&(p=g8((e-t)/t),t>200?20/t>p*p&&(u=!0):p<.4&&(u=!0)),u?a=5:e-1/(3*e)<t?a=2:(a=4,f=!f)),a){case 0:h=ljt(t,e),o===!1&&(h*=Dh(t));break;case 1:h=ujt(t,e),o===!1&&(h*=Dh(t));break;case 2:h=o?w8(t,e):b8(t,e),h!==0&&(s=0,i=!1,f&&(s=o?1:Dh(t),o||h>=1||_8*h>s?(s/=h,o||t<1||_8/t>s?(s*=-t,i=!0):s=0):s=0)),h*=dw(t,e,s)/t,i&&(f=!1,h=-h);break;case 3:f=!f,m=fjt(t,e,f),h=m[0],_=m[1],f=!1,o&&(h/=_);break;case 4:h=o?w8(t,e):b8(t,e),h!==0&&(h*=S8(t,e));break;case 5:h=cjt(t,e),e>=t&&(f=!f);break;case 6:h=o?m8(e,t)/Dh(t+1):m8(e,t)/t,h*=1-t*e/(t+1);break}return o&&h>1&&(h=1),f&&(v=o?1:Dh(t),h=v-h),h}var djt=zU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pjt=djt,VU=pjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
* (C) Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nc=Ve,lg=ir,vjt=ke,T8=Cu,k8=zf;function gjt(e,t){var r,n;return n=e*vjt(t),t>=1?n<T8&&-t>k8?r=lg(t,e)*nc(-t):e>=1?r=lg(t/nc(t/e),e):r=nc(n-t):n>k8?r=lg(t,e)*nc(-t):t/e<T8?r=lg(t/nc(t/e),e):r=nc(n-t),r}var mjt=gjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/gamma.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006-7, 2013-14.
* Copyright Paul A. Bristow 2007, 2013-14.
* Copyright Nikhar Agrawal 2013-14.
* Copyright Christopher Kormanyos 2013-14.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var _jt=G_,yjt=Bf,bjt=Bo,wjt=Fn,Sjt=nr,Tjt=pe,ts=Ve,Nh=ir,pw=Eu,vw=zs,P8=ke,ug=Cu,Fh=zf,gw=i0,kjt=Ff;function Pjt(e,t){var r,n,i,o,a,s,l;return i=e+gw-.5,l=(t-e-gw+.5)/i,e<1?t<=Fh?ts(e*P8(t)-t-yjt(e)):Nh(t,e)*ts(-t)/bjt(e):(Tjt(l*l*e)<=100&&e>150?(r=e*(wjt(l)-l)+t*(.5-gw)/i,r=ts(r)):(o=e*P8(t/i),a=e-t,vw(o,a)<=Fh||pw(o,a)>=ug?(n=a/e,vw(o,a)/2>Fh&&pw(o,a)/2<ug?(s=Nh(t/i,e/2)*ts(a/2),r=s*s):vw(o,a)/4>Fh&&pw(o,a)/4<ug&&t>e?(s=Nh(t/i,e/4)*ts(a/4),r=s*s,r*=r):n>Fh&&n<ug?r=Nh(t*ts(n)/i,e):r=ts(o+a)):r=Nh(t/i,e)*ts(a)),r*=Sjt(i/kjt)/_jt(e),r)}var Ejt=Pjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Cjt=tC,E8=OU,Ajt=VU,Mjt=Fn,cg=pe,C8=ir,xjt=ke,Ljt=Pu,A8=Ia,Ijt=mjt,Ojt=Ejt,es=new Array(30);function Rjt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,C;if(h=t-1,k=e+h/2,n<.35?m=Mjt(-n):m=xjt(r),C=-k*m,_=Ojt(t,C),_<=Ljt)return i;for(a?(s=_/Cjt(e,t),s/=C8(k,t)):s=Ijt(t,C)/C8(k,t),s*=o,es[0]=1,b=Ajt(C,t,!0,!0),b/=_,c=i+s*b,u=1,d=m/2,d*=d,p=1,g=4*k*k,f=t,T=1;T<es.length;++T){for(u+=2,es[T]=0,v=t-T,l=3,w=1;w<T;++w)v=w*t-T,es[T]+=v*es[T-w]/E8(l),l+=2;if(es[T]/=T,es[T]+=h/E8(u),b=(f*(f+1)*b+(C+f+1)*p)/g,p*=d,f+=2,S=s*es[T]*b,c+=S,S>1){if(cg(S)<cg(A8*c))break}else if(cg(S/A8)<cg(c))break}return c}var Djt=Rjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_37_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/function Njt(e,t,r){var n,i;if(r===0)return 1;for(n=1,i=0;i<r;i++)n*=(e+i)/(t+i);return n}var Fjt=Njt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mw=pe,M8=Eu,$jt=Fe;function Bjt(e,t){var r,n,i;if(r=arguments.length,r===0)return $jt;if(r===2)return M8(mw(e),mw(t));for(n=[],i=0;i<r;i++)n.push(mw(arguments[i]));return M8.apply(null,n)}var zjt=Bjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vjt=zjt,Ujt=Vjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _w=pe,x8=zs,Wjt=Fe;function Gjt(e,t){var r,n,i;if(r=arguments.length,r===0)return Wjt;if(r===2)return x8(_w(e),_w(t));for(n=[],i=0;i<r;i++)n.push(_w(arguments[i]));return x8.apply(null,n)}var jjt=Gjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Hjt=jjt,Xjt=Hjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var yw=G_,Yjt=Ujt,qjt=Xjt,L8=Rf,rs=Fn,I8=nr,fg=pe,so=Ve,lo=ir,Zjt=zs,Wn=ke,uo=Cu,ic=zf,bw=i0,Kjt=Ff;function Jjt(e,t,r,n,i){var o,a,s,l,u,c,f,h,d,p,v,m,g,_;if(!i)return lo(r,e)*lo(n,t);if(g=e+t,l=e+bw-.5,u=t+bw-.5,c=g+bw-.5,o=yw(g),o/=yw(e)*yw(t),o*=I8(u/Kjt),o*=I8(l/c),f=(r*t-n*l)/l,h=(n*e-r*u)/u,qjt(f,h)<.2)if(f*h>0||Zjt(e,t)<1)fg(f)<.1?o*=so(e*rs(f)):o*=lo(r*c/l,e),fg(h)<.1?o*=so(t*rs(h)):o*=lo(n*c/u,t);else if(Yjt(f,h)<.5)a=e<t,s=t/e,a&&s*h<.1||!a&&f/s>.1?(d=L8(s*rs(h)),d=f+d+d*f,d=e*rs(d),o*=so(d)):(d=L8(rs(f)/s),d=h+d+d*h,d=t*rs(d),o*=so(d));else if(fg(f)<fg(h))if(_=e*rs(f)+t*Wn(n*c/u),_<=ic||_>=uo){if(_+=Wn(o),_>=uo)return NaN;o=so(_)}else o*=so(_);else if(_=t*rs(h)+e*Wn(r*c/l),_<=ic||_>=uo){if(_+=Wn(o),_>=uo)return NaN;o=so(_)}else o*=so(_);else if(v=r*c/l,m=n*c/u,f=e*Wn(v),h=t*Wn(m),f>=uo||f<=ic||h>=uo||h<=ic)if(e<t)if(p=lo(m,t/e),d=e*(Wn(v)+Wn(p)),d<uo&&d>ic)o*=lo(p*v,e);else{if(h+=f+Wn(o),h>=uo)return NaN;o=so(h)}else if(p=lo(v,e/t),d=(Wn(p)+Wn(m))*t,d<uo&&d>ic)o*=lo(p*m,t);else{if(h+=f+Wn(o),h>=uo)return NaN;o=so(h)}else o*=lo(v,e)*lo(m,t);return o}var nC=Jjt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Qjt=BU,tHt=nC,eHt={keep:!0,maxIter:1e3};function rHt(e,t,r,n){var i=0;return o;function o(){var a,s,l;return s=(e+i-1)*(e+t+i-1)*i*(t-i)*r*r,a=e+2*i-1,s/=a*a,l=i,l+=i*(t-i)*r/(e+2*i-1),l+=(e+i)*(e*n-t*r+1+i*(2-r))/(e+2*i+1),i+=1,[s,l]}}function nHt(e,t,r,n,i,o){var a,s,l;return a=tHt(e,t,r,n,i),o&&(o[1]=a),a===0?a:(l=rHt(e,t,r,n),s=Qjt(l,eHt),a/s)}var iHt=nHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ww=$s,O8=Kt,oHt=JE,aHt=U_;function UU(e,t){var r,n;if(O8(e)||O8(t))return NaN;if(!ww(e)||!ww(t))return NaN;if(t<0)return 0;if(e<0)return r=UU(-e+t-1,t),oHt(t)&&(r=-r),r;if(t>e)return 0;if(t===0||t===e)return 1;if(t===1||t===e-1)return e;for(e-t<t&&(t=e-t),r=e,n=2;n<=t;n++)r*=(e-n+1)/n;return ww(r)?r:aHt(r)}var sHt=UU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lHt=sHt,uHt=lHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var R8=uHt,yl=Nn,$h=ir,cHt=Pu;function fHt(e,t,r,n){var i,o,a,s,l;if(o=$h(r,e),o>cHt)for(s=o,l=yl(e-1);l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;else if(a=yl(e*r),a<=t+1&&(a=yl(t+2)),o=$h(r,a)*$h(n,e-a),o*=R8(yl(e),yl(a)),o===0)for(l=a-1;l>t;l--)o+=$h(r,l)*$h(n,e-l),o*=R8(yl(e),yl(l));else{for(s=o,i=o,l=a-1;l>t;l--)s*=(l+1)*n/((e-l)*r),o+=s;for(s=i,l=a+1;l<=e;l++)s*=(e-l+1)*r/(l*n),o+=s}return o}var hHt=fHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var dHt=nC;function pHt(e,t,r,n,i,o,a){var s,l,u,c;if(s=dHt(e,t,r,n,o),a&&(a[1]=s),s/=e,s===0)return s;for(u=1,l=1,c=0;c<i-1;++c)l*=(e+t+c)*r/(e+c+1),u+=l;return s*=u,s}var vHt=pHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/beta.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Sw=G_,gHt=rC,mHt=Fn,_Ht=nr,Tw=Ve,hg=ir,Bh=ke,yHt=Pu,D8=Cu,N8=zf,kw=i0,bHt=Ff,F8={maxTerms:100};function wHt(e,t,r,n){var i=1-t,o=1;return a;function a(){var s=n/e;return e+=1,n*=i*r/o,o+=1,i+=1,s}}function SHt(e,t,r,n,i,o,a){var s,l,u,c,f,h,d,p;return i?(d=e+t,l=e+kw-.5,u=t+kw-.5,c=d+kw-.5,s=Sw(d)/(Sw(e)*Sw(t)),f=Bh(c/u)*(t-.5),h=Bh(r*c/l)*e,f>N8&&f<D8&&h>N8&&h<D8?(e*t<u*10?s*=Tw((t-.5)*mHt(e/u)):s*=hg(c/u,t-.5),s*=hg(r*c/l,e),s*=_Ht(l/bHt),o&&(o[1]=s*hg(a,t))):(s=Bh(s)+f+h+(Bh(l)-1)/2,o&&(o[1]=Tw(s+t*Bh(a))),s=Tw(s))):s=hg(r,e),s<yHt?n:(p=wHt(e,t,r,s),F8.initialValue=n,gHt(p,F8))}var THt=SHt,kHt=Kt,PHt=Rf,dg=Nn,$8=Fn,B8=XE,Gn=PU,Pw=nr,EHt=Ve,zh=ir,CHt=Eu,z8=zs,pg=$f,V8=Pu,AHt=wFt,MHt=QE,WU=Vs,ns=Djt,Ew=Fjt,xHt=nC,U8=iHt,LHt=hHt,Vh=vHt,co=THt,IHt=1/WU;function OHt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,m,g,_,b;if(b=1-e,p=s,v=s+a,o[v]=-1,kHt(e)||e<0||e>1)return o[p]=NaN,o[v]=NaN,o;if(n){if(t<0||r<0)return o[p]=NaN,o[v]=NaN,o;if(t===0){if(r===0)return o[p]=NaN,o[v]=NaN,o;if(r>0)return o[p]=i?0:1,o}else if(r===0&&t>0)return o[p]=i?1:0,o}else if(t<=0||r<=0)return o[p]=NaN,o[v]=NaN,o;return e===0?(t===1?o[v]=1:o[v]=t<1?pg/2:V8*2,i?(o[p]=n?1:Gn(t,r),o):(o[p]=0,o)):e===1?(r===1?o[v]=1:o[v]=r<1?pg/2:V8*2,i?o[p]=0:o[p]=n?1:Gn(t,r),o):t===.5&&r===.5?(o[v]=IHt*Pw(b*e),_=B8(Pw(i?b:e)),_/=MHt,n||(_*=WU),o[p]=_,o):(t===1&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r===1?t===1?(o[p]=i?b:e,o[v]=1,o):(o[v]=t*zh(e,t-1),b<.5?_=i?-PHt(t*$8(-b)):EHt(t*$8(-b)):_=i?-(zh(e,t)-1):zh(e,t),n||(_/=t),o[p]=_,o):(z8(t,r)<=1?(e>.5&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),CHt(t,r)<=1?t>=z8(.2,r)||zh(e,t)<=.9?i?(c=-(n?1:Gn(t,r)),i=!1,c=-co(t,r,e,c,n,o,b)):c=co(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Gn(t,r)),i=!1,c=-co(t,r,e,c,n,o,b)):c=co(t,r,e,0,n,o,b):(n?u=1:u=Ew(t+r,t,20),c=Vh(t,r,e,b,20,n,o),i?(c-=n?1:Gn(t,r),i=!1,c=-ns(t+20,r,e,b,c,u,n)):c=ns(t+20,r,e,b,c,u,n))):r<=1||e<.1&&zh(r*e,t)<=.7?i?(c=-(n?1:Gn(t,r)),i=!1,c=-co(t,r,e,c,n,o,b)):c=co(t,r,e,0,n,o,b):(d=r,r=t,t=d,d=b,b=e,e=d,i=!i,b>=.3?i?(c=-(n?1:Gn(t,r)),i=!1,c=-co(t,r,e,c,n,o,b)):c=co(t,r,e,0,n,o,b):t>=15?i?(c=-(n?1:Gn(t,r)),i=!1,c=-ns(t,r,e,b,c,1,n)):c=ns(t,r,e,b,0,1,n):(n?u=1:u=Ew(t+r,t,20),c=Vh(t,r,e,b,20,n,o),i?(c-=n?1:Gn(t,r),i=!1,c=-ns(t+20,r,e,b,c,u,n)):c=ns(t+20,r,e,b,c,u,n)))):(t<r?l=t-(t+r)*e:l=(t+r)*b-r,l<0&&(d=r,r=t,t=d,d=b,b=e,e=d,i=!i),r<40?dg(t)===t&&dg(r)===r&&t<AHt-100?(m=t-1,g=r+m,c=LHt(g,m,e,b),n||(c*=Gn(t,r))):r*e<=.7?i?(c=-(n?1:Gn(t,r)),i=!1,c=-co(t,r,e,c,n,o,b)):c=co(t,r,e,0,n,o,b):t>15?(g=dg(r),g===r&&(g-=1),f=r-g,n?u=1:u=Ew(t+f,f,g),c=Vh(f,t,b,e,g,n),c=ns(t,f,e,b,c,1,n),c/=u):n?(g=dg(r),f=r-g,f<=0&&(g-=1,f+=1),c=Vh(f,t,b,e,g,n),c+=Vh(t,f,e,b,20,n),i&&(c-=1),c=ns(t+20,f,e,b,c,1,n),i&&(c=-c,i=!1)):c=U8(t,r,e,b,n,o):c=U8(t,r,e,b,n,o)),o[v]<0&&(o[v]=xHt(t,r,e,b,!0)),h=b*e,o[v]!==0&&(pg*h<o[v]?o[v]=pg/2:o[v]/=h),o[p]=i?(n?1:Gn(t,r))-c:c,o))}var GU=OHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var RHt=GU;function DHt(e,t,r,n,i){return RHt(e,t,r,n,i,[0,0],1,0)}var NHt=DHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var FHt=br,jU=NHt,$Ht=GU;FHt(jU,"assign",$Ht);var HU=jU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BHt=HU.assign;function zHt(e,t,r,n,i){var o=[0,0];return n=n!==!1,i=i===!0,BHt(e,t,r,n,i,o,1,0),o[0]}var VHt=zHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UHt=VHt,iC=UHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function WHt(e){var t,r,n;return e===0?-.0005087819496582806:(e<0?t=-e:t=e,t<=1?(r=-.0005087819496582806+e*(-.008368748197417368+e*(.03348066254097446+e*(-.012692614766297404+e*(-.03656379714117627+e*(.02198786811111689+e*(.008226878746769157+e*(-.005387729650712429+e*(0+e*0)))))))),n=1+e*(-.9700050433032906+e*(-1.5657455823417585+e*(1.5622155839842302+e*(.662328840472003+e*(-.7122890234154284+e*(-.05273963823400997+e*(.07952836873415717+e*(-.0023339375937419+e*.0008862163904564247))))))))):(e=1/e,r=0+e*(0+e*(-.005387729650712429+e*(.008226878746769157+e*(.02198786811111689+e*(-.03656379714117627+e*(-.012692614766297404+e*(.03348066254097446+e*(-.008368748197417368+e*-.0005087819496582806)))))))),n=.0008862163904564247+e*(-.0023339375937419+e*(.07952836873415717+e*(-.05273963823400997+e*(-.7122890234154284+e*(.662328840472003+e*(1.5622155839842302+e*(-1.5657455823417585+e*(-.9700050433032906+e*1))))))))),r/n)}var GHt=WHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jHt(e){var t,r,n;return e===0?-.20243350835593876:(e<0?t=-e:t=e,t<=1?(r=-.20243350835593876+e*(.10526468069939171+e*(8.3705032834312+e*(17.644729840837403+e*(-18.851064805871424+e*(-44.6382324441787+e*(17.445385985570866+e*(21.12946554483405+e*-3.6719225470772936))))))),n=1+e*(6.242641248542475+e*(3.971343795334387+e*(-28.66081804998+e*(-20.14326346804852+e*(48.560921310873994+e*(10.826866735546016+e*(-22.643693341313973+e*1.7211476576120028)))))))):(e=1/e,r=-3.6719225470772936+e*(21.12946554483405+e*(17.445385985570866+e*(-44.6382324441787+e*(-18.851064805871424+e*(17.644729840837403+e*(8.3705032834312+e*(.10526468069939171+e*-.20243350835593876))))))),n=1.7211476576120028+e*(-22.643693341313973+e*(10.826866735546016+e*(48.560921310873994+e*(-20.14326346804852+e*(-28.66081804998+e*(3.971343795334387+e*(6.242641248542475+e*1)))))))),r/n)}var HHt=jHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XHt(e){var t,r,n;return e===0?-.1311027816799519:(e<0?t=-e:t=e,t<=1?(r=-.1311027816799519+e*(-.16379404719331705+e*(.11703015634199525+e*(.38707973897260434+e*(.3377855389120359+e*(.14286953440815717+e*(.029015791000532906+e*(.0021455899538880526+e*(-6794655751811263e-22+e*(28522533178221704e-24+e*-681149956853777e-24))))))))),n=1+e*(3.4662540724256723+e*(5.381683457070069+e*(4.778465929458438+e*(2.5930192162362027+e*(.848854343457902+e*(.15226433829533179+e*(.011059242293464892+e*(0+e*(0+e*0)))))))))):(e=1/e,r=-681149956853777e-24+e*(28522533178221704e-24+e*(-6794655751811263e-22+e*(.0021455899538880526+e*(.029015791000532906+e*(.14286953440815717+e*(.3377855389120359+e*(.38707973897260434+e*(.11703015634199525+e*(-.16379404719331705+e*-.1311027816799519))))))))),n=0+e*(0+e*(0+e*(.011059242293464892+e*(.15226433829533179+e*(.848854343457902+e*(2.5930192162362027+e*(4.778465929458438+e*(5.381683457070069+e*(3.4662540724256723+e*1)))))))))),r/n)}var YHt=XHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qHt(e){var t,r,n;return e===0?-.0350353787183178:(e<0?t=-e:t=e,t<=1?(r=-.0350353787183178+e*(-.0022242652921344794+e*(.018557330651423107+e*(.009508047013259196+e*(.0018712349281955923+e*(.00015754461742496055+e*(460469890584318e-20+e*(-2304047769118826e-25+e*26633922742578204e-28))))))),n=1+e*(1.3653349817554064+e*(.7620591645536234+e*(.22009110576413124+e*(.03415891436709477+e*(.00263861676657016+e*(7646752923027944e-20+e*(0+e*0)))))))):(e=1/e,r=26633922742578204e-28+e*(-2304047769118826e-25+e*(460469890584318e-20+e*(.00015754461742496055+e*(.0018712349281955923+e*(.009508047013259196+e*(.018557330651423107+e*(-.0022242652921344794+e*-.0350353787183178))))))),n=0+e*(0+e*(7646752923027944e-20+e*(.00263861676657016+e*(.03415891436709477+e*(.22009110576413124+e*(.7620591645536234+e*(1.3653349817554064+e*1)))))))),r/n)}var ZHt=qHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KHt(e){var t,r,n;return e===0?-.016743100507663373:(e<0?t=-e:t=e,t<=1?(r=-.016743100507663373+e*(-.0011295143874558028+e*(.001056288621524929+e*(.00020938631748758808+e*(14962478375834237e-21+e*(44969678992770644e-23+e*(4625961635228786e-24+e*(-2811287356288318e-29+e*9905570997331033e-32))))))),n=1+e*(.5914293448864175+e*(.1381518657490833+e*(.016074608709367652+e*(.0009640118070051656+e*(27533547476472603e-21+e*(282243172016108e-21+e*(0+e*0)))))))):(e=1/e,r=9905570997331033e-32+e*(-2811287356288318e-29+e*(4625961635228786e-24+e*(44969678992770644e-23+e*(14962478375834237e-21+e*(.00020938631748758808+e*(.001056288621524929+e*(-.0011295143874558028+e*-.016743100507663373))))))),n=0+e*(0+e*(282243172016108e-21+e*(27533547476472603e-21+e*(.0009640118070051656+e*(.016074608709367652+e*(.1381518657490833+e*(.5914293448864175+e*1)))))))),r/n)}var JHt=KHt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_48_0/boost/math/special_functions/detail/erf_inv.hpp}. This implementation follows the original, but has been modified for JavaScript.
*
* ```text
* (C) Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var QHt=Kt,W8=nr,G8=ke,tXt=Fe,eXt=Ir,rXt=GHt,nXt=HHt,iXt=YHt,oXt=ZHt,aXt=JHt,sXt=.08913147449493408,lXt=2.249481201171875,uXt=.807220458984375,cXt=.9399557113647461,fXt=.9836282730102539;function hXt(e){var t,r,n,i,o;return QHt(e)?NaN:e===0?tXt:e===2?eXt:e===1?0:e>2||e<0?NaN:(e>1?(t=-1,n=2-e):(t=1,n=e),e=1-n,e<=.5?(i=e*(e+10),o=rXt(e),t*(i*sXt+i*o)):n>=.25?(i=W8(-2*G8(n)),n-=.25,o=nXt(n),t*(i/(lXt+o))):(n=W8(-G8(n)),n<3?(r=n-1.125,o=iXt(r),t*(uXt*n+o*n)):n<6?(r=n-3,o=oXt(r),t*(cXt*n+o*n)):(r=n-6,o=aXt(r),t*(fXt*n+o*n))))}var dXt=hXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pXt=dXt,o0=pXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C code, long comment, copyright, license, and constants are from [Cephes]{@link http://www.netlib.org/cephes}. The implementation follows the original, but has been modified for JavaScript.
*
* ```text
* Copyright 1984, 1995, 2000 by Stephen L. Moshier
*
* Some software in this archive may be from the book _Methods and Programs for Mathematical Functions_ (Prentice-Hall or Simon & Schuster International, 1989) or from the Cephes Mathematical Library, a commercial product. In either event, it is copyrighted by the author. What you see here may be used freely but it comes with no support or guarantee.
*
* Stephen L. Moshier
* moshier@na-net.ornl.gov
* ```
*/var vXt=Kt,j8=XE,gXt=nr,H8=cU,mXt=6123233995736766e-32;function _Xt(e){var t;return vXt(e)?NaN:e<-1||e>1?NaN:e>.5?2*j8(gXt(.5-.5*e)):(t=H8-j8(e),t+=mXt,t+=H8,t)}var yXt=_Xt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bXt=yXt,wXt=bXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SXt=1.4142135623730951,oC=SXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function TXt(e){return e===0?.16666666666666666:.16666666666666666+e*.16666666666666666}var kXt=TXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function PXt(e){return e===0?.058333333333333334:.058333333333333334+e*(.06666666666666667+e*.008333333333333333)}var EXt=PXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CXt(e){return e===0?.0251984126984127:.0251984126984127+e*(.026785714285714284+e*(.0017857142857142857+e*.0001984126984126984))}var AXt=CXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function MXt(e){return e===0?.012039792768959435:.012039792768959435+e*(.010559964726631394+e*(-.0011078042328042327+e*(.0003747795414462081+e*27557319223985893e-22)))}var xXt=MXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function LXt(e){return e===0?.003837005972422639:.003837005972422639+e*(.00610392115600449+e*(-.0016095979637646305+e*(.0005945867404200738+e*(-6270542728876062e-20+e*2505210838544172e-23))))}var IXt=LXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function OXt(e){return e===0?.0032177478835464946:.0032177478835464946+e*(.0010898206731540065+e*(-.0012579159844784845+e*(.0006908420797309686+e*(-.00016376804137220805+e*(154012654012654e-19+e*16059043836821613e-26)))))}var RXt=OXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DXt(e){return e===0?.001743826229834001:.001743826229834001+e*(3353097688001788e-20+e*(-.0007624513544032393+e*(.0006451304695145635+e*(-.000249472580470431+e*(49255746366361444e-21+e*(-39851014346715405e-22+e*7647163731819816e-28))))))}var NXt=DXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FXt(e){return e===0?.0009647274732138864:.0009647274732138864+e*(-.0003110108632631878+e*(-.00036307660358786886+e*(.0005140660578834113+e*(-.00029133414466938067+e*(9086710793521991e-20+e*(-15303004486655377e-21+e*(10914179173496788e-22+e*28114572543455206e-31)))))))}var $Xt=FXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BXt(e){return e===0?.0005422926281312969:.0005422926281312969+e*(-.0003694266780000966+e*(-.00010230378073700413+e*(.00035764655430568635+e*(-.00028690924218514614+e*(.00012645437628698076+e*(-33202652391372056e-21+e*(4890304529197534e-21+e*(-3123956959982987e-22+e*822063524662433e-32))))))))}var zXt=BXt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var VXt=tC,UXt=Bs,WXt=nr,GXt=Vs,jXt=kXt,HXt=EXt,XXt=AXt,YXt=xXt,qXt=IXt,ZXt=RXt,KXt=NXt,JXt=$Xt,QXt=zXt,tYt=0,fo=[1,0,0,0,0,0,0,0,0,0];function eYt(e,t){var r,n;return n=VXt(e/2,.5)*WXt(e*GXt)*(t-.5),r=1/e,fo[1]=jXt(r),fo[2]=HXt(r),fo[3]=XXt(r),fo[4]=YXt(r),fo[5]=qXt(r),fo[6]=ZXt(r),fo[7]=KXt(r),fo[8]=JXt(r),fo[9]=QXt(r),tYt+n*UXt(fo,n*n)}var rYt=eYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var nYt=tC,iYt=Bs,X8=nr,oYt=ir,aYt=Vs,is=[0,0,0,0,0,0,0];function sYt(e,t){var r,n,i,o,a,s,l,u;return u=nYt(e/2,.5)*X8(e*aYt)*t,o=e+2,a=e+4,s=e+6,is[0]=1,is[1]=-(e+1)/(2*o),o*=e+2,is[2]=-e*(e+1)*(e+3)/(8*o*a),o*=e+2,is[3]=-e*(e+1)*(e+5)*((3*e+7)*e-2)/(48*o*a*s),o*=e+2,a*=e+4,is[4]=-e*(e+1)*(e+7)*(((((15*e+154)*e+465)*e+286)*e-336)*e+64)/(384*o*a*s*(e+8)),o*=e+2,is[5]=-e*(e+1)*(e+3)*(e+9)*((((((35*e+452)*e+1573)*e+600)*e-2020)*e+928)*e-128)/(1280*o*a*s*(e+8)*(e+10)),o*=e+2,a*=e+4,s*=e+6,is[6]=-e*(e+1)*(e+11)*(((((((((((945*e+31506)*e+425858)*e+2980236)*e+11266745)*e+20675018)*e+7747124)*e-22574632)*e-8565600)*e+18108416)*e-7099392)*e+884736)/(46080*o*a*s*(e+8)*(e+10)*(e+12)),l=X8(e),i=oYt(l*u,1/e),n=i*i,r=iYt(is,n),r*=l,r/=i,-r}var lYt=sYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_61_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var Y8=o0,uYt=Rf,q8=nr,cYt=ir,fYt=QE,Z8=oC;function hYt(e,t){var r,n,i,o,a,s,l;return e>1e20?-Y8(2*t)*Z8:(r=1/(e-.5),n=48/(r*r),i=((20700*r/n-98)*r-16)*r+96.36,o=((94.5/(n+i)-3)/n+1)*q8(r*fYt)*e,l=cYt(o*2*t,2/e),l>.05+r?(s=-Y8(2*t)*Z8,l=s*s,e<5&&(i+=.3*(e-4.5)*(s+.6)),i+=(((.05*o*s-5)*s-7)*s-2)*s+n,l=(((((.4*l+6.3)*l+36)*l+94.5)/i-l-3)/n+1)*s,l=uYt(r*l*l)):l=((1/(((e+6)/(e*l)-.089*o-.822)*(e+2)*3)+.5/(e+4))*l-1)*(e+1)/(e+2)+1/l,a=q8(e*l),-a)}var dYt=hYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var K8=o0,J8=Nn,Cw=Nf,Q8=U_,pYt=wXt,vg=nr,vYt=pe,tR=eC,gYt=ir,mYt=n0,eR=oC,rR=Vs,nR=rYt,gg=lYt,Aw=dYt,iR=268435456,_Yt=1/3,yYt=2*53/3,bYt=.8549879733383485;function wYt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,m,g,_;if(s=0,t>r?(u=r,r=t,t=u,a=!0):a=!1,J8(e)===e&&e<20)switch(i=Cw(1,yYt),J8(e)){case 1:t===.5?s=0:s=-tR(rR*t)/mYt(rR*t);break;case 2:s=(2*t-1)/vg(2*t*r);break;case 4:l=4*t*r,o=vg(l),v=4*tR(pYt(o)/3)/o,m=vg(v-4),s=t-.5<0?-m:m;break;case 6:if(t<1e-150)return(a?-1:1)*Aw(e,t);g=4*(t-t*t),_=gYt(g,_Yt),p=6*(1+bYt*(1/_-1));do f=p*p,h=f*f,d=p*h,c=p,p=2*(8*g*d-270*f+2187)/(5*(4*g*h-216*p-243));while(vYt((p-c)/p)>i);p=vg(p-e),s=t-.5<0?-p:p;break;default:e>iR?s=K8(2*t)*eR:e<3?(n=.2742-e*.0242143,t>n?s=nR(e,t):s=gg(e,t)):(n=Cw(1,Q8(e/-.654)),t>n?s=Aw(e,t):s=gg(e,t))}else e>iR?s=-K8(2*t)*eR:e<3?(n=.2742-e*.0242143,t>n?s=nR(e,t):s=gg(e,t)):(n=Cw(1,Q8(e/-.654)),t>n?s=Aw(e,t):s=gg(e,t));return a?-s:s}var SYt=wYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/t_distribution_inv.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var TYt=SYt;function kYt(e,t,r){var n,i,o,a;return i=t/2,o=1-i,n=e*2,a=TYt(n,i,o),r&&(r.value=a*a/(n+a*a)),n/(n+a*a)}var PYt=kYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var mg=Bs,EYt=o0,oR=nr,CYt=Ve,Qo=oC,ze=[0,0,0,0,0,0,0],Uh=[0,0,0,0];function AYt(e,t,r){var n,i,o,a,s,l,u;return n=EYt(2*r),n/=-oR(e/2),Uh[0]=n,l=t-e,a=l*l,s=a*l,ze[0]=-l*Qo/2,ze[1]=(1-2*l)/8,ze[2]=-(l*Qo/48),ze[3]=-1/192,ze[4]=-l*Qo/3840,ze[5]=0,ze[6]=0,Uh[1]=mg(ze,n),ze[0]=l*Qo*(3*l-2)/12,ze[1]=(20*a-12*l+1)/128,ze[2]=l*Qo*(20*l-1)/960,ze[3]=(16*a+30*l-15)/4608,ze[4]=l*Qo*(21*l+32)/53760,ze[5]=(-(32*a)+63)/368640,ze[6]=-l*Qo*(120*l+17)/25804480,Uh[2]=mg(ze,n),ze[0]=l*Qo*(-75*a+80*l-16)/480,ze[1]=(-1080*s+868*a-90*l-45)/9216,ze[2]=l*Qo*(-1190*a+84*l+373)/53760,ze[3]=(-2240*s-2508*a+2100*l-165)/368640,ze[4]=0,ze[5]=0,ze[6]=0,Uh[3]=mg(ze,n),o=mg(Uh,1/e),i=o*o,u=-CYt(-i/2),i===0?.5:(1+o*oR((1+u)/i))/2}var MYt=AYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var aR=ke,xYt=$f,_g=xYt/4;function LYt(e,t){return r;function r(n){var i,o,a;return a=1-n,a===0?[-_g,-_g]:n===0?[-_g,-_g]:(o=aR(n)+t*aR(a)+e,i=1/n-t/a,[o,i])}}var XU=LYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IYt=Kt;function OYt(e){return e===0||IYt(e)?e:e<0?-1:1}var RYt=OYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var DYt=RYt,YU=DYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var sR=YU,yg=pe,NYt=Nf,Mw=$f;function FYt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v;p=0,a=0,c=t,u=NYt(1,1-i),h=Mw,s=Mw,l=Mw,f=o;do{if(a=p,l=s,s=h,d=e(c),p=d[0],v=d[1],f-=1,p===0)break;if(v===0?(a===0&&(c===r?t=n:t=r,a=e(t),h=t-c),sR(a)*sR(p)<0?h<0?h=(c-r)/2:h=(c-n)/2:h<0?h=(c-n)/2:h=(c-r)/2):h=p/v,yg(h*2)>yg(l)&&(h=h>0?(c-r)/2:(c-n)/2),t=c,c-=h,c<=r){if(h=.5*(t-r),c=t-h,c===r||c===n)break}else if(c>=n&&(h=.5*(t-n),c=t-h,c===r||c===n))break;h>0?n=t:r=t}while(f&&yg(c*u)<yg(h));return c}var qU=FYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function $Yt(e){return e===0?-1:-1+e*(-5+e*5)}var BYt=$Yt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zYt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var VYt=zYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function UYt(e){return e===0?7:7+e*(-2+e*(33+e*(-62+e*31)))}var WYt=UYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function GYt(e){return e===0?25:25+e*(-52+e*(-17+e*(88+e*(-115+e*46))))}var jYt=GYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function HYt(e){return e===0?7:7+e*(12+e*(-78+e*52))}var XYt=HYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function YYt(e){return e===0?-7:-7+e*(2+e*(183+e*(-370+e*185)))}var qYt=YYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ZYt(e){return e===0?-533:-533+e*(776+e*(-1835+e*(10240+e*(-13525+e*5410))))}var KYt=ZYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function JYt(e){return e===0?-1579:-1579+e*(3747+e*(-3372+e*(-15821+e*(45588+e*(-45213+e*15071)))))}var QYt=JYt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function tqt(e){return e===0?449:449+e*(-1259+e*(-769+e*(6686+e*(-9260+e*3704))))}var eqt=tqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function rqt(e){return e===0?63149:63149+e*(-151557+e*(140052+e*(-727469+e*(2239932+e*(-2251437+e*750479)))))}var nqt=rqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function iqt(e){return e===0?29233:29233+e*(-78755+e*(105222+e*(146879+e*(-1602610+e*(3195183+e*(-2554139+e*729754))))))}var oqt=iqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function aqt(e){return e===0?1:1+e*(-13+e*13)}var sqt=aqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lqt(e){return e===0?1:1+e*(21+e*(-69+e*46))}var uqt=lqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var oc=Bs,cqt=o0,fqt=pe,hqt=Ve,lR=ke,dqt=nr,pqt=n0,vqt=eC,gqt=XU,mqt=qU,_qt=BYt,yqt=VYt,bqt=WYt,wqt=jYt,Sqt=XYt,Tqt=qYt,kqt=KYt,Pqt=QYt,Eqt=eqt,Cqt=nqt,Aqt=oqt,Mqt=sqt,xqt=uqt,ne=[0,0,0,0,0,0],Wh=[0,0,0,0];function Lqt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S;return s=cqt(2*e)/-dqt(t/2),w=pqt(r),b=vqt(r),Wh[0]=s,g=w*w,_=b*b,v=w*b,p=v*v,d=p*v,h=p*p,f=p*d,c=d*d,u=h*d,ne[0]=(2*g-1)/(3*v),ne[1]=-_qt(g)/(36*p),ne[2]=yqt(g)/(1620*d),ne[3]=bqt(g)/(6480*h),ne[4]=wqt(g)/(90720*f),ne[5]=0,Wh[1]=oc(ne,s),ne[0]=-Sqt(g)/(405*d),ne[1]=Tqt(g)/(2592*h),ne[2]=-kqt(g)/(204120*f),ne[3]=-Pqt(g)/(2099520*c),ne[4]=0,ne[5]=0,Wh[2]=oc(ne,s),ne[0]=Eqt(g)/(102060*f),ne[1]=-Cqt(g)/(20995200*c),ne[2]=Aqt(g)/(36741600*u),ne[3]=0,ne[4]=0,ne[5]=0,Wh[3]=oc(ne,s),l=oc(Wh,1/t),o=b/w,o*=o,m=-(l*l)/(2*g)+lR(g)+_*lR(_)/g,fqt(l)<.7?(ne[0]=g,ne[1]=v,ne[2]=(1-2*g)/3,ne[3]=Mqt(g)/(36*v),ne[4]=xqt(g)/(270*p),ne[5]=0,S=oc(ne,l)):(T=hqt(m),ne[0]=T,ne[1]=o,ne[2]=0,ne[3]=3*o*(3*o+1)/6,ne[4]=4*o*(4*o+1)*(4*o+2)/24,ne[5]=5*o*(5*o+1)*(5*o+2)*(5*o+3)/120,S=oc(ne,T),(S-g)*l<0&&(S=1-S)),l<0?(i=0,n=g):(i=g,n=1),(S<i||S>n)&&(S=(i+n)/2),a=gqt(-m,o),S=mqt(a,S,i,n,32,100),S}var Iqt=Lqt,b1={exports:{}},NT={exports:{}},Sp=1e3,Tp=Sp*60,kp=Tp*60,Pp=kp*24,Oqt=Pp*365.25,Rqt=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Dqt(e);if(r==="number"&&isNaN(e)===!1)return t.long?Fqt(e):Nqt(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Dqt(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!!t){var r=parseFloat(t[1]),n=(t[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Oqt;case"days":case"day":case"d":return r*Pp;case"hours":case"hour":case"hrs":case"hr":case"h":return r*kp;case"minutes":case"minute":case"mins":case"min":case"m":return r*Tp;case"seconds":case"second":case"secs":case"sec":case"s":return r*Sp;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Nqt(e){return e>=Pp?Math.round(e/Pp)+"d":e>=kp?Math.round(e/kp)+"h":e>=Tp?Math.round(e/Tp)+"m":e>=Sp?Math.round(e/Sp)+"s":e+"ms"}function Fqt(e){return bg(e,Pp,"day")||bg(e,kp,"hour")||bg(e,Tp,"minute")||bg(e,Sp,"second")||e+" ms"}function bg(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}(function(e,t){t=e.exports=i.debug=i.default=i,t.coerce=l,t.disable=a,t.enable=o,t.enabled=s,t.humanize=Rqt,t.names=[],t.skips=[],t.formatters={};var r;function n(u){var c=0,f;for(f in u)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}function i(u){function c(){if(!!c.enabled){var f=c,h=+new Date,d=h-(r||h);f.diff=d,f.prev=r,f.curr=h,r=h;for(var p=new Array(arguments.length),v=0;v<p.length;v++)p[v]=arguments[v];p[0]=t.coerce(p[0]),typeof p[0]!="string"&&p.unshift("%O");var m=0;p[0]=p[0].replace(/%([a-zA-Z%])/g,function(_,b){if(_==="%%")return _;m++;var w=t.formatters[b];if(typeof w=="function"){var T=p[m];_=w.call(f,T),p.splice(m,1),m--}return _}),t.formatArgs.call(f,p);var g=c.log||t.log||console.log.bind(console);g.apply(f,p)}}return c.namespace=u,c.enabled=t.enabled(u),c.useColors=t.useColors(),c.color=n(u),typeof t.init=="function"&&t.init(c),c}function o(u){t.save(u),t.names=[],t.skips=[];for(var c=(typeof u=="string"?u:"").split(/[\s,]+/),f=c.length,h=0;h<f;h++)!c[h]||(u=c[h].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function a(){t.enable("")}function s(u){var c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function l(u){return u instanceof Error?u.stack||u.message:u}})(NT,NT.exports);(function(e,t){t=e.exports=NT.exports,t.log=i,t.formatArgs=n,t.save=o,t.load=a,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:s(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(l){var u=this.useColors;if(l[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+l[0]+(u?"%c ":" ")+"+"+t.humanize(this.diff),!!u){var c="color: "+this.color;l.splice(1,0,c,"color: inherit");var f=0,h=0;l[0].replace(/%[a-zA-Z%]/g,function(d){d!=="%%"&&(f++,d==="%c"&&(h=f))}),l.splice(h,0,c)}}function i(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function o(l){try{l==null?t.storage.removeItem("debug"):t.storage.debug=l}catch{}}function a(){var l;try{l=t.storage.debug}catch{}return!l&&typeof process<"u"&&"env"in process&&(l=process.env.DEBUG),l}t.enable(a());function s(){try{return window.localStorage}catch{}}})(b1,b1.exports);/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $qt=34028234663852886e22,H_=$qt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Bqt=b1.exports,uR=VU,zqt=pe,Vqt=Ve,cR=ke,Uqt=H_,fR=Bqt("gammaincinv:higher_newton");function Wqt(e,t,r,n,i,o,a,s){var l,u,c,f,h,d,p,v,m,g,_,b,w,T;T=e,_=1,b=1,d=t*t,u=e;do{if(T=e,p=T*T,r===0){if(l=(1-t)*cR(T)+T+o,l>cR(Uqt))return fR("Warning: overflow problems in one or more steps of the computation. The initial approximation to the root is returned."),u;w=Vqt(l)}else w=-a*T;s?(v=uR(T,t,!0,!1),c=-w*(v-n)):(m=uR(T,t,!0,!0),c=w*(m-i)),w=c,n>1e-120||b>1?(f=.5*(T-t+1)/T,h=(2*p-4*T*t+4*T+2*d-3*t+1)/p,h/=6,e=T+w*(1+w*(f+w*h))):e=T+w,_=zqt(T/e-1),b+=1,T=e,T<0&&(T=u,b=100)}while(_>2e-14&&b<35);return(_>2e-14||b>99)&&fR("Warning: the number of iterations in the Newton method reached the upper limit N=35. The last value obtained for the root is given as output."),g=T||0,g}var Gqt=Wqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function jqt(e){return e===0?0:0+e*(1+e*(1+e*(1.5+e*(2.6666666666666665+e*(5.208333333333333+e*10.8)))))}var Hqt=jqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Xqt(e){return e===0?1:1+e*(1+e*(.3333333333333333+e*(.027777777777777776+e*(-.003703703703703704+e*(.0002314814814814815+e*5878894767783657e-20)))))}var Yqt=Xqt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qqt=pe,Zqt=Ve,hR=ke,Kqt=Bs,Jqt=Hqt,Qqt=Yqt,tZt=1e-8,eZt=.08333333333333333,rZt=.008333333333333333,ac=[1,0,0,0,0,0];function nZt(e){var t,r,n,i,o,a,s,l,u;if(u=e*e*.5,e===0?o=0:e<-1?(l=Zqt(-1-u),o=Jqt(l)):e<1?(l=e,o=Qqt(l)):(l=11+u,a=hR(l),o=l+a,l=1/l,t=a*a,r=t*a,n=r*a,i=n*a,ac[1]=(2-a)*.5,ac[2]=(-9*a+6+2*t)/6,ac[3]=-(3*r+36*a-22*t-12)*eZt,ac[4]=(60+350*t-300*a-125*r+12*n)/60,ac[5]=-(-120-274*n+900*a-1700*t+1125*r+20*i)*rZt,o+=a*l*Kqt(ac,l)),l=1,e>-3.5&&e<-.03||e>.03&&e<40){l=1,s=o;do o=s*(u+hR(s))/(s-1),l=qqt(s/o-1),s=o;while(l>tZt)}return o}var ZU=nZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iZt=.9189385332046728,KU=iZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var oZt=[1.9963790515900766,-.0017971032528832887,13129285796384672e-21,-2340875228178749e-22,72291210671127e-22,-3280997607821e-22,19875070901e-21,-1509214183e-21,1375340084e-22,-145728923e-22,17532367e-22,-2351465e-22,346551e-22,-55471e-22,9548e-22,-1748e-22,332e-22,-58e-22];function aZt(e,t){var r,n,i,o,a;n=0,i=0,r=t+t,a=e;do o=i,i=n,n=r*i-o+oZt[a],a-=1;while(a>=0);return(n-o)/2}var sZt=aZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function lZt(e){return e===0?.025721014990011306:.025721014990011306+e*(.08247596616699963+e*(-.0025328157302663564+e*(.0006099292666946337+e*(-.00033543297638406+e*.000250505279903))))}var uZt=lZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function cZt(e){return e===0?.08333333333333333:.08333333333333333+e*(-.002777777777777778+e*(.0007936507936507937+e*-.0005952380952380953))}var fZt=cZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xw=Bf,wg=ke,Lw=KU,hZt=j_,dZt=H_,pZt=sZt,vZt=uZt,gZt=fZt,mZt=.30865217988013566;function _Zt(e){var t;return e<hZt?dZt:e<1?xw(e+1)-(e+.5)*wg(e)+e-Lw:e<2?xw(e)-(e-.5)*wg(e)+e-Lw:e<3?xw(e-1)-(e-.5)*wg(e)+e-Lw+wg(e-1):e<12?(t=18/(e*e)-1,pZt(17,t)/(12*e)):(t=1/(e*e),e<1e3?vZt(t)/(mZt+t)/e:gZt(t)/e)}var yZt=_Zt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var dR=Ve,bZt=Bo,wZt=ke,SZt=H_,TZt=W_,kZt=yZt;function PZt(e){return e>=3?dR(kZt(e)):e>0?bZt(e)/(dR(-e+(e-.5)*wZt(e))*TZt):SZt}var EZt=PZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function CZt(e){var t,r,n;return e===0?-.3333333333438:(e<0?t=-e:t=e,t<=1?(r=-.3333333333438+e*(-.2070740359969+e*(-.05041806657154+e*(-.004923635739372+e*-4293658292782e-17))),n=1+e*(.7045554412463+e*(.2118190062224+e*(.03048648397436+e*.001605037988091)))):(e=1/e,r=-4293658292782e-17+e*(-.004923635739372+e*(-.05041806657154+e*(-.2070740359969+e*-.3333333333438))),n=.001605037988091+e*(.03048648397436+e*(.2118190062224+e*(.7045554412463+e*1)))),r/n)}var AZt=CZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var MZt=pe,xZt=ke,LZt=ZU,IZt=AZt;function OZt(e){var t;return MZt(e)<1?IZt(e):(t=LZt(e),xZt(e/(t-1))/e)}var RZt=OZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function DZt(e){var t,r,n;return e===0?-.0172847633523:(e<0?t=-e:t=e,t<=1?(r=-.0172847633523+e*(-.0159372646475+e*(-.00464910887221+e*(-.00060683488776+e*-614830384279e-17))),n=1+e*(.764050615669+e*(.297143406325+e*(.0579490176079+e*.00574558524851)))):(e=1/e,r=-614830384279e-17+e*(-.00060683488776+e*(-.00464910887221+e*(-.0159372646475+e*-.0172847633523))),n=.00574558524851+e*(.0579490176079+e*(.297143406325+e*(.764050615669+e*1)))),r/n)}var NZt=DZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function FZt(e){var t,r,n;return e===0?-.0172839517431:(e<0?t=-e:t=e,t<=1?(r=-.0172839517431+e*(-.0146362417966+e*(-.00357406772616+e*(-.000391032032692+e*249634036069e-17))),n=1+e*(.690560400696+e*(.249962384741+e*(.0443843438769+e*.00424073217211)))):(e=1/e,r=249634036069e-17+e*(-.000391032032692+e*(-.00357406772616+e*(-.0146362417966+e*-.0172839517431))),n=.00424073217211+e*(.0443843438769+e*(.249962384741+e*(.690560400696+e*1)))),r/n)}var $Zt=FZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function BZt(e){var t,r,n;return e===0?.99994466948:(e<0?t=-e:t=e,t<=1?(r=.99994466948+e*(104.649839762+e*(857.204033806+e*(731.901559577+e*45.5174411671))),n=1+e*(104.526456943+e*(823.313447808+e*(3119.93802124+e*3970.03311219)))):(e=1/e,r=45.5174411671+e*(731.901559577+e*(857.204033806+e*(104.649839762+e*.99994466948))),n=3970.03311219+e*(3119.93802124+e*(823.313447808+e*(104.526456943+e*1)))),r/n)}var zZt=BZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var VZt=ke,UZt=NZt,WZt=$Zt,GZt=zZt;function jZt(e){var t,r;return e<-5?(r=e*e,t=VZt(-e),(12-r-6*(t*t))/(12*r*e)):e<-2?UZt(e):e<2?WZt(e):e<1e3?(r=1/e,GZt(e)/(-12*e)):-1/(12*e)}var HZt=jZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function XZt(e){var t,r,n;return e===0?.0495346498136:(e<0?t=-e:t=e,t<=1?(r=.0495346498136+e*(.0299521337141+e*(.00688296911516+e*(.000512634846317+e*-201411722031e-16))),n=1+e*(.759803615283+e*(.261547111595+e*(.0464854522477+e*.00403751193496)))):(e=1/e,r=-201411722031e-16+e*(.000512634846317+e*(.00688296911516+e*(.0299521337141+e*.0495346498136))),n=.00403751193496+e*(.0464854522477+e*(.261547111595+e*(.759803615283+e*1)))),r/n)}var YZt=XZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function qZt(e){var t,r,n;return e===0?.00452313583942:(e<0?t=-e:t=e,t<=1?(r=.00452313583942+e*(.00120744920113+e*(-789724156582e-16+e*(-504476066942e-16+e*-535770949796e-17))),n=1+e*(.912203410349+e*(.405368773071+e*(.0901638932349+e*.00948935714996)))):(e=1/e,r=-535770949796e-17+e*(-504476066942e-16+e*(-789724156582e-16+e*(.00120744920113+e*.00452313583942))),n=.00948935714996+e*(.0901638932349+e*(.405368773071+e*(.912203410349+e*1)))),r/n)}var ZZt=qZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function KZt(e){var t,r,n;return e===0?.00439937562904:(e<0?t=-e:t=e,t<=1?(r=.00439937562904+e*(.000487225670639+e*(-.000128470657374+e*(529110969589e-17+e*15716677175e-17))),n=1+e*(.794435257415+e*(.333094721709+e*(.0703527806143+e*.00806110846078)))):(e=1/e,r=15716677175e-17+e*(529110969589e-17+e*(-.000128470657374+e*(.000487225670639+e*.00439937562904))),n=.00806110846078+e*(.0703527806143+e*(.333094721709+e*(.794435257415+e*1)))),r/n)}var JZt=KZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QZt(e){var t,r,n;return e===0?-.0011481191232:(e<0?t=-e:t=e,t<=1?(r=-.0011481191232+e*(-.112850923276+e*(1.51623048511+e*(-.218472031183+e*.0730002451555))),n=1+e*(14.2482206905+e*(69.7360396285+e*(218.938950816+e*277.067027185)))):(e=1/e,r=.0730002451555+e*(-.218472031183+e*(1.51623048511+e*(-.112850923276+e*-.0011481191232))),n=277.067027185+e*(218.938950816+e*(69.7360396285+e*(14.2482206905+e*1)))),r/n)}var tKt=QZt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function eKt(e){var t,r,n;return e===0?-.000145727889667:(e<0?t=-e:t=e,t<=1?(r=-.000145727889667+e*(-.290806748131+e*(-13.308504545+e*(199.722374056+e*-11.4311378756))),n=1+e*(139.612587808+e*(2189.01116348+e*(7115.24019009+e*45574.6081453)))):(e=1/e,r=-11.4311378756+e*(199.722374056+e*(-13.308504545+e*(-.290806748131+e*-.000145727889667))),n=45574.6081453+e*(7115.24019009+e*(2189.01116348+e*(139.612587808+e*1)))),r/n)}var rKt=eKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pR=ke,nKt=YZt,iKt=ZZt,oKt=JZt,aKt=tKt,sKt=rKt;function lKt(e){var t,r;return e<-8?(t=e*e,r=pR(-e)/e,(-30+e*r*(6*t*r*r-12+t))/(12*e*t*t)):e<-4?nKt(e)/(e*e):e<-2?iKt(e):e<2?oKt(e):e<10?(t=1/e,aKt(t)/(e*e)):e<100?(t=1/e,sKt(t)/(e*e)):-pR(e)/(12*e*e*e)}var uKt=lKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cKt=b1.exports,vR=Bs,mi=Bf,fKt=o0,gR=Bo,Sg=nr,mR=pe,sc=Ve,hKt=zs,dKt=ir,jn=ke,pKt=W_,vKt=H_,gKt=NU,mKt=Gqt,_R=ZU,yR=EZt,_Kt=RZt,yKt=HZt,bKt=uKt,wKt=cKt("gammaincinv:compute"),os=.5,Iw=.3333333333333333,SKt=.25,bR=.2,wR=.16666666666666666,TKt=.08333333333333333,kKt=.041666666666666664,Hn=[0,0,0,0,0];function PKt(e,t,r){var n,i,o,a,s,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,C,E,M,x,D,B,V,F,G,Z,q,et,At,Dt,Tt,kt,Xt,Y,it,K,vt,Pt,xt;if(t<os?(a=!0,s=t,vt=-1):(a=!1,s=r,vt=1),Y=0,mR(e-1)<1e-4&&(it=0,a?t<.001?(q=t*t,V=q*t,Z=V*t,S=Z*t,T=S*t,k=t+q*os+V*Iw+Z*SKt+S*bR+T*wR):k=-jn(1-t):k=-jn(r),e===1?(Y=2,At=k):(o=mi(e),Y=1)),r<1e-30&&e<os&&(it=0,k=-jn(r*gR(e))+(e-1)*jn(-jn(r*gR(e))),Y=1,o=mi(e)),e>1&&e<500&&t<1e-80){for(it=0,l=1/e,n=1/(e+1),k=(mi(e+1)+jn(t))*l,k=sc(k),m=k,Xt=0;Xt<10;Xt++)k=m*sc(k*l)*dKt(1-k*n,l);Y=1,o=mi(e)}if(u=1/e*(jn(t)+mi(e+1)),u<jn(bR*(1+e))&&Y===0&&(K=sc(u),it=0,C=e*e,et=C*e,F=et*e,g=e+1,d=g*g,h=g*d,f=d*d,_=e+2,c=_*_,b=e+3,Hn[0]=1,Hn[1]=1/g,Hn[2]=os*(3*e+5)/(d*_),Hn[3]=Iw*(31+8*C+33*e)/(h*_*b),Hn[4]=kKt*(2888+1179*et+125*F+3971*C+5661*e)/(f*c*b*(e+4)),k=K*vR(Hn,K),o=mi(e),Y=1),e<10&&Y===0&&(p=Sg(e)/(yR(e)*pKt),v=hKt(.02,p),r<v&&(it=0,Tt=1-e,D=Tt*Tt,B=D*Tt,w=Sg(-2/e*jn(r/p)),k=e*_R(w),kt=jn(k),k>5?(E=kt*kt,M=E*kt,x=M*kt,K=1/k,Hn[0]=kt-1,Hn[1]=(3*Tt-2*Tt*kt+E-2*kt+2)*os,Hn[2]=(24*Tt*kt-11*D-24*Tt-6*E+12*kt-12-9*Tt*E+6*D*kt+2*M)*wR,Hn[3]=(-12*B*kt+8.04*Tt*E-114*D*kt+(72+36*E)+(3*x-72*kt+162)*(Tt-168*Tt*kt)-(12*M+25*B)-(22*Tt*M+36*D*E+120*D))*TKt,Hn[4]=0,k=k-kt+Tt*K*vR(Hn,K)):(K=1/k,E=kt*kt,Dt=kt-1,Pt=kt-Tt*K*Dt,Pt<k&&(k-=Pt)),o=mi(e),Y=1)),mR(s-os)<1e-5&&Y===0&&(it=0,l=1/e,k=e-Iw+(.019753086419753086+.007211444248481286*l)*l,o=mi(e),Y=1),e<1&&Y===0&&(it=0,a?k=sc(1/e*(jn(s)+mi(e+1))):k=sc(1/e*(jn(1-s)+mi(e+1))),o=mi(e),Y=1),Y===0)if(it=1,l=1/e,K=fKt(2*s),w=vt*K/Sg(e*os),K<vKt)w+=(_Kt(w)+(yKt(w)+bKt(w)*l)*l)*l,k=e*_R(w),xt=w,G=-Sg(e/gKt)*sc(-os*e*xt*xt)/yR(e),i=1/G;else return wKt("Warning: Overflow problems in one or more steps of the computation."),NaN;return Y<2&&(At=mKt(k,e,it,t,r,o,i,a)),At}var EKt=PKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var SR=Kt,CKt=j_,TR=Fe,kR=EKt;function AKt(e,t,r){return SR(e)||SR(t)?NaN:t<CKt?NaN:e>1||e<0?NaN:r===!0?e===0?TR:e===1?0:kR(t,1-e,e):e===0?0:e===1?TR:kR(t,e,1-e)}var MKt=AKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xKt=MKt,LKt=xKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IKt=5e-324,OKt=IKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var PR=LKt,ER=ke,RKt=nr,DKt=OKt,NKt=XU,FKt=qU;function $Kt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,C,E,M,x,D,B,V,F,G,Z;return r<n?l=PR(r,t,!0):l=PR(n,t,!1),l/=e,g=t/e,F=RKt(1+g),T=F*F,S=T*F,k=T*T,C=S*T,E=S*S,M=k*S,x=k*k,D=C*k,c=C*C,V=l-g,_=V*V,b=_*V,w=_*_,B=F+1,f=B*B,h=B*f,d=f*f,p=(F+2)*(F-1)/(3*F),p+=(S+9*T+21*F+5)*V/(36*T*B),p-=(k-13*S+69*T+167*F+46)*_/(1620*f*S),p-=(7*C+21*k+70*S+26*T-93*F-31)*b/(6480*h*k),p-=(75*E+202*C+188*k-888*S-1345*T+118*F+138)*w/(272160*d*C),v=(28*k+131*S+402*T+581*F+208)*(F-1)/(1620*B*S),v-=(35*E-154*C-623*k-1636*S-3983*T-3514*F-925)*V/(12960*f*k),v-=(2132*M+7915*E+16821*C+35066*k+87490*S+141183*T+95993*F+21640)*_/(816480*C*h),v-=(11053*x+53308*M+117010*E+163924*C+116188*k-258428*S-677042*T-481940*F-105497)*b/(14696640*d*E),m=-((3592*M+8375*E-1323*C-29198*k-89578*S-154413*T-116063*F-29632)*(F-1))/(816480*C*f),m-=(442043*D+2054169*x+3803094*M+3470754*E+2141568*C-2393568*k-19904934*S-34714674*T-23128299*F-5253353)*V/(146966400*E*h),m-=(116932*c+819281*D+2378172*x+4341330*M+6806004*E+10622748*C+18739500*k+30651894*S+30869976*T+15431867*F+2919016)*_/(146966400*d*M),u=l+p/e+v/(e*e)+m/(e*e*e),u<=0&&(u=DKt),G=u-g*ER(u)+(1+g)*ER(1+g)-g,i=1/(1+g),a=u<g?i:0,s=u<g?1:i,Z=(a+s)/2,o=NKt(G,g),FKt(o,Z,a,s,32,100)}var BKt=$Kt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_62_0/boost/math/tools/roots.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var or=pe,zKt=Nf,Ow=YU,VKt=Eu,Rw=$f;function UKt(e,t,r,n,i,o){var a,s,l,u,c,f,h,d,p,v,m,g,_,b,w,T;b=0,s=!1,f=t,c=zKt(1,1-i),p=VKt(1e7*t,1e7),h=0,l=p,u=p,d=o;do{if(h=b,u=l,l=p,_=e(f),b=_[0],w=_[1],T=_[2],d-=1,b===0)break;if(w===0?(h===0&&(f===r?t=n:t=r,h=e(t),p=t-f),Ow(h)*Ow(b)<0?p<0?p=(f-r)/2:p=(f-n)/2:p<0?p=(f-n)/2:p=(f-r)/2):T===0?p=b/w:(v=2*b,g=2*w-b*(T/w),or(g)<1&&or(v)>=or(g)*Rw?p=b/w:p=v/g,p*w/b<0&&(p=b/w,or(p)>2*or(t)&&(p=(p<0?-1:1)*2*or(t)))),a=or(p/u),a>.8&&a<2&&(p=p>0?(f-r)/2:(f-n)/2,or(p)>f&&(p=Ow(p)*f),u=p*3),t=f,f-=p,f<r){if(or(r)<1&&or(f)>1&&Rw/or(f)<or(r)?m=1e3:m=f/r,or(m)<1&&(m=1/m),!s&&m>0&&m<3)p=.99*(t-r),f=t-p,s=!0;else if(p=(t-r)/2,f=t-p,f===r||f===n)break}else if(f>n){if(or(n)<1&&or(f)>1&&Rw/or(f)<or(n)?m=1e3:m=f/n,or(m)<1&&(m=1/m),!s&&m>0&&m<3)p=.99*(t-n),f=t-p,s=!0;else if(p=(t-n)/2,f=t-p,f===r||f===n)break}p>0?n=t:r=t}while(d&&or(f*c)<or(p));return f}var WKt=UKt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The original C++ code and copyright notice are from the [Boost library]{@link http://www.boost.org/doc/libs/1_64_0/boost/math/special_functions/detail/ibeta_inverse.hpp}. The implementation has been modified for JavaScript.
*
* ```text
* Copyright John Maddock 2006.
* Copyright Paul A. Bristow 2007.
*
* Use, modification and distribution are subject to the
* Boost Software License, Version 1.0. (See accompanying file
* LICENSE or copy at http://www.boost.org/LICENSE_1_0.txt)
* ```
*/var GKt=HU.assign,jKt=pe,HKt=$f,Dw=Pu;function XKt(e,t,r,n){return i;function i(o){var a,s,l,u,c;return c=1-o,a=[0,0],GKt(o,e,t,!0,n,a,1,0),u=a[0]-r,s=a[1],n&&(s=-s),c===0&&(c=Dw*64),o===0&&(o=Dw*64),l=s*(-(c*e)+(t-2)*o+1),jKt(l)<c*o*HKt&&(l/=c*o),n&&(l=-l),s===0&&(s=(n?-1:1)*Dw*64),[u,s,l]}}var YKt=XKt,qKt=Bs,CR=iC,Nw=Rf,AR=Fn,ZKt=XE,lc=PU,MR=nr,KKt=pe,xR=Ve,ho=ir,LR=n0,JKt=Eu,QKt=zs,IR=ke,Fw=Pu,OR=QE,RR=Ia,tJt=PYt,eJt=MYt,rJt=Iqt,nJt=BKt,iJt=WKt,oJt=YKt,aJt=32,sJt=1e3,bl=[0,0,0,0,0];function lJt(e,t,r,n){var i,o,a,s,l,u,c,f,h,d,p,v,m,g,_,b,w,T,S,k,C,E,M,x,D,B,V,F,G;if(o=!1,n===0)return[1,0];if(r===0)return[0,1];if(e===1){if(t===1)return[r,1-r];v=t,t=e,e=v,v=n,n=r,r=v,o=!0}if(F=0,s=0,u=1,e===.5){if(t===.5)return F=LR(r*OR),F*=F,G=LR(n*OR),G*=G,[F,G];t>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o)}if(t===.5&&e>=.5&&r!==1)C={},F=tJt(e,r,C),G=C.value;else{if(t===1)return r<n?e>1?(F=ho(r,1/e),G=-Nw(IR(r)/e)):(F=ho(r,1/e),G=1-F):(F=xR(AR(-n)/e),G=-Nw(AR(-n)/e)),o&&(v=G,G=F,F=v),[F,G];if(e+t>5)r>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),h=QKt(e,t),f=JKt(e,t),MR(h)>f-h&&h>5?(F=eJt(e,t,r),G=1-F):(D=e+t,l=ZKt(MR(e/D)),a=h/D,a>=.2&&a<=.8&&D>=10?(p=ho(r,1/e),p<.0025&&e+t<200?F=p*ho(e*lc(e,t),1/e):F=rJt(r,D,l),G=1-F):(e<t&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),d=0,t<2&&(d=lc(e,t)),d===0?G=1:(G=ho(t*n*d,1/t),F=1-G)),G>1e-5&&(F=nJt(e,t,r,n),G=1-F));else if(e<1&&t<1){if(k=(1-e)/(2-e-t),b=CR(k,e,t)-r,KKt(b)/r<RR*3)return o?[1-k,k]:[k,1-k];b<0&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o,k=1-k),S=ho(e*r*lc(e,t),1/e),F=S/(1+S),G=1/(1+S),F>k&&(F=k),u=k}else e>1&&t>1?(k=(e-1)/(e+t-2),m=(t-1)/(e+t-2),T=CR(k,e,t)-r,T<0&&(v=t,t=e,e=v,v=n,n=r,r=v,v=m,m=k,k=v,o=!o),w=IR(r*e*lc(e,t))/e,F=xR(w),G=F<.9?1-F:-Nw(w),t<e&&F<.2&&(g=e-1,_=t-1,E=e*e,M=e*E,x=t*t,bl[0]=0,bl[1]=1,bl[2]=_/g,g*=g,bl[3]=_*(3*e*t+5*t+E-e-4)/(2*(e+2)*g),g*=e+1,bl[4]=_*(33*e*x+31*x+8*E*x-30*e*t-47*t+11*E*t+6*M*t+18+4*e-M+E*E-10*E),bl[4]/=3*(e+3)*(e+2)*g,F=qKt(bl,F)),F>k&&(F=k),u=k):(t<e&&(v=t,t=e,e=v,v=n,n=r,r=v,o=!o),ho(r,1/e)<.5?(F=ho(r*e*lc(e,t),1/e),F===0&&(F=Fw),G=1-F):(G=ho(1-ho(r,t*lc(e,t)),1/t),G===0&&(G=Fw),F=1-G))}return F>.5&&(v=t,t=e,e=v,v=n,n=r,r=v,v=G,G=F,F=v,o=!o,B=1-u,V=1-s,s=B,u=V),s===0&&(o?(s=RR,F<s&&(F=s)):s=Fw,F<s&&(F=s)),i=aJt,F<1e-50&&(e<1||t<1)&&(i*=3,i/=2),c=oJt(e,t,r<n?r:n,r>=n),F=iJt(c,F,s,u,i,sJt),F===s&&(F=0),o?[1-F,F]:[F,1-F]}var uJt=lJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cJt=uJt,fJt=cJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $w=Kt,DR=fJt;function hJt(e,t,r,n){return $w(e)||$w(t)||$w(r)?NaN:t<=0||r<=0?NaN:e<0||e>1?NaN:n?DR(t,r,1-e,e)[0]:DR(t,r,e,1-e)[0]}var dJt=hJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pJt=dJt,JU=pJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vJt=JU,Bw=Kt;function gJt(e,t,r){return Bw(e)||Bw(t)||Bw(r)||t<=0||r<=0||e<0||e>1?NaN:vJt(e,t,r)}var mJt=gJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function _Jt(e){return t;function t(){return e}}var yJt=_Jt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bJt=yJt,X_=bJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wJt=X_,SJt=JU,zw=Kt;function TJt(e,t){if(zw(e)||zw(t)||e<=0||t<=0)return wJt(NaN);return r;function r(n){return zw(n)||n<0||n>1?NaN:SJt(n,e,t)}}var kJt=TJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PJt=br,QU=mJt,EJt=kJt;PJt(QU,"factory",EJt);var CJt=QU;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AJt=Nn;function MJt(e){return AJt(e)===e&&e>=0}var xJt=MJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var LJt=xJt,Y_=LJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var IJt=Y_,OJt=iC,Vw=Kt,RJt=Nn,DJt=Fe;function NJt(e,t,r){return Vw(e)||Vw(t)||Vw(r)||r<0||r>1||!IJt(t)||t===DJt?NaN:e<0?0:e>=t?1:(e=RJt(e+1e-7),OJt(r,e+1,t-e,!0,!0))}var FJt=NJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $Jt=Y_,BJt=X_,zJt=iC,Uw=Kt,VJt=Nn,UJt=Fe;function WJt(e,t){if(Uw(e)||Uw(t)||t<0||t>1||!$Jt(e)||e===UJt)return BJt(NaN);return r;function r(n){return Uw(n)?NaN:n<0?0:n>=e?1:(n=VJt(n+1e-7),zJt(t,n+1,e-n,!0,!0))}}var GJt=WJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jJt=br,tW=FJt,HJt=GJt;jJt(tW,"factory",HJt);var XJt=tW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var eW=[1276642195630063e-46,-3401102254316749e-45,1025680058010471e-43,-35475981581010704e-43,14292273559424982e-41,-6831888753985767e-39,39628370610464347e-38,-2868042435334643e-35,2683181998482699e-33,-3399615005417722e-31,6221098041892606e-29,-1809129475572494e-26,981082564692473e-23,-1384948176067564e-20,.16663894804518634],YJt=eW.length;function qJt(e){var t,r,n,i,o;if(e<-1.1||e>1.1)return NaN;for(n=0,i=0,t=2*e,o=0;o<YJt;o++)r=n,n=i,i=t*n-r+eW[o];return(i-r)*.5}var ZJt=qJt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/fn/d9lgmc.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var KJt=ir,JJt=ZJt,QJt=9490626562425156e-8,tQt=3745194030963158e291;function eQt(e){return e<10?NaN:e>=tQt?0:e<QJt?JJt(2*KJt(10/e,2)-1)/e:1/(e*12)}var rQt=eQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*
*
* ## Notice
*
* The code is adapted from the Fortran routine from the FNLIB library of the [SLATEC Common Mathematical Library]{@link http://www.netlib.no/netlib/slatec/fnlib/albeta.f}.
*
* The original code was developed by W. Fullerton of Los Alamos Scientific Laboratory, a governmental institution, and is therefore public domain.
*/var nQt=Bf,NR=Fn,Ww=Bo,iQt=Eu,oQt=zs,Tg=ke,aQt=KU,sQt=Ir,FR=Fe,Gh=rQt;function lQt(e,t){var r,n,i;return n=oQt(e,t),i=iQt(e,t),n<0?NaN:n===0?FR:i===FR?sQt:n>=10?(r=Gh(n)+Gh(i)-Gh(n+i),-.5*Tg(i)+aQt+r+(n-.5)*Tg(n/(n+i))+i*NR(-n/(n+i))):i>=10?(r=Gh(i)-Gh(n+i),nQt(n)+r+n-n*Tg(n+i)+(i-.5)*NR(-n/(n+i))):Tg(Ww(n)*(Ww(i)/Ww(n+i)))}var uQt=lQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cQt=uQt,fQt=cQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $R=$s,BR=Kt,hQt=fQt,dQt=pe,zR=ke,VR=Ir;function FT(e,t){return BR(e)||BR(t)?NaN:!$R(e)||!$R(t)?NaN:e<0?FT(-e+t-1,t):t<0?VR:t===0?0:t===1?zR(dQt(e)):e<t?VR:e-t<2?FT(e,e-t):-zR(e+1)-hQt(e-t+1,t+1)}var pQt=FT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vQt=pQt,rW=vQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UR=Y_,gQt=rW,Gw=Kt,mQt=Fn,_Qt=Ve,yQt=ke,bQt=Fe;function wQt(e,t,r){var n;return Gw(e)||Gw(t)||Gw(r)||r<0||r>1||!UR(t)||t===bQt?NaN:UR(e)?e>t?0:r===0?e===0?1:0:r===1?e===t?1:0:(n=gQt(t,e),n+=e*yQt(r)+(t-e)*mQt(-r),_Qt(n)):0}var SQt=wQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var WR=Kt;function TQt(e,t){return WR(e)||WR(t)?NaN:e===t?1:0}var kQt=TQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var PQt=X_,GR=Kt;function EQt(e){if(GR(e))return PQt(NaN);return t;function t(r){return GR(r)?NaN:r===e?1:0}}var CQt=EQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var AQt=br,nW=kQt,MQt=CQt;AQt(nW,"factory",MQt);var xQt=nW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jR=Y_,LQt=X_,IQt=rW,HR=xQt.factory,jw=Kt,OQt=Fn,RQt=Ve,DQt=ke,NQt=Fe;function FQt(e,t){if(jw(e)||jw(t)||!jR(e)||e===NQt||t<0||t>1)return LQt(NaN);if(t===0||e===0)return HR(0);if(t===1)return HR(e);return r;function r(n){var i;return jw(n)?NaN:jR(n)?n>e?0:(i=IQt(e,n),i+=n*DQt(t)+(e-n)*OQt(-t),RQt(i)):0}}var $Qt=FQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var BQt=br,iW=SQt,zQt=$Qt;BQt(iW,"factory",zQt);var VQt=iW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var UQt=Yi,$T;function WQt(e){return UQt(e)==="[object Array]"}Array.isArray?$T=Array.isArray:$T=WQt;var GQt=$T;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jQt=GQt,oW=jQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var HQt=oW;function XQt(e){return typeof e=="object"&&e!==null&&!HQt(e)}var YQt=XQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qQt=YQt,ZQt=qQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var KQt=/./,JQt=KQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function QQt(e){return typeof e=="boolean"}var aW=QQt;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tte=Boolean.prototype.toString,ete=tte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rte=ete;function nte(e){try{return rte.call(e),!0}catch{return!1}}var ite=nte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ote=F_,ate=Yi,ste=ite,lte=ote();function ute(e){return typeof e=="object"?e instanceof Boolean?!0:lte?ste(e):ate(e)==="[object Boolean]":!1}var sW=ute;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cte=aW,fte=sW;function hte(e){return cte(e)||fte(e)}var dte=hte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lW=br,aC=dte,pte=aW,vte=sW;lW(aC,"isPrimitive",pte);lW(aC,"isObject",vte);var uW=aC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function gte(){return new Function("return this;")()}var mte=gte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _te=typeof self=="object"?self:null,yte=_te;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bte=typeof window=="object"?window:null,wte=bte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ste=typeof mS=="object"?mS:null,Tte=Ste;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var kte=uW.isPrimitive,Pte=mte,XR=yte,YR=wte,qR=Tte;function Ete(e){if(arguments.length){if(!kte(e))throw new TypeError("invalid argument. Must provide a boolean primitive. Value: `"+e+"`.");if(e)return Pte()}if(XR)return XR;if(YR)return YR;if(qR)return qR;throw new Error("unexpected error. Unable to resolve global object.")}var Cte=Ete;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ate=Cte,Mte=Ate;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xte=Mte,ZR=xte(),Lte=ZR.document&&ZR.document.childNodes,Ite=Lte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ote=Int8Array,Rte=Ote;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Dte=JQt,Nte=Ite,Fte=Rte;function $te(){return typeof Dte=="function"||typeof Fte=="object"||typeof Nte=="function"}var Bte=$te;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function zte(){return/^\s*function\s*([^(]*)/i}var cW=zte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Vte=cW,Ute=Vte(),Wte=Ute;/**
* @license Apache-2.0
*
* Copyright (c) 2021 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Gte=br,fW=cW,jte=Wte;Gte(fW,"REGEXP",jte);var Hte=fW;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xte=oW;function Yte(e){if(typeof e!="function")throw new TypeError("invalid argument. Must provide a function. Value: `"+e+"`.");return t;function t(r){var n,i;if(!Xte(r)||(n=r.length,n===0))return!1;for(i=0;i<n;i++)if(e(r[i])===!1)return!1;return!0}}var qte=Yte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Zte=qte,Kte=Zte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Jte(e){return e!==null&&typeof e=="object"}var Qte=Jte;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tee=br,eee=Kte,sC=Qte,ree=eee(sC);tee(sC,"isObjectLikeArray",ree);var nee=sC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var iee=nee;function oee(e){return iee(e)&&(e._isBuffer||e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e))}var aee=oee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var see=aee,lee=see;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var uee=Yi,cee=Hte.REGEXP,fee=lee;function hee(e){var t,r,n;if(r=uee(e).slice(8,-1),(r==="Object"||r==="Error")&&e.constructor){if(n=e.constructor,typeof n.name=="string")return n.name;if(t=cee.exec(n.toString()),t)return t[1]}return fee(e)?"Buffer":r}var dee=hee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var pee=dee,hW=pee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var vee=hW;function gee(e){var t;return e===null?"null":(t=typeof e,t==="object"?vee(e).toLowerCase():t)}var mee=gee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var _ee=hW;function yee(e){return _ee(e).toLowerCase()}var bee=yee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wee=Bte,See=mee,Tee=bee,kee=wee()?Tee:See,Pee=kee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Eee=Pee;function Cee(e){return Eee(e)==="function"}var Aee=Cee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Mee=Aee,dW=Mee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var xee=Object.getPrototypeOf,Lee=xee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function Iee(e){return e.__proto__}var Oee=Iee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Ree=Yi,Dee=Oee;function Nee(e){var t=Dee(e);return t||t===null?t:Ree(e.constructor)==="[object Function]"?e.constructor.prototype:e instanceof Object?Object.prototype:null}var Fee=Nee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $ee=dW,Bee=Lee,zee=Fee,BT;$ee(Object.getPrototypeOf)?BT=Bee:BT=zee;var Vee=BT;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Uee=Vee;function Wee(e){return e==null?null:(e=Object(e),Uee(e))}var Gee=Wee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var jee=Gee,Hee=jee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xee=ZQt,KR=dW,Yee=Hee,hm=$_,qee=Yi,Zee=Object.prototype;function Kee(e){var t;for(t in e)if(!hm(e,t))return!1;return!0}function Jee(e){var t;return Xee(e)?(t=Yee(e),t?!hm(e,"constructor")&&hm(t,"constructor")&&KR(t.constructor)&&qee(t.constructor)==="[object Function]"&&hm(t,"isPrototypeOf")&&KR(t.isPrototypeOf)&&(t===Zee||Kee(e)):!0):!1}var Qee=Jee;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tre=Qee,pW=tre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/function ere(e){return typeof e=="string"}var vW=ere;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var rre=String.prototype.valueOf,nre=rre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ire=nre;function ore(e){try{return ire.call(e),!0}catch{return!1}}var are=ore;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var sre=F_,lre=Yi,ure=are,cre=sre();function fre(e){return typeof e=="object"?e instanceof String?!0:cre?ure(e):lre(e)==="[object String]":!1}var gW=fre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var hre=vW,dre=gW;function pre(e){return hre(e)||dre(e)}var vre=pre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var mW=br,lC=vre,gre=vW,mre=gW;mW(lC,"isPrimitive",gre);mW(lC,"isObject",mre);var _re=lC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var yre=xf.isPrimitive,bre=Kt;function wre(e){return yre(e)&&bre(e)}var _W=wre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Sre=xf.isObject,Tre=Kt;function kre(e){return Sre(e)&&Tre(e.valueOf())}var yW=kre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Pre=_W,Ere=yW;function Cre(e){return Pre(e)||Ere(e)}var Are=Cre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var bW=br,uC=Are,Mre=_W,xre=yW;bW(uC,"isPrimitive",Mre);bW(uC,"isObject",xre);var Lre=uC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var JR=xf.isPrimitive,Ire=pW,Ore=_re.isPrimitive,QR=Lre,Hw=$_;function Rre(e,t){return Ire(t)?Hw(t,"alpha")&&(e.alpha=t.alpha,!JR(e.alpha)||QR(e.alpha))?new TypeError("invalid option. `alpha` option must be a number primitive. Option: `"+e.alpha+"`."):Hw(t,"alternative")&&(e.alternative=t.alternative,!Ore(e.alternative))?new TypeError("invalid option. `alternative` option must be a string primitive. Option: `"+e.alternative+"`."):Hw(t,"p")&&(e.p=t.p,!JR(e.p)||QR(e.p))?new TypeError("invalid option. `p` option must be a number primitive. Option: `"+e.p+"`."):null:new TypeError("invalid argument. Options argument must be an object. Value: `"+t+"`.")}var Dre=Rre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Nre=B_.isPrimitive;function Fre(e){return Nre(e)&&e>0}var wW=Fre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var $re=B_.isObject;function Bre(e){return $re(e)&&e.valueOf()>0}var SW=Bre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var zre=wW,Vre=SW;function Ure(e){return zre(e)||Vre(e)}var Wre=Ure;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var TW=br,cC=Wre,Gre=wW,jre=SW;TW(cC,"isPrimitive",Gre);TW(cC,"isObject",jre);var Hre=cC;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Xre=9007199254740991,Yre=Xre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var qre=308,Zre=qre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Kre=-308,Jre=Kre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var Qre=-324,tne=Qre;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var tD=Kt,kg=Df,eD=ir,ene=pe,rD=U_,rne=Yre,nD=Zre,nne=Jre,ine=tne,one=rne+1,iD=1e308;function ane(e,t){var r,n;return tD(e)||tD(t)||kg(t)?NaN:kg(e)||e===0||t<ine||ene(e)>one&&t<=0?e:t>nD?0*e:t<nne?(r=eD(10,-(t+nD)),n=e*iD*r,kg(n)?e:rD(n)/iD/r):(r=eD(10,-t),n=e*r,kg(n)?e:rD(n)/r)}var sne=ane;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var lne=sne,une=lne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var cne=Hre,fne=pW,hne=uW.isPrimitive,oD=$_,Pg=une;function dne(e){var t,r,n;if(r=4,t=!0,arguments.length>0){if(!fne(e))throw new TypeError("invalid argument. First argument must be an options object. Value: `"+e+"`.");if(oD(e,"digits")){if(!cne(e.digits))throw new TypeError("invalid option. `digits` option must be a positive integer. Option: `"+e.digits+"`.");r=e.digits}if(oD(e,"decision")){if(!hne(e.decision))throw new TypeError("invalid option. `decision` option must be a boolean primitive. Option: `"+e.decision+"`.");t=e.decision}}switch(n="",n+=this.method,n+=`

`,n+="Alternative hypothesis: ",n+="True correlation coefficient is ",this.alternative){case"less":n+="less than ";break;case"greater":n+="greater than ";break;case"two-sided":default:n+="not equal to ";break}return n+=this.nullValue,n+=`

`,n+="    pValue: "+Pg(this.pValue,-r)+`
`,n+="    statistic: "+Pg(this.statistic,-r)+`
`,n+="    "+(1-this.alpha)*100+"% confidence interval: ["+Pg(this.ci[0],-r)+","+Pg(this.ci[1],-r)+"]",n+=`

`,t&&(n+="Test Decision: ",this.rejected?n+="Reject null in favor of alternative at "+this.alpha*100+"% significance level":n+="Fail to reject null in favor of alternative at "+this.alpha*100+"% significance level",n+=`
`),n}var pne=dne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var ta=qxt,vne=pIt,aD=GIt,kW=CJt,gne=Nn,mne=fU,uc=XJt,Xw=VQt,sD=Dre,_ne=pne,lD=1+1e-7;function uD(e,t,r){return e===0?0:kW(r,e,t-e+1)}function cD(e,t,r){return e===t?1:kW(1-r,e+1,t-e)}function yne(){var e,t,r,n,i,o,a,s,l,u,c,f,h,d,p;if(t={},vne(arguments[0])){if(h=arguments[0],h.length!==2)throw new Error("invalid argument. If provided an array, it must have two elements. Value: `"+h+"`.");c=h[1]+h[0],h=h[0],arguments[1]&&(a=sD(t,arguments[1]))}else{if(h=arguments[0],c=arguments[1],!aD(h))throw new TypeError("invalid argument. Must provide a nonnegative integer or a two-element array. Value: `"+h+"`.");if(!aD(c))throw new TypeError("invalid argument. Must provide a nonnegative integer. Value: `"+c+"`.");if(h>c)throw new TypeError("invalid arguments. `x` cannot be larger than `n`. `x:"+h+", n:"+c+"`.");arguments[2]&&(a=sD(t,arguments[2]))}if(a)throw a;if(t.alpha===void 0?e=.05:e=t.alpha,e<0||e>1)throw new RangeError("invalid argument. Option `alpha` must be a number in the range 0 to 1. Value: `"+e+"`.");if(t.p===void 0?f=.5:f=t.p,f<0||f>1)throw new RangeError("invalid argument. Option `p` must be a probability. Value: `"+f+"`.");switch(o=t.alternative||"two-sided",i=h/c,o){case"less":n=uc(h,c,f),r=[0,cD(h,c,e)];break;case"greater":n=1-uc(h-1,c,f),r=[uD(h,c,e),1];break;case"two-sided":if(l=Xw(h,c,f),u=c*f,h===u)n=1;else if(h<u){for(d=0,p=mne(u);p<=c;p++)Xw(p,c,f)<=l*lD&&(d+=1);n=uc(h,c,f)+(1-uc(c-d,c,f))}else{for(d=0,p=0;p<=gne(u);p++)Xw(p,c,f)<=l*lD&&(d+=1);n=uc(d-1,c,f)+(1-uc(h-1,c,f))}r=[uD(h,c,e/2),cD(h,c,e/2)];break;default:throw new Error("Invalid option. `alternative` must be either `two-sided`, `less` or `greater`. Value: `"+o+"`")}return s={},ta(s,"rejected",n<=e),ta(s,"alpha",e),ta(s,"pValue",n),ta(s,"statistic",i),ta(s,"ci",r),ta(s,"nullValue",f),ta(s,"alternative",o),ta(s,"method","Exact binomial test"),ta(s,"print",_ne),s}var bne=yne;/**
* @license Apache-2.0
*
* Copyright (c) 2018 The Stdlib Authors.
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*    http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/var wne=bne,fC=wne;const Sne=Array.prototype.concat,PW=Object.prototype.toString;function EW(e,t){var r=e>t?e:t;return Math.pow(10,17-~~(Math.log(r>0?r:-r)*Math.LOG10E))}const Do=Array.isArray||function(t){return PW.call(t)==="[object Array]"};function Ep(e){return PW.call(e)==="[object Function]"}function Lr(e){return typeof e=="number"?e-e===0:!1}function Tne(e){return Sne.apply([],e)}const CW={calcRdx:EW,isArray:Do,isFunction:Ep,isNumber:Lr,toVector:Tne};let ui=Math.random;function AW(e){if(typeof e!="function")throw new TypeError("fn is not a function");ui=e}function q_(e){return e.length||1}function MW(e){return e[0].length||1}function kne(e){return{rows:q_(e),cols:MW(e)}}function hC(e,t){return Do(t)?t.map(r=>hC(e,r)):e[t]}function xW(e,t){return hC(e,t)}function w1(e,t){if(Do(t)){const n=Oe(e.length).map(()=>new Array(t.length));return t.forEach(function(i,o){Oe(e.length).forEach(function(a){n[a][o]=e[a][i]})}),n}const r=new Array(e.length);for(let n=0;n<e.length;n++)r[n]=[e[n][t]];return r}function LW(e,t){return w1(e,t).map(r=>r[0])}function Pne(e){const t=q_(e),r=new Array(t);for(let n=0;n<t;n++)r[n]=[e[n][n]];return r}function Ene(e){for(var t=q_(e)-1,r=new Array(t),n=0;t>=0;t--,n++)r[n]=[e[n][t]];return r}function Ps(e){var t=[],r,n,i,o,a;for(Do(e[0])||(e=[e]),n=e.length,i=e[0].length,a=0;a<i;a++){for(r=new Array(n),o=0;o<n;o++)r[o]=e[o][a];t.push(r)}return t.length===1?t[0]:t}function sn(e,t,r){var n,i,o,a,s;for(Do(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),s=0;s<o;s++)a[n][s]=t(e[n][s],n,s);return a.length===1?a[0]:a}function Z_(e,t,r){var n,i,o,a,s;for(Do(e[0])||(e=[e]),i=e.length,o=e[0].length,a=r?e:new Array(i),n=0;n<i;n++)for(a[n]||(a[n]=new Array(o)),o>0&&(a[n][0]=e[n][0]),s=1;s<o;s++)a[n][s]=t(a[n][s-1],e[n][s]);return a.length===1?a[0]:a}function dC(e,t){return sn(e,t,!0)}function Vf(e,t,r){var n=new Array(e),i,o;for(Ep(t)&&(r=t,t=e),i=0;i<e;i++)for(n[i]=new Array(t),o=0;o<t;o++)n[i][o]=r(i,o);return n}function IW(){return 0}function Cne(){return 1}function Ane(e,t){return e===t?1:0}function zo(e,t){return Lr(t)||(t=e),Vf(e,t,IW)}function Mne(e,t){return Lr(t)||(t=e),Vf(e,t,Cne)}function xne(e,t){return Lr(t)||(t=e),Vf(e,t,ui)}function lu(e,t){return Lr(t)||(t=e),Vf(e,t,Ane)}function Lne(e){var t=e.length,r,n;if(e.length!==e[0].length)return!1;for(r=0;r<t;r++)for(n=0;n<t;n++)if(e[n][r]!==e[r][n])return!1;return!0}function Ine(e){return dC(e,IW)}function OW(e,t,r,n){Ep(n)||(n=!1);var i=[],o=EW(e,t),a=(t*o-e*o)/((r-1)*o),s=e,l;for(l=0;s<=t&&l<r;l++,s=(e*o+a*o*l)/o)i.push(n?n(s,l):s);return i}function Oe(e,t,r){var n=[],i;if(r=r||1,t===void 0&&(t=e,e=0),e===t||r===0)return[];if(e<t&&r<0)return[];if(e>t&&r>0)return[];if(r>0)for(i=e;i<t;i+=r)n.push(i);else for(i=e;i>t;i+=r)n.push(i);return n}function na(e,t){function r(l,u,c,f){var h,d=[],p=l.length;if(u===void 0&&c===void 0&&f===void 0)return K_(l);if(u=u||0,c=c||l.length,u=u>=0?u:p+u,c=c>=0?c:p+c,f=f||1,u===c||f===0)return[];if(u<c&&f<0)return[];if(u>c&&f>0)return[];if(f>0)for(h=u;h<c;h+=f)d.push(l[h]);else for(h=u;h>c;h+=f)d.push(l[h]);return d}var n,i;if(t=t||{},Lr(t.row)){if(Lr(t.col))return e[t.row][t.col];var o=xW(e,t.row);return n=t.col||{},r(o,n.start,n.end,n.step)}if(Lr(t.col)){var a=LW(e,t.col);return i=t.row||{},r(a,i.start,i.end,i.step)}i=t.row||{},n=t.col||{};var s=r(e,i.start,i.end,i.step);return s.map(function(l){return r(l,n.start,n.end,n.step)})}function id(e,t,r){var n,i;if(Lr(t.row)){if(Lr(t.col))return e[t.row][t.col]=r;t.col=t.col||{},t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,n=Oe(t.col.start,Math.min(e.length,t.col.end),t.col.step);var o=t.row;return n.forEach(function(s,l){e[o][s]=r[l]}),e}if(Lr(t.col)){t.row=t.row||{},t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,i=Oe(t.row.start,Math.min(e[0].length,t.row.end),t.row.step);var a=t.col;return i.forEach(function(s,l){e[s][a]=r[l]}),e}return r[0].length===void 0&&(r=[r]),t.row.start=t.row.start||0,t.row.end=t.row.end||e.length,t.row.step=t.row.step||1,t.col.start=t.col.start||0,t.col.end=t.col.end||e[0].length,t.col.step=t.col.step||1,i=Oe(t.row.start,Math.min(e.length,t.row.end),t.row.step),n=Oe(t.col.start,Math.min(e[0].length,t.col.end),t.col.step),i.forEach(function(s,l){n.forEach(function(u,c){e[s][u]=r[l][c]})}),e}function One(e){var t=zo(e.length,e.length);return e.forEach(function(r,n){t[n][n]=r}),t}function K_(e){return e.map(function(t){return Lr(t)?t:t.map(function(r){return r})})}const Rne=Object.freeze(Object.defineProperty({__proto__:null,utils:CW,get random_fn(){return ui},setRandom:AW,rows:q_,cols:MW,dimensions:kne,row:hC,rowa:xW,col:w1,cola:LW,diag:Pne,antidiag:Ene,transpose:Ps,map:sn,cumreduce:Z_,alter:dC,create:Vf,zeros:zo,ones:Mne,rand:xne,identity:lu,symmetric:Lne,clear:Ine,seq:OW,arange:Oe,slice:na,sliceAssign:id,diagonal:One,copy:K_},Symbol.toStringTag,{value:"Module"}));function Uf(e,t){return e-t}function fD(e,t,r){return Math.max(t,Math.min(e,r))}function ln(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function Dne(e){for(var t=0,r=e.length;--r>=0;)t+=e[r]*e[r];return t}function J_(e){for(var t=fr(e),r=0,n=e.length,i;--n>=0;)i=e[n]-t,r+=i*i;return r}function Nne(e){for(var t=0,r=e.length;--r>=0;)t+=e[r];return t}function RW(e){for(var t=1,r=e.length;--r>=0;)t*=e[r];return t}function pC(e){for(var t=e[0],r=0;++r<e.length;)e[r]<t&&(t=e[r]);return t}function vC(e){for(var t=e[0],r=0;++r<e.length;)e[r]>t&&(t=e[r]);return t}function Fne(e){for(var t={},r=[],n=0;n<e.length;n++)t[e[n]]||(t[e[n]]=!0,r.push(e[n]));return r}function fr(e){return ln(e)/e.length}function $ne(e){return J_(e)/e.length}function Bne(e){return Math.pow(RW(e),1/e.length)}function zT(e){var t=e.length,r=e.slice().sort(Uf);return t&1?r[t/2|0]:(r[t/2-1]+r[t/2])/2}function zne(e){return Z_(e,function(t,r){return t+r})}function Vne(e){return Z_(e,function(t,r){return t*r})}function Une(e){var t=[],r=e.length,n;for(n=1;n<r;n++)t.push(e[n]-e[n-1]);return t}function VT(e){var t,r=[],n={};for(t=0;t<e.length;t++){var i=e[t];n[i]?n[i]++:(n[i]=1,r.push(i))}var o=r.sort(Uf),a={},s=1;for(t=0;t<o.length;t++){var i=o[t],l=n[i],u=s,c=s+l-1,f=(u+c)/2;a[i]=f,s+=l}return e.map(function(h){return a[h]})}function Wne(e){var t=e.length,r=e.slice().sort(Uf),n=1,i=0,o=0,a=[],s;for(s=0;s<t;s++)r[s]===r[s+1]?n++:(n>i?(a=[r[s]],i=n,o=0):n===i&&(a.push(r[s]),o++),n=1);return o===0?a[0]:a}function Gne(e){return vC(e)-pC(e)}function DW(e,t){return J_(e)/(e.length-(t?1:0))}function NW(e){var t=e.reduce(function(n,i){return n+J_(i)},0),r=e.reduce(function(n,i){return n+i.length},0);return t/(r-e.length)}function jne(e){for(var t=fr(e),r=e.length,n=new Array(r),i=0;i<r;i++)n[i]=e[i]-t;return n}function ka(e,t){return Math.sqrt(DW(e,t))}function FW(e){return Math.sqrt(NW(e))}function Hne(e){for(var t=fr(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return fr(r)}function Xne(e){for(var t=zT(e),r=[],n=e.length-1;n>=0;n--)r.push(Math.abs(e[n]-t));return zT(r)}function Yne(e){return ka(e)/fr(e)}function qne(e){var t=e.length,r=e.slice().sort(Uf);return[r[Math.round(t/4)-1],r[Math.round(t/2)-1],r[Math.round(t*3/4)-1]]}function Zne(e,t,r,n){var i=e.slice().sort(Uf),o=[t.length],a=e.length,s,l,u,c,f,h;for(typeof r>"u"&&(r=3/8),typeof n>"u"&&(n=3/8),s=0;s<t.length;s++)l=t[s],u=r+l*(1-r-n),c=a*l+u,f=Math.floor(fD(c,1,a-1)),h=fD(c-f,0,1),o[s]=(1-h)*i[f-1]+h*i[f];return o}function Kne(e,t,r){var n=e.slice().sort(Uf),i=t*(n.length+(r?1:-1))+(r?0:1),o=parseInt(i),a=i-o;return o+1<n.length?n[o-1]+a*(n[o]-n[o-1]):n[o-1]}function Jne(e,t,r){var n=0,i=e.length,o=!1,a,s;for(r==="strict"&&(o=!0),s=0;s<i;s++)a=e[s],(o&&a<t||!o&&a<=t)&&n++;return n/i}function Qne(e,t){t=t||4;var r=pC(e),n=(vC(e)-r)/t,i=e.length,o=[],a;for(a=0;a<t;a++)o[a]=0;for(a=0;a<i;a++)o[Math.min(Math.floor((e[a]-r)/n),t-1)]+=1;return o}function $W(e,t){var r=fr(e),n=fr(t),i=e.length,o=new Array(i),a;for(a=0;a<i;a++)o[a]=(e[a]-r)*(t[a]-n);return ln(o)/(i-1)}function BW(e,t){return $W(e,t)/ka(e,1)/ka(t,1)}function tie(e,t){return e=VT(e),t=VT(t),BW(e,t)}function gC(e,t){for(var r=fr(e),n=ka(e),i=e.length,o=0,a=0;a<i;a++)o+=Math.pow((e[a]-r)/n,t);return o/e.length}function eie(e){return gC(e,3)}function rie(e){return gC(e,4)-3}const nie=Object.freeze(Object.defineProperty({__proto__:null,sum:ln,sumsqrd:Dne,sumsqerr:J_,sumrow:Nne,product:RW,min:pC,max:vC,unique:Fne,mean:fr,meansqerr:$ne,geomean:Bne,median:zT,cumsum:zne,cumprod:Vne,diff:Une,rank:VT,mode:Wne,range:Gne,variance:DW,pooledvariance:NW,deviation:jne,stdev:ka,pooledstdev:FW,meandev:Hne,meddev:Xne,coeffvar:Yne,quartiles:qne,quantiles:Zne,percentile:Kne,percentileOfScore:Jne,histogram:Qne,covariance:$W,corrcoeff:BW,spearmancoeff:tie,stanMoment:gC,skewness:eie,kurtosis:rie},Symbol.toStringTag,{value:"Module"}));function iie(e,t,r){return e<t||e>r?0:1/(r-t)}function oie(e,t,r){return e<t?0:e<r?(e-t)/(r-t):1}function aie(e,t,r){return t+e*(r-t)}function sie(e,t){return .5*(e+t)}function lie(e,t){return fr(e)}function uie(){throw new Error("mode is not yet implemented")}function zW(e,t){return e/2+t/2+(t/2-e/2)*(2*ui()-1)}function cie(e,t){return Math.pow(t-e,2)/12}const fie=Object.freeze(Object.defineProperty({__proto__:null,pdf:iie,cdf:oie,inv:aie,mean:sie,median:lie,mode:uie,sample:zW,variance:cie},Symbol.toStringTag,{value:"Module"}));function hie(e,t,r){return r<=t?NaN:e<=t||e>=r?0:2/Math.PI*Math.pow(Math.pow(r-t,2)-Math.pow(2*e-t-r,2),-.5)}function die(e,t,r){return e<t?0:e<r?2/Math.PI*Math.asin(Math.sqrt((e-t)/(r-t))):1}function pie(e,t,r){return t+(.5-.5*Math.cos(Math.PI*e))*(r-t)}function vie(e,t){return t<=e?NaN:(e+t)/2}function gie(e,t){return t<=e?NaN:(e+t)/2}function mie(){throw new Error("mode is not yet implemented")}function _ie(e,t){return(e+t)/2+(t-e)/2*Math.sin(2*Math.PI*zW(0,1))}function yie(e,t){return t<=e?NaN:Math.pow(t-e,2)/8}const bie=Object.freeze(Object.defineProperty({__proto__:null,pdf:hie,cdf:die,inv:pie,mean:vie,median:gie,mode:mie,sample:_ie,variance:yie},Symbol.toStringTag,{value:"Module"}));function We(e){var t=0,r=[76.18009172947146,-86.50532032941678,24.01409824083091,-1.231739572450155,.001208650973866179,-5395239384953e-18],n=1.000000000190015,i,o,a;for(a=(o=i=e)+5.5,a-=(i+.5)*Math.log(a);t<6;t++)n+=r[t]/++o;return Math.log(2.5066282746310007*n/i)-a}function VW(e){var t,r,n,i,o,a,s,l=[.08333333333333333,-.002777777777777778,.0007936507936507937,-.0005952380952380952,.0008417508417508418,-.001917526917526918,.00641025641025641,-.02955065359477124,.1796443723688307,-1.3924322169059];if(t=e,s=0,e==1||e==2)return 0;for(e<=7&&(s=Math.floor(7-e),t=e+s),r=1/(t*t),n=2*Math.PI,o=l[9],a=8;a>=0;a--)o*=r,o+=l[a];if(i=o/t+.5*Math.log(n)+(t-.5)*Math.log(t)-t,e<=7)for(a=1;a<=s;a++)i-=Math.log(t-1),t-=1;return i}function Fi(e){var t=[-1.716185138865495,24.76565080557592,-379.80425647094563,629.3311553128184,866.9662027904133,-31451.272968848367,-36144.413418691176,66456.14382024054],r=[-30.8402300119739,315.35062697960416,-1015.1563674902192,-3107.771671572311,22538.11842098015,4755.846277527881,-134659.9598649693,-115132.2596755535],n=!1,i=0,o=0,a=0,s=e,l,u,c,f;if(e>171.6243769536076)return 1/0;if(s<=0)if(f=s%1+36e-17,f)n=(s&1?-1:1)*Math.PI/Math.sin(Math.PI*f),s=1-s;else return 1/0;for(c=s,s<1?u=s++:u=(s-=i=(s|0)-1)-1,l=0;l<8;++l)a=(a+t[l])*u,o=o*u+r[l];if(f=a/o+1,c<s)f/=c;else if(c>s)for(l=0;l<i;++l)f*=s,s++;return n&&(f=n/f),f}function wie(e,t){return Wf(e,t)*Fi(e)}function Wf(e,t){var r=We(e),n=e,i=1/e,o=i,a=t+1-e,s=1/1e-30,l=1/a,u=l,c=1,f=-~(Math.log(e>=1?e:1/e)*8.5+e*.4+17),h;if(t<0||e<=0)return NaN;if(t<e+1){for(;c<=f;c++)i+=o*=t/++n;return i*Math.exp(-t+e*Math.log(t)-r)}for(;c<=f;c++)h=-c*(c-e),a+=2,l=h*l+a,s=a+h/s,l=1/l,u*=l*s;return 1-u*Math.exp(-t+e*Math.log(t)-r)}function dm(e){return e<0?NaN:We(e+1)}function Xl(e){return e<0?NaN:Fi(e+1)}function mC(e,t){return e>170||t>170?Math.exp(UW(e,t)):Xl(e)/Xl(t)/Xl(e-t)}function UW(e,t){return dm(e)-dm(t)-dm(e-t)}function Sie(e,t){return Xl(e)/Xl(e-t)}function Q_(e,t){if(!(e<=0||t<=0))return e+t>170?Math.exp(_C(e,t)):Fi(e)*Fi(t)/Fi(e+t)}function _C(e,t){return We(e)+We(t)-We(e+t)}function UT(e,t,r){var n=1e-30,i=1,o=t+r,a=t+1,s=t-1,l=1,u=1-o*e/a,c,f,h,d;for(Math.abs(u)<n&&(u=n),u=1/u,d=u;i<=100&&(c=2*i,f=i*(r-i)*e/((s+c)*(t+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,d*=u*l,f=-(t+i)*(o+i)*e/((t+c)*(a+c)),u=1+f*u,Math.abs(u)<n&&(u=n),l=1+f/l,Math.abs(l)<n&&(l=n),u=1/u,h=u*l,d*=h,!(Math.abs(h-1)<3e-7));i++);return d}function ty(e,t){var r=0,n=t-1,i=1e-8,o=We(t),a,s,l,u,c,f,h;if(e>=1)return Math.max(100,t+100*Math.sqrt(t));if(e<=0)return 0;for(t>1?(f=Math.log(n),h=Math.exp(n*(f-1)-o),c=e<.5?e:1-e,l=Math.sqrt(-2*Math.log(c)),a=(2.30753+l*.27061)/(1+l*(.99229+l*.04481))-l,e<.5&&(a=-a),a=Math.max(.001,t*Math.pow(1-1/(9*t)-a/(3*Math.sqrt(t)),3))):(l=1-t*(.253+t*.12),e<l?a=Math.pow(e/l,1/t):a=1-Math.log(1-(e-l)/(1-l)));r<12;r++){if(a<=0)return 0;if(s=Wf(t,a)-e,t>1?l=h*Math.exp(-(a-n)+n*(Math.log(a)-f)):l=Math.exp(-a+n*Math.log(a)-o),u=s/l,a-=l=u/(1-.5*Math.min(1,u*((t-1)/a-1))),a<=0&&(a=.5*(a+l)),Math.abs(l)<i*a)break}return a}function ey(e){var t=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17,15626441722e-18,-85238095915e-18,6529054439e-18,5059343495e-18,-991364156e-18,-227365122e-18,96467911e-18,2394038e-18,-6886027e-18,894487e-18,313092e-18,-112708e-18,381e-18,7106e-18,-1523e-18,-94e-18,121e-18,-28e-18],r=t.length-1,n=!1,i=0,o=0,a,s,l,u;for(e<0&&(e=-e,n=!0),a=2/(2+e),s=4*a-2;r>0;r--)l=i,i=s*i-o+t[r],o=l;return u=a*Math.exp(-e*e+.5*(t[0]+s*i)-o),n?u-1:1-u}function WW(e){return 1-ey(e)}function yC(e){var t=0,r,n,i,o;if(e>=2)return-100;if(e<=0)return 100;for(o=e<1?e:2-e,i=Math.sqrt(-2*Math.log(o/2)),r=-.70711*((2.30753+i*.27061)/(1+i*(.99229+i*.04481))-i);t<2;t++)n=WW(r)-o,r+=n/(1.1283791670955126*Math.exp(-r*r)-r*n);return e<1?r:-r}function a0(e,t,r){var n=1e-8,i=t-1,o=r-1,a=0,s,l,u,c,f,h,d,p,v,m,g;if(e<=0)return 0;if(e>=1)return 1;for(t>=1&&r>=1?(u=e<.5?e:1-e,c=Math.sqrt(-2*Math.log(u)),d=(2.30753+c*.27061)/(1+c*(.99229+c*.04481))-c,e<.5&&(d=-d),p=(d*d-3)/6,v=2/(1/(2*t-1)+1/(2*r-1)),m=d*Math.sqrt(p+v)/v-(1/(2*r-1)-1/(2*t-1))*(p+5/6-2/(3*v)),d=t/(t+r*Math.exp(2*m))):(s=Math.log(t/(t+r)),l=Math.log(r/(t+r)),c=Math.exp(t*s)/t,f=Math.exp(r*l)/r,m=c+f,e<c/m?d=Math.pow(t*m*e,1/t):d=1-Math.pow(r*m*(1-e),1/r)),g=-We(t)-We(r)+We(t+r);a<10;a++){if(d===0||d===1)return d;if(h=s0(d,t,r)-e,c=Math.exp(i*Math.log(d)+o*Math.log(1-d)+g),f=h/c,d-=c=f/(1-.5*Math.min(1,f*(i/d-o/(1-d)))),d<=0&&(d=.5*(d+c)),d>=1&&(d=.5*(d+c+1)),Math.abs(c)<n*d&&a>0)break}return d}function s0(e,t,r){var n=e===0||e===1?0:Math.exp(We(t+r)-We(t)-We(r)+t*Math.log(e)+r*Math.log(1-e));return e<0||e>1?!1:e<(t+1)/(t+r+2)?n*UT(e,t,r)/t:1-n*UT(1-e,r,t)/r}function Au(e,t){var r,n,i,o,a;if(t||(t=e),e)return Vf(e,t,function(){return Au()});do r=ui(),n=1.7156*(ui()-.5),i=r-.449871,o=Math.abs(n)+.386595,a=i*i+o*(.196*o-.25472*i);while(a>.27597&&(a>.27846||n*n>-4*Math.log(r)*r*r));return n/r}function No(e,t,r){var n=e,i,o,a,s,l,u;if(r||(r=t),e||(e=1),t)return u=zo(t,r),u.alter(function(){return No(e)}),u;e<1&&(e+=1),i=e-1/3,o=1/Math.sqrt(9*i);do{do l=Au(),s=1+o*l;while(s<=0);s=s*s*s,a=ui()}while(a>1-.331*Math.pow(l,4)&&Math.log(a)>.5*l*l+i*(1-s+Math.log(s)));if(e==n)return i*s;do a=ui();while(a===0);return Math.pow(a,1/n)*i*s}const Tie=Object.freeze(Object.defineProperty({__proto__:null,gammaln:We,loggam:VW,gammafn:Fi,gammap:wie,lowRegGamma:Wf,factorialln:dm,factorial:Xl,combination:mC,combinationln:UW,permutation:Sie,betafn:Q_,betaln:_C,betacf:UT,gammapinv:ty,erf:ey,erfc:WW,erfcinv:yC,ibetainv:a0,ibeta:s0,randn:Au,randg:No},Symbol.toStringTag,{value:"Module"}));function kie(e,t,r){return e>1||e<0?0:t==1&&r==1?1:t<512&&r<512?Math.pow(e,t-1)*Math.pow(1-e,r-1)/Q_(t,r):Math.exp((t-1)*Math.log(e)+(r-1)*Math.log(1-e)-_C(t,r))}function S1(e,t,r){return e>1||e<0?(e>1)*1:s0(e,t,r)}function Pie(e,t,r){return a0(e,t,r)}function Eie(e,t){return e/(e+t)}function Cie(e,t){return a0(.5,e,t)}function Aie(e,t){return(e-1)/(e+t-2)}function Mie(e,t){var r=No(e);return r/(r+No(t))}function xie(e,t){return e*t/(Math.pow(e+t,2)*(e+t+1))}const Lie=Object.freeze(Object.defineProperty({__proto__:null,pdf:kie,cdf:S1,inv:Pie,mean:Eie,median:Cie,mode:Aie,sample:Mie,variance:xie},Symbol.toStringTag,{value:"Module"}));function hD(e,t,r,n){for(var i=0,o=1,a=1,s=1,l=0,u=0,c;Math.abs((a-u)/a)>n;)u=a,c=-(t+l)*(t+r+l)*e/(t+2*l)/(t+2*l+1),i=a+c*i,o=s+c*o,l=l+1,c=l*(r-l)*e/(t+2*l-1)/(t+2*l),a=i+c*a,s=o+c*s,i=i/s,o=o/s,a=a/s,s=1;return a/t}function GW(e,t,r){return r===0||r===1?t*r===e?1:0:mC(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e)}function Iie(e,t,r){var n,i=1e-10;if(e<0)return 0;if(e>=t)return 1;if(r<0||r>1||t<=0)return NaN;e=Math.floor(e);var o=r,a=e+1,s=t-e,l=a+s,u=Math.exp(We(l)-We(s)-We(a)+a*Math.log(o)+s*Math.log(1-o));return o<(a+1)/(l+2)?n=u*hD(o,a,s,i):n=1-u*hD(1-o,s,a,i),Math.round((1-n)*(1/i))/(1/i)}const Oie=Object.freeze(Object.defineProperty({__proto__:null,pdf:GW,cdf:Iie},Symbol.toStringTag,{value:"Module"}));function Rie(e,t,r){return r<0?0:r/(Math.pow(e-t,2)+Math.pow(r,2))/Math.PI}function Die(e,t,r){return Math.atan((e-t)/r)/Math.PI+.5}function Nie(e,t,r){return t+r*Math.tan(Math.PI*(e-.5))}function Fie(e){return e}function $ie(e){return e}function Bie(e,t){return Au()*Math.sqrt(1/(2*randg(.5)))*t+e}const zie=Object.freeze(Object.defineProperty({__proto__:null,pdf:Rie,cdf:Die,inv:Nie,median:Fie,mode:$ie,sample:Bie},Symbol.toStringTag,{value:"Module"}));function Vie(e,t,r){var n,i,o;return e<0?0:t<=2?e===0&&t<2?1/0:e===0&&t===2?1:1/Q_(t/2,r/2)*Math.pow(t/r,t/2)*Math.pow(e,t/2-1)*Math.pow(1+t/r*e,-(t+r)/2):(n=t*e/(r+e*t),i=r/(r+e*t),o=t*i/2,o*GW((t-2)/2,(t+r-2)/2,n))}function T1(e,t,r){return e<0?0:s0(t*e/(t*e+r),t/2,r/2)}function Uie(e,t,r){return r/(t*(1/a0(e,t/2,r/2)-1))}function Wie(e,t){return t>2?t/(t-2):void 0}function Gie(e,t){return e>2?t*(e-2)/(e*(t+2)):void 0}function jie(e,t){var r=No(e/2)*2,n=No(t/2)*2;return r/e/(n/t)}function Hie(e,t){if(!(t<=4))return 2*t*t*(e+t-2)/(e*(t-2)*(t-2)*(t-4))}const Xie=Object.freeze(Object.defineProperty({__proto__:null,pdf:Vie,cdf:T1,inv:Uie,mean:Wie,mode:Gie,sample:jie,variance:Hie},Symbol.toStringTag,{value:"Module"}));function Yie(e,t){return e<0?0:e===0&&t===2?.5:Math.exp((t/2-1)*Math.log(e)-e/2-t/2*Math.log(2)-We(t/2))}function qie(e,t){return e<0?0:Wf(t/2,e/2)}function Zie(e,t){return 2*ty(e,.5*t)}function Kie(e){return e}function Jie(e){return e*Math.pow(1-2/(9*e),3)}function Qie(e){return e-2>0?e-2:0}function toe(e){return No(e/2)*2}function eoe(e){return 2*e}const roe=Object.freeze(Object.defineProperty({__proto__:null,pdf:Yie,cdf:qie,inv:Zie,mean:Kie,median:Jie,mode:Qie,sample:toe,variance:eoe},Symbol.toStringTag,{value:"Module"}));function noe(e,t){return e<0?0:t*Math.exp(-t*e)}function ioe(e,t){return e<0?0:1-Math.exp(-t*e)}function ooe(e,t){return-Math.log(1-e)/t}function aoe(e){return 1/e}function soe(e){return 1/e*Math.log(2)}function loe(){return 0}function uoe(e){return-1/e*Math.log(ui())}function coe(e){return Math.pow(e,-2)}const foe=Object.freeze(Object.defineProperty({__proto__:null,pdf:noe,cdf:ioe,inv:ooe,mean:aoe,median:soe,mode:loe,sample:uoe,variance:coe},Symbol.toStringTag,{value:"Module"}));function hoe(e,t,r){return e<0?0:e===0&&t===1?1/r:Math.exp((t-1)*Math.log(e)-e/r-We(t)-t*Math.log(r))}function doe(e,t,r){return e<0?0:Wf(t,e/r)}function poe(e,t,r){return ty(e,t)*r}function voe(e,t){return e*t}function goe(e,t){if(e>1)return(e-1)*t}function moe(e,t){return No(e)*t}function _oe(e,t){return e*t*t}const yoe=Object.freeze(Object.defineProperty({__proto__:null,pdf:hoe,cdf:doe,inv:poe,mean:voe,mode:goe,sample:moe,variance:_oe},Symbol.toStringTag,{value:"Module"}));function od(e,t,r,n){if(e!==e|0)return!1;if(e<0||e<r-(t-n))return 0;if(e>n||e>r)return 0;if(r*2>t)return n*2>t?od(t-r-n+e,t,t-r,t-n):od(n-e,t,t-r,n);if(n*2>t)return od(r-e,t,r,t-n);if(r<n)return od(e,t,n,r);for(var i=1,o=0,a=0;a<e;a++){for(;i>1&&o<n;)i*=1-r/(t-o),o++;i*=(n-a)*(r-a)/((a+1)*(t-r-n+a+1))}for(;o<n;o++)i*=1-r/(t-o);return Math.min(1,Math.max(0,i))}function ad(e,t,r,n){if(e<0||e<r-(t-n))return 0;if(e>=n||e>=r)return 1;if(r*2>t)return n*2>t?ad(t-r-n+e,t,t-r,t-n):1-ad(n-e-1,t,t-r,n);if(n*2>t)return 1-ad(r-e-1,t,r,t-n);if(r<n)return ad(e,t,n,r);for(var i=1,o=1,a=0,s=0;s<e;s++){for(;i>1&&a<n;){var l=1-r/(t-a);o*=l,i*=l,a++}o*=(n-s)*(r-s)/((s+1)*(t-r-n+s+1)),i+=o}for(;a<n;a++)i*=1-r/(t-a);return Math.min(1,Math.max(0,i))}const boe=Object.freeze(Object.defineProperty({__proto__:null,pdf:od,cdf:ad},Symbol.toStringTag,{value:"Module"}));function woe(e,t,r){return e<=0?0:Math.exp(-(t+1)*Math.log(e)-r/e-We(t)+t*Math.log(r))}function Soe(e,t,r){return e<=0?0:1-Wf(t,r/e)}function Toe(e,t,r){return r/ty(1-e,t)}function koe(e,t){return e>1?t/(e-1):void 0}function Poe(e,t){return t/(e+1)}function Eoe(e,t){return t/No(e)}function Coe(e,t){if(!(e<=2))return t*t/((e-1)*(e-1)*(e-2))}const Aoe=Object.freeze(Object.defineProperty({__proto__:null,pdf:woe,cdf:Soe,inv:Toe,mean:koe,mode:Poe,sample:Eoe,variance:Coe},Symbol.toStringTag,{value:"Module"}));function Moe(e,t,r){return e===0&&t===1?r:e===1&&r===1?t:Math.exp(Math.log(t)+Math.log(r)+(t-1)*Math.log(e)+(r-1)*Math.log(1-Math.pow(e,t)))}function xoe(e,t,r){return e<0?0:e>1?1:1-Math.pow(1-Math.pow(e,t),r)}function Loe(e,t,r){return Math.pow(1-Math.pow(1-e,1/r),1/t)}function Ioe(e,t){return t*Fi(1+1/e)*Fi(t)/Fi(1+1/e+t)}function Ooe(e,t){return Math.pow(1-Math.pow(2,-1/t),1/e)}function Roe(e,t){if(e>=1&&t>=1&&e!==1&&t!==1)return Math.pow((e-1)/(e*t-1),1/e)}function Doe(){throw new Error("variance not yet implemented")}const Noe=Object.freeze(Object.defineProperty({__proto__:null,pdf:Moe,cdf:xoe,inv:Loe,mean:Ioe,median:Ooe,mode:Roe,variance:Doe},Symbol.toStringTag,{value:"Module"}));function Foe(e){return e/Math.abs(e)}function $oe(e,t,r){return r<=0?0:Math.exp(-Math.abs(e-t)/r)/(2*r)}function Boe(e,t,r){return r<=0?0:e<t?.5*Math.exp((e-t)/r):1-.5*Math.exp(-(e-t)/r)}function zoe(e){return e}function Voe(e){return e}function Uoe(e){return e}function Woe(e,t){return 2*t*t}function Goe(e,t){var r=ui()-.5;return e-t*Foe(r)*Math.log(1-2*Math.abs(r))}const joe=Object.freeze(Object.defineProperty({__proto__:null,pdf:$oe,cdf:Boe,mean:zoe,median:Voe,mode:Uoe,variance:Woe,sample:Goe},Symbol.toStringTag,{value:"Module"}));function Hoe(e,t,r){return e<=0?0:Math.exp(-Math.log(e)-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(Math.log(e)-t,2)/(2*r*r))}function Xoe(e,t,r){return e<0?0:.5+.5*ey((Math.log(e)-t)/Math.sqrt(2*r*r))}function Yoe(e,t,r){return Math.exp(-1.4142135623730951*r*yC(2*e)+t)}function qoe(e,t){return Math.exp(e+t*t/2)}function Zoe(e){return Math.exp(e)}function Koe(e,t){return Math.exp(e-t*t)}function Joe(e,t){return Math.exp(Au()*t+e)}function Qoe(e,t){return(Math.exp(t*t)-1)*Math.exp(2*e+t*t)}const tae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Hoe,cdf:Xoe,inv:Yoe,mean:qoe,median:Zoe,mode:Koe,sample:Joe,variance:Qoe},Symbol.toStringTag,{value:"Module"}));function jW(e,t,r){return e!==e>>>0?!1:e<0?0:mC(e+t-1,t-1)*Math.pow(1-r,e)*Math.pow(r,t)}function eae(e,t,r){var n=0,i=0;if(e<0)return 0;for(;i<=e;i++)n+=jW(i,t,r);return n}const rae=Object.freeze(Object.defineProperty({__proto__:null,pdf:jW,cdf:eae},Symbol.toStringTag,{value:"Module"}));function HW(e,t){return t=t>1e100?1e100:t,1/(Math.sqrt(t)*Q_(.5,t/2))*Math.pow(1+e*e/t,-((t+1)/2))}function ia(e,t){var r=t/2;return s0((e+Math.sqrt(e*e+t))/(2*Math.sqrt(e*e+t)),r,r)}function k1(e,t){var r=a0(2*Math.min(e,1-e),.5*t,.5);return r=Math.sqrt(t*(1-r)/r),e>.5?r:-r}function nae(e){return e>1?0:void 0}function iae(){return 0}function oae(){return 0}function aae(e){return Au()*Math.sqrt(e/(2*No(e/2)))}function sae(e){return e>2?e/(e-2):e>1?1/0:void 0}const lae=Object.freeze(Object.defineProperty({__proto__:null,pdf:HW,cdf:ia,inv:k1,mean:nae,median:iae,mode:oae,sample:aae,variance:sae},Symbol.toStringTag,{value:"Module"}));function uae(e,t,r){return Math.exp(-.5*Math.log(2*Math.PI)-Math.log(r)-Math.pow(e-t,2)/(2*r*r))}function ki(e,t,r){return .5*(1+ey((e-t)/Math.sqrt(2*r*r)))}function WT(e,t,r){return-1.4142135623730951*r*yC(2*e)+t}function cae(e){return e}function fae(e){return e}function hae(e){return e}function dae(e,t){return Au()*t+e}function pae(e,t){return t*t}const vae=Object.freeze(Object.defineProperty({__proto__:null,pdf:uae,cdf:ki,inv:WT,mean:cae,median:fae,mode:hae,sample:dae,variance:pae},Symbol.toStringTag,{value:"Module"}));function gae(e,t,r){var n=1e-14;return Math.abs(r)<n?HW(e,t):Math.abs(e)<n?Math.exp(We((t+1)/2)-r*r/2-.5*Math.log(Math.PI*t)-We(t/2)):t/e*(GT(e*Math.sqrt(1+2/t),t+2,r)-GT(e,t,r))}function GT(e,t,r){var n=1e-14,i=200;if(Math.abs(r)<n)return ia(e,t);var o=!1;e<0&&(o=!0,r=-r);for(var a=ki(-r,0,1),s=n+1,l=s,u=e*e/(e*e+t),c=0,f=Math.exp(-r*r/2),h=Math.exp(-r*r/2-.5*Math.log(2)-We(3/2))*r;c<i||l>n||s>n;)l=s,c>0&&(f*=r*r/(2*c),h*=r*r/(2*(c+1/2))),s=f*S1(u,c+.5,t/2)+h*S1(u,c+1,t/2),a+=.5*s,c++;return o?1-a:a}const mae=Object.freeze(Object.defineProperty({__proto__:null,pdf:gae,cdf:GT},Symbol.toStringTag,{value:"Module"}));function _ae(e,t,r){return e<t?0:r*Math.pow(t,r)/Math.pow(e,r+1)}function yae(e,t,r){return e<t?0:1-Math.pow(t/e,r)}function bae(e,t,r){return t/Math.pow(1-e,1/r)}function wae(e,t){if(!(t<=1))return t*Math.pow(e,t)/(t-1)}function Sae(e,t){return e*(t*Math.SQRT2)}function Tae(e){return e}function kae(e,t){if(!(t<=2))return e*e*t/(Math.pow(t-1,2)*(t-2))}const Pae=Object.freeze(Object.defineProperty({__proto__:null,pdf:_ae,cdf:yae,inv:bae,mean:wae,median:Sae,mode:Tae,variance:kae},Symbol.toStringTag,{value:"Module"}));function dt(...e){return new dt._init(...e)}dt._init=function(...e){if(Do(e[0]))if(Do(e[0][0])){Ep(e[1])&&(e[0]=sn(e[0],e[1]));for(let t=0;t<e[0].length;t++)this[t]=e[0][t];this.length=e[0].length}else this[0]=Ep(e[1])?sn(e[0],e[1]):e[0],this.length=1;else if(Lr(e[0]))this[0]=OW.apply(null,e),this.length=1;else{if(e[0]instanceof dt)return dt(e[0].toArray());this[0]=[],this.length=1}return this};dt._init.prototype=dt.prototype;dt._init.constructor=dt;dt.setRandom=AW;const bn=dt.prototype;bn.length=0;bn.push=Array.prototype.push;bn.sort=Array.prototype.sort;bn.splice=Array.prototype.splice;bn.slice=Array.prototype.slice;bn.toArray=function(){return this.length>1?this.slice():this.slice()[0]};bn.map=function(e,t){return dt(sn(this,e,t))};bn.cumreduce=function(e,t){return dt(Z_(this,e,t))};bn.alter=function(e){return dC(this,e),this};"transpose clear symmetric rows cols dimensions diag antidiag".split(" ").forEach(e=>{bn[e]=function(t){if(t)return t.call(this,bn[e].call(this)),this;const r=dt[e](this);return Array.isArray(r)?dt(r):r}});"row col".split(" ").forEach(e=>{bn[e]=function(t,r){return r?(r.call(this,bn[e].call(this,t)),this):dt(dt[e](this,t))}});"create zeros ones rand identity".split(" ").forEach(e=>{bn[e]=function(...t){return dt(dt[e](...t))}});function XW(e,t){return t<0||e%1!==0||e<0?0:Math.pow(t,e)*Math.exp(-t)/Xl(e)}function Eae(e,t){var r=[],n=0;if(e<0)return 0;for(;n<=e;n++)r.push(XW(n,t));return ln(r)}function Cae(e){return e}function Aae(e){return e}function Mae(e){var t=1,r=0,n=Math.exp(-e);do r++,t*=dt._random_fn();while(t>n);return r-1}function xae(e){var t=e,r,n,i,o,a,s,l,u,c,f;for(o=Math.sqrt(t),a=Math.log(t),l=.931+2.53*o,s=-.059+.02483*l,u=1.1239+1.1328/(l-3.4),c=.9277-3.6224/(l-2);;){if(n=Math.random()-.5,i=Math.random(),f=.5-Math.abs(n),r=Math.floor((2*s/f+l)*n+t+.43),f>=.07&&i<=c)return r;if(!(r<0||f<.013&&i>f)&&Math.log(i)+Math.log(u)-Math.log(s/(f*f)+l)<=-t+r*a-VW(r+1))return r}}function Lae(e){return e<10?Mae(e):xae(e)}const Iae=Object.freeze(Object.defineProperty({__proto__:null,pdf:XW,cdf:Eae,mean:Cae,variance:Aae,sample:Lae},Symbol.toStringTag,{value:"Module"}));function Oae(e,t,r,n){return r<=t||n<t||n>r?NaN:e<t||e>r?0:e<n?2*(e-t)/((r-t)*(n-t)):e===n?2/(r-t):2*(r-e)/((r-t)*(r-n))}function Rae(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=t?0:e>=r?1:e<=n?Math.pow(e-t,2)/((r-t)*(n-t)):1-Math.pow(r-e,2)/((r-t)*(r-n))}function Dae(e,t,r,n){return r<=t||n<t||n>r?NaN:e<=(n-t)/(r-t)?t+(r-t)*Math.sqrt(e*((n-t)/(r-t))):t+(r-t)*(1-Math.sqrt((1-e)*(1-(n-t)/(r-t))))}function Nae(e,t,r){return(e+t+r)/3}function Fae(e,t,r){if(r<=(e+t)/2)return t-Math.sqrt((t-e)*(t-r))/Math.sqrt(2);if(r>(e+t)/2)return e+Math.sqrt((t-e)*(r-e))/Math.sqrt(2)}function $ae(e,t,r){return r}function Bae(e,t,r){var n=ui();return n<(r-e)/(t-e)?e+Math.sqrt(n*(t-e)*(r-e)):t-Math.sqrt((1-n)*(t-e)*(t-r))}function zae(e,t,r){return(e*e+t*t+r*r-e*t-e*r-t*r)/18}const Vae=Object.freeze(Object.defineProperty({__proto__:null,pdf:Oae,cdf:Rae,inv:Dae,mean:Nae,median:Fae,mode:$ae,sample:Bae,variance:zae},Symbol.toStringTag,{value:"Module"}));function dD(e,t,r){var n=12,i=6,o=-30,a=-50,s=60,l=8,u=3,c=2,f=3,h=[.9815606342467192,.9041172563704749,.7699026741943047,.5873179542866175,.3678314989981802,.1252334085114689],d=[.04717533638651183,.10693932599531843,.16007832854334622,.20316742672306592,.2334925365383548,.24914704581340277],p=e*.5;if(p>=l)return 1;var v=2*ki(p,0,1)-1;v>=Math.exp(a/r)?v=Math.pow(v,r):v=0;var m;e>u?m=c:m=f;for(var g=p,_=(l-p)/m,b=g+_,w=0,T=r-1,S=1;S<=m;S++){for(var k=0,C=.5*(b+g),E=.5*(b-g),M=1;M<=n;M++){var x,D;i<M?(x=n-M+1,D=h[x-1]):(x=M,D=-h[x-1]);var B=E*D,V=C+B,F=V*V;if(F>s)break;var G=2*ki(V,0,1),Z=2*ki(V,e,1),q=G*.5-Z*.5;q>=Math.exp(o/T)&&(q=d[x-1]*Math.exp(-(.5*F))*Math.pow(q,T),k+=q)}k*=2*E*r/Math.sqrt(2*Math.PI),w+=k,g=b,b+=_}return v+=w,v<=Math.exp(o/t)?0:(v=Math.pow(v,t),v>=1?1:v)}function Uae(e,t,r){var n=.322232421088,i=.099348462606,o=-1,a=.588581570495,s=-.342242088547,l=.531103462366,u=-.204231210125,c=.10353775285,f=-453642210148e-16,h=.0038560700634,d=.8832,p=.2368,v=1.214,m=1.208,g=1.4142,_=120,b=.5-.5*e,w=Math.sqrt(Math.log(1/(b*b))),T=w+((((w*f+u)*w+s)*w+o)*w+n)/((((w*h+c)*w+l)*w+a)*w+i);r<_&&(T+=(T*T*T+T)/r/4);var S=d-p*T;return r<_&&(S+=-v/r+m*T/r),T*(S*Math.log(t-1)+g)}function Dd(e,t,r){var n=1,i=t,o=16,a=8,s=-30,l=1e-14,u=100,c=800,f=5e3,h=25e3,d=1,p=.5,v=.25,m=.125,g=[.9894009349916499,.9445750230732326,.8656312023878318,.755404408355003,.6178762444026438,.45801677765722737,.2816035507792589,.09501250983763744],_=[.027152459411754096,.062253523938647894,.09515851168249279,.12462897125553388,.14959598881657674,.16915651939500254,.18260341504492358,.1894506104550685];if(e<=0)return 0;if(r<2||n<1||i<2)return NaN;if(!Number.isFinite(e))return 1;if(r>h)return dD(e,n,i);var b=r*.5,w=b*Math.log(r)-r*Math.log(2)-We(b),T=b-1,S=r*.25,k;r<=u?k=d:r<=c?k=p:r<=f?k=v:k=m,w+=Math.log(k);for(var C=0,E=1;E<=50;E++){for(var M=0,x=(2*E-1)*k,D=1;D<=o;D++){var B,V;a<D?(B=D-a-1,V=w+T*Math.log(x+g[B]*k)-(g[B]*k+x)*S):(B=D-1,V=w+T*Math.log(x-g[B]*k)+(g[B]*k-x)*S);var F;if(V>=s){a<D?F=e*Math.sqrt((g[B]*k+x)*.5):F=e*Math.sqrt((-(g[B]*k)+x)*.5);var G=dD(F,n,i),Z=G*_[B]*Math.exp(V);M+=Z}}if(E*k>=1&&M<=l)break;C+=M}if(M>l)throw new Error("tukey.cdf failed to converge");return C>1&&(C=1),C}function Wae(e,t,r){var n=1,i=t,o=1e-4,a=50;if(r<2||n<1||i<2)return NaN;if(e<0||e>1)return NaN;if(e===0)return 0;if(e===1)return 1/0;var s=Uae(e,i,r),l=Dd(s,t,r)-e,u;l>0?u=Math.max(0,s-1):u=s+1;for(var c=Dd(u,t,r)-e,f,h=1;h<a;h++){f=u-c*(u-s)/(c-l),l=c,s=u,f<0&&(f=0,c=-e),c=Dd(f,t,r)-e,u=f;var d=Math.abs(u-s);if(d<o)return f}throw new Error("tukey.inv failed to converge")}const Gae=Object.freeze(Object.defineProperty({__proto__:null,cdf:Dd,inv:Wae},Symbol.toStringTag,{value:"Module"}));function jae(e,t,r){return e<0||t<0||r<0?0:r/t*Math.pow(e/t,r-1)*Math.exp(-Math.pow(e/t,r))}function Hae(e,t,r){return e<0?0:1-Math.exp(-Math.pow(e/t,r))}function Xae(e,t,r){return t*Math.pow(-Math.log(1-e),1/r)}function YW(e,t){return e*Fi(1+1/t)}function Yae(e,t){return e*Math.pow(Math.log(2),1/t)}function qae(e,t){return t<=1?0:e*Math.pow((t-1)/t,1/t)}function Zae(e,t){return e*Math.pow(-Math.log(ui()),1/t)}function Kae(e,t){return e*e*Fi(1+2/t)-Math.pow(YW(e,t),2)}const Jae=Object.freeze(Object.defineProperty({__proto__:null,pdf:jae,cdf:Hae,inv:Xae,mean:YW,median:Yae,mode:qae,sample:Zae,variance:Kae},Symbol.toStringTag,{value:"Module"})),Qae=Object.freeze(Object.defineProperty({__proto__:null,arcsine:bie,beta:Lie,binomial:Oie,cauchy:zie,centralF:Xie,chisquare:roe,exponential:foe,gamma:yoe,hypgeom:boe,invgamma:Aoe,kumaraswamy:Noe,laplace:joe,lognormal:tae,negbin:rae,noncentralt:mae,normal:vae,pareto:Pae,poisson:Iae,studentt:lae,triangular:Vae,tukey:Gae,uniform:fie,weibull:Jae},Symbol.toStringTag,{value:"Module"}));function jT(){const e=[...arguments];return Lr(e[1])?(e[0]-e[1])/e[2]:(e[0]-fr(e[1]))/ka(e[1],e[2])}function bC(){const e=[...arguments];let t;return Do(e[1])?(t=jT(e[0],e[1],e[3]),e[2]===1?ki(-Math.abs(t),0,1):ki(-Math.abs(t),0,1)*2):e.length>2?(t=jT(e[0],e[1],e[2]),e[3]===1?ki(-Math.abs(t),0,1):ki(-Math.abs(t),0,1)*2):(t=e[0],e[1]===1?ki(-Math.abs(t),0,1):ki(-Math.abs(t),0,1)*2)}function HT(){const e=[...arguments];return e.length===4?(e[0]-e[1])/(e[2]/Math.sqrt(e[3])):(e[0]-fr(e[1]))/(ka(e[1],!0)/Math.sqrt(e[1].length))}function tse(){const e=[...arguments];let t;return e.length===5?(t=Math.abs(HT(e[0],e[1],e[2],e[3])),e[4]===1?ia(-t,e[3]-1):ia(-t,e[3]-1)*2):Lr(e[1])?(t=Math.abs(e[0]),e[2]===1?ia(-t,e[1]-1):ia(-t,e[1]-1)*2):(t=Math.abs(HT(e[0],e[1])),e[2]===1?ia(-t,e[1].length-1):ia(-t,e[1].length-1)*2)}function ese(){var e=[...arguments],t,r,n,i,o,a,s,l;if(e.length===1){for(o=new Array(e[0].length),s=0;s<e[0].length;s++)o[s]=e[0][s];e=o}for(r=[],s=0;s<e.length;s++)r=r.concat(e[s]);for(n=fr(r),t=0,s=0;s<e.length;s++)t=t+e[s].length*Math.pow(fr(e[s])-n,2);for(t/=e.length-1,a=0,s=0;s<e.length;s++)for(i=fr(e[s]),l=0;l<e[s].length;l++)a+=Math.pow(e[s][l]-i,2);return a/=r.length-e.length,t/a}function rse(){var e=[...arguments],t,r,n,i;if(Lr(e[0]))return 1-T1(e[0],e[1],e[2]);var o=o(e);for(t=e.length-1,n=0,i=0;i<e.length;i++)n=n+e[i].length;return r=n-t-1,1-T1(o,t,r)}function nse(e,t,r){return 1-T1(e,t,r)}function XT(){var e=[...arguments],t,r,n,i,o;return Lr(e[0])?(t=e[0],r=e[1],n=e[2],i=e[3],o=e[4]):(t=fr(e[0]),r=fr(e[1]),n=e[0].length,i=e[1].length,o=e[2]),Math.abs(t-r)/(o*Math.sqrt((1/n+1/i)/2))}function qW(){var e=[...arguments],t;e.length===3?(t=e[0],e=e.slice(1)):e.length===7?(t=XT(e[0],e[1],e[2],e[3],e[4]),e=e.slice(5)):(t=XT(e[0],e[1],e[2]),e=e.slice(3));var r=e[0],n=e[1];return 1-Dd(t,n,r-n)}function ise(e){for(var t=FW(e),r=e.map(l=>fr(l)),n=e.reduce((l,u)=>l+u.length,0),i=[],o=0;o<e.length;++o)for(var a=o+1;a<e.length;++a){var s=qW(r[o],r[a],e[o].length,e[a].length,t,n,e.length);i.push([[o,a],s])}return i}function ose(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(WT(e[1]/2,0,1)*e[2]/Math.sqrt(e[3])):r=Math.abs(WT(e[1]/2,0,1)*ka(e[2])/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function ase(){const e=[...arguments],t=new Array(2);let r;return e.length===4?r=Math.abs(k1(e[1]/2,e[3]-1)*e[2]/Math.sqrt(e[3])):r=Math.abs(k1(e[1]/2,e[2].length-1)*ka(e[2],!0)/Math.sqrt(e[2].length)),t[0]=e[0]-r,t[1]=e[0]+r,t}function sse(e,t){return e<t}function ZW(e,t,r,n){if(e>1||r>1||e<=0||r<=0)throw new Error("Proportions should be greater than 0 and less than 1");var i=(e*t+r*n)/(t+n),o=Math.sqrt(i*(1-i)*(1/t+1/n));return(e-r)/o}function lse(e,t,r,n){const i=ZW(e,t,r,n);return bC(i,1)}function use(e,t,r,n){const i=ZW(e,t,r,n);return bC(i,2)}const cse=Object.freeze(Object.defineProperty({__proto__:null,zscore:jT,ztest:bC,tscore:HT,ttest:tse,anovafscore:ese,anovaftest:rse,ftest:nse,qscore:XT,qtest:qW,tukeyhsd:ise,normalci:ose,tci:ase,significant:sse,oneSidedDifferenceOfProportions:lse,twoSidedDifferenceOfProportions:use},Symbol.toStringTag,{value:"Module"}));function Ui(e){return Do(e)||e.constructor.name==="jStat"}function gn(e,t){return Ui(t)?(Ui(t[0])||(t=[t]),sn(e,function(r,n,i){return r+t[n][i]})):sn(e,function(r){return r+t})}function uu(e,t){return Ui(t)?(Ui(t[0])||(t=[t]),sn(e,function(r,n,i){return r-t[n][i]||0})):sn(e,function(r){return r-t})}function YT(e,t){return Ui(t)?(Ui(t[0])||(t=[t]),te(e,Fo(t))):sn(e,function(r){return r/t})}function te(e,t){let r,n;if(e.length===void 0&&t.length===void 0)return e*t;const i=e.length,o=e[0].length,a=zo(i,r=Ui(t)?t[0].length:o);let s=0;if(Ui(t)){for(;s<r;s++)for(let l=0;l<i;l++){n=0;for(let u=0;u<o;u++)n+=e[l][u]*t[u][s];a[l][s]=n}return i===1&&s===1?a[0][0]:a}return sn(e,function(l){return l*t})}function fse(e,t){return te(e.map(r=>[r]),[t])}function P1(e,t){Ui(e[0])||(e=[e]),Ui(t[0])||(t=[t]);var r=e[0].length===1&&e.length!==1?Ps(e):e,n=t[0].length===1&&t.length!==1?Ps(t):t,i=[],o=r.length,a=r[0].length,s,l;for(let u=0;u<o;u++){for(i[u]=[],s=0,l=0;l<a;l++)s+=r[u][l]*n[u][l];i[u]=s}return i.length===1?i[0]:i}function qT(e,t){return sn(e,r=>Math.pow(r,t))}function hse(e){return sn(e,t=>Math.exp(t))}function dse(e){return sn(e,t=>Math.log(t))}function pse(e){return sn(e,t=>Math.abs(t))}function af(e,t){var r=0,n=0;for(isNaN(t)&&(t=2),Ui(e[0])&&(e=e[0]);n<e.length;n++)r+=Math.pow(Math.abs(e[n]),t);return Math.pow(r,1/t)}function vse(e,t){return Math.acos(P1(e,t)/(af(e)*af(t)))}function wC(e,t){var r=[],n;for(n=0;n<e.length;n++)r.push(e[n].slice());for(n=0;n<r.length;n++)Array.prototype.push.apply(r[n],t[n]);return r}function Fo(e){for(var t=e.length,r=e[0].length,n=lu(t,r),i=KW(e,n),o=[],a=0,s;a<t;a++)for(o[a]=[],s=r;s<i[0].length;s++)o[a][s-r]=i[a][s];return o}function gse(e){var t=e.length,r=t*2,n=new Array(r),i=t-1,o=r-1,a=i-t+1,s=o,l=0,u=0,c;if(t===2)return e[0][0]*e[1][1]-e[0][1]*e[1][0];for(;l<r;l++)n[l]=1;for(l=0;l<t;l++){for(c=0;c<t;c++)n[a<0?a+t:a]*=e[l][c],n[s<t?s+t:s]*=e[l][c],a++,s--;a=--i-t+1,s=--o}for(l=0;l<t;l++)u+=n[l];for(;l<r;l++)u-=n[l];return u}function mse(e,t){var r=0,n=0,i=e.length,o=e[0].length,a=1,s=0,l=[],u,c,f,h;for(e=wC(e,t),u=e[0].length,r=0;r<i;r++){for(c=e[r][r],n=r,h=r+1;h<o;h++)c<Math.abs(e[h][r])&&(c=e[h][r],n=h);if(n!=r)for(h=0;h<u;h++)f=e[r][h],e[r][h]=e[n][h],e[n][h]=f;for(n=r+1;n<i;n++)for(a=e[n][r]/e[r][r],h=r;h<u;h++)e[n][h]=e[n][h]-a*e[r][h]}for(r=i-1;r>=0;r--){for(s=0,n=r+1;n<=i-1;n++)s=s+l[n]*e[r][n];l[r]=(e[r][u-1]-s)/e[r][r]}return l}function KW(e,t){var r=wC(e,t),n=r.length,i=r[0].length,o=0,a,s,l;for(s=0;s<n;s++){var u=s;for(l=s+1;l<n;l++)Math.abs(r[l][s])>Math.abs(r[u][s])&&(u=l);var c=r[s];for(r[s]=r[u],r[u]=c,l=s+1;l<n;l++)for(o=r[l][s]/r[s][s],a=s;a<i;a++)r[l][a]-=r[s][a]*o}for(s=n-1;s>=0;s--){for(o=r[s][s],l=0;l<s;l++)for(a=i-1;a>s-1;a--)r[l][a]-=r[s][a]*r[l][s]/o;for(r[s][s]/=o,a=n;a<i;a++)r[s][a]/=o}return r}function _se(e,t){var r=e[0].length,n=zo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Oe(r-1,-1,-1).forEach(function(a){i=Oe(a+1,r).map(function(s){return n[s]*e[a][s]}),n[a]=(t[a]-ln(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function yse(e,t){var r=e[0].length,n=zo(1,r)[0],i,o=!1;return t[0].length!=null&&(t=t.map(function(a){return a[0]}),o=!0),Oe(r).forEach(function(a){i=Oe(a).map(function(s){return e[a][s]*n[s]}),n[a]=(t[a]-ln(i))/e[a][a]}),o?n.map(function(a){return[a]}):n}function bse(e){var t=e.length,r=lu(t),n=zo(e.length,e[0].length),i;return Oe(t).forEach(function(o){n[0][o]=e[0][o]}),Oe(1,t).forEach(function(o){Oe(o).forEach(function(a){i=Oe(a).map(function(s){return r[o][s]*n[s][a]}),r[o][a]=(e[o][a]-ln(i))/n[a][a]}),Oe(o,t).forEach(function(a){i=Oe(o).map(function(s){return r[o][s]*n[s][a]}),n[o][a]=e[i.length][a]-ln(i)})}),[r,n]}function wse(e){var t=e.length,r=zo(e.length,e[0].length),n;return Oe(t).forEach(function(i){n=Oe(i).map(function(o){return Math.pow(r[i][o],2)}),r[i][i]=Math.sqrt(e[i][i]-ln(n)),Oe(i+1,t).forEach(function(o){n=Oe(i).map(function(a){return r[i][a]*r[o][a]}),r[o][i]=(e[i][o]-ln(n))/r[i][i]})}),r}function Sse(e,t,r,n){for(var i=0,o=0,a=e.length,s=[],l=[],u=[],c,f,h,d;i<a;i++)for(s[i]=[],l[i]=[],u[i]=[],o=0;o<a;o++)i>o?(s[i][o]=e[i][o],l[i][o]=u[i][o]=0):i<o?(l[i][o]=e[i][o],s[i][o]=u[i][o]=0):(u[i][o]=e[i][o],s[i][o]=l[i][o]=0);for(h=te(te(Fo(u),gn(s,l)),-1),f=te(Fo(u),t),c=r,d=gn(te(h,r),f),i=2;Math.abs(af(uu(d,c)))>n;)c=d,d=gn(te(h,c),f),i++;return d}function Tse(e,t,r,n){for(var i=0,o=e.length,a=[],s=[],l=[],u,c,f,h,d;i<o;i++)for(a[i]=[],s[i]=[],l[i]=[],u=0;u<o;u++)i>u?(a[i][u]=e[i][u],s[i][u]=l[i][u]=0):i<u?(s[i][u]=e[i][u],a[i][u]=l[i][u]=0):(l[i][u]=e[i][u],a[i][u]=s[i][u]=0);for(h=te(te(Fo(gn(l,a)),s),-1),f=te(Fo(gn(l,a)),t),c=r,d=gn(te(h,r),f),i=2;Math.abs(af(uu(d,c)))>n;)c=d,d=gn(te(h,c),f),i=i+1;return d}function kse(e,t,r,n,i){for(var o=0,a=e.length,s=[],l=[],u=[],c,f,h,d,p;o<a;o++)for(s[o]=[],l[o]=[],u[o]=[],c=0;c<a;c++)o>c?(s[o][c]=e[o][c],l[o][c]=u[o][c]=0):o<c?(l[o][c]=e[o][c],s[o][c]=u[o][c]=0):(u[o][c]=e[o][c],s[o][c]=l[o][c]=0);for(d=te(Fo(gn(u,te(s,i))),uu(te(u,1-i),te(l,i))),h=te(te(Fo(gn(u,te(s,i))),t),i),f=r,p=gn(te(d,r),h),o=2;Math.abs(af(uu(p,f)))>n;)f=p,p=gn(te(d,f),h),o++;return p}function Pse(e){for(var t=e.length,r=e[0].length,n=0,i=[],o=[],a,s,l,u,c;n<t-1;n++){for(a=0,u=n+1;u<r;u++)a+=e[u][n]*e[u][n];for(c=e[n+1][n]>0?-1:1,a=c*Math.sqrt(a),s=Math.sqrt((a*a-e[n+1][n]*a)/2),i=zo(t,1),i[n+1][0]=(e[n+1][n]-a)/(2*s),l=n+2;l<t;l++)i[l][0]=e[l][n]/(2*s);o=uu(lu(t,r),te(te(i,Ps(i)),2)),e=te(o,te(e,o))}return e}function JW(e){var t=e.length,r=e[0].length,n=zo(r,r);e=K_(e);var i,o,a;for(o=0;o<r;o++){for(n[o][o]=Math.sqrt(ln(Oe(t).map(function(s){return e[s][o]*e[s][o]}))),i=0;i<t;i++)e[i][o]=e[i][o]/n[o][o];for(a=o+1;a<r;a++)for(n[o][a]=ln(Oe(t).map(function(s){return e[s][o]*e[s][a]})),i=0;i<t;i++)e[i][a]=e[i][a]-e[i][o]*n[o][a]}return[e,n]}function Ese(e){e=K_(e);var t=e.length,r=lu(t);return Oe(t-1,-1,-1).forEach(function(n){id(r,{row:n},YT(na(r,{row:n}),e[n][n])),id(e,{row:n},YT(na(e,{row:n}),e[n][n])),Oe(n).forEach(function(i){var o=te(e[i][n],-1),a=na(e,{row:i}),s=te(na(e,{row:n}),o);id(e,{row:i},gn(a,s));var l=na(r,{row:i}),u=te(na(r,{row:n}),o);id(r,{row:i},gn(l,u))})}),r}function QW(e,t){var r=!1;t[0].length===void 0&&(t=t.map(function(f){return[f]}),r=!0);var[n,i]=JW(e),o=e[0].length,a=na(n,{col:{end:o}}),s=na(i,{row:{end:o}}),l=Ese(s),u=Ps(a);u[0].length===void 0&&(u=[u]);var c=te(te(l,u),t);return c.length===void 0&&(c=[[c]]),r?c.map(function(f){return f[0]}):c}function tG(e){for(var t=1,r=e.length,n=lu(r,r),i=[],o,a,s,l,u,c,f,h;t===1;){for(c=e[0][1],l=0,u=1,a=0;a<r;a++)for(s=0;s<r;s++)a!=s&&c<Math.abs(e[a][s])&&(c=Math.abs(e[a][s]),l=a,u=s);for(e[l][l]===e[u][u]?f=e[l][u]>0?Math.PI/4:-Math.PI/4:f=Math.atan(2*e[l][u]/(e[l][l]-e[u][u]))/2,h=lu(r,r),h[l][l]=Math.cos(f),h[l][u]=-Math.sin(f),h[u][l]=Math.sin(f),h[u][u]=Math.cos(f),n=te(n,h),o=te(te(Fo(h),e),h),e=o,t=0,a=1;a<r;a++)for(s=1;s<r;s++)a!=s&&Math.abs(e[a][s])>.001&&(t=1)}for(a=0;a<r;a++)i.push(e[a][a]);return[n,i]}function Cse(e,t,r,n,i,o){var a,s,l,u,c;if(o===2)for(;n<=r;)a=t*e(n,i),s=t*e(n+t,i+a),l=i+(a+s)/2,i=l,n=n+t;if(o===4)for(;n<=r;)a=t*e(n,i),s=t*e(n+t/2,i+a/2),u=t*e(n+t/2,i+s/2),c=t*e(n+t,i+u),l=i+(a+2*s+2*u+c)/6,i=l,n=n+t;return i}function Ase(e,t,r,n){for(var i=0,o=(r-t)/2,a=[],s=[],l=[],u,c,f,h,d;i<n/2;){for(d=e(t),f=t,h=0;f<=r;f=f+o,h++)a[h]=f;for(u=a.length,f=1;f<u-1;f++)d+=(f%2!==0?4:2)*e(a[f]);d=o/3*(d+e(r)),l[i]=d,o/=2,i++}for(c=l.length,u=1;c!==1;){for(f=0;f<c-1;f++)s[f]=(Math.pow(4,u)*l[f+1]-l[f])/(Math.pow(4,u)-1);c=s.length,l=s,s=[],u++}return l}function Mse(e,t,r,n){function i(p,v){for(var m=0,g=p.length,_;m<g;m++)p[m]===v&&(_=m);return _}for(var o=Math.abs(r-e[i(e,r)+1]),a=0,s=[],l=[],u,c,f,h,d;n>=o;)u=i(e,r+n),c=i(e,r),s[a]=(t[u]-2*t[c]+t[2*c-u])/(n*n),n/=2,a++;for(h=s.length,f=1;h!=1;){for(d=0;d<h-1;d++)l[d]=(Math.pow(4,f)*s[d+1]-s[d])/(Math.pow(4,f)-1);h=l.length,s=l,l=[],f++}return s}function xse(e,t,r,n){for(var i=(r-t)/n,o=e(t),a=[],s=t,l=0,u=1,c;s<=r;s=s+i,l++)a[l]=s;for(c=a.length;u<c-1;u++)o+=(u%2!==0?4:2)*e(a[u]);return i/3*(o+e(r))}function Lse(e,t,r,n){for(var i=e.length,o=0,a=0,s=[],l=[],u=[],c=[],f;a<i;a++){for(s[a]=1,f=0;f<i;f++)a!=f&&(s[a]*=(n-e[f])/(e[a]-e[f]));for(l[a]=0,f=0;f<i;f++)a!=f&&(l[a]+=1/(e[a]-e[f]));u[a]=(1-2*(n-e[a])*l[a])*(s[a]*s[a]),c[a]=(n-e[a])*(s[a]*s[a]),o+=u[a]*t[a]+c[a]*r[a]}return o}function Ise(e,t,r){for(var n=0,i=0,o,a,s=e.length;i<s;i++){for(a=t[i],o=0;o<s;o++)i!=o&&(a*=(r-e[o])/(e[i]-e[o]));n+=a}return n}function Ose(e,t,r){for(var n=e.length,i=0,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[];i<n-1;i++)c[i]=e[i+1]-e[i];for(l[0]=0,i=1;i<n-1;i++)l[i]=3/c[i]*(t[i+1]-t[i])-3/c[i-1]*(t[i]-t[i-1]);for(i=1;i<n-1;i++)a[i]=[],s[i]=[],a[i][i-1]=c[i-1],a[i][i]=2*(c[i-1]+c[i]),a[i][i+1]=c[i],s[i][0]=l[i];for(u=te(Fo(a),s),o=0;o<n-1;o++)f[o]=(t[o+1]-t[o])/c[o]-c[o]*(u[o+1][0]+2*u[o][0])/3,h[o]=(u[o+1][0]-u[o][0])/(3*c[o]);for(o=0;o<n&&!(e[o]>r);o++);return o-=1,t[o]+(r-e[o])*f[o]+qT(r-e[o],2)*u[o]+(r-e[o])*qT(r-e[o],2)*h[o]}function Rse(){throw new Error("gauss_quadrature not yet implemented")}function Dse(e){var t=e.length,r=e[0].length,n=0,i,o,a=[],s=[],l=[],u=[],c=[],f=[],h=[],d=[],p=[],v=[];for(n=0;n<t;n++)a[n]=ln(e[n])/r;for(n=0;n<r;n++)for(h[n]=[],i=0;i<t;i++)h[n][i]=e[i][n]-a[i];for(h=Ps(h),n=0;n<t;n++)for(d[n]=[],i=0;i<t;i++)d[n][i]=P1([h[n]],[h[i]])/(r-1);for(l=tG(d),p=l[0],s=l[1],v=Ps(p),n=0;n<s.length;n++)for(i=n;i<s.length;i++)s[n]<s[i]&&(o=s[n],s[n]=s[i],s[i]=o,u=v[n],v[n]=v[i],v[i]=u);for(f=Ps(h),n=0;n<t;n++)for(c[n]=[],i=0;i<f.length;i++)c[n][i]=P1([v[n]],[f[i]]);return[e,s,v,c]}const Nse=Object.freeze(Object.defineProperty({__proto__:null,add:gn,subtract:uu,divide:YT,multiply:te,outer:fse,dot:P1,pow:qT,exp:hse,log:dse,abs:pse,norm:af,angle:vse,aug:wC,inv:Fo,det:gse,gauss_elimination:mse,gauss_jordan:KW,triaUpSolve:_se,triaLowSolve:yse,lu:bse,cholesky:wse,gauss_jacobi:Sse,gauss_seidel:Tse,SOR:kse,householder:Pse,QR:JW,lstsq:QW,jacobi:tG,rungekutta:Cse,romberg:Ase,richardson:Mse,simpson:xse,hermite:Lse,lagrange:Ise,cubic_spline:Ose,gauss_quadrature:Rse,PCA:Dse},Symbol.toStringTag,{value:"Module"}));function Fse(e){var t=e[0].length,r=Oe(t).map(function(n){var i=Oe(t).filter(function(o){return o!==n});return eG(w1(e,n).map(function(o){return o[0]}),w1(e,i))});return r}function eG(e,t){var r=e.length,n=t[0].length-1,i=r-n-1,o=QW(t,e),a=te(t,o.map(function(d){return[d]})).map(function(d){return d[0]}),s=uu(e,a),l=fr(e),u=ln(a.map(function(d){return Math.pow(d-l,2)})),c=ln(e.map(function(d,p){return Math.pow(d-a[p],2)})),f=u+c,h=u/f;return{exog:t,endog:e,nobs:r,df_model:n,df_resid:i,coef:o,predict:a,resid:s,ybar:l,SST:f,SSE:u,SSR:c,R2:h}}function $se(e){var t=Fse(e.exog),r=Math.sqrt(e.SSR/e.df_resid),n=t.map(function(l){var u=l.SST,c=l.R2;return r/Math.sqrt(u*(1-c))}),i=e.coef.map(function(l,u){return(l-0)/n[u]}),o=i.map(function(l){var u=ia(l,e.df_resid);return(u>.5?1-u:u)*2}),a=k1(.975,e.df_resid),s=e.coef.map(function(l,u){var c=a*n[u];return[l-c,l+c]});return{se:n,t:i,p:o,sigmaHat:r,interval95:s}}function Bse(e){var t=e.R2/e.df_model/((1-e.R2)/e.df_resid),r=function(i,o,a){return S1(i/(a/o+i),o/2,a/2)},n=1-r(t,e.df_model,e.df_resid);return{F_statistic:t,pvalue:n}}function zse(e,t){var r=eG(e,t),n=$se(r),i=Bse(r),o=1-(1-r.R2)*((r.nobs-1)/r.df_resid);return r.t=n,r.f=i,r.adjust_R2=o,r}const Vse={ols:zse},Use=Object.freeze(Object.defineProperty({__proto__:null,models:Vse},Symbol.toStringTag,{value:"Module"}));Object.assign(dt,Rne,nie,cse,Nse,Use,Tie);for(const[e,t]of Object.entries(Qae)){let r=function(...n){return this instanceof r?(this.givenArgs=n,this):new r(...n)};Object.assign(r,t),dt[e]=r,dt.prototype[e]=function(...n){const i=r(...n);return i.data=this,i},r.prototype.sample=function(n){const i=this.givenArgs;return n?dt.alter(n,()=>t.sample(...i)):t.sample(...i)},["pdf","cdf","inv"].forEach(n=>{r.prototype[n]=function(i){return!i&&i!==0&&(i=this.data),typeof i!="number"?dt.map(i,o=>t[n](o,...this.givenArgs)):t[n](i,...this.givenArgs)}}),["mean","median","mode","variance"].forEach(n=>{r.prototype[n]=function(){return t[n](...this.givenArgs)}})}"gammaln gammafn factorial factorialln".split(" ").forEach(function(e){dt.prototype[e]=function(){return dt(dt.map(this,function(t){return dt[e](t)}))}});dt.prototype.randn=function(){return dt(dt.randn.apply(null,arguments))};const SC=CW.isFunction;(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(SC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(s=n===!0?this:this.transpose();a<s.length;a++)o[a]=dt[r](s[a]);return o}return dt[r](this[0],n)}})(e[t])})("cumsum cumprod".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(n,i){var o=[],a=0,s=this;if(SC(n)&&(i=n,n=!1),i)return setTimeout(function(){i.call(s,dt.prototype[r].call(s,n))}),this;if(this.length>1){for(r!=="sumrow"&&(s=n===!0?this:this.transpose());a<s.length;a++)o[a]=dt[r](s[a]);return n===!0?dt[r](dt.utils.toVector(o)):o}return dt[r](this[0],n)}})(e[t])})("sum sumsqrd sumsqerr sumrow product min max unique mean meansqerr geomean median diff rank mode range variance deviation stdev meandev meddev coeffvar quartiles histogram skewness kurtosis".split(" "));(function(e){for(var t=0;t<e.length;t++)(function(r){dt.prototype[r]=function(){var n=[],i=0,o=this,a=Array.prototype.slice.call(arguments),s;if(SC(a[a.length-1])){s=a[a.length-1];var l=a.slice(0,a.length-1);return setTimeout(function(){s.call(o,dt.prototype[r].apply(o,l))}),this}else{s=void 0;var u=function(f){return dt[r].apply(o,[f].concat(a))}}if(this.length>1){for(o=o.transpose();i<o.length;i++)n[i]=u(o[i]);return n}return u(this[0])}})(e[t])})("quantiles percentileOfScore".split(" "));dt.prototype.zscore=function(t,r){return(t-this.mean())/this.stdev(r)};dt.prototype.ztest=function(t,r,n){const i=Math.abs(this.zscore(t,n));return r===1?dt.normal.cdf(-i,0,1):dt.normal.cdf(-i,0,1)*2};dt.prototype.tscore=function(t){return(t-this.mean())/(this.stdev(!0)/Math.sqrt(this.cols()))};dt.prototype.ttest=function(t,r){return r===1?1-dt.studentt.cdf(Math.abs(this.tscore(t)),this.cols()-1):dt.studentt.cdf(-Math.abs(this.tscore(t)),this.cols()-1)*2};dt.prototype.anovafscore=function(){return dt.anovafscore(this.toArray())};dt.prototype.anovaftes=function(){var t=0,r;for(r=0;r<this.length;r++)t=t+this[r].length;return dt.ftest(this.anovafscore(),this.length-1,t-this.length)};dt.prototype.oneSidedDifferenceOfProportions=function(){console.error("Please use jStat.oneSidedDifferenceOfProportions() instead")};dt.prototype.twoSidedDifferenceOfProportions=function(){console.error("Please use jStat.twoSidedDifferenceOfProportions() instead")};"add divide multiply subtract dot pow exp log abs norm angle".split(" ").forEach(e=>{dt.prototype[e]=function(t,r){const n=this;return r?(r.call(n,dt.prototype[e].call(n,t)),this):typeof dt[e](this,t)=="number"?dt[e](this,t):dt(dt[e](this,t))}});dt.jStat=dt;function TC(e,t,r,n){if(n)return Wse(e,t,r);const i=t;let o=[];for(let a=0;a<=r;a++){const s=dt.binomial.pdf(a,r,e/r);if(s<0)return null;const l=s*i;l<.01||o.push([a,l])}return o}function Wse(e,t,r){const n=t;let i=[],o=0;for(let a=0;a<=r;a++){const s=dt.binomial.pdf(a,r,e/r);if(s<0)return null;const l=s*n;if(l<.01)continue;const u=Math.floor(a*1.684);if(o)for(let c=o;c<u;c++)i.push([c,0]);i.push([u,l]),o=u+1}return i}function Gse(e,t,r,n,i,o){let a=[],s=0;for(let p=0;p<=i;p++){const v=dt.binomial.pdf(p,i,e/i);if(v<0){a=null;break}const m=v*t;if(m<.01)continue;const g=Math.floor(p*1.684);if(s)for(let _=s;_<g;_++)a.push([_,0]);a.push([g,m]),s=g+1}const l=n/t,u={};for(let p=0;p<=i;p++){const v=dt.binomial.pdf(p,i,r/i);if(v<0)throw Error(`invalid arguments for Stat.binomial.pdf: ${p}, ${i}, ${r/i}`);if(v*n<.01)continue;const g=o?Math.floor(p*1.684):p;a.forEach(_=>{const[b,w]=_,T=b+g,S=w*v*l;T in u?u[T]+=S:u[T]=S})}let c=99,f=0;for(const[p,v]of Object.entries(u)){if(v<.01)continue;const m=parseInt(p);m<c&&(c=m),m>f&&(f=m)}const h=[];for(let p=c;p<=f;p++)if(p in u){const v=u[p];h.push([p,v])}else h.push([p,0]);return{bellU:a,bellL:h}}function jse(e,t){let r={};if(e)for(let[o,a]of e)r[o]=a;for(let[o,a]of t)o in r?r[o]+=a:r[o]=a;let n=Object.entries(r).sort((o,a)=>o[0]-a[0]),i=[];for(let[o,a]of n)i.push([o,a]);return i}function kC(e,t,r,n,i){if(n)throw Error("not implemented");return Hse(e,t,r,i)}function Hse(e,t,r,n){let i,o,a;if(!Object.keys(e).length)return{mse:i,chisq:o,pval:a};i=0;for(const[p,[v,m]]of Object.entries(e)){const g=parseInt(v);if(n&&g==0)continue;const _=g in t?t[g]:0,b=m-_;i+=b*b}const s=3,l=r+2,u=Object.keys(e).sort((p,v)=>e[v][1]-e[p][1]);let c={},f=0;if(u.forEach(p=>{const v=e[p][0];if(n&&v=="0")return;const m=e[p][1],g=v in t?t[v]:0;(m>=s||g>=s||f<l)&&(c[v]={y_model:m,y_observed:g},f++)}),Object.keys(c).length==0)return console.log("can't compute chiSquared: only",c,"bins left after discard"),{mse:i,chisq:o,pval:a};let d=0;o=0;for(const[p,{y_model:v,y_observed:m}]of Object.entries(c)){const g=v-m;o+=g*g/v,d++}return d-1-r<1?(console.log("can't compute pval: bins",d,"variables",r),{mse:i,chisq:o,pval:a}):(isFinite(o)?a=1-dt.chisquare.cdf(o,d-1-r):a=0,{mse:i,chisq:o,pval:a})}function rG(e){e.forEach(t=>{t[0]=Math.floor(t[0]*1.684)})}Yr([_f,__,Bp,zp,wf,bf,Sf,Vp,w_,b_,y_,Up]);const Xse={data:()=>({selected_np:1,selected_n:10,isBinary:!1}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Tf},methods:{formatFixed:wt,isGoodVal:Ei,formatKMG:wk,makeBinomialArray:TC,loss:kC,applyGiantBonus:rG,makeModelA(e,t){let r={np:e,n:t};if(r.bell=this.makeBinomialArray(e,this.stats.len,t,this.isGiant),!r.bell)return null;if(r.loss=this.loss(r.bell,this.histogram.map,2),this.isBinary=0 in r.bell&&1 in r.bell&&Object.keys(r.bell).length==2&&0 in this.histogram.map&&1 in this.histogram.map&&Object.keys(this.histogram.map).length==2,this.isBinary){const n=this.stats.lucky.len,i=r.bell[1][1],o=this.histogram.map[1],a=i/n;o<=n&&0<a&&a<1?(r.loss.binomtest=fC(o,Math.round(n),{p:a}),r.loss.pval=r.loss.binomtest.pValue,console.log("binomtest:",r.bell,this.histogram.map,o,n,a,r.loss.binomtest)):(console.log("can't binomtest",r.bell,this.histogram.map,o,n,a),r.loss.binomtest=NaN)}return r},tuneModelA(e,t,r){let n=[t];t===void 0&&(n=[1,10,20,40,110,120,140,150],n=n.filter(o=>o>=e&&o<=this.stats.max*5),r&&n.push(r));let i={n:NaN,loss:{mse:NaN,chisq:NaN,pval:NaN}};return n.forEach(o=>{const a=this.makeModelA(e,o);if(!a)return;Ei(a.loss.mse)&&(!Ei(i.loss.mse)||a.loss.mse<i.loss.mse)&&(i=a)}),i},applySelectedNP(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{modelA(){return this.makeModelA(this.selected_np,this.selected_n)},modelAForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelA.bell.forEach(([n,i])=>{const o=i/e,a=t*Math.sqrt(o*(1-o)/e),s=Math.max(0,o-a)*e,l=Math.min(1,o+a)*e;r.push([n,i,s,l])}),r},sweepRange(){const e={lo:Math.max(0,this.stats.meanLo),init:this.stats.mean,hi:this.stats.meanHi};return this.isGiant&&(e.init>40?(e.lo/=1.684,e.init/=1.684,e.hi/=1.684):e.init>20?(e.lo/=1.684,e.init/=1.684,e.hi/=1.6):e.init>10?(e.lo/=1.684,e.init/=1.684,e.hi/=1.5):e.init>5?(e.lo/=1.684,e.init/=1.684,e.hi/=1.3):e.init>1&&(e.lo/=1.684,e.init/=1.684,e.hi/=1)),e.range=e.hi-e.lo,e},modelASweep(){const e=this.tuneModelA(this.sweepRange.init,void 0);let t=10;const r=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const a of r)if(Math.floor(this.sweepRange.range/a)<20){t=a;break}const n=Math.ceil(this.sweepRange.lo/t)*t;let i=e;const o=[];for(let a=n;a<=this.sweepRange.hi;a+=t){let s=this.tuneModelA(a,void 0);a>this.sweepRange.init&&a<this.sweepRange.init+t&&o.push([this.sweepRange.init,s.n,e.loss.mse,e.loss.chisq,e.loss.pval]),o.push([a,s.n,s.loss.mse,s.loss.chisq,s.loss.pval]),s.loss.mse<i.loss.mse&&(i=s)}return isFinite(i.loss.mse)&&(this.selected_np=i.np,this.selected_n=i.n),{result:i,log:o}},makeChartHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogram.arr},{source:this.modelAForChart}],xAxis:{axisLine:{onZero:!1},min:this.stats.min==0?-1:null,max:this.stats.max<3?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>wt(t,0)}},{type:"line",name:"model",datasetIndex:1,encode:{x:0,y:1},tooltip:{valueFormatter:t=>wt(t,0)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:2},tooltip:{valueFormatter:t=>wt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:1,encode:{x:0,y:3},tooltip:{valueFormatter:t=>wt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}}]}},makeChartASweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${wt(r[0],2)}<br/>n=${wt(r[1],2)}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${wt(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelASweep.log}],xAxis:{min:this.sweepRange.lo,max:this.sweepRange.hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})},splitLine:{show:!1}},{position:"right",axisLabel:{formatter:t=>t.toLocaleString(void 0,{notation:"compact"})}}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>wt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>wt(t,4)},yAxisIndex:1}]};return console.log("makeChartASweep",e.dataset),e}}},Or=e=>(Xe("data-v-1a96015c"),e=e(),Ye(),e),Yse=Or(()=>y("span",{class:"title"},"Model A",-1)),qse=Or(()=>y("span",null,[N(": all points were taken from a single distribution with "),y("i",null,"np = M")],-1)),Zse=N(" with giant bonus"),Kse={key:0},Jse={style:{float:"left"}},Qse=N(" Sweeping through "),tle=Or(()=>y("i",null,"np",-1)),ele={key:0,id:"chartSweep"},rle={key:1},nle={style:{padding:"1em"}},ile=Or(()=>y("th",null,null,-1)),ole=Or(()=>y("th",null,"np",-1)),ale=Or(()=>y("th",null,"n",-1)),sle=Or(()=>y("th",null,"MSE",-1)),lle=Or(()=>y("th",null,"p-val",-1)),ule=Or(()=>y("td",null,"Best fit:",-1)),cle=Or(()=>y("td",null,"Manual:",-1)),fle=N(" np: "),hle=["value","min","max","step"],dle=N(" n: "),ple=["value","min"],vle=Or(()=>y("br",null,null,-1)),gle={id:"chartHisto",style:{float:"left"}},mle=Or(()=>y("div",{style:{clear:"both"}},null,-1)),_le=Or(()=>y("br",null,null,-1)),yle=Or(()=>y("p",{class:"fsxs"},[N("MSE: "),y("i",null,"\u03A3 (observed - model)\xB2"),N(", discard nothing \u2190 this is used for fitting")],-1)),ble={key:0,class:"fsxs"},wle=N("p-val: "),Sle=Or(()=>y("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),Tle=[wle,Sle],kle=Or(()=>y("p",{class:"fsxs"},[N("\u03C7\xB2: discard bins where model < 3, then "),y("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Ple=Or(()=>y("p",{class:"fsxs"},[N("p-val: "),y("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Ele(e,t,r,n,i,o){const a=Qt("v-chart");return I(),O(j,null,[Yse,qse,y("p",null,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[sr,r.isGiant]]),Zse]),r.isGiant?(I(),O("p",Kse,"This causes gaps in Unlucky distrubution because giantValue=floor(1.684*ordinaryValue);")):tt("",!0),y("div",null,[y("div",Jse,[Qse,tle,N(" values in "+A(o.formatFixed(this.sweepRange.lo,2))+"\u2026"+A(o.formatFixed(this.sweepRange.hi,2))+" range: ",1),o.modelASweep.result.np?(I(),O("div",ele,[Et(a,{option:o.makeChartASweep},null,8,["option"])])):(I(),O("div",rle," [failed] ")),y("div",nle,[y("table",null,[y("tr",null,[ile,ole,ale,sle,tt("",!0),lle]),o.modelASweep.result?(I(),O("tr",{key:0,class:xr({strike:r.stats.aBad})},[ule,y("td",null,A(o.formatFixed(o.modelASweep.result.np,4)),1),y("td",null,A(o.formatFixed(o.modelASweep.result.n)),1),y("td",null,A(o.formatFixed(o.modelASweep.result.loss.mse,2)),1),tt("",!0),y("td",null,A(o.formatFixed(o.modelASweep.result.loss.pval,4)),1)],2)):tt("",!0),y("tr",null,[cle,y("td",null,A(o.formatFixed(e.selected_np,4)),1),y("td",null,A(e.selected_n),1),y("td",null,A(o.formatFixed(o.modelA.loss.mse,2)),1),tt("",!0),y("td",null,A(o.formatFixed(o.modelA.loss.pval,4)),1)])]),fle,y("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedNP(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,hle),dle,y("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:r.stats.max,max:200,step:1,class:"vmid"},null,40,ple),vle])]),y("div",gle,[o.modelA.bell?(I(),xo(a,{key:0,option:o.makeChartHist},null,8,["option"])):(I(),O(j,{key:1},[N(" [failed to build the requested distribution np="+A(o.modelA.np)+" n="+A(o.modelA.n)+" ] ",1)],64))]),mle,_le,yle,e.isBinary?(I(),O("p",ble,Tle)):(I(),O(j,{key:1},[kle,Ple],64))])],64)}const Cle=be(Xse,[["render",Ele],["__scopeId","data-v-1a96015c"]]);Yr([_f,__,Bp,zp,aut,wf,bf,Sf,Vp,w_,b_,y_,Up]);const Ale={data:()=>({selected_np:1,selected_n:10,sweep_lo:0,sweep_hi:1}),props:{stats:Object,histogram:Object},components:{VChart:Tf},methods:{isGoodVal:Ei,formatFixed:wt,formatKMG:wk,makeBinomialArray:TC,loss:kC,makeModelB(e,t){const r=this.makeBinomialArray(e,this.stats.lucky.len,t);if(!r)return null;const n={np:e,n:t,bell:r},i=this.histogram.map,o=this.histogramLuckOnly.err[0][1],a=this.histogramLuckOnly.err[0][2];if(r[0]<o){const l={...i};l[0]=o,n.loss=this.loss(n.bell,l,2,!1)}else if(r[0]>a){const l={...i};l[0]=a,n.loss=this.loss(n.bell,l,2,!1)}else{const l={...i};delete l[0],n.loss=this.loss(n.bell,l,2,!1,!0)}if(0 in r&&1 in r&&Object.keys(r).length==2&&0 in i&&1 in i&&Object.keys(i).length==2){const l=this.stats.lucky.len,u=r[1][1],c=i[1],f=u/l;c<=l&&0<f&&f<1?(n.loss.binomtest=fC(c,Math.round(l),{p:f}),n.loss.pval=n.loss.binomtest.pValue,console.log("binomtest:",r,i,c,l,f,n.loss.binomtest)):(console.log("can't binomtest",r,i,c,l,f),n.loss.binomtest=NaN)}return n},tuneModelB(e,t){let r=[t];t===void 0&&(r=[10,20,40,110,120,140,150],r.push(this.stats.max),r=r.filter(i=>i<=this.stats.max*5));let n={np:0,n:1,loss:{mse:void 0,chisq:void 0,pval:void 0}};if(!this.histogramLuckOnly){console.log("tuneModelB skip");return}return r.forEach(i=>{const o=this.makeModelB(e,i);if(!o)return;Ei(o.loss.mse)&&(!Ei(n.loss.mse)||o.loss.mse<n.loss.mse)&&(n=o)}),n&&n.np>0&&n.np<=n.n?n:(console.log(`tuneModelB np=${e} -> failed`),null)},applySelectedNp(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_np=e)},applySelectedN(e){e<0||(e<this.selected_np&&(this.selected_np=e),this.selected_n=e)}},computed:{histogramLuckOnly(){const e={...this.histogram.map};e[0]=this.histogram.map[0]-this.stats.unlucky.len;const t=[],r=[];for(const[n,i]of Object.entries(e)){if(n==0){const o=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenHi),a=this.histogram.map[0]-(this.stats.len-this.stats.lucky.lenLo);r.push([n,a,o])}t.push([n,i])}return{map:e,arr:t,err:r}},zeroBinRange(){return{min:this.histogramLuckOnly.err[0][1],max:this.histogramLuckOnly.err[0][2]}},npRangeForBinary(){if(Object.keys(this.histogram.map).length==2&&1 in this.histogram.map){const e=this.histogram.map[1];return{min:e/(this.zeroBinRange.max+e),max:e/(this.zeroBinRange.min+e)}}},modelB(){const e=this.makeModelB(this.selected_np,this.selected_n);return console.log("modelB",e),e},modelBForChart(){const e=this.stats.len,t=this.stats.generalSigmas,r=[];return this.modelB.bell.forEach(([n,i])=>{const o=i/e,a=t*Math.sqrt(o*(1-o)/e),s=Math.max(0,o-a)*e,l=Math.min(1,o+a)*e;r.push([n,i,s,l])}),r},modelBSweep(){const e=Math.max(this.stats.meanLo/this.stats.lucky.share,0);if(e>8888888)return console.log("modelBSweep skip - no input",this.stats.meanLo,this.stats.lucky.share,this.stats.lucky.std),!1;this.sweep_lo=e,this.sweep_hi=this.stats.meanHi/this.stats.lucky.share;const t=this.sweep_hi-e;let r=10;const n=[.002,.005,.01,.02,.05,.1,.2,.5,1,2,5];for(const s of n)if(Math.floor(t/s)<40){r=s;break}if(Math.floor(t/r)>1e3)return!1;const i=Math.ceil(e/r)*r;let o={np:void 0,n:void 0,loss:{mse:1/0,chisq:1/0,pval:0}};const a=[];for(let s=i;s<=this.sweep_hi;s+=r){const l=this.tuneModelB(s,void 0);if(!l)continue;a.push([s,l.n,l.loss.mse,l.loss.chisq,l.loss.pval]),Ei(l.loss.mse)&&(!Ei(o.loss.mse)||l.loss.mse<o.loss.mse)&&(console.log("new best model",s,l),o=l)}return this.selected_np=o.np,this.selected_n=o.n,{result:o,log:a}},makeChartBSweep(){const e={legend:{},tooltip:{trigger:"axis",formatter:function(t){const r=t[0].data;return`np=${wt(r[0],2)}<br/>n=${wt(r[1])}<br/>MSE=${r[2].toLocaleString(void 0,{notation:"compact"})}<br/>\u03C7\xB2=${r[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${wt(r[4],2)}<br/>`}},title:{subtext:"",left:"center",textStyle:{fontSize:10}},dataset:[{source:this.modelBSweep.log}],xAxis:{min:this.sweep_lo,max:this.sweep_hi,name:"np",nameLocation:"center",nameGap:20,axisLine:{onZero:!1},axisLabel:{showMinLabel:!1}},yAxis:[{position:"left",axisLabel:{formatter:t=>this.formatKMG(t)},splitLine:{show:!1}},{position:"right"}],grid:{left:35,top:30,right:40,bottom:20},series:[{name:"MSE",type:"line",encode:{x:0,y:2},tooltip:{valueFormatter:t=>wt(t,2)}},{name:"p-val",type:"line",encode:{x:0,y:4},tooltip:{valueFormatter:t=>wt(t,4)},yAxisIndex:1}]};return console.log("makeChartBSweep",e.dataset),e},makeChartBHist(){return{legend:null,tooltip:{trigger:"axis"},dataset:[{source:this.histogramLuckOnly.arr},{source:this.histogramLuckOnly.err},{source:this.modelBForChart}],xAxis:{axisLine:{onZero:!1},min:-1,max:this.stats.max+1},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:8,right:10,bottom:20},series:[{type:"bar",name:"observed",datasetIndex:0,encode:{x:0,y:1},tooltip:{valueFormatter:t=>wt(t,0)}},{type:"line",name:"model",datasetIndex:2,encode:{x:0,y:1},tooltip:{valueFormatter:t=>wt(t,3)},showSymbol:!1},{type:"line",name:`-${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:2},tooltip:{valueFormatter:t=>wt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"line",name:`+${this.stats.generalSigmas}\u03C3`,datasetIndex:2,encode:{x:0,y:3},tooltip:{valueFormatter:t=>wt(t,0)},showSymbol:!1,lineStyle:{opacity:.4}},{type:"custom",name:"observed-error",datasetIndex:1,encode:{x:0,y:[1,2]},itemStyle:{borderWidth:1.5},renderItem:function(t,r){var n=r.value(0),i=r.coord([n,r.value(1)]),o=r.coord([n,r.value(2)]),a=r.size([1,0])[0]*.1,s=r.style({stroke:r.visual("color"),fill:void 0});return{type:"group",children:[{type:"line",transition:["shape"],shape:{x1:i[0]-a,y1:i[1],x2:i[0]+a,y2:i[1]},style:s},{type:"line",transition:["shape"],shape:{x1:i[0],y1:i[1],x2:o[0],y2:o[1]},style:s},{type:"line",transition:["shape"],shape:{x1:o[0]-a,y1:o[1],x2:o[0]+a,y2:o[1]},style:s}]}},tooltip:{show:!1},z:100}]}}}},wr=e=>(Xe("data-v-7790bb48"),e=e(),Ye(),e),Mle=wr(()=>y("span",{class:"title"},"Model B",-1)),xle=wr(()=>y("span",null,[N(": majority (1-\u03BB) of points are zero, but \u03BB points are from a binomial distribution with such "),y("i",null,"np"),N(", that \u03BB"),y("i",null,"np"),N(" = M")],-1)),Lle=N("Sweeping through "),Ile=wr(()=>y("i",null,"np",-1)),Ole={style:{float:"left"}},Rle={key:0,id:"chartSweep"},Dle={style:{padding:"1em"}},Nle={style:{float:"left"}},Fle=wr(()=>y("th",null,null,-1)),$le=wr(()=>y("th",null,"np",-1)),Ble=wr(()=>y("th",null,"n",-1)),zle=wr(()=>y("th",null,"MSE",-1)),Vle=wr(()=>y("th",null,"p-val",-1)),Ule={key:0},Wle=wr(()=>y("td",null,"Best fit:",-1)),Gle=wr(()=>y("td",null,"Manual:",-1)),jle=N(" np\u1D38: "),Hle=["value","min","max","step"],Xle=N(" n\u1D38: "),Yle=["value"],qle=wr(()=>y("div",{style:{clear:"both"}},null,-1)),Zle={key:0,style:{float:"left"}},Kle={id:"chartHisto"},Jle=wr(()=>y("br",null,null,-1)),Qle={key:0},tue=N(" Corresponding range for "),eue=wr(()=>y("i",null,"np",-1)),rue={key:1},nue=wr(()=>y("div",{style:{clear:"both"}},null,-1)),iue=wr(()=>y("p",{class:"fsxs"},[N("MSE: "),y("i",null,"\u03A3 (observed - model)\xB2"),N(", discard nothing \u2190 this is used for fitting")],-1)),oue={key:0,class:"fsxs"},aue=N("p-val: "),sue=wr(()=>y("a",{href:"https://en.wikipedia.org/wiki/Binomial_test"},"exact",-1)),lue=[aue,sue],uue=wr(()=>y("p",{class:"fsxs"},[N("\u03C7\xB2: discard bins where model < 3, then "),y("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),cue=wr(()=>y("p",{class:"fsxs"},[N("p-val: "),y("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function fue(e,t,r,n,i,o){const a=Qt("v-chart");return I(),O(j,null,[Mle,xle,o.modelB?(I(),O(j,{key:0},[y("p",null,[Lle,Ile,N(" values in "+A(o.formatFixed(this.sweep_lo,2))+"\u2026"+A(o.formatFixed(this.sweep_hi,2))+" range:",1)]),y("div",null,[y("div",Ole,[o.modelBSweep?(I(),O("div",Rle,[Et(a,{option:o.makeChartBSweep},null,8,["option"])])):tt("",!0),y("div",Dle,[y("div",Nle,[y("table",null,[y("tr",null,[Fle,$le,Ble,zle,tt("",!0),Vle]),o.modelBSweep.result?(I(),O("tr",Ule,[Wle,y("td",null,A(o.formatFixed(o.modelBSweep.result.np,3)),1),y("td",null,A(o.modelBSweep.result.n),1),y("td",null,A(o.formatFixed(o.modelBSweep.result.loss.mse,2)),1),tt("",!0),y("td",null,A(o.formatFixed(o.modelBSweep.result.loss.pval,4)),1)])):tt("",!0),y("tr",null,[Gle,y("td",null,A(o.formatFixed(e.selected_np,3)),1),y("td",null,A(e.selected_n),1),y("td",null,A(o.formatFixed(o.modelB.loss.mse,2)),1),tt("",!0),y("td",null,A(o.formatFixed(o.modelB.loss.pval,4)),1)])]),y("p",null,[jle,y("input",{type:"range",onInput:t[0]||(t[0]=s=>o.applySelectedNp(Number(s.target.value))),value:e.selected_np,min:r.stats.min,max:e.sweep_hi*1.5,step:.01,class:"vmid"},null,40,Hle),Xle,y("input",{type:"range",onInput:t[1]||(t[1]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Yle)])]),qle])]),o.modelB.bell?(I(),O("div",Zle,[y("div",Kle,[Et(a,{option:o.makeChartBHist},null,8,["option"])]),y("div",null,[N(" Bin 0 has 1-\u03BB \u2248 "+A(o.formatFixed(r.stats.unlucky.len))+" samples removed, "+A(o.formatFixed(o.histogramLuckOnly.arr[0][1]))+" remaining",1),Jle,N(" Depending on actual \u03BB could potentially be "+A(o.formatFixed(o.histogramLuckOnly.err[0][1]))+"\u2026"+A(o.formatFixed(o.histogramLuckOnly.err[0][2]))+" remaining ",1),o.npRangeForBinary?(I(),O("p",Qle,[tue,eue,N(": "+A(o.formatFixed(o.npRangeForBinary.min,3))+"\u2026"+A(o.formatFixed(o.npRangeForBinary.max,3)),1)])):tt("",!0)])])):(I(),O("div",rue," bad parameters ")),nue]),y("div",null,[iue,o.npRangeForBinary?(I(),O("p",oue,lue)):(I(),O(j,{key:1},[uue,cue],64))])],64)):tt("",!0)],64)}const hue=be(Ale,[["render",fue],["__scopeId","data-v-7790bb48"]]);Yr([_f,__,Bp,zp,wf,bf,Sf,Vp,w_,b_,y_,Up]);class due{constructor(){this.data={},this.xmin=999,this.xmax=-999,this.ymin=999,this.ymax=-999}put(t,r,n){this.data.hasOwnProperty(t)||(this.data[t]={}),this.data[t][r]=n,this.xmin=Math.min(this.xmin,r/1e4),this.xmax=Math.max(this.xmax,r/1e4),this.ymin=Math.min(this.ymin,t/1e4),this.ymax=Math.max(this.ymax,t/1e4)}get(t,r){return!this.data.hasOwnProperty(t)||!this.data[t].hasOwnProperty(r)?null:this.data[t][r]}aslist(){let t=[];for(let[r,n]of Object.entries(this.data).sort((i,o)=>i[0]-o[0]))for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))t.push([r/1e4,i/1e4,o.n,o.loss.mse,o.loss.chisq,o.loss.pval]);return t}}const pue={data:()=>({selected_npL:1,selected_npU:1,selected_n:10,isGiant_lucky:!1,forceMSE:!1,bestPval:0}),props:{stats:Object,histogram:Object,isGiant:Boolean},components:{VChart:Tf},methods:{isGoodVal:Ei,formatFixed:wt,formatKMG:wk,makeBinomialArray:TC,makeBinomialArraysForGiant:Gse,sumDistributions:jse,loss:kC,applyGiantBonus:rG,ul2u(e,t,r){return r/(1-t)-t*e/(1-t)},l2u(e,t,r){return r-t*e},findPsStep(e,t,r,n,i){let a={il:0,iu:0,model:i};for(let s=-30;s<=30;s++)for(let l=-30;l<=30;l++){const u=t+l*n,c=r+s*n;if(u<0||c<0)continue;const f=this.isGiant?this.sweepRange.u_hi:this.l2u(c/1e4,this.stats.lucky.shareLo,this.sweepRange.u_hi);if(u/1e4>f)continue;const h=this.l2u(c/1e4,this.stats.lucky.shareHi,this.sweepRange.u_lo);if(u/1e4<h)continue;let d=e.get(u,c);d===null&&(d=this.makemodelC(c/1e4,void 0,u/1e4,void 0),this.bestPval=Math.max(this.bestPval,d.loss.pval),e.put(u,c,d)),d.loss.mse<a.model.loss.mse&&(a={il:s,iu:l,model:d})}return a},findPsRound(e,t,r,n,i,o){for(;t<=150;){let a=this.findPsStep(e,r,n,o,i);if(a.il==0&&a.iu==0)return console.log("no improvement on round",t),{round:t,curU:r,curL:n,model:a.model};if(r+=a.iu*o,n+=a.il*o,n/1e4>this.stats.max)return{round:t,curU:r,curL:n,model:a.model};t++}return{round:t,curU:r,curL:n,model:i}},makemodelC(e,t,r){let n=[t];t===void 0&&(n=[10,20,40,120],n=n.filter(o=>o>=e&&o>=r&&o>=this.stats.max));let i={n:void 0,loss:{mse:void 0,chisq:void 0,pval:void 0}};return this.stats.unlucky.len==0||(n.forEach(o=>{const a={npL:e,n:o,npU:r};if(this.isGiant){const l=this.makeBinomialArraysForGiant(r,this.stats.unlucky.len,e,this.stats.lucky.len,o,this.isGiant_lucky);a.bellU=l.bellU,a.bellL=l.bellL,a.bell=this.sumDistributions(a.bellL,a.bellU)}else a.bellU=this.makeBinomialArray(r,this.stats.unlucky.len,o),a.bellL=this.makeBinomialArray(r+e,this.stats.lucky.len,o),a.bell=this.sumDistributions(a.bellL,a.bellU);a.loss=this.loss(a.bell,this.histogram.map,3),Ei(a.loss.mse)&&(!Ei(i.loss.mse)||a.loss.mse<i.loss.mse)&&(i=a)}),i||console.log("makemodelC failed",e,r,t)),i},applySelectedNpL(e){e<0||(e>this.selected_nL&&(this.selected_nL=Math.ceil(e)),e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npL=e)},applySelectedNpU(e){e<0||(e>this.selected_n&&(this.selected_n=Math.ceil(e)),this.selected_npU=e)},applySelectedNL(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),this.selected_nL=e)},applySelectedNU(e){e<0||(e<this.selected_npU&&(this.selected_npU=e),this.selected_nU=e)},applySelectedN(e){e<0||(e<this.selected_npL&&(this.selected_npL=e),e<this.selected_npU&&(this.selected_npU=e),this.selected_n=e)},meanOfDistribution(e){let t=0,r=0;for(let[n,i]of e)t+=i,r+=n*i;return r/t}},computed:{modelC(){const e=this.makemodelC(this.selected_npL,this.selected_n,this.selected_npU);return console.log("modelC",e),e},sweepRange(){const e={u_lo:Math.max(0,this.stats.meanLo),u_init:this.stats.mean,u_hi:this.stats.meanHi,l_init:0};if(this.isGiant){const t=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!1),r=this.meanOfDistribution(t),n=this.makeBinomialArray(e.u_init,this.stats.unlucky.len,100,!0),o=this.meanOfDistribution(n)/r;console.log("init giant bonus",o),e.u_lo/=o,e.u_init/=o,e.u_hi/=o}return e},modelCSweep(){if(isNaN(this.stats.mean))return!1;this.bestPval=0;let e=1;const t=this.sweepRange.u_hi-this.sweepRange.u_lo;let r=1e4;t<3&&(r=5e3),t<1.5&&(r=2500),t<.6&&(r=1e3),t<.3&&(r=500),t<.12&&(r=200),t<.06&&(r=100),t<.03&&(r=50);let n=Math.round(this.sweepRange.u_init*1e4/r)*r,i=Math.round(this.sweepRange.l_init*1e4/r)*r;n<0&&(n=0),i<0&&(i=0);let o=this.makemodelC(i/1e4,void 0,n/1e4,void 0);this.stats.psGridPath=[[0,n/1e4,i/1e4,o.loss.chisq]];let a=new due;a.put(n,i,o),{round:e,curU:n,curL:i,model:o}=this.findPsRound(a,e,n,i,o,r);const s=a.aslist();return this.selected_npL=o.npL,this.selected_npU=o.npU,this.selected_n=o.n,console.log("modelCSweep",o,this.stats.lucky.mean),{result:o,psGridDotsMap:a,psGridDots:s}},makeChartCHist(){return{legend:{},tooltip:{trigger:"axis",valueFormatter:t=>wt(t,0)},dataset:[{source:this.histogram.arr},{source:this.modelC.bell},{source:this.modelC.bellL},{source:this.modelC.bellU}],xAxis:{min:this.stats.min==0?-1:null,max:this.stats.max<5?this.stats.max+1:null},yAxis:{axisLine:{onZero:!1},axisLabel:{formatter:t=>this.formatKMG(t)}},grid:{left:35,top:30,right:10,bottom:20},series:[{name:"observed",type:"bar",encode:{x:0,y:1},tooltip:{trigger:"axis",valueFormatter:t=>wt(t,0)}},{name:"model \u03A3",type:"line",datasetIndex:1,encode:{x:0,y:1},showSymbol:!1},{name:"model U",type:"line",datasetIndex:3,encode:{x:0,y:1},showSymbol:!1},{name:"model L",type:"line",datasetIndex:2,encode:{x:0,y:1},showSymbol:!1}]}},makeChartCGrid(){const e=2.272727272727273;let{xmin:t,xmax:r,ymin:n,ymax:i}=this.modelCSweep.psGridDotsMap;const o=(t+r)/2,a=(n+i)/2;let s=.2;this.stats.mean<2&&(s=.05);const l=1.2*(this.modelCSweep.psGridDotsMap.xmax-this.modelCSweep.psGridDotsMap.xmin)+s,u=1.2*(this.modelCSweep.psGridDotsMap.ymax-this.modelCSweep.psGridDotsMap.ymin)+s;if(l/u>e){const g=l,_=l/e;t=o-g/2,r=o+g/2,n=a-_/2,i=a+_/2}else{const g=u*e,_=u;t=o-g/2,r=o+g/2,n=a-_/2,i=a+_/2}const f={xmin:t,xmax:r,ymin:n,ymax:i},h=this.forceMSE||isNaN(this.modelCSweep.result.loss.pval);let d=h?["#282","#2c2","#cc2","#ccc"]:["#ccc","#cc2","#2c2","#282"];const p={inRange:{color:d},calculable:!0,precision:h?0:2,controller:{inRange:{color:d}},orient:"vertical",top:"center",right:10,align:"left",padding:0};let v=h?{min:this.modelCSweep.result.loss.mse,max:this.modelCSweep.result.loss.mse*2,dimension:3,text:["MSE",""]}:{min:0,max:this.bestPval,dimension:5,text:["p-val",""]};return{legend:{},tooltip:{trigger:"item",axisPointer:{type:"cross"},formatter:function(g){const _=g.data;return`np\u1D41=${wt(_[0],2)}<br/>np\u1D38=${wt(_[1],2)}<br/>n=${wt(_[2],2)}<br/>MSE=${_[3].toLocaleString(void 0,{notation:"compact"})}<br/>p-val=${wt(_[5],2)}<br/>`}},title:{},dataset:[{source:this.modelCSweep.psGridDots}],xAxis:{name:"np\u1D38",nameGap:5,min:f.xmin,max:f.xmax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},yAxis:{name:"np\u1D41",nameGap:5,min:f.ymin,max:f.ymax,axisLabel:{showMinLabel:!1,showMaxLabel:!1},axisLine:{onZero:!1}},grid:{left:35,top:30,right:40,bottom:20},series:[{type:"scatter",encode:{x:1,y:0,tooltip:[1,0,3]},tooltip:{valueFormatter:g=>`${g[1]} \u2192 ${wt(g[2],4)}`},symbolSize:6,markArea:{silent:!0,data:[[{name:`M\xB1${this.stats.generalSigmas}\u03C3`,coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.sweepRange.u_lo]},{coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.sweepRange.u_hi]}]],label:{show:!0,position:"left"},itemStyle:{color:"rgba(0, 0, 200, 0)",borderWidth:1,borderType:"dashed"}},markLine:{silent:!0,symbol:"none",data:[this.isGiant?[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}]:[{name:"low \u03BB, high M",label:{position:"insideMiddleTop"},coord:[this.sweepRange.u_hi-this.sweepRange.u_init,this.l2u(this.sweepRange.u_hi-this.sweepRange.u_init,this.stats.lucky.shareLo,this.sweepRange.u_hi)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareLo,this.sweepRange.u_hi)]}],[{name:"high \u03BB, low M",label:{position:"insideMiddleBottom"},coord:[this.sweepRange.u_lo-this.sweepRange.u_init,this.l2u(this.sweepRange.u_lo-this.sweepRange.u_init,this.stats.lucky.shareHi,this.sweepRange.u_lo)]},{coord:[this.modelCSweep.psGridDotsMap.xmax,this.l2u(this.modelCSweep.psGridDotsMap.xmax,this.stats.lucky.shareHi,this.sweepRange.u_lo)]}]]}}],visualMap:{...p,...v}}}}},Sn=e=>(Xe("data-v-b8ef0950"),e=e(),Ye(),e),vue=Sn(()=>y("span",{class:"title"},"Model C",-1)),gue=N(": some points were taken from a distribution L, and the rest from distribution U,"),mue=Sn(()=>y("br",null,null,-1)),_ue=Sn(()=>y("br",null,null,-1)),yue=N(" with giant bonus on Unlucky"),bue=N(" with giant bonus on Lucky"),wue={style:{float:"left"}},Sue={key:0,style:{width:"570px",height:"270px"}},Tue={style:{padding:"1em"}},kue={style:{float:"left"}},Pue=Sn(()=>y("tr",null,[y("th"),y("th",null,"np\u1D41"),y("th",null,"np\u1D38"),y("th",null,"n"),y("th",null,"MSE"),y("th",null,"p-val")],-1)),Eue=Sn(()=>y("td",null,"Best fit:",-1)),Cue=Sn(()=>y("td",null,"Manual:",-1)),Aue=["value","min","max","step"],Mue=N(" np\u1D41 "),xue=Sn(()=>y("br",null,null,-1)),Lue=["value","max","step"],Iue=N(" np\u1D38 "),Oue=Sn(()=>y("br",null,null,-1)),Rue=["value"],Due=N(" n "),Nue=Sn(()=>y("div",{style:{clear:"both"}},null,-1)),Fue={key:0,id:"chartHisto",style:{float:"left"}},$ue=Sn(()=>y("div",{style:{clear:"both"}},null,-1)),Bue=Sn(()=>y("br",null,null,-1)),zue=Sn(()=>y("p",{class:"fsxs"},[N("MSE: "),y("i",null,"\u03A3 (observed - model)\xB2"),N(", discard nothing \u2190 this is used for fitting")],-1)),Vue=Sn(()=>y("p",{class:"fsxs"},[N("\u03C7\xB2: discard bins where model < 3, then "),y("i",null,"\u03A3 (observed - model)\xB2 / model")],-1)),Uue=Sn(()=>y("p",{class:"fsxs"},[N("p-val: "),y("i",null,"1 - chisquare.cdf(\u03C7\xB2, bins - 1 - dof) \u2190 this depends too much on previous step discards")],-1));function Wue(e,t,r,n,i,o){const a=Qt("v-chart");return I(),O(j,null,[vue,y("span",null,[gue,mue,N(" so (1 - \u03BB) np\u1D41 + \u03BB (np\u1D41 + np\u1D38) = M, where \u03BB \u2208 "+A(o.formatFixed(r.stats.lucky.shareLo*100,2))+"\u2026"+A(o.formatFixed(r.stats.lucky.shareHi*100,2))+"% and M \u2208 "+A(o.formatFixed(r.stats.mean-1.96*r.stats.meanErr,2))+"\u2026"+A(o.formatFixed(r.stats.mean+1.96*r.stats.meanErr,2)),1)]),_ue,y("p",null,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>r.isGiant=s)},null,512),[[sr,r.isGiant]]),yue]),y("p",null,[ht(y("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>e.isGiant_lucky=s)},null,512),[[sr,e.isGiant_lucky]]),bue]),y("div",wue,[o.modelCSweep?(I(),O("div",Sue,[Et(a,{option:o.makeChartCGrid},null,8,["option"])])):tt("",!0),y("div",Tue,[y("div",kue,[y("table",null,[Pue,o.modelCSweep.result?(I(),O("tr",{key:0,class:xr({strike:r.stats.dBad})},[Eue,y("td",null,A(o.formatFixed(o.modelCSweep.result.npU,2)),1),y("td",null,A(o.formatFixed(o.modelCSweep.result.npL,2)),1),y("td",null,A(o.modelCSweep.result.n),1),y("td",null,A(o.formatFixed(o.modelCSweep.result.loss.mse,2)),1),y("td",null,A(o.formatFixed(o.modelCSweep.result.loss.pval,4)),1)],2)):tt("",!0),y("tr",null,[Cue,y("td",null,A(o.formatFixed(e.selected_npU,2)),1),y("td",null,A(o.formatFixed(e.selected_npL,2)),1),y("td",null,A(e.selected_n),1),y("td",null,A(o.formatFixed(o.modelC.loss.mse,2)),1),y("td",null,A(o.formatFixed(o.modelC.loss.pval,4)),1)])]),y("p",null,[y("input",{type:"range",onInput:t[2]||(t[2]=s=>o.applySelectedNpU(Number(s.target.value))),value:e.selected_npU,min:r.stats.min,max:r.stats.max,step:.01,class:"vmid"},null,40,Aue),Mue,xue,y("input",{type:"range",onInput:t[3]||(t[3]=s=>o.applySelectedNpL(Number(s.target.value))),value:e.selected_npL,min:0,max:r.stats.max,step:.01,class:"vmid"},null,40,Lue),Iue,Oue,y("input",{type:"range",onInput:t[4]||(t[4]=s=>o.applySelectedN(Number(s.target.value))),value:e.selected_n,min:1,max:200,step:1,class:"vmid"},null,40,Rue),Due])]),Nue])]),o.modelC.bell?(I(),O("div",Fue,[Et(a,{option:o.makeChartCHist},null,8,["option"])])):tt("",!0),$ue,Bue,zue,Vue,Uue],64)}const Gue=be(pue,[["render",Wue],["__scopeId","data-v-b8ef0950"]]);Yr([_f,__,Bp,zp,wf,bf,Sf,Vp,w_,b_,y_,Up]);const jue={setup(){const e=_t(),t=PY(),r=localStorage.getItem("droprates");return t.$patch(JSON.parse(r)),t.$subscribe((n,i)=>{localStorage.setItem("droprates",JSON.stringify(i))}),{gameStore:e,dropratesStore:t}},components:{VChart:Tf,DRMA:Cle,DRMB:hue,DRMC:Gue},provide(){return{[Gft]:Ze(()=>this.darkMode?"dark":"default")}},data(){const e=matchMedia("(prefers-color-scheme: dark)");return{alldata:{},generalSigmas:2,hide_buckets:{},darkModeQuery:e,darkMode:e.matches}},created(){this.fetchObservations()},mounted(){this.darkModeQuery.addEventListener("change",()=>{this.darkMode=this.darkModeQuery.matches})},watch:{},computed:{currentDataset(){const e={};if(this.dropratesStore.selected_pzk in this.alldata){const t=this.alldata[this.dropratesStore.selected_pzk];if(this.dropratesStore.selected_ik in t){const r=t[this.dropratesStore.selected_ik];if(this.dropratesStore.selected_specie in r){const n=r[this.dropratesStore.selected_specie];for(let[i,o]of Object.entries(n).sort((a,s)=>a[0]-s[0]))e[i]=o}}}return e},weightedDataset(){let e={};for(let[t,r]of Object.entries(this.currentDataset)){if(this.hide_buckets[t])continue;const n=r.length;let i=[];for(let o=0;o<n;o++){const a=dt.binomial.cdf(o,n,1-t/100);i.push(a)}e[t]={len:n,luckyLen:n*t/100,sorted:[...r].sort((o,a)=>o-a),weights:i}}return e},stats(){const e=this.currentDataset;let t=0,r=0;for(const[v,m]of Object.entries(e))t+=e[v].length,r+=e[v].length;const n=this.weightedDataset;for(let[v,m]of Object.entries(n))for(let g of m.weights)g>this.stats.generalConfidence/100,g>1-this.stats.generalConfidence/100;let i=[],o=[],a=0,s=100,l=0;for(const[v,m]of Object.entries(n)){s=Math.min(s,v),l=Math.max(l,v);let{len:g,luckyLen:_,sorted:b,weights:w}=m;a+=_,i.push(...b),o.push(...w)}const u={1.5:86.6385597,2:95.4499736,2.5:98.7580669,3:99.7300203,3.5:99.9534741841929,4:99.9936657516334},c={generalSigmas:this.generalSigmas,generalConfidence:u[this.generalSigmas],lenRaw:t,dataRaw:e,dataByLuck:n,minLuck:s,maxLuck:l,dataFlatSorted:i,weightsFlat:o,len:i.length,min:dt.min(i),max:dt.max(i),range:dt.range(i),sum:dt.sum(i),mean:dt.mean(i),meanErr:0,meanLo:0,meanHi:0,std:dt.stdev(i,!0),bell:[],histo:[]};if(c.meanErr=Math.sqrt(c.mean/c.max*(1-c.mean/c.max)*c.max/c.len),c.meanLo=c.mean-this.generalSigmas*c.meanErr,c.meanHi=c.mean+this.generalSigmas*c.meanErr,c.lucky={len:a,share:a/c.len,mean:0,std:0,lenHi:0,lenLo:0,shareHi:0,shareLo:0},isNaN(c.lucky.share))c.lucky.shareLo=NaN,c.lucky.shareHi=NaN,c.lucky.lenLo=NaN,c.lucky.lenHi=NaN;else{console.log("binomTest of lucky share%=",c.lucky.share,"with significance=",1-c.generalConfidence/100);const v=this.binomialTest(Math.round(c.lucky.len),c.len,{p:c.lucky.share,alpha:1-c.generalConfidence/100});c.lucky.shareLo=v.ci[0],c.lucky.shareHi=v.ci[1],c.lucky.lenLo=v.ci[0]*c.len,c.lucky.lenHi=v.ci[1]*c.len}c.unlucky={len:c.len-a,share:1-c.lucky.share,mean:0,std:0};let f=0,h=0;for(const[v,m]of Object.entries(n)){let{len:g,luckyLen:_,luckeyLen95:b,sorted:w,weights:T}=m;for(let S=0;S<g;S++){const k=w[S],C=T[S];f+=k*(1-C),h+=k*C}}c.unlucky.mean=f/c.unlucky.len,c.lucky.mean=h/c.lucky.len;let d=0,p=0;for(const[v,m]of Object.entries(n)){let{len:g,sorted:_,weights:b}=m;for(let w=0;w<g;w++){const T=b[w],S=_[w]-c.unlucky.mean;d+=S*S*(1-T);const k=_[w]-c.lucky.mean;p+=k*k*T}}return c.unlucky.std=Math.sqrt(d/c.unlucky.len),c.lucky.std=Math.sqrt(p/c.lucky.len),console.log("stats",c),c},histogram(){const e={arr:[],map:{}};if(this.stats.range>0){let t=[1];t=dt.histogram(this.stats.dataFlatSorted,this.stats.range+1);const n=Array.from(Array(this.stats.range+1).keys()).map(i=>[this.stats.min+i,t[i]]);e.arr=n;for(let i=0;i<t.length;i++)e.map[this.stats.min+i]=t[i]}else e.arr=[[this.stats.min,this.stats.len]],e.map[this.stats.min]=this.stats.len;return console.log("histogram",e),e}},methods:{formatFixed:wt,makeIconSrc:Dn,binomialTest:fC,async fetchObservations(){const e=Date.now();this.alldata=await(await fetch("data/manual/yields_observed.json")).json();const t=this.dropratesStore.selected_pzk;this.dropratesStore.selected_pzk=t&&this.alldata[t]?t:Object.keys(this.alldata)[0];const r=this.dropratesStore.selected_ik;this.dropratesStore.selected_ik=r&&this.alldata[t][r]?r:Object.keys(this.alldata[t])[0];const n=this.dropratesStore.selected_specie;this.dropratesStore.selected_specie=n&&this.alldata[t][r][n]?n:Object.keys(this.alldata[t][r])[0],console.log("fetchObservations took",Date.now()-e,"ms",this.dropratesStore.selected_pzk,this.dropratesStore.selected_ik,this.dropratesStore.selected_specie)},activate(e,t,r){this.dropratesStore.selected_pzk=e,this.dropratesStore.selected_ik=t,this.dropratesStore.selected_specie=r}}},qi=e=>(Xe("data-v-60e89c6f"),e=e(),Ye(),e),Hue={id:"menu"},Xue={style:{display:"none"}},Yue=qi(()=>y("p",{class:"fsxs"},"Left: droprate parameters currently used in workerman",-1)),que=qi(()=>y("p",{class:"fsxs"},"Right: observations used to find out current serverside parameters",-1)),Zue={key:1},Kue=qi(()=>y("tr",null,[y("th",{class:"fsxs"},"n"),y("th",{class:"fsxs"},"np\u1D41"),y("th",{class:"fsxs"},"np\u1D38"),y("th",{class:"fsxs"},"item"),y("th",{class:"fsxs"},"normal"),y("th",{class:"fsxs"},"giant")],-1)),Jue={class:"fsxs"},Que={class:"fsxs"},tce={class:"fsxs"},ece=["src"],rce={class:"center"},nce=["title","onClick"],ice=["title"],oce={id:"content"},ace=qi(()=>y("tr",null,[y("td",null,"mute"),y("td",null,"luck")],-1)),sce={class:"center"},lce=["onUpdate:modelValue"],uce=N(" Possible luck procs observed with "),cce=$1('<option value="1.5" data-v-60e89c6f>\xB11.5\u03C3</option><option value="2" data-v-60e89c6f>\xB12\u03C3</option><option value="2.5" data-v-60e89c6f>\xB12.5\u03C3</option><option value="3" data-v-60e89c6f>\xB13\u03C3</option><option value="3.5" data-v-60e89c6f>\xB13.5\u03C3</option><option value="4" data-v-60e89c6f>\xB14\u03C3</option>',6),fce=[cce],hce=qi(()=>y("tr",null,[y("th"),y("th",null,"min"),y("th",null,"max")],-1)),dce=qi(()=>y("td",null,"count",-1)),pce=qi(()=>y("td",null,"% of total",-1)),vce={id:"settings"},gce=N(" Use model:"),mce=qi(()=>y("br",null,null,-1)),_ce=qi(()=>y("label",{for:"option1"},[N("A. Same item drop regardless of luck (plants, lumber, ores)"),y("br")],-1)),yce=qi(()=>y("label",{for:"option2"},[N("B. Item only drops when luck procs (sacks, lumbering rares)"),y("br")],-1)),bce=qi(()=>y("label",{for:"option3"},[N("C. Different drops when luck procs and when not (eggs, honey)"),y("br")],-1)),wce={key:0,id:"modelA",style:{float:"left"}},Sce={key:1},Tce={key:2};function kce(e,t,r,n,i,o){const a=Qt("RouterLink"),s=Qt("DRMA"),l=Qt("DRMB"),u=Qt("DRMC");return I(),O("main",null,[y("div",Hue,[y("div",Xue,A(n.dropratesStore.selected_pzk)+" "+A(n.dropratesStore.selected_ik)+" "+A(n.dropratesStore.selected_specie),1),Yue,que,(I(!0),O(j,null,Ct(i.alldata,(c,f)=>(I(),O(j,null,[f in n.gameStore.plantzoneStatic?(I(),xo(a,{key:0,tag:"a",to:{path:"./",hash:"#node"+f}},{default:we(()=>[N(A(f)+" "+A(n.gameStore.plantzoneName(f)),1)]),_:2},1032,["to"])):(I(),O("span",Zue,A(f),1)),y("table",null,[Kue,(I(!0),O(j,null,Ct(c,(h,d)=>(I(),O("tr",null,[y("td",Jue,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones?(I(),O(j,{key:0},[N(A(n.gameStore.plantzones[Number(f)].rolls),1)],64)):tt("",!0)]),y("td",Que,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].unlucky?(I(),O(j,{key:0},[N(A(n.gameStore.plantzones[Number(f)].unlucky[d]),1)],64)):tt("",!0)]),y("td",tce,[n.gameStore.ready&&Number(f)in n.gameStore.plantzones&&d in n.gameStore.plantzones[Number(f)].lucky?(I(),O(j,{key:0},[N(A(n.gameStore.plantzones[Number(f)].lucky[d]),1)],64)):tt("",!0)]),y("td",null,[Et(a,{tag:"a",to:{path:"./settings",hash:"#item"+d}},{default:we(()=>[y("span",null,[y("img",{src:o.makeIconSrc(d),class:"iconitem"},null,8,ece)])]),_:2},1032,["to"]),N(" "+A(n.gameStore.itemName(d)),1)]),(I(),O(j,null,Ct(["normal","giant"],p=>y("td",rce,[p in h?(I(),O(j,{key:0},[f!=n.dropratesStore.selected_pzk||d!=n.dropratesStore.selected_ik||p!=n.dropratesStore.selected_specie?(I(),O("button",{key:0,title:"item "+d,onClick:v=>o.activate(f,d,p)},A(Object.values(h[p]).flat().length),9,nce)):(I(),O("button",{key:1,title:"item "+d,class:"pressed"},A(Object.values(h[p]).flat().length),9,ice))],64)):tt("",!0)])),64))]))),256))])],64))),256))]),y("div",oce,[y("details",null,[y("summary",null,[N("Dataset: size N = "+A(o.stats.len)+", sum "+A(o.stats.sum)+", mean M = "+A(o.formatFixed(o.stats.mean,3))+"\xB1"+A(o.formatFixed(1.96*o.stats.meanErr,3))+", ",1),this.stats.minLuck==this.stats.maxLuck?(I(),O(j,{key:0},[N(A(this.stats.maxLuck),1)],64)):(I(),O(j,{key:1},[N(A(o.formatFixed(this.stats.minLuck,2))+"\u2026"+A(o.formatFixed(this.stats.maxLuck,2)),1)],64)),N("\u{1F340} \u2192 \u03BB \u2208 "+A(o.formatFixed(o.stats.lucky.shareLo*100,2))+"\u2026"+A(o.formatFixed(o.stats.lucky.shareHi*100,2))+"% cycles were lucky ",1)]),y("div",null,[y("table",null,[ace,(I(!0),O(j,null,Ct(o.stats.dataRaw,(c,f)=>(I(),O("tr",{class:xr({strike:i.hide_buckets[f]})},[y("td",sce,[ht(y("input",{"onUpdate:modelValue":h=>i.hide_buckets[f]=h,type:"checkbox"},null,8,lce),[[sr,i.hide_buckets[f]]])]),y("td",null,A(f),1),(I(!0),O(j,null,Ct(c,h=>(I(),O("td",null,A(h),1))),256))],2))),256))])]),y("p",null,[uce,ht(y("select",{"onUpdate:modelValue":t[0]||(t[0]=c=>i.generalSigmas=c)},fce,512),[[ar,i.generalSigmas]]),N(" ("+A(o.formatFixed(o.stats.generalConfidence,2))+"%) confidence: ",1),y("table",null,[hce,y("tr",null,[dce,y("td",null,A(o.formatFixed(o.stats.lucky.lenLo,2)),1),y("td",null,A(o.formatFixed(o.stats.lucky.lenHi,2)),1)]),y("tr",null,[pce,y("td",null,A(o.formatFixed(o.stats.lucky.shareLo*100,2)),1),y("td",null,A(o.formatFixed(o.stats.lucky.shareHi*100,2)),1)])])])]),y("div",vce,[gce,mce,ht(y("input",{type:"radio",id:"option1",value:"a","onUpdate:modelValue":t[1]||(t[1]=c=>n.dropratesStore.selected_model=c)},null,512),[[fd,n.dropratesStore.selected_model]]),_ce,ht(y("input",{type:"radio",id:"option2",value:"b","onUpdate:modelValue":t[2]||(t[2]=c=>n.dropratesStore.selected_model=c)},null,512),[[fd,n.dropratesStore.selected_model]]),yce,ht(y("input",{type:"radio",id:"option3",value:"c","onUpdate:modelValue":t[3]||(t[3]=c=>n.dropratesStore.selected_model=c)},null,512),[[fd,n.dropratesStore.selected_model]]),bce]),n.dropratesStore.selected_model=="a"?(I(),O("div",wce,[Et(s,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):tt("",!0),n.dropratesStore.selected_model=="b"?(I(),O("div",Sce,[Et(l,{stats:o.stats,histogram:o.histogram},null,8,["stats","histogram"])])):tt("",!0),n.dropratesStore.selected_model=="c"?(I(),O("div",Tce,[Et(u,{stats:o.stats,histogram:o.histogram,isGiant:n.dropratesStore.selected_specie=="giant"},null,8,["stats","histogram","isGiant"])])):tt("",!0)])])}const Pce=be(jue,[["render",kce],["__scopeId","data-v-60e89c6f"]]),Ece={setup(){return{gameStore:_t()}},components:{},data(){return{cases:[{label:"ehwaz-pinto",expected:5,tasks:[[1,160],[1,136]]},{label:"glish-lynch_f/heidel-glish_r",expected:9,tasks:[[302,488],[301,480]]}]}},computed:{run_all(){const e=[];for(const t of this.cases)e.push(this.run_case(t));return e}},methods:{run_case(e){const t=_t(),r=[];for(const o of e.tasks)r.push({source:o[0],target:o[1]});const n=t.route([],r);return{...e,...n,passed:n.totalCost==e.expected}}}},Cce={id:"tests"},Ace=y("div",{id:"content"},null,-1);function Mce(e,t,r,n,i,o){return I(),O("main",null,[y("div",Cce,[(I(!0),O(j,null,Ct(o.run_all,a=>(I(),O("div",null,[N(A(a.label)+" "+A(a.totalCost)+" "+A(a.passed?"\u2714\uFE0F":"\u274C")+" ",1),y("button",{onClick:t[0]||(t[0]=()=>{})},"view")]))),256))]),Ace])}const xce=be(Ece,[["render",Mce]]),Lce=gY({history:OX("/workerman/"),routes:[{path:"/",name:"home",component:fMt},{path:"/plantzones",component:v4t},{path:"/modifiers",component:e5t},{path:"/settings",component:U6t},{path:"/about",component:()=>FY(()=>import("./AboutView.34bf529d.js"),[])},{path:"/othertowns",component:Y6t},{path:"/workshops",component:cxt},{path:"/housecraft",component:xxt},{path:"/droprates",component:Pce},{path:"/routertests",component:xce},{path:"/lodging",component:C4t}]});const PC=zH(RY),Ice=hX();PC.use(Ice);PC.use(Lce);PC.mount("#app");export{j as F,be as _,y as a,N as b,O as c,Qt as d,xo as e,Et as f,$1 as g,Ye as h,I as o,Xe as p,$j as r,A as t,_t as u,we as w};
